<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>OpenGL Programming Guide for Mac OS X: Setting Up Function Pointers to OpenGL Routines</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Setting Up Function Pointers to OpenGL Routines"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001987-CH402" title="Setting Up Function Pointers to OpenGL Routines"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../OpenGL-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000549" target="_top">OpenGL</a> &gt; <a href="../opengl_intro/opengl_intro.html#//apple_ref/doc/uid/TP40001987-CH207-TP9">OpenGL Programming Guide for Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../opengl_api_versions/opengl_api_versions.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../opengl_quartz_services/opengl_quartz_services.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001987-CH402-SW6" title="Setting Up Function Pointers to OpenGL Routines"></a><h1>Setting Up Function Pointers to OpenGL Routines</h1><p>Function pointers to OpenGL routines allow you to deploy your application across multiple versions of Mac OS X regardless of whether the entry point is supported at link time or runtime. This practice also  provides support for code that needs to run cross-platform—in both Mac OS X and Windows.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001987-CH402-SW8" title="Note"></a><p><strong>Note:</strong>&nbsp;If you are deploying your application only in Mac OS X v10.4 or later, you do not need to read this chapter. Instead, consider the alternative, which is to set the <code>gcc</code> attribute that allows weak linking of symbols. Keep in mind, however, that weak linking may impact your application's performance. For more information, see <span class="content_text"><a href="../../../../MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html#//apple_ref/doc/uid/20002378" target="_top">Frameworks and Weak Linking</a></span>.</p></div><p>This appendix discusses the tasks needed to set up and use function pointers as entry points to OpenGL routines:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW2">“Obtaining a Function Pointer to an Arbitrary OpenGL Entry Point”</a></span> shows how to write a generic routine that you can reuse for any OpenGL application on the Macintosh platform.</p></li><li class="li"><p><span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW3">“Initializing Entry Points”</a></span> describes how to declare function pointer type definitions and initialize them with the appropriate OpenGL command entry points for your application.</p></li></ul>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW2">Obtaining a Function Pointer to an Arbitrary OpenGL Entry Point</a>
				
			<br/>
			
        
			
			
				<a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW3">Initializing Entry Points</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001987-CH402-SW2" title="Obtaining a Function Pointer to an Arbitrary OpenGL Entry Point"></a><h2>Obtaining a Function Pointer to an Arbitrary OpenGL Entry Point</h2><p>Getting a pointer to an OpenGL entry point function is fairly straightforward from either Cocoa or Carbon. In either framework in Mac OS X, you can use the Dynamic Loader  function <code><a href="../../../../DeveloperTools/Reference/MachOReference/Reference/reference.html#//apple_ref/c/func/NSLookupAndBindSymbol" target="_top">NSLookupAndBindSymbol</a></code> to get the address of an OpenGL entry point. The Dynamic Loader is part of the system framework, not part of Cocoa, which is why <code><a href="../../../../DeveloperTools/Reference/MachOReference/Reference/reference.html#//apple_ref/doc/c_ref/NSLookupAndBindSymbol" target="_top">NSLookupAndBindSymbol</a></code> (declared in <code>/usr/include/mach-o/dyld.h</code>) works in Mach-O Carbon applications as well as Cocoa ones. Carbon applications also have the option of using the AGL API, although this approach involves a bit more code. You'll see how to use both approaches in this section.</p><p>Keep in mind that getting a valid function pointer means that the entry point is exported by the OpenGL framework; it does not guarantee that a particular routine is supported and valid to call from within your application. You still need to check for OpenGL functionality on a per-renderer basis as described in <span class="content_text"><a href="../opengl_general/opengl_gen_tasks.html#//apple_ref/doc/uid/TP40001987-CH211-SW1">“Detecting Functionality.”</a></span> </p><p><span class="content_text">Listing B-1</span> shows how to use <code><a href="../../../../DeveloperTools/Reference/MachOReference/Reference/reference.html#//apple_ref/doc/c_ref/NSLookupAndBindSymbol" target="_top">NSLookupAndBindSymbol</a></code> from within the function <code>MyNSGLGetProcAddress</code>. When provided a symbol name, this application-defined function returns the appropriate function pointer from the global symbol table. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH402-SW4" title="Listing B-1Using NSLookupAndBindSymbol to obtain a symbol for a symbol name"></a><p class="codesample"><strong>Listing B-1&nbsp;&nbsp;</strong>Using <code>NSLookupAndBindSymbol</code> to obtain a symbol for a symbol name</p><div class="codesample"><table><tr><td scope="row"><pre>#import &lt;mach-o/dyld.h><span></span></pre></td></tr><tr><td scope="row"><pre>#import &lt;stdlib.h<span></span></pre></td></tr><tr><td scope="row"><pre>#import &lt;string.h><span></span></pre></td></tr><tr><td scope="row"><pre>void * MyNSGLGetProcAddress (const char *name)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSSymbol symbol;<span></span></pre></td></tr><tr><td scope="row"><pre>    char *symbolName;<span></span></pre></td></tr><tr><td scope="row"><pre>    symbolName = malloc (strlen (name) + 2); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>    strcpy(symbolName + 1, name); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>    symbolName[0] = '_'; <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>    symbol = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    if (NSIsSymbolNameDefined (symbolName)) <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>        symbol = NSLookupAndBindSymbol (symbolName);<span></span></pre></td></tr><tr><td scope="row"><pre>    free (symbolName); <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>    return symbol ? NSAddressOfSymbol (symbol) : NULL; <span>// 6</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Allocates storage for the symbol name plus an underscore character (<code>'_'</code>). The underscore character is part of the UNIX C symbol-mangling convention, so make sure that you provide storage for it.</p></li><li class="li"><p>Copies the symbol name into the string variable, starting at the second character, to leave room for prefixing the underscore character. </p></li><li class="li"><p>Copies the underscore character into the first character of the symbol name string. </p></li><li class="li"><p>Checks to make sure that the symbol name is defined, and if it is, looks up the symbol.</p></li><li class="li"><p>Frees the symbol name string because it is no longer needed.</p></li><li class="li"><p>Returns the appropriate pointer if successful, or <code>NULL</code> if not successful. Before using this pointer, you should make sure that is it valid.</p></li></ol><p>Using the AGL API to obtain a function pointer for an OpenGL entry point requires that you get a Core Foundation bundle reference. As a result, you need to perform a bit of set up work before you make the critical call to the Core Foundation function <code><a href="../../../../CoreFoundation/Reference/CFBundleRef/Reference/reference.html#//apple_ref/doc/c_ref/CFBundleGetFunctionPointerForName" target="_top">CFBundleGetFunctionPointerForName</a></code>, as you'll see by looking at the code in <span class="content_text">Listing B-2</span>. This code requires Carbon and is designed for use with Mach-O and CFM Carbon applications. You would use this approach only if you need to support older versions of your application. If your application runs only in Mac OS X, it should be a Mach-O application. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH402-SW7" title="Listing B-2Using AGL to get a function pointer for an entry in the OpenGL framework"></a><p class="codesample"><strong>Listing B-2&nbsp;&nbsp;</strong>Using AGL to get a function pointer for an entry in the OpenGL framework</p><div class="codesample"><table><tr><td scope="row"><pre> #include &lt;Carbon/Carbon.h><span></span></pre></td></tr><tr><td scope="row"><pre>CFBundleRef gBundleRefOpenGL = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus MyAGLInitEntryPoints (void)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    const Str255 frameworkName = "\pOpenGL.framework"; <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>    FSRefParam fileRefParam;<span></span></pre></td></tr><tr><td scope="row"><pre>    FSRef fileRef;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFURLRef bundleURLOpenGL;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    memset (&amp;fileRefParam, 0, sizeof(fileRefParam)); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>    memset (&amp;fileRef, 0, sizeof(fileRef));<span></span></pre></td></tr><tr><td scope="row"><pre>    fileRefParam.ioNamePtr  = frameworkName; <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>    fileRefParam.newRef = &amp;fileRef;<span></span></pre></td></tr><tr><td scope="row"><pre>    err = FindFolder (kSystemDomain, kFrameworksFolderType, false,<span></span></pre></td></tr><tr><td scope="row"><pre>                            &amp;fileRefParam.ioVRefNum,  &amp;fileRefParam.ioDirID);<span>// 4</span></pre></td></tr><tr><td scope="row"><pre>    if (noErr != err) {<span></span></pre></td></tr><tr><td scope="row"><pre>        DebugStr ("\pCould not find frameworks folder");<span></span></pre></td></tr><tr><td scope="row"><pre>        return err;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    err = PBMakeFSRefSync (&amp;fileRefParam); <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>    if (noErr != err) {<span></span></pre></td></tr><tr><td scope="row"><pre>        DebugStr ("\pCould make FSRef to frameworks folder");<span></span></pre></td></tr><tr><td scope="row"><pre>        return err;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>   bundleURLOpenGL = CFURLCreateFromFSRef (kCFAllocatorDefault,&amp;fileRef); <span>// 6</span></pre></td></tr><tr><td scope="row"><pre>    if (!bundleURLOpenGL) {<span></span></pre></td></tr><tr><td scope="row"><pre>        DebugStr ("\pCould not create OpenGL Framework bundle URL");<span></span></pre></td></tr><tr><td scope="row"><pre>        return paramErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    gBundleRefOpenGL = CFBundleCreate(kCFAllocatorDefault, bundleURLOpenGL); <span>// 7</span></pre></td></tr><tr><td scope="row"><pre>    if (!gBundleRefOpenGL) {<span></span></pre></td></tr><tr><td scope="row"><pre>        DebugStr ("\pCould not create OpenGL Framework bundle");<span></span></pre></td></tr><tr><td scope="row"><pre>        return paramErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease (bundleURLOpenGL); <span>// 8</span></pre></td></tr><tr><td scope="row"><pre>    if (!CFBundleLoadExecutable (gBundleRefOpenGL)) { <span>// 9</span></pre></td></tr><tr><td scope="row"><pre>        DebugStr ("\pCould not load Mach-O executable");<span></span></pre></td></tr><tr><td scope="row"><pre>        return paramErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return err;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>void MyAGLDeAllocEntryPoints (void) <span>// 10</span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (gBundleRefOpenGL != NULL) {<span></span></pre></td></tr><tr><td scope="row"><pre>        CFBundleUnloadExecutable (gBundleRefOpenGL);<span></span></pre></td></tr><tr><td scope="row"><pre>        CFRelease (gBundleRefOpenGL);<span></span></pre></td></tr><tr><td scope="row"><pre>        gBundleRefOpenGL = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>void * MyAGLGetProcAddress (char * pszProc) <span>// 11</span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return CFBundleGetFunctionPointerForName (gBundleRefOpenGL,<span></span></pre></td></tr><tr><td scope="row"><pre>                CFStringCreateWithCStringNoCopy (NULL,<span></span></pre></td></tr><tr><td scope="row"><pre>                         pszProc, CFStringGetSystemEncoding (), NULL) );<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Declares a string for the framework name (<code>OpenGL.framework</code>), which is where you need to search for OpenGL function.</p></li><li class="li"><p>Sets up a buffer for the framework name. The next line does the same for the file reference.</p></li><li class="li"><p>Assigns the framework and then the file reference. </p></li><li class="li"><p>Finds the OpenGL framework directory; handles the error condition if the folder isn't found.</p></li><li class="li"><p>Creates an <code>FSRef</code> data structure for the OpenGL framework  directory and handles an error condition should one occur.</p></li><li class="li"><p>Creates a Core Foundation URL from the <code>FSRef</code> data structure and handles an error condition should one occur.</p></li><li class="li"><p>Creates  a Core Foundation bundle reference to the OpenGL framework and handles an error condition should one occur.</p></li><li class="li"><p>Releases the Core Foundation URL because it is no  longer needed. </p></li><li class="li"><p>Loads the bundle.</p></li><li class="li"><p>Performs necessary clean up work. </p></li><li class="li"><p>Gets a function pointer for an OpenGL entry point.</p></li></ol><a name="//apple_ref/doc/uid/TP40001987-CH402-SW3" title="Initializing Entry Points"></a><h2>Initializing Entry Points</h2><p><span class="content_text">Listing B-3</span> shows how to use  the <code>MyNSGLGetProcAddress</code> function from <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW4">Listing B-1</a></span> to obtain a few OpenGL entry points. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH402-SW1" title="Listing B-3Using NSGLGetProcAddress to obtain an OpenGL entry point"></a><p class="codesample"><strong>Listing B-3&nbsp;&nbsp;</strong>Using <code>NSGLGetProcAddress</code> to obtain an OpenGL entry point</p><div class="codesample"><table><tr><td scope="row"><pre>#import "MyNSGLGetProcAddress.h" <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>static void InitEntryPoints (void);<span></span></pre></td></tr><tr><td scope="row"><pre>static void DeallocEntryPoints (void);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Function pointer type definitions<span></span></pre></td></tr><tr><td scope="row"><pre>typedef void (*glBlendColorProcPtr)(GLclampf red,GLclampf green,<span></span></pre></td></tr><tr><td scope="row"><pre>                        GLclampf blue,GLclampf alpha);<span></span></pre></td></tr><tr><td scope="row"><pre>typedef void (*glBlendEquationProcPtr)(GLenum mode);<span></span></pre></td></tr><tr><td scope="row"><pre> typedef void (*glDrawRangeElementsProcPtr)(GLenum mode, GLuint start,<span></span></pre></td></tr><tr><td scope="row"><pre>                GLuint end,GLsizei count,GLenum type,const GLvoid *indices);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>glBlendColorProcPtr pfglBlendColor = NULL; <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>glBlendEquationProcPtr pfglBlendEquation = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>glDrawRangeElementsProcPtr pfglDrawRangeElements = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>static void InitEntryPoints (void) <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglBlendColor = (glBlendColorProcPtr) MyNSGLGetProcAddress<span></span></pre></td></tr><tr><td scope="row"><pre>                                    ("glBlendColor");<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglBlendEquation = (glBlendEquationProcPtr)MyNSGLGetProcAddress<span></span></pre></td></tr><tr><td scope="row"><pre>                                ("glBlendEquation");<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglDrawRangeElements = (glDrawRangeElementsProcPtr)MyNSGLGetProcAddress<span></span></pre></td></tr><tr><td scope="row"><pre>                                ("glDrawRangeElements");<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>// -------------------------<span></span></pre></td></tr><tr><td scope="row"><pre>static void DeallocEntryPoints (void) <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglBlendColor = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglBlendEquation = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglDrawRangeElements = NULL;;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Imports the header file that contains the <code>MyNSGLProcAddress</code> function from <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW4">Listing B-1</a></span>.</p></li><li class="li"><p>Declares function pointers for the functions of interest. Note that each function pointer uses the prefix <code>pf</code> to distinguish it from the function it points to. Although using this prefix is not a requirement, it's best to avoid using the exact function names.</p></li><li class="li"><p>Initializes the entry points. This function repeatedly calls the <code>MyNSGLProcAddress</code> function to obtain function pointers for each of the functions of interest—<code><!--a-->glBlendColor<!--/a--></code>, <code><!--a-->glBlendEquation<!--/a--></code>, and <code>glDrawRangeElements</code>.</p></li><li class="li"><p>Sets each of the function pointers to <code>NULL</code> when they are no longer needed.</p></li></ol><p><span class="content_text">Listing B-4</span> demonstrates how to use the function <code><!--a-->aglGetProcAddress<!--/a--></code>  to obtain a few OpenGL entry points. Note that the approach used by this code is similar to that used in <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW1">Listing B-3</a></span>. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH402-SW5" title="Listing B-4Using AGL to obtain an OpenGL entry point"></a><p class="codesample"><strong>Listing B-4&nbsp;&nbsp;</strong>Using AGL to obtain an OpenGL entry point</p><div class="codesample"><table><tr><td scope="row"><pre>#include "MyAGLGetProcAddress.h" <span>// 1</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>static OSStatus InitEntryPoints (void);<span></span></pre></td></tr><tr><td scope="row"><pre>static void DeallocEntryPoints (void);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef void (*glBlendColorProcPtr)(GLclampf red,GLclampf green,<span></span></pre></td></tr><tr><td scope="row"><pre>                        GLclampf blue,GLclampf alpha); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>typedef void (*glBlendEquationProcPtr)(GLenum mode);<span></span></pre></td></tr><tr><td scope="row"><pre>typedef void (*glDrawRangeElementsProcPtr)(GLenum mode,GLuint start,<span></span></pre></td></tr><tr><td scope="row"><pre>                        GLuint end,GLsizei count,GLenum type,<span></span></pre></td></tr><tr><td scope="row"><pre>                        const GLvoid *indices);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>glBlendColorProcPtr pfglBlendColor = NULL; <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>glBlendEquationProcPtr pfglBlendEquation = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>glDrawRangeElementsProcPtr pfglDrawRangeElements  = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>static OSStatus InitEntryPoints (void)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err = MyAGLInitEntryPoints(); <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>    if (noErr == err) { <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>        pfglBlendColor = (glBlendColorProcPtr)<span></span></pre></td></tr><tr><td scope="row"><pre>                    MyAGLGetProcAddress ("glBlendColor");<span></span></pre></td></tr><tr><td scope="row"><pre>        pfglBlendEquation = (glBlendEquationProcPtr)<span></span></pre></td></tr><tr><td scope="row"><pre>                    MyAGLGetProcAddress ("glBlendEquation");<span></span></pre></td></tr><tr><td scope="row"><pre>        pfglDrawRangeElements = (glDrawRangeElementsProcPtr)<span></span></pre></td></tr><tr><td scope="row"><pre>               MyAGLGetProcAddress("glDrawRangeElements");<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return err;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>static void DeallocEntryPoints (void)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglBlendColor = NULL; <span>// 6</span></pre></td></tr><tr><td scope="row"><pre>    pfglBlendEquation = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    pfglDrawRangeElements = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    MyAGLDellocEntryPoints (); <span>// 7</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Imports the header file that contains the <code>MyAGLGetProcAdress</code> function from <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW7">Listing B-2</a></span>.</p></li><li class="li"><p>Declares function pointers for the functions of interest.</p></li><li class="li"><p>Initializes each function pointer to <code>NULL</code>.</p></li><li class="li"><p>Calls the initialization function defined in <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW7">Listing B-2</a></span>.</p></li><li class="li"><p>After checking for an error condition, obtains the function pointers for the functions of interest by calling the <code>MyAGLGetProcAddress</code> function defined in <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW7">Listing B-2</a></span>.</p></li><li class="li"><p>Sets each of the function pointers to <code>NULL</code> when they are no longer needed.</p></li><li class="li"><p>Deallocates the function pointers when they are no longer needed by calling the deallocation function defined in <span class="content_text"><a href="opengl_entrypts.html#//apple_ref/doc/uid/TP40001987-CH402-SW7">Listing B-2</a></span>.</p></li></ol>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../opengl_api_versions/opengl_api_versions.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../opengl_quartz_services/opengl_quartz_services.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-06-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_entrypts/opengl_entrypts.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_entrypts/opengl_entrypts.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_entrypts/opengl_entrypts.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Accessibility Programming Guidelines for Carbon: Accessibility and the Carbon Framework</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Accessibility and the Carbon Framework"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001127-CH207" title="Accessibility and the Carbon Framework"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../Accessibility-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000441" target="_top">Accessibility</a> &gt; <a href="../AXCarbonIntro/AXCarbonIntro.html#//apple_ref/doc/uid/TP30001127-CH205-DontLinkElementID_30">Accessibility Programming Guidelines for Carbon</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../AXCarbonIntro/AXCarbonIntro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../AXCarbonStandard/AXCarbonStandard.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_26" title="Accessibility and the Carbon Framework"></a><h1><a name="//apple_ref/doc/uid/TP30001127-CH207-BABGJCGG" title="Accessibility and the Carbon Framework"></a>Accessibility and the Carbon Framework</h1><p>The Mac OS X accessibility architecture defines the model that applications follow to make themselves accessible to assistive applications and technologies. The model is not tied to any one application framework, so each framework is free to implement accessibility support in the most natural and efficient way.</p><p>This chapter describes how the Carbon framework implements accessibility for Carbon applications in Mac OS X. If your application uses only standard HIObject objects and subclasses to implement its user interface, you should skim this chapter for background information before you read <span class="content_text"><a href="../AXCarbonStandard/AXCarbonStandard.html#//apple_ref/doc/uid/TP30001127-CH206-TPXREF101">“Making a Standard Carbon Application Accessible.”</a></span> </p><p>If you implement some custom subclasses of HIObject or if your application is based on a custom application framework (such as PowerPlant), you should read this chapter to enhance your understanding of the Carbon accessibility implementation. Then, you should read <span class="content_text"><a href="../AXCarbonSemiStandard/AXCarbonSemiStandard.html#//apple_ref/doc/uid/TP30001127-CH210-TPXREF101">“Making a Semistandard Carbon Application Accessible”</a></span> or <span class="content_text"><a href="../AXCarbonCustom/AXCarbonCustom.html#//apple_ref/doc/uid/TP30001127-CH211-TPXREF101">“Making a Custom Carbon Application Accessible”</a></span> to learn how to access-enable your application.</p><p>If you’re unfamiliar with the Mac OS X accessibility model or you’re unsure why your application should be accessible, read <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em> for an introduction to accessibility in Mac OS X.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_1">Accessibility Objects in Carbon</a>
				
			<br/>
			
        
			
			
				<a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBFHGJC">Accessibility Carbon Events</a>
				
			<br/>
			
        
			
			
				<a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_6">Accessibility Notifications</a>
				
			<br/>
			
        
			
			
				<a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBFEFIE">Key Modifiers and VoiceOver</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_1" title="Accessibility Objects in Carbon"></a><h2>Accessibility Objects in Carbon</h2><p>As described in <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em>, the Mac OS X accessibility architecture models the user interface of an accessible application as a hierarchy of accessibility objects. Each of these objects represents an accessible user interface object in the application, such as a button or a window. The accessibility object provides information about itself (such as its capabilities, position in the accessibility hierarchy, and a localizable description) to assistive applications. An assistive application uses this information to tell the user about the application’s features, help the user navigate, and perform the application’s functions.</p><p>The following sections describe the basics of the Carbon implementation of an accessibility object. If your application implements custom subclasses of HIObject or HIView or uses a custom application framework, you should read these sections to become familiar with how Carbon defines the accessibility object.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBJIGBI" title="The Carbon Implementation of the Accessibility Object"></a><h3>The Carbon Implementation of the Accessibility Object</h3><p>Carbon bases its implementation of the accessibility object on the HIObject subsystem. Introduced in Mac OS X version 10.2, HIObject is the base class for all user interface objects in Carbon. If you’re unfamiliar with HIObject and its subclass HIView (the base class for all view-based controls), you should read <em><a href="../../Upgrading_HIToolbox/index.html#//apple_ref/doc/uid/TP30001140" target="_top">Upgrading to the Mac OS X HIToolbox</a></em> and <em><a href="../../HIViewDoc/index.html#//apple_ref/doc/uid/TP30000923" target="_top">HIView Programming Guide</a></em>.</p><p>In Carbon, an accessibility object is an <code>AXUIElementRef</code>. An <code>AXUIElementRef</code> is a Core Foundation data structure that contains two members:</p><ul class="spaceabove"><li class="li"><p>The HIObject reference of an accessible user interface object, such as a window or a button</p></li><li class="li"><p>A 64-bit identifier that can be used to represent an accessible subcomponent of a complex user interface object, such as a window, a button, or some other object of your design</p></li></ul><p><span class="content_text"><a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBGGFDC">Figure 2-1</a></span> shows the structure of the accessibility object as it is implemented in Carbon.</p><br/><div><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_27" title="Figure 1-1The Carbon accessibility object"></a><p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBGGFDC" title="Figure 1-1The Carbon accessibility object"></a><strong>Figure 1-1&nbsp;&nbsp;</strong>The Carbon accessibility object</p><img src = "../art/axcarbon_uielement.gif" alt = "The Carbon accessibility object" width="211" height="73"></div><br/><p>Carbon implements an accessibility object as a <code>CFTypeRef</code> object because this allows it to be flattened easily and sent across processes. This is important because the Carbon events that carry accessibility messages both send and receive accessibility objects. It also allows you to put accessibility objects inside another <code>CFTypeRef</code> object, such as a CFArray. An event handler does this, for example, when it responds to the request for all accessible children of a given accessibility object.</p><p>The HIObject inside the accessibility object is significant both because it represents the user interface object and because it is a target for Carbon events related to that object. Recall from <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em> that in Mac OS X, accessibility is message-driven. An assistive application communicates with an application by sending messages to the application’s user interface. In a Carbon application, these messages take the form of Carbon events. Because an HIObject is automatically a target for Carbon events, the accessibility object containing the HIObject is also a target. In addition, the Carbon accessibility implementation installs the accessibility-specific event handlers on all standard HIObjects and HIViews. For more information on the role of Carbon events in the Carbon accessibility implementation, see <span class="content_text"><a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBFHGJC">“Accessibility Carbon Events.”</a></span></p><p>The accessibility object identifier provides an efficient way for Carbon to represent the subcomponents of a complex object without needing multiple HIObjects. Consider a data browser object that displays check boxes and relevance indicators in addition to the list and column views of its data. For an assistive application to access every check box, relevance indicator, and item of data, each of these components must be represented by an accessibility object. Rather than create a separate HIObject for each accessibility object, however, Carbon uses the HIObject reference of the parent object coupled with a unique identifier for each component. By convention, an identifier with the value 0 means the accessibility object represents the object as a whole (the parent object), rather than one of the object’s components.</p><p>Because the accessibility object uses the HIObject reference of a user interface object, it is very lightweight. In addition, because the core of the accessibility object is the HIObject to which it refers, its life span can be very short. In general, an accessibility object is created, returned in an event parameter, and released. Although you could create accessibility objects and reserve them for later use, there is little to no performance penalty for creating them as needed and then releasing them.</p><p>If your application uses only standard HIObjects and subclasses in its user interface, it is unlikely that you will need to pay much attention to the value of an accessibility object’s identifier. If you override the standard event handlers on these objects, however, you may have to use the identifier to determine which child of the object a given accessibility object represents.</p><p>If you implement custom subclasses of HIObject or HIView or use a custom application framework, you can use the accessibility object identifier to represent the containment hierarchy of your complex objects in your own way. If you do this, be sure to follow the convention of giving the top-level, parent object an identifier with the value 0. Then, you can give the child objects identifiers that make sense in your implementation.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBGJFAD" title="Creation of Accessibility Objects"></a><h3>Creation of Accessibility Objects</h3><p>Carbon does not create an accessibility object for every standard HIObject in an application when it launches. Because accessibility is message-driven, it is not necessary to create large numbers of accessibility objects before they are required. Instead, Carbon creates an accessibility object for a user interface object only when necessary, in response to an accessibility Carbon event. This is a technique you can use if you handle events that require you to return accessibility objects for your custom subclasses of HIObject or custom user interface objects.</p><p>In general, if your application uses only HIObject and HIView objects in its user interface, you create very few accessibility objects. About the only accessibility object you have to create in a standard Carbon application is one to represent a static text title you display near a control or view. (To learn how to do this, see <span class="content_text"><a href="../AXCarbonStandard/AXCarbonStandard.html#//apple_ref/doc/uid/TP30001127-CH206-CHDCDBBF">“Link Objects and Related Static Text Titles.”</a></span>) If you implement custom subviews or other user interface objects, however, you must create accessibility objects for them when an assistive application needs to access them.</p><p>When you create an accessibility object, you use the <code><a href="../../../../Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/doc/c_ref/AXUIElementCreateWithHIObjectAndIdentifier" target="_top">AXUIElementCreateWithHIObjectAndIdentifier</a></code> function (defined in <code>CarbonEvents.h</code>). This function requires an HIObject reference and an identifier and it returns a reference to the accessibility object. Note that because Carbon implements the accessibility object as a <code>CFTypeRef</code> object, the normal Core Foundation semantics apply. In particular, you must use <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> to dispose of the accessibility object when it is no longer needed. </p><p>If your application uses a custom application framework, your user interface objects probably are not implemented as HIObjects. When you create an accessibility object for such an object, you first instantiate an HIObject wrapper for it and then create the accessibility object. For more information on how to do this, see <span class="content_text"><a href="../AXCarbonCustom/AXCarbonCustom.html#//apple_ref/doc/uid/TP30001127-CH211-TPXREF101">“Making a Custom Carbon Application Accessible.”</a></span></p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBHJAGI" title="Accessibility Object Attributes"></a><h3>Accessibility Object Attributes</h3><p>When Carbon creates an accessibility object to represent a given HIObject or HIView, it also provides some default values for the required attributes, based on the type of the object. It does this in response to a Carbon event requesting the value of a given attribute. For a button, for example, Carbon can supply values for attributes such as the role, the size, and the view that contains the button. Carbon gets most of this information from the object implementation, but context-specific attribute values must be supplied by the application.</p><p>The most important attribute value an application supplies is the accessibility object’s description. Carbon cannot supply the value of a description attribute, because it is specific to the way an application uses an object. If your application contains a print button, for example, and you do not supply a description, an assistive application can tell a user only that the object is a button, not that it is a print button.</p><p>If your application uses only standard HIObject and HIView objects, there are only a few attribute values you must supply. For the most part, these attributes describe the layout and specific features of your application. To learn how to supply these values, see <span class="content_text"><a href="../AXCarbonStandard/AXCarbonStandard.html#//apple_ref/doc/uid/TP30001127-CH206-TPXREF101">“Making a Standard Carbon Application Accessible.”</a></span></p><p>When you create an accessibility object for a custom object, you must supply additional attribute values. Because the set of required and optional attributes is largely dictated by the role of the accessibility object, the first thing you have to do is determine what role the accessibility object should have. It is best to leverage the existing accessibility protocol and choose one of the roles Apple defines to describe the new accessibility object. For more information about the set of roles and the attributes associated with them, see the appendix “Roles and Associated Attributes” in <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em>.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBHIAGE" title="Parameterized Attributes"></a><h3>Parameterized Attributes</h3><p>In Mac OS X version 10.3, the Carbon accessibility implementation introduced parameterized accessibility object attributes. A parameterized attribute is a special attribute that allows an assistive application to access individual parts of an accessibility object.</p><p>Used mainly for objects that contain user-entered text, a parameterized attribute can refer to something as specific as a particular line within an editable text area. Unless your application handles complex, editable text areas, you probably do not need to use parameterized attributes.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_2" title="Ignored UIElements"></a><h3>Ignored UIElements</h3><p>As described in <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em>, an application can simplify its accessibility hierarchy by designating selected accessibility objects as ignored. In general, these accessibility objects represent implementation-specific parts of the user interface that a user does not access. Because an assistive application is interested in only accessible objects, ignored objects are not included in the accessibility hierarchy an assistive application sees. It’s worthwhile to identify accessibility objects that should be ignored because doing so streamlines the user interface.</p><p>Carbon provides the <code><a href="../../../Reference/HIObjectReference/Reference/reference.html#//apple_ref/doc/c_ref/HIObjectSetAccessibilityIgnored" target="_top">HIObjectSetAccessibilityIgnored</a></code> function (defined in <code>HIObject.h</code>) you can use to adjust the ignored status of an accessibility object. This function requires an accessibility object and a Boolean value that indicates whether or not the accessibility object should be ignored. This function sets the ignored status of the passed-in accessibility object alone; it does not touch the accessibility object’s descendents. If you want an accessibility object’s descendents to be ignored as well, you must call this function on each of them. By default, a newly created accessibility object is not ignored.</p><p>It’s important to note that an accessibility object’s ignored status is not something your application needs to take into account during its normal processing. In particular, you should continue to return accessibility objects when appropriate, regardless of their ignored status. For example, if you handle an event that requests an accessibility object’s child, you return that child whether or not it is ignored. The Carbon accessibility implementation automatically removes ignored accessibility objects from the accessibility hierarchy it presents to assistive applications.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBFHGJC" title="Accessibility Carbon Events"></a><h2>Accessibility Carbon Events</h2><p>In <code>CarbonEvents.h</code>, Carbon defines ten accessibility Carbon events of the event class <code>kEventClassAccessibility</code>. An accessible application responds to these events, giving assistive applications information about specific accessibility objects and performing requested actions. </p><p>The following sections give you an overview of the accessibility Carbon events and describe the part they play in accessibility. For reference documentation on these events, see <em><a href="../../../../Accessibility/Reference/AccessibilityCarbonRef/index.html#//apple_ref/doc/uid/TP40001082" target="_top">Carbon Accessibility Reference</a></em>. If you’re unfamiliar with the Carbon event mechanism, you should read <em><a href="../../Carbon_Event_Manager/index.html#//apple_ref/doc/uid/TP30000989" target="_top">Carbon Event Manager Programming Guide</a></em> for an introduction.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_28" title="Note"></a><p><strong>Note:</strong>&nbsp;For the sake of simplicity, these sections discuss the accesssibility Carbon events as being “sent by” assistive applications. In fact, a nonCarbon assistive application does not actually send Carbon events. Instead, it sends messages the Carbon framework transmits as Carbon events.</p></div><p>If you use only standard HIObject and HIView objects in your application’s user interface and you’re using Mac OS X version 10.4 or later, you probably do not have to create any custom accessibility event handlers. This is because, as described in <span class="content_text"><a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBJIGBI">“The Carbon Implementation of the Accessibility Object,”</a></span> Carbon automatically installs the necessary event handlers on standard HIObjects and HIViews. However, if you implement any custom user interface objects (or subviews) or if you need to handle an event in a nonstandard way, you should read this section to learn about the events you might have to handle.</p><p>In addition, all developers should read <span class="content_text"><a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBFEDJF">“Providing Attribute Values Without Event Handlers.”</a></span> This section describes how a new function introduced in Mac OS X version 10.4 allows you to set selected accessibility object attribute values without having to create custom event handlers.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_3" title="Data Conversion in Carbon Accessibility Events"></a><h3>Data Conversion in Carbon Accessibility Events</h3><p>Carbon supports automatic runtime data conversion of accessibility event parameters. For example, in response to a request for the value of an accessibility object’s position attribute, you can return an <code>HIPoint</code> type value. Carbon automatically converts this value into the expected <code>kAXValueCGPointType</code> value.</p><p>This allows you to handle values in the best way for your application without worrying about how the Carbon accessibility implementation uses them.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_4" title="Hierarchy-Based Events"></a><h3>Hierarchy-Based Events</h3><p>The parent-child relationships among accessibility objects define an application’s accessibility hierarchy. As described in <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em>, an assistive application views your application through its accessibility hierarchy. It is therefore essential that all accessible objects in your application appear in their proper positions in the application’s accessibility hierarchy.</p><p>The accessibility hierarchy is based on the containment hierarchies defined by the user interface objects. For a Carbon application, this means the containment hierarchies of HIObject and HIView objects. The default HIView subsystem can accurately represent an HIView’s containment hierarchy as long as all subviews of the view are also HIViews. The handlers Carbon installs on these objects automatically supply the appropriate accessibility hierarchy information. If you do not implement any custom subviews (and you do not redefine any parent-child relationships), you do not have to provide your own handlers for the accessibility hierarchy events.</p><p>Two of the accessibility hierarchy-based events concern hit-testing and keyboard focus:</p><ul class="spaceabove"><li class="li"><p><code>kEventAccessibleGetChildAtPoint</code></p></li><li class="li"><p><code>kEventAccessibleGetFocusedChild</code></p></li></ul><p>The hit-testing event, <code>kEventAccessibleGetChildAtPoint</code>, contains an accessibility object and a global screen point. Standard HIObjects and HIViews automatically handle this event by returning the accessibility object’s immediate child accessibility object that contains the point (if one exists).</p><p>An assistive application sends the keyboard-focus event, <code>kEventAccessibleGetFocusedChild</code>, to find the focused child of the given accessibility object. The default handler determines if an immediate child of the accessibility object is in the focus chain. If such a child exists, the handler returns it.</p><p>Both these events might seem to encourage recursive hit-testing and focus-testing on the part of the handler receiving the event, but this not the case. The Carbon accessibility implementation performs the necessary recursion, so it is important that the handlers for these events do not also perform recursive testing.</p><p>Carbon does not define a separate event an assistive application can use to get the accessible parent or children of an accessibility object. Instead, an assistive application sends the <code>kEventAccessibleGetNamedAttribute</code> event, specifying the parent or children attribute. Standard HIObject and HIView handlers return the requested value, which an assistive application can use to traverse the accessibility hierarchy. For more information about this event, see <span class="content_text"><a href="AXCarbonAccessibility.html#//apple_ref/doc/uid/TP30001127-CH207-BGBDDDDA">“Attribute Events.”</a></span></p><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_5" title="Action Events"></a><h3>Action Events</h3><p>Carbon defines three accessibility action events:</p><ul class="spaceabove"><li class="li"><p><code>kEventAccessibleGetAllActionNames</code></p></li><li class="li"><p><code>kEventAccessibleGetNamedActionDescription</code></p></li><li class="li"><p><code>kEventAccessiblePerformNamedAction</code></p></li></ul><p>An assistive application must be able to drive an application’s user interface just as a user does with the mouse or keyboard. As part of this process, an assistive application sends the <code>kEventAccessibleGetAllActionNames</code> event to discover which actions an accessibility object can perform. The handler for this event adds the names of the object’s supported actions to the array contained in one of the event parameters.</p><p>Some assistive applications need to speak the name of an action to the user. When this is the case, the assistive application sends the <code>kEventAccessibleGetNamedActionDescription</code> event. Even though the name of this event contains the word “Description”, don’t confuse this with an accessibility object’s description attribute. Whereas the description attribute is an application-specific description of the accessibility object’s purpose, the action description is simply its human-intelligible, localizable name. The <code>AXActionConstants.h</code> file defines the Mac OS X accessibility actions, along with their names. If you need to supply an event handler for this event, you must supply the action description value. See <span class="content_text"><a href="../AXCarbonSemiStandard/AXCarbonSemiStandard.html#//apple_ref/doc/uid/TP30001127-CH210-BJECGEBD">“Handle Action Events”</a></span> for information on how to do this.</p><p>An assistive application sends the <code>kEventAccessiblePerformNamedAction</code> event to transmit the user’s request to perform an action. The handler for this event makes sure the accessibility object supports this event and, if so, tells the application to perform it.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBDDDDA" title="Attribute Events"></a><h3>Attribute Events</h3><p>An assistive application relies on an accessibility object’s attribute values to tell it how to handle the object the accessibility object represents. An assistive application may also set the values of some attributes in response to a user’s actions. Carbon defines five accessibility events that allow an assistive application to query, get, and set attribute names and values:</p><ul class="spaceabove"><li class="li"><p><code>kEventAccessibleIsNamedAttributeSettable</code></p></li><li class="li"><p><code>kEventAccessibleGetAllAttributeNames</code></p></li><li class="li"><p><code>kEventAccessibleGetAllParameterizedAttributeNames</code></p></li><li class="li"><p><code>kEventAccessibleGetNamedAttribute</code></p></li><li class="li"><p><code>kEventAccessibleSetNamedAttribute</code></p></li></ul><p>An assistive application sends the <code>kEventAccessibleIsNamedAttributeSettable</code> event to find out if the given attribute value is settable. Settable attribute values are those that can change dynamically while the application runs. An example of a settable attribute is the value attribute of an editable text field.</p><p>If you provide an event handler to return an attribute’s value, you must also provide a handler for the <code>kEventAccessibleIsNamedAttributeSettable</code> event. Your handler returns the settability of the specific attribute for which you provide a value. This way, you ensure that an assistive application gets the correct information about this attribute, instead of relying on the default handler to provide it.</p><p>An assistive application uses the <code>kEventAccessibleGetAllAttributeNames</code> event to request the names of all an accessibility object’s attributes <em>except</em> parameterized attributes. To request the names of parameterized attributes, an assistive application sends the <code>kEventAccessibleGetAllParameterizedAttributeNames</code> event. The handlers for both events return an array of attribute names, represented as CFStrings.</p><p>When an assistive application needs to get the value of a specific attribute, it sends the <code>kEventAccessibleGetNamedAttribute</code> event. The handler for this event returns the value of the specified attribute, whether or not it is a parameterized attribute. </p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBFEDJF" title="Providing Attribute Values Without Event Handlers"></a><h3>Providing Attribute Values Without Event Handlers</h3><p>In versions of Mac OS X prior to 10.4, the only way to provide application-specific values of accessibility object attributes is to install a custom handler that provides those values. For example, to provide the value of an accessibility object’s description attribute, you install a handler that returns to the <code>kEventAccessibleGetNamedAttribute</code> event a CFString containing the description.</p><p>Mac OS X version 10.4 introduced the <code><a href="../../../Reference/HIObjectReference/Reference/reference.html#//apple_ref/doc/c_ref/HIObjectSetAuxiliaryAccessibilityAttribute" target="_top">HIObjectSetAuxiliaryAccessibilityAttribute</a></code> function (defined in <code>HIObject.h</code>) that you can use in place of an event handler to provide values for static, unsettable attributes. An attribute value is settable if a user (through an assistive application) can directly change it, such as the selected text attribute of an editable text field object. A good way to think of this is, if an attribute helps describe the layout of your user interface, such as a description or a title, its value is probably static and unsettable.</p><p>When you use the <code><a href="../../../Reference/HIObjectReference/Reference/reference.html#//apple_ref/doc/c_ref/HIObjectSetAuxiliaryAccessibilityAttribute" target="_top">HIObjectSetAuxiliaryAccessibilityAttribute</a></code> function to set attribute values, it holds those values in a store that the HIObject event handler at the bottom of the handler stack can consult. When no higher-level handlers can handle the <code>kEventAccessibleGetNamedAttribute</code> event for a specific attribute, the event passes to the HIObject handler, which consults the store for the requested attribute value. This scheme gives you the flexibility to set some attribute values as your application launches and others by installing custom handlers.</p><p>It’s important to note that you don’t have to use this function to set the values of static attributes. Depending on other accessibility-related tasks you perform, it might be more efficient to install event handlers to provide these values, even if you’re developing in Mac OS X version 10.4.</p><a name="//apple_ref/doc/uid/TP30001127-CH207-DontLinkElementID_6" title="Accessibility Notifications"></a><h2>Accessibility Notifications</h2><p>As described in <em><a href="../../../../Accessibility/Conceptual/AccessibilityMacOSX/index.html#//apple_ref/doc/uid/TP40001078" target="_top">Accessibility Overview</a></em>, an accessibility object can broadcast notifications about changes in its state. Assistive applications register for these notifications so they can keep track of the creation, change in value, and destruction of accessibility objects.</p><p>The Carbon accessibility implementation defines many notifications in <code>AXNotificationConstants.h</code> (in the HIServices framework). It also defines the <code><a href="../../../../Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/doc/c_ref/AXNotificationHIObjectNotify" target="_top">AXNotificationHIObjectNotify</a></code> function you use to send notifications for an accessibility object. If your application uses only standard, noncustom HIObjects and HIViews, all necessary notifications are sent for you. If, on the other hand, you implement custom user interface classes and, consequently, create accessibility objects to represent them, you have to send your own notifications. This is particularly important for the value-change notifications. If you implement a complex user interface object (one that has its own children), only you know which child view’s value has changed. For more information on sending notifications, see <span class="content_text"><a href="../AXCarbonSemiStandard/AXCarbonSemiStandard.html#//apple_ref/doc/uid/TP30001127-CH210-TPXREF101">“Making a Semistandard Carbon Application Accessible.”</a></span></p><a name="//apple_ref/doc/uid/TP30001127-CH207-BGBFEFIE" title="Key Modifiers and VoiceOver"></a><h2>Key Modifiers and VoiceOver</h2><p>In Mac OS X version 10.4, Apple introduced VoiceOver, a state-of-the-art, built-in screen reading interface to the Macintosh. Users can activate VoiceOver from System Preferences (in the Universal Access pane) or by pressing Command-F5. VoiceOver is a prime example of an assistive application that uses the accessibility information your application provides to present a verbal picture of your application to the user.</p><p>When using VoiceOver, the Option and Control keys are considered VoiceOver control keys. VoiceOver does not hide the use of these keys when it is telling an application to perform an action, such as open a document or push a button. This is not a problem unless an application uses the <code><a href="../../../Reference/Carbon_Event_Manager_Ref/Reference/reference.html#//apple_ref/doc/c_ref/GetCurrentEventKeyModifiers" target="_top">GetCurrentEventKeyModifiers</a></code> function to discover which modifier keys are in an event. Contrary to its name, the <code><a href="../../../Reference/Carbon_Event_Manager_Ref/Reference/reference.html#//apple_ref/doc/c_ref/GetCurrentEventKeyModifiers" target="_top">GetCurrentEventKeyModifiers</a></code> function returns the modifiers that were in the <em>last</em> user event that reached the application. It does not return the modifiers that are used at the time the event is being processed. If your application uses this function while VoiceOver is running, it will interpret the Option key as a modifier of the primary key, instead of as the VoiceOver trigger. This is wrong and will result in behavior the user does not desire.</p><p>If your application uses the <code><a href="../../../Reference/Carbon_Event_Manager_Ref/Reference/reference.html#//apple_ref/doc/c_ref/GetCurrentEventKeyModifiers" target="_top">GetCurrentEventKeyModifiers</a></code> function, you should replace it with code that extracts the desired information from the event parameter. This will allow you to discover the modifiers used in key-down and mouse-down events without impairing the accessibility of your application.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../AXCarbonIntro/AXCarbonIntro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../AXCarbonStandard/AXCarbonStandard.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-02-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/MakingAppsAccessible/AXCarbonAccessibility/AXCarbonAccessibility.html%3Fid%3DTP30001127-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/MakingAppsAccessible/AXCarbonAccessibility/AXCarbonAccessibility.html%3Fid%3DTP30001127-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/MakingAppsAccessible/AXCarbonAccessibility/AXCarbonAccessibility.html%3Fid%3DTP30001127-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NewMessageGlobals(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING291></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-290.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-292.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-274.html"><B>Chapter 6 - Message Manager</B></A> / <A HREF="GXEnvironment-285.html"><B>Message Manager Reference</B></A><BR><DL><DD><A HREF="GXEnvironment-289.html"><B>Functions</B></A> / <A HREF="GXEnvironment-290.html"><B>Allocating Memory for and Disposing of Global Data</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING291-0></A>
<H3><A NAME=MARKER-2-79></A><A NAME=MARKER-9-78></A><A NAME=MARKER-2-79></A>NewMessageGlobals</H3>
 You can use the <CODE>NewMessageGlobals</CODE> function to request and allocate memory for globals.<P>
<PRE>
OSErr NewMessageGlobals (long msgGlobalsSize,
                        MessageGlobalsInitProc aProc);
</PRE>
<DL>
<DT><CODE>msgGlobalsSize</CODE>
<DD>  The size of the memory requested for global data.
<DT>aProc<CODE></CODE>
<DD> A pointer to an application-defined callback function that initializes and allocates global data memory.
<DT>
<DD>
<DT><I>function result</I>
<DD> An error of type <CODE>OSErr <I>indicating that the requested memory allocation could not be completed.</I></CODE>
</DL>
<A NAME=HEADING291-7></A>
<H5>DESCRIPTION</H5>
 The <CODE>NewMessageGlobals</CODE> function sets up a global world for your printing extension or printer driver. This consists of allocating the specified amount of memory and initializing it with the passed procedure. Once you have created a global world, you can access your data just as you would if your printing extension or printer driver were an application. Whenever your extension or driver is called, your data will be valid.<P>
 To establish an A5 world for your globals, the <CODE>msgGlobalsSize</CODE> parameter is the <CODE>A5Size</CODE> function and the <CODE>aProc</CODE> parameter is the <CODE>A5Init</CODE> function. The <CODE>A5Size</CODE> and <CODE>A5Init</CODE> functions are both Macintosh Programming Workshop (MPW) library routines. The <CODE>A5Size</CODE> function determines how much memory is to be allocated for the A5 world. The <CODE>A5Init</CODE> function takes a pointer to the A5 globals and initializes them to the appropriate values.<P>
 When your extension or printing driver no longer needs the globals, you should release the memory allocated by the <CODE>NewMessageGlobals</CODE> function by calling the <CODE>DisposeMessageGlobals</CODE> function.<P>
<A NAME=HEADING291-11></A>
<H5>SEE ALSO</H5>
 Global data and the A5 world are discussed in the sections <A HREF=GXEnvironment-277.html#MARKER-9-22>"Global Data Storage for Printing Extensions and Printer Drivers" beginning on page 6-7</A> and <A HREF=GXEnvironment-281.html#MARKER-9-30>"Allocating Memory for and Disposing of Global Data" beginning on page 6-8</A>.<P>
 To dispose of printing extension and printer driver globals, use the <CODE>DisposeMessageGlobals</CODE> function described in the next section.<P>
 The prototype for the application-defined callback function for global data initialization is described on <A HREF=GXEnvironment-304.html#MARKER-9-106>page 6-26</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-290.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-292.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-August-01 --><!-- Includes revisions to graphics tags --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note FL28: PBShare, PBUnshare, and PBGetUGEntry</title><meta name="keywords" content="Mac OS 8 File Manager PBShare PBUnshare PBGetUGEntry sharing point"><meta name="Description" content="Technical Note FL28: This Technical Note documents threeFile Manager routines: PBShare, PBUnshare and PBGetUGEntry,which are available on local volumes. The Pascal glue code,C glue code, and the assembler equates and macros for thecalls are included in this note."><meta name="categories" content="Files"><meta name="week-posted" content="Sep 30, 1991 - Oct 4, 1991"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002454" title="PBShare, PBUnshare, and PBGetUGEntry"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxFileManagement-date.html" target="_blank">Carbon > File Management</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note FL28</div>
<div id="pageheadsub">PBShare, PBUnshare, and PBGetUGEntry</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext">					<A HREF="#Section1">PBShare, PBUnshare, and PBGetUGEntry</a><BR><BR>					<A HREF="#Section2">The Routines</a><BR><BR><A HREF="#References">References</A><BR><BR>   <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id = "introtext">This Technical Note documents three new File Manager routines available on shared local volumes.  The Pascal glue code, C glue code, and the assembler equates and macros for the calls are included in this note.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1991]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR><!-- begin_content --><a name="Section1"></a><h2>PBShare, PBUnshare, and PBGetUGEntry</h2><p>Three new File Manager routines, <code>PBShare</code>, <code>PBUnshare</code> and <code>PBGetUGEntry</code> are available on local volumes that have File Sharing enabled.  These three routines are necessary to implement a "Sharing" dialog used to make a volume or directory a "share point" on the network and to set the Owner and User/Group of a shared folder.  (For a description of share points, see <A HREF = "fl_20.html">Macintosh Technical Note #301</a>.)  The <code>PBShare</code> routine makes a volume or folder a share point.  The <code>PBUnshare</code> routine undoes the effect of <code>PBShare</code>; it makes a share point unavailable onthe network. The <code>PBGetUGEntry</code> routine lets you access the list of User and Group names and IDs on the local file server.</p><p>File Sharing should be on and the volume should be sharable before you callthese three routines.  You can check to see if File Sharing is turned on andthat the local volume is sharable by calling the <code>PBHGetVolParms</code>routine and checking the <code>bHasPersonalAccessPrivileges</code> (local FileSharing is enabled) bit returned in the <code>vMAttrib</code> field of the<code>GetVolParmsInfoBuffer</code>.  File Sharing is turned on if local FileSharing is enabled on any mounted volume.  A portion of a volume can be sharedonly if local File Sharing is enabled on that volume.  The following twofunctions can be used for these checks:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>FUNCTION VolIsSharable (vRefNum: Integer): Boolean;    {See if local File Sharing is enabled on the volume specified by vRefNum}      VAR        pb: HParamBlockRec;        infoBuffer: GetVolParmsInfoBuffer;        err: OSErr;    BEGIN      WITH pb DO        BEGIN          ioNamePtr := NIL;          ioVRefNum := vRefNum;          ioBuffer := @infoBuffer;          ioReqCount := SizeOf(infoBuffer);        END;      err := PBHGetVolParmsSync(@pb);      IF err = noErr THEN        IF BTst(infoBuffer.vMAttrib, bHasPersonalAccessPrivileges) THEN          VolIsSharable := TRUE        ELSE          VolIsSharable := FALSE      ELSE        VolIsSharable := FALSE;    END;    FUNCTION SharingIsOn: Boolean;    {See if File Sharing is turned on by seeing if any volume has}    {local File Sharing enabled}      VAR        pb: HParamBlockRec;        err: OSErr;        volIndex: Integer;        sharing: Boolean;    BEGIN      sharing := FALSE; {assume File Sharing is off}      volIndex := 1;      REPEAT        WITH pb DO          BEGIN            ioNamePtr := NIL;            ioVolIndex := volIndex;          END;        err := PBHGetVInfoSync(@pb);        IF err = noErr THEN          sharing := VolIsSharable(pb.ioVRefNum);        volIndex := volIndex + 1;      UNTIL (err &lt;&gt; noErr) OR sharing; {stop if error or if a volume has}                                       {local File Sharing enabled}      SharingIsOn := sharing;    END;</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></P><a name="Section2"></a><h2>The Routines</h2><p><b>Assembly-Language Note:</b> These routines are called through the<code>_HFSDispatch</code> macro with register <code>A0</code> pointing to the parameterblock and register <code>D0</code> containing a routine selector.  When your completion routine is called, register <code>A0</code> points to the parameter block of the asynchronous call and register <code>D0</code> contains the result code.  See <i>Inside Macintosh</i>Volume IV, pages IV-115 through IV-119, for detailed information.</p><p><b>PBShare</b></p><p><code>FUNCTION PBShare (paramblock: HParmBlkPtr; async: Boolean) : OSErr;</code></p><p>Trap Macro <code>_Share</code></p><p>Routine selector    $42</p><p>Parameter Block</p><p>-&gt; 12 <code>ioCompletion</code> long pointer to completion routine</p><p>&lt;- 16 <code>ioResult</code> word result code</p><p>-&gt; 18 <code>ioNamePtr</code> long    pointer to directory name</p><p>-&gt; 22 <code>ioVRefNum</code> word    volume specification</p><p>-&gt; 48 <code>ioDirID</code> long parent directory ID</p><p><code>PBShare</code> makes the directory pointed to by the<code>ioNamePtr</code>/<code>ioDirID</code> pair on the volume specified by<code>ioVRefNum</code> a share point.</p><p>Field descriptions</p><p><code>ioCompletion</code> Longword input pointer:  A pointer to the completion routine.</p><p><code>ioResult</code> Word result value:  Result code.</p><p><code>ioNamePtr</code> Longword input pointer:  Points to the directory name, or NIL if <code>ioDirID</code> is the directory ID.</p><p><code>ioVRefNum</code>    Word input value:  The volume specification (volume referencenumber, working directory reference number, drive number, or 0 for default volume).</p><p><code>ioDirID</code>    Longword input value:  The directory or parent directory specification.</p><p>Result codes</p><p><code>noErr</code> 0 No error</p><p><code>tmfoErr</code> -42    Too many share points</p><p><code>fnfErr</code> -43 File not found</p><p><code>dupFNErr</code> -48 There is already a share point with this name</p><p><code>paramErr</code> -50 This function is not supported</p><p><code>dirNFErr</code> -120 Directory not found</p><p><code>afpAccessDenied</code>    -5000 This folder cannot be shared</p><p><code>afpObjectTypeErr</code> -5025 Object was a file, not a directory</p><p><code>afpContainsSharedErr</code> -5033 The directory contains a share point</p><p><code>afpInsideSharedErr</code> -5043 The directory is inside a shared directory</p><p>Pascal glue code for <code>PBShare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    FUNCTION PBShare (paramBlock: HParmBlkPtr; async: BOOLEAN): OSErr;      INLINE $101F,  { MOVE.B     (A7)+,D0   }             $205F,  { MOVEA.L    (A7)+,A0   }             $6606,  { BNE.S      *+$0008    }             $7042,  { MOVEQ      #$42,D0    }             $A260,  { _FSDispatch,Immed     }             $6004,  { BRA.S      *+$0006    }             $7042,  { MOVEQ      #$42,D0    }             $A660,  { _FSDispatch,Sys,Immed }             $3E80;  { MOVE.W     D0,(A7)    }    FUNCTION PBShareSync (paramBlock: HParmBlkPtr): OSErr;      INLINE $205F,  { MOVEA.L    (A7)+,A0   }             $7042,  { MOVEQ      #$42,D0    }             $A260,  { _FSDispatch,Immed     }             $3E80;  { MOVE.W     D0,(A7)    }    FUNCTION PBShareAsync (paramBlock: HParmBlkPtr): OSErr;      INLINE $205F,  { MOVEA.L    (A7)+,A0   }             $7042,  { MOVEQ      #$42,D0    }             $A660,  { _FSDispatch,Sys,Immed }             $3E80;  { MOVE.W     D0,(A7)    }</pre>	</TD></TR></TABLE></CENTER><p>MPW C v3.1 glue code for <code>PBShare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    pascal OSErr PBShare (HParmBlkPtr paramBlock, Boolean async)      = {0x101F,   /* MOVE.B     (A7)+,D0   */         0x205F,   /* MOVEA.L    (A7)+,A0   */         0x6606,   /* BNE.S      *+$0008    */         0x7042,   /* MOVEQ      #$42,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x6004,   /* BRA.S      *+$0006    */         0x7042,   /* MOVEQ      #$42,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */    pascal OSErr PBShareSync (HParmBlkPtr paramBlock)      = {0x205F,   /* MOVEA.L    (A7)+,A0   */         0x7042,   /* MOVEQ      #$42,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x3E80};  /* MOVE.W     D0,(A7)    */    pascal OSErr PBShareAsync (HParmBlkPtr paramBlock)      = {0x205F,   /* MOVEA.L    (A7)+,A0   */         0x7042,   /* MOVEQ      #$42,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */</pre>	</TD></TR></TABLE></CENTER><p>MPW C v3.2 glue code for <code>PBShare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    pascal OSErr PBShare (HParmBlkPtr paramBlock, Boolean async)      = {0x101F,   /* MOVE.B     (A7)+,D0   */         0x205F,   /* MOVEA.L    (A7)+,A0   */         0x6606,   /* BNE.S      *+$0008    */         0x7042,   /* MOVEQ      #$42,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x6004,   /* BRA.S      *+$0006    */         0x7042,   /* MOVEQ      #$42,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */    #pragma parameter __D0 PBShareSync(__A0)    pascal OSErr PBShareSync (HParmBlkPtr paramBlock)      = {0x7042,   /* MOVEQ      #$42,D0    */         0xA260};  /* _FSDispatch,Immed     */    #pragma parameter __D0 PBShareAsync(__A0)    pascal OSErr PBShareAsync (HParmBlkPtr paramBlock)      = {0x7042,   /* MOVEQ      #$42,D0    */         0xA660};  /* _FSDispatch,Sys,Immed */</pre>	</TD></TR></TABLE></CENTER><p>Assembler equate and macro for <code>_Share</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    selectShare         EQU   $42 macro _Share &amp;async1,&amp;async2DoHFSDispatch selectShare,&amp;async1,&amp;async2endm</pre>	</TD></TR></TABLE></CENTER><p><b>PBUnshare</b></p><p><code>FUNCTION PBUnshare (paramblock: HParmBlkPtr; async: Boolean) : OSErr;</code></p><p>Trap Macro <code>_Unshare</code></p><p>Routine selector    $43</p><p>Parameter Block</p><p>-&gt; 12 <code>ioCompletion</code> long pointer to completion routine</p><p>&lt;- 16 <code>ioResult</code> word result code</p><p>-&gt; 18 <code>ioNamePtr</code> long pointer to directory name</p><p>-&gt; 22 <code>ioVRefNum</code> word volume specification</p><p>-&gt; 48 <code>ioDirID</code> long parent directory ID</p><p><code>PBUnshare</code> makes the share point pointed to by the <code>ioNamePtr</code>/<code>ioDirID</code> pair on the volume specified by <code>ioVRefNum</code> unavailable on the network; it undoes the effect of <code>PBShare</code>.</p><p>Field descriptions</p><p><code>ioCompletion</code> Longword input pointer:  A pointer to the completion routine.</p><p><code>ioResult</code> Word result value:  Result code.</p><p><code>ioNamePtr</code> Longword input pointer:  Points to the directory name, or NIL if<code>ioDirID</code> is the directory ID.</p><p><code>ioVRefNum</code>    Word input value:  The volume specification (volume referencenumber, working directory reference number, drive number, or 0 for default volume).</p><p><code>ioDirID</code>    Longword input value: The directory or parent directory specification.</p><p>Result codes</p><p><code>noErr</code> 0 No error</p><p><code>fnfErr</code> -43 File not found</p><p><code>dirNFErr</code> -120 Directory not found</p><p><code>afpObjectTypeErr</code> -5025 Object was a file, not a directory, or this directory is not a share point</p><p>Pascal glue code for <code>PBUnshare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    FUNCTION PBUnshare (paramBlock: HParmBlkPtr; async: BOOLEAN): OSErr;      INLINE $101F,  { MOVE.B     (A7)+,D0   }             $205F,  { MOVEA.L    (A7)+,A0   }             $6606,  { BNE.S      *+$0008    }             $7043,  { MOVEQ      #$43,D0    }             $A260,  { _FSDispatch,Immed     }             $6004,  { BRA.S      *+$0006    }             $7043,  { MOVEQ      #$43,D0    }             $A660,  { _FSDispatch,Sys,Immed }             $3E80;  { MOVE.W     D0,(A7)    }    FUNCTION PBUnshareSync (paramBlock: HParmBlkPtr): OSErr;      INLINE $205F,  { MOVEA.L    (A7)+,A0   }             $7043,  { MOVEQ      #$43,D0    }             $A260,  { _FSDispatch,Immed     }             $3E80;  { MOVE.W     D0,(A7)    }    FUNCTION PBUnshareAsync (paramBlock: HParmBlkPtr): OSErr;      INLINE $205F,  { MOVEA.L    (A7)+,A0   }             $7043,  { MOVEQ      #$43,D0    }             $A660,  { _FSDispatch,Sys,Immed }             $3E80;  { MOVE.W     D0,(A7)    }</pre>	</TD></TR></TABLE></CENTER><p>MPW C v3.1 glue code for <code>PBUnshare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    pascal OSErr PBUnshare (HParmBlkPtr paramBlock, Boolean async)      = {0x101F,   /* MOVE.B     (A7)+,D0   */         0x205F,   /* MOVEA.L    (A7)+,A0   */         0x6606,   /* BNE.S      *+$0008    */         0x7043,   /* MOVEQ      #$43,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x6004,   /* BRA.S      *+$0006    */         0x7043,   /* MOVEQ      #$43,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */    pascal OSErr PBUnshareSync (HParmBlkPtr paramBlock)      = {0x205F,   /* MOVEA.L    (A7)+,A0   */         0x7043,   /* MOVEQ      #$43,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x3E80};  /* MOVE.W     D0,(A7)    */    pascal OSErr PBUnshareAsync (HParmBlkPtr paramBlock)      = {0x205F,   /* MOVEA.L    (A7)+,A0   */         0x7043,   /* MOVEQ      #$43,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */</pre>	</TD></TR></TABLE></CENTER><p>MPW C v3.2 glue code for <code>PBUnshare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    pascal OSErr PBUnshare (HParmBlkPtr paramBlock, Boolean async)      = {0x101F,   /* MOVE.B     (A7)+,D0   */         0x205F,   /* MOVEA.L    (A7)+,A0   */         0x6606,   /* BNE.S      *+$0008    */         0x7043,   /* MOVEQ      #$43,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x6004,   /* BRA.S      *+$0006    */         0x7043,   /* MOVEQ      #$43,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */    #pragma parameter __D0 PBUnshareSync(__A0)    pascal OSErr PBUnshareSync (HParmBlkPtr paramBlock)      = {0x7043,   /* MOVEQ      #$43,D0    */         0xA260};  /* _FSDispatch,Immed     */    #pragma parameter __D0 PBUnshareAsync(__A0)    pascal OSErr PBUnshareAsync (HParmBlkPtr paramBlock)      = {0x7043,   /* MOVEQ      #$43,D0    */         0xA660};  /* _FSDispatch,Sys,Immed */</pre>	</TD></TR></TABLE></CENTER><p>Assembler equate and macro for <code>_Unshare</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    selectUnshare         EQU   $43macro_Unshare &amp;async1,&amp;async2DoHFSDispatch selectUnshare,&amp;async1,&amp;async2endm</pre>	</TD></TR></TABLE></CENTER><p><b>PBGetUGEntry</b></p><p><code>FUNCTION PBGetUGEntry (paramblock: HParmBlkPtr; async: Boolean) : OSErr;</code></p><p>Trap Macro    <code>_GetUGEntry</code></p><p>Routine selector    $44</p><p>Parameter Block</p><p>-&gt; 12 <code>ioCompletion</code> long pointer to completion routine</p><p>&lt;- 16 <code>ioResult</code> word result code</p><p>-&gt; 26 <code>ioObjType</code> word object type function code</p><p>-&gt; 28 <code>ioObjNamePtr</code> long ptr to returned user/group name</p><p>&lt;-&gt; 32 <code>ioObjID</code> long user/group ID</p><p><code>PBGetUGEntry</code> asks the local file server for the next user or group in itslist.  <code>PBGetUGEntry</code> returns the user or group name and the user or group ID.</p><p>Field descriptions</p><p><code>ioCompletion</code> Longword input pointer: A pointer to the completion routine.</p><p><code>ioResult</code> Word result value:  Result code.</p><p><code>ioObjType</code> Word input value:  Determines the type of object to be returned, as follows:</p>    <p>$0000 return next user</p>    <p>$FFFF return next group</p><p><code>ioObjNamePtr</code>    Longword input pointer:  Points to a result buffer where theuser or group name is to be returned.  If the pointer is NIL, then no name is returned.  The name is returned as a Pascal string with a maximum size of 31 characters (Str31).</p><p><code>ioObjID</code>    Longword input/result value:  The server will return the firstuser or group whose name is alphabetically next from the user specified by <code>ioObjID</code>. Setting <code>ioObjID</code> to 0 will return the first user or group.  On return, <code>ioObjID</code> will be the user or group's ID.</p><p>You can enumerate the user or group list in alphabetical order by calling thisroutine again and again without changing the parameter block until the resultcode <code>fnfErr</code> is returned.</p><p>Result codes</p><p><code>noErr</code> 0 No error</p><p><code>paramErr</code> -50 The <code>ioObjID</code> is negative or this function is not supported</p><p><code>fnfErr</code> -43 There are no more users or groups to return</p><p>Pascal glue code for <code>PBGetUGEntry</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    FUNCTION PBGetUGEntry (paramBlock: HParmBlkPtr;      async: BOOLEAN): OSErr;      INLINE $101F,  { MOVE.B     (A7)+,D0   }             $205F,  { MOVEA.L    (A7)+,A0   }             $6606,  { BNE.S      *+$0008    }             $7044,  { MOVEQ      #$44,D0    }             $A260,  { _FSDispatch,Immed     }             $6004,  { BRA.S      *+$0006    }             $7044,  { MOVEQ      #$44,D0    }             $A660,  { _FSDispatch,Sys,Immed }             $3E80;  { MOVE.W     D0,(A7)    }    FUNCTION PBGetUGEntrySync (paramBlock: HParmBlkPtr):    OSErr;      INLINE $205F,  { MOVEA.L    (A7)+,A0   }             $7044,  { MOVEQ      #$44,D0    }             $A260,  { _FSDispatch,Immed     }             $3E80;  { MOVE.W     D0,(A7)    }    FUNCTION PBGetUGEntryAsync (paramBlock: HParmBlkPtr):    OSErr;      INLINE $205F,  { MOVEA.L    (A7)+,A0   }             $7044,  { MOVEQ      #$44,D0    }             $A660,  { _FSDispatch,Sys,Immed }             $3E80;  { MOVE.W     D0,(A7)    }</pre>	</TD></TR></TABLE></CENTER><p>MPW C v3.1 glue code for <code>PBGetUGEntry</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    pascal OSErr PBGetUGEntry (HParmBlkPtr paramBlock,         Boolean async)      = {0x101F,   /* MOVE.B     (A7)+,D0   */         0x205F,   /* MOVEA.L    (A7)+,A0   */         0x6606,   /* BNE.S      *+$0008    */         0x7044,   /* MOVEQ      #$44,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x6004,   /* BRA.S      *+$0006    */         0x7044,   /* MOVEQ      #$44,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */    pascal OSErr PBGetUGEntrySync (HParmBlkPtr paramBlock)      = {0x205F,   /* MOVEA.L    (A7)+,A0   */         0x7044,   /* MOVEQ      #$44,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x3E80};  /* MOVE.W     D0,(A7)    */    pascal OSErr PBGetUGEntryAsync (HParmBlkPtr paramBlock)      = {0x205F,   /* MOVEA.L    (A7)+,A0   */         0x7044,   /* MOVEQ      #$44,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */</pre>	</TD></TR></TABLE></CENTER><p>MPW C v3.2 glue code for <code>PBGetUGEntry</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    pascal OSErr PBGetUGEntry (HParmBlkPtr paramBlock,         Boolean async)      = {0x101F,   /* MOVE.B     (A7)+,D0   */         0x205F,   /* MOVEA.L    (A7)+,A0   */         0x6606,   /* BNE.S      *+$0008    */         0x7044,   /* MOVEQ      #$44,D0    */         0xA260,   /* _FSDispatch,Immed     */         0x6004,   /* BRA.S      *+$0006    */         0x7044,   /* MOVEQ      #$44,D0    */         0xA660,   /* _FSDispatch,Sys,Immed */         0x3E80};  /* MOVE.W     D0,(A7)    */    #pragma parameter __D0 PBGetUGEntrySync(__A0)    pascal OSErr PBGetUGEntrySync (HParmBlkPtr paramBlock)      = {0x7044,   /* MOVEQ      #$44,D0    */         0xA260};  /* _FSDispatch,Immed     */    #pragma parameter __D0 PBGetUGEntryAsync(__A0)    pascal OSErr PBGetUGEntryAsync (HParmBlkPtr paramBlock)      = {0x7044,   /* MOVEQ      #$44,D0    */         0xA660};  /* _FSDispatch,Sys,Immed */</pre>	</TD></TR></TABLE></CENTER><p>Assembler equate and macro for <code>_GetUGEntry</code>:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    selectGetUGEntry    EQU   $44macro_GetUGEntry &amp;async1,&amp;async2DoHFSDispatch selectGetUGEntry,&amp;async1,&amp;async2endm</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><p><i>Inside Macintosh</i>, Volume IV, The File Manager</p><p><i>Inside Macintosh</i>, Volume V, File Manager Extensions In a Shared Environment</p><p><i>Inside Macintosh</i>, Volume VI, The File Manager</p><p><i>Inside AppleTalk</i>, AppleTalk Filing Protocol</p><p>Technical Note M.FL.FileShare , <u><A HREF = "fl_20.html">File Sharing and Shared Folders</a></u></p><P><A HREF="#top">Back to top</A></P><P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (64K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/fl_28.pdf">Download</A></P>               </TD>            </TR></table><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/fl/fl_28.html%3Fid%3DDTS10002454-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/fl/fl_28.html%3Fid%3DDTS10002454-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/fl/fl_28.html%3Fid%3DDTS10002454-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<html><head><title>Mac OS X
 Manual Page For Devel::DProf(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/Devel::DProf" title="Mac OS X
 Manual Page for Devel::DProf(3pm)"><a name="//apple_ref/doc/man/3/Devel::DProf" title="Mac OS X
 Manual Page for Devel::DProf(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/Devel::DProf"; name=Devel::DProf(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Devel::DProf(3pm)                     Perl Programmers Reference Guide                     Devel::DProf(3pm)



<b>NAME</b>
       Devel::DProf - a Perl code profiler

<b>SYNOPSIS</b>
               perl -d:DProf test.pl

<b>DESCRIPTION</b>
       The Devel::DProf package is a Perl code profiler.  This will collect information on the execution
       time of a Perl script and of the subs in that script.  This information can be used to determine
       which subroutines are using the most time and which subroutines are being called most often.  This
       information can also be used to create an execution graph of the script, showing subroutine relation-<font color="#ffffff" class="whiteout">ships.&nbsp;relationships.</font>
       ships.

       To profile a Perl script run the perl interpreter with the <b>-d</b> debugging switch.  The profiler uses
       the debugging hooks.  So to profile script <u>test.pl</u> the following command should be used:

               perl -d:DProf test.pl

       When the script terminates (or when the output buffer is filled) the profiler will dump the profile
       information to a file called <u>tmon.out</u>.  A tool like <u>dprofpp</u> can be used to interpret the information
       which is in that profile.  The following command will print the top 15 subroutines which used the
       most time:

               dprofpp

       To print an execution graph of the subroutines in the script use the following command:

               dprofpp -T

       Consult dprofpp for other options.

<b>PROFILE</b> <b>FORMAT</b>
       The old profile is a text file which looks like this:

               #fOrTyTwO
               $hz=100;
               $XS_VERSION='DProf 19970606';
               # All values are given in HZ
               $rrun_utime=2; $rrun_stime=0; $rrun_rtime=7
               PART2
               + 26 28 566822884 DynaLoader::import
               - 26 28 566822884 DynaLoader::import
               + 27 28 566822885 main::bar
               - 27 28 566822886 main::bar
               + 27 28 566822886 main::baz
               + 27 28 566822887 main::bar
               - 27 28 566822888 main::bar
               [....]

       The first line is the magic number.  The second line is the hertz value, or clock ticks, of the
       machine where the profile was collected.  The third line is the name and version identifier of the
       tool which created the profile.  The fourth line is a comment.  The fifth line contains three vari-<font color="#ffffff" class="whiteout">ables&nbsp;variables</font>
       ables holding the user time, system time, and realtime of the process while it was being profiled.
       The sixth line indicates the beginning of the sub entry/exit profile section.

       The columns in <b>PART2</b> are:

               sub entry(+)/exit(-) mark
               app's user time at sub entry/exit mark, in ticks
               app's system time at sub entry/exit mark, in ticks
               app's realtime at sub entry/exit mark, in ticks
               fully-qualified sub name, when possible

       With newer perls another format is used, which may look like this:

               #fOrTyTwO
               $hz=10000;
               $XS_VERSION='DProf 19971213';
               # All values are given in HZ
               $over_utime=5917; $over_stime=0; $over_rtime=5917;
               $over_tests=10000;
               $rrun_utime=1284; $rrun_stime=0; $rrun_rtime=1284;
               $total_marks=6;

               PART2
               @ 406 0 406
               &amp; 2 main bar
               + 2
               @ 456 0 456
               - 2
               @ 1 0 1
               &amp; 3 main baz
               + 3
               @ 141 0 141
               + 2
               @ 141 0 141
               - 2
               @ 1 0 1
               &amp; 4 main foo
               + 4
               @ 142 0 142
               + &amp; Devel::DProf::write
               @ 5 0 5
               - &amp; Devel::DProf::write

       (with high value of $ENV{PERL_DPROF_TICKS}).

       New "$over_*" values show the measured overhead of making $over_tests calls to the profiler These
       values are used by the profiler to subtract the overhead from the runtimes.

       The lines starting with "@" mark time passed from the previous "@" line.  The lines starting with "&amp;"
       introduce new subroutine <u>id</u> and show the package and the subroutine name of this id.  Lines starting
       with "+", "-" and "*" mark entering and exit of subroutines by <u>id</u>s, and "goto &amp;subr".

       The <u>old-style</u> "+"- and "-"-lines are used to mark the overhead related to writing to profiler-output
       file.

<b>AUTOLOAD</b>
       When Devel::DProf finds a call to an &amp;AUTOLOAD subroutine it looks at the $AUTOLOAD variable to find
       the real name of the sub being called.  See "Autoloading" in perlsub.

<b>ENVIRONMENT</b>
       "PERL_DPROF_BUFFER" sets size of output buffer in words.  Defaults to 2**14.

       "PERL_DPROF_TICKS" sets number of ticks per second on some systems where a replacement for <u>times()</u> is
       used.  Defaults to the value of "HZ" macro.

       "PERL_DPROF_OUT_FILE_NAME" sets the name of the output file.  If not set, defaults to tmon.out.

<b>BUGS</b>
       Builtin functions cannot be measured by Devel::DProf.

       With a newer Perl DProf relies on the fact that the numeric slot of $DB::sub contains an address of a
       subroutine.  Excessive manipulation of this variable may overwrite this slot, as in

         $DB::sub = 'current_sub';
         ...
         $addr = $DB::sub + 0;

       will set this numeric slot to numeric value of the string "current_sub", i.e., to 0.  This will cause
       a segfault on the exit from this subroutine.  Note that the first assignment above does not change
       the numeric slot (it will <u>mark</u> it as invalid, but will not write over it).

       Another problem is that if a subroutine exits using goto(LABEL), last(LABEL) or next(LABEL) then perl
       may crash or Devel::DProf will die with the error:

          panic: Devel::DProf inconsistent subroutine return

       For example, this code will break under Devel::DProf:

          sub foo {
            last FOO;
          }
          FOO: {
            foo();
          }

       A pattern like this is used by Test::More's <u>skip()</u> function, for example.  See perldiag for more
       details.

       Mail bug reports and feature requests to the perl5-porters mailing list at <u>&lt;perl5-porters@perl.org&gt;</u>.

<b>SEE</b> <b>ALSO</b>
       perl, dprofpp, <!-- a --><u>times</u>(2)<!-- /a -->



perl v5.8.8                                      2001-09-21                                Devel::DProf(3pm)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Devel__DProf.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Devel__DProf.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Devel__DProf.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Sound Header Records (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING74></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-73.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-75.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-44.html"><B>Chapter 2 - Sound Manager</B></A> / <A HREF="Sound-62.html"><B>Sound Manager Reference</B></A><BR><DL><DD><A HREF="Sound-68.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="../../../referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING74-0></A>
<H3><A NAME=MARKER-9-657></A>Sound Header Records</H3>
 <A NAME=MARKER-2-167></A><A NAME=MARKER-2-41></A>Sound resources often contain sampled-sound data as well as sound commands. The sound data is contained in the last field of the sound header. You can access a sound header record to find information about sampled-sound data. The standard sound header is used only for simple monophonic sounds. The <CODE>SoundHeader</CODE> data type defines a sampled sound header record.<A NAME=MARKER-2-196></A><P>
<PRE>
TYPE SoundHeader =
PACKED RECORD
   samplePtr:     Ptr;        {if NIL, samples in sampleArea}
   length:        LongInt;    {number of samples in array}
   sampleRate:    Fixed;      {sample rate}
   loopStart:     LongInt;    {loop point beginning}
   loopEnd:       LongInt;    {loop point ending}
   encode:        Byte;       {sample's encoding option}
   baseFrequency: Byte;       {base frequency of sample}
   sampleArea:    PACKED ARRAY[0..0] OF Byte;
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>samplePtr</CODE>
<DD> A pointer to the sampled-sound data. If the sampled sound is located in memory immediately after the <CODE>baseFrequency</CODE> field, then this field should be set to <CODE>NIL</CODE>. Otherwise, this field is a pointer to the memory location of the sampled-sound data. (This might be useful if you want to change some fields of a sound header but do not want to modify a handle to a sound resource directly.)<A NAME=MARKER-2-202></A>
<DT><CODE>length</CODE>
<DD> The number of bytes of sound data.<A NAME=MARKER-2-203></A>
<DT><A NAME=MARKER-2-263></A><CODE>sampleRate</CODE>
<DD> The rate at which the sample was originally recorded. The Sound Manager can play sounds sampled at any rate up to 64 kHz. The values corresponding to the three most common sample rates (11 kHz, 22 kHz, and 44 kHz) are defined by constants:
</DL>
<PRE>
               CONST
                  rate44khz   = $AC440000;   {44100.00000 Fixed}
                  rate22khz   = $56EE8BA3;   {22254.54545 Fixed}
                  rate11khz   = $2B7745D1;   {11127.27273 Fixed}
</PRE>
<DL>
<DT>
<DD> Note that the sample rate is declared as a <CODE>Fixed</CODE> data type, but the most significant bit is not treated as a sign bit; instead, that bit is interpreted as having the value 32,768.<A NAME=MARKER-2-287></A>
<DT><CODE>loopStart</CODE>
<DD> The starting point of the portion of the sampled sound header that is to be used by the Sound Manager when determining the duration of <CODE>freqDurationCmd</CODE>. These loop points specify the byte numbers in the sampled data to be used as the beginning and end points to cycle through when playing the sound. The loop starting and ending points are 0-based.
<DT><CODE>loopEnd</CODE>
<DD> The end point of the portion of the sampled sound header that is to be used by the Sound Manager when determining the duration of <CODE>freqDurationCmd</CODE>. If no looping is desired, set both <CODE>loopStart</CODE> and <CODE>loopEnd</CODE> to 0.
<DT><CODE>encode</CODE>
<DD> The method of encoding used to generate the sampled-sound data. The current encoding option values are
</DL>
<PRE>
               CONST
                  stdSH    = $00;   {standard sound header}
                  extSH    = $FF;   {extended sound header}
                  cmpSH    = $FE;   {compressed sound header}
</PRE>
<DL>
<DT>
<DD> For a standard sound header, you should specify the constant <CODE>stdSH</CODE>. Encode option values in the ranges 0 through 63 and 128 to 255 are reserved for use by Apple. You are free to use numbers in the range 64 through 127 for your own encode options.
<DT><CODE>baseFrequency</CODE>
<DD> The pitch at which the original sample was taken. This value must be in the range 1 through 127. <A HREF=Sound-54.html#MARKER-9-18>Table 2-2 on page 2-43</A> lists the possible <CODE>baseFrequency</CODE> values. The <CODE>baseFrequency</CODE> value allows the Sound Manager to calculate the proper playback rate of the sample when an application uses the <CODE>freqDurationCmd</CODE> command. Applications should not alter the <CODE>baseFrequency</CODE> field of a sampled sound; to play the sample at different pitches, use <CODE>freqDurationCmd</CODE> or <CODE>freqCmd</CODE>.<A NAME=MARKER-2-667></A><A NAME=MARKER-2-668></A>
<DT><CODE>sampleArea</CODE>
<DD> If the value of <CODE>samplePtr</CODE> is <CODE>NIL</CODE>, this field is an array of bytes, each of which contains a value similar to the values in a wave-table description. These values are interpreted as offset values, where $80 represents an amplitude of 0. The value $00 is the most negative amplitude, and $FF is the largest positive amplitude. The samples are numbered 1 through the value in the <CODE>length</CODE> parameter.
</DL>
 If you need to create a sound header for sampled-sound data that your application has recorded, then you should use the <CODE>SetupSndHeader</CODE> function, described in the chapter <A HREF=Sound-137.html#MARKER-9-35>"Sound Input Manager"</A> in this book.<A NAME=MARKER-2-672></A><A NAME=MARKER-2-236></A><A NAME=MARKER-2-674></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-73.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-75.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>File Manager Summary: C & Assembly (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING301></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-301.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-302.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-72.html"><B>Chapter 2 - File Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING301-0></A>
<H1><A NAME=MARKER-9-1488></A>Summary of the File Manager</H1>
<A NAME=HEADING301-349></A>
<H2>C Summary</H2>
<A NAME=HEADING301-350></A>
<H3>Constants</H3>
<PRE>
/*Gestalt constants*/
#define gestaltFSAttr            'fs  '   /*file system attributes selector*/
#define gestaltFullExtFSDispatching 0     /*exports HFSDispatch traps*/
#define gestaltHasFSSpecCalls       1     /*supports FSSpec records*/
/*directory IDs*/
enum {
   fsRtParID            = 1,     /*directory ID of root directory's parent*/
   fsRtDirID            = 2};    /*directory ID of volume's root directory*/
/*values for requesting file read/write permissions*/
enum {
   fsCurPerm            = 0,     /*whatever permission is allowed*/
   fsRdPerm             = 1,     /*read permission*/
   fsWrPerm             = 2,     /*write permission*/
   fsRdWrPerm           = 3,     /*exclusive read/write permission*/
   fsRdWrShPerm         = 4};    /*shared read/write permission*/
/*file mark positioning modes*/
enum {
   fsAtMark             = 0,     /*at current mark}
   fsFromStart          = 1,     /*set mark relative to beginning of file*/
   fsFromLEOF           = 2,     /*set mark relative to logical end-of-file*/
   fsFromMark           = 3,     /*set mark relative to current mark*/
   rdVerify             = 64};   /*add to above for read-verify*/
/*values for ioSearchBits in PBCatSearch parameter block*/
enum {
   fsSBPartialName      = 1,        /*substring of name*/
   fsSBFullName         = 2,        /*full name*/
   fsSBFlAttrib         = 4,        /*directory flag; software lock flag*/
   fsSBNegate           = 16384};   /*reverse match status*/
/*for files only*/
enum {
   fsSBFlFndrInfo       = 8,        /*Finder file info*/
   fsSBFlLgLen          = 32,       /*logical length of data fork*/
   fsSBFlPyLen          = 64,       /*physical length of data fork*/
   fsSBFlRLgLen         = 128,      /*logical length of resource fork*/
   fsSBFlRPyLen         = 256,      /*physical length of resource fork*/
   fsSBFlCrDat          = 512,      /*file creation date*/
   fsSBFlMdDat          = 1024,     /*file modification date*/
   fsSBFlBkDat          = 2048,     /*file backup date*/
   fsSBFlXFndrInfo      = 4096,     /*more Finder file info*/
   fsSBFlParID          = 8192};    /*file's parent ID*/
/*for directories only*/
enum {
   fsSBDrUsrWds         = 8,        /*Finder directory info*/
   fsSBDrNmFls          = 16,       /*number of files in directory*/
   fsSBDrCrDat          = 512,      /*directory creation date*/
   fsSBDrMdDat          = 1024,     /*directory modification date*/
   fsSBDrBkDat          = 2048,     /*directory backup date*/
   fsSBDrFndrInfo       = 4096,     /*more Finder directory info*/
   fsSBDrParID          = 8192};    /*directory's parent ID*/
/*value of vMForeignPrivID in file attributes buffer*/
enum {fsUnixPriv        = 1};       /*A/UX privilege model*/
/*bit positions in vMAttrib field of GetVolParmsInfoBuffer*/
enum {
   bHasBlankAccessPrivileges
                        = 4,        /*volume supports inherited privileges*/
   bHasBTreeMgr         = 5,        /*reserved*/
   bHasFileIDs          = 6,        /*volume supports file ID functions*/
   bHasCatSearch        = 7,        /*volume supports PBCatSearch*/
   bHasUserGroupList    = 8,        /*volume supports AFP privileges*/
   bHasPersonalAccessPrivileges
                        = 9,        /*local file sharing is enabled*/
   bHasFolderLock       = 10,       /*volume supports locking of folders*/
   bHasShortName        = 11,       /*volume supports shorter volume name*/ 
   bHasDesktopMgr       = 12,       /*volume supports Desktop Manager*/
   bHasMoveRename       = 13,       /*volume supports _MoveRename*/
   bHasCopyFile         = 14,       /*volume supports _CopyFile*/
   bHasOpenDeny         = 15,       /*volume supports shared access modes*/
   bHasExtFSVol         = 16,       /*volume is external file system volume*/
   bNoSysDir            = 17,       /*volume has no system directory*/
   bAccessCntl          = 18,       /*volume supports AFP access control*/
   bNoBootBlks          = 19,       /*volume is not a startup volume*/
   bNoDeskItems         = 20,       /*do not place objects on the desktop*/
   bNoSwitchTo          = 25,       /*do not switch launch to applications*/
   bTrshOffLine         = 26,       /*zoom volume when it is unmounted*/
   bNoLclSync           = 27,       /*don't let Finder change mod. date*/
   bNoVNEdit            = 28,       /*lock volume name*/
   bNoMiniFndr          = 29,       /*reserved; always 1*/
   bLocalWList          = 30,       /*use shared volume handle for window */
                                    /* list*/
   bLimitFCBs           = 31};      /*limit file control blocks*/
/*media type in remote mounting information/*
enum {AppleShareMediaType
                        = 'afpm'};  /*an AppleShare volume*/
/*user authentication methods in AFP remote mounting information*/
enum {
   kNoUserAuthentication   = 1,        /*guest status; no password needed*/
   kPassword               = 2,        /*8-byte password*/
   kEncryptPassword        = 3,        /*encrypted 8-byte password*/
   kTwoWayEncryptPassword  = 6};       /*two-way random encryption; */
                                       /* authenticate both user and server*/
</PRE>
<A NAME=HEADING301-362></A>
<H3>Data Types</H3>
<A NAME=HEADING301-363></A>
<H4>File System Specification Record</H4>
<PRE>
struct FSSpec  {                    /*file system specification*/
      short       vRefNum;          /*volume reference number*/
      long        parID;            /*directory ID of parent directory*/
      Str63       name;             /*filename or directory name*/
};

typedef struct FSSpec FSSpec;
typedef FSSpec *FSSpecPtr;
typedef FSSpecPtr *FSSpecHandle;
</PRE>
<A NAME=HEADING301-365></A>
<H4>File and Directory Parameter Blocks</H4>
<PRE>
union ParamBlockRec {
      IOParam           ioParam;
      FileParam         fileParam;
      VolumeParam       volumeParam;
      CntrlParam        cntrlParam;
      SlotDevParam      slotDevParam;
      MultiDevParam     multiDevParam;
};

typedef union ParamBlockRec ParamBlockRec;
typedef ParamBlockRec *ParmBlkPtr;
#define ParamBlockHeader \
      QElemPtr    qLink;            /*next queue entry*/\
      short       qType;            /*queue type*/\
      short       ioTrap;           /*routine trap*/\
      Ptr         ioCmdAddr;        /*routine address*/\
      ProcPtr     ioCompletion;     /*completion routine*/\
      OSErr       ioResult;         /*result code*/\
      StringPtr   ioNamePtr;        /*pointer to pathname*/\
      short       ioVRefNum;        /*volume specification*/
struct IOParam {
      ParamBlockHeader
      short       ioRefNum;         /*file reference number*/
      char        ioVersNum;        /*version number*/
      char        ioPermssn;        /*read/write permission*/
      Ptr         ioMisc;           /*miscellaneous*/
      Ptr         ioBuffer;         /*data buffer*/
      long        ioReqCount;       /*requested number of bytes*/
      long        ioActCount;       /*actual number of bytes*/
      short       ioPosMode;        /*positioning mode and newline char.*/
      long        ioPosOffset;      /*positioning offset*/
};

typedef struct IOParam IOParam;
struct FileParam {
      ParamBlockHeader
      short          ioFRefNum;        /*file reference number*/
      char           ioFVersNum;       /*file version number (unused)*/
      char           filler1;          /*reserved*/
      short          ioFDirIndex;      /*directory index*/
      unsigned char  ioFlAttrib;       /*file attributes*/
      unsigned char  ioFlVersNum;      /*file version number (unused)*/
      FInfo          ioFlFndrInfo;     /*information used by the Finder*/
      unsigned long  ioFlNum;          /*File ID*/
      unsigned short ioFlStBlk;        /*first alloc. blk. of data fork*/
      long           ioFlLgLen;        /*logical EOF of data fork*/
      long           ioFlPyLen;        /*physical EOF of data fork*/
      unsigned short ioFlRStBlk;       /*first alloc. blk. of resource fork*/
      long           ioFlRLgLen;       /*logical EOF of resource fork*/
      long           ioFlRPyLen;       /*physical EOF of resource fork*/
      unsigned long  ioFlCrDat;        /*date and time of creation*/
      unsigned long  ioFlMdDat;        /*date and time of last modification*/
};

typedef struct FileParam FileParam;
struct VolumeParam {
      ParamBlockHeader
      long           filler2;          /*reserved*/
      short          ioVolIndex;       /*volume index*/
      unsigned long  ioVCrDate;        /*date and time of initialization*/
      unsigned long  ioVLsBkUp;        /*date and time of last modification*/
      unsigned short ioVAtrb;          /*volume attributes*/
      unsigned short ioVNmFls;         /*number of files in root directory*/
      unsigned short ioVDirSt;         /*first block of directory*/
      short          ioVBlLn;          /*length of directory in blocks*/
      unsigned short ioVNmAlBlks;      /*number of allocation blocks*/
      long           ioVAlBlkSiz;      /*size of allocation blocks*/
      long           ioVClpSiz;        /*number of bytes to allocate*/
      unsigned short ioAlBlSt;         /*first block in block map*/
      unsigned long  ioVNxtFNum;       /*next unused file ID*/
      unsigned short ioVFrBlk;         /*number of unused allocation blocks*/
};

typedef struct VolumeParam VolumeParam;
union HParamBlockRec {                 /*HFS parameter block*/
      HIOParam             ioParam;
      HFileParam           fileParam;
      HVolumeParam         volumeParam;
      AccessParam          accessParam;
      ObjParam             objParam;
      CopyParam            copyParam;
      WDParam              wdParam;
      FIDParam             fidParam;
      CSParam              csParam;
      ForeignPrivParam     foreignPrivParam;
};

typedef union HParamBlockRec HParamBlockRec;
typedef HParamBlockRec *HParmBlkPtr;
struct HIOParam {
      ParamBlockHeader
      short             ioRefNum;      /*file reference number*/
      char              ioVersNum;     /*version number*/
      char              ioPermssn;     /*read/write permission*/
      Ptr               ioMisc;        /*miscellaneous*/
      Ptr               ioBuffer;      /*data buffer*/
      long              ioReqCount;    /*requested number of bytes*/
      long              ioActCount;    /*actual number of bytes*/
      short             ioPosMode;     /*positioning mode and newline char.*/
      long              ioPosOffset;   /*positioning offset*/
};

typedef struct HIOParam HIOParam;
struct HFileParam {
      ParamBlockHeader
      short             ioFRefNum;     /*file reference number*/
      char              ioFVersNum;    /*file version number (unused)*/
      char              filler1;       /*reserved*/
      short             ioFDirIndex;   /*directory index*/
      char              ioFlAttrib;    /*file attributes*/
      char              ioFlVersNum;   /*file version number (unused)*/
      FInfo             ioFlFndrInfo;  /*information used by the Finder*/
      long              ioDirID;       /*directory ID or file ID*/
      unsigned short    ioFlStBlk;     /*first alloc. blk. of data fork*/
      long              ioFlLgLen;     /*logical EOF of data fork*/
      long              ioFlPyLen;     /*physical EOF of data fork*/
      unsigned short    ioFlRStBlk;    /*first alloc. blk. of resource fork*/
      long              ioFlRLgLen;    /*logical EOF of resource fork*/
      long              ioFlRPyLen;    /*physical EOF of resource fork*/
      unsigned long     ioFlCrDat;     /*date and time of creation*/
      unsigned long     ioFlMdDat;     /*date and time of last modification*/
};

typedef struct HFileParam HFileParam;
struct HVolumeParam {
      ParamBlockHeader
      long              filler2;       /*reserved*/
      short             ioVolIndex;    /*volume index*/
      unsigned long     ioVCrDate;     /*date and time of initialization*/
      unsigned long     ioVLsMod;      /*date and time of last modification*/
      short             ioVAtrb;       /*volume attributes*/
      unsigned short    ioVNmFls;      /*number of files in root directory*/
      short             ioVBitMap;     /*first block of volume bitmap*/
      short             ioAllocPtr;    /*first block of next new file*/
      unsigned short    ioVNmAlBlks;   /*number of allocation blocks*/
      long              ioVAlBlkSiz;   /*size of allocation blocks*/
      long              ioVClpSiz;     /*default clump size*/
      short             ioAlBlSt;      /*first block in volume map*/
      long              ioVNxtCNID;    /*next unused node ID*/
      unsigned short    ioVFrBlk;      /*number of unused allocation blocks*/
      unsigned short    ioVSigWord;    /*volume signature*/
      short             ioVDrvInfo;    /*drive number*/
      short             ioVDRefNum;    /*driver reference number*/
      short             ioVFSID;       /*file-system identifier*/
      unsigned long     ioVBkUp;       /*date and time of last backup*/
      unsigned short    ioVSeqNum;     /*used internally*/
      long              ioVWrCnt;      /*volume write count*/
      long              ioVFilCnt;     /*number of files on volume*/
      long              ioVDirCnt;     /*number of directories on volume*/
      long              ioVFndrInfo[8];/*information used by the Finder*/
};

typedef struct HVolumeParam HVolumeParam;
struct AccessParam {
      ParamBlockHeader
      short             filler3;       /*reserved*/
      short             ioDenyModes;   /*access mode information*/
      short             filler4;       /*reserved*/
      char              filler5;       /*reserved*/
      char              ioACUser;      /*user access rights*/
      long              filler6;       /*reserved*/
      long              ioACOwnerID;   /*owner ID*/
      long              ioACGroupID;   /*group ID*/
      long              ioACAccess;    /*directory access rights*/
};

typedef struct AccessParam AccessParam;
struct ObjParam {
      ParamBlockHeader
      short             filler7;       /*reserved*/
      short             ioObjType;     /*function code*/
      StringPtr         ioObjNamePtr;  /*ptr to returned creator/group name*/
      long              ioObjID;       /*creator/group ID*/
      long              ioReqCount;    /*size of buffer area*/
      long              ioActCount;    /*length of data*/
};

typedef struct ObjParam ObjParam;
struct CopyParam {
      ParamBlockHeader
      short             ioDstVRefNum;  /*destination volume identifier*/
      short             filler8;       /*reserved*/
      StringPtr         ioNewName;     /*pointer to destination pathname*/
      StringPtr         ioCopyName;    /*pointer to optional name*/
      long              ioNewDirID;    /*destination directory ID*/
      long              filler14;      /*reserved*/
      long              filler15;      /*reserved*/
      long              ioDirID;       /*directory ID or file ID*/
};

typedef struct CopyParam CopyParam;
struct WDParam {
      ParamBlockHeader
      short             filler9;       /*reserved*/
      short             ioWDIndex;     /*working directory index*/
      long              ioWDProcID;    /*working directory user identifier*/
      short             ioWDVRefNum;   /*working directory's vol. ref. num.*/
      short             filler10;      /*reserved*/
      long              filler11;      /*reserved*/
      long              filler12;      /*reserved*/
      long              filler13;      /*reserved*/
      long              ioWDDirID;     /*working directory's directory ID*/
};

typedef struct WDParam WDParam;
struct FIDParam {
      ParamBlockHeader
      long              filler1;       /*reserved*/
      StringPtr         ioDestNamePtr; /*pointer to destination filename*/
      long              filler2;       /*reserved*/
      long              ioDestDirID;   /*destination parent directory ID*/
      long              filler3;       /*reserved*/
      long              filler4;       /*reserved*/
      long              ioSrcDirID;    /*source parent directory ID*/
      short             filler5;       /*reserved*/
      long              ioFileID;      /*file ID*/
};

typedef struct FIDParam FIDParam;
struct CSParam {
      ParamBlockHeader
      FSSpecPtr         ioMatchPtr;       /*pointer to array of matches*/
      long              ioReqMatchCount;  /*max number of matches to return*/
      long              ioActMatchCount;  /*actual number of matches*/
      long              ioSearchBits;     /*enable bits for matching rules*/
      CInfoPBPtr        ioSearchInfo1;    /*pointer to values and lower */
                                          /* bounds*/
      CInfoPBPtr        ioSearchInfo2;    /*pointer to masks and upper */
                                          /* bounds*/
      long              ioSearchTime;     /*maximum time to search*/
      CatPositionRec    ioCatPosition;    /*current catalog position*/
      Ptr               ioOptBuffer;      /*pointer to optional read buffer*/
      long              ioOptBufSize;     /*length of optional read buffer*/
};

typedef struct CSParam CSParam;
struct ForeignPrivParam {
      ParamBlockHeader
      long     filler1;                /*reserved*/
      long     filler2;                /*reserved*/
      Ptr      ioForeignPrivBuffer;    /*privileges data buffer*/
      long     ioForeignPrivReqCount;  /*size of buffer*/
      long     ioForeignPrivActCount;  /*amount of buffer used*/
      long     filler3;                /*reserved*/
      long     ioForeignPrivDirID;     /*parent directory ID of foreign */
                                       /* file or directory*/
      long     ioForeignPrivInfo1;     /*privileges data*/
      long     ioForeignPrivInfo2;     /*privileges data*/
      long     ioForeignPrivInfo3;     /*privileges data*/
      long     ioForeignPrivInfo4;     /*privileges data*/
};

typedef struct ForeignPrivParam ForeignPrivParam;
typedef ForeignPrivParam *ForeignPrivParamPtr;
</PRE>
<A NAME=HEADING301-382></A>
<H4>Catalog Information Parameter Blocks</H4>
<PRE>
enum {hFileInfo, dirInfo};
typedef unsigned char CInfoType;
union CInfoPBRec {                  /*catalog information parameter block*/
      HFileInfo   hFileInfo;
      DirInfo     dirInfo;
};

typedef union CInfoPBRec CInfoPBRec;
typedef CInfoPBRec *CInfoPBPtr;
struct HFileInfo {
      ParamBlockHeader
      short             ioFRefNum;     /*file reference number*/
      char              ioFVersNum;    /*version number*/
      char              filler1;       /*reserved*/
      short             ioFDirIndex;   /*file index*/
      char              ioFlAttrib;    /*file attributes*/
      char              ioACUser;      /*directory access rights*/
      FInfo             ioFlFndrInfo;  /*information used by the Finder*/
      long              ioDirID;       /*directory ID or file ID*/
      unsigned short    ioFlStBlk;     /*first alloc. blk. of data fork*/
      long              ioFlLgLen;     /*logical EOF of data fork*/
      long              ioFlPyLen;     /*physical EOF of data fork*/
      unsigned short    ioFlRStBlk;    /*first alloc. blk. of resource fork*/
      long              ioFlRLgLen;    /*logical EOF of resource fork*/
      long              ioFlRPyLen;    /*physical EOF of resource fork*/
      unsigned long     ioFlCrDat;     /*date and time of creation*/
      unsigned long     ioFlMdDat;     /*date and time of last modification*/
      unsigned long     ioFlBkDat;     /*date and time of last backup*/
      FXInfo            ioFlXFndrInfo; /*additional Finder information*/
      long              ioFlParID;     /*file parent directory ID (integer)*/
      long              ioFlClpSiz;    /*file's clump size*/
};

typedef struct HFileInfo HFileInfo;
struct DirInfo {
      ParamBlockHeader
      short             ioFRefNum;     /*file reference number*/
      short             filler1;       /*reserved*/
      short             ioFDirIndex;   /*directory index*/
      char              ioFlAttrib;    /*directory attributes*/
      char              filler2;       /*reserved*/
      DInfo             ioDrUsrWds;    /*information used by the Finder*/
      long              ioDrDirID;     /*directory ID*/
      unsigned short    ioDrNmFls;     /*number of files in directory*/
      short             filler3[9];    /*reserved*/
      unsigned long     ioDrCrDat;     /*date and time of creation*/
      unsigned long     ioDrMdDat;     /*date and time of last modification*/
      unsigned long     ioDrBkDat;     /*date and time of last backup*/
      DXInfo            ioDrFndrInfo;  /*additional Finder information*/
      long              ioDrParID;     /*directory's parent directory ID*/
};

typedef struct DirInfo DirInfo;
</PRE>
<A NAME=HEADING301-387></A>
<H4>Catalog Position Record</H4>
<PRE>
struct CatPositionRec {                /*catalog position record*/
      long     initialize;             /*starting point*/
      short    priv[6];                /*private data*/
};

typedef struct CatPositionRec CatPositionRec;
</PRE>
<A NAME=HEADING301-389></A>
<H4>Catalog Move Parameter Block</H4>
<PRE>
struct CMovePBRec {                    /*catalog move parameter block*/
      QElemPtr          qLink;         /*next queue entry*/
      short             qType;         /*queue type*/
      short             ioTrap;        /*routine trap*/
      Ptr               ioCmdAddr;     /*routine address*/
      ProcPtr           ioCompletion;  /*completion routine*/
      OSErr             ioResult;      /*result code*/
      StringPtr         ioNamePtr;     /*pointer to pathname*/
      short             ioVRefNum;     /*volume specification*/
      long              filler1;       /*reserved*/
      StringPtr         ioNewName;     /*name of new directory*/
      long              filler2;       /*reserved*/
      long              ioNewDirID;    /*directory ID of new directory*/
      long              filler3[2];    /*reserved*/
      long              ioDirID;       /*directory ID of current directory*/
};

typedef struct CMovePBRec CMovePBRec;
typedef CMovePBRec *CMovePBPtr;
</PRE>
<A NAME=HEADING301-391></A>
<H4>Working Directory Parameter Block</H4>
<PRE>
struct WDPBRec {                       /*working directory parameter block*/
      QElemPtr          qLink;         /*next queue entry*/
      short             qType;         /*queue type*/
      short             ioTrap;        /*routine trap*/
      Ptr               ioCmdAddr;     /*routine address*/
      ProcPtr           ioCompletion;  /*completion routine*/
      OSErr             ioResult;      /*result code*/
      StringPtr         ioNamePtr;     /*pointer to pathname*/
      short             ioVRefNum;     /*volume specification*/
      short             filler1;       /*reserved*/
      short             ioWDIndex;     /*working directory index*/
      long              ioWDProcID;    /*working directory user identifier*/
      short             ioWDVRefNum;   /*working directory's vol. ref. num.*/
      short             filler2[7];    /*reserved*/
      long              ioWDDirID;     /*working directory's directory ID*/
};

typedef struct WDPBRec WDPBRec;
typedef WDPBRec *WDPBPtr;
</PRE>
<A NAME=HEADING301-393></A>
<H4>File Control Block Parameter Block</H4>
<PRE>
struct FCBPBRec {                      /*file control block parameter block*/
      QElemPtr          qLink;         /*next queue entry*/
      short             qType;         /*queue type*/
      short             ioTrap;        /*routine trap*/
      Ptr               ioCmdAddr;     /*routine address*/
      ProcPtr           ioCompletion;  /*completion routine*/
      OSErr             ioResult;      /*result code*/
      StringPtr         ioNamePtr;     /*pointer to pathname*/
      short             ioVRefNum;     /*volume specification*/
      short             ioRefNum;      /*file reference number*/
      short             filler;        /*reserved*/
      short             ioFCBIndx;     /*FCB index*/
      short             filler1;       /*reserved*/
      long              ioFCBFlNm;     /*file ID*/
      short             ioFCBFlags;    /*flags*/
      unsigned short    ioFCBStBlk;    /*first allocation block of file*/
      long              ioFCBEOF;      /*logical end-of-file*/
      long              ioFCBPLen;     /*physical end-of-file*/
      long              ioFCBCrPs;     /*position of the file mark*/
      short             ioFCBVRefNum;  /*volume reference number*/
      long              ioFCBClpSiz;   /*file's clump size*/
      long              ioFCBParID;    /*parent directory ID*/
};
typedef struct FCBPBRec FCBPBRec;
typedef FCBPBRec *FCBPBPtr;
</PRE>
<A NAME=HEADING301-395></A>
<H4>Volume Attributes Buffer</H4>
<PRE>
struct GetVolParmsInfoBuffer {
      short             vMVersion;        /*version number*/
      long              vMAttrib;         /*volume attributes*/
      Handle            vMLocalHand;      /*reserved*/
      long              vMServerAdr;      /*network server address*/
      long              vMVolumeGrade;    /*relative speed rating*/
      short             vMForeignPrivID;  /*foreign privilege model*/
};

typedef struct GetVolParmsInfoBuffer GetVolParmsInfoBuffer;
</PRE>
<A NAME=HEADING301-397></A>
<H4>Volume Mounting Information Records</H4>
<PRE>
struct VolMountInfoHeader{             /*volume mounting information*/
      short             length;        /*length of mounting information*/
      VolumeType        media;         /*type of volume*/
};

typedef struct VolMountInfoHeader VolMountInfoHeader;
typedef VolMountInfoHeader *VolMountInfoPtr;
struct AFPVolMountInfo{                /*AFP volume mounting information*/
      short       length;              /*length of mounting information*/
      VolumeType  media;               /*type of volume*/
      short       flags;               /*reserved; must be set to 0*/
      char        nbpInterval;         /*NBP retry interval*/
      char        nbpCount;            /*NBP retry count*/
      short       uamType;             /*user authentication method*/
      short       zoneNameOffset;      /*offset to zone name*/
      short       serverNameOffset;    /*offset server name*/
      short       volNameOffset;       /*offset to volume name*/
      short       userNameOffset;      /*offset to user name*/
      short       userPasswordOffset;  /*offset to user password*/
      short       volPasswordOffset;   /*offset to volume password*/
      char        AFPData[144];        /*standard AFP mounting info*/
};

typedef struct AFPVolMountInfo AFPVolMountInfo;
typedef AFPVolMountInfo *AFPVolMountInfoPtr;
</PRE>
<A NAME=HEADING301-400></A>
<H3>Internal Data Types</H3>
<A NAME=HEADING301-401></A>
<H4>Volume and File Control Blocks</H4>
<PRE>
struct VCB  {                          /*volume control block*/
      QElemPtr          qLink;         /*next queue entry*/
      short             qType;         /*queue type*/
      short             vcbFlags;      /*volume flags (bit 15 = 1 if dirty)*/
      unsigned short    vcbSigWord;    /*volume signature*/
      unsigned long     vcbCrDate;     /*date and time of volume creation*/
      unsigned long     vcbLsMod;      /*date and time of last modification*/
      short             vcbAtrb;       /*volume attributes*/
      unsigned short    vcbNmFls;      /*number of files in root directory*/
      short             vcbVBMSt;      /*first block of volume bitmap*/
      short             vcbAllocPtr;   /*start of next allocation search*/
      unsigned short    vcbNmAlBlks;   /*number of allocation blocks in */
                                       /* volume*/
      long              vcbAlBlkSiz;   /*size (in bytes) of allocation */
                                       /* blocks*/
      long              vcbClpSiz;     /*default clump size*/
      short             vcbAlBlSt;     /*first allocation block in volume*/
      long              vcbNxtCNID;    /*next unused catalog node ID*/
      unsigned short    vcbFreeBks;    /*number of unused allocation blocks*/
      Str27             vcbVN;         /*volume name*/
      short             vcbDrvNum;     /*drive number*/
      short             vcbDRefNum;    /*driver reference number*/
      short             vcbFSID;       /*file-system identifier*/
      short             vcbVRefNum;    /*volume reference number*/
      Ptr               vcbMAdr;       /*used internally*/
      Ptr               vcbBufAdr;     /*used internally*/
      short             vcbMLen;       /*used internally*/
      short             vcbDirIndex;   /*used internally*/
      short             vcbDirBlk;     /*used internally*/
      unsigned long     vcbVolBkUp;    /*date and time of last backup*/
      unsigned short    vcbVSeqNum;    /*volume backup sequence number*/
      long              vcbWrCnt;      /*volume write count*/
      long              vcbXTClpSiz;   /*clump size for extents overflow */
                                       /* file*/
      long              vcbCTClpSiz;   /*clump size for catalog file*/
      unsigned short    vcbNmRtDirs;   /*number of directories in root dir.*/
      long              vcbFilCnt;     /*number of files in volume*/
      long              vcbDirCnt;     /*number of directories in volume*/
      long              vcbFndrInfo[8];/*information used by the Finder*/
      unsigned short    vcbVCSize;     /*used internally*/
      unsigned short    vcbVBMCSiz;    /*used internally*/
      unsigned short    vcbCtlCSiz;    /*used internally*/
      unsigned short    vcbXTAlBlks;   /*size of extents overflow file*/
      unsigned short    vcbCTAlBlks;   /*size of catalog file*/
      short             vcbXTRef;      /*ref. num. for extents overflow */
                                       /* file*/
      short             vcbCTRef;      /*ref. num. for catalog file*/
      Ptr               vcbCtlBuf;     /*ptr. to extents and catalog caches*/
      long              vcbDirIDM;     /*directory last searched*/
      short             vcbOffsM;      /*offspring index at last search*/
};

typedef struct VCB VCB; 
struct FCB {                        /*file control block*/
      long           fcbFlNum;      /*file ID*/
      short          fcbFlags;      /*file flags*/
      short          fcbSBlk;       /*first allocation block of file*/
      long           fcbEOF;        /*logical end-of-file*/
      long           fcbPLen;       /*physical end-of-file*/
      long           fcbCrPs;       /*current file mark position*/
      Ptr            fcbVPtr;       /*pointer to volume control block*/
      Ptr            fcbBfAdr;      /*pointer to access path buffer*/
      short          fcbFlPos;      /*unused*/
      long           fcbClmpSize;   /*file clump size*/
      Ptr            fcbBTCBPtr;    /*pointer to B*-tree control block*/
      ExtDataRec     fcbExtRec;     /*first three file extents*/
      long           fcbFType;      /*file's four Finder type bytes*/
      long           fcbCatPos;     /*catalog hint for use on Close*/
      long           fcbDirID;      /*file's parent directory ID*/
      Str31          fcbCName;      /*name of file*/
};

typedef struct FCB FCB;
</PRE>
<A NAME=HEADING301-404></A>
<H4>Drive Queue Elements</H4>
<PRE>
struct DrvQEl  {                    /*drive queue element*/
      QElemPtr       qLink;         /*next queue entry*/
      short          qType;         /*flag for dQDrvSz and dQDrvSz2*/
      short          dQDrive;       /*drive number*/
      short          dQRefNum;      /*driver reference number*/
      short          dQFSID;        /*file-system identifier*/
      unsigned short dQDrvSz;       /*number of logical blocks on drive*/
      unsigned short dQDrvSz2;      /*additional field for large drives*/
};

typedef struct DrvQEl DrvQEl;
</PRE>
<A NAME=HEADING301-406></A>
<H3>High-Level File Access Routines</H3>
<A NAME=HEADING301-407></A>
<H4>Reading, Writing, and Closing Files</H4>
<PRE>
pascal OSErr FSRead	(short refNum, long *count, Ptr buffPtr);
pascal OSErr FSWrite	(short refNum, long *count, Ptr buffPtr);
pascal OSErr FSClose	(short refNum);
</PRE>
<A NAME=HEADING301-411></A>
<H4>Manipulating the File Mark</H4>
<PRE>
pascal OSErr GetFPos	(short refNum, long *filePos);
pascal OSErr SetFPos	(short refNum, short posMode, long posOff);
</PRE>
<A NAME=HEADING301-414></A>
<H4>Manipulating the End-of-File</H4>
<PRE>
pascal OSErr GetEOF	(short refNum, long *logEOF);
pascal OSErr SetEOF	(short refNum, long logEOF);
</PRE>
<A NAME=HEADING301-417></A>
<H4>Allocating File Blocks</H4>
<PRE>
pascal OSErr Allocate	(short refNum, long *count);
pascal OSErr AllocContig(short refNum, long *count);
</PRE>
<A NAME=HEADING301-420></A>
<H3>Low-Level File Access Routines</H3>
<A NAME=HEADING301-421></A>
<H4>Reading, Writing, and Closing Files</H4>
<PRE>
pascal OSErr PBRead		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBReadSync		(ParmBlkPtr paramBlock);
pascal OSErr PBReadAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBWrite		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBWriteSync	(ParmBlkPtr paramBlock);
pascal OSErr PBWriteAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBClose		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBCloseSync	(ParmBlkPtr paramBlock);
pascal OSErr PBCloseAsync	(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-431></A>
<H4>Manipulating the File Mark</H4>
<PRE>
pascal OSErr PBGetFPos		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBGetFPosSync	(ParmBlkPtr paramBlock);
pascal OSErr PBGetFPosAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBSetFPos		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBSetFPosSync	(ParmBlkPtr paramBlock);
pascal OSErr PBSetFPosAsync	(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-438></A>
<H4>Manipulating the End-of-File</H4>
<PRE>
pascal OSErr PBGetEOF		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBGetEOFSync	(ParmBlkPtr paramBlock);
pascal OSErr PBGetEOFAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBSetEOF 		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBSetEOFSync 	(ParmBlkPtr paramBlock);
pascal OSErr PBSetEOFAsync	(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-445></A>
<H4>Allocating File Blocks</H4>
<PRE>
pascal OSErr PBAllocate 	(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBAllocateSync	(ParmBlkPtr paramBlock);
pascal OSErr PBAllocateAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBAllocContig	(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBAllocContigSync
   				(ParmBlkPtr paramBlock);
pascal OSErr PBAllocContigAsync
   				(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-454></A>
<H4>Updating Files</H4>
<PRE>
pascal OSErr PBFlushFile	(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBFlushFileSync	(ParmBlkPtr paramBlock);
pascal OSErr PBFlushFileAsync
   				(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-459></A>
<H3>High-Level Volume Access Routines</H3>
<A NAME=HEADING301-460></A>
<H4>Unmounting Volumes</H4>
<PRE>
pascal OSErr UnmountVol		(StringPtr volName, short vRefNum);
pascal OSErr Eject 				(StringPtr volName, short vRefNum);
</PRE>
<A NAME=HEADING301-463></A>
<H4>Updating Volumes</H4>
<PRE>
pascal OSErr FlushVol 		(StringPtr volName, short vRefNum);
</PRE>
<A NAME=HEADING301-465></A>
<H4>Manipulating the Default Volume</H4>
<PRE>
pascal OSErr GetVol 		(StringPtr volName, short *vRefNum);
pascal OSErr SetVol		(StringPtr volName, short vRefNum);
pascal OSErr HGetVol		(StringPtr volName, short *vRefNum, 
				long *dirID);
pascal OSErr HSetVol		(StringPtr volName, short vRefNum, long dirID);
</PRE>
<A NAME=HEADING301-470></A>
<H4>Obtaining Volume Information</H4>
<PRE>
pascal OSErr GetVInfo		(short drvNum, StringPtr volName,
				short *vRefNum, long *freeBytes);
pascal OSErr GetVRefNum		(short refNum, short *vRefNum);
</PRE>
<A NAME=HEADING301-473></A>
<H3>Low-Level Volume Access Routines</H3>
<A NAME=HEADING301-474></A>
<H4>Mounting and Unmounting Volumes</H4>
<PRE>
pascal OSErr PBMountVol		(ParmBlkPtr paramBlock);
pascal OSErr PBUnmountVol	(ParmBlkPtr paramBlock);
pascal OSErr PBEject		(ParmBlkPtr paramBlock);
pascal OSErr PBOffLine		(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-479></A>
<H4>Updating Volumes</H4>
<PRE>
pascal OSErr PBFlushVol		(ParmBlkPtr paramBlock; Boolean async);
pascal OSErr PBFlushVolSync	(ParmBlkPtr paramBlock);
pascal OSErr PBFlushVolAsync	(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-483></A>
<H4>Obtaining Volume Information</H4>
<PRE>
pascal OSErr PBHGetVInfo	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHGetVInfoSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHGetVInfoAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBSetVInfo		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBSetVInfoSync	(HParmBlkPtr paramBlock);
pascal OSErr PBSetVInfoAsync	(HParmBlkPtr paramBlock);
pascal OSErr PBHGetVolParms	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHGetVolParmsSync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHGetVolParmsAsync
   				(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-496></A>
<H4>Manipulating the Default Volume</H4>
<PRE>
pascal OSErr PBGetVol		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBGetVolSync	(ParmBlkPtr paramBlock);
pascal OSErr PBGetVolAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBSetVol		(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBSetVolSync	(ParmBlkPtr paramBlock);
pascal OSErr PBSetVolAsync	(ParmBlkPtr paramBlock);
pascal OSErr PBHGetVol		(WDPBPtr paramBlock, Boolean async);
pascal OSErr PBHGetVolSync	(WDPBPtr paramBlock);
pascal OSErr PBHGetVolAsync	(WDPBPtr paramBlock);
pascal OSErr PBHSetVol		(WDPBPtr paramBlock, Boolean async);
pascal OSErr PBHSetVolSync	(WDPBPtr paramBlock);
pascal OSErr PBHSetVolAsync	(WDPBPtr paramBlock);
</PRE>
<A NAME=HEADING301-509></A>
<H3>File System Specification Routines</H3>
<A NAME=HEADING301-510></A>
<H4>Opening Files</H4>
<PRE>
pascal OSErr FSpOpenDF		(const FSSpec *spec, char permission, 
				short *refNum);
pascal OSErr FSpOpenRF		(const FSSpec *spec, char permission, 
				short *refNum);
</PRE>
<A NAME=HEADING301-513></A>
<H4>Creating and Deleting Files and Directories</H4>
<PRE>
pascal OSErr FSpCreate		(const FSSpec *spec, OSType creator, 
				OSType fileType, ScriptCode scriptTag);
pascal OSErr FSpDirCreate	(const FSSpec *spec, ScriptCode scriptTag, 
				long *createdDirID);
pascal OSErr FSpDelete		(const FSSpec *spec);
</PRE>
<A NAME=HEADING301-517></A>
<H4>Accessing Information About Files and Directories</H4>
<PRE>
pascal OSErr FSpGetFInfo	(const FSSpec *spec, FInfo *fndrInfo);
pascal OSErr FSpSetFInfo	(const FSSpec *spec, const FInfo *fndrInfo);
pascal OSErr FSpSetFLock	(const FSSpec *spec);
pascal OSErr FSpRstFLock	(const FSSpec *spec);
pascal OSErr FSpRename		(const FSSpec *spec, ConstStr255Param newName);
</PRE>
<A NAME=HEADING301-523></A>
<H4>Moving Files or Directories</H4>
<PRE>
pascal OSErr FSpCatMove		(const FSSpec *source, const FSSpec *dest);
</PRE>
<A NAME=HEADING301-525></A>
<H4>Exchanging the Data in Two Files</H4>
<PRE>
pascal OSErr FSpExchangeFiles
   				(const FSSpec *source, const FSSpec *dest);
</PRE>
<A NAME=HEADING301-528></A>
<H4>Creating File System Specifications</H4>
<PRE>
pascal OSErr FSMakeFSSpec	(short vRefNum, long dirID, 
				ConstStr255Param fileName, FSSpecPtr spec);
pascal OSErr PBMakeFSSpec	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBMakeFSSpecSync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBMakeFSSpecAsync
   				(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-535></A>
<H3>High-Level HFS Routines</H3>
<A NAME=HEADING301-536></A>
<H4>Opening Files</H4>
<PRE>
pascal OSErr HOpenDF 	(short vRefNum, long dirID, 
			const Str255 fileName, char permission, 
 			short *refNum);
pascal OSErr HOpenRF 	(short vRefNum, long dirID, 
 			const Str255 fileName, char permission, 
 			short *refNum);
pascal OSErr HOpen 	(short vRefNum, long dirID, 
 			const Str255 fileName, char permission, 
			short *refNum);
</PRE>
<A NAME=HEADING301-540></A>
<H4>Creating and Deleting Files and Directories</H4>
<PRE>
pascal OSErr HCreate 	(short vRefNum, long dirID, 
 			const Str255 fileName, OSType creator, 
			OSType fileType);
pascal OSErr DirCreate 	(short vRefNum, long parentDirID, 
 			const Str255 directoryName, 
 			long *createdDirID);
pascal OSErr HDelete 	(short vRefNum, long dirID, 
 			const Str255 fileName);
</PRE>
<A NAME=HEADING301-544></A>
<H4>Accessing Information About Files and Directories</H4>
<PRE>
pascal OSErr HGetFInfo 	(short vRefNum, long dirID, 
 			const Str255 fileName, FInfo *fndrInfo);
pascal OSErr HSetFInfo 	(short vRefNum, long dirID, 
 			const Str255 fileName, const FInfo *fndrInfo);
pascal OSErr HSetFLock 	(short vRefNum, long dirID, 
 			const Str255 fileName);
pascal OSErr HRstFLock 	(short vRefNum, long dirID, 
 			const Str255 fileName);
pascal OSErr HRename 	(short vRefNum, long dirID, 
 			const Str255 oldName, const Str255 newName);
</PRE>
<A NAME=HEADING301-550></A>
<H4>Moving Files or Directories</H4>
<PRE>
pascal OSErr CatMove 	(short vRefNum, long dirID, 
 			const Str255 oldName, long newDirID, 
 			const Str255 newName);
</PRE>
<A NAME=HEADING301-552></A>
<H4>Maintaining Working Directories</H4>
<PRE>
pascal OSErr OpenWD	(short vRefNum, long dirID, long procID, 
			short *wdRefNum);
pascal OSErr CloseWD	(short wdRefNum);
pascal OSErr GetWDInfo	(short wdRefNum, short *vRefNum, long *dirID, 
			long *procID);
</PRE>
<A NAME=HEADING301-556></A>
<H3>Low-Level HFS Routines</H3>
<A NAME=HEADING301-557></A>
<H4>Opening Files</H4>
<PRE>
pascal OSErr PBHOpenDF		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHOpenDFSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenDFAsync	(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenRF		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHOpenRFSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenRFAsync	(HParmBlkPtr paramBlock);
pascal OSErr PBHOpen		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHOpenSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenAsync	(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-567></A>
<H4>Creating and Deleting Files and Directories</H4>
<PRE>
pascal OSErr PBHCreate		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHCreateSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHCreateAsync	(HParmBlkPtr paramBlock);
pascal OSErr PBDirCreate	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBDirCreateSync	(HParmBlkPtr paramBlock);
pascal OSErr PBDirCreateAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHDelete		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHDeleteSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHDeleteAsync	(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-578></A>
<H4>Accessing Information About Files and Directories</H4>
<PRE>
pascal OSErr PBGetCatInfo	(CInfoPBPtr paramBlock, Boolean async);
pascal OSErr PBGetCatInfoSync
   				(CInfoPBPtr paramBlock, Boolean async);
pascal OSErr PBGetCatInfoAsync
   				(CInfoPBPtr paramBlock);
pascal OSErr PBSetCatInfo	(CInfoPBPtr paramBlock, Boolean async);
pascal OSErr PBSetCatInfoSync
   				(CInfoPBPtr paramBlock);
pascal OSErr PBSetCatInfoAsync
   				(CInfoPBPtr paramBlock);
pascal OSErr PBHGetFInfo	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHGetFInfoSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHGetFInfoAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHSetFInfo	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHSetFInfoSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHSetFInfoAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHSetFLock	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHSetFLockSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHSetFLockAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHRstFLock	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHRstFLockSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHRstFLockAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHRename		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHRenameSync	(HParmBlkPtr paramBlock);
pascal OSErr PBHRenameAsync	(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-608></A>
<H4>Moving Files or Directories</H4>
<PRE>
pascal OSErr PBCatMove		(CMovePBPtr paramBlock, Boolean async);
pascal OSErr PBCatMoveSync	(CMovePBPtr paramBlock);
pascal OSErr PBCatMoveAsync	(CMovePBPtr paramBlock);
</PRE>
<A NAME=HEADING301-612></A>
<H4>Maintaining Working Directories</H4>
<PRE>
pascal OSErr PBOpenWD		(WDPBPtr paramBlock, Boolean async);
pascal OSErr PBOpenWDSync	(WDPBPtr paramBlock);
pascal OSErr PBOpenWDAsync	(WDPBPtr paramBlock);
pascal OSErr PBCloseWD		(WDPBPtr paramBlock, Boolean async);
pascal OSErr PBCloseWDSync	(WDPBPtr paramBlock);
pascal OSErr PBCloseWDAsync	(WDPBPtr paramBlock);
pascal OSErr PBGetWDInfo	(WDPBPtr paramBlock, Boolean async);
pascal OSErr PBGetWDInfoSync	(WDPBPtr paramBlock);
pascal OSErr PBGetWDInfoAsync
   				(WDPBPtr paramBlock);
</PRE>
<A NAME=HEADING301-623></A>
<H4>Searching a Catalog</H4>
<PRE>
pascal OSErr PBCatSearch	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBCatSearchSync	(HParmBlkPtr paramBlock);
pascal OSErr PBCatSearchAsync
   				(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-628></A>
<H4>Exchanging the Data in Two Files</H4>
<PRE>
pascal OSErr PBExchangeFiles	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBExchangeFilesSync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBExchangeFilesAsync
   				(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-634></A>
<H3>Shared Environment Routines</H3>
<A NAME=HEADING301-635></A>
<H4>Opening Files While Denying Access</H4>
<PRE>
pascal OSErr PBHOpenDeny	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHOpenDenySync	(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenDenyAsync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenRFDeny	(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHOpenRFDenySync
   				(HParmBlkPtr paramBlock);
pascal OSErr PBHOpenRFDenyAsync
   				(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-645></A>
<H4>Locking and Unlocking File Ranges</H4>
<PRE>
pascal OSErr PBLockRange	(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBLockRangeSync	(ParmBlkPtr paramBlock);
pascal OSErr PBLockRangeAsync
   				(ParmBlkPtr paramBlock);
pascal OSErr PBUnlockRange	(ParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBUnlockRangeSync
   				(ParmBlkPtr paramBlock);
pascal OSErr PBUnlockRangeAsync
   				(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-655></A>
<H4>Manipulating Share Points</H4>
<PRE>
pascal OSErr PBShare			(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBShareSync		(HParmBlkPtr paramBlock);
pascal OSErr PBShareAsync		(HParmBlkPtr paramBlock);
pascal OSErr PBUnshare			(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBUnshareSync		(HParmBlkPtr paramBlock);
pascal OSErr PBUnshareAsync		(HParmBlkPtr paramBlock);
pascal OSErr PBGetUGEntry		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBGetUGEntrySync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBGetUGEntryAsync
   					(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-667></A>
<H4>Controlling Directory Access</H4>
<PRE>
pascal OSErr PBHGetDirAccess		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHGetDirAccessSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHGetDirAccessAsync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHSetDirAccess		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHSetDirAccessSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHSetDirAccessAsync
   					(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-678></A>
<H4>Mounting Volumes</H4>
<PRE>
pascal OSErr PBGetVolMountInfoSize
   					(ParmBlkPtr paramBlock);
pascal OSErr PBGetVolMountInfo
   					(ParmBlkPtr paramBlock);
pascal OSErr PBVolumeMount		(ParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-684></A>
<H4>Controlling Login Access</H4>
<PRE>
pascal OSErr PBHGetLogInInfo		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHGetLogInInfoSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHGetLogInInfoAsync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHMapID			(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHMapIDSync		(HParmBlkPtr paramBlock);
pascal OSErr PBHMapIDAsync		(HParmBlkPtr paramBlock);
pascal OSErr PBHMapName			(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHMapNameSync		(HParmBlkPtr paramBlock);
pascal OSErr PBHMapNameAsync		(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-696></A>
<H4>Copying and Moving Files</H4>
<PRE>
pascal OSErr PBHCopyFile		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHCopyFileSync		(HParmBlkPtr paramBlock);
pascal OSErr PBHCopyFileAsync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHMoveRename		(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBHMoveRenameSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBHMoveRenameAsync
   					(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-706></A>
<H3>File ID Routines</H3>
<A NAME=HEADING301-707></A>
<H4>Resolving File ID References</H4>
<PRE>
pascal OSErr PBResolveFileIDRef
   					(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBResolveFileIDRefSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBResolveFileIDRefAsync
   					(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-714></A>
<H4>Creating and Deleting File ID References</H4>
<PRE>
pascal OSErr PBCreateFileIDRef
   					(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBCreateFileIDRefSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBCreateFileIDRefAsync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBDeleteFileIDRef
   					(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBDeleteFileIDRefSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBDeleteFileIDRefAsync
   					(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-727></A>
<H3>Foreign File System Routines</H3>
<A NAME=HEADING301-728></A>
<H4>Accessing Privilege Information in Foreign File Systems</H4>
<PRE>
pascal OSErr PBGetForeignPrivs
   					(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBGetForeignPrivsSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBGetForeignPrivsAsync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBSetForeignPrivs
   					(HParmBlkPtr paramBlock, Boolean async);
pascal OSErr PBSetForeignPrivsSync
   					(HParmBlkPtr paramBlock);
pascal OSErr PBSetForeignPrivsAsync
   					(HParmBlkPtr paramBlock);
</PRE>
<A NAME=HEADING301-741></A>
<H3>Utility Routines</H3>
<A NAME=HEADING301-742></A>
<H4>Obtaining Queue Headers</H4>
<PRE>
#define GetFSQHdr()		(QHdrPtr);
#define GetVCBQHdr()		(QHdrPtr);
#define GetDrvQHdr()		(QHdrPtr);
</PRE>
<A NAME=HEADING301-746></A>
<H4>Adding a Drive</H4>
<PRE>
pascal void AddDrive	(short drvrRefNum, short drvNum, DrvQElPtr qEl);
</PRE>
<A NAME=HEADING301-748></A>
<H4>Obtaining File Control Block Information</H4>
<PRE>
pascal OSErr PBGetFCBInfo		(FCBPBPtr paramBlock, Boolean async);
pascal OSErr PBGetFCBInfoSync
   					(FCBPBPtr paramBlock);
pascal OSErr PBGetFCBInfoAsync
   					(FCBPBPtr paramBlock);
</PRE>
<A NAME=HEADING301-754></A>
<H3>Application-Defined Routine</H3>
<A NAME=HEADING301-755></A>
<H4>Completion Routines</H4>
<PRE>
pascal void MyCompletionProc(void);
</PRE>
<A NAME=HEADING301-757></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING301-758></A>
<H3>Constants</H3>
<PRE>
;flags in trap words
hfsBit            EQU      9        ;set for an HFS call
asyncTrpBit       EQU      10       ;set for an asynchronous call
;masks for flags in trap words
newHFS            EQU      $200     ;make an HFS call
ASYNC             EQU      $400     ;make an asynchronous call
</PRE>
<A NAME=HEADING301-761></A>
<H3>Data Structures</H3>
<A NAME=HEADING301-762></A>
<H4>File System Specification Record
<TABLE BORDER="0" CELLPADDING=3><TD>0<CODE></CODE><TD>vRefNum<TD>word<TD>volume reference number<TR>
<TD>2<CODE></CODE><TD>parID<TD>long<TD>parent directory ID<TR>
<TD>6<CODE></CODE><TD>name<TD>64 bytes<TD>filename or directory name</TABLE>
</H4>
<A NAME=HEADING301-763></A>
<H4>HFS Parameter Block Common Fields
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>qLink</CODE><TD>long<TD>next queue entry<TR>
<TD>4<TD><CODE>qType</CODE><TD>word<TD>queue type<TR>
<TD>6<TD><CODE>ioTrap</CODE><TD>word<TD>routine trap<TR>
<TD>8<TD><CODE>ioCmdAddr</CODE><TD>long<TD>routine address<TR>
<TD>12<TD><CODE>ioCompletion</CODE><TD>long<TD>address of completion routine<TR>
<TD>16<TD><CODE>ioResult</CODE><TD>word<TD>result code<TR>
<TD>18<TD><CODE>ioNamePtr</CODE><TD>long<TD>pointer to pathname<TR>
<TD>22<TD><CODE>ioVRefNum</CODE><TD>word<TD>volume specification</TABLE>
</H4>
<A NAME=HEADING301-764></A>
<H4>I/O Parameter Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>ioRefNum</CODE><TD>word<TD>file reference number<TR>
<TD>26<TD><CODE>ioVersNum</CODE><TD>byte<TD>version number<TR>
<TD>27<TD><CODE>ioPermssn</CODE><TD>byte<TD>read/write permission<TR>
<TD>28<TD><CODE>ioMisc</CODE><TD>long<TD>miscellaneous<TR>
<TD>32<TD><CODE>ioBuffer</CODE><TD>long<TD>data buffer<TR>
<TD>36<TD><CODE>ioReqCount</CODE><TD>long<TD>requested number of bytes<TR>
<TD>40<TD><CODE>ioActCount</CODE><TD>long<TD>actual number of bytes<TR>
<TD>44<TD><CODE>ioPosMode</CODE><TD>word<TD>positioning mode and newline character<TR>
<TD>46<TD><CODE>ioPosOffset</CODE><TD>long<TD>positioning offset</TABLE>
</H4>
<A NAME=HEADING301-765></A>
<H4>File Parameter Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>ioFRefNum</CODE><TD>word<TD>file reference number<TR>
<TD>26<TD><CODE>ioFVersNum</CODE><TD>byte<TD>file version number (unused)<TR>
<TD>27<TD><CODE>filler1</CODE><TD>byte<TD>reserved<TR>
<TD>28<TD><CODE>ioFDirIndex</CODE><TD>word<TD>directory index<TR>
<TD>30<TD><CODE>ioFlAttrib</CODE><TD>byte<TD>file attributes<TR>
<TD>31<TD><CODE>ioFlVersNum</CODE><TD>byte<TD>file version number (unused)<TR>
<TD>32<TD><CODE>ioFlFndrInfo</CODE><TD>16 bytes<TD>information used by the Finder<TR>
<TD>48<TD><CODE>ioDirID</CODE><TD>long<TD>directory ID or file ID<TR>
<TD>52<TD><CODE>ioFlStBlk</CODE><TD>word<TD>first allocation block of data fork<TR>
<TD>54<TD><CODE>ioFlLgLen</CODE><TD>long<TD>logical end-of-file of data fork<TR>
<TD>58<TD><CODE>ioFlPyLen</CODE><TD>long<TD>physical end-of-file of data fork<TR>
<TD>62<TD><CODE>ioFlRStBlk</CODE><TD>word<TD>first allocation block of resource fork<TR>
<TD>64<TD><CODE>ioFlRLgLen</CODE><TD>long<TD>logical end-of-file of resource fork<TR>
<TD>68<TD><CODE>ioFlRPyLen</CODE><TD>long<TD>physical end-of-file of resource fork<TR>
<TD>72<TD><CODE>ioFlCrDat</CODE><TD>long<TD>date and time of creation<TR>
<TD>76<TD><CODE>ioFlMdDat</CODE><TD>long<TD>date and time of last modification</TABLE>
</H4>
<A NAME=HEADING301-766></A>
<H4>Volume Parameter Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler2</CODE><TD>long<TD>reserved<TR>
<TD>28<TD><CODE>ioVolIndex</CODE><TD>word<TD>volume index<TR>
<TD>30<TD><CODE>ioVCrDate</CODE><TD>long<TD>date and time of initialization<TR>
<TD>34<TD><CODE>ioVLsMod</CODE><TD>long<TD>date and time of last modification<TR>
<TD>38<TD><CODE>ioVAtrb</CODE><TD>word<TD>volume attributes<TR>
<TD>40<TD><CODE>ioVNmFls</CODE><TD>word<TD>number of files in root directory<TR>
<TD>42<TD><CODE>ioVBitMap</CODE><TD>word<TD>first block of volume bitmap<TR>
<TD>44<TD><CODE>ioAllocPtr</CODE><TD>word<TD>first block of next new file<TR>
<TD>46<TD><CODE>ioVNmAlBlks</CODE><TD>word<TD>number of allocation blocks<TR>
<TD>48<TD><CODE>ioVAlBlkSiz</CODE><TD>long<TD>size of allocation blocks<TR>
<TD>50<TD><CODE>ioVClpSiz</CODE><TD>long<TD>default clump size<TR>
<TD>54<TD><CODE>ioAlBlSt</CODE><TD>word<TD>first block in volume map<TR>
<TD>56<TD><CODE>ioVNxtCNID</CODE><TD>long<TD>next unused node ID<TR>
<TD>60<TD><CODE>ioVFrBlk</CODE><TD>word<TD>number of unused allocation blocks<TR>
<TD>62<TD><CODE>ioVSigWord</CODE><TD>word<TD>volume signature<TR>
<TD>64<TD><CODE>ioVDrvInfo</CODE><TD>word<TD>drive number<TR>
<TD>66<TD><CODE>ioVDRefNum</CODE><TD>word<TD>driver reference number<TR>
<TD>68<TD><CODE>ioVFSID</CODE><TD>word<TD>file-system identifier<TR>
<TD>70<TD><CODE>ioVBkUp</CODE><TD>long<TD>date and time of last backup<TR>
<TD>74<TD><CODE>ioVSeqNum</CODE><TD>word<TD>used internally<TR>
<TD>76<TD><CODE>ioVWrCnt</CODE><TD>long<TD>volume write count<TR>
<TD>80<TD><CODE>ioVFilCnt</CODE><TD>long<TD>number of files on volume<TR>
<TD>84<TD><CODE>ioVDirCnt</CODE><TD>long<TD>number of directories on volume<TR>
<TD>88<TD><CODE>ioVFndrInfo</CODE><TD>32 bytes<TD>information used by the Finder</TABLE>
</H4>
<A NAME=HEADING301-767></A>
<H4>Access Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler3</CODE><TD>word<TD>reserved<TR>
<TD>26<TD><CODE>ioDenyModes</CODE><TD>word<TD>access mode information<TR>
<TD>28<TD><CODE>filler4</CODE><TD>word<TD>reserved<TR>
<TD>30<TD><CODE>filler5</CODE><TD>byte<TD>reserved<TR>
<TD>31<TD><CODE>ioACUser</CODE><TD>byte<TD>user access rights<TR>
<TD>32<TD><CODE>filler6</CODE><TD>long<TD>reserved<TR>
<TD>36<TD><CODE>ioACOwnerID</CODE><TD>long<TD>owner ID<TR>
<TD>40<TD><CODE>ioACGroupID</CODE><TD>long<TD>group ID<TR>
<TD>44<TD><CODE>ioACAccess</CODE><TD>long<TD>directory access rights</TABLE>
</H4>
<A NAME=HEADING301-768></A>
<H4>Object Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler7</CODE><TD>word<TD>reserved<TR>
<TD>26<TD><CODE>ioObjType</CODE><TD>word<TD>function code<TR>
<TD>28<TD><CODE>ioObjNamePtr</CODE><TD>long<TD>pointer to returned creator/group name<TR>
<TD>32<TD><CODE>ioObjID</CODE><TD>long<TD>creator/group ID</TABLE>
</H4>
<A NAME=HEADING301-769></A>
<H4>Copy Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>ioDstVRefNum</CODE><TD>word<TD>destination volume identifier<TR>
<TD>26<TD><CODE>filler8</CODE><TD>word<TD>reserved<TR>
<TD>28<TD><CODE>ioNewName</CODE><TD>long<TD>pointer to destination pathname<TR>
<TD>32<TD><CODE>ioCopyName</CODE><TD>long<TD>pointer to optional name<TR>
<TD>36<TD><CODE>ioNewDirID</CODE><TD>long<TD>directory ID of destination directory</TABLE>
</H4>
<A NAME=HEADING301-770></A>
<H4>Working Directory Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler9</CODE><TD>word<TD>reserved<TR>
<TD>26<TD><CODE>ioWDIndex</CODE><TD>word<TD>working directory's index<TR>
<TD>28<TD><CODE>ioWDProcID</CODE><TD>long<TD>working directory's user identifier<TR>
<TD>32<TD><CODE>ioWDVRefNum</CODE><TD>word<TD>working directory's volume reference number<TR>
<TD>34<TD><CODE>filler10</CODE><TD>word<TD>reserved<TR>
<TD>36<TD><CODE>filler11</CODE><TD>long<TD>reserved<TR>
<TD>40<TD><CODE>filler12</CODE><TD>long<TD>reserved<TR>
<TD>44<TD><CODE>filler13</CODE><TD>long<TD>reserved<TR>
<TD>48<TD><CODE>ioWDDirID</CODE><TD>long<TD>working directory's directory ID</TABLE>
</H4>
<A NAME=HEADING301-771></A>
<H4>File ID Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler14</CODE><TD>long<TD>reserved<TR>
<TD>28<TD><CODE>ioDestNamePtr</CODE><TD>long<TD>pointer to destination filename<TR>
<TD>32<TD><CODE>filler15</CODE><TD>long<TD>reserved<TR>
<TD>36<TD><CODE>ioDestDirID</CODE><TD>long<TD>destination parent directory ID<TR>
<TD>40<TD><CODE>filler16</CODE><TD>long<TD>reserved<TR>
<TD>44<TD><CODE>filler17</CODE><TD>long<TD>reserved<TR>
<TD>48<TD><CODE>ioSrcDirID</CODE><TD>long<TD>source parent directory ID<TR>
<TD>52<TD><CODE>filler18</CODE><TD>word<TD>reserved<TR>
<TD>54<TD><CODE>ioFileID</CODE><TD>long<TD>file ID</TABLE>
</H4>
<A NAME=HEADING301-772></A>
<H4>Catalog Search Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>ioMatchPtr</CODE><TD>long<TD>pointer to array of matches<TR>
<TD>28<TD><CODE>ioReqMatchCount</CODE><TD>long<TD>maximum match count<TR>
<TD>32<TD><CODE>ioActMatchCount</CODE><TD>long<TD>actual match count<TR>
<TD>36<TD><CODE>ioSearchBits</CODE><TD>long<TD>search criteria selector<TR>
<TD>40<TD><CODE>ioSearchInfo1</CODE><TD>long<TD>pointer to values and lower bounds<TR>
<TD>44<TD><CODE>ioSearchInfo2</CODE><TD>long<TD>pointer to masks and upper bounds<TR>
<TD>48<TD><CODE>ioSearchTime</CODE><TD>long<TD>time limit on search<TR>
<TD>52<TD><CODE>ioCatPosition</CODE><TD>16 bytes<TD>catalog position record<TR>
<TD>68<TD><CODE>ioOptBuffer</CODE><TD>long<TD>pointer to optional read buffer<TR>
<TD>72<TD><CODE>ioOptBufSize</CODE><TD>long<TD>length of optional read buffer</TABLE>
</H4>
<A NAME=HEADING301-773></A>
<H4>Foreign Privileges Variant
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler21</CODE><TD>long<TD>reserved<TR>
<TD>28<TD><CODE>filler22</CODE><TD>long<TD>reserved<TR>
<TD>32<TD><CODE>ioForeignPrivBuffer</CODE><TD>long<TD>pointer to privileges data buffer<TR>
<TD>36<TD><CODE>ioForeignPrivReqCount</CODE><TD>long<TD>size allocated for buffer<TR>
<TD>40<TD><CODE>ioForeignPrivActCount</CODE><TD>long<TD>amount of buffer used<TR>
<TD>44<TD><CODE>filler23</CODE><TD>long<TD>reserved<TR>
<TD>48<TD><CODE>ioForeignPrivDirID</CODE><TD>long<TD>parent directory ID of target<TR>
<TD>52<TD><CODE>ioForeignPrivInfo1</CODE><TD>long<TD>privileges data<TR>
<TD>56<TD><CODE>ioForeignPrivInfo2</CODE><TD>long<TD>privileges data<TR>
<TD>60<TD><CODE>ioForeignPrivInfo3</CODE><TD>long<TD>privileges data<TR>
<TD>64<TD><CODE>ioForeignPrivInfo4</CODE><TD>long<TD>privileges data</TABLE>
</H4>
<A NAME=HEADING301-774></A>
<H4>Catalog Information Parameter Block (Files Variant)
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD>ioFRefNum<TD>word<TD>file reference number<TR>
<TD>26<TD>ioFVersNum<TD>byte<TD>version number<TR>
<TD>27<TD>filler1<TD>byte<TD>reserved<TR>
<TD>28<TD><CODE>ioFDirIndex</CODE><TD>word<TD>directory index<TR>
<TD>30<TD><CODE>ioFlAttrib</CODE><TD>byte<TD>file attributes<TR>
<TD>31<TD><CODE>ioACUser</CODE><TD>byte<TD>directory access rights<TR>
<TD>32<TD><CODE>ioFlUsrWds</CODE><TD>16 bytes<TD>information used by the Finder<TR>
<TD>48<TD><CODE>ioFlNum</CODE><TD>long<TD>file ID<TR>
<TD>52<TD><CODE>ioFlStBlk</CODE><TD>word<TD>first allocation block of data fork<TR>
<TD>54<TD><CODE>ioFlLgLen</CODE><TD>long<TD>logical end-of-file of data fork<TR>
<TD>58<TD><CODE>ioFlPyLen</CODE><TD>long<TD>physical end-of-file of data fork<TR>
<TD>62<TD><CODE>ioFlRStBlk</CODE><TD>word<TD>first allocation block of resource fork<TR>
<TD>64<TD><CODE>ioFlRLgLen</CODE><TD>long<TD>logical end-of-file of resource fork<TR>
<TD>68<TD><CODE>ioFlRPyLen</CODE><TD>long<TD>physical end-of-file of resource fork<TR>
<TD>72<TD><CODE>ioFlCrDat</CODE> <TD>long<TD>date and time of creation<TR>
<TD>76<TD><CODE>ioFlMdDat</CODE><TD>long<TD>date and time of last modification<TR>
<TD>80<TD><CODE>ioFlBkDat</CODE><TD>long<TD>date and time of last backup<TR>
<TD>84<TD><CODE>ioFlXFndrInfo</CODE><TD>16 bytes<TD>additional information used by the Finder<TR>
<TD>100<TD><CODE>ioFlParID</CODE><TD>long<TD>file parent directory ID<TR>
<TD>104<TD><CODE>ioFlClpSiz</CODE><TD>long<TD>file's clump size</TABLE>
</H4>
<A NAME=HEADING301-775></A>
<H4>Catalog Information Parameter Block (Directories Variant)
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD>ioFRefNum<TD>word<TD>file reference number<TR>
<TD>26<TD>ioFVersNum<TD>byte<TD>version number<TR>
<TD>27<TD>filler1<TD>byte<TD>reserved<TR>
<TD>28<TD><CODE>ioFDirIndex</CODE><TD>word<TD>directory index<TR>
<TD>30<TD><CODE>ioFlAttrib</CODE><TD>byte<TD>directory attributes<TR>
<TD>31<TD><CODE>ioACUser</CODE><TD>byte<TD>directory access rights<TR>
<TD>32<TD><CODE>ioDrUsrWds</CODE><TD>16 bytes<TD>information used by the Finder<TR>
<TD>48<TD><CODE>ioDrDirID</CODE><TD>long<TD>directory ID<TR>
<TD>52<TD><CODE>ioDrNmFls</CODE><TD>word<TD>number of files in directory<TR>
<TD>54<TD><CODE>filler3</CODE><TD>18 bytes<TD>reserved<TR>
<TD>72<TD><CODE>ioDrCrDat</CODE><TD>long<TD>date and time of creation<TR>
<TD>76<TD><CODE>ioDrMdDat</CODE><TD>long<TD>date and time of last modification<TR>
<TD>80<TD><CODE>ioDrBkDat</CODE><TD>long<TD>date and time of last backup<TR>
<TD>84<TD><CODE>ioDrFndrInfo</CODE><TD>16 bytes<TD>additional information used by the Finder<TR>
<TD>100<TD><CODE>ioDrParID</CODE><TD>long<TD>directory's parent directory ID</TABLE>
</H4>
<A NAME=HEADING301-776></A>
<H4>Catalog Position Record
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>initialize</CODE><TD>long<TD>starting place for next search<TR>
<TD>4<TD><CODE>priv</CODE><TD>12 bytes<TD>private data</TABLE>
</H4>
<A NAME=HEADING301-777></A>
<H4>Catalog Move Parameter Block
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler1</CODE><TD>long<TD>reserved<TR>
<TD>28<TD><CODE>ioNewName</CODE><TD>long<TD>pointer to name of new directory<TR>
<TD>32<TD><CODE>filler2</CODE><TD>long<TD>reserved<TR>
<TD>36<TD><CODE>ioNewDirID</CODE><TD>long<TD>directory ID of new directory<TR>
<TD>40<TD><CODE>filler3</CODE><TD>8 bytes<TD>reserved<TR>
<TD>48<TD><CODE>ioDirID</CODE><TD>long<TD>directory ID of current directory</TABLE>
</H4>
<A NAME=HEADING301-778></A>
<H4>Working Directory Parameter Block
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>filler1</CODE><TD>word<TD>reserved<TR>
<TD>26<TD><CODE>ioWDIndex</CODE><TD>word<TD>working directory's index<TR>
<TD>28<TD><CODE>ioWDProcID</CODE><TD>long<TD>working directory's user identifier<TR>
<TD>32<TD><CODE>ioWDVRefNum</CODE><TD>word<TD>working directory's volume reference number<TR>
<TD>34<TD><CODE>filler2</CODE><TD>14 bytes<TD>reserved<TR>
<TD>48<TD><CODE>ioWDDirID</CODE><TD>long<TD>working directory's directory ID</TABLE>
</H4>
<A NAME=HEADING301-779></A>
<H4>File Control Block Parameter Block
<TABLE BORDER="0" CELLPADDING=3><TD>24<TD><CODE>ioRefNum</CODE><TD>word<TD>file reference number<TR>
<TD>26<TD><CODE>filler</CODE><TD>word<TD>reserved<TR>
<TD>28<TD><CODE>ioFCBIndx</CODE><TD>word<TD>FCB index<TR>
<TD>30<TD><CODE>ioFCBfiller1</CODE><TD>word<TD>reserved<TR>
<TD>32<TD><CODE>ioFCBFlNm</CODE><TD>long<TD>file ID<TR>
<TD>36<TD><CODE>ioFCBFlags</CODE><TD>word<TD>flags<TR>
<TD>38<TD><CODE>ioFCBStBlk</CODE><TD>word<TD>first allocation block of file<TR>
<TD>40<TD><CODE>ioFCBEOF</CODE><TD>long<TD>logical end-of-file<TR>
<TD>44<TD><CODE>ioFCBPLen</CODE><TD>long<TD>physical end-of-file<TR>
<TD>48<TD><CODE>ioFCBCrPs</CODE><TD>long<TD>position of the file mark<TR>
<TD>52<TD><CODE>ioFCBVRefNum</CODE><TD>word<TD>volume reference number<TR>
<TD>54<TD><CODE>ioFCBClpSiz</CODE><TD>long<TD>file's clump size<TR>
<TD>58<TD><CODE>ioFCBParID</CODE><TD>long<TD>parent directory ID</TABLE>
</H4>
<A NAME=HEADING301-780></A>
<H4>Volume Attributes Buffer
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>vMVersion</CODE><TD>word<TD>version number<TR>
<TD>2<TD><CODE>vMAttrib</CODE><TD>long<TD>volume attributes<TR>
<TD>6<TD><CODE>vMLocalHand</CODE><TD>long<TD>reserved<TR>
<TD>10<TD><CODE>vMServerAdr</CODE><TD>long<TD>network server address<TR>
<TD>14<TD><CODE>vMVolumeGrade</CODE><TD>long<TD>relative speed rating<TR>
<TD>18<TD><CODE>vMForeignPrivID</CODE><TD>word<TD>foreign privilege model</TABLE>
</H4>
<A NAME=HEADING301-781></A>
<H4>Volume Mounting Information Record
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>length</CODE><TD>word<TD>length of record<TR>
<TD>2<TD><CODE>media</CODE><TD>4 bytes<TD>type of volume</TABLE>
</H4>
<A NAME=HEADING301-782></A>
<H4>AFP Mounting Information Record
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>length</CODE><TD>word<TD>length of record<TR>
<TD>2<TD><CODE>media</CODE><TD>4 bytes<TD>type of volume<TR>
<TD>6<TD><CODE>flags</CODE><TD>word<TD>reserved; must be 0<TR>
<TD>8<TD><CODE>nbpInterval</CODE><TD>byte<TD>NBP retry interval<TR>
<TD>9<TD><CODE>nbpCount</CODE><TD>byte<TD>NBP retry count<TR>
<TD>10<TD><CODE>uamType</CODE><TD>word<TD>user authentication method<TR>
<TD>12<TD><CODE>zoneNameOffset</CODE><TD>word<TD>offset to zone name<TR>
<TD>14<TD><CODE>serverNameOffset</CODE><TD>word<TD>offset to server name<TR>
<TD>16<TD><CODE>volNameOffset</CODE><TD>word<TD>offset to volume name<TR>
<TD>18<TD><CODE>userNameOffset</CODE><TD>word<TD>offset to user name<TR>
<TD>20<TD><CODE>userPasswordOffset</CODE><TD>word<TD>offset to user password<TR>
<TD>22<TD><CODE>volPasswordOffset</CODE><TD>word<TD>offset to volume password<TR>
<TD>24<TD><CODE>AFPData</CODE><TD>144 bytes<TD>mounting data</TABLE>
</H4>
<A NAME=HEADING301-783></A>
<H4>Volume Control Block Data Structure (Internal)
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>qLink</CODE><TD>long<TD>next queue entry<TR>
<TD>4<TD><CODE>qType</CODE><TD>word<TD>queue type<TR>
<TD>6<TD><CODE>vcbFlags</CODE><TD>word<TD>volume flags<TR>
<TD>8<TD><CODE>vcbSigWord</CODE><TD>word<TD>volume signature<TR>
<TD>10<TD><CODE>vcbCrDate</CODE><TD>long<TD>date and time of initialization<TR>
<TD>14<TD><CODE>vcbLsMod</CODE><TD>long<TD>date and time of last modification<TR>
<TD>18<TD><CODE>vcbAtrb</CODE><TD>word<TD>volume attributes<TR>
<TD>20<TD><CODE>vcbNmFls</CODE><TD>word<TD>number of files in root directory<TR>
<TD>22<TD><CODE>vcbVBMSt</CODE> <TD>word<TD>first block of volume bitmap<TR>
<TD>24<TD><CODE>vcbAllocPtr</CODE><TD>word<TD>start of next allocation search<TR>
<TD>26<TD><CODE>vcbNmAlBlks</CODE><TD>word<TD>number of allocation blocks in volume<TR>
<TD>28<TD><CODE>vcbAlBlkSiz</CODE><TD>long<TD>size (in bytes) of allocation block<TR>
<TD>32<TD><CODE>vcbClpSiz</CODE><TD>long<TD>default clump size<TR>
<TD>36<TD><CODE>vcbAlBlSt</CODE><TD>word<TD>first allocation block in volume<TR>
<TD>38<TD><CODE>vcbNxtCNID</CODE><TD>long<TD>next unused catalog node ID<TR>
<TD>42<TD><CODE>vcbFreeBks</CODE><TD>word<TD>number of unused allocation blocks<TR>
<TD>44<TD><CODE>vcbVN</CODE><TD>28 bytes<TD>volume name preceded by length byte<TR>
<TD>72<TD><CODE>vcbDrvNum</CODE><TD>word<TD>drive number<TR>
<TD>74<TD><CODE>vcbDRefNum</CODE><TD>word<TD>driver reference number<TR>
<TD>76<TD><CODE>vcbFSID</CODE><TD>word<TD>file-system identifier<TR>
<TD>78<TD><CODE>vcbVRefNum</CODE><TD>word<TD>volume reference number<TR>
<TD>80<TD><CODE>vcbMAdr</CODE><TD>long<TD>pointer to block map<TR>
<TD>84<TD><CODE>vcbBufAdr</CODE><TD>long<TD>pointer to volume buffer<TR>
<TD>88<TD><CODE>vcbMLen</CODE><TD>word<TD>number of bytes in block map<TR>
<TD>90<TD><CODE>vcbDirIndex</CODE><TD>word<TD>reserved<TR>
<TD>92<TD><CODE>vcbDirBlk</CODE><TD>word<TD>reserved<TR>
<TD>94<TD><CODE>vcbVolBkUp</CODE><TD>long<TD>date and time of last backup<TR>
<TD>98<TD><CODE>vcbVSeqNum</CODE><TD>word<TD>volume backup sequence number<TR>
<TD>100<TD><CODE>vcbWrCnt</CODE><TD>long<TD>volume write count<TR>
<TD>104<TD><CODE>vcbXTClpSiz</CODE><TD>long<TD>clump size for extents overflow file<TR>
<TD>108<TD><CODE>vcbCTClpSiz</CODE><TD>long<TD>clump size for catalog file<TR>
<TD>112<TD><CODE>vcbNmRtDirs</CODE><TD>word<TD>number of directories in root directory<TR>
<TD>114<TD><CODE>vcbFilCnt</CODE><TD>long<TD>number of files in volume<TR>
<TD>118<TD><CODE>vcbDirCnt</CODE><TD>long<TD>number of directories in volume<TR>
<TD>122<TD><CODE>vcbFndrInfo</CODE><TD>32 bytes<TD>information used by the Finder<TR>
<TD>154<TD><CODE>vcbVCSize</CODE><TD>word<TD>reserved<TR>
<TD>156<TD><CODE>vcbVBMCSiz</CODE><TD>word<TD>reserved<TR>
<TD>158<TD><CODE>vcbCtlCSiz</CODE><TD>word<TD>reserved<TR>
<TD>160<TD><CODE>vcbXTAlBks</CODE><TD>word<TD>size in blocks of extents overflow file<TR>
<TD>162<TD><CODE>vcbCTAlBks</CODE><TD>word<TD>size in blocks of catalog file<TR>
<TD>164<TD><CODE>vcbXTRef</CODE><TD>word<TD>file reference number for extents overflow file<TR>
<TD>166<TD><CODE>vcbCTRef</CODE><TD>word<TD>file reference number for catalog file<TR>
<TD>168<TD><CODE>vcbCtlBuf</CODE><TD>long<TD>pointer to extents and catalog tree caches<TR>
<TD>172<TD><CODE>vcbDirIDM</CODE><TD>long<TD>directory last searched<TR>
<TD>176<TD><CODE>vcbOffsM</CODE><TD>word<TD>offspring index at last search</TABLE>
</H4>
<A NAME=HEADING301-784></A>
<H4>File Control Block Data Structure (Internal)
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>fcbFlNum</CODE><TD>long<TD>file ID<TR>
<TD>4<TD><CODE>fcbFlags</CODE><TD>word<TD>file flags<TR>
<TD>6<TD><CODE>fcbSBlk</CODE><TD>word<TD>first allocation block of file<TR>
<TD>8<TD><CODE>fcbEOF</CODE><TD>long<TD>logical end-of-file<TR>
<TD>12<TD><CODE>fcbPLen</CODE><TD>long<TD>physical end-of-file<TR>
<TD>16<TD><CODE>fcbCrPs</CODE><TD>long<TD>current file mark position<TR>
<TD>20<TD><CODE>fcbVPtr</CODE><TD>long<TD>pointer to volume control block<TR>
<TD>24<TD><CODE>fcbBfAdr</CODE><TD>long<TD>pointer to access path buffer<TR>
<TD>28<TD><CODE>fcbFlPos</CODE><TD>word<TD>reserved<TR>
<TD>30<TD><CODE>fcbClmpSize</CODE><TD>long<TD>file's clump size<TR>
<TD>34<TD><CODE>fcbBTCBPtr</CODE><TD>long<TD>pointer to B*-tree control block<TR>
<TD>38<TD><CODE>fcbExtRec</CODE><TD>12 bytes<TD>first three file extents<TR>
<TD>50<TD><CODE>fcbFType</CODE><TD>long<TD>file's four Finder type bytes<TR>
<TD>54<TD><CODE>fcbCatPos</CODE><TD>long<TD>catalog hint for use on close<TR>
<TD>58<TD><CODE>fcbDirID</CODE><TD>long<TD>file's parent directory ID<TR>
<TD>62<TD><CODE>fcbCName</CODE><TD>32 bytes<TD>name of open file, preceded by length byte</TABLE>
</H4>
<A NAME=HEADING301-785></A>
<H4>Drive Queue Elements
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>qLink</CODE> <TD>long<TD>next queue entry<TR>
<TD>4<TD><CODE>qType</CODE><TD>word<TD>flag for <CODE>dQDrvSz</CODE> and <CODE>dQDrvSz2</CODE> fields<TR>
<TD>6<TD><CODE>dQDrive</CODE><TD>word<TD>drive number<TR>
<TD>8<TD><CODE>dQRefNum</CODE><TD>word<TD>driver reference number<TR>
<TD>10<TD><CODE>dQFSID</CODE><TD>word<TD>file-system identifier<TR>
<TD>12<TD><CODE>dQDrvSz</CODE><TD>word<TD>number of logical blocks on drive<TR>
<TD>14<TD><CODE>dQDrvSz2</CODE><TD>word<TD>additional field for large drives</TABLE>
</H4>
<A NAME=HEADING301-786></A>
<H3>Trap Macros</H3>
<A NAME=HEADING301-787></A>
<H4>Trap Macro Names
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Pascal name<TH>Trap macro name<TR>
<TD>PBAllocate<TD>_Allocate<TR>
<TD>PBAllocContig<TD>_AllocContig<TR>
<TD>PBClose<TD>_Close<TR>
<TD>PBDirCreate<TD>_DirCreate<TR>
<TD>PBEject <TD>_Eject<TR>
<TD>PBFlushFile<TD>_FlushFile<TR>
<TD>PBFlushVol<TD>_FlushVol<TR>
<TD>PBGetEOF<TD>_GetEOF<TR>
<TD>PBGetFPos<TD>_GetFPos<TR>
<TD>PBGetVol <TD>_GetVol<TR>
<TD>PBHCreate<TD>_HCreate<TR>
<TD>PBHDelete<TD>_HDelete<TR>
<TD>PBHGetFInfo<TD>_HGetFileInfo<TR>
<TD>PBHGetVInfo<TD>_HGetVolInfo<TR>
<TD>PBHGetVol<TD>_HGetVol<TR>
<TD>PBHGetVolParms<TD>_GetVolParms<TR>
<TD>PBHOpen<TD>_HOpen<TR>
<TD>PBHOpenRF<TD>_HOpenRF<TR>
<TD>PBHRename<TD>_HRename<TR>
<TD>PBHRstFLock <TD>_HRstFLock<TR>
<TD>PBHSetFInfo<TD>_HSetFileInfo<TR>
<TD>PBHSetFLock<TD>_HSetFLock<TR>
<TD>PBHSetVol<TD>_HSetVol<TR>
<TD>PBMountVol<TD>_MountVol<TR>
<TD>PBOffLine<TD>_OffLine<TR>
<TD>PBRead<TD><CODE>_Read</CODE><TR>
<TD>PBSetEOF<TD>_SetEOF<TR>
<TD>PBSetFPos<TD>_SetFPos<TR>
<TD>PBSetVInfo<TD>_SetVolInfo<TR>
<TD>PBSetVol <TD>_SetVol<TR>
<TD>PBUnmountVol<TD>_UnmountVol<TR>
<TD>PBWrite<TD>_Write</TABLE>
</H4>
<A NAME=HEADING301-788></A>
<H4>Trap Macros Requiring Routine Selectors</H4>

<CODE>_HFSDispatch
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Selector<TH>Routine<TR>
<TD>$0001<TD><CODE>PBOpenWD</CODE><TR>
<TD>$0002<TD><CODE>PBCloseWD</CODE><TR>
<TD>$0005<TD><CODE>PBCatMove</CODE><TR>
<TD>$0006<TD><CODE>PBDirCreate</CODE><TR>
<TD>$0007<TD><CODE>PBGetWDInfo</CODE><TR>
<TD>$0008<TD><CODE>PBGetFCBInfo</CODE><TR>
<TD>$0009<TD><CODE>PBGetCatInfo</CODE><TR>
<TD>$000A<TD><CODE>PBSetCatInfo</CODE><TR>
<TD>$000B<TD><CODE>PBSetVInfo</CODE><TR>
<TD>$0010<TD><CODE>PBLockRange</CODE><TR>
<TD>$0011<TD><CODE>PBUnlockRange</CODE><TR>
<TD>$0014<TD><CODE>PBCreateFileIDRef</CODE><TR>
<TD>$0015<TD><CODE>PBDeleteFileIDRef</CODE><TR>
<TD>$0016<TD><CODE>PBResolveFileIDRef</CODE><TR>
<TD>$0017<TD><CODE>PBExchangeFiles</CODE><TR>
<TD>$0018<TD><CODE>PBCatSearch</CODE><TR>
<TD>$001A<TD><CODE>PBHOpenDF</CODE><TR>
<TD>$001B<TD><CODE>PBMakeFSSpec</CODE><TR>
<TD>$0030<TD><CODE>PBHGetVolParms</CODE><TR>
<TD>$0031<TD><CODE>PBHGetLogInInfo</CODE><TR>
<TD>$0032<TD><CODE>PBHGetDirAccess</CODE><TR>
<TD>$0033<TD><CODE>PBHSetDirAccess</CODE><TR>
<TD>$0034<TD><CODE>PBHMapID</CODE><TR>
<TD>$0035<TD><CODE>PBHMapName</CODE><TR>
<TD>$0036<TD><CODE>PBHCopyFile</CODE><TR>
<TD>$0037<TD><CODE>PBHMoveRename</CODE><TR>
<TD>$0038<TD><CODE>PBHOpenDeny</CODE><TR>
<TD>$0039<TD><CODE>PBHOpenRFDeny</CODE><TR>
<TD>$003F<TD><CODE>PBGetVolMountInfoSize</CODE><TR>
<TD>$0040<TD><CODE>PBGetVolMountInfo</CODE><TR>
<TD>$0041<TD><CODE>PBVolumeMount</CODE><TR>
<TD>$0042<TD><CODE>PBShare</CODE><TR>
<TD>$0043<TD><CODE>PBUnshare</CODE><TR>
<TD>$0044<TD><CODE>PBGetUGEntry</CODE><TR>
<TD>$0060<TD><CODE>PBGetForeignPrivs</CODE><TR>
<TD>$0061<TD><CODE>PBSetForeignPrivs</CODE></TABLE>
</CODE>
<CODE>_HighLevelFSDispatch</CODE>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Selector<TH>Routine<TR>
<TD>$0001<TD><CODE>FSMakeFSSpec</CODE><TR>
<TD>$0002<TD><CODE>FSpOpenDF</CODE><TR>
<TD>$0003<TD><CODE>FSpOpenRF</CODE><TR>
<TD>$0004<TD><CODE>FSpCreate</CODE><TR>
<TD>$0005<TD><CODE>FSpDirCreate</CODE><TR>
<TD>$0006<TD><CODE>FSpDelete</CODE><TR>
<TD>$0007<TD><CODE>FSpGetFInfo</CODE><TR>
<TD>$0008<TD><CODE>FSpSetFInfo</CODE><TR>
<TD>$0009<TD><CODE>FSpSetFLock</CODE><TR>
<TD>$000A<TD><CODE>FSpRstFLock</CODE><TR>
<TD>$000B<TD><CODE>FSpRename</CODE><TR>
<TD>$000C<TD><CODE>FSpCatMove</CODE><TR>
<TD>$000D<TD><CODE>FSpOpenResFile</CODE><TR>
<TD>$000E<TD><CODE>FSpCreateResFile</CODE><TR>
<TD>$000F<TD><CODE>FSpExchangeFiles</CODE></TABLE>

</PRE>
<A NAME=HEADING301-791></A>
<H3>Global Variables
<TABLE BORDER="0" CELLPADDING=3><TD>BootDrive<TD>word<TD>Working directory reference number for startup volume.<TR>
<TD>DefVCBPtr<TD>long<TD>Pointer to default volume control block.<TR>
<TD>DrvQHdr<TD>10 bytes<TD>Drive queue header.<TR>
<TD>FSFCBLen<TD>word<TD>Size of a file control block.<TR>
<TD>FSQHdr<TD>10 bytes <TD>File I/O queue header.<TR>
<TD>ToExtFS<TD>long<TD>Pointer to external file system.<TR>
<TD>VCBQHdr<TD>10 bytes<TD>Volume control block queue header.</TABLE>
</H3>
<A NAME=HEADING301-792></A>
<H2>Result Codes
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>notOpenErr<TD>-28<TD>AppleTalk is not open<TR>
<TD>dirFulErr<TD> -33<TD>File directory full<TR>
<TD>dskFulErr<TD> -34<TD>All allocation blocks on the volume are full<TR>
<TD>nsvErr<TD>-35<TD>Volume not found<TR>
<TD>ioErr<TD>-36<TD>I/O error<TR>
<TD>bdNamErr<TD>-37<TD>Bad filename or volume name<TR>
<TD>fnOpnErr<TD> -38<TD>File not open<TR>
<TD>eofErr<TD>-39<TD>Logical end-of-file reached<TR>
<TD>posErr<TD> -40<TD>Attempt to position mark before start of file<TR>
<TD>tmfoErr<TD>-42<TD>Too many files open<TR>
<TD>fnfErr<TD>-43<TD>File not found<TR>
<TD>wPrErr<TD>-44<TD>Hardware volume lock<TR>
<TD>fLckdErr<TD>-45<TD>File is locked<TR>
<TD>vLckdErr<TD>-46<TD>Software volume lock<TR>
<TD>fBsyErr<TD> -47<TD>File is busy; one or more files are open; directory not empty or working directory control block is open<TR>
<TD>dupFNErr<TD> -48<TD>A file with the specified name already exists<TR>
<TD>opWrErr<TD>-49<TD>File already open for writing<TR>
<TD>paramErr<TD>-50<TD>Parameter error<TR>
<TD>rfNumErr<TD> -51<TD>Reference number specifies nonexistent access path; bad working directory reference number<TR>
<TD>gfpErr<TD> -52<TD>Error during <CODE>GetFPos</CODE><TR>
<TD>volOfflinErr<TD>-53<TD>Volume is offline<TR>
<TD>permErr<TD> -54<TD>Attempt to open locked file for writing<TR>
<TD>volOnLinErr<TD>-55<TD>Specified volume is already mounted and online<TR>
<TD>nsDrvErr<TD> -56<TD>Specified drive number doesn't match any number in the drive queue<TR>
<TD>noMacDskErr<TD> -57<TD>Volume lacks Macintosh-format directory<TR>
<TD>extFSErr<TD>-58<TD>External file system<TR>
<TD>fsRnErr<TD> -59<TD>Problem during rename<TR>
<TD>badMDBErr<TD> -60<TD>Bad master directory block<TR>
<TD>wrPermErr<TD>-61<TD>Read/write permission doesn't allow writing<TR>
<TD>memFullErr<TD>-108<TD>Insufficient memory available<TR>
<TD>dirNFErr<TD>-120<TD>Directory not found<TR>
<TD>tmwdoErr<TD>-121<TD>Too many working directories open<TR>
<TD>badMovErr<TD>-122<TD>Attempted to move into offspring<TR>
<TD>wrgVolTypErr<TD>-123<TD>Not an HFS volume<TR>
<TD>volGoneErr<TD>-124<TD>Server volume has been disconnected<TR>
<TD>fsDSIntErr<TD>-127<TD>Internal file system error<TR>
<TD>fidNotFoundErr<TD>-1300<TD>File ID not found<TR>
<TD>fidExists<TD>-1301<TD>File ID already exists<TR>
<TD>notAFileErr<TD>-1302<TD>Specified file is a directory<TR>
<TD>diffVolErr<TD>-1303<TD>Files are on different volumes<TR>
<TD>catChangedErr<TD>-1304<TD>Catalog has changed and catalog position record may be invalid<TR>
<TD>sameFileErr<TD>-1306<TD>Files are the same<TR>
<TD>afpAccessDenied<TD>-5000<TD>The operation has failed because the user does not have the correct access to the file or folder<TR>
<TD>afpBadUAM<TD>-5002<TD>User authentication method is unknown<TR>
<TD>afpBadVersNum<TD>-5003<TD>Workstation is using an AFP version that the server doesn't recognize<TR>
<TD>afpDenyConflict<TD>-5006<TD>The operation has failed because the permission or deny mode conflicts with the mode in which the fork has already been opened<TR>
<TD>afpNoMoreLocks<TD>-5015<TD>Byte range locking has failed because the server cannot lock any additional ranges<TR>
<TD>afpNoServer<TD>-5016<TD>Server is not responding<TR>
<TD>afpRangeNotLocked<TD>-5020<TD>User has attempted to unlock a range that was not locked by that user<TR>
<TD>afpRangeOverlap<TD>-5021<TD>User attempted to lock some or all of a range that is already locked<TR>
<TD>afpUserNotAuth<TD>-5023<TD>User authentication failed (usually, password is <BR>not correct)<TR>
<TD>afpObjectTypeErr<TD>-5025<TD>Object was a file, not a directory; or, this directory is not a share point<TR>
<TD>afpContainsSharedErr<TD>-5033<TD>The directory contains a share point<TR>
<TD>afpIDNotFound<TD>-5034<TD>File ID not found<TR>
<TD>afpIDExists<TD>-5035<TD>File ID already exists<TR>
<TD>afpCatalogChanged<TD>-5037<TD>Catalog has changed and search cannot be resumed<TR>
<TD>afpSameObjectErr<TD>-5038<TD>Source and destination are the same<TR>
<TD>afpBadIDErr<TD>-5039<TD>Bad file ID<TR>
<TD>afpPwdExpired<TD>-5042<TD>Password has expired on server<TR>
<TD>afpInsideSharedErr<TD>-5043<TD>The directory is inside a shared directory<TR>
<TD>afpBadDirIDType<TD>-5060<TD>Not a fixed directory ID volume<TR>
<TD>afpCantMountMoreSrvrs<TD>-5061<TD>Maximum number of volumes have been mounted<TR>
<TD>afpAlreadyMounted<TD>-5062<TD>Volume already mounted<TR>
<TD>afpSameNodeErr<TD>-5063<TD>Attempt to log on to a server running on the <BR>same machine</TABLE>
</H2>
 <A NAME=MARKER-2-1489></A><A NAME=MARKER-2-1490></A><A NAME=MARKER-2-1491></A><A NAME=MARKER-2-1492></A><A NAME=MARKER-2-1493></A><A NAME=MARKER-2-1494></A><A NAME=MARKER-2-1495></A><A NAME=MARKER-2-1496></A><A NAME=MARKER-2-1497></A><A NAME=MARKER-2-1498></A><A NAME=MARKER-2-1499></A><A NAME=MARKER-2-1500></A><A NAME=MARKER-2-1501></A><A NAME=MARKER-2-1502></A><A NAME=MARKER-2-1503></A><A NAME=MARKER-2-1504></A><A NAME=MARKER-2-1505></A><A NAME=MARKER-2-1506></A><A NAME=MARKER-2-1507></A><A NAME=MARKER-2-1508></A><A NAME=MARKER-2-1509></A><A NAME=MARKER-2-1510></A><P>
</BLOCKQUOTE><P>

<HR>
<center>
<A HREF="Files-301.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-302.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Defining Strings (IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING285></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-284.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-286.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-279.html"><B>Chapter 5 - Text Utilities</B></A> / <A HREF="Text-284.html"><B>Using the Text Utilities</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING285-0></A>
<H2>Defining Strings<A NAME=MARKER-21-90></A> <A NAME=MARKER-2-91></A></H2>
 Before you use a string in your application, you must define it in some way. You can use a string variable to represent text characters, or you can allocate an object in the heap to represent those text characters. Many strings, including error messages and lists of input choices, originate in the resource fork of your application; you need access to these string resources before using any of the Text Utilities routines with the strings. This section describes several routines that you can use to allocate strings and to access string resources.<P>
<A NAME=HEADING285-2></A>
<H3>Working With String Handles</H3>
 <A NAME=MARKER-2-38></A>When you need to modify a string, it is useful to create a version of the string as an object in the heap. That way, you can increase or reduce the memory allocated for the string object as necessary. String handles provide a means for you to work with heap-oriented strings.<A NAME=MARKER-2-35></A><P>
 The Text Utilities include two routines that work with strings and string handles. The <CODE>NewString</CODE> function creates a copy of a specified string in the heap and returns a handle to that string. The <CODE>SetString</CODE> procedure changes the contents of the string referenced by a string handle by copying a specified string into its area of the heap. If you pass <CODE>SetString</CODE> a string that is longer than the one originally referenced by the handle, <CODE>SetString</CODE> automatically resizes the handle and copies in the contents of the specified string.<A NAME=MARKER-2-287></A><A NAME=MARKER-9-92></A><P>
 For example, suppose that you want to write a routine that creates both an uppercase and lowercase version of an input string. The <CODE>MyUpperAndLower</CODE> function shown in <A HREF=#MARKER-9-96>Listing 5-1</A> replaces the contents of the <CODE>lowerStr</CODE> parameter with a lowercase version of the <CODE>str</CODE> parameter, and returns a new string handle to the uppercase version.<A NAME=MARKER-2-68></A><P>
<B>Listing 5-1  <A NAME=MARKER-9-96></A>Using the <CODE>NewString</CODE> and <CODE>SetString</CODE> routines</B><P>
<PRE>
FUNCTION MyUpperAndLower (str: Str255;
                           VAR lowerStr: StringHandle): StringHandle;
VAR
   myStr: StringHandle;
   len: Integer;
BEGIN
   myStr := NewString(str);   {create string handle to be converted to upper}
   SetString( lowerStr, str); {set string handle to be converted to lower}
   len := ord(str[0]);

   HLock(Handle(myStr));      {UppercaseText can move memory}
   UppercaseText(@myStr^^[1], len, smSystemScript);
   HLock(Handle(myStr));

   HLock(Handle(lowerStr));      {LowercaseText can move memory}
   LowercaseText(@lowerStr^^[1], len, smSystemScript);
   HLock(Handle(lowerStr));
   MyUpperAndLower := myStr;
END;
</PRE>
<A NAME=HEADING285-8></A>
<H3>Working With String Resources<A NAME=MARKER-9-94></A></H3>
 Since many of the strings in your Macintosh applications are specified in resource files, you need access to those strings. Strings are defined by two different resource types: the string (<CODE>'STR '</CODE>) resource and the string list (<CODE>'STR#'</CODE>) resource. To work with the string resource, you use the <CODE>GetString</CODE> function, and to work with a string list resource, you use the <CODE>GetIndString</CODE> procedure.<A NAME=MARKER-2-106></A><A NAME=MARKER-2-41></A><P>
 The <CODE>GetString</CODE> function reads a string resource into memory and returns the handle to the string resource as its result. <CODE>GetString</CODE> does not copy the string, so you must create your own copy if you are going to modify the string in your application. If the resource has already been read into memory, <CODE>GetString</CODE> simply returns a handle to the string.<A NAME=MARKER-2-228></A><P>
 If you use a number of strings in your application, it is more efficient to specify them in a string list resource rather than as individual resources. This is because the system software that reads in the resources can operate more efficiently when reading a collection of strings from a file than when reading and storing each individually.<P>
 To work with an element in a string list, use the <CODE>GetIndString</CODE> procedure. It reads the resource, locates the string, and copies the string into a Pascal string variable you supply. You can then use the <CODE>NewString</CODE> function to create a copy of the string in the heap, if you wish. <A NAME=MARKER-21-93></A> <A NAME=MARKER-2-40></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-284.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-286.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

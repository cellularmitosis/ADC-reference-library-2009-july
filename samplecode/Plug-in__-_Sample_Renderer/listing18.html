<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>Plug-in  - Sample Renderer - /Source/SR_MacDialog.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; <A HREF="javascript:location.replace('index.html');">Plug-in  - Sample Renderer</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">Plug-in  - Sample Renderer</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/Source/SR_MacDialog.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/Headers/resource.h</option>
<option value="listing2.html">/Headers/SR.h</option>
<option value="listing3.html">/Headers/SR_ClipUtilities.h</option>
<option value="listing4.html">/Headers/SR_ConfigData.h</option>
<option value="listing5.html">/Headers/SR_MacDialog.h</option>
<option value="listing6.html">/Headers/SR_Marker.h</option>
<option value="listing7.html">/Headers/SR_MarkerRenderer.h</option>
<option value="listing8.html">/Headers/SR_Math.h</option>
<option value="listing9.html">/Headers/SR_PixmapMarkerRenderer.h</option>
<option value="listing10.html">/Headers/SR_PrefixFile.h</option>
<option value="listing11.html">/Headers/SR_Rasterizers.h</option>
<option value="listing12.html">/Headers/SR_WinDialog.h</option>
<option value="listing13.html">/Source/SR.c</option>
<option value="listing14.html">/Source/SR_ClipUtilities.c</option>
<option value="listing15.html">/Source/SR_ConfigData.c</option>
<option value="listing16.html">/Source/SR_Line.c</option>
<option value="listing17.html">/Source/SR_LinePipe.c</option>
<option value="listing18.html">/Source/SR_MacDialog.c</option>
<option value="listing19.html">/Source/SR_Marker.c</option>
<option value="listing20.html">/Source/SR_MarkerRasterize_32.c</option>
<option value="listing21.html">/Source/SR_MarkerRasterize_8.c</option>
<option value="listing22.html">/Source/SR_Math.c</option>
<option value="listing23.html">/Source/SR_PipelineSetup.c</option>
<option value="listing24.html">/Source/SR_PixmapMarker.c</option>
<option value="listing25.html">/Source/SR_PixmapMarkerRasterize_32.c</option>
<option value="listing26.html">/Source/SR_PixmapMarkerRasterize_8.c</option>
<option value="listing27.html">/Source/SR_Point.c</option>
<option value="listing28.html">/Source/SR_PointPipe.c</option>
<option value="listing29.html">/Source/SR_Rasterizers.c</option>
<option value="listing30.html">/Source/SR_Triangle.c</option>
<option value="listing31.html">/Source/SR_WinDialog.c</option></select>
				</p>
				</form>
				<p><strong><a href="Plug-in__-_Sample_Renderer.zip">Download Sample</a></strong> (&#147;Plug-in__-_Sample_Renderer.zip&#148;, 101.9K)<BR>
<strong><a href="Plug-in__-_Sample_Renderer.dmg">Download Sample</a></strong> (&#147;Plug-in__-_Sample_Renderer.dmg&#148;, 165.9K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/****************************************************************************** **                                       ** **   Module:    SR_MacDialog.c                       ** **                                      ** **                                      ** **   Purpose:   Modal dialog routines                    ** **                                      ** **                                      ** **                                      ** **   Copyright (C) 1996-1997 Apple Computer, Inc.  All rights reserved.   ** **                                      ** **                                      ** *****************************************************************************/#include &quot;QD3D.h&quot;#include &quot;QD3DExtension.h&quot;#if defined(WINDOW_SYSTEM_MACINTOSH) &amp;&amp; WINDOW_SYSTEM_MACINTOSH#define BUILDING_FOR_SYSTEM7   1#include &lt;assert.h&gt;#include &lt;Dialogs.h&gt;#include &lt;Sound.h&gt;#include &lt;string.h&gt;#include &lt;Devices.h&gt;#include &lt;ToolUtils.h&gt;#include &lt;Aliases.h&gt;#include &lt;Resources.h&gt;#include &lt;TextUtils.h&gt;#include &quot;SR.h&quot;#include &quot;SR_MacDialog.h&quot;/****************************************************************************** **                                       ** **                  Dialog ID's                 ** **                                       ** *****************************************************************************/#define SR_DLOG_ID      128#define SR_MOVABLE_DLOG_ID  129#define  SR_DLOG_OK      1#define  SR_DLOG_CANCEL    2#define  SR_DLOG_CHECKBOX  3/****************************************************************************** **                                       ** **                Forward Declarations             ** **                                       ** *****************************************************************************/static TQ3Status SR_ModalDialog(  TQ3RendererObject  renderer,  TQ3Boolean      *canceled,    void        *rendererPrivate);static TQ3Status SR_MovableModalDialog(  TQ3RendererObject  renderer,  TQ3DialogAnchor   dialogAnchor,   TQ3Boolean      *canceled,    void        *rendererPrivate);  static DialogPtr SR_LoadDialog(  short        dlogId,  void        *rendererPrivate);static TQ3Status HandleHit(  DialogPtr      dialog,  short        itemHit,  TQ3Boolean      *done,  TQ3RendererObject  renderer,  TQ3Boolean      *canceled,    void        *rendererPrivate);  static TQ3Boolean HandledEvent(  EventRecord      *event,  DialogPtr      dialog,  short        *itemHit,  TQ3Boolean      *done,  TQ3RendererObject  renderer,  TQ3Boolean      *canceled,    void        *rendererPrivate);static void HandleMenuClick(  long        menuItem);static void DrawDefaultButtonOutline(  DialogPtr      dialog,  short        item);Boolean ModalDialogFilter(  DialogPtr      dialog,  EventRecord      *event,  short        *itemHit);void SimulateButtonClick(  DialogPtr      dialog,  short        item);/****************************************************************************** **                                       ** **                  Globals                   ** **                                       ** *****************************************************************************/static ModalFilterUPP   SRgModalFilterUPP = NULL;/*  * The next two statics are needed to set and reset the Resource chain prior to * calling out to the applications Event handler */static short      SRgOldResFile,             SRgResFile;extern AliasHandle     SRgAliasHandle;/****************************************************************************** **                                       ** **                Naming Routines                 ** **                                       ** *****************************************************************************//*===========================================================================*\ * *  Routine:  SR_GetNameString() * *  Comments:   *\*===========================================================================*/TQ3Status SR_GetNameString(  unsigned char        *dataBuffer,   unsigned long        bufferSize,  unsigned long        *actualDataSize){  TQ3Status  status = kQ3Success;  Boolean    wasChanged;  FSSpec    fileSpec;  OSErr    macErr;  Str255    tempBuffer;  /*   * Get at the resource file for this renderer and open the resource   * file, locate the renderer name string and close the res file   * returning the string in the buffer we were passed.   */  SRgOldResFile = CurResFile();    macErr = ResolveAlias(NULL, SRgAliasHandle, &amp;fileSpec, &amp;wasChanged);    if (macErr == noErr) {    SRgResFile = FSpOpenResFile(&amp;fileSpec, fsRdPerm);        if (SRgResFile != -1) {      *actualDataSize = 0L;      GetIndString(tempBuffer, SR_NAME_RESOURCE, 1);            /* trim the buffer if necessary */      *actualDataSize = (tempBuffer[0] &gt; bufferSize) ?                   bufferSize : tempBuffer[0];            if (dataBuffer != NULL)  {        /* copy from the pascal str returned by the res mgr */        memcpy(          (char *)dataBuffer,           (char *) &amp;tempBuffer[1],          *actualDataSize );                  /* and terminate the string */        dataBuffer[*actualDataSize] = '\0';      }      CloseResFile(SRgResFile);      UseResFile(SRgOldResFile);    } else {      Q3XMacintoshError_Post(ResError());      status = kQ3Failure;    }  } else {    Q3XMacintoshError_Post(macErr);    status = kQ3Failure;  }    if (status == kQ3Failure || ResError()) {    *actualDataSize = 0L;    dataBuffer = NULL;  }              return (status);}/****************************************************************************** **                                       ** **                Dialog Routines                 ** **                                       ** *****************************************************************************//*===========================================================================*\ * *  Routine:  SR_MacModalDialog() * *  Comments:   *\*===========================================================================*/TQ3Status SR_MacModalDialog(  TQ3RendererObject  renderer,  TQ3DialogAnchor   dialogAnchor,   TQ3Boolean      *canceled,    void        *rendererPrivate){  TQ3Status  status;  Boolean    wasChanged;  FSSpec    fileSpec;  OSErr    macErr;    SRgOldResFile = CurResFile();    macErr = ResolveAlias(NULL, SRgAliasHandle, &amp;fileSpec, &amp;wasChanged);    if (macErr == noErr) {    SRgResFile = FSpOpenResFile(&amp;fileSpec, fsRdPerm);        if (SRgResFile != -1) {      if (dialogAnchor.clientEventHandler == NULL) {        status = SR_ModalDialog(renderer, canceled, rendererPrivate);      } else {        status = SR_MovableModalDialog(              renderer,               dialogAnchor,               canceled,               rendererPrivate);      }      CloseResFile(SRgResFile);      UseResFile(SRgOldResFile);    } else {      Q3XMacintoshError_Post(ResError());      return (kQ3Failure);    }  } else {    Q3XMacintoshError_Post(macErr);    status = kQ3Failure;  }            return (status);}/*===========================================================================*\ * *  Routine:  SR_MacModalDialog() * *  Comments:   *\*===========================================================================*/TQ3Status SR_ModalDialog(  TQ3RendererObject      renderer,  TQ3Boolean          *canceled,    void            *rendererPrivate){  DialogPtr  dialog;  short    itemHit;  TQ3Boolean  done = kQ3False;  TQ3Status  status = kQ3Success;    if (SRgModalFilterUPP == NULL) {    SRgModalFilterUPP = NewModalFilterProc(ModalDialogFilter);  }    if (SRgModalFilterUPP == NULL) {    Q3XMacintoshError_Post(MemError());    return (kQ3Failure);  }  dialog = SR_LoadDialog(SR_DLOG_ID, rendererPrivate);    if (dialog != NULL) {    do {      ModalDialog(SRgModalFilterUPP, &amp;itemHit);      HandleHit(        dialog, itemHit, &amp;done, renderer, canceled, rendererPrivate);    } while (done == kQ3False);        DisposeDialog(dialog);  } else {    Q3XMacintoshError_Post(ResError());    status = kQ3Failure;  }        return (status);}/*===========================================================================*\ * *  Routine:  ModalDialogFilter() * *  Comments:   *\*===========================================================================*/Boolean ModalDialogFilter(  DialogPtr    dialog,  EventRecord    *event,  short      *itemHit){  Boolean    handled = kQ3False;  char    key;  long    menuItem;  switch (event-&gt;what) {    case keyDown: {      key = (char) (event-&gt;message &amp; charCodeMask);      if (key == '\r' || key == '\3') {        *itemHit = SR_DLOG_OK;        handled = kQ3True;        SimulateButtonClick(dialog, SR_DLOG_OK);      } else if (key == '\33' ||              ((event-&gt;modifiers &amp; cmdKey) &amp;&amp; key == '.')) {        *itemHit = SR_DLOG_CANCEL;        handled = kQ3True;        SimulateButtonClick(dialog, SR_DLOG_CANCEL);      } else if (event-&gt;modifiers &amp; cmdKey) {        menuItem = MenuKey(key);        if (menuItem) {          HandleMenuClick(menuItem);          handled = kQ3True;        }      }      break;    }    case updateEvt: {      if ((DialogPtr) (event-&gt;message) == dialog) {        DrawDefaultButtonOutline(dialog, SR_DLOG_OK);      }      break;    }  }    return (handled);}/*===========================================================================*\ * *  Routine:  DrawDefaultButtonOutline() * *  Comments:   *\*===========================================================================*/void DrawDefaultButtonOutline(  DialogPtr  dialog,  short    item){  short    iType;  Rect    iRect;  Handle    iHandle;  GrafPtr    oldPort;  PenState  oldPenState;  short    buttonOval;    GetDialogItem(dialog, item, &amp;iType, &amp;iHandle, &amp;iRect);    GetPort(&amp;oldPort);  SetPort((**((ControlHandle) iHandle)).contrlOwner);    GetPenState(&amp;oldPenState);  PenNormal();    InsetRect(&amp;iRect, -4, -4);  FrameRoundRect(&amp;iRect, 16, 16);  buttonOval = (iRect.bottom - iRect.top) / 2 + 2;    PenSize(3, 3);    FrameRoundRect(&amp;iRect, buttonOval, buttonOval);    SetPenState(&amp;oldPenState);  SetPort(oldPort);}/*===========================================================================*\ * *  Routine:  SR_MacModalDialog() * *  Comments:   *\*===========================================================================*/TQ3Status SR_MovableModalDialog(  TQ3RendererObject      renderer,  TQ3DialogAnchor       dialogAnchor,   TQ3Boolean          *canceled,    void            *rendererPrivate){  DialogPtr    dialog, whichDlog;  short      itemHit;  TQ3Boolean    done = kQ3False, handled = kQ3False;  EventRecord    event;  dialog = SR_LoadDialog(SR_MOVABLE_DLOG_ID, rendererPrivate);    if (dialog == NULL) {    Q3XMacintoshError_Post(ResError());    return (kQ3Failure);  }      do {    /*      *  If your dialog handles DiskEvents then include it in the EventMask      *  The extra test (event.what == nullEvent) is so we can pass on null     *  events to the app so it can do background processing.     */    if (WaitNextEvent(everyEvent &amp; ~diskMask, &amp;event, 1, NULL) ||      (event.what == nullEvent)) {      if (HandledEvent(          &amp;event,           dialog,           &amp;itemHit,           &amp;done,           renderer,           canceled,           rendererPrivate) == kQ3False) {        if (IsDialogEvent(&amp;event)) {          /*           *  This is kind of wierd. If the event is a nullevent           *  then we want to give the dialog and the app a shot at           *  handling it. Hence the next statement.           */          handled = (TQ3Boolean) (event.what != nullEvent);            if (DialogSelect(&amp;event, &amp;whichDlog, &amp;itemHit) &amp;&amp;               whichDlog == dialog) {            HandleHit(              dialog,               itemHit,               &amp;done,               renderer,               canceled,               rendererPrivate);          }        }                if (!handled) {          /*            *  At this point we have checked for all events           *  that we are interested in. Give the app a shot           *  at the event            *           *  Restore the old Resource file ordering            */          UseResFile(SRgOldResFile);                    /*            *  The app's event-handler            */          (dialogAnchor.clientEventHandler)(&amp;event);                    /*            *  Call me paranoid, but just in case the app           * opens another resource file            */          SRgOldResFile = CurResFile();                    /*            *  Set it back to ours            */          UseResFile(SRgResFile);        }      }    }  } while (done == kQ3False);    DisposeDialog(dialog);      return (kQ3Success);}/*===========================================================================*\ * *  Routine:  SR_LoadDialog() * *  Comments:   *\*===========================================================================*/DialogPtr SR_LoadDialog(  short  dlogId,  void  *rendererPrivate){  short    iType, checkBoxVal;  Rect    iRect;  Handle    iHandle;  DialogPtr  dialog;    dialog = GetNewDialog(dlogId, NULL, (WindowPtr) -1);  GetDialogItem(dialog, SR_DLOG_CHECKBOX, &amp;iType, &amp;iHandle, &amp;iRect);    checkBoxVal = ((TSRPrivate *) rendererPrivate)-&gt;dummyConfigData;  SetControlValue((ControlHandle) iHandle, checkBoxVal);    ShowWindow(dialog);    return (dialog);}/*===========================================================================*\ * *  Routine:  HandledEvent() * *  Comments:   *\*===========================================================================*/TQ3Boolean HandledEvent(  EventRecord        *event,  DialogPtr        dialog,  short          *itemHit,  TQ3Boolean        *done,  TQ3RendererObject    renderer,  TQ3Boolean        *canceled,    void          *rendererPrivate){  short      part;  WindowPtr    whichWindow;  TQ3Boolean    handled = kQ3False;  char      key;  long      menuItem;    switch (event-&gt;what) {    case mouseDown:      part = FindWindow(event-&gt;where, &amp;whichWindow);      switch (part) {        case inDrag: {          handled = kQ3True;          if (whichWindow == dialog) {            DragWindow(              dialog,               event-&gt;where,               &amp;((*GetGrayRgn())-&gt;rgnBBox));          } else {            SysBeep(30);          }          break;        }        case inContent:        case inGrow:        case inGoAway:        case inZoomIn:        case inZoomOut: {              if (whichWindow != dialog) {            handled = kQ3True;            SysBeep(30);          }          break;        }        case inMenuBar: {          handled = kQ3True;          menuItem = MenuSelect(event-&gt;where);          HandleMenuClick(menuItem);          break;        }              }      break;    case keyDown: {      key = (char) (event-&gt;message &amp; charCodeMask);      if (key == '\r' || key == '\3') {        *itemHit = SR_DLOG_OK;        handled = kQ3True;        SimulateButtonClick(dialog, SR_DLOG_OK);        HandleHit(          dialog, *itemHit, done, renderer, canceled, rendererPrivate);      } else if (key == '\33' ||             ((event-&gt;modifiers &amp; cmdKey) &amp;&amp; key == '.')) {        *itemHit = SR_DLOG_CANCEL;        handled = kQ3True;        SimulateButtonClick(dialog, SR_DLOG_CANCEL);        HandleHit(          dialog, *itemHit, done, renderer, canceled, rendererPrivate);              } else if (event-&gt;modifiers &amp; cmdKey) {        menuItem = MenuKey(key);        if (menuItem) {          HandleMenuClick(menuItem);          handled = kQ3True;        }      }      break;    }    case updateEvt: {      if ((DialogPtr) (event-&gt;message) == dialog) {        DrawDefaultButtonOutline(dialog, SR_DLOG_OK);      }      break;    }  }    return (handled);}/*===========================================================================*\ * *  Routine:  HandleMenuClick() * *  Comments:   *\*===========================================================================*/void HandleMenuClick(  long  menuItem){  short       item = LoWord(menuItem);  short      menu = HiWord(menuItem);  MenuHandle    menuH;  Str255      itemText;  if (menuItem)  {    menuH = GetMenuHandle(menu);    GetMenuItemText(menuH, item, itemText);        /*      *  This is ugly.     *  We compare names of the menus because we don't know what the     *  application's Menu IDs are. I am using constant strings this will     *  not work on non English systems. You should proabably load some      *  STR resources and compare against them so that the Renderer can be     *  localized.     */    if (strncmp((char *) (**menuH).menuData, (char *) &quot;\pEdit&quot;, 5) == 0) {      if (strncmp((char *) itemText, (char *) &quot;\pUndo&quot;, 5) == 0) {        /*          *  Handle Undo if supported          */      } else if (strncmp((char *) itemText, (char *) &quot;\pCut&quot;, 4) == 0) {        /*          *  Handle Cut if supported - use DialogCut          */      } else if (strncmp((char *) itemText, (char *) &quot;\pCopy&quot;, 5) == 0) {        /*          *  Handle Copy if supported - use DialogCopy         */      } else if (strncmp((char *) itemText, (char *) &quot;\pPaste&quot;, 6) == 0) {        /*          *  Handle Paste if supported - use DialogPaste         */      } else if (strncmp((char *) itemText, (char *) &quot;\pClear&quot;, 6) == 0) {        /*          *  Handle Clear if supported          */      } else {        /*          *  Nothing else should be selectable in the Edit Menu         *  The calling application should have disabled all others         *  SysBeep or Alert to notify user of error          */        SysBeep(30);      }    } else if (strncmp(          (char *) (**menuH).menuData,           (char *) &quot;\x01\x14&quot;, 2) == 0) {      /*        *  Apple menu was selected. All application specific items       *  in the Apple Menu such as &quot;About...&quot; should have been       *  disabled by the app        */      OpenDeskAcc(itemText);    } else {      /*        *  No other menu should be selectable       *  The calling application should have disabled all others       *  SysBeep or Alert to notify user of error        */      SysBeep(30);    }    HiliteMenu(0);  }}/*===========================================================================*\ * *  Routine:  HandleHit() * *  Comments:   *\*===========================================================================*/TQ3Status HandleHit(  DialogPtr          dialog,  short            itemHit,  TQ3Boolean          *done,  TQ3RendererObject      renderer,  TQ3Boolean          *canceled,    void            *rendererPrivate){  short    iType, checkBoxVal;  Rect    iRect;  Handle    iHandle;    UNUSED(renderer);  switch (itemHit) {    case SR_DLOG_OK:      GetDialogItem(dialog, SR_DLOG_CHECKBOX, &amp;iType, &amp;iHandle, &amp;iRect);      ((TSRPrivate *) rendererPrivate)-&gt;dummyConfigData =         GetControlValue((ControlHandle) iHandle);      *done = kQ3True;      *canceled = kQ3False;      break;    case SR_DLOG_CANCEL:      *done = kQ3True;      *canceled = kQ3True;      break;    case SR_DLOG_CHECKBOX:      GetDialogItem(dialog, SR_DLOG_CHECKBOX, &amp;iType, &amp;iHandle, &amp;iRect);      checkBoxVal = GetControlValue((ControlHandle) iHandle);      SetControlValue((ControlHandle) iHandle, !checkBoxVal);      break;        }    return (kQ3Success);}/*===========================================================================*\ * *  Routine:  SimulateButtonClick() * *  Comments:   *\*===========================================================================*/void SimulateButtonClick(  DialogPtr  dialog,  short    item){  short    iType;  Rect    iRect;  Handle    iHandle;  long    ticks;  GetDialogItem(dialog, item, &amp;iType, &amp;iHandle, &amp;iRect);  HiliteControl((ControlHandle) iHandle, kControlButtonPart);  ticks = TickCount() + 8;    while (TickCount() &lt; ticks) {    /*     *  Spin...     */  }  HiliteControl((ControlHandle) iHandle, 0);  }#endif  /*  WINDOW_SYSTEM_MACINTOSH  */</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/Plug-in__-_Sample_Renderer/listing18.html%3Fid%3DDTS10000120-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/Plug-in__-_Sample_Renderer/listing18.html%3Fid%3DDTS10000120-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/Plug-in__-_Sample_Renderer/listing18.html%3Fid%3DDTS10000120-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
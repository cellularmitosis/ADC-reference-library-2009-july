<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE>Playing From Disk (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.52.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.51.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.54.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=2663"> </A>Playing From Disk</H1><P CLASS="T0.Text0"><A NAME="pgfId=2127"> </A>Use the <TT CLASS="cv">SndStartFilePlay</TT>, <TT CLASS="cv">SndPauseFilePlay</TT>, and <TT CLASS="cv">SndStopFilePlay</TT> functions to manage a continuous play from disk.</P><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=2128"> </A>SndStartFilePlay<A NAME="marker=65"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=2229"> </A><A NAME="marker=1149"> </A><A NAME="marker=1072"> </A>You can call the <TT CLASS="cv">SndStartFilePlay</TT> function to initiate a play from disk.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12335"> </A>FUNCTION SndStartFilePlay (chan: SndChannelPtr; fRefNum: Integer;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resNum: Integer; bufferSize: LongInt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; theBuffer: Ptr; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theSelection: AudioSelectionPtr; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theCompletion: ProcPtr; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async: Boolean): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12337"> </A><TT CLASS="cv">chan</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2230"> </A>A pointer to a valid sound channel. You can pass <TT CLASS="cv">NIL</TT> instead of a pointer to a sound channel if you want the Sound Manager to internally allocate a&nbsp;sound channel in your application's heap zone.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12346"> </A><TT CLASS="cv">fRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2285"> </A>The file reference number of the AIFF or AIFF-C file to play. To play a sound resource rather than a sound file, this field should be 0.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12355"> </A><TT CLASS="cv">resNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2286"> </A>The resource ID number of a sound resource to play. To play a sound file rather than a sound resource, this field should be 0.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12364"> </A><TT CLASS="cv">bufferSize</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2287"> </A> The number of bytes of memory that the Sound Manager is to use for input buffering while reading in sound data. For <TT CLASS="cv">SndStartFilePlay</TT> to execute successfully on the slowest Macintosh computers, use a buffer of at least 20,480 bytes. You can pass the value 0 to instruct the Sound Manager to allocate a buffer of the default size.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12374"> </A><TT CLASS="cv">theBuffer</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2288"> </A>A pointer to a buffer that the Sound Manager should use for input buffering while reading in sound data. If this parameter is <TT CLASS="cv">NIL</TT>, the Sound Manager allocates two buffers, each half the size of the value specified in the <TT CLASS="cv">bufferSize</TT> parameter. If this parameter is not <TT CLASS="cv">NIL</TT>, the buffer should be a nonrelocatable block of size <TT CLASS="cv">bufferSize</TT>.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12383"> </A><TT CLASS="cv">theSelection</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2289"> </A> A pointer to an audio selection record that specifies which portion of a sound should be played. You can pass <TT CLASS="cv">NIL</TT> to specify that the Sound Manager should play the entire sound.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12393"> </A><TT CLASS="cv">theCompletion</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2290"> </A> A pointer to a completion routine that the Sound Manager calls when the sound is finished playing. You can pass <TT CLASS="cv">NIL</TT> to specify that the Sound Manager should not execute a completion routine. This field is useful only for asynchronous play.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12403"> </A><TT CLASS="cv">async</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2291"> </A>A Boolean value that indicates whether the sound should be played asynchronously (<TT CLASS="cv">TRUE</TT>) or synchronously (<TT CLASS="cv">FALSE</TT>). You can play sound asynchronously only if you allocate your own sound channel (using <TT CLASS="cv">SndNewChannel</TT>). If you pass <TT CLASS="cv">NIL</TT> in the <TT CLASS="cv">chan</TT> parameter and <TT CLASS="cv">TRUE</TT> for this parameter, the <TT CLASS="cv">SndStartFilePlay</TT> function returns the <TT CLASS="cv">badChannel</TT> result code.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=2292"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=2228"> </A>The <TT CLASS="cv">SndStartFilePlay</TT> function begins a continuous play from disk on a sound channel. The <TT CLASS="cv">chan</TT> parameter is a pointer to the sound channel. If <TT CLASS="cv">chan</TT> is not <TT CLASS="cv">NIL</TT>, it is used as a valid channel. If <TT CLASS="cv">chan</TT> is <TT CLASS="cv">NIL</TT>, an internally allocated sound channel is used for play from disk. This internally allocated sound channel is not passed back to you. Because <TT CLASS="cv">SndPauseFilePlay</TT> and <TT CLASS="cv">SndStopFilePlay</TT> require a sound-channel pointer, you must allocate your own channel if you wish to use those routines.</P><P CLASS="T1.Text1"><A NAME="pgfId=2294"> </A>The sounds you wish to play can be stored either in a file or in an <TT CLASS="cv">'snd&nbsp;'</TT> resource. If you are playing a file, then <TT CLASS="cv">fRefNum</TT> should be the file reference number of the file to be played and the parameter <TT CLASS="cv">resNum</TT> should be set to 0. If you are playing an <TT CLASS="cv">'snd&nbsp;'</TT> resource, then <TT CLASS="cv">fRefNum</TT> should be set to 0 and <TT CLASS="cv">resNum</TT> should be the resource ID number (not the file reference number) of the resource to play.</P><P CLASS="W.Warning"><A NAME="pgfId=3300"> </A>The <TT CLASS="cv">SndStartFilePlay</TT> function might not play <TT CLASS="cv">'snd&nbsp;'</TT> resources from disk correctly. In particular, the function will not execute correctly if any resource in the resource file containing the <TT CLASS="cv">'snd&nbsp;'</TT> resource you wish to play has been changed through a call to the <TT CLASS="cv">WriteResource</TT> procedure and you have not updated the resource file using the <TT CLASS="cv">UpdateResFile</TT> procedure. To avoid this and other problems, you should use the <TT CLASS="cv">SndStartFilePlay</TT> function to play only sound files. </P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=2457"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=2458"> </A>Because the <TT CLASS="cv">SndStartFilePlay</TT> function moves memory, you should not call it at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3314"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=3315"> </A>The trap macro and routine selector for the <TT CLASS="cv">SndStartFilePlay</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=2516"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=2517"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2392"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=2509"> </A>$0D000008</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=2514"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2471"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=2472"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=2473"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2474"> </A>notEnoughHardwareErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=3243"> </A>-201</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4137"> </A>Insufficient hardware available</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4138"> </A>queueFull</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4139"> </A>-203</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4140"> </A>No room in the queue</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4141"> </A>badChannel</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4142"> </A>-205</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4143"> </A>Channel is corrupt or unusable</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4144"> </A>badFormat</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4145"> </A>-206</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4146"> </A>Resource is corrupt or unusable</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4147"> </A>notEnoughBufferSpace</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4148"> </A>-207</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4149"> </A>Insufficient memory available</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4150"> </A>badFileFormat</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4151"> </A>-208</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=3869"> </A>File is corrupt or unusable, or not AIFF or AIFF-C</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4153"> </A>channelBusy</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4154"> </A>-209</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4155"> </A>Channel is busy</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4156"> </A>buffersTooSmall</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4157"> </A>-210</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4158"> </A>Buffer is too small</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4159"> </A>siInvalidCompression</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4160"> </A>-223</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4161"> </A>Invalid compression type</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=2508"> </A>SEE ALSO</H3><P CLASS="T0.Text0"><A NAME="pgfId=3128"> </A>For an example of how to play a sound file, see the chapter <A target="doc" HREF="imintrosound.htm" CLASS="XRef">&quot;Introduction to Sound on the Macintosh&quot;</A> in this book.</P><P CLASS="T1.Text1"><A NAME="pgfId=2456"> </A>For information on the format of a completion routine, see <A target="doc" HREF="imsoundmgr.5d.htm#30002" CLASS="XRef">&quot;Completion Routines&quot;</A>.<A NAME="marker=66"> </A><A NAME="marker=1110"> </A><A NAME="marker=1211"> </A></P></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=2518"> </A>SndPauseFilePlay<A NAME="marker=846"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=2519"> </A><A NAME="marker=1610"> </A>You can use the <TT CLASS="cv">SndPauseFilePlay</TT> function to toggle the state of a play from disk in progress, just as you might use the pause button on an audiocassette tape player to temporarily pause and then resume play. </P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12414"> </A>FUNCTION SndPauseFilePlay (chan: SndChannelPtr): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12416"> </A><TT CLASS="cv">chan</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2530"> </A>A pointer to a valid sound channel currently processing a play from disk initiated by a call to the <TT CLASS="cv">SndStartFilePlay</TT> function.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3259"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=3260"> </A>The <TT CLASS="cv">SndPauseFilePlay</TT> function suspends the play from disk on the channel specified by the <TT CLASS="cv">chan</TT> parameter if that play from disk is not already paused; the function resumes play if the play from disk is already paused.</P><P CLASS="T1.Text1"><A NAME="pgfId=3301"> </A>The <TT CLASS="cv">SndPauseFilePlay</TT> function is used in conjunction with <TT CLASS="cv">SndStopFilePlay</TT> to control play from disk on a sound channel. Note that this call can be made only if your application has already called <TT CLASS="cv">SndStartFilePlay</TT> with a valid sound channel. You cannot use this function with a synchronous call to <TT CLASS="cv">SndStartFilePlay</TT> because, in that case, program control does not return to the caller until after the sound has completely finished playing.</P><P CLASS="T1.Text1"><A NAME="pgfId=3261"> </A>If the channel specified by the <TT CLASS="cv">chan</TT> parameter is not being used for play from disk, then <TT CLASS="cv">SndPauseFilePlay</TT> returns the result code <TT CLASS="cv">channelNotBusy</TT>. If the channel is busy and paused, then play from disk is resumed. If the channel is busy and the channel is not paused, then play from disk is suspended.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3262"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=3272"> </A>You can call the <TT CLASS="cv">SndPauseFilePlay</TT> function at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3318"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=3319"> </A>The trap macro and routine selector for the <TT CLASS="cv">SndPauseFilePlay</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=3320"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=3321"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2459"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=2510"> </A>$02040008</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3317"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2511"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=2512"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=2513"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=3273"> </A>queueFull</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=3316"> </A>-203</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4162"> </A>No room in the queue</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4163"> </A>badChannel</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4164"> </A>-205</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4165"> </A>Channel is corrupt or unusable</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4166"> </A>channelNotBusy</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4167"> </A>-211</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4168"> </A>Channel not currently used<A NAME="marker=1277"> </A></P></TD></TR></TABLE></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3274"> </A>SndStopFilePlay<A NAME="marker=848"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=3280"> </A>You can use <TT CLASS="cv">SndStopFilePlay</TT> to stop an asynchronous play from disk.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12427"> </A>FUNCTION SndStopFilePlay (chan: SndChannelPtr; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quietNow: Boolean): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12429"> </A><TT CLASS="cv">chan</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=3302"> </A>A pointer to a valid sound channel currently processing a play from disk initiated by a call to the <TT CLASS="cv">SndStartFilePlay</TT> function.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12438"> </A><TT CLASS="cv">quietNow</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=3283"> </A>A Boolean value that indicates whether the play from disk should be stopped immediately (<TT CLASS="cv">TRUE</TT>) or when it completes execution (<TT CLASS="cv">FALSE</TT>).</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3284"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=3285"> </A>The <TT CLASS="cv">SndStopFilePlay</TT> function either can stop an asynchronous play from disk immediately or can take control of the CPU until a play from disk finishes. The <TT CLASS="cv">SndStopFilePlay</TT> function does not return until all asynchronous file I/O calls have completed and any internally allocated memory has been released. If <TT CLASS="cv">async</TT> is <TT CLASS="cv">FALSE</TT>, then <TT CLASS="cv">SndStopFilePlay</TT> lets the sound complete normally and returns only after the sound has completed, all asynchronous file I/O calls have completed, and any internal allocated memory has been released.</P><P CLASS="T1.Text1"><A NAME="pgfId=3313"> </A>For example, you might use the function to stop the playing of a sound file if the user selects an option that turns off sound output while the file is already playing. In that case, you would pass <TT CLASS="cv">TRUE</TT> to <TT CLASS="cv">quietNow</TT>. Alternatively, you might have started a sound playing asynchronously so that you could perform other tasks while the sound plays. But you might then finish those other tasks and want to convert the play from disk into a synchronous play. By passing <TT CLASS="cv">FALSE</TT> to <TT CLASS="cv">quietNow</TT>, you effectively achieve that.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3286"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=3282"> </A>Because the <TT CLASS="cv">SndStopFilePlay</TT> function might move memory, you should not call it at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3322"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=3323"> </A>The trap macro and routine selector for the <TT CLASS="cv">SndStopFilePlay</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=3325"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=4175"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2641"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=3293"> </A>$03080008</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3324"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=3276"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=3277"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=3278"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=3279"> </A>badChannel</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4169"> </A>-205</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4170"> </A>Channel is corrupt or unusable<A NAME="marker=1611"> </A><A NAME="marker=1278"> </A></P></TD></TR></TABLE></DIV></DIV><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.52.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.51.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.54.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
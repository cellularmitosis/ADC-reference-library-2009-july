<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Bypassing MC68000 Addressing Limitations</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING119></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="RTArch-118.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-120.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="RTArch-2.html"><B>Mac OS Runtime Architectures</B></A> / <BR><DD><A HREF="RTArch-115.html"><B>Chapter 10 - Classic 68K Runtime Architecture</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING119-0></A>
<H1><A NAME=MARKER-21-43></A>Bypassing MC68000 Addressing Limitations</H1>
 68K compilers typically generate PC-relative instructions for intrasegment references. This restricts the size of segments to 32 KB because the PC-relative instructions on the MC68000 processor use a 16-bit offset. Similarly, references to addresses expressed as offsets from the address stored in A5 are also limited to 16-bit offsets on the MC68000 processor.<A NAME=MARKER-2-44></A> <P>
 Since references to the jump table are expressed as positive offsets from A5, this effectively limits the size of the jump table to 32 KB.<A NAME=MARKER-2-45></A> References to global variables are expressed as negative offsets from A5, so the size of the global data area is limited to 32 KB as well.<A NAME=MARKER-2-46></A><P>
 In the past, the Resource Manager used to limit resources to 32 KB, so 16-bit offsets were guaranteed to be sufficient.<P>
 <A HREF=#MARKER-9-1>Table 10-1</A> summarizes existing MPW solutions to these limitations. The sections that follow provide detail on how to implement these solutions. The section <A HREF=RTArch-123.html#MARKER-9-53>"32-Bit Everything" (page 10-17)</A> describes a mechanism that allows you to remove all three limits. Which solution you choose depends on the specific needs of your program. <P>
<DL>
<DT><B>Note</B>
<DD>Other development environments may use different methods to work around the 16-bit addressing limitations.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 In general, it is recommended that if you need to remove only one of the limits, you use the solution given for that limit. If you need to remove two or more limits, the 32-bit everything solution is probably your best choice.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-1></A><B>Table 10-1 Classic 68K runtime architecture limits and solutions</B> </CAPTION> <P>
<TH>Problem<TH>Solution<TH>Restrictions and <BR>effect on performance<TR>
<TD>Globals &gt; 32 KB<TD>SC/SCpp <CODE>-model farData </CODE>option<TD>No restrictions. Code is bigger. Must link with <CODE>-model far</CODE> option.<TR>
<TD>&nbsp;<TD>Use assembly language for 32-bit references<TD>No restrictions. <TR>
<TD>Segment &gt; 32 KB<TD>SC/SCpp <CODE>-bigseg</CODE> option<TD>Restricted to single-segment C programs running on 68020 and or higher CPU. <TR>
<TD>&nbsp;<TD>ILink<CODE> -br 68k</CODE> option <TD>No restrictions. <TR>
<TD>&nbsp;<TD>ILink<CODE> -br 020</CODE> option<TD>Program must run on a 68020 or higher.<TR>
<TD colspan=3>&nbsp;<TR>
<TD>Jump table &gt; 32 KB<TD>ILink <CODE>-wrap</CODE> option<TD>No restrictions. It decreases memory available for global data.<TR>
<TD>Everything &gt; 32 KB<TD>See the section <A HREF=RTArch-123.html#MARKER-9-53>"32-Bit Everything" (page 10-17)</A>.<TD>No restrictions. Code is up to 30% bigger.</TABLE>
<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="RTArch-120.html#HEADING120-0">Increasing Global Data Size</A>
<DD>
<DT><A HREF="RTArch-121.html#HEADING121-0">Increasing Segment Size</A>
<DD>
<DT><A HREF="RTArch-122.html#HEADING122-0">Increasing the Size of the Jump Table</A>
<DD>
<DT><A HREF="RTArch-123.html#HEADING123-0">32-Bit Everything</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="RTArch-118.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-120.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="RTArch-3.html">&copy; Apple Computer, Inc.</A><br>11 MARCH 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

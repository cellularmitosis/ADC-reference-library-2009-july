<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>TrackControl(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING332></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-331.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-333.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-297.html"><B>Chapter 5 - Control Manager</B></A> / <A HREF="Toolbox-315.html"><B>Control Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-321.html"><B>Control Manager Routines</B></A> / <A HREF="Toolbox-330.html"><B>Handling Mouse Events in Controls</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING332-0></A>
<H3><A NAME=MARKER-9-419></A>TrackControl</H3>
 <A NAME=MARKER-11-420></A><A NAME=MARKER-2-421></A>To follow and respond to cursor movements in a control and then to determine the control part in which the mouse-up event occurs, use the <CODE>TrackControl</CODE> function.<P>
<PRE>
FUNCTION TrackControl (theControl: ControlHandle; 
                       thePoint: Point; actionProc: ProcPtr)
                       : Integer;
</PRE>
<DL>
<DT><CODE>theControl</CODE>
<DD> A handle to the control in which a mouse-down event occurred.
<DT><CODE>thePoint</CODE>
<DD> A point, specified in coordinates local to the window, where the mouse-down event occurred.
<DT><CODE>actionProc</CODE>
<DD> The action procedure. Typically, you should set this parameter to <CODE>NIL</CODE> <BR>for buttons, checkboxes, radio buttons, and the scroll box of a scroll bar; set this parameter to <CODE>Pointer(-1)</CODE> for pop-up menus; and set this parameter to the pointer to an action procedure for scroll arrows and <BR>gray areas of scroll bars, as well as for any other controls that require <BR>you to define additional actions to take while the user holds down the mouse button.<A NAME=MARKER-2-422></A>
</DL>
<A NAME=HEADING332-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>TrackControl</CODE> function follows the user's cursor movements in a control and provides visual feedback until the user releases the mouse button. The visual feedback given by <CODE>TrackControl</CODE> depends on the control part in which the mouse-down event occurs. When highlighting is appropriate, for example, <CODE>TrackControl</CODE> highlights the control part (and removes the highlighting when the user releases the mouse button). When the user holds down the mouse button while the cursor is in an indicator (such as the scroll box of a scroll bar) and moves the mouse, <CODE>TrackControl</CODE> responds by dragging a dotted outline of the indicator.<P>
 The <CODE>TrackControl</CODE> function returns as its function result the control's part code if the user releases the mouse button while the cursor is inside the control part, or 0 if the user releases the mouse button while the cursor is outside the control part. For control parts, the <CODE>TrackControl</CODE> function returns the same values (represented by the constants inButton, inCheckBox, inUpButton, inDownButton, inPageUp, inPageDown, and inThumb) returned by the <CODE>FindControl</CODE> function, as described on <A HREF=Toolbox-331.html#MARKER-9-415>page 5-82</A>. <P>
 When <CODE>TrackControl</CODE> returns a value other than 0 as its function result, your application should respond as appropriate to a mouse-up event in that control part. When <CODE>TrackControl</CODE> returns 0 as its function result, your application should do nothing. <P>
 If the user releases the mouse button when the cursor is in an indicator such as a scroll box, <CODE>TrackControl</CODE> calls the control's control definition function to reposition the indicator. The control definition function for scroll bars, for example, responds to the user dragging a scroll box by redrawing the scroll box, calculating the control's current setting according to the new relative position of the scroll box, and storing the current setting in the control record. Thus, if the minimum and maximum settings are 0 and 10, and the scroll box is in the middle of the scroll bar, 5 is stored as the current setting. For a scroll bar, your application must then respond by scrolling to the corresponding relative position in the document.<P>
 Generally, you use <CODE>TrackControl</CODE> after using the <CODE>FindControl<DFN> function</DFN></CODE>. In the parameter <CODE>theControl</CODE> of <CODE>TrackControl</CODE>, pass the control handle returned by the <CODE>FindControl</CODE> function, and in the parameter <CODE>thePoint<DFN>, supply the same point you passed to FindControl</DFN></CODE> (that is, a point in coordinates local to the window).<P>
 <A NAME=MARKER-2-423></A>While the user holds down the mouse button with the cursor in one of the standard controls<DFN>, <CODE>TrackControl</CODE></DFN> performs the following actions, depending on the value you pass in the parameter <CODE>actionProc</CODE>. (For other controls, what you pass in this parameter depends on how you define the control.)<P>
<UL>
<LI>If you pass <CODE>NIL</CODE> in the <CODE>actionProc</CODE> parameter, <CODE>TrackControl</CODE> uses no action procedure and therefore performs no additional actions beyond highlighting the control or dragging the indicator. This is appropriate for buttons, checkboxes, radio buttons, and the scroll box of a scroll bar. 
<LI>If you pass a pointer to an action procedure in the <CODE>actionProc</CODE> parameter, you must provide the procedure, and it must define some action that your application repeats as long as the user holds down the mouse button. This is appropriate for the scroll arrows and gray areas of a scroll bar.
<LI>If you pass <CODE>Pointer(-1)</CODE> in the <CODE>actionProc</CODE> parameter, <CODE>TrackControl</CODE> looks in the <CODE>contrlAction</CODE> field of the control record for a pointer to the control's action procedure. This is appropriate when you are tracking the cursor in a pop-up menu. (You can use the <CODE>GetControlAction</CODE> function to determine the value of this field, and you can use the <CODE>SetControlAction</CODE> procedure to change this value.) If the <CODE>contrlAction</CODE> field of the control record contains a procedure pointer, <CODE>TrackControl</CODE> uses the action procedure it points to; if the field of the control record also contains the value <CODE>Pointer(-1)</CODE>, <CODE>TrackControl</CODE> calls the control's control definition function to perform the necessary action; you may wish to do this if you define your own control definition function for a custom control. If the field of the control record contains the value <CODE>NIL</CODE>, <CODE>TrackControl</CODE> performs no action.<A NAME=MARKER-2-424></A><P>
</UL>
<A NAME=HEADING332-16></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 When you need to handle events in alert and dialog boxes, Dialog Manager routines automatically call <CODE>FindControl<DFN> and TrackControl</DFN></CODE>.<P>
<A NAME=HEADING332-18></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The <CODE>TrackControl</CODE> function invokes the Window Manager function <CODE>DragGrayRgn</CODE>, so you can use the global variables <CODE>DragHook</CODE> and <CODE>DragPattern</CODE>.<P>
<A NAME=HEADING332-20></A>
<H5>SEE ALSO</H5>
 See <DFN><A HREF=Toolbox-362.html#MARKER-9-597>"Defining Your Own Action Procedures" beginning on page 5-109</A> for information about an action procedure to specify in the <CODE>actionProc parameter. </CODE></DFN>See <A HREF=Toolbox-360.html#MARKER-9-553>"Defining Your Own Control Definition Function"</A> beginning on <A HREF=Toolbox-360.html#MARKER-9-553>page 5-102</A> for information about creating a control definition function.<P>
 <A HREF=Toolbox-310.html#MARKER-9-214>Listing 5-11 on page 5-32</A>, <A HREF=Toolbox-310.html#MARKER-9-221>Listing 5-12 on page 5-33</A>, <A HREF=Toolbox-311.html#MARKER-9-231>Listing 5-13 on page 5-35</A>, <BR>and <A HREF=Toolbox-312.html#MARKER-9-271>Listing 5-18 on page 5-48</A> illustrate the use of <CODE>TrackControl</CODE> for responding to mouse-down events in, respectively, a button, a pop-up menu, a checkbox, and a <BR>scroll bar.<P>
 See the chapter "Dialog Manager" in this book for more information about including controls in alert boxes and dialog boxes.<A NAME=MARKER-2-425></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-331.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-333.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

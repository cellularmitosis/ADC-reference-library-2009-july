<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Creating Dialog Boxes(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING380></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-379.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-381.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-370.html"><B>Chapter 6 - Dialog Manager</B></A> / <A HREF="Toolbox-378.html"><B>Using the Dialog Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING380-0></A>
<H2><A NAME=MARKER-9-111></A>Creating Dialog Boxes</H2>
 <A NAME=MARKER-2-112></A>To create a dialog box, use the <CODE>GetNewDialog</CODE> or <CODE>NewDialog</CODE> function. You should usually use <CODE>GetNewDialog</CODE>, which takes information about the dialog box from a <BR>dialog (<CODE>'DLOG'</CODE>) resource in a resource file. Like window resources, dialog resources isolate descriptive information from your application code for ease of modification <BR>or translation to other languages. The rest of this section describes how to use <CODE>GetNewDialog</CODE>. Although it's generally not recommended, you can also use the <CODE>NewDialog<DFN> or NewColorDialog</DFN></CODE> function and pass it the necessary descriptive information in individual parameters instead of using a dialog resource.<DFN> See <A HREF=Toolbox-404.html#MARKER-9-451>page 6-118</A> for a description of <CODE>NewDialog and</CODE></DFN> <A HREF=Toolbox-403.html#MARKER-9-443>page 6-115</A> for a description of <CODE>NewColorDialog</CODE>.<P>
 The <CODE>GetNewDialog</CODE> function creates a data structure (called a <B>dialog record</B>) of type <CODE>DialogRecord</CODE> from the information in the dialog resource and returns a pointer to it. A dialog record includes a window record. When you use <CODE>GetNewDialog</CODE>, the Dialog Manager sets the <CODE>windowKind</CODE> field in the window record to <CODE>dialogKind</CODE>. As explained in <A HREF=Toolbox-384.html#MARKER-9-231>"Displaying Alert and Dialog Boxes" beginning on page 6-61</A>, you can use this pointer with Window Manager or QuickDraw routines to display and manipulate the dialog box.<P>
 When you use <CODE>GetNewDialog</CODE>, you pass it the resource ID of the dialog resource, an optional pointer to the memory to use for the dialog record, and the window pointer <CODE>Pointer(-1)</CODE>, which causes the Window Manager to display the dialog box in front of all other windows.<P>
 If you pass <CODE>NIL</CODE> for the memory pointer, the dialog record is allocated in your application's heap. Passing <CODE>NIL</CODE> is appropriate for modal dialog boxes and movable modal dialog boxes, but--if you are creating a modeless dialog box--this can cause your heap to become fragmented. In the case of modeless dialog boxes, therefore, you should allocate your own memory as you would for a window; allocating window memory is described in the chapter "Window Manager" in this book.<P>
 Here's an example of how to create the dialog box shown in <A HREF=#MARKER-9-113>Figure 6-12</A>.<P>
<PRE>
VAR
   theDialog:        DialogPtr;
theDialog := GetNewDialog(kSpellCheckID, NIL, Pointer(-1));
</PRE>
<B>Figure 6-12  <A NAME=MARKER-9-113></A>A simple modal dialog box</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-07.jpg"><P>
 <A NAME=MARKER-2-114></A>This example uses an application-supplied constant (<CODE>kSpellCheckID</CODE>) to specify the resource ID number of a dialog resource. <A HREF=#MARKER-9-115>Listing 6-4</A> shows how this dialog resource appears in Rez input format.<P>
<B>Listing 6-4  <A NAME=MARKER-9-115></A>Rez input for a dialog resource</B><P>
<PRE>
resource 'DLOG' (kSpellCheckID, purgeable) { /*dialog resource*/
   {62, 184, 216, 448},       /*rectangle for dialog box*/
   dBoxProc,                  /*window definition ID for modal dialog box*/
   visible,                   /*display this dialog box immediately*/
   noGoAway,                  /*don't draw a close box*/
   0x0,                       /*initial refCon value of 0*/
   kSpellCheckDITL,           /*use item list with res ID 400*/
   &quot;Spellcheck Options&quot;,      /*title if this were a modeless dialog box*/
   alertPositionParentWindow  /*place over document window*/
};
</PRE>
 The dialog resource contains the following information:<P>
<UL>
<LI>a rectangle, given in global coordinates, that determines the dialog box's <BR>dimensions and, optionally, position; these coordinates specify the upper-left <BR>and lower-right corners
<LI>the window definition ID, which specifies the window definition function and variation code for the type of dialog box
<LI>a constant (either <CODE>visible</CODE> or <CODE>invisible</CODE>) that specifies whether the dialog box should be drawn on the screen immediately<A NAME=MARKER-2-472></A>
<LI>a constant (either <CODE>noGoAway</CODE> or <CODE>goAway</CODE>); use <CODE>goAway</CODE> only to specify a close box in the title bar of a modeless dialog box<A NAME=MARKER-2-117></A>
<LI>a reference value of type <CODE>LongInt</CODE>, which your application may use for any purpose
<LI>the resource ID of the item list resource for the dialog box<A NAME=MARKER-2-118></A>
<LI>a text string used for the title of a modeless or movable modal dialog box<A NAME=MARKER-2-476></A>
<LI>as an option, a constant (either <CODE>alertPositionParentWindow</CODE>, <CODE>alertPositionMainScreen</CODE>, or <CODE>alertPositionParentWindowScreen</CODE>) that tells the Dialog Manager how to position the dialog box (available only to applications running in System 7)<P>
</UL>
 In the example, a rectangle with coordinates (62,184,216,448) specifies the dimensions of the dialog box, and the <CODE>alertPositionParentWindow</CODE> constant causes the Dialog Manager to place the dialog box just below the title bar of the user's document window. If you don't supply a positioning constant, the Dialog Manager places the dialog box at the global coordinates you specify for the dialog box's rectangle. Positioning constants for dialog boxes are explained in <A HREF=Toolbox-384.html#MARKER-9-239>"Positioning Alert and Dialog Boxes" beginning on page 6-62</A>.<P>
 In the example, the <CODE>dBoxProc</CODE> window definition ID is used. Use the following window definition IDs for specifying dialog box types:<A NAME=MARKER-2-374></A>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Window definition ID<TH>Dialog box type<TR>
<TD>dBoxProc<TD>Modal dialog box<A NAME=MARKER-2-1></A><TR>
<TD>movableDBoxProc<TD>Movable modal dialog box<A NAME=MARKER-2-2></A><TR>
<TD>noGrowDocProc<TD>Modeless dialog box<A NAME=MARKER-2-3></A></TABLE>
<P>
 In each case, the Dialog Manager uses the Window Manager to draw the appropriate window frame. <A HREF=Toolbox-373.html#MARKER-9-60>Figure 6-6 on page 6-9</A> shows an example of a modal dialog box drawn with the <CODE>dBoxProc</CODE> window definition ID, <A HREF=Toolbox-373.html#MARKER-9-65>Figure 6-7 on page 6-11</A> shows an example of a movable modal dialog box drawn with the <CODE>movableDBoxProc</CODE> window definition ID, and <A HREF=Toolbox-373.html#MARKER-9-70>Figure 6-8 on page 6-11</A> illustrates a modeless dialog box drawn with the <CODE>noGrowDocProc</CODE> window definition ID. <P>
 <A HREF=#MARKER-9-115>Listing 6-4</A> specifies the <CODE>visible</CODE> constant so that the dialog box is drawn immediately. If you use the <CODE>invisible</CODE> constant, the dialog box is not drawn until your application uses the Window Manager procedure <CODE>ShowWindow</CODE> to display the dialog box.<P>
 Use the <CODE>goAway</CODE> constant only with modeless dialog boxes. For modal dialog boxes and movable modal dialog boxes, use the <CODE>noGoAway</CODE> constant, as shown in the example.<P>
 Notice that because the example does not make use of the reference constant, 0 (<CODE>0x0</CODE>) is provided as a filler. However, you may wish to make use of this constant. For example, your application can store a number that represents a dialog box type, or it can store <BR>a handle to a record that maintains state information about the dialog box or other window types, as explained in the chapter "Window Manager" in this book. You can use the Window Manager procedure <CODE>SetWRefCon</CODE> at any time to change this value in the dialog record for a dialog box, and you can use the <CODE>GetWRefCon</CODE> function to determine its current value.<P>
 <A HREF=#MARKER-9-115>Listing 6-4</A> uses an application-defined constant that specifies the resource ID for the item list. The next section, <A HREF=Toolbox-381.html#MARKER-9-123>"Providing Items for Alert and Dialog Boxes,"</A> describes how to create an item list. <P>
 Supply a text string in your dialog resource when you want a modeless dialog box or a movable modal dialog box to have a title. You can specify an empty string for a title bar that contains no text. The example specifies the string "Spellcheck Options" for code readability but, because the example creates a modal dialog box, no title bar is displayed.<P>
 You can let the Dialog Manager automatically locate the dialog box according <BR>to three standard positions. <A HREF=#MARKER-9-115>Listing 6-4 on page 6-23</A>, for example, specifies the <CODE>alertPositionParentWindow</CODE> constant to position the dialog box over the <BR>document window where the user is working. For details on these standard positions, see <A HREF=Toolbox-384.html#MARKER-9-239>"Positioning Alert and Dialog Boxes" beginning on page 6-62</A>.<A NAME=MARKER-2-267></A><A NAME=MARKER-2-268></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-379.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-381.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

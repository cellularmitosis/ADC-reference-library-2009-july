<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note PR19: Using Laser Prep Routines</title>                                       <meta name="categories" content="Printing"><meta name="week-posted" content="Jun 29, 1987 - Jul 3, 1987"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002640" title="Using Laser Prep Routines"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxPrinting-date.html">Printing</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Printing/index.html" target="_blank">Reference Library > Printing</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note PR19</div>
<div id="pageheadsub">Using Laser Prep Routines</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext">					 					  <A HREF="#Section1">Introduction</A><BR><BR>					   <A HREF="#Section2">How To Check The Laser Prep Dictionary Version</A><BR><BR>					   <A HREF="#Section3">Translating PostScript Files</A><BR><BR>					   <A HREF="#Section4">Printer Independence</A><BR><BR>					   <A HREF="#References">References</A><BR><BR> <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">This technical note addresses the issues involved in depending on theprocedures and constants defined in the Laser Prep dictionary.</p>  <!-- end_intro_text --><!-- begin_date --><h3 align=center>[July 01 1987]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A> <H2>Introduction</h2><p>When you are writing an application that uses PostScript heavily, it is verytempting to call the procedures already defined in the Laser Prep dictionary,rather than taking up the space in the printer's memory with PostScriptprocedures of your own. Or, if a procedure in the dictionary doesn't do whatyou need it to do, it is tempting to go in and change it to do what you reallywant.</p><p>Unfortunately, we cannot guarantee that either the name or the function of aparticular procedure in the dictionary will stay the same when the LaserWriterdriver changes. In addition, some procedures may become obsolete and go awaywhen the driver changes. Since the Laser Prep dictionary is considered part ofthe source for the LaserWriter driver, Apple reserves the right to make anychanges to it that are deemed necessary.</p><p>Because we cannot guarantee the permanence of the contents of the Laser Prepdictionary, relying on its contents can pose a significant compatibilityproblem. If you rely on the procedures defined in the Laser Prep dictionary,your application will have to be revised every time Apple releases a newLaserWriter driver.</p><p>If you feel that you absolutely must use or modify procedures in the Laser Prepdictionary, you must <b>always</b> check the version that is loaded into theprinter before you print. This allows your application to take appropriateaction if the version of the dictionary that has been downloaded to the printerisn't one that you know about.</p><a name="Section2"></a><P><A HREF="#top">Back to top</A></P><h2>How To Check The Laser Prep Dictionary Version</h2><p>To determine the version of Laser Prep that the printer may contain, you haveto communicate with the printer using the Printer Access Protocol (PAP); youcan't just send your query through the LaserWriter driver because there is noway to get an answer back. The object code and documentation for PAP areavailable from Apple's Licensing department.</p><p>To determine whether the dictionary has been downloaded and whether it is theright one, send the following PostScript code to the printer:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    %!PS-Adobe-1.2 Query    %%Title: Query to establish Laser Prep ProcSet version propriety    %%?BeginProcSetQuery: AppleDict md xx    /md where{    /md get /av get cvi xx eq    {(1)}{(2)}ifelse}    {(0)}ifelse = flush    %%?EndProcSetQuery: unknown</pre>	</TD></TR></TABLE></CENTER><p><code>md</code> is the name of the Apple dictionary and <code>xx</code> is the versionnumber you want.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR><code>/av</code> is a constant in the <code>md</code> dictionary whichcontains the dictionary's version number. This is the <b>only</b> object in thedictionary whose name and function are guaranteed not to change.</P></TD></TR></TABLE></CENTER><BR><p>From the printer you will receive a string. If the string returned begins with"%%," it is a <code>Status</code> response. You can ignore it and wait for anotherstring.</p><p>If the response is "0," the dictionary hasn't been downloaded yet; you willneed to determine how to best handle this situation for your application.</p><p>If the response is "1," the printer is loaded with the correct version of thedictionary.</p><p>If the response is "2," then the dictionary exists but it isn't the version youneed. In this case you need to either let the user know, or proceed in asstandard a fashion as possible, without calling or modifying routines containedin the Laser Prep dictionary.</p><P><A HREF="#top">Back to top</A></P><a name="Section3"></a><h2>Translating PostScript Files</h2><h2></h2><p>Some applications interpret the PostScript files that are generated by theLaserWriter driver when the user presses Command-F (generates document only) orCommand-K (generates dictionary and document) after clicking on the <b>OK</b> buttonin the Job dialog. A typical application might translate these PostScript filesinto another page description language.</p><p>This kind of application requires intimate knowledge of the contents of thedictionary in order to be able to do the translation, because it may have toexpand the procedures used to their actual values before it can then translatethe PostScript to another language. This poses a significant compatibilityproblem. Since we cannot guarantee that the contents of the dictionary will notchange, these types of applications will have to be revised every time werelease a new version of the LaserWriter driver. Also, there is no way to knowwhich version of the LaserWriter driver generated the PostScript file theapplication is interpreting. You will have to require that a particular versionof the LaserWriter driver be used to generate the PostScript files that yourapplication will interpret.</p><a name="Section4"></a><P><A HREF="#top">Back to top</A></P><h2>Printer Independence</h2><p>Applications that are written to take advantage of the routines in the LaserPrep dictionary are, of course, highly device dependent. Being device dependentcan drastically reduce your chances of being compatible with futureprinter-type devices. For a more detailed discussion of this issue, pleaserefer to <A HREF = "pr_02.html">Technical Note #122.</a></p><P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><P>The Printing Manager</p><P><i>PostScript Language Reference Manual</i></p><P>Technical Note M.IM.DevIndPrinting -- <A HREF = "pr_02.html">Device-Independent Printing</a></p>         <P><A HREF="#top">Back to top</A></P>         <a name=Downloads></A>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/pr_19.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/pr/pr_19.html%3Fid%3DDTS10002640-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/pr/pr_19.html%3Fid%3DDTS10002640-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/pr/pr_19.html%3Fid%3DDTS10002640-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
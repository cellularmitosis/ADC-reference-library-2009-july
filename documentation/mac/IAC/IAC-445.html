<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>IPCListPorts(IM:IC)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING445></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="IAC-444.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-446.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="IAC-2.html"><B>Interapplication Communication</B></A> / <BR><DD><A HREF="IAC-423.html"><B>Chapter 11 - Program-to-Program Communications Toolbox</B></A> / <A HREF="IAC-434.html"><B>PPC Toolbox Reference</B></A><BR><DL><DD><A HREF="IAC-439.html"><B>PPC Toolbox Routines</B></A> / <A HREF="IAC-444.html"><B>Obtaining a List of Ports</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING445-0></A>
<H3><A NAME=MARKER-9-231></A>IPCListPorts</H3>
 Use the <CODE>IPCListPorts</CODE> function to generate a list of existing ports without displaying a dialog box.<P>
<PRE>
FUNCTION IPCListPorts (pb: IPCListPortsPBPtr; 
                       async: Boolean): OSErr; 
</PRE>
<DL>
<DT><CODE>pb</CODE>
<DD> A pointer to an <CODE>IPCListPorts</CODE> parameter block.
<DT><CODE>async</CODE>
<DD> A value that specifies whether the function is to be executed asynchronously (<CODE>TRUE</CODE>) or synchronously (<CODE>FALSE</CODE>).
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>PPCCompProcPtr<TD>Address of a completion routine<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>Result code<TR>
<TD>--><TD>startIndex<TD>Integer<TD>Index to the port entry list<TR>
<TD>--><TD>requestCount<TD>Integer<TD>Number of port names requested<TR>
<TD><--<TD>actualCount<TD>Integer<TD>Number of port names returned<TR>
<TD>--><TD>portName<TD>PPCPortPtr<TD>Pointer to a <CODE>PPCPortRec</CODE><TR>
<TD>--><TD>locationName<TD>LocationNamePtr<TD>Pointer to a <CODE>LocationNameRec</CODE><TR>
<TD>--><TD>bufferPtr<TD>PortInfoArrayPtr<TD>Pointer to an array of <CODE>PortInfoRec</CODE></TABLE>
</B><P>
<A NAME=HEADING445-6></A>
<H5>DESCRIPTION</H5>
 If your application calls the <CODE>IPCListPorts</CODE> function asynchronously, you must specify in the <CODE>ioCompletion</CODE> field either the address of a completion routine or <CODE>NIL</CODE>. If you set <CODE>ioCompletion</CODE> to <CODE>NIL</CODE>, you should poll the <CODE>ioResult</CODE> field of the PPC parameter block (from your application's main event loop) to determine whether the PPC Toolbox has completed the requested operation. A value in the <CODE>ioResult</CODE> field other than 1 indicates that the call is complete. Note that it is unsafe to poll the <CODE>ioResult</CODE> field at interrupt time since the PPC Toolbox may be in the process of completing a call. See <A HREF=IAC-428.html#MARKER-9-46>"PPC Toolbox Calling Conventions" beginning on page 11-14</A> for detailed information.<P>
 If you call the <CODE>IPCListPorts</CODE> function asynchronously, you must not change any of the fields in the parameter block until the call completes. The port name, location name, and buffer pointed to by <CODE>IPCListPortsPBRec</CODE> are owned by the PPC Toolbox until the call completes. These objects must not be deallocated or moved in memory while the call is in progress.<P>
 The <CODE>startIndex</CODE> field specifies the index to the list of ports on the remote machine from which the PPC Toolbox begins to get the list. In most cases, you'll want to start at the beginning, so set the <CODE>startIndex</CODE> field to 0. The <CODE>requestCount</CODE> field specifies the maximum number of port information records that can fit into your buffer.<P>
 The <CODE>actualCount</CODE> field returns the actual number of entries returned. Your program can use the <CODE>IPCListPorts</CODE> function repeatedly to obtain the entire list of ports. Ports that are not visible to the network are not included in the ports listing on a remote machine. (If you specify <CODE>FALSE</CODE> for the <CODE>networkVisible</CODE> field in the <CODE>PPCOpen</CODE> function, the port is not included in the listing of available ports across a network.)<P>
 The <CODE>portName</CODE> field must contain a pointer to a PPC port record that specifies which PPC ports to list. You can specify particular values in the PPC port record or you can use an equal sign (=) in the name or the <CODE>portTypeStr</CODE> fields as a wildcard to match all port names or port types.<P>
 The <CODE>locationName</CODE> field should contain a pointer to a location name record that designates the computer that contains the PPC ports you want returned. If the <CODE>locationKindSelector</CODE> field in the location name record is <CODE>ppcNoLocation</CODE> or if the <CODE>locationName</CODE> pointer is <CODE>NIL</CODE>, then the location is the local machine. If the <CODE>locationKindSelector</CODE> field in the location name record is <CODE>ppcNBPLocation</CODE>, then the location is a remote machine designated by the location name record's <CODE>nbpEntity</CODE> field.<P>
 The <CODE>IPCListPorts</CODE> function returns an array (list) of port information records in the area of memory pointed to by <CODE>bufferPtr</CODE>. Make sure that the buffer pointed to by the <CODE>bufferPtr</CODE> field is at least <CODE>sizeof(PortInfoRec) * requestCount</CODE>.<A NAME=MARKER-2-232></A><P>
<A NAME=HEADING445-14></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>IPCListPorts</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_PPC<TD>$000A</TABLE>
<P>
 The registers on entry and exit for this routine are
<TABLE BORDER="0" CELLPADDING=3><TH colspan=2>Registers on entry<TR>
<TD>A0<TD>Pointer to a parameter block<TR>
<TD>D0<TD>Selector code</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING445-17></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>notInitErr<TD>-900<TD>PPC Toolbox has not been initialized yet<TR>
<TD>nameTypeErr<TD>-902<TD>Invalid or inappropriate <CODE>locationKindSelector</CODE> in location name<TR>
<TD>noGlobalsErr<TD>-904<TD>System unable to allocate memory, critical error<TR>
<TD>localOnlyErr<TD>-905<TD>Network activity is currently disabled<TR>
<TD>sessTableErr<TD>-907<TD>PPC Toolbox is unable to create a session<TR>
<TD>noResponseErr<TD>-915<TD>Unable to contact application<TR>
<TD>badPortNameErr<TD>-919<TD>PPC port record is invalid<TR>
<TD>networkErr<TD>-925<TD>An error has occurred in the network<TR>
<TD>badLocNameErr<TD>-931<TD>Location name is invalid</TABLE>
</H5>
<A NAME=HEADING445-18></A>
<H5>SEE ALSO</H5>
 For an example of the use of the <CODE>IPCListPorts</CODE> function, see <A HREF=IAC-429.html#MARKER-9-101>Listing 11-5 on page 11-28</A>. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="IAC-444.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-446.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="IAC-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

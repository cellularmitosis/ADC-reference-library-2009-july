<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="GoLive CyberStudio 3">		<title>EOClassDescription Concepts</title>		<meta http-equiv="Content-Style-Type" content="text/css">	</head>	<body bgcolor="white">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path -->		<a href="../../EOControlTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <a name="EOClassDescription"></a><a name="elementId-7458"></a><a name="pgfId-7447"></a>		<div class="Other-Reference">			<h1><font color="#000066"><a name="NS_DEV_DOCFOR:objc_class:EOClassDescription"></a>EOClassDescription.Concepts</font></h1>			<p><span class="Section"><a name="pgfId-6309"></a>&nbsp;</span></p>			<div class="Head1">				<h2><span class="Section"><a name="BGGCGBEI"></a><a name="elementId-7684"></a>How Does It Work?</span></h2>			</div>			<p class="Para"><span class="Section"><a name="pgfId-6310"></a>As noted above, Enterprise Objects Framework implements a default subclass of EOClassDescription in EOAccess, EOEntityClassDescription. In the typical scenario in which an enterprise object has a corresponding model file, a particular operation (such as validating a value) results in the broadcast of an EOClassDescriptionNeeded... notification (an or an ). When an EOModel object receives such a notification, it registers the metadata (class description) for the EOEntity on which the enterprise object is based. (EOModel and EOEntity are defined in EOAccess.)</span></p>			<p class="Para"><span class="Section"><a name="pgfId-6317"></a>An enterprise object takes advantage of the metadata registered for it by using the EOClassDescription-related methods defined in the EOEnterpriseObject interface (and implemented in EOCustomObject and EOGenericRecord). Primary among these methods is , which returns the class description associated with the enterprise object. Through this class description the enterprise object has access to all of the information relating to its entity in a model file.</span></p>			<p class="Para"><span class="Section"><a name="pgfId-6321"></a>In addition to methods that return information based on an enterprise object's class description, the EOClassDescription-related methods the interface defines include methods that are automatically invoked when a particular operation occurs. These include validation methods and methods that are invoked whenever an enterprise object is inserted or fetched.</span></p>			<p class="Para"><span class="Section"><a name="pgfId-6322"></a>All of this comes together in your running application. When a user tries to perform a particular operation on an enterprise object (such as attempting to delete it), the EOEditingContext sends these validation messages to your enterprise object, which in turn (by default) forwards them to its EOClassDescription. Based on the result, the operation is either accepted or refused. For example, referential integrity constraints in your model might state that you can't delete a department object that has employees. If a user attempts to delete a department that has employees, an exception is returned and the deletion is refused.</span></p>			<p><span class="Section"><a name="pgfId-6324"></a>&nbsp;</span></p>			<div class="Head1">				<h2><span class="Section"><a name="BGGCHAGF"></a><a name="elementId-7690"></a>Using EOClassDescription</span></h2>			</div>			<p class="Para"><span class="Section"><a name="pgfId-6325"></a>For the most part, you don't need to programmatically interact with EOClassDescription. It extends the behavior of your enterprise objects transparently. However, there are two cases in which you do need to programmatically interact with it: </span></p>			<div class="List-Bullet">				<span class="Section"><a name="elementId-7764"></a><a name="pgfId-6326"></a>&nbsp;</span> 				<p class="Item"><span class="Section">When you override EOClassDescription-related EOEnterpriseObject methods in an enterprise object class. These methods are used to perform validation and to intervene when enterprise objects based on EOModels are created and fetched. (The EOModel class is defined in EOAccess.) For objects that don't have EOModels, you can override a different set of EOEnterpriseObject methods; this is described in more detail in the section <a href="#BAABFICB" class="XRef">See Working with Objects That Don't Have EOModels</a>.</span></p>			</div>			<p><span class="Section"><span class="Section"><a name="pgfId-6331"></a>&nbsp;</span></span></p>			<div class="Head2">				<h2><span class="Section"><span class="Section"><a name="elementId-7670"></a>Overriding Methods in an Enterprise Object</span></span></h2>			</div>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6332"></a><span class="Section">As described above, EOEnterpriseObject defines several EOClassDescription-related methods. It's common for enterprise object classes to override the following methods to either perform validation, to assign default values (), or to provide additional initialization to newly fetched objects ()</span>.</span></span></p>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6346"></a>For example, an enterprise object class can implement a <span class="methodName">validateForSave</span> method that checks the values of salary and jobLevel properties before allowing the values to be saved to the database:</span></span></p>			<div class="CodeLines-Container">				<span class="Section"><span class="Section"><a name="elementId-23113"></a><a name="pgfId-23123"></a>&nbsp;</span></span> 				<pre><blockquote><span class="Section"><span class="Section">public void validateForSave() throw EOValidation.Exception {</span></span><span class="Section"><span class="Section"><a name="pgfId-23128"></a>if (salary &gt; 1500 &amp;&amp; jobLevel &lt; 2) {</span></span><span class="Section"><span class="Section"><a name="pgfId-23133"></a>throw new EOValidation.Exception(</span></span><span class="Section"><span class="Section"><a name="pgfId-23138"></a>&quot;The salary is too high for that position!&quot;);</span></span><span class="Section"><span class="Section"><a name="pgfId-23143"></a>}</span></span><span class="Section"><span class="Section"><a name="pgfId-23148"></a>// pass the check on to the EOClassDescription</span></span><span class="Section"><span class="Section"><a name="pgfId-23154"></a>super.validateForSave();</span></span><span class="Section"><span class="Section"><a name="pgfId-23428"></a>}</span></span></blockquote></pre>			</div>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-22784"></a>For more discussion of this subject, see the chapter &quot;Designing Enterprise Objects&quot; in the <span class="bookName">Enterprise Objects Framework Developer's Guide</span> , and the interface specification.</span></span></p>			<p><span class="Section"><span class="Section"><a name="pgfId-6353"></a>&nbsp;</span></span></p>			<div class="Head2">				<h2><span class="Section"><span class="Section"><a name="BAABFICB"></a><a name="elementId-7675"></a>Working with Objects That Don't Have EOModels</span></span></h2>			</div>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6354"></a>Although an EOModel is the most common source of an EOClassDescription for a class, it isn't the only one. Objects that don't have an EOModel can implement EOClassDescription methods directly as instance methods, and the rest of the Framework will treat them just as it does enterprise objects that have this information provided by an external EOModel.</span></span></p>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6355"></a>There are a few reasons you might want to do this. First of all, if your object implements the methods , , , and , EOEditingContexts can snapshot the object and thereby provide undo for it.</span></span></p>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-22841"></a>Secondly, you might want to implement EOClassDescription's validation or referential integrity methods to add these features to your classes.</span></span></p>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6371"></a>Implementing EOClassDescription methods on a per-class basis in this way is a good alternative to creating a subclass of EOClassDescription. </span></span></p>			<p><span class="Section"><span class="Section"><a name="pgfId-6372"></a>&nbsp;</span></span></p>			<div class="Head2">				<h2><span class="Section"><span class="Section"><a name="elementId-7680"></a>Creating a Subclass of EOClassDescription</span></span></h2>			</div>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6373"></a>You create a subclass of EOClassDescription when you want to use an external source of information other than an EOModel to extend your objects. Another possible scenario is if you've added information to an EOModel (such as in its user dictionary) and you want that information to become part of your class description--in that case, you'd probably want to create a subclass of the access layer's EOEntityClassDescription.</span></span></p>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6374"></a>When you create a subclass of EOClassDescription, you only need to implement the methods that have significance for your subclass.</span></span></p>			<p class="Para"><span class="Section"><span class="Section"><a name="pgfId-6375"></a>If you're using an external source of information other than an EOModel, you need to decide when to register class descriptions, which you do by invoking the method . You can either register class descriptions in response to a EOClassDescriptionNeeded... notification (an or an ), or you can register class descriptions at the time you initialize your application (in other words, you can register all potential class descriptions ahead of time). The default implementation in Enterprise Objects Framework is based on responding to the EOClassDescriptionNeeded... notifications. When an EOModel receives one of these notifications, it supplies a class description for the specified class or entity name by invoking </span></span></p>			<p><span class="Section"><a name="pgfId-6388"></a>&nbsp;</span></p>			<div class="Head1">				<h2><span class="Section"><a name="BGGBDFJI"></a><a name="elementId-7695"></a>EOEntityClassDescription</span></h2>			</div>			<p class="Para"><span class="Section"><a name="pgfId-6389"></a>There are only three methods in EOClassDescription that have meaningful implementations (that is, that don't either return null or simply return without doing anything): , , and . The default behavior of the rest of the methods in Enterprise Objects Framework comes from the implementation in the access layer's EOClassDescription subclass EOEntityClassDescription. For more information, see the EOEntityClassDescription class specification.</span></p>			<p><span class="Section"><a name="pgfId-6399"></a>&nbsp;</span></p>			<div class="Head1">				<h2><span class="Section"><a name="BGGCCHCB"></a><a name="elementId-7700"></a>The EOClassDescription's Delegate</span></h2>			</div>			<p class="Para"><span class="Section"><a name="pgfId-6400"></a>You can assign a delegate to the EOClassDescription class. EOClassDescription sends the message to its delegate when delete propagation is about to take place for a particular object. The delegate can either allow or deny the operation for a specified relationship key. For more information, see the method description for.</span></p>		</div>		<p>&copy; 2001 Apple Computer, Inc. (Last Published April 19, 2001)</p>		<p><a href="../../EOControlTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> 	<!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
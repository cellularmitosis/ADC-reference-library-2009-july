<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Bindings Programming Topics: Creating a Master-Detail Interface</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating a Master-Detail Interface"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002090" title="Creating a Master-Detail Interface"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../index.html" target="_top">Cocoa Bindings Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/NSUserDefaultsController.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="images.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002090-BCICADHC" title="Creating a Master-Detail Interface"></a><hr /><H1>Creating a Master-Detail Interface</H1>

<p>This article explains how to use bindings to implement a basic master-detail interface. In the master interface portion, a table view is used to display your collection of objects. In the detail interface portion, other views are used to display the selected object. This article contains examples of binding table columns to array controllers.</p>
<p>A master-detail interface can be extended in a variety of ways that are not fully covered in this article. In particular, there are many aspects of a table view that work seamlessly with Cocoa bindings. Refer to these other articles for specific tasks:</p>
<ul class="ul"><li class="li"><p><span class="content_text"><a href="images.html#//apple_ref/doc/uid/20002300-BCICADHC">“Displaying Images Using Bindings”</a></span> describes the various options used when displaying images in columns and contains an example of a custom value transformer.</p></li>
<li class="li"><p><span class="content_text"><a href="onerelation.html#//apple_ref/doc/uid/20002301-BCICADHC">“Implementing To-One Relationships Using Pop-Up Menus”</a></span> explains how to implement editable to-one relationship as pop-up menus.</p></li>
<li class="li"><p><span class="content_text"><a href="filtering.html#//apple_ref/doc/uid/20002302-BCICADHC">“Filtering Using a Custom Array Controller”</a></span> explains how to add a search field to the master interface in order to filter the objects it displays.</p></li></ul>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="masterdetail.html#//apple_ref/doc/uid/20002090-119367">What’s a Master-Detail Interface?</a>
				
			<br/>
			
        
			
			
				<a href="masterdetail.html#//apple_ref/doc/uid/20002090-119375">Creating Models</a>
				
			<br/>
			
        
			
			
				<a href="masterdetail.html#//apple_ref/doc/uid/20002090-119414-BBCFCJBH">Creating Views</a>
				
			<br/>
			
        
			
			
				<a href="masterdetail.html#//apple_ref/doc/uid/20002090-119467-BBCFIAHJ">Creating Controllers</a>
				
			<br/>
			
        
			
			
				<a href="masterdetail.html#//apple_ref/doc/uid/20002090-119523-BBCJBJDF">Binding Controllers to Models</a>
				
			<br/>
			
        
			
			
				<a href="masterdetail.html#//apple_ref/doc/uid/20002090-121300-BBCBCJHA">Binding Views to Controllers</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002090-119367" title="What&acirc;&#128;&#153;s a Master-Detail Interface?"></a><h2>What’s a Master-Detail Interface?</h2>
<p>In a <strong>master-detail interface</strong>, the user can select objects from a list of objects and inspect the selected objects. The <strong>master interface</strong> displays the collection of objects, and the <strong>detail interface</strong> implements an inspector of the selected object. Whenever the user changes the selection in the master interface, the detail interface is updated to show the new selection. If no object is selected, the detail interface displays nothing or disables itself (if it is editable). If multiple objects are selected (assuming multiple selection is allowed), the detail interface is disabled or it applies to all selected objects. Typically, such an interface also allows users to add and remove objects from the collection.</p>
<p>What components you use to implement a master-detail interface depend on your application. Often, the master interface is implemented by a table view and the detail interface is a collection of views located above or below the master interface. <span class="content_text">Figure 1</span> shows a master-detail interface in a media asset application. In this example, the table view displays a collection of media objects and the views below display the properties of the selected media object.</p>
<br/><div><a name="//apple_ref/doc/uid/20002090-120150-BBCBBGAE" title="Figure 1A master-detail interface"></a><p><a name="//apple_ref/doc/uid/20002090-120150" title="Figure 1A master-detail interface"></a><strong>Figure 1&nbsp;&nbsp;</strong>A master-detail interface</p>
<img src = "../art/ma_masterdetail_callouts.gif" alt = "" width="436" height="390"></div><br/>
<a name="//apple_ref/doc/uid/20002090-119375" title="Creating Models"></a><h2>Creating Models</h2>
<p>This article assumes that you have already designed your model classes, the objects that encapsulate your application data and provide methods to operate on that data. A master-detail interface is used to display a collection of model objects. Therefore, your root model object is expected to be a collection of these objects. </p>
<p>For example, <span class="content_text">Figure 2</span> illustrates the object diagram of the models in a media asset application. In this example, assume the application uses a document-based architecture in which MyDocument (the File’s Owner of the <code>MyDocument.nib</code> file) has a <code>mediaAssets</code> instance variable that is initialized to an array of Media objects.</p>
<br/><div><a name="//apple_ref/doc/uid/20002090-120169-BBCJDJCG" title="Figure 2An object model"></a><p><a name="//apple_ref/doc/uid/20002090-120169" title="Figure 2An object model"></a><strong>Figure 2&nbsp;&nbsp;</strong>An object model</p><img src = "../art/mediaassetmodel.gif" alt = "" width="338" height="263"></div><br/>
<a name="//apple_ref/doc/uid/20002090-119414" title="Creating Views"></a><a name="//apple_ref/doc/uid/20002090-119414-BBCFCJBH" title="Creating Views"></a><h2>Creating Views</h2>
<p>The master interface shown in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-120150-BBCBBGAE">Figure 1</a></span> uses a table view in which each column in the table corresponds to a property of the displayed objects. Note that the table view displays attributes such as the title and date, as well as relationships such as the author. The author property is a to-one relationship (see <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-120169-BBCJDJCG">Figure 2</a></span>) in which the destination object is a Person object. You can display to-one relationships in a variety of ways. For example, the master interface displays only the author’s last name. The detail interface lets you select the author from a pop-up menu.</p>
<p>Using Interface Builder, lay out your master-detail interface similar to <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-120150-BBCBBGAE">Figure 1</a></span>. In this example, an image cell was dragged to the Image column to display a scaled version of the media image and a date formatter was dragged to the Date column. The Author column displays the last name of the authors but could be configured to display a menu as well by dragging a pop-up menu cell, NSPopUpButtonCell, to the Author column. </p>
<a name="//apple_ref/doc/uid/20002090-119467" title="Creating Controllers"></a><a name="//apple_ref/doc/uid/20002090-119467-BBCFIAHJ" title="Creating Controllers"></a><h2>Creating Controllers</h2>
<p>Next you need to connect your views to your models via a controller. NSArrayController is specifically designed to manage selectable collections of objects. For this reason, it is ideal for implementing a master-detail interface. After you create an array controller, you specify its content to be your collection of model objects. If the array controller is editable, it can also create instances of models and add them to the collection. For this to work, you also need to tell the array controller the class name the entity it is managing.</p>
<p>Follow these steps to create and configure an array controller for a master-detail interface:</p>
<ol class="ol"><li class="li"><p>Create an array controller by dragging an NSArrayController from the Interface Builder Controllers palette to your nib file, and optionally change the name of the controller. For example, change the name to <code>MediaAssetsController</code>.</p></li>
<li class="li"><p>Enter the class name of your model in the Object Class Name field on the Attributes pane of the Info window as shown in <span class="content_text">Figure 3</span>. In the media asset application example, you would enter Media as the class name.</p></li>
<li class="li"><p>Deselect Editable on the Attributes pane if you don’t want the user to edit the models, or add and remove them from the collection.</p></li></ol>
<br/><div><a name="//apple_ref/doc/uid/20002090-120742-BBCGFAAG" title="Figure 3An array controller Attributes pane"></a><p><a name="//apple_ref/doc/uid/20002090-120742" title="Figure 3An array controller Attributes pane"></a><strong>Figure 3&nbsp;&nbsp;</strong>An array controller Attributes pane</p>
<img src = "../art/md_arrayctlr_attrpane.gif" alt = "" width="253" height="345"></div><br/>
<a name="//apple_ref/doc/uid/20002090-119523" title="Binding Controllers to Models"></a><a name="//apple_ref/doc/uid/20002090-119523-BBCJBJDF" title="Binding Controllers to Models"></a><h2>Binding Controllers to Models</h2>
<p>Each view and controller class exposes a set of bindings. You can inspect the bindings of an object using Interface Builder by selecting it and displaying the Bindings pane in the Info window. Select your array controller in the nib file and display its bindings as shown in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-123677-BBCGAJHH">Figure 4</a></span>.</p>
<p>You specify the content of an array controller by configuring its <code>contentArray</code> binding. For example, assuming the File’s Owner maintains a collection of Media objects called <code>mediaAssets</code>, you would configure the <code>contentArray</code> binding as follows:</p>
<ol class="ol"><li class="li"><p>Set the <code>Bind to</code> aspect to the object that maintains the collection of model objects (for example, the File’s Owner).</p></li>
<li class="li"><p>Leave the <code>Controller Key</code> blank.</p></li>
<li class="li"><p>Set the <code>Model Key Path</code> to the name of the array (for example, <code>mediaAssets</code>).</p></li></ol>
<p><span class="content_text">Figure 4</span> shows what the Bindings pane should look like when the <code>contentArray</code> binding is revealed.</p>
<br/><div><a name="//apple_ref/doc/uid/20002090-123677-BBCGAJHH" title="Figure 4An array controller Bindings pane"></a><p><a name="//apple_ref/doc/uid/20002090-123677" title="Figure 4An array controller Bindings pane"></a><strong>Figure 4&nbsp;&nbsp;</strong>An array controller Bindings pane</p>
<img src = "../art/md_arrayctlr_bpane.gif" alt = "" width="253" height="345"></div><br/>
<p>Now this controller is configured to manage a collection of Media objects including adding and removing Media objects from the array. Go back to the Attributes pane if you want to change the default behavior of this controller—deselect Editable if you don’t want the user to edit the collection.</p>
<a name="//apple_ref/doc/uid/20002090-121300" title="Binding Views to Controllers"></a><a name="//apple_ref/doc/uid/20002090-121300-BBCBCJHA" title="Binding Views to Controllers"></a><h2>Binding Views to Controllers</h2>
<p>Next, connect your views to your array controller by configuring the bindings of your view objects—bind each view in the master and detail interfaces to the array controller. </p>
<p>Setting some of these bindings can be complex if, for example, you want to represent an editable to-one relationship. This article covers the most common types of value bindings. See <span class="content_text"><a href="images.html#//apple_ref/doc/uid/20002300-BCICADHC">“Displaying Images Using Bindings”</a></span> and <span class="content_text"><a href="onerelation.html#//apple_ref/doc/uid/20002301-BCICADHC">“Implementing To-One Relationships Using Pop-Up Menus”</a></span> for examples of more complex bindings.</p>
<p>In general, it helps to remember that most views that display some content have a binding called <code>value</code> or a binding that contains the word “value.” </p>
<p>Also, because you bind a view to a controller, you need to be familiar with the properties of controllers. These are the primary properties of an array controller that you typically use as the value of the <code>Controller Key</code> aspect:</p>
<ul class="ul"><li class="li"><p><code>arrangedObjects</code>—specifies the collection of objects being displayed.</p></li>
<li class="li"><p><code>selection</code>—specifies the selected object in <code>arrangedObjects</code>.</p></li>
<li class="li"><p><code>selectedObjects</code>—specifies the selected objects in <code>arrangedObjects</code> for a multiple selection.</p></li></ul>
<a name="//apple_ref/doc/uid/20002090-122161" title="Binding the Master Interface"></a><a name="//apple_ref/doc/uid/20002090-122161-BBCIBBGC" title="Binding the Master Interface"></a><h3>Binding the Master Interface</h3>
<p>In the master interface, you actually configure the bindings of the table columns, not the bindings of a table view. Even if you use a special type of cell in the table column, for example, an image cell or NSPopUpButtonCell, you configure the table column, not the cell. The bindings for an NSTableColumn may change depending on its cell.</p>
<p>In this example, each row in the table view needs to correspond to a single Media object, and each column needs to display a property of that Media object. To display properties, you first select a table column in the table view, display the Bindings pane, and reveal the <code>value</code> binding. You will then bind the table column to the controller’s <code>arrangedObjects</code> key because you are specifying the contents of the entire column, not a single cell. Configure each <code>value</code> binding to display a property of the Media object as follows:</p>
<ol class="ol"><li class="li"><p>Set the <code>Bind to</code> aspect to your array controller object. For example, <code>MediaAssetsController</code>. </p></li>
<li class="li"><p>Set the <code>Controller Key</code> to <code>arrangedObjects</code> (the collection of objects being displayed).</p></li>
<li class="li"><p>Set the <code>Model Key Path </code>to the property you want to appear in that column. For example, in the media asset application, set the <code>Model Key Path</code> to <code>date</code> in the Date column.</p></li></ol>
<p><span class="content_text">Figure 5</span> shows what the Bindings pane should look like when the <code>value</code> binding of the Title column is revealed.</p>
<br/><div><a name="//apple_ref/doc/uid/20002090-123806-BBCIIFAA" title="Figure 5NSTableColumn Bindings pane"></a><p><a name="//apple_ref/doc/uid/20002090-123806" title="Figure 5NSTableColumn Bindings pane"></a><strong>Figure 5&nbsp;&nbsp;</strong>NSTableColumn Bindings pane</p>
<img src = "../art/md_tablecol_bpane.gif" alt = "" width="252" height="345"></div><br/>
<p>In the case of the author property, you can set the <code>Model Key Path</code> to <code>author.lastname</code> if you want to simply display the last name. However, by default column cells are editable, so when you run your application, users will be able to change the author’s last name by editing the text in the Author column. If you don’t want this behavior, select the column and deselect Editable on the Attributes pane in the Info window. </p>
<p>Note that some Cocoa views already display lists of objects that work well with key-value coding. The <code>Controller Key</code> and <code>Model Key Path</code> aspects of a binding are concatenated to retrieve the value from the bound object. In the case of a table column, the <code>Controller Key</code> identifies an array; therefore the returned value is an array. For example, the Author table column uses the <code>arrangedObjects.author.lastname</code> key path to get an array of last names, instances of NSString, from the bound object.</p>
<a name="//apple_ref/doc/uid/20002090-124125" title="Binding the Detail Interface"></a><h3>Binding the Detail Interface</h3>
<p>You bind the views in the detail interface similarly to the way you bind the master interface except that you set the <code>Controller Key</code> for each binding to <code>selection</code>, the currently selected object.</p>
<p>For example, you configure the <code>value</code> binding for the Title text field in the detail interface depicted in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-120150-BBCBBGAE">Figure 1</a></span> as follows:</p>
<ol class="ol"><li class="li"><p>Set the <code>Bind to</code> aspect to your array controller object. For example, <code>MediaAssetsController</code>. </p></li>
<li class="li"><p>Set the <code>Controller Key</code> to <code>selection</code> (the currently selected object).</p></li>
<li class="li"><p>Set the <code>Model Key Path </code>to the property you wish displayed in that view. For example, <code>title</code>.</p></li></ol>
<p></p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/NSUserDefaultsController.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="images.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-03-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/CocoaBindings/Tasks/masterdetail.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/CocoaBindings/Tasks/masterdetail.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/CocoaBindings/Tasks/masterdetail.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

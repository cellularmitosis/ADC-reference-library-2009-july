<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note PR525: QuickDraw GX Printing Q&amp;As</title><meta name="categories" content="Printing"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002649" title="QuickDraw GX Printing Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxPrinting-date.html">Printing</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Printing/index.html" target="_blank">Reference Library > Printing</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note PR525</div>
<div id="pageheadsub">QuickDraw GX Printing Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">QuickDraw GX printing extensions and creator types</A><BR><BR>	<A HREF="#Section2">NewMessageGlobals and global data</A><BR><BR><A HREF="#Section3">QuickDraw GX LaserWriter driver produces<BR> "portable" PostScript</A><BR><BR><A HREF="#Section4">QuickDraw GX PostScript Level 2 features used</A><BR><BR><A HREF="#Section5">QuickDraw GX printer drivers and color option</A><BR><BR>				 <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p> <!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1990]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name="Section1"></a><h2>QuickDraw GX printing extensions and creator types</h2><P>Date Written:   5/3/93</p><P>Last reviewed: 7/2/93</p><p>A QuickDraw GX printing extension I've already written works fine, but when Iinstall my latest creation, it doesn't show up in the print dialog - only my oldprinting extension does. Both extensions are the same except for a few lines ofcode in their gxDespoolPage message overrides. What's going on?</p> <P>Your printing extensions shouldn't have the same creator type. QuickDraw GXrequires unique creator types for drivers and printing extensions, just as theFinder does for applications. A creator type must be unique because QuickDrawGX uses it to build its chain of message handlers. If two printing extensionshave the same creator, there's no way to determine which is which in the chain.You can register creator types for your printer drivers and printing extensionswith the Developer Support Center (AppleLink DEVSUPPORT).</p><a name="Section2"></a><P><A HREF="#top">Back to top</A></P><h2>NewMessageGlobals and global data</h2><P>Date Written:  2/1/93</p><P>Last reviewed: 7/2/93</p><p>Why can't I get <code>NewMessageGlobals</code> to work in my <code>gxInitialize</code> message for myQuickDraw GX printing extension? The global data I try to initialize isn'tbeing accessed correctly.</p> <P>You shouldn't call <code>NewMessageGlobals</code> from any routine in which you access yourglobal data. Otherwise, because of optimization that your compiler may perform,the data references can be invalid. Instead, use an approach like this:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>extern long A5Size(void);extern void A5Init(void *);typedef    struct GlobalType {    StringHandle    aString;} GlobalType;GlobalType    myGlobals;/* This routine sets the initial values of our global data. */OSErr InitGlobalData(){    OSErr    err;    // Initialize our globals.    myGlobals.aString = GetString(r_myStringID);    err = ResError();    if (!err) DetachResource(myGlobals.aString);    return err;}/* Our override for the gxInitialize message. */OSErr MyInitialize(){    OSErr    err;    // Create an A5 world, then go initialize our global data.    err = NewMessageGlobals(A5Size(), A5Init());    if (!err) err = InitGlobalData();    return err;</pre>	</TD></TR></TABLE></CENTER><p>A detailed explanation of the problem accompanies the Kabooms printingextension sample on the Developer CD.</p><a name="Section3"></a><P><A HREF="#top">Back to top</A></P><h2>QuickDraw GX LaserWriter driver produces "portable" PostScript</h2><P>Date Written:  11/17/92</p><P>Last reviewed: 7/2/93</p><p>When a QuickDraw GX PostScript printer driver generates a file, will it workfor Level 1 and Level 2 printers?</p> <P>The LaserWriter driver bundled with QuickDraw GX produces a flavor ofPostScript that we call "portable." This flavor is meant to work on the widestrange of printing devices, be they Level 1 or 2, color or black and white.</p><a name="Section4"></a><P><A HREF="#top">Back to top</A></P><h2>QuickDraw GX PostScript Level 2 features used</h2><P>Date Written:  11/17/92</p><P>Last reviewed: 7/2/93</p><p>What PostScript Level 2 features does the QuickDraw GX printing mechanism takeadvantage of?</p> <P>The Level 2 features used in QuickDraw GX mostly have to do with patterns,text, and bitmaps:</p><ul type="disc">	<li>QuickDraw GX patterns are converted into Level 2 pattern dictionaries when going to a Level 2 printer. The actual PostScript code emitted by the driver differs little with respect to patterns when going to Level 1 or Level 2. However, the procedures defined in the header do something entirely different on a Level 2 printer.</li>	<li>Line layout in QuickDraw GX takes advantage of the xshow, yshow, and xyshow operators when it makes sense to do so.</li>	<li>The Level 2 rectangle operators are used in Level 2, though this happens in the procedures defined in the header rather than in PostScript code from the driver.</li>	<li>On Level 2 printers, the indexed color spaces are used for printing bitmaps up to eight bits deep.</li>	<li>The plan is to use Level 2 device-independent color when possible.</li></ul><P><A HREF="#top">Back to top</A></P><a name="Section5"></a><h2>QuickDraw GX printer drivers and color option</h2><P>Date Written:   9/14/92</p><P>Last reviewed: 7/2/93</p><p>The LaserWriter driver before the QuickDraw GX version has an option to printin Color/Grayscale or Black &amp; White. Why isn't this option in the QuickDrawGX LaserWriter driver?</p> <P>The Color/Grayscale option was added to the LaserWriter driver only forcompatibility reasons. At the time, some applications couldn't deal with thecolor option (specifically with <code>cGrafPorts</code>), so a Black &amp; White mode wasalso provided. The Black &amp; White mode exhibited the same functionality asthe earlier LaserWriter driver 5.2.</p><p>Because most applications are color compatible now, the option was removed fromthe QuickDraw GX printer drivers. Some people reported that the option let themprint faster when they chose Black &amp; White. This was true because of quirksin the earlier LaserWriter driver version. Under QuickDraw GX, this shouldn'tbe a problem. If it turns out to be a problem for your driver, you couldincorporate black-and-white threshold printing into your "rough draft mode"code. The QuickDraw GX LaserWriter driver always prints in color.</p><br><br>         <a name=Downloads></A>                  <P><A HREF="#top">Back to top</A></P><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/pr_525.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/pr/pr_525.html%3Fid%3DDTS10002649-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/pr/pr_525.html%3Fid%3DDTS10002649-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/pr/pr_525.html%3Fid%3DDTS10002649-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A CS03: Special Profile Sizes in ColorSync Manager</title>	<meta name="keywords" content="Mac OS 8 ColorSync Manager 2.0 Profile Sizes">	<meta name="Description" content="Technical Q&amp;A CS03: Q&amp;As answer several questions, rangingfrom topics on whether special profile sizes increase efficiency,what range a color component falls within, what the differencesin quality settings are and their effects on speed and memory,a use for CWConcatColorWorld, further explanation of profiles,rendering intents, embedded profiles, and creating link profiles."><meta name="categories" content="Color"><meta name="week-posted" content="May 1, 1995 - May 5, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001131" title="Special Profile Sizes in ColorSync Manager"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/GraphicsImaging/index.html">Graphics & Imaging</a> &gt; <a href="../../technicalqas/GraphicsImaging/idxColorSync-date.html">ColorSync</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A CS03</div>
<div id="pageheadsub">Special Profile Sizes in ColorSync Manager</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=555> <TR> <td align="left"><hr width=500 align=center><P id=p2>Q: There is no mention of special profile sizes (for processing efficiency) inColorSync Manager (2.0) or in International Color Consortium Profile Format.Specifically, it does not say whether defining the 3-D lookup tables with sizesthat are a power of 2 (+1) is any faster than using any other sizes. Definingtables that are 5x5x5, 9x9x9, 17x17x17, or 33x33x33 should be faster toimplement, since you can use fast shifts instead of integer divides in thelookup math. Does the default CMM have any optimizations such as this?  If so,what are they?</p><P id=p4>A: It doesn't matter how you dimension the tables, because the default CMM createsprivate multi-dimensional tables internally.</p><P id=p2>Q: On page 1-28 of ColorSync Manager (2.0), under "L*a*b* Color Value", it statesthat each color component is within the range of 0 to 65,280. Shouldn't this be0 to 65,535, since this is this value for the other spaces and in ICC ProfileFormat.</p><P id=p4>A: 65,280 is the correct value. The ICC profile specifies 0xFF00 as the maximumvalue for this space.</p><P id=p2>Q: What exactly are the internal parameters for the quality setting (i.e., howmany bits and how large a LUT is built for "draft" versus "normal" versus"best")?</p><P id=p4>A: The quality flag bits provide a convenient place in the profile for anapplication to indicate the desired quality (potentially at the expense ofspeed and memory) of a color match. In ColorSync 2.0, these qualities do notmandate the use of one algorithm over another. Instead,  they are just"recommendations," which the CMM may choose to ignore or implement.</p><P id=p4>This is the procedure the CMM uses to decide whether to ignore or implement thequality recommendations specified in the flag bits:</p><ol type="A" start="1">	<LI><P id=p4>When the <code>'appl'</code> CMM builds a <code>ColorWorld</code> from two or more profiles, and one or more of these profiles contains TRC curves or A2Bx tables, it also builds a private, multi-dimensional look-up table.</p></LI>	<LI><P id=p4>The quality flag bits determine the resolution of the private, multi-dimensional look-up table.</p></LI>	<LI><P id=p4>Draft quality is treated the same as Normal quality by the <code>'appl'</code> CMM. This is how the trade-offs for Best quality differ from those for Normal/Draft quality:</p></LI></ol><ol type="a" start="1">	<LI><P id=p4>Quality: In most cases, since the quality is only slightly better in Best mode, the difference is difficult to see, unless one of the profiles has a high gamma value. For high gamma values, the extra resolution in the private, multi-dimensional look-up table is helpful.</p></LI>	<LI><P id=p4>Speed:	Best mode typically takes twice as long to build a <code>ColorWorld</code> (approximately two seconds versus approximately one second). However, once the <code>ColorWorld</code> is built, the time to use it is the same for either mode. In other words, the time to match a bitmap is the same for both modes (the rate is approximately 1.5MB/second on a PowerMac 8100/110).</p></LI>	<LI><P id=p4>Memory:	Best mode requires significantly more memory than Normal/Draft mode. A <code>ColorWorld</code> typically requires 120K of heap space in Best mode versus 25K in Normal mode, and the "high-water" memory requirement while building a ColorWorld is typically 300K for Best mode versus 90K for Normal mode.</p></LI></ol><P id=p4>Note that these guidelines apply only to the default <code>'appl'</code> CMM. The trade-offsbetween speed, quality, and resources may be quite different for other CMMs.</p><P id=p2>Q: On page 1-64 of ColorSync Manager (2.0), it states that a device-linked profilemay not be used with <code>NCWNewColorWorld</code>, and <code>NCMBeginMatching</code> implies thatdevice-linked profiles cannot be used. How is a device-linked profile used forcolor matching? Is this what <code>CWConcatColorWorld</code> is used for?</p><P id=p4>A: Use <code>CWConcatColorWorld</code> for color matching by passing it the device-linkedprofile.</p><P id=p2>Q: On pages 55 and 56 of ICC Profile Format, in the description of the profileheaders, there is no mention of the "quality" setting. Isn't the qualitysetting part of the profile?</p><P id=p4>A: A profile is typically a self-contained set of data that includes all theinformation a CMM needs to perform a color match. Therefore, when anapplication needs to embed a profile in a document, it should not have to makeany changes to the profile. However, there are two profile attributes that anapplication can change to modify the profile's behavior ("rendering intent" and"quality"). To change the behavior of a profile when embedding it in adocument, the application first sets the appropriate bit in the profile'sheader.</p><P id=p2>Q: On page 55 of ICC Profile Format where the header is described, what is therendering intent of this profile for the CMM?  Doesn't the user select therendering intent? Doesn't the profile contain data that allows it to beconverted under any of the four rendering intents? Is this a "default"rendering intent that is used if the user does not specify one explicitly, oris this field always hard-coded with 0, 1, 2, and 3 in the four bytes tosignify that all four rendering intents are supported? Why does this fieldexist if all of these intents must always be supported?</p><P id=p4>A: "Rendering Intent" can be changed before a profile is embedded. The value ofthe profile's header-intent field determines how the CMM performs the colormatch. For example, a CMM would use the A2B2 tag if the rendering intent wasthree. However, the profile may also contain A2B0 and A2B1 tags (not used inthis example) regardless of the intent value. There is no default intent, butmost profiles start with the intent field set to 0.</p><P id=p2>Q: Is an "Embedded Profile," as mentioned in "Profile Flags" on page 57 of ICCProfile Format, a profile that is included in a data file (as opposed to onethat stands alone)? The documents states that, "Profile cannot be usedindependently from the embedded color data."  What does this mean, and is itonly applicable to an embedded profile?</p><P id=p4>A: Two bits were added to the ICC specification for copyright information toprotect the rights of profile builders. Setting the "Profile Embedded" bitwhile embedding a profile in a document tells other applications that canextract profiles from documents that the embedded profile is protected.Although the "Profile Embedded" bit cannot prevent unethical behavior byanother application (such as copying the embedded profile), setting this bitand the "Profile Use" bit indicates the profile vendor's intent to retain therights to the profile's contents.</p><P id=p2>Q: I want to go directly from an input CMYK space to an output CMYK space (withoutgoing through an intermediate three-component space) to preserve the originalGCR/UCR settings. Can I create a "link" profile for this purpose? If I do, willI have to write my own CMM to use it?</p><P id=p4>A: You can build a CMYK to CMYK device-link profile for this purpose, and you canuse it without writing your own CMM.</p></td> </tr> </table></CENTER><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[May 01 1995]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/c/cs03.html%3Fid%3DDTS10001131-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/c/cs03.html%3Fid%3DDTS10001131-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/c/cs03.html%3Fid%3DDTS10001131-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
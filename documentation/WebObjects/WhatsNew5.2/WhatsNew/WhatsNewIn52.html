<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>What&#39;s New in WebObjects 5.2 (Legacy): What&acirc;&#128;&#153;s New in WebObjects 5.2</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="What&acirc;&#128;&#153;s New in WebObjects 5.2"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000966-1" title="What&acirc;&#128;&#153;s New in WebObjects 5.2"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/MacOSXServer-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000542" target="_top">Mac OS X Server</a> &gt; <a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-DontLinkElementID_1">What's New in WebObjects 5.2 (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP40000966-1-DontLinkElementID_1" title="What&acirc;&#128;&#153;s New in WebObjects 5.2"></a><h1><a name="//apple_ref/doc/uid/TP40000966-1-TP1" title="What&acirc;&#128;&#153;s New in WebObjects 5.2"></a>What’s New in WebObjects 5.2</h1><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000966-1-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;The information in this document is obsolete and should not be used for new development.</p><p></p></div><p>This document describes the major new features of WebObjects 5.2 and describes the most significant bug fixes and enhancements to the product.</p><p>This release includes significant changes and enhancements to Enterprise Objects and Java Client, includes enhancements to application deployment, adds support for streaming HTTP requests and responses, and adds custom bootstrap classes to help with long command path problems on Windows.</p><p>It is divided into these sections:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-BBCFJJEB">“Web Services”</a></span></p></li><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-CHDJBDEA">“Servlet Single Directory Deployment”</a></span></p></li><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-CHDEDBCF">“Launch Architecture”</a></span></p></li><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-CHDDBGAI">“Streaming File Uploads”</a></span></p></li><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-CHDEAHGF">“Enterprise Objects”</a></span></p></li><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-BBCGHFHF">“Database Support”</a></span></p></li><li class="li"><p><span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-CHDEDGGJ">“Java Client”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP40000966-1-BBCFJJEB" title="Web Services"></a><h2>Web Services</h2><p>WebObjects allows you to provide and consume Web services, which simplify the development of distributed applications. Web services provide an implementation-independent way for applications to communicate with each other. Based on Simple Object Access Protocol (SOAP), Web services can be used across multiple platforms, including Microsoft’s .NET environment. A Web service is composed of operations, which are similar to the methods of a Java class (in WebObjects, that’s exactly what they are). For example, a company could develop a Web service that provides the current stock price for a specific stock symbol.</p><p>WebObjects also includes a rapid development approach to Web service development called Direct to Web Services, which <a name="//apple_ref/doc/uid/TP40000966-1-DontLinkElementID_4"></a>allows you to create a Web service that lets its clients access data in your data store by invoking Web service operations.</p><p>For more information on Web services in WebObjects, see <em>Inside WebObjects: Web Services</em> at <span class="content_text"><a href="../../../../documentation/WebObjects" target="_top">http://developer.apple.com/documentation/WebObjects</a></span>.</p><a name="//apple_ref/doc/uid/TP40000966-1-CHDJBDEA" title="Servlet Single Directory Deployment"></a><h2>Servlet Single Directory Deployment</h2><p>WebObjects 5.1 added support for deploying WebObjects applications in J2EE servlet containers. However, this support still required the presence of the WebObjects deployment runtime on the J2EE server. The new Servlet Single Directory Deployment (SSDD) feature of WebObjects 5.2 removes this requirement.</p><p>Now, you can deploy a WebObjects application into a single, self-contained directory in a supported J2EE servlet container. The self-contained directory contains the application’s <code>.woa</code> and all the frameworks the application requires. This feature does not affect WebObjects applications that are deployed with the WebObjects application server (Monitor and wotaskd). That is, this feature doesn’t provide a facility to the WebObjects application server to deploy applications in a single, self-contained directory.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF48" title="How It Works"></a><h3>How It Works</h3><p>Many J2EE containers support the deployment of servlet applications in a directory rather than in a <code>.war</code> file. The directory is an expanded <code>.war</code> file and has the same name as the <code>.war</code> file minus the extension.</p><p>When you build an application for deployment in a servlet container, you can choose to build it as a SSDD. When you choose this option, rather than build a <code>.woa</code> directory and a separate <code>.war</code> file, the build script creates a new directory with the same name as the application and copies the application’s <code>.woa</code> and any frameworks on which it depends inside the directory.</p><p>When the application runs in the container, a custom class loader loads the WebObjects classes from the <code>.woa</code> and the frameworks that are inside the SSDD directory. This removes the requirement of the WebObjects runtime to be installed on the J2EE application server.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF49" title="Project Builder Support"></a><h3>Project Builder Support</h3><p>The Project Builder and ProjectBuilderWO setup assistants for all types of WebObjects applications now allow you to choose SSDD deployment when creating a new project. Simply choose Deploy as a Servlet Single Directory Deployment in the Enable J2EE Integration window in the assistant, as shown in <span class="content_text">Figure 1-1</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40000966-1-DontLinkElementID_3" title="Figure 1-1Choose SSDD when creating a project"></a><p><a name="//apple_ref/doc/uid/TP40000966-1-CHDFEIAF" title="Figure 1-1Choose SSDD when creating a project"></a><strong>Figure 1-1&nbsp;&nbsp;</strong>Choose SSDD when creating a project</p><img src = "../art/ssdd.gif" alt = "Choose SSDD when creating a project" width="411" height="347"></div><br/><p>To enable SSDD for existing projects, add a build setting or makefile variable named <code>SERVLET_SINGLE_DIR_DEPLOY</code> with the value of <code>YES</code>. You must also add a build setting or makefile variable named <code>SERVLET_SINGLE_DIR_DEPLOY_LICENSE</code> with a value that is a valid WebObjects deployment key.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF50" title="Directory Layout"></a><h3>Directory Layout</h3><p>A servlet single directory deployment directory is organized like this:</p><ul class="simple"><li><p><code>MyApp/</code></p><ul class="simple-spaceabove"><li><p><code>Extensions/</code></p></li><li><p><code>LICENSE</code> (the deployment license agreement)</p></li><li><p><code>Library/</code></p><ul class="simple-spaceabove"><li><p><code>Frameworks/</code> (copies of all the required frameworks)</p></li></ul></li></ul><ul class="simple-spaceabove"><li><p><code>classes/</code></p></li><li><p><code>lib/</code></p></li><li><p><code>MyApp.woa/</code> (copy of the  <code>.woa</code>)</p></li><li><p><code>tlds/</code></p></li><li><p><code>web.xml</code></p></li></ul></li></ul><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF51" title="web.xml"></a><h3>web.xml</h3><p>The content requirements of the <code>web.xml</code> file are different for an application deployed with SSDD. The variables <code>WOROOT</code>, <code>LOCALROOT</code>, and <code>WOAINSTALLROOT</code> are not necessary. In their place, the classpath is specified by <code>WEBINFROOT</code>, which is calculated at runtime to be the directory from which the WebObjects application is running.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF52" title="Compatibility"></a><h3>Compatibility</h3><p>SSDD has been tested with Tomcat 3.x and Tomcat 4.0.x on Mac OS X and with WebLogic 7.x on Windows and Solaris. While WebSphere is now supported as a deployment platform on Windows, SSDD does not work with WebSphere, so you must deploy the <code>.war</code> file and install the WebObjects runtime manually.</p><a name="//apple_ref/doc/uid/TP40000966-1-CHDEDBCF" title="Launch Architecture"></a><h2>Launch Architecture</h2><p>The class WOBootstrap has been added to help WebObjects applications launch. It uses a custom class loader to dynamically load <code>.jar</code> files into WebObjects applications. It was primarily implemented to solve the long command path problem on Windows. It loads <code>.jar</code> files from a new WebObjects Extensions directory.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF53" title="WebObjects Extensions Directory"></a><h3>WebObjects Extensions Directory</h3><p>The new bootstrap class enables a new WebObjects Extensions directory. On Windows and Solaris, its path is <code>$NEXT_ROOT/Local/Library/WebObjects/Extensions/</code>. On Mac OS X, its path is <code>/Library/WebObjects/Extensions/</code>. Any <code>.jar</code> files in this directory will be loaded dynamically by the WOBootstrap class at runtime. Classes in those <code>.jar</code> files are loaded by the same class loader that loads the WebObjects classes (all the WebObjects frameworks as well as the application’s classes and frameworks). This solves a lot of class loader–related issues in WebObjects applications.</p><p>It is recommended that WebObjects-specific <code>.jar</code> files from the ThirdPartyJars directory that were previously placed in the Java extensions directory (<code>/Library/Java/Extensions/</code> on Mac OS X) be placed instead in the WebObjects Extensions directory. There are two exceptions to this recommendation.</p><p>If you installed WebObjects Developer on Mac OS X, the JDBC and JTA drivers should still be placed in <code>/Library/Java/Extensions/</code>. If you have WebObjects Developer installed on Windows, the JDBC driver needs to be installed in a location specified in <code>JavaConfig.plist</code>. Note that the Windows JDBC driver for WebObjects Development must be the Java 1.1.8 version, not the 2.0 version.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF54" title="Launch Scripts"></a><h3>Launch Scripts</h3><p>One benefit of the launch architecture changes is that launch scripts are greatly simplified. Since the classpath is now generated at runtime and passed to the custom class loader, the classpath for the launch script is minimal. In most cases, the <code>-classpath</code> flag in the launch script is</p><div class="codesample"><table><tr><td scope="row"><pre>-classpath WOBootstrap.jar<span></span></pre></td></tr></table></div><p>This should alleviate problems relating to argument length restrictions when launching WebObjects applications on Windows.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF55" title="Servlet Deployments"></a><h3>Servlet Deployments</h3><p>WebObjects applications deployed in J2EE servlet containers also take advantage of the new launch architecture. The servlet adaptor dynamically loads classes in the WebObjects Extensions directory at runtime. </p><p>If deployed as a Servlet Single Deployment Directory, the WebObjects application includes an Extensions directory in the <code>WEB-INF</code> directory that has a copy of all the <code>.jar</code> files in the WebObjects Extensions directory at compile time. SSDD uses <code>.jar</code> files in the application-specific Extensions directory (the one in the <code>WEB-INF</code> directory in the application’s directory) in preference to <code>.jar</code> files in the global Extensions directory (in <code>/Library/WebObjects/Extensions/</code>).</p><p>Note that the WebObjects Extensions directory exhibits a loading behavior different from that of the <code>WEB-INF/lib</code> and <code>WEB-INF/classes</code> directories. Classes in those directories are loaded in a parent of the class loader that loads all the WebObjects classes. Classes in either WebObjects Extensions directory are loaded by the same class loader that loads all of the WebObjects classes.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF56" title="Project Builder Support"></a><h3>Project Builder Support</h3><p>Existing Project Builder applications can take advantage of the new launch architecture by simply adding a compiler setting and rebuilding. First choose Edit Active Target from the Project menu. Look for the Java Compiler Settings item and add this flag to the Other Java Compiler Settings text area:</p><div class="codesample"><table><tr><td scope="row"><pre>-extdirs /Library/WebObjects/Extensions:/Library/Java/Extensions:/System/Library/Java/Extensions:/System/Library/Frameworks/JavaVM.framework/Home/lib/ext<span></span></pre></td></tr></table></div><p>Existing ProjectBuilderWO applications need only be rebuilt to take advantage of the new launch architecture.</p><a name="//apple_ref/doc/uid/TP40000966-1-CHDDBGAI" title="Streaming File Uploads"></a><h2>Streaming File Uploads</h2><p>A long-requested feature of WebObjects is the ability to stream HTTP request and response content. This is a useful feature for applications in which users upload or download megabytes of data in a single request or response. Other benefits of this feature include a greatly reduced memory footprint for all sizes of file uploads.</p><p>This feature allows you to get the raw content of an HTTP request as a <code>java.io.InputStream</code> object. You can also easily stream raw data back to the client. The HTTP adaptors support this feature as do applications that run in servlet containers.</p><p>This feature required new API and new bindings on some of the dynamic elements. This means that parts of existing applications must be rewritten to take advantage of this feature.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF57" title="Basic Streaming"></a><h3>Basic Streaming</h3><p>WORequest objects are now backed by a <code>java.io.InputStream</code> object that represents their content. However, because of the design of the WebObjects frameworks, in most cases all of the content of a stream is read into memory before it is parsed. It is possible to get the raw data of a request as an InputStream (thus avoiding the memory overhead), however, but this requires using the StreamActionRequestHandler (<code>wis</code>) with a direct action.</p><p>WOResponse content can also be backed by an InputStream object representing their content. However, when you use an InputStream, you must not use the regular content-managing methods. The reverse is also true. If you use an InputStream, only the contents of the InputStream are returned to the client. The WebObjects frameworks do not use an InputStream to return content to the client because of their design. See the revised FileUpload example for an example of streaming a potentially large file to the client.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF58" title="formValues Method of WORequest"></a><h3>formValues Method of WORequest</h3><p>The behavior of the <code>formValues</code> method depends on the content being transmitted. For nonstreaming content, its behavior is unchanged from previous versions of WebObjects. However, in the case where the content is <code>multipart/form-data</code>, its behavior is as follows.</p><p>On each call to the <code>formValues</code> method (implicit or explicit), the <code>multipart/form-data</code> is parsed until the first unfinished file upload. An unfinished file upload is one in which the NSData representing the file contents have not been used or looked at. As soon as the NSData is touched, the file is read into memory and the upload is considered finished.</p><p>Once an unfinished upload is reached, it places the information related to that file upload in the <code>formValues</code> dictionary and stops. Subsequent calls to the <code>formValues</code> method follow the same pattern. (Typically, a WebObjects dynamic element calls <code>formValues</code>, looks for and uses the information it requires so that the next call to <code>formValues</code> advances farther in the <code>multipart/form-data</code> content). </p><p>In the case where there is no file upload, the first call to the <code>formValues</code> method causes all the content to be completely parsed.</p><p>To do true streaming, you need to use the new bindings on the WOFileUpload dynamic element, as described in <span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-TPXREF59">“WOFileUpload,”</a></span> or the new WOMultipartIterator class, as described in <span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-TPXREF60">“WOMultipartIterator Class.”</a></span></p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF59" title="WOFileUpload"></a><h3>WOFileUpload</h3><p>The WOFileUpload dynamic element has several new attributes to support streaming. The <code>data</code>, <code>filePath</code>, <code>mimeType</code>, and <code>copyData</code> attribute’s behavior is unchanged. </p><p>These are the new bindings:</p><ul class="spaceabove"><li class="li"><p><strong>inputStream</strong>: WebObjects sets this attribute to an InputStream representing the contents of the file upload. This binding can be used only when it is the only WOFileUpload element on the page. </p><p>Also, within a form with other input elements, it has to be the last element. This implies that the form’s <code>multipleSubmit</code> attribute must not be set to <code>true</code> when it contains a WOFileUpload with the InputStream attribute. Otherwise, the WOFileUpload element raises an exception. This attribute is bound by the end of the file content data.</p></li><li class="li"><p><strong>bufferSize</strong>: Sets the size (in bytes) of the buffer used by the <code>outputStream</code> and <code>streamToFilePath</code> attributes. The default buffer size is 512 KB. There is no reasonable restriction on the buffer size.</p></li><li class="li"><p><strong>outputStream</strong>: WebObjects copies the file upload data from the content to the <code>outputStream</code> specified by this attribute.</p></li><li class="li"><p><strong>streamToFilePath</strong>: WebObjects writes the file upload data from the content directly to the file path specified in this attribute. This is an atomic operation—the data is written to a temporary file, which is renamed when the process is complete.</p></li><li class="li"><p><strong>overwrite</strong>: When <code>streamToFilePath</code> is specified, this binding determines whether WebObjects should overwrite an existing file. Defaults to <code>false</code>.</p></li><li class="li"><p><strong>finalFilePath</strong>: When <code>streamToFilePath</code> is specified, its value is set to the actual file location (it may differ from the <code>streamToFilePath</code> value if there is a problem renaming the file).</p></li></ul><p>The new bindings are demonstrated in the revised FileUpload example.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF60" title="WOMultipartIterator Class"></a><h3>WOMultipartIterator Class</h3><p>WOMultipartIterator is a new class whose reference can be retrieved from a WORequest object. It represents the content of a <code>multipart/form-data</code> request as a series of WOMultipartIterator.WOFormData objects (retrieved by calling the <code>nextFormData</code> method). Each WOMultipartIterator.WOFormData object has headers and content. The content can be retrieved as an NSData, as an NSDictionary of <code>formValues</code> (both of which read all the content into memory), or as an InputStream. For file uploads, it is convenient to use the InputStream API as it does not read all the data into memory.</p><p>The WOMultipartIterator is intended for use in direct actions or custom dynamic elements. See the revised FileUpload example for to see how WOMultipartIterator is used in a direct action.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF61" title="Servlets"></a><h3>Servlets</h3><p>The JavaWOJSPServlet framework has been updated to stream requests and responses as well. Running a WebObjects application in a servlet container should no longer automatically cause all the content to be buffered in memory.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF62" title="Web Server Adaptors"></a><h3>Web Server Adaptors</h3><p>When the Web server adaptor receives a new request from the client (browser), it looks at the content length header to decide whether to stream or buffer the content. A large chunk of content data is read immediately before the application instance is contacted. The size of this chunk is an adaptor compile-time setting in <code>config.h</code>, <code>REQUEST_STREAMED_THRESHOLD</code>, which defaults to one megabyte).</p><p>If the content data size is less than this, the entire content is buffered and the rest of the request processing behaves as in previous versions of WebObjects. However, if there is more than one megabyte of content data, then the application instance is contacted, the initial one megabyte is sent, then the rest of the content is streamed.</p><p>In addition, the response from the application instance is now unconditionally streamed back to the client. There is another compile-time setting (<code>RESPONSE_STREAMED_SIZE</code>) that controls the size of the data chunks. The default value is the smaller of the TCP read or write socket buffer size of the adaptor, which is 32 KB. It is possible to effectively revert to not streaming any data by setting these buffers to large values and recompiling the adaptor.</p><a name="//apple_ref/doc/uid/TP40000966-1-BBCGHFHF" title="Database Support"></a><h2>Database Support</h2><p>WebObjects 5.2 adds support for the Sybase Adaptive Server Enterprise database in the form of a JDBC adaptor plug-in. See the KBase article <span class="content_text"><a href="http://kbase.info.apple.com/cgi-bin/WebObjects/kbase.woa/wa/query?searchMode=Assisted&amp;type=id&amp;val=KC.72598" target="_blank">72598</a></span> for a detailed listing of all the databases that were tested with WebObjects 5.2.</p><a name="//apple_ref/doc/uid/TP40000966-1-CHDEAHGF" title="Enterprise Objects"></a><h2>Enterprise Objects</h2><p>Significant architectural changes have been made to Enterprise Objects in WebObjects 5.2, especially with regard to memory management and concurrency (multithreading, with particular attention to locking).</p><p>Unfortunately several of the changes that were implemented required API changes and so <em>WebObjects 5.2 is not binary compatible with previous versions</em>, including 5.1. For most developers, the Enterprise Object classes remain source compatible, although a few advanced users may need to implement a couple of additional methods. </p><p>The most notable change is that EOObjectStore and EOObjectStoreCoordinator now implement the NSLocking interface. The API documentation has been updated for these and other changes in Enterprise Objects and includes more specific details.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF63" title="Memory Management"></a><h3>Memory Management</h3><p>In previous releases of WebObjects, EOEditingContext objects held strong references to the EOEnterpriseObjects registered with them. The EOEnterpriseObjects themselves did not maintain any direct reference to their EOEditingContext. Rather, the EOObserverCenter mediated between the two groups.</p><p>Additional memory relating to each EOEnterpriseObject was held in the row-level snapshots by the EODatabase object, which is typically accessed indirectly through an EODatabaseContext object. Finally, the NSUndoManager, which most EOEditingContext objects possess, could also consume a significant amount of memory to facilitate the undo and redo capabilities of Enterprise Objects.</p><p>In WebObjects 5.2, EOEditingContext objects now hold weak references to the EOEnterpriseObjects registered with them. These EOEnterpriseObjects in turn each hold a strong reference to the EOEditingContext in which they are registered. (Remember, a single EOEnterpriseObject can be registered in exactly one EOEditingContext at any one time). Several exceptions exist.</p><p>First, EOEditingContext objects hold all inserted, deleted, or modified objects by strong references. These strong references are cleared by the methods <code>saveChanges</code>, <code>revert</code>, <code>invalidateAllObjects</code>, and <code>reset</code>. They may also be cleared by the methods <code>invalidateObjectsWithGlobalIDs</code>, <code>refaultObject</code>, <code>refreshObject</code>, <code>undo</code>, and <code>redo</code>, depending on the specifics of the scenario (that is, whether the changed state is forcefully discarded or not). </p><p>Second, EOSharedEditingContext objects always hold their registered objects with strong references.</p><p>Third, the methods <code>setInstancesRetainRegisteredObjects</code> and <code>setRetainsRegisteredObjects</code> can programmatically force an EOEditingContext to hold strong references to all the EOEnterpriseObjects registered with it. However, this can be done only on an EOEditingContext with which nothing is currently registered (no EOEnterpriseObjects have been fetched into it).</p><p>Although Enterprise Objects now uses weak references more extensively, the Java garbage collector exhibits some degree of nondeterminism. As a consequence, you cannot use the <code>registeredObjects</code> array as a permanent repository of EOEnterpriseObjects. The contents of the array can change at any time since the garbage collector runs independently in a separate thread (in most Java implementations). </p><p>In addition, objects fetched from a data store and then discarded eventually disappear from the EOEditingContext. You can work around this by maintaining your own strong reference to the EOEnterpriseObjects in question. It should be sufficient to put the EOEnterpriseObjects in an array, a set, or in some other data structure. You can also use <code>setRetainsRegisteredObjects</code>.</p><p>The memory allocated for the database row-level snapshots that corresponds to garbage-collected EOEnterpriseObjects is released some time after the EOEnterpriseObjects have been garbage collected. Although generally unnecessary, you can use <code>processRecentChanges</code> to force an EOEditingContext to decrement the snapshot reference count on those snapshots that are no longer needed. EODatabase still holds strong references to row-level snapshots and maintains a reference count for each row and its associated EOGlobalID object.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF64" title="Undo Managers"></a><h3>Undo Managers</h3><p>Each EOEditingContext has an NSUndoManger. By default, that undo manager can perform an unlimited number of undo and redo operations. You should consider using <code>removeAllActions</code> at checkpoints beyond which you have no intention of undoing (such at the end of a request).</p><p>Alternatively, you can limit the size of the undo stack using <code>setLevelsOfUndo</code>. If your application is not going to use the undo manager (say for batch operations), you can disable it entirely by invoking <code>setUndoManger(null)</code> on an EOEditingContext. </p><p>Currently, an NSUndoManager maintains a strong reference to the target and to the arguments of every action. This differs from the Cocoa undo manager, which only retains the arguments.</p><p>Generally, you do not need to be concerned with garbage collecting NSUndoManager objects as they are typically collected with their associated EOEditingContext. However, the NSDelayedCallbackCenter maintains a strong reference to NSUndoManager objects until the current event is over. The NSUndoManger in turn holds onto the EOEnterpriseObject arguments to the undo operation, which in turn hold on to their EOEditingContexts). </p><p>This should not affect most WebObjects applications since the WebObjects framework ends the event. However, some pure Enterprise Objects applications may have need to explicitly invoke <code>eventEnded</code> on the NSDelayedCallbackCenter. There is one such callback per thread that manipulates Enterprise Objects or NSUndoManger code.</p><p>New in WebObjects 5.2, the default session editing context for WOSession strictly limits undo operations by default. You can adjust this by invoking</p><div class="codesample"><table><tr><td scope="row"><pre> defaultEditingContext().undoManager().setLevelsOfUndo(&lt;integer>);<span></span></pre></td></tr></table></div><p>You can also adjust this by setting the WebObjects property <code>WODefaultUndoStackLimit</code>. This property affects only the default editing context for WOSession objects. Its default value is 10. As with Enterprise Objects applications, you can disable the undo manager by setting it to <code>null</code>. Remember that sessions do not create the default editing context until the first invocation of <code>defaultEditingContext</code>.</p><p>Finally, the component page cache and the session timeout are good starting points for controlling memory use in WebObjects.  See the WOApplication methods <code>setPageCacheSize</code> and <code>setSessionTimeOut</code>.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF65" title="Concurrency and Locking"></a><h3>Concurrency and Locking</h3><p>This section discusses general locking requirements in Enterprise Objects, changes made in WebObjects 5.2, and concurrency within Enterprise Objects. It provides information on achieving concurrent database access with Enterprise Objects.</p><p>WebObjects first supported multithreading operations in version 4.0. EOSharedEditingContexts were introduced in version 4.5.  A significant amount of API predates both these features.  You can see the Apple references 2861512 and 2948731 in the release notes for more details on specific deadlocks.</p><p>In previous versions of Enterprise Objects, developers were expected to explicitly lock and unlock EOEditingContexts, but most other objects locked themselves in any methods that changed state (most of them) or did not support locking.  </p><p>However these objects, mostly EOObjectStores and fault handlers confined in the EOAccess layer, had no way of knowing the context of their usage.  The breadth of the Enterprise Object API allowed them to be used in many different ways at many different times.  Faults can be fired in many different scenarios.  Consequently, these objects needed to lock and unlock frequently.  This has undesirable performance characteristics.  </p><p>Imagine an EOEditingContext fetches a thousand rows from a database.  The EODatabaseContext <code>initializeObject</code> method is invoked once per row to create a corresponding EOEnterpriseObject.  Since the EODatabaseContext can only service one EOEditingContext at a time, nearly all of those locking operations are redundant.</p><p>Worse, if another thread were to seize the lock while the first was still initializing EOEnterpriseObjects, each thread could end up with some but not all of the Enterprise Objects locks and all threads would be unable to continue.  The possibility of this deadlock occurring was alleviated in WebObjects 4.0 by simply having one global lock for the entire EOAccess layer.  </p><p>However, the introduction of EOSharedEditingContexts added an additional lock to the scenario. EOSharedEditingContexts have a multireader, single-writer lock.  The writer lock behaves similarly to a plain EOEditingContext’s lock, but the EODatabaseContext in the example above must also prevent other threads from acquiring the read lock while it has the global EOAccess lock.  This was temporarily remedied in WebObjects 5.1.3 by replacing all EOSharedEditingContexts reader-writer locks with the global EOAccess lock.</p><p>The entire concurrency architecture has been updated in WebObjects 5.2 within the constraints of the existing Enterprise Objects API.  In this paradigm, each lock is treated as a shared resource.  <em>To ensure safe concurrent access to Enterprise Objects, it is your fundamental responsibility is to lock the Enterprise Objects you use directly.</em>  The Enterprise Objects will then lock any additional resources they use directly as needed.  You should assume that instances of classes that do not implement NSLocking are not suitable for concurrent access without additional steps being taken.</p><p>For example, EOEnterpriseObjects do not implement NSLocking and Enterprise Objects assumes they will be used only by the thread that has locked their EOEditingContext. Since it very rarely makes any sense to provide concurrent access to EOEnterpriseObjects separately from their EOEditingContexts, it shouldn’t be a problem that EOEnterpriseObjects do not implement NSLocking.</p><p>The only exception is that you do not need to lock EOSharedEditingContexts. Enterprise Objects will always ensure safe access to shared editing contexts.  In fact, explicitly locking EOSharedEditingContexts is discouraged, as it is difficult to perform correctly.  Similarly, overriding the provided implementations of lock and unlock on concrete Enterprise Objects classes should be approached with extreme caution.</p><p>Now, EOEditingContexts automatically lock their parent object stores when they perform operations requiring access to those object stores.  In the example above, the editing context locks its parent object store once for the fetch, rendering it unnecessary to lock and unlock in each <code>initializeObject</code> method call. </p><p>EOObjectStore and EOObjectStoreCoordinator now implement NSLocking and require the implementation of the <code>lock</code> and <code>unlock</code> methods.  The global EOAccess lock has been eliminated.  EOAccess objects can only be used by the thread that has locked the EOObjectStoreCoordinator containing the corresponding EODatabaseContext.  Essentially, the EOObjectStoreCoordinator now replaces the global EOAccess lock.  </p><p>In previous versions of WebObjects, EOAccess objects, like EODatabaseContext, locked themselves in response to any method invocation.  This is no longer true, and if you directly manipulate EOAccess-level objects, you should first secure the lock for the associated EOObjectStoreCoordinator.  </p><p>When an EOEditingContext locks its parent object store, it first obtains the writer lock for its EOSharedEditingContext, if one exists.  It does not release the writer lock until it is finished using the EOObjectStore.  Obtaining the lock for an EOObjectStoreCoordinator causes that coordinator to first lock all of its registered cooperating object stores.</p><p>You usually interact only with the EOEditingContext lock.  It is vital to properly lock and unlock EOEditingContexts because no Java application is truly single threaded.  The garbage collector runs in a separate system thread, which is responsible for cleaning up weak references to EOEnterpriseObjects.  And the code for <code>finalize</code> methods runs in yet another system thread on most platforms.</p><p>An <code>invalidateAllObjects</code> message propagates to every EOEditingContext in the application.  If you use an unlocked EOEditingContext when another thread invalidates something, your EOEnterpriseObjects will be forcefully turned into empty faults in the EOEditingContext you are working with during your operation.  The most favorable outcome of this scenario is that your application loses your outstanding changes.</p><p>Because of its performance impact, <code>invalidateAllObjects</code> should be used only when absolutely necessary. If you use <code>invalidateAllObjects</code> to ensure the freshness of enterprise objects, you should instead consider using the method <code>setFetchTimestamp</code> on EOEditingContext. Using this method along with <code>refaultAllObjects</code> or <code>refreshAllObjects</code> is the recommended way to update the enterprise object instances in a particular editing context.</p><p>You must unlock any locks you take regardless of the circumstances (except total virtual machine failure).  Leaving locks in place after a nonfatal exception will eventually deadlock the application.  You can use <code>finally</code> blocks to achieve this requirement.  Locked EOEditingContexts can still be garbage collected, so removing references to EOEditingContexts can also be used.</p><p>In general, code should first secure the appropriate EOObjectStoreCoordinators’ locks before posting notifications that Enterprise Objects objects register to receive.  Delegates do not need to worry about locking unless they attempt to access additional resources. </p><p>Enterprise Objects uses more sophisticated locking objects than those built in to Java to provide both itself and you more control over the scope of a critical region.  This reduces contention and the possible scenarios that can generate deadlock.</p><p>Notable locks in Enterprise Objects include the EOEditingContext’s lock.  Child or nested EOEditingContexts use their parent’s lock. EOSharedEditingContexts have a multireader, single-writer lock.  Each EOObjectStore may have its own lock, as does each EOObjectStoreCoordinator.  There is also a global lock for loading EOModels.</p><p>Problems with locking can be addressed by using NSLog. Set the debug level to at least <code>DebugLevelInformational</code> and the debug groups to include <code>DebugGroupMultithreading</code>. In the event of apparent deadlock, you can obtain a complete stack trace of all the threads within the Java Virtual Machine by sending the <code>java</code> process the <code>QUIT</code> signal. You can do this on the command line with <code>kill -3</code><em>pid</em> or Control \, although these commands vary by Java platform.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF75" title="Concurrent Database Operations"></a><h3>Concurrent Database Operations</h3><p>The changes to the locking and synchronization architecture in Enterprise Objects now permit concurrent database access from within Enterprise Objects.  In practical terms, each EOObjectStoreCoordinator represents a single database connection to each of the registered EOCooperatingObjectStores.  EOEditingContexts that share an EOObjectStoreCoordinator share a single database connection. EOEditingContexts with different EOObjectStoreCoordinators can perform concurrent operations, such as fetching from the database.  To configure each editing context to use a different object store coordinator, use this code:</p><div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>EOObjectStoreCoordinator parent = new EOObjectStoreCoordinator();<span></span></pre></td></tr><tr><td scope="row"><pre>EOEditingContext ec = new EOEditingContext(parent);<span></span></pre></td></tr></table></div><p>The different EOObjectStoreCoordinators will have different EODatabaseContexts, and entirely separate row level snapshots.  This can impact an application’s memory footprint, as well as have optimistic locking consequences.  Since the results of raw row operations are not cached, either raw row fetches or raw SQL operations are well suited to concurrent database access.  The EOUtilities class in the access layer provides a variety of convenience methods for executing these tasks.  EOFetchSpecification also supports <code>setFetchesRawRows</code> on fetch specifications.</p><p>Nothing prevents different WOSessions from having concurrent database access.  It is simply easier to balance the attendant resource costs with raw row work.  Customers can use the <code>setDefaultEditingContext</code> method on WOSession to establish an EOEditingContext with a particular EOObjectStoreCoordinator.  The <code>setDefaultEditingContext</code> method must be invoked before a session ever refers to its <code>defaultEditingContext</code>.  For example, one could create a pool of EOObjectStoreCoordinators, and in the session’s constructor grab one in a round robin order.  Applications with few simultaneous users may be able to afford to simply create a new EOObjectStoreCoordinator for each session.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF74" title="EOCustomObject Relationship Methods"></a><h3>EOCustomObject Relationship Methods</h3><p>EOCustomObject includes new methods for handling relationships. They are intended to clean up the code for manipulating to-many relationships. Before these new methods, enterprise object classes had to declare instance variables and method arguments for to-many relationships as NSMutableArray objects. However, an immutable NSArray is more appropriate.</p><p>The new methods are</p><div class="codesample"><table><tr><td scope="row"><pre>includeObjectIntoPropertyWithKey(Object, String)<span></span></pre></td></tr><tr><td scope="row"><pre>excludeObjectFromPropertyWithKey(Object, String)<span></span></pre></td></tr></table></div><p>You use these methods within the <code>addTo</code><em>Key</em> and the <code>removeFrom</code><em>Key</em> methods. EOModeler now uses these methods when it generates Java class files for enterprise objects that have to-many relationships.</p><a name="//apple_ref/doc/uid/TP40000966-1-CHDEDGGJ" title="Java Client"></a><h2>Java Client</h2><p>The Java Client technologies in WebObjects 5.2 have received many enhancements and new features, as well as important bug fixes. Many common customer requests have been integrated into this release, the architecture was cleaned up to be more flexible, and performance was tuned in several areas.</p><p>Unfortunately several of the changes that were implemented required API changes and thus <em>Java Client in WebObjects 5.2 is not binary or source compatible with earlier versions</em> (including WebObjects 5.1). Existing Java Client applications will have to be converted manually when moving to WebObjects 5.2. Depending on the complexity of your applications, conversion should take between a few hours and 2 or 3 engineering days. Most conversion steps are text replacements in your source code and should be very straightforward; the vast majority of applications can be converted in less than a day.</p><p>See <span class="content_text"><a href="WhatsNewIn52.html#//apple_ref/doc/uid/TP40000966-1-CJGDEFAG">“Conversion Guide”</a></span> to learn how to convert existing projects. Many changes have been made to the XML controller tags. The appendix in <em>Inside WebObjects: Java Client Desktop Applications</em> reflects these changes.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF66" title="Web Start"></a><h3>Web Start</h3><p>As of WebObjects 5.2, applet support in Java Client is deprecated and replaced with support for Web Start. Web Start is a much better fit for Java Client and avoids the problems created by applets running in browsers. The JNLP information for your applications is generated dynamically by WebObjects, so you don't have to write a JNLP file by hand. In addition to Web Start, you can still generate complete applications to be installed on client computers in the traditional way (see the JavaClientLauncher example for more details).</p><p>Instead of a single component with a WOJavaClientApplet (typically the Main component), you now use two components in your applications: an entry page (typically the Main component), which contains the JNLP link to start the application, and a configuration page (typically called JavaClient) with the new WOJavaClientComponent to specify the details of the client application (application class, Web Start parameters, and so forth). The JNLP link actually points to a special URL that returns the JNLP dynamically, based on the information in your WOJavaClientComponent.</p><p>WOJavaClientComponent has many bindings you already know from WOJavaClientApplet, but also some new bindings related to Web Start (to specify the application name, vendor, etc.). See the API reference for WOJavaClientComponent for details.</p><p>Because of Web Start, the <code>wojavaclient.jar</code> file usually used to distribute the Java Client client classes is now signed. That means that if you have existing applications that repackage the <code>wojavaclient.jar</code> into another JAR file, you will get exceptions. Instead, use the individual JAR files in <code>WebServerResources/Java</code> of the following frameworks (<code>wojavaclient.jar</code> simply merges all these JAR files together): JavaEOApplication, JavaEOControl, JavaEODistribution, JavaEOGeneration, JavaEOInterface, JavaEOInterfaceSwing, JavaEORuleSystem, JavaFoundation, and JavaXML.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF67" title="Architectural Enhancements"></a><h3>Architectural Enhancements</h3><p>Before WebObjects 5.2, the desktop application side of the Java Client architecture was strictly dependent on the distribution layer. In this release, you have a lot more flexibility in how you start the application and how you connect to the server application. You can now use the interface, application, and generation layers in a more flexible way–for example in two-tier and three-tier architectures.</p><p>The rule system was separated from the generation layer and moved out of the JavaEOGeneration framework into a standalone framework, JavaEORuleSystem. Distribution layer–dependent functionality in the application and generation layer was made extensible. In greater detail:</p><ul class="spaceabove"><li class="li"><p>ApplicationSupport is a new inner class in EOApplication. An application support object is used by the EOApplication instance to handle architecture-specific tasks (like connecting to a server in a three-tier environment). Depending on your needs, you can choose from different subclasses of EOApplication.ApplicationSupport. The <code>main</code> method has been removed from EOApplication and instead you now use a <code>main</code> method on the application support class you wish to use. </p><p>With three-tier Java Client applications you use the <code>com.webobjects.eoapplication.client.EOClientApplicationSupport</code> class, with two-tier applications you use the <code>com.webobjects.eoapplication.EOApplicationSupport</code> class. The method signature for <code>EOApplication.startApplication()</code> has changed to reflect these changes.</p></li><li class="li"><p>The application and generation layers now use the EODataSourceFactory class to create data sources. It's the task of the application support object to set the default data source factory according to their needs.</p></li><li class="li"><p>The <code>com.webobjects.eoapplication.EODefaultResourceBundle</code> class was renamed to <code>com.webobjects.eoapplication.client.EOClientResourceBundle</code> (and is still used in three-tier architectures on the client side). In two-tier architectures you can use the new class <code>com.webobjects.eoapplication.EOResourceBundle</code>.</p></li><li class="li"><p>The class <code>com.webobjects.eoapplication.EODefaults</code> was redesigned to be an abstract class with concrete subclasses <code>com.webobjects.eoappliation.client.EORemoteStoreageDefaults</code> for the client side in three-tier applications (former EODefaults) and <code>com.webobjects.eoapplication.EOUserFileDefaults </code>for two-tier applications. The method signatures for <code>loadPersistentValues</code> and <code>savePersistentValues</code> on EODefaults changed and these methods are abstract now. A method <code>allValues</code> was added to EODefaults. The notification names <code>LoadUserDefaultsNotification</code> and <code>SaveUserDefaultsNotification</code> and the key <code>DefaultsKey</code> were moved from <code>com.webobjects.eodistribution.EODistributionContext</code> to <code>com.webobjects.eoapplication.EODefaults</code>.</p></li><li class="li"><p>The method <code>sessionDidTimeOut</code> on EOApplication has been removed, as this kind of functionality is now handled internally by EOClientApplicationSupport. EOApplication has a new method, <code>quitWithMessage</code> , which is used by the support implementation. </p></li></ul><p>To configure different architectural needs you use the application support class and so-called principal classes. Principal classes can be specified per bundle (application or framework). For the second tier (typically a WebObjects application), you use the NSPrincipalClass setting; for the third tier (client side in Java Client) there is a new an NSClientPrincipalClass setting, which you simply add in Project Builder's Expert View for the <code>Info.plist</code> Entries of your project (<code>CustomInfo.plist</code> on Windows).</p><p>All frameworks now provide classes for the server side (or two-tier applications) and client side (three-tier applications). The classes for two-tier applications are found in the <code>Resources/Java</code> directory of the frameworks; the classes for the client side of three-tier applications are found in the <code>WebServerResources/Java</code> directory of the frameworks.</p><p>We renamed the packages for most Java Client classes: Classes that are useful in both two-tier and three-tier architectures are now in the packages <code>com.webobjects.eoapplication</code> and <code>com.webobjects.eogeneration</code>. Some additional classes that are specific to the client side of Java Client applications are available in the <code>com.webobjects.eoapplication.client</code> package (and are only part of <code>JavaEOApplication.framework/WebServerResources/Java</code>). The rule system–specific classes (formerly <code>com.webobjects.eogeneration</code>) are now in the package <code>com.webobjects.eogeneration.rules</code>.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF68" title="New Controllers"></a><h3>New Controllers</h3><p>There are a few new controller/association classes to complete the functionality offered by Java Client:</p><ul class="spaceabove"><li class="li"><p>EOTreeController/EOTreeAssociation: These classes add support for JTree. There is a new association class in the interface layer (which you can set up programmatically) and a new controller in the generation layer if you want to use tree views with Direct to Java Client.</p></li><li class="li"><p>EOSplitController: A new user interface controller to generate and control horizontal and vertical split views. Split controllers need exactly two subcontrollers (since JSplitPane works only with exactly two components). It will throw an exception if you add more.</p></li><li class="li"><p>EODisplayStatisticsController: A new simple controller to display the number of visible and selected objects in lists, used typically in query windows and to-many relationship editors.</p></li><li class="li"><p>EODetailSelectionController: A controller using the EODetailSelectionAssociation to allow modifying and displaying relationships directly with the selection in a table view.</p></li><li class="li"><p>EOActionTrigger: A new controller generating buttons for actions (typically invoked on a supercontroller).</p></li></ul><p>EOTreeController and EODetailSelectionController are accessible in the Assistant (widget-type pop-up in the Widgets view if you select the form task), EOSplitControllers can be chosen through the layout hints, and EODisplayStatisticsControllers will be automatically inserted by the rule system when it makes sense. For EOActionTriggers, you need to specify the actions to be displayed. Typically you use them to invoke actions on supercontrollers. Since those can't be configured in the Assistant, you usually insert them manually in frozen XML.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF69" title="Dynamic Layout"></a><h3>Dynamic Layout</h3><p>The dynamic user-interface generation with Direct to Java Client was fairly limited in the past. WebObjects 5.2 includes a variety of enhancements that should make the generated user interfaces more useful and easier to customize, thereby reducing the need to freeze XML for controller hierarchies.</p><p>Most importantly, the rule system now offers a way to specify layout hints and levels to change the layout of widgets. These can be specified in the Widgets view of the Assistant. These are the layout hints you can specify:</p><ul class="spaceabove"><li class="li"><p>Columns: Components are placed underneath each other (top to bottom), in multiple columns if there are many.</p></li><li class="li"><p>Row: Components are placed side by side (left to right).</p></li><li class="li"><p>FullWidth: Components are placed underneath each other, each of them covering the full width of the window.</p></li><li class="li"><p>Box: Components are placed in a (titled) box.</p></li><li class="li"><p>Switch: Components are placed in a switch view (typically a tab view).</p></li><li class="li"><p>Subwindow: Components are placed in a subwindow, with an activation button in the main window.</p></li><li class="li"><p>Inspector: Components are placed in an inspector window (shared by windows of the same type), with an activation button in the main window.</p></li><li class="li"><p>VerticalSplit: Components are placed in a vertical split view.</p></li><li class="li"><p>HorizontalSplit: Components are placed in a horizontal split view.</p></li></ul><p>The layout level is a number from 1 through 9. The rule system generates the layout level after level and with the order of the layout hints as listed above. So at the top of the window you will see the properties for which you specified a layout level 1 and a layout hint Columns, then the properties with the level 1 and hint Row, then level 1/hint FullWidth, ..., level 1/hint HorizontalSplit, level 2/hint Columns, level 2/hint Row, ..., level 2/hint HorizontalSplit, level 3/hint Columns, and so on.</p><p>In addition to the new layout hints and levels in the rule system, there are several bug fixes in the dynamic view layout (especially related to label alignment). You can now set the resizing behavior for individual components within a window; the components in a particular window can now have a different resizing behavior than the window or than other components in that window. So for example if you add two text areas to the same window, they both resize now (while before only the first one resized).</p><p>Large widgets (text areas, QuickTime views, and so forth) are now placed in switch views by default.</p><p>To create nicer modal dialogs, the Center option of the <code>widgetPosition</code> attribute has a different effect: With that option, the Cancel and OK buttons don't appear as large toolbar buttons at the top of the window, but as small text buttons at the bottom right.</p><p>And to integrate better with the Aqua human interface of Mac OS X, we now track more layout parameters in EOUserInterfaceParameters. You can even request the user interface to be optimized for Mac OS X by invoking <code>EOUserInterfaceParameters.optimizeForMac</code> (which only has an effect if actually running on Mac OS X). In that mode the generated user interface will be significantly larger and might not be useful for applications with complex models.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF70" title="Actions"></a><h3>Actions</h3><p>The method <code>activatePreviousWindow</code> on EOApplication was removed (use the identical EOWindowObserver method instead). The method <code>standardActivatePreviousWindowActionForApplication</code> on EOAction was renamed to <code>standardActivatePreviousWindowActionForWindowObserver</code>. This action is now dispatched directly to the window observer, not to the application object.</p><p>We added a new dispatching mechanism: The new method <code>actionForSupercontrollers</code> on EOAction sends actions to the first controller implementing the corresponding action method it finds going up the controller hierarchy. The <code>SUPERCONTROLLERSACTION</code> tag can be used to specify these kind of actions in XML. These kind of actions are very useful with EOActionTrigger controllers.</p><p>Also, we added a way to specify additional actions for all controllers in XML (methods <code>setAdditionalActions</code>/<code>additionalActions</code> on EOController, XML attribute <code>actions</code>). Example:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;ACTIONTRIGGER><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;ARRAY name="actions"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;SUPERCONTROLLERSACTION actionName="invokeSomething"<span></span></pre></td></tr><tr><td scope="row"><pre>            descriptionPath="Edit/Do Something"<span></span></pre></td></tr><tr><td scope="row"><pre>            categoryPriority="110" actionPriority="1000"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/ARRAY><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/ACTIONTRIGGER><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF71" title="Titles and Enumeration Controllers"></a><h3>Titles and Enumeration Controllers</h3><p>We implemented significant enhancements to the EOTitlesController and EOMultipleValueEnumerationController classes to give you much more control over which values are displayed and which values can be selected. On EOTitlesController:</p><ul class="spaceabove"><li class="li"><p>Usually titles controllers fetch all objects of the destination entity and display them as available choices. Instead of fetching them explicitly, you can ask the controllers now to look for objects in the editing context (methods <code>setSearchesTitlesObjectsInEditingContext</code>/<code>searchesTitlesObjectsInEditingContext</code>, XML attribute <code>searchesTitlesObjectsInEditingContext</code>). So instead of fetching objects, they search for all objects of the destination entity currently registered in the editing context and display only the ones they found. You usually take care of fetching these objects in a supercontroller of your own custom class.</p></li><li class="li"><p>Alternatively you can specify an <code>availableTitlesKey</code> (methods <code>setAvailableTitlesKey</code>/<code>availableTitlesKey</code>, XML attribute <code>availableTitlesKey</code>). This key represents a key path relative to the master object and has to return the array of available objects the user can choose from. This way the business objects themselves can provide the information about available choices.</p></li></ul><p>On EOMultipleValueEnumerationController:</p><ul class="spaceabove"><li class="li"><p>You can now specify whether the user can remove all choices or whether at least one object should be chosen all the time (methods <code>setAllowsRemoveAll</code>)/<code>allowsRemoveAll</code>, XML attribute <code>allowsRemoveAll</code>).</p></li><li class="li"><p>You can now specify whether the user can add duplicates or not (choose the same object twice, methods <code>setAllowsDuplicates</code>/<code>allowsDuplicates</code>, XML attribute <code>allowsDuplicates</code>).</p></li><li class="li"><p>To support sorting of the chosen objects, you can now specify an index key (methods <code>setIndexKey</code>/<code>indexKey</code>, XML attribute <code>indexKey</code>). If you specify an index key, the user will be presented with buttons to move objects up and down and the index key attribute of all selected objects will be modified to represent that order (starting with 0).</p></li><li class="li"><p>You can also specify separate display keys for selected and available objects (methods <code>setDetailKeys</code>/<code>detailKeys</code>/<code>addDetailKey</code>/<code>removeDetailKey</code>, XML attribute <code>detailKeys</code>) in addition to the usual title keys. That way you can display different information in the tables for chosen and available objects).</p></li><li class="li"><p>And you can now specify a detail relationship path (methods <code>setDetailRelationshipPath</code>/<code>detailRelationshipPath</code>, XML attribute <code>detailRelationshipPath</code>). If you do, the selected objects are considered to be in a master-detail relationship and the normal relationship path is considered relative to the detail objects.</p></li></ul><p>All of these keys need to be specified in rules written in Rule Editor or frozen XML; they are not configurable from the Assistant.</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF72" title="Locales, Languages, Platforms"></a><h3>Locales, Languages, Platforms</h3><p>We cleaned up the way localization and platform-specific customization is handled: While the method <code>EOApplication.languages()</code> still exists, we introduced the new methods <code>locales</code> and <code>localeIndicators</code> to handle localization in a more detailed way. We also added a method <code>platformIndicators</code> to identify the platform the application is executed on.</p><p>The key <code>LanguagesSpecification</code> on EOControllerFactory was renamed to <code>LocalesSpecification</code> and can be used to access the client's locale indicators (not just languages) in the rule system of Direct to Java Client (which runs on the server side).</p><a name="//apple_ref/doc/uid/TP40000966-1-TPXREF73" title="Other Enhancements"></a><h3>Other Enhancements</h3><p>Without specific order, here is a list of smaller enhancements and changes we implemented in addition to the ones already listed:</p><ul class="spaceabove"><li class="li"><p>We redesigned the EODocument functionality a little bit: EODocuments were a little inflexible and had to deal with editing contexts and display groups. We renamed the <code>com.webobjects.eoapplication.EODocument</code> interface to <code>com.webobjects.eoapplication.EOObjectDisplayDocument</code>. The <code>com.webobjects.eoapplication.EODocument</code> interface still exists but is not dependent on EOObjectDisplay any more (EOObjectDisplayDocument is, it's an interface that combines EODocument and EOObjectDisplay). EOApplication’s document API works with EODocument, not with EOObjectDisplayDocument.</p></li><li class="li"><p>EOEntityController was split into two classes: EOArchiveController and EOEntityController. EOArchiveController is a subset of the previous EOEntityController class. It is used to load interface files and to handle controller display groups and might provide a better subclassing point for your own customizations.</p></li><li class="li"><p>The methods <code>setAlignmentWidth</code> and <code>alignmentWidth</code> were moved from EOComponentController down the class hierarchy to EOWidgetController and renamed to <code>setLabelComponentWidth</code> and <code>labelComponentWidth</code>. The XML attribute <code>alignmentWidth</code> was renamed to <code>labelComponentWidth</code>. These methods did not make sense in a high-level class such as EOComponentController.</p></li><li class="li"><p>We added a way to directly affect the size of widgets from EOWidgetControllers (methods <code>setMinimumWidgetSize</code>/<code>minimumWidgetSize</code>, XML attributes <code>minimumWidgetWidth</code> and <code>minimumWidgetHeight</code>). Previously, you could affect the size of only the complete component generated (which contains other components); now you have more control over widget sizes.</p></li><li class="li"><p>Windows menu: EOWindowObserver now maintains menu items for all open windows and adds more standard menu items in the Windows menu. </p></li><li class="li"><p>We removed the method <code>collectChangesFromServer</code> from EOInterfaceController (it was already deprecated in WebObjects 5.1) and renamed <code>collectChangesFromServer</code> on EOApplication to <code>refreshData</code>.</p></li><li class="li"><p>We removed the method <code>loadArchiveNamed</code><em>(String, Object, String)</em> from EOArchive (it was already deprecated in WebObjects 5.1).</p></li><li class="li"><p>Provider method names (for display groups, editing contexts, etc.) can now be specified in three different ways:</p><ul class="nested"><li class="nested li"><p><em>className</em>:<em>staticMethodName</em> (a static method on a class)</p></li><li class="nested li"><p><em>keyPath</em> (a key path on the controller for which the provider method name is specified)</p></li><li class="nested li"><p>^<em>keyPath</em> (a key path on the controller for which the provider method name is specified or the closest supercontroller)</p></li></ul></li><li class="li"><p> EOTextFieldController has a new option to use a JPasswordField instead of the regular text field (methods <code>setUsesPasswordField</code>/<code>usesPasswordField</code>, XML attribute <code>usesPasswordField</code>).</p></li><li class="li"><p> We added support for help tags (tool tips) on all EOComponentControllers and EOActions (methods <code>setToolTip</code>/<code>toolTip</code>, XML attribute <code>toolTip</code>).</p></li><li class="li"><p>Notifications sent by EOApplication: We cleaned up the notification names (<code>ApplicationDidStart</code> is now <code>ApplicationDidStartNotification</code> and <code>ApplicationWillQuit</code> is now <code>ApplicationWillQuitNotification</code>) and introduced two new notifications to give you finer grained control over the start sequence:</p><ul class="nested"><li class="nested li"><p><code>ApplicationWillStartNotification</code> (sent before the main launch sequence is executed, but after principal classes are warmed up, so principal classes can register for this notification)</p></li><li class="nested li"><p><code>ApplicationWillFinishInitializationNotification</code> (sent right at the beginning of the <code>finishInitialization</code> method on EOApplication).</p></li></ul></li><li class="li"><p>The rule system now identifies abstract entities and no longer considers them main entities.</p></li><li class="li"><p>The default rule system now provides list windows for all main entities (no actions that activate them are generated by default, but the <code>LISTACTION</code> XML tag and the <code>com.webobjects.eogeneration.rules.EOListAction</code> class (with <code>EOListAction.wo</code>) component can be used to create some). Several new methods on EOControllerFactory support this new functionality (<code>canListWithEntityName</code>, <code>listWithEntityName</code>, <code>listFetchSpecificationWithEntityName</code>, <code>listGlobalIDsWithEntityName</code>). Also, the method <code>setObjectsWithGlobalIDs</code> was added to EOEntityController.</p></li><li class="li"><p>The interface layer does not expect an EOEnterpriseObject any more for most common operations (only associations performing relationship manipulations still expect EOEnterpriseObject). This way you can place nearly arbitrary objects in display groups and they are simply accessed through NSKeyValueCodingAdditions (or NSKeyValueCodingAdditions.DefaultImplementation). Some method signatures have changed to fix this issue (for example <code>valueForObject</code> on EODisplayGroup).</p></li><li class="li"><p>We added, renamed, or removed constants on EOXMLUnarchiver (too many to list here in a detailed form). It should be trivial for you to find a replacement (or create your own constant if necessary).</p></li><li class="li"><p>Changes to EOUserInterfaceParameters:</p><ul class="nested"><li class="nested li"><p>Methods <code>setLabelDistance</code> and <code>labelDistance</code> were added. The value is used to determine the distance in points between label components and widgets.</p></li><li class="nested li"><p>Method <code>setBorders</code>, which took three arguments, was replaced with the three methods <code>setSmallBorder</code>, <code>setMediumBorder</code>, and <code>setLargeBorder</code>, each taking one single argument.</p></li><li class="nested li"><p>Methods <code>setAllowIcons</code> and <code>allowIcons</code> were removed (they were already deprecated in WebObjects 5.1). </p></li></ul></li><li class="li"><p>We added an XML attribute, <code>transient</code> , that can be used to prevent any controller from becoming transient if set to <code>false</code> (but if set to <code>true</code> it will not force the controller to become transient).</p></li><li class="li"><p>We added support for continuous change notification on EOAssociationController (methods <code>setPrefersContinuousChangeNotification</code>/<code>prefersContinuousChangeNotification</code>, XML attribute <code>prefersContinuousChangeNotification</code>), which results in edited business objects changing immediately when the user enters values (as long as the association class used by the controller supports continuous change notification). Note that continuous change notification can be problematic if you use validation methods on your business objects.</p></li><li class="li"><p>Sometimes you want to create user interfaces with the help of widget and association controllers, but the data to be displayed or entered is not stored in your database and thus is not represented in your EOModel (for example a name and password field in a log-in window). Up to WebObjects 5.1, you were not able to use the regular generation-layer controllers for that since they always tried to create an association and actually raised an explicit exception if they could not establish one. In WebObjects 5.2, you can control this behavior a little better with the methods <code>setSuppressesAssociation</code>/<code>suppressesAssociation</code> (XML attribute <code>suppressesAssociation</code>), which were added to EOAssociationController. You can access the <code>widget</code> of the controllers directly to set and get values.</p></li></ul><a name="//apple_ref/doc/uid/TP40000966-1-CJGDEFAG" title="Conversion Guide"></a><h3>Conversion Guide</h3><p>To convert Java Client and Direct to Java Client projects from WebObjects 5.1 to WebObjects 5.2, follow these steps:</p><ol class="ol"><li class="li"><p>Add <code>JavaEORuleSystem.framework</code> to all Direct to Java Client projects.</p></li><li class="li"><p>Rename packages (replace text in this order searching on whole orders; otherwise you will not be able to distinguish between the generation and rule system layer packages any more):</p><ul class="simple-spaceabove"><li><p><code>com.webobjects.eogeneration </code>->  <code>com.webobjects.eogeneration.rules</code></p></li><li><p><code>com.webobjects.eogeneration.client</code> ->  <code>com.webobjects.eogeneration</code></p></li></ul></li><li class="li"><p>Add import statement to all source files importing <code>com.webobjects.eoapplication</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>import com.webobjects.eoapplication.client.*;<span></span></pre></td></tr></table></div></li><li class="li"><p>Update user interface files in Interface Builder:</p><ul class="ul"><li class="li"><p>Update the File’s Owner classes of all frozen interface files for Direct to Java Client applications (which do not use an interface controller class but one of the former <code>com.webobjects.eogeneration.client</code> classes as File’s Owner) to use a class from the new <code>com.webobjects.eogeneration</code> package.</p></li><li class="li"><p>Save all interface files explicitly in Interface Builder to update the archive information (on both Mac OS X and Windows), independent of whether they are used in a Direct to Java Client or a traditional Java Client application with interface controllers.</p></li></ul></li><li class="li"><p>Update WebObjects components:</p><ul class="ul"><li class="li"><p>Recommended: Update all pages using WOJavaClientApplet to use the new Web Start mechanism (WOJavaClientComponent). You will need to split up your components in two parts, one that represents an HTML entry page with a JNLP link and one with the WOJavaClientComponent. To see how this is done, simply create a new Java Client or Direct to Java Client project in Project Builder (and note that there is a method on the <code>Main.java</code> class that you need).</p></li><li class="li"><p>If applet support is still needed and the code binding was used to specify an applet class explicitly and that applet class was <code>com.webobjects.eoapplication.EOApplet</code>, change the value of the binding to <code>com.webobjects.eoapplication.client.EOApplet</code>.</p></li></ul></li><li class="li"><p>Update string constants (if you used the former EODistributionContext constants, you will probably have to add an import statement for <code>com.webobjects.eoapplication.*</code> to your source code):</p><ul class="ul"><li class="li"><p><code>EOApplication.ApplicationDidStart</code> -> <code>EOApplication.ApplicationDidStartNotification</code></p></li><li class="li"><p><code>EOApplication.ApplicationWillQuit</code> -> <code>EOApplication.ApplicationWillQuitNotification</code></p></li><li class="li"><p><code>EOControllerFactory.LanguagesSpecification</code> -> <code>EOControllerFactory.LocalesSpecification</code></p></li><li class="li"><p><code>EODistributionContext.LoadUserDefaultsNotification</code> -> <code>EODefaults.LoadUserDefaultsNotification</code></p></li><li class="li"><p><code>EODistributionContext.SaveUserDefaultsNotification</code> -> <code>EODefaults.SaveUserDefaultsNotification</code></p></li><li class="li"><p><code>EODistributionContext.DefaultsKey</code> -> <code>EODefaults.DefaultsKey</code></p></li></ul></li><li class="li"><p>Update class names:</p><ul class="ul"><li class="li"><p>EODefaults -> EORemoteStorageDefaults</p></li><li class="li"><p>EODefaultResourceBundle -> EOClientResourceBundle</p></li><li class="li"><p>EODocument -> EOObjectDisplayDocument</p></li></ul></li><li class="li"><p>Update method names:</p><ul class="ul"><li class="li"><p><code>standardActivatePreviousWindowActionForApplication</code> -> <code>standardActivatePreviousWindowActionForWindowObserver</code> ( EOAction)</p></li><li class="li"><p><code>collectChangesFromServer</code> -> <code>refreshData</code> ( EOApplication)</p></li><li class="li"><p><code>setAlignmentWidth</code> -> <code>setLabelComponentWidth</code> ( EOWidgetController)</p></li><li class="li"><p><code>alignmentWidth</code> -> <code>labelComponentWidth</code> ( EOWidgetController)</p></li><li class="li"><p><code>setBorders</code> -> <code>setSmallBorder</code>/<code>setMediumBorder</code>/<code>setLargeBorders</code> ( EOUserInterfaceParameters)</p></li></ul></li><li class="li"><p>Remove method invocations:</p><ul class="ul"><li class="li"><p>The methods <code>setAlignmentWidth</code> and <code>alignmentWidth</code> were moved from EOComponentController down the class hierarchy to EOWidgetController (and renamed to <code>setLabelComponentWidth</code> and <code>labelComponentWidth</code>). You can safely remove invocations of these methods to nonwidget controllers (they had no effect when invoked on nonwidget controllers anyway).</p></li><li class="li"><p>The methods <code>setAllowIcons</code> and <code>allowIcons</code> were removed from EOUserInterfaceParameters. You can safely remove invocations of these methods (they had no effect anyway).</p></li></ul></li><li class="li"><p>Find alternative method invocations for methods that were removed:</p><ul class="ul"><li class="li"><p>The method <code>activatePreviousWindow</code> on EOApplication was removed. Invoke the identical method on the application's window observer instead.</p></li><li class="li"><p>The method <code>collectChangesFromServer</code> on EOInterfaceController was removed. Replace it with an invocation to <code>refreshData</code> on EOApplication. Alternatively you can re-create the method on your EOInterfaceController subclasses and invoke <code>refreshData</code> from inside.</p></li><li class="li"><p>The method <code>loadArchiveNamed</code>(<em>String</em>, <em>Object</em>, <em>String</em>) on EOArchive was removed. Replace it with an invocation to <code>loadArchiveNamed</code>(<em>String</em>, <em>Object</em>, <em>String</em>, <em>NSDisposableRegistry</em>) and catch exceptions thrown by this method to find out whether loading the archive was successful.</p></li><li class="li"><p>The method <code>sessionDidTimeOut</code> on EOApplication was removed. The functionality is now handled by EOClientApplicationSupport, which invokes EOApplication's <code>quitWithMessage</code> in case of a session timeout.</p></li></ul></li><li class="li"><p>Update rule system for Direct to Java Client applications:</p><ul class="ul"><li class="li"><p>If you wrote rules using the <code>languages</code> key to get localization information from the D2WContext, update them to use the <code>locales</code> key instead.</p></li><li class="li"><p>By default, abstract entities will not show up as main entities any more. Check the main entities in the Assistant to see whether the desired entities are still selected.</p></li><li class="li"><p>By default, EOActionButtonControllers in modal dialogs will now use the Center option for <code>widgetPosition</code>. If this is not desired, create a rule to use the Top option instead (or edit your frozen XML).</p></li><li class="li"><p>By default, the rule system now integrates EODisplayStatisticsControllers in most windows. If this is not desired, create a rule with the key <code>displayStatistics</code> and the value <code>false</code>.</p></li><li class="li"><p>By default, large views like text areas and QuickTime views are now placed in switch views. If this is not desired, bring up the affected entities and properties in the Widget editor of the Assistant and change the layout hint (probably to FullWidth or Columns).</p></li><li class="li"><p>With the changes to the dynamic widget layout mechanisms, more components end up (partially) resizable. If this is not desired, bring up the affected entities and properties in the Widget editor of the Assistant and set the <code>horizontally</code> or <code>vertically</code> resizable flags (or both) to <code>false</code> (or edit your frozen XML).</p></li><li class="li"><p>By default, more controllers now become transient (especially query widget controllers in the query window). If you need to access these controllers explicitly, create a rule to set transient to <code>false</code> for these controllers (or edit your frozen XML and add an attribute <code>transient="false"</code> to the controllers you need).</p></li><li class="li"><p>The XML attribute <code>alignmentWidth</code> for widget controllers was renamed to <code>labelComponentWidth</code>. If you used that key in a rule or in frozen XML, change it.</p></li></ul></li><li class="li"><p>Update defaults manager: If you use your own EODefaults subclass, note that the method signatures of <code>loadPersistentValues</code> and <code>savePersistentValues</code> have changed and update your subclass accordingly. See the API reference for EODefaults for more details.</p></li><li class="li"><p>The launch sequence of applications has changed significantly. A lot of functionality (and the <code>main</code> method) is now placed in the <code>com.webobjects.eoapplication.client.EOClientApplicationSupport</code> class. </p><p>Applications that customized the launch sequence or dealt explicitly with session timeouts or other three-tier related issues might have to be redesigned to use a subclass of EOClientApplicationSupport.</p></li><li class="li"><p>If you have built applications that repackage the contents of the <code>wojavaclient.jar</code> file into a different <code>.jar</code> file, use the individual <code>.jar</code> files in the <code>WebServerResources/Java</code> directory of these frameworks: JavaEOApplication, JavaEOControl, JavaEODistribution, JavaEOGeneration, JavaEOInterface, JavaEOInterfaceSwing, JavaEORuleSystem, JavaFoundation, and JavaXML instead.</p></li></ol>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2003-03-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/WhatsNew5.2/WhatsNew/WhatsNewIn52.html%3Fid%3DTP40000966-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/WhatsNew5.2/WhatsNew/WhatsNewIn52.html%3Fid%3DTP40000966-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/WhatsNew5.2/WhatsNew/WhatsNewIn52.html%3Fid%3DTP40000966-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
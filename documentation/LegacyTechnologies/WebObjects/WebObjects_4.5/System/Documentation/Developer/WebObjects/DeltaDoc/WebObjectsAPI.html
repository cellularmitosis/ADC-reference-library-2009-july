<HTML>		<HEAD>		<TITLE>WebObjects Framework API Changes					</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b> What's New in WebObjects</font><br><br><!--end of path --><hr><a href="NewInWebObjects.html"><img src="../../../../../images/up.gif" border="0" width="36" height="16"></A></A></a><a name = "BGFCFBFE"></a><h1>WebObjects Framework API Changes</h1><br><p>This chapter details those changes in the API ofthe WebObjects Framework, listing new classes and methods and identifyingAPI that has been deprecated since the previous release.</p><p>This chapter is organized into the following sections:</p><ul><li> <a href="#BGFHHDCF">"New Classes" </a></li><li> <a href="#BGFJHBFC">"New Methods" </a></li><li> <a href="#BGFEADGJ">"Deprecated API" </a></li><li> <a href="#BGFHJFAC">"WOExtensions Changes" </a></li></ul><br><a name = "BGFHHDCF"></a><h2>New Classes</h2><p>This release of WebObjects adds two new classes to the WebObjectsFramework, WOEvent and WOMessage.</p><br><a name = "TP503422995"></a><h3>WOEvent</h3><p>WOEvent is a subclass of EOEvent (defined in the EOControlframework) that serves as the parent class for objects that gatherinformation-such as duration-about various operations in WebObjects.You can see the results of this information gathering in your webbrowser by accessing a special "event display" page, and youcan configure how the results are displayed by accessing a special"event setup" page.</p><p>WOEvent adds knowledge of pages and components to the EOEventclass. Events that are subclasses of WOEvent can be grouped or aggregatedby page or by component. Although you can subclass WOEvent, in mostcases the private subclasses included in the framework will be adequatefor analyzing WebObjects applications.</p><br><a name = "TP503422996"></a><h3>WOMessage</h3><p>WOMessage is the parent class for both WORequest and WOResponse,and implements much of the behavior that is generic to both. WOMessagerepresents a message with an HTTP header and either HTML or XMLcontent. HTML content is typically used when interacting with aWeb browser, while XML content can be used in messages that originate fromor are destined for another application (either an application that"speaks" XML or another WebObjects application). </p><p>The methods of the WOMessage class can be divided primarilyinto two groups, those that deal with a message's content andthose that read and set header information. Most of the remainingWOMessage methods control how the content is encoded and allow youto attach arbitrary "user info" to your WOMessage objects inorder to pass information about a given message to other objectswithin your application.</p><br><a name = "BGFCDEFH"></a><h4>Messages with XML Content</h4><p>The Java version of the WOMessage class contains three methodsthat allow you to construct and interpret messages whose contentis formatted as XML (these methods aren't available to Objective-Cprogrammers). </p><p>The arguments to these methods are XML documents (or, in thecase of <code>appendContentDOMDocumentFragment</code>,a document fragment) as defined by the Document Object Model (DOM).Installed as a part of WebObjects is the <code>com.ibm.xml.dom</code> package (IBM'salphaWorks), which contains various XML parsers for Java writtenby IBM. The included DOM parser is used to generate document anddocument fragment objects from XML data (or to manipulate and/orgenerate XML data from a document object). For more informationon the Document Object Model, see the online documentation at <code>http://www.w3.org/DOM/</code>.</p><br><a name = "TP503422997"></a><h4>Changes to WORequest</h4><p>The following methods are no longer declared in WORequestbut are instead inherited from WORequest's new parent class, WOMessage:</p><ul><li><code>content</code></li><li><code>headerForKey:</code> (<code>headerForKey</code> inJava)</li><li><code>headerKeys</code></li><li><code>headersForKey:</code> (<code>headersForKey</code> inJava)</li><li><code>httpVersion</code></li><li><code>userInfo</code></li></ul><br><a name = "TP503422998"></a><h4>Changes to WOResponse</h4><p>The following methods are no longer declared in WOResponsebut are instead inherited from WOResponse's new parent class,WOMessage:</p><ul><li><code>defaultEncoding</code> (static/classmethod)</li><li><code>setDefaultEncoding:</code> (<code>setDefaultEncoding</code> inJava; static/class method)</li><li><code>addCookie:</code> (<code>addCookie</code> inJava)</li><li><code>appendContentCharacter:</code> (<code>appendContentCharacter</code> inJava)</li><li><code>appendContentData:</code> (<code>appendContentData</code> inJava)</li><li><code>appendContentString:</code> (<code>appendContentString</code> inJava)</li><li><code>content</code></li><li><code>contentEncoding</code></li><li><code>cookies</code></li><li><code>headerForKey:</code> (<code>headerForKey</code> inJava)</li><li><code>headerKeys</code></li><li><code>headersForKey:</code> (<code>headersForKey</code> inJava)</li><li><code>httpVersion</code></li><li><code>removeCookie:</code> (<code>removeCookie</code> inJava)</li><li><code>setContentEncoding:</code> (<code>setContentEncoding</code> inJava)</li><li><code>setContent:</code> (<code>setContent</code> inJava)</li><li><code>setHTTPVersion:</code> (<code>setHTTPVersion</code> inJava)</li><li><code>setHeader:ForKey:</code> (<code>setHeader</code> inJava)</li></ul><br><a name = "TP503422999"></a><h3>WOHTTPConnection</h3><p>The new WOHTTPConnection class is intended to be used as aclient for HTTP communications.  It gives you direct access to theHTTP contents and headers. WOHTTPConnection's sendRequest: methodallows you to send a WORequest object directly to a server, whilereadResponse allows you to receive WOResponse objects from thatsame server.</p><br><a name = "TP503423000"></a><h3>XML Package</h3><p>WebObjects 4.5 includes a new XML package, <code>com.apple.webobjects.xml</code>,which consists of the following:</p><ul><li>WOXMLCoding interface</li><li>WOXMLCoder class</li><li>WOXMLDecoder class</li></ul><p>Use this package to encode and decode objects as XML. TheWOXMLCoder and WOXMLDecoder classes can be used to archive and unarchiveobject data, or to parse and/or generate XML obtained from or destinedfor an external source (such as the World Wide Web). When workingwith such "foreign" XML, you describe the XML elements and propertiesand their mapping to objects in an XML-format "mapping model"that you can create with either a text editor or an XML editor.</p><p>For complete details on the XML framework and its use, seethe reference documentation in the WOInfoCenter. For examples, seethe XML Archiving andRelatedLinks examples (accessible through theWebObjects Info Center under Examples &gt; WebObjects &gt; Java).</p><br><a name = "BGFJHBFC"></a><h2>New Methods</h2><p>In addition to the new event classes (see the discussion of WOEvent/EOEvent elsewherein this document), the following methods have been added to theclasses that make up the WebObjects Framework.</p><br><table border = "1" cellpadding = "3"><caption><strong>WOApplication</strong></caption><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><b>Method</b></td><td rowspan = "1" colspan = "1" valign = "top"><b>Description</b></td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>createContextForRequest:</code> (Objective-C)<code>createContextForRequest</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">Creates a new context object for a given request. Overridethis method if you need to provide your own subclass of WOContext.If you override it, you need not call <code>super</code> inyour overriding method.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>defaultRequestHandlerClassName</code></td><td rowspan = "1" colspan = "1" valign = "top">The default implementation of this method returns "WOComponentRequestHandler",which is the default request handler. If you don't want a sessioncreated for your application's home page, override this methodto return "WODirectActionRequestHandler", making the directaction request handler the default.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>sharedEditingContext</code></td><td rowspan = "1" colspan = "1" valign = "top">This is a convenience method that returns the defaultshared editing context.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>traceAll:</code> (Objective-C only;in Java, this method is still named "<code>trace</code>")</td><td rowspan = "1" colspan = "1" valign = "top">Old "<code>trace</code>" method.</td></tr></table><br><br><table border = "1" cellpadding = "3"><caption><strong>WOAssociation</strong></caption><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><b>Method</b></td><td rowspan = "1" colspan = "1" valign = "top"><b>Description</b></td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>isValueConstantInComponent:</code> (Objective-C)<code>isValueConstantInComponent</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">Returns <code>true</code> when theassociation is "constant." Use this for checking bindings atruntime.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>isValueSettableInComponent:</code> (Objective-C)<code>isValueSettableInComponent</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">Returns <code>false</code> when theassociation is "constant." Use this for checking bindings atruntime. </td></tr></table><br><br><table border = "1" cellpadding = "3"><caption><strong>WOComponent </strong></caption><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><b>Method</b></td><td rowspan = "1" colspan = "1" valign = "top"><b>Description</b></td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>canGetValueForBinding:</code> (Objective-C)<code>canGetValueForBinding</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">Verifies that the binding exists and that <code>valueForBinding</code> willreturn a value.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>canSetValueForBinding:</code> (Objective-C)<code>canSetValueForBinding</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">Verifies that the binding exists and that <code>setValueForBinding</code> willsucceed.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>isEventLoggingEnabled</code></td><td rowspan = "1" colspan = "1" valign = "top">Called to determine if a component wants event logging.This is not desirable, for example, for components which are associatedwith event display as they would interfere with the actual eventlogging. The default implementation of this method returns <code>true</code>.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>isStateless</code></td><td rowspan = "1" colspan = "1" valign = "top">By default, this method returns <code>false</code>,indicating that state will be maintained for instances of the receiver.Overriding this method to return <code>true</code> willmake the component stateless. A single instance of each statelesscomponent is shared between multiple sessions, reducing your application'smemory footprint.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>reset</code></td><td rowspan = "1" colspan = "1" valign = "top">This method-which is only invoked if the componentis stateless-allows a component instance to reset or delete temporaryreferences to objects that are specific to a given context.</td></tr></table><br><br><table border = "1" cellpadding = "3"><caption><strong>WODisplayGroup </strong></caption><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><b>Method</b></td><td rowspan = "1" colspan = "1" valign = "top"><b>Description</b></td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>globalDefaultForValidatesChangesImmediately</code></td><td rowspan = "1" colspan = "1" valign = "top">This static/class method returns the class default controllingwhether changes are immediately validated.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>globalDefaultStringMatchFormat</code></td><td rowspan = "1" colspan = "1" valign = "top">This static/class method returns the default string matchformat for the class.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>globalDefaultStringMatchOperator</code></td><td rowspan = "1" colspan = "1" valign = "top">This static/class method returns the default string matchoperator for the class.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>insertObjectAtIndex</code> (New inJava only; the Objective-C version of this method previously existed)</td><td rowspan = "1" colspan = "1" valign = "top">Inserts the supplied object into the receiver's EODataSource anddisplayed objects at the specified index, if possible. </td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>setGlobalDefaultForValidatesChangesImmediately:</code> (Objective-C)<code>setGlobalDefaultForValidatesChangesImmediately</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">This static/class method sets the class default controllingwhether changes are immediately validated.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>setGlobalDefaultStringMatchFormat:</code> (Objective-C)<code>setGlobalDefaultStringMatchFormat</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">This static/class method sets the default string matchformat for the class.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>setGlobalDefaultStringMatchOperator:</code> (Objective-C)<code>setGlobalDefaultStringMatchOperator</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">This static/class method sets the default string matchoperator for the class.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>stringQualifierOperators</code></td><td rowspan = "1" colspan = "1" valign = "top">Returns an array containing all of the relational operatorssupported by EOControl's EOQualifier that work exclusively onstrings: "<code>starts with</code>", "<code>contains</code>","<code>ends with</code>", "<code>is</code>", and"<code>like</code>".</td></tr></table><br><br><a name = "BGFHEAHI"></a><h3>Other WODisplayGroup Changes</h3><p>In the past, EODisplayGroup and WODisplayGroup replaced allinstances of "=" in queries involving string attributeswith the <code>defaultStringMatchOperator</code>.  Thisis <code>caseInsensitiveLike</code>, althoughit can be changed by a variety of instance or class methods on displaygroup.  Additionally, these string based queries had the wildcardcharacter appended to them by means of the <code>defaultStringMatchFormat</code> whichis initially <code>@"%@*"</code>.</p><p>These transformations took place even if the <code>EOQualifierOperatorEqual</code> isexplicitly set in the display group's <code>queryOperator</code> dictionary.</p><p>As of version 4.5, a display group won't alter "=" ifit is explicitly set.  It will provide the old behavior only ifthe query operator is not set.  Therefore, <code>EOQualifierOperatorEqual</code> willno longer provide any pattern matching functionality and will generate"=" instead of "like" in the SQL.</p><p>You can get the old behavior if you set the <code>WORequiresWOF40Compatibility</code> default. Alternatively, you can replace the "=" in the appropriateentry of the <code>queryOperator</code> dictionary withthe empty string or with <code>"starts with"</code> (bothprovide the default behavior).</p><p>Additionally, display group provides a new instance method,<code> stringOperators</code>,which returns an array of string comparison operators including <code>"startswith"</code>, <code>"ends with"</code>, <code>"contains"</code>, <code>"is"</code>,and <code>"like"</code>.  <code>"startswith"</code>, <code>"ends with"</code>,and <code>"contains"</code> all usethe <code>defaultStringMatchOperator</code> and thematch formats <code>@"%@*", @"*%@"</code>,and <code>@"*%@*"</code> respectively. The <code>defaultStringMatchOperator</code> is still <code>caseInsensitiveLike</code>. <code>"is"</code> and <code>"like"</code> mapexactly to the "=" and <code>caseInsensitiveLike</code> operators.</p><p>The pre-v4.5 behavior was precisely <code>"startswith"</code>.</p><p>These string operators are only supported by display group,not EOQualifier, nor any other part of EOF in this release.</p><br><a name = "BGFEADGJ"></a><h2>Deprecated API</h2><br><table border = "1" cellpadding = "3"><caption><strong>WOApplication</strong></caption><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><b>Deprecated API</b></td><td rowspan = "1" colspan = "1" valign = "top"><b>New API or Workaround</b></td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>logToMonitorWithFormat:</code> (Objective-C)<code>logToMonitorString</code> (Java)</td><td rowspan = "1" colspan = "1" valign = "top">New features in Monitor will allow logging of information.The deprecated API does nothing.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>monitorHost</code> (The Java versionof this method has not yet been deprecated)</td><td rowspan = "1" colspan = "1" valign = "top">New monitor features eliminate the need for this method.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>setMonitorHost:</code> (The Java versionof this method has not yet been deprecated)</td><td rowspan = "1" colspan = "1" valign = "top">New monitor features eliminate the need for this method.</td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>trace:</code> (Deprecated in Objective-C only;in Java, this method remains as-is)</td><td rowspan = "1" colspan = "1" valign = "top"><code>traceAll:</code></td></tr></table><br><br><table border = "1" cellpadding = "3"><caption><strong>WOResponse</strong></caption><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><b>Deprecated API</b></td><td rowspan = "1" colspan = "1" valign = "top"><b>New API or Workaround</b></td></tr><tr><td rowspan = "1" colspan = "1" valign = "top" scope="row"><code>appendContentBytes:</code> (Objective-C only;this method never existed in the Java version of WOResponse)</td><td rowspan = "1" colspan = "1" valign = "top">Deprecated. Use <code>appendContentData:</code>,which is inherited from WOMessage.</td></tr></table><br><p></p><br><a name = "BGFHJFAC"></a><h2>WOExtensions Changes</h2><p>The WebObjects Extensions framework has changed in the followingways:</p><ul><li>Documentation for the components is now provided</li><li>12 reusable components have been added</li><li>11 reusable components have been made stateless</li><li>WOTableString has been deprecated</li></ul><br><a name = "TP503423001"></a><h3>WOExtensions ReferenceDocumentation</h3><p>A new document titled WebObjects Extensions Component Specificationshas been added to cover the reusable components in the WebObjectsExtensions framework. You can access this document from the WebObjectsInfo Center.</p><br><a name = "TP503423002"></a><h3>New Components</h3><p>The following reusable components are new:</p><ul><li>JSAlertPanel</li><li>JSConfirmPanel</li><li>JSImageFlyover</li><li>JSModalWindow</li><li>JSTextFlyover</li><li>JSValidatedField</li><li>WOCheckboxMatrix</li><li>WOEventDisplayPage</li><li>WOEventSetupPage</li><li>WOKeyValueConditional</li><li>WORadioButtonMatrix</li><li>WOTabPanel</li></ul><p>See the WebObjects Extensions Component Specifications formore information about these components.</p><br><a name = "TP503423003"></a><h3>Stateless Components</h3><p>Making a reusable component stateless significantly improvesthe performance of the component. To this end, the following WebObjectsExtension components are now stateless:</p><ul><li>WOAnyField</li><li>WOBatchNavigationBar</li><li>WODictionaryRepetition</li><li>WOSimpleArrayDisplay</li><li>WOSimpleArrayDisplay2</li><li>WOSortOrder</li><li>WOSortOrderManyKey</li><li>WOTable</li><li>WOThresholdColoredNumber</li><li>WOToManyRelationship</li><li>WOToOneRelationship</li></ul><p>The conversion has not changed their function.</p><br><a name = "TP503423004"></a><h3>Deprecated Elements</h3><p>WOTableString is now deprecated. This component was used toimprove the appearance of table cells containing empty strings.The HTML specification designates that the borders for table cellsshould only appear when the cell has content; which causes tablecells containing empty WOStrings appear without their borders. TheWOTableString reusable component was provided as a workaround thatrendered as a non-breaking space when its value was empty, preservingthe borders.</p><p>Instead of using the WOTableString reusable component, usethe WOString dynamic element with the valueWhenEmpty attribute boundto "&nbsp;". </p><br><a href="NewInWebObjects.html"><img src="../../../../../images/up.gif" border="0" width="36" height="16"></A></A></a></BODY></HTML>
<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Device Driver Execution Contexts</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.140.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.140.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.142.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H1.Heading1"><A NAME="pgfId=3311"> </A><A NAME="10323"> </A>Device Driver Execution Contexts</H1><P CLASS="T1.Text1"><A NAME="pgfId=3315"> </A>As explained in <A HREF="PCI_BOOK.75.html#28012" CLASS="XRef">Noninterrupt and Interrupt-Level Execution</A>, code in PCI-based Macintosh computers may run in any of three execution contexts:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3317"> </A><A NAME="marker=3316"> </A>Hardware interrupt level is the execution context provided to a device driver's interrupt handler. Hardware interrupts occur as a direct result of a hardware interrupt requests. Page faults are not allowed at this context. Hardware interrupt level is also known as <I CLASS="italics">primary interrupt level.</I></LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3319"> </A><A NAME="marker=3318"> </A>Secondary interrupt level is the execution context similar in concept to the previous Mac&nbsp;OS deferred task environment, which allows drivers to defer complex processing in order to minimize interrupt latency. Page faults are not allowed at this context.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3321"> </A><A NAME="marker=3320"> </A>Noninterrupt level, usually called <I CLASS="italics">task level,</I> is the context where all other code is executed. Page faults are allowed at this context.</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=3322"> </A>Additional information about interrupts contexts can be found in Technote&nbsp;1104, &quot;Interrupt-Safe Routines.&quot; Technotes are available on the Developer CD and at the Apple Developer web site. </P><DIV><blockquote><p CLASS="NoteHead"><b><A NAME="pgfId=18524"> </A>Note</b></p><P CLASS="Note"><A NAME="pgfId=3323"> </A>Many device driver services are available in only one or two of the execution contexts just listed. It is the responsibility of the driver writer to conform to these limitations. Drivers that violate them will not work with future releases of Mac OS. For lists of service availability, see <A HREF="PCI_BOOK.1b0.html#15741" CLASS="XRef">Service Limitations</A>. </P></blockquote></DIV><H2 CLASS="RoH.RoutineHeadingTOC"><A HREF="PCI_BOOK.142.html#pgfId=3330" CLASS="Hypertext"><TT CLASS="cv"></TT></A></H2><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.140.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.140.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.142.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
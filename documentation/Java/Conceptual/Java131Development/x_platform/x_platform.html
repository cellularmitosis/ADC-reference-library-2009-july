<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Java 1.3.1 Development for Mac OS X (Legacy): Cross-Platform Practices for Great Native Behavior</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Cross-Platform Practices for Great Native Behavior"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000708" title="Cross-Platform Practices for Great Native Behavior"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Java-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000528" target="_top">Java</a> &gt; <a href="../about/about.html#//apple_ref/doc/uid/TP30000704-DontLinkElementID_24">Java 1.3.1 Development for Mac OS X (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../tools/tools.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../value_add/value_add.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_88" title="Cross-Platform Practices for Great Native Behavior"></a><h1><a name="//apple_ref/doc/uid/TP30000708-BCIJGFFE" title="Cross-Platform Practices for Great Native Behavior"></a>Cross-Platform Practices for Great Native Behavior</h1><p>If you are developing Java applications that you plan to deploy on multiple platforms, there are some things that you should keep in mind to support Mac OS X as well as the other platforms. This chapter discusses some basic points to consider and small changes you can make to your Java code to help it run well on any platform, but are especially important to consider to make your application look like a Mac OS X application. In general, these changes do not require you to use any APIs or properties specific to Mac OS X. This chapter mainly discusses user interface issues.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF113">The Aqua Look and Feel</a>
				
			<br/>
			
        
			
			
				<a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF117">Placing and Painting Components</a>
				
			<br/>
			
        
			
			
				<a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF127">Windows and Dialogs</a>
				
			<br/>
			
        
			
			
				<a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF130">Menus</a>
				
			<br/>
			
        
			
			
				<a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF134">Event Handling</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000708-TPXREF113" title="The Aqua Look and Feel"></a><h2>The Aqua Look and Feel</h2><p><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_292"></a>Before discussing cross-platform coding practices, it is important to lay the foundation of what is available in Mac OS X. The default interface to the operating system is called Aqua. Although other interfaces can be displayed in Mac OS X, there is great benefit in usability by adhering closely to the native interface. To that end, Apple has worked hard to make your Java applications appear and behave as much like native applications as possible. Taking advantage of the basic look of the Aqua user interface is very simple. It requires you to do nothing other than write clean Java code. In Mac OS X, the default pluggable look and feel (PLAF) for Swing applications, <code>com.apple.mrj.swing.MacLookAndFeel</code>, gives an Aqua appearance to your Swing applications. So if you don’t explicitly change your code to invoke another look and feel, Swing applications look like native applications by default.</p><p>In general it is good practice to avoid explicitly setting the PLAF in your Java code.This makes your application fit in much better on any platform. In the case of Mac OS X, this is especially true. If do you need to change the look and feel of your application to test it for different platforms, it is better to set the <code>swing.defaultlaf</code> Java property for your application at runtime by passing in <code>-Dswing.defaultlaf=</code><em>yourLookAndFeel</em> when launching the application. For development purposes, you may want to temporarily change Mac OS X’s default look and feel. You can do this by modifying the <code>swing.properties</code> file in <code>/Library/Java/Home/lib</code>.</p><p>You don’t need to use AWT components for the native look of Aqua because Swing provides it. You can enjoy further benefits in performance and <a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_293"></a>predictable graphics behavior by not mixing the heavyweight and lightweight components of AWT and Aqua.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_294"></a></p><p>Behavior is part of a user interface as well as appearance. Automatic adoption of the Aqua appearance is a first step, but there are many details that still are in your hands when trying to provide the best Aqua experience. <a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_295"></a><em>Inside Mac OS X: Aqua Human Interface Guidelines</em> is the definitive guide for how applications should appear and behave in Mac OS X and why they should behave that way. If you have a decision to make that is not specified anywhere else, that document is a great source of answers to user interface questions. If you find areas where your pure Java applications do not take advantage of these guidelines, please let Apple know. </p><p>There are numerous details that go into designing a first-class application on any platform. Although it may be impossible to build a perfect application, there are a few topics that are hot issues to users of a particular platform. As a Java developer, a few areas to keep in mind as you design are discussed in the following sections.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_296"></a></p><a name="//apple_ref/doc/uid/TP30000708-TPXREF117" title="Placing and Painting Components"></a><h2>Placing and Painting Components</h2><p>The complicated nestings and interrelations of containers and components in Swing interfaces can sometimes make it difficult to remember that the development platform is not always the deployment platform. The different look and feel designs available can provide widely variable appearances and behaviors. This section brings to the foreground some details that while helping your application to work well on any platform, are especially important in Mac OS X.</p><a name="//apple_ref/doc/uid/TP30000708-TPXREF124" title="Layout Managers"></a><h3>Layout Managers</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_297"></a><p>Explicitly setting the x and y coordinates is dangerous when you consider the multiple platforms and look and feel designs that the application may run under. The results of a “well-designed” application in one environment may be disastrous in another, with components painting on top of each other and running off the edge of a container, among other things. It is generally unsafe to assume that placing buttons and controls at explicit coordinates is portable. Use the AWT layout managers to solve this problem. The layout managers use abstracted location constants and determine the exact placement of these controls for a specific environment. Layout managers take into account the sizes of each individual component while maintaining their placement relative to one another within the container.</p><a name="//apple_ref/doc/uid/TP30000708-TPXREF125" title="Sizing Components"></a><h3>Sizing Components</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_298"></a><p>In general, do not set component sizes explicitly. Each look and feel has font styles and sizes. These font sizes will affect the required size of the component containing the text. Moving explicitly sized components to a new look and feel with a larger font size can cause problems. The safest means of keeping your components a proper, minimal size in a portable manner is to simply use <code>yourComponent.setSize(yourComponent.getPreferredSize())</code>.</p><p>Most layout managers and containers respect a components preferred size, usually making this call unnecessary. As your interface becomes more complicated however, you may find this call handy for containers with many child components.</p><a name="//apple_ref/doc/uid/TP30000708-TPXREF126" title="Coloring Components"></a><h3>Coloring Components</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_299"></a><p>Because a given look and feel tends to have universal coloring and styling for most, if not all of its controls, developers may be tempted to create custom components that match the look and feel of standard user interface classes. This is perfectly legal, but adds maintenance and portability costs. It is easy to set an explicit color that you think works well with the current look and feel. Changing to a different look and feel though may surprise you with an occasional non-standard component. To ensure that your custom control matches standard components, query the <code>UIManager</code> class for the desired colors. An example of this is a custom Window object that contains some standard lightweight components but wants to paint its uncovered background to match that of the rest of the applications containers and windows. To do this, you can call</p><div class="codesample"><table><tr><td scope="row"><pre>myPanel.setBackground(UIManager.getColor("window"))<span></span></pre></td></tr></table></div><p>This returns the color appropriate for the current look and feel. The other advantage of using such standard methods is that they provide more specialized backgrounds that are not easily reconstructed, such as the striped background used for Aqua containers and windows.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_300"></a></p><a name="//apple_ref/doc/uid/TP30000708-TPXREF127" title="Windows and Dialogs"></a><h2>Windows and Dialogs</h2><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_301"></a><p>Window coordinates and insets are compatible with the JDK. In a nutshell: Window bounds refer to the outside of the window’s frame; the coordinates of the window put (0,0) at the top left of the title bar (not at the top left of the content region as in MRJ on Mac OS 9). The <code>getInsets</code> method returns the amount by which content needs to be inset in the window to avoid the window border. This should affect only applications that are doing precision positioning of windows (especially full-screen windows), or those that bypass layout managers to do their own hard-coded component positioning.</p><p>Windows behave differently in Mac OS X than they do on other platforms. For example an application can be open without having any windows. Windows minimize to the Dock, and windows with variable content always have scroll bars. This section highlights the windows details you should be aware of and discusses how to deal with window behavior in Mac OS X.</p><a name="//apple_ref/doc/uid/TP30000708-TPXREF114" title="Use of the Multiple Document Interface"></a><h3>Use of the Multiple Document Interface</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_302"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_303"></a><p>The multiple document interface (MDI) model of the <code>javax.swing.JDesktopPane</code> class can provide a confusing user experience in Mac OS X. Windows minimized in a JDesktopPane move around as the JDesktopPane changes size. In the JDesktopPane, windows minimize to the bottom of the pane while independent windows minimize to the Dock. Furthermore, JDesktopPane restricts users from moving windows where they want. They are forced to deal with two different scopes of windows, those within the JDesktopPane and the JDesktopPane itself. Normally Mac OS X users interact with applications through numerous free-floating, independent windows and a single menu bar at the top of the screen. Users can intersperse these windows with other application windows (from the same application or other applications) anywhere they want in their view, which includes the entire desktop. Users are not constrained visually to one area of the screen when using a particular application. When building cross-platform applications with multiple windows, it is generally a good idea to avoid using <code>javax.swing.JDesktopPane</code>s. </p><p>There are times when there is not a simple way to solve window-related problems other than using a JDesktopPane. For example, you might have a Java application that requires a floating toolbar-like entity, referred to in Swing as an internal utility window”, that needs to always remain in the foreground regardless of which document is active. Although Java currently has no means of providing this other than by using JDesktopPane, for new development you may want to consider designing a more platform-neutral user interface with a single dynamic container, similar to applications like JBuilder or LimeWire. If you are bringing an existing MDI-based application to the Macintosh from another platform and do not want to refactor the code, Mac OS X does support the MDI as specified in the J2SE 1.3.1 specification.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_304"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_305"></a></p><a name="//apple_ref/doc/uid/TP30000708-TPXREF118" title="Windows With Scroll Bars (Using JScrollPanes)"></a><h3>Windows With Scroll Bars (Using JScrollPanes)</h3><p><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_306"></a>In Mac OS X, scrollable document windows have a scroll bar regardless of whether or not there is enough content in the window to require scrolling. The scroller itself is present only when the size of the content exceeds the viewable area of the window. This prevents users from perceiving that the viewable area is changing size. By default, a Swing JFrame has no scroll bars, regardless of how it is resized. The easiest way to provide scrollable content in a frame is to place your frame’s components inside a JScrollPane, which can then be added to the parent frame. In the default behavior of JScrollPane however, scrollbars only appear if they content in the pane exceeds the size of the window. If you are using a JScrollPane in your application, you can set the JScrollPane’s scroll bar policy to always display the scroll bars, even when the content is smaller than the viewable size of the window. An example is shown in <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF123">Listing 5-1</a></span>.</p><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_89" title="Listing 5-1Setting JScrollBar policies to be more like Aqua"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP30000708-TPXREF123" title="Listing 5-1Setting JScrollBar policies to be more like Aqua"></a><strong>Listing 5-1&nbsp;&nbsp;</strong>Setting JScrollBar policies to be more like Aqua</p><div class="codesample"><table><tr><td scope="row"><pre>JScrollPane jsp = new JScrollPane();<span></span></pre></td></tr><tr><td scope="row"><pre>jsp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);<span></span></pre></td></tr><tr><td scope="row"><pre>jsp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);<span></span></pre></td></tr></table></div><p>With this setting the scroll bars are solid—with scrollers appearing when the contents are larger than the viewable area. You might want to do this conditionally based on the host platform since the default policy, <code>AS_NEEDED</code>, may more closely resemble other platforms native behavior.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_307"></a></p><a name="//apple_ref/doc/uid/TP30000708-TPXREF119" title="File Choosing Dialogs"></a><h3>File Choosing Dialogs</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_308"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_309"></a><p><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_310"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_311"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_312"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_313"></a>The<code> java.awt.FileDialog</code> and <code>javax.swing.JFileChooser</code> classes are the two main mechanisms to create quick and easy access to the file system for Java applications. Although each has its advantages, <code>java.awt.FileDialog</code> provides considerable benefit in making your application behave more like a native application. The difference between the two is especially evident in Mac OS X as <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-BCIJAHGH">Figure 5-1</a></span> and <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-BCIDHGHE">Figure 5-2</a></span> show.</p><br/><div><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_90" title="Figure 5-1java.awt.FileDialog"></a><p><a name="//apple_ref/doc/uid/TP30000708-BCIJAHGH" title="Figure 5-1java.awt.FileDialog"></a><strong>Figure 5-1&nbsp;&nbsp;</strong><code>java.awt.FileDialog</code></p><img src = "../art/awt_style_file_browser.gif" alt = "java.awt.FileDialog" width="363" height="306"></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_91" title="Figure 5-2javax.swing.jFileChooser"></a><p><a name="//apple_ref/doc/uid/TP30000708-BCIDHGHE" title="Figure 5-2javax.swing.jFileChooser"></a><strong>Figure 5-2&nbsp;&nbsp;</strong><code>javax.swing.jFileChooser</code></p><img src = "../art/swingstyle_filebrowser.gif" alt = "javax.swing.jFileChooser" width="399" height="267"></div><br/><p></p><p>The column-view style of browsing is adopted automatically by the AWT FileDialog while the Swing JFileChooser uses a navigation style different from that of native Mac OS X applications. Unless you need the functional advantages of JFileChooser you probably want to use <code>java.awt.FileDialog</code>. Since the FileDialog is modal and draws on top of other visible components, which is not the usual consequence of mixing Swing and AWT components.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_314"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_315"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_316"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_317"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_318"></a></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_92" title="Note"></a><p><strong>Note:</strong>&nbsp;<code>javax.swing.JFileChooser</code> only supports traversal of Mac OS X file aliases in the default file view. If you replace it, aliases are not traversable. This limitation does not affect soft links, only Mac OS X aliases.</p></div><a name="//apple_ref/doc/uid/TP30000708-TPXREF129" title="Dealing With Bundles in Mac OS X"></a><h4>Dealing With Bundles in Mac OS X</h4><p>As described in <span class="content_text"><a href="../deploying/deploying.html#//apple_ref/doc/uid/TP30000706-BCIJBDJB">“Application Bundles,”</a></span> a native Mac OS X application is packaged as a bundle, which appears in the Finder as a single object but is actually a directory that contains all the resources of an application. Packages are also bundles that can be viewed as single objects or as directories. Java applications using JFileChooser or FileDialog recognize bundles as directories and allow inappropriate navigation. If you are building an application for developers, you might want to display the actual, on-disk contents of the directory, but if you are building an application for an end user, you do not want to display the bundle contents. Apple provides properties for both dialog classes that allow you the option of controlling how application and package bundles are displayed.</p><p><code>java.awt.FileDialog</code><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_319"></a> can be set to display application and package bundles as non navigable using the <code>com.apple.macos.use-file-dialog-packages<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_320"></a></code> runtime system property. For example, to turn off navigation, run your application as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>java -Dcom.apple.macos.use-file-dialog-packages=true yourApplication<span></span></pre></td></tr></table></div><p>The resulting file dialog resembles <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-BCIDCEGB">Figure 5-3</a></span>. Notice that you cannot navigate into the application bundle.</p><br/><div><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_93" title="Figure 5-3Application displayed as an atomic object"></a><p><a name="//apple_ref/doc/uid/TP30000708-BCIDCEGB" title="Figure 5-3Application displayed as an atomic object"></a><strong>Figure 5-3&nbsp;&nbsp;</strong>Application displayed as an atomic object</p><img src = "../art/awt_chooser_as_bundle.gif" alt = "Application displayed as an atomic object" width="449" height="303"></div><br/><p>The default setting of <code>com.apple.macos.use-file-dialog-packages</code>, <code>false</code>, leaves the contents of application and package bundles navigable by users as seen in <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-BCIFDFJH">Figure 5-4</a></span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_94" title="Figure 5-4Application displayed as a directory"></a><p><a name="//apple_ref/doc/uid/TP30000708-BCIFDFJH" title="Figure 5-4Application displayed as a directory"></a><strong>Figure 5-4&nbsp;&nbsp;</strong>Application displayed as a directory</p><img src = "../art/awt_chooser_default.gif" alt = "Application displayed as a directory" width="454" height="303"></div><br/><p>You can set this behavior in your application bundle using the technique described in <span class="content_text"><a href="../deploying/deploying.html#//apple_ref/doc/uid/TP30000706-TPXREF105">“Setting the Java Runtime Properties for an Application Bundle.”</a></span> This allows you to alter your AWT dialogs for Mac OS X without any code change. If your application requires unique instances to behave differently, you can set the property to <code>true</code> or <code>false</code> at runtime as necessary using <code>System.setProperty</code>.</p><p>The <code>FileDialog.setFile</code> method does not work as expected in Mac OS X, so you can not specify which directory the dialog opens in.</p><p><code>javax.swing.JFileChooser</code> offers more flexibility than <code>java.awt.FileDialog</code>. If you are already using it in your code, there are two properties that let you specify whether or not application and package bundles reveal their contents. Modifying JFileChooser’s behavior does require you to modify your source code. The properties <code>JFileChooser.appBundleIsTraversable</code> and <code>JFileChooser.packageIsTraversable</code> take values of <code>never</code> or <code>always</code>. If you want to hide the contents of both types of bundles, set <code>JFileChooser.packageIsTraversable</code> to <code>never</code>. If you want to hide the contents of application bundles but show the contents of package bundles, set <code>JFileChooser.appBundleIsTraversable</code> to <code>never</code>. Generally, you should set <code>JFileChooser.packageIsTraversable</code> to <code>never</code>. </p><p>You can set these properties globally for all instances of JFileChooser in your application with the <code>UIManager.put</code> method. You can set them on a per-instance basis via the <code>putClientProperty</code> instance method inherited from <code>javax.swing.JComponent</code>.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_321"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_322"></a></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_95" title="Note"></a><p><strong>Note:</strong>&nbsp;These properties have an effect only when using the Swing’s Aqua look and feel in Mac OS X.</p></div><a name="//apple_ref/doc/uid/TP30000708-TPXREF130" title="Menus"></a><h2>Menus</h2><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_323"></a><p>One difficulty in cross-platform Java user interface development is dealing with menus. The appearance of menu items tends to vary between platforms, as does how you handle meta keys described in menus. Unfortunately, many Java programmers write their applications with only the current development platform in mind and explicitly specify the appropriate modifier or trigger in their code. This poses problems in porting applications from platform to platform, as well as risking misinterpretation of what the platform’s appropriate triggers are. Elegant and portable solutions to creating the appropriate actions on any given platform do exist and are covered in the following sections.</p><a name="//apple_ref/doc/uid/TP30000708-TPXREF131" title="Menu Shortcuts"></a><h3>Menu Shortcuts</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_324"></a><p>Keyboard shortcuts for invoking menu actions are often set with an explicit <code>javax.swing.KeyStroke</code> specification. This becomes complicated when moving to a new platform with a different modifier key because new KeyStrokes need to be conditionally created based on the current client platform. The solution to this problem is to use <code>java.awt.Toolkit.getMenuShortcutKeyMask</code> to ask the system for the appropriate key rather than defining it yourself. </p><p>When calling this method, the current platform’s Toolkit implementation returns the proper mask for you. This single call checks for the current platform and then guesses which key is correct. In the case of adding a Copy item to a menu, this means that you can replace the complication of <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF121">Listing 5-2</a></span> with the simplicity of <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-BCIEJCJI">Listing 5-3</a></span>.</p><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_96" title="Listing 5-2Explicitly setting KeyStrokes based on the host platform"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP30000708-TPXREF121" title="Listing 5-2Explicitly setting KeyStrokes based on the host platform"></a><strong>Listing 5-2&nbsp;&nbsp;</strong>Explicitly setting KeyStrokes based on the host platform</p><div class="codesample"><table><tr><td scope="row"><pre>JMenuItem jmi = new JMenuItem("Copy");<span></span></pre></td></tr><tr><td scope="row"><pre>    String vers = System.getProperty("os.name").toLowerCase();<span></span></pre></td></tr><tr><td scope="row"><pre>    if (s.indexOf("windows") != -1) {<span></span></pre></td></tr><tr><td scope="row"><pre>       jmi.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, Event.CTRL_MASK));<span></span></pre></td></tr><tr><td scope="row"><pre>    } else if (s.indexOf("mac") != -1) {<span></span></pre></td></tr><tr><td scope="row"><pre>       jmi.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, Event.META_MASK));<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_97" title="Listing 5-3Using getMenuShortcutKeyMask to set meta keys"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP30000708-BCIEJCJI" title="Listing 5-3Using getMenuShortcutKeyMask to set meta keys"></a><strong>Listing 5-3&nbsp;&nbsp;</strong>Using <code>getMenuShortcutKeyMask</code> to set meta keys</p><div class="codesample"><table><tr><td scope="row"><pre>JMenuItem jmi = new JMenuItem("Copy");<span></span></pre></td></tr><tr><td scope="row"><pre>jmi.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C,<span></span></pre></td></tr><tr><td scope="row"><pre>    Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()));<span></span></pre></td></tr></table></div><p>Most common actions in Mac OS X have a keyboard equivalent that uses the Command key, previously known as the Apple key, as a modifier. There may be additional modifier keys like Shift, Option, or Control, but the Command key is the primary key that alerts an application that what follows is a command, not regular input. Not all platforms provided this consistency in user interface behavior. </p><p>Different keys may prompt an application to begin listening for commands. The code presented in <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-BCIEJCJI">Listing 5-3</a></span> provides only one generalized mask, so you still may need to make conditional settings depending on your intended host platform. The fact that Mac OS X keyboard equivalents use Command makes your life a bit easier if you’re bringing your application to Mac OS X. To make sure you are not overriding any of the keyboard commands Macintosh users have been accustomed to for over twenty years, see <em>Inside Mac OS X: Aqua Human Interface Guidelines</em><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_325"></a> for the definitive list of the most common and reserved shortcuts.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_326"></a></p><p>Some platforms support menu item mnemonics or single-key shortcuts to menus and their contents using the Alt key. Mnemonics<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_327"></a> for these shortcuts are highlighted with a single underlined letter in the menu or item’s name. This is a foreign concept to Mac OS X users. Although it is supported as a part of Java, the suggested way to handle the identification of keyboard shortcuts in Mac OS X is by clearly identifying all of the required keys. For an example, look at the File menu in the Finder. When writing your Java applications, it is suggested that you apply Swing mnemonics in a platform-sensitive manner in your code if possible, such as using a single <code>setMnemonics()</code><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_328"></a> method that is conditionally called when constructing your interface.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_98" title="Note"></a><p><strong>Note:</strong>&nbsp;Since the <code>ALT_MASK</code> modifier evaluates to the Option key on the Mac, Control-Alt masks set for Windows become Command-Option masks if you use <code>getMenuShortcutKeyMask</code> in conjunction with <code>ALT_MASK</code>.</p></div><a name="//apple_ref/doc/uid/TP30000708-TPXREF133" title="Menu Item Icons"></a><h3>Menu Item Icons</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_329"></a><p>Like mnemonics, menu item icons are also available and functional via Swing in Mac OS X. They are not a standard part of the Aqua interface, although some applications do display them—most notably the Finder in the Go menu. You may want to consider applying these icons conditionally based on platform. Whether or not you choose to display menu item icons in Mac OS X, you should be aware that Aqua does specify a specific set of special characters to be used in menus. See the information on using special characters in menus in <em>Inside Mac OS X: Aqua Human Interface Guidelines</em></p><a name="//apple_ref/doc/uid/TP30000708-TPXREF116" title="Contextual Menus"></a><h3>Contextual Menus</h3><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_330"></a><p>There is no problem supporting contextual menus in your Java applications on Mac OS X—they are fully supported. There are slight differences in terminology though. Java calls them popup menus<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_331"></a> while Aqua calls them contextual menus.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_332"></a> More important is how they are triggered on different platforms. On Mac OS X, they are triggered by a Control-click. (By default, the second button of a two-button mouse maps to Control-click in Mac OS X.) In Windows, the right mouse button is the standard trigger for contextual menus.</p><p>These are two very different cases, which could result in fragmented and conditional code. One important aspect of both triggers is shared, the mouse click. To ensure that your program is interpreting the proper contextual menu trigger, it is again a good idea to ask the AWT to do the interpreting for you with <code>java.awt.event.MouseEvent.isPopupTrigger</code>.</p><p>The method is defined in <code>java.awt.event.MouseEvent</code> because you need to activate the contextual menu through a <code>java.awt.event.MouseListener</code> on a given component when a mouse event on that component is detected. The important thing to determine is how and when to detect the proper event. In Mac OS X, the pop up trigger is set on <code>MOUSE_PRESSED</code>. In Windows it is set on <code>MOUSE_RELEASED</code>. For portability, both cases should be considered as shown in <span class="content_text"><a href="x_platform.html#//apple_ref/doc/uid/TP30000708-TPXREF122">Listing 5-4</a></span>.<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_333"></a></p><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_99" title="Listing 5-4Using isPopupTrigger to detect contextual menu activation"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP30000708-TPXREF122" title="Listing 5-4Using isPopupTrigger to detect contextual menu activation"></a><strong>Listing 5-4&nbsp;&nbsp;</strong>Using <code>isPopupTrigger</code> to detect contextual menu activation</p><div class="codesample"><table><tr><td scope="row"><pre>JLabel label = new JLabel("I have a pop up menu!");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>label.addMouseListener(new MouseAdapter(){<span></span></pre></td></tr><tr><td scope="row"><pre>    public void mousePressed(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>       evaluatePopup(e);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void mouseReleased(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>       evaluatePopup(e);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    private void evaluatePopup(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>       if (e.isPopupTrigger()) {<span></span></pre></td></tr><tr><td scope="row"><pre>          // show the pop up menu...<span></span></pre></td></tr><tr><td scope="row"><pre>       }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>});<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000708-TPXREF134" title="Event Handling"></a><h2>Event Handling</h2><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_334"></a><p>Two notes on event handling may be useful to your in your development and deployment of applications in Mac OS X:</p><ul class="ul"><li class="li"><p>Many of the Swing and AWT components are implemented with native code from the Carbon API of Mac OS X<a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_335"></a><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_336"></a>. Although this should not affect your Java code, it might be important information in debugging applications that do not appear to behave correctly, especially in regard to the runtime handling of events. If you do find an issue where the event handling is not as specified by the Java 2 specification, please file a bug as explained in <span class="content_text"><a href="../about/about.html#//apple_ref/doc/uid/TP30000704-BCICBDCC">“Filing and Tracking Bugs.”</a></span></p></li><li class="li"><p>Although mouse-down events from additional buttons on multi button USB mice are delivered correctly, mouse-up and mouse-drag events involving the additional buttons may not be delivered with the correct modifiers. There may be ambiguity between various button masks and meta key masks. Use the utility functions as a workaround (for example,<code> java.awt.event.InputEvent.isMetaDown</code><a name="//apple_ref/doc/uid/TP30000708-DontLinkElementID_337"></a>) instead of accessing the modifiers directly.</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../tools/tools.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../value_add/value_add.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2002-09-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Java/Conceptual/Java131Development/x_platform/x_platform.html%3Fid%3DTP40000885-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Java/Conceptual/Java131Development/x_platform/x_platform.html%3Fid%3DTP40000885-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Java/Conceptual/Java131Development/x_platform/x_platform.html%3Fid%3DTP40000885-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
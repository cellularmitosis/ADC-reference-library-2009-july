<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QTSampleBuffer Class Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="QTSampleBuffer Class Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005267-CH1" title="QTSampleBuffer"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/QuickTime/index.html#//apple_ref/doc/uid/TP30001281-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../../reference/QuickTime/idxCocoa-date.html#//apple_ref/doc/uid/TP30001281-TP30000433-TP30000495" target="_top">Cocoa</a> &gt; <a href="../index.html" target="_top">QTSampleBuffer Class Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/occ/cl/QTSampleBuffer" title="QTSampleBuffer"></a><a name="//apple_ref/doc/c_ref/QTSampleBuffer" title="QTSampleBuffer"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_20" title="QTSampleBuffer"></a><h1>QTSampleBuffer Class Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Inherits from</span></strong></td><td><div style="margin-bottom:1px"><a href="../../../../Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/cl/NSObject" target="_top">NSObject</a></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Conforms to</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../../Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject" target="_top">NSObject (NSObject)</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px">/System/Library/Frameworks/<a href="../../QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit.framework</a></div></td></tr><tr><td scope="row"><strong>Availability</strong></td><td><div style="margin-bottom:1px"><div>Available in QuickTime 7.2.1 and later.</div></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">QTSampleBuffer.h</span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Related sample code</span></strong></td><td><div style="margin-bottom:1px"><div><span class="content_text"><a href="../../../../../samplecode/QTRecorder/index.html#//apple_ref/doc/uid/DTS10004043" target="_top">QTRecorder</a></span></div></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_1" title="Overview"></a><h2>Overview</h2><p class="spaceabove">This class provides format information, timing information, and metadata on media sample buffers. <code>QTSampleBuffer</code> objects contain data from media samples as well as metadata about those samples, including format information, timing information, and other attributes. Some extended information can be accessed via a QTSampleBuffer’s <code>attributeForKey:</code> and <code>sampleBufferAttributes</code> methods, using the keys described in the Constants section. In addition to these explicit methods, applications can use key-value coding to get extended attributes. For an object that supports a given attribute, <code>valueForKey:</code> will be functionally identical to <code>attributeForKey:</code>. Applications wishing to observe changes for a given attribute can add a key-value observer where the key path is the attribute key.</p><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_17" title="Tasks"></a><h2>Tasks</h2>
<a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_18" title="Getting Sample Buffer Information"></a>
		<h3 class="tasks">Getting Sample Buffer Information</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/attributeForKey:">&#8211;&#xA0;attributeForKey:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a sample buffer attribute for the given key.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/audioBufferListWithOptions:">&#8211;&#xA0;audioBufferListWithOptions:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a pointer to a Core Audio <code>AudioBufferList</code> containing audio data owned by the receiver.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/bytesForAllSamples">&#8211;&#xA0;bytesForAllSamples</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a pointer to the bytes of media data contained in the sample buffer.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/decodeTime">&#8211;&#xA0;decodeTime</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the decode time of the buffer. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/decrementSampleUseCount">&#8211;&#xA0;decrementSampleUseCount</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Decrements the use count of the sample data owned by the receiver, allowing the sample data to be invalidated after a matching call to <code>incrementSampleUseCount</code>. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/duration">&#8211;&#xA0;duration</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the duration of the buffer.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/formatDescription">&#8211;&#xA0;formatDescription</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the format description of the buffer.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/getAudioStreamPacketDescriptions:inRange:">&#8211;&#xA0;getAudioStreamPacketDescriptions:inRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Gets an array of Core Audio AudioStreamPacketDescriptions describing the lengths of samples in variable bit- rate audio buffers.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/incrementSampleUseCount">&#8211;&#xA0;incrementSampleUseCount</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Increments the use count of the sample data owned by the receiver, preventing the sample data from being invalidated until a matching call to <code>decrementSampleUseCount</code>. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/lengthForAllSamples">&#8211;&#xA0;lengthForAllSamples</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the length of the buffer returned by <code>bytesForAllSamples</code>.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/numberOfSamples">&#8211;&#xA0;numberOfSamples</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the number of media samples contained in the buffer.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/presentationTime">&#8211;&#xA0;presentationTime</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the presentation time of the buffer. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/sampleBufferAttributes">&#8211;&#xA0;sampleBufferAttributes</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a dictionary of the sample buffer&#8217;s current attirbutes.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Introduction.html#//apple_ref/occ/instm/QTSampleBuffer/sampleUseCount">&#8211;&#xA0;sampleUseCount</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the use count of the sample data owned by the receiver.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_19" title="Instance Methods"></a><h2>Instance Methods</h2><a name="//apple_ref/occ/instm/QTSampleBuffer/attributeForKey:" title="attributeForKey:"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_2" title="attributeForKey:"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_22"></a><h3 class="verytight">attributeForKey:</h3><p class="spaceabove">Returns a sample buffer attribute for the given key.</p><p class="spaceabovemethod">- (id)attributeForKey:(<a href="../../../../Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>key</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>key</em></dt><dd><p>The key of the returned attribute. Attribute keys are described in the <span class="content_text"><a href="Introduction.html#//apple_ref/doc/constant_group/Sample_Buffer_Attributes">“Sample Buffer Attributes”</a></span> section. </p></dd></dl><h5 class="tight">Return Value</h5><p>An object for the given attribute key, or <code>NIL</code> if the sample buffer does not have the given attribute.</p><h5 class="tight">Discussion</h5><p>Use this method to get attributes of a sample buffer. The keys that can be used with this method are described in the Constants section. Applications using key-value coding can also get an attribute for a given key by passing that key to the NSObject <code>valueForKey:</code> method. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/audioBufferListWithOptions:" title="audioBufferListWithOptions:"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_3" title="audioBufferListWithOptions:"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_23"></a><h3 class="verytight">audioBufferListWithOptions:</h3><p class="spaceabove">Returns a pointer to a Core Audio <code>AudioBufferList</code> containing audio data owned by the receiver.</p><p class="spaceabovemethod">- (AudioBufferList *)audioBufferListWithOptions:(QTSampleBufferAudioBufferListOptions)options;</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>options</em></dt><dd><p>A bitfield containing options that determine what kind of audio buffer list will be returned. The options constants, which can be combined using the bitwise or operator, are described as part of the <code>QTSampleBufferAudioBufferListOptions</code> type.</p></dd></dl><h5 class="tight">Return Value</h5><p>A pointer to an <code>AudioBufferList</code> structure. This pointer and its associated audio buffers will remain valid as long as the receiver is valid and the value returned by <code>sampleUseCount</code> is greater then 0.</p><h5 class="tight">Discussion</h5><p>This method returns a pointer to a Core Audio <code>AudioBufferList</code> containing all of the audio data in the sample buffer. The <code>AudioBufferList</code> can then be passed to Core Audio APIs for rendering and processing audio. The returned <code>AudioBufferList</code> will be valid for as long as the receiver is valid and the value returned by <code>sampleUseCount</code> has not been decremented to 0. Clients passing the <code>AudioBufferList</code> to an audio unit must include the <code>QTSampleBufferAudioBufferListOptionAssure16ByteAlignment</code> flag in the options parameter. This method will throw an NSInternalInconsistencyException if called after <code>decrementSampleUseCount</code> has been used to invalidate the media data contained in the sample buffer.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/bytesForAllSamples" title="bytesForAllSamples"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_4" title="bytesForAllSamples"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_24"></a><h3 class="verytight">bytesForAllSamples</h3><p class="spaceabove">Returns a pointer to the bytes of media data contained in the sample buffer.</p><p class="spaceabovemethod">- (void *)bytesForAllSamples</p><h5 class="tight">Return Value</h5><p>A pointer to a buffer of media data.</p><h5 class="tight">Discussion</h5><p>This method returns a pointer to the data for the media samples contained within the sample buffer. Clients reading bytes from this pointer should check the total length of the buffer using <code>lengthForAllSamples</code>. Applications can interpret the media data returned by this method using the infomation from the sample buffer’s <code>formatDescription</code>. This method will throw an NSInternalInconsistencyException if called after <code>decrementSampleUseCount</code> has been used to invalidate the media data contained in the sample buffer.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/decodeTime" title="decodeTime"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_5" title="decodeTime"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_25"></a><h3 class="verytight">decodeTime</h3><p class="spaceabove">Returns the decode time of the buffer. </p><p class="spaceabovemethod">- (<!--a  -->QTTime<!--/a-->)decodeTime</p><h5 class="tight">Return Value</h5><p>A <code>QTTime</code> representing the decode time of the buffer. For B-frame video media, the decode time may be different from the <code>presentationTime</code>. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/decrementSampleUseCount" title="decrementSampleUseCount"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_6" title="decrementSampleUseCount"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_26"></a><h3 class="verytight">decrementSampleUseCount</h3><p class="spaceabove">Decrements the use count of the sample data owned by the receiver, allowing the sample data to be invalidated after a matching call to <code>incrementSampleUseCount</code>. </p><p class="spaceabovemethod">- (void)decrementSampleUseCount</p><h5 class="tight">Discussion</h5><p>This method allows clients to control when the potentially large memory buffers owned by the receiver are deallocated. A newly allocated <code>QTSampleBuffer</code> has a sample use count of 1. When the sample use count drops to 0, the memory allocated for the samples will be freed and the <code>bytesForAllSamples</code>, <code>lengthForAllSamples</code>, and<code>audioBufferListWithOptions:</code>methods will each throw an NSInternalInconsistencyException when called. </p><p>This method is analogous to the NSObject release method in that it allows clients to relinquish ownership over data contained within the sample buffer. In particular, clients that have called <code>incrementSampleUseCount</code> because they were interested in the sample data of <code>QTSampleBuffer</code> objects returned by other APIs in QTKit should call this method when they no longer need that data. It is particularly important that clients using garbage collection ensure that the sample use count is 0 when they no longer require the sample data owned by a <code>QTSampleBuffer</code>, so that memory can be deallocated promptly rather than when the object is finalized.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/duration" title="duration"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_7" title="duration"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_27"></a><h3 class="verytight">duration</h3><p class="spaceabove">Returns the duration of the buffer.</p><p class="spaceabovemethod">- (<!--a  -->QTTime<!--/a-->)duration</p><h5 class="tight">Return Value</h5><p>A <code>QTTime</code> representing the duration of the buffer.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/formatDescription" title="formatDescription"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_8" title="formatDescription"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_28"></a><h3 class="verytight">formatDescription</h3><p class="spaceabove">Returns the format description of the buffer.</p><p class="spaceabovemethod">- (<a href="../../QTFormatDescription_Ref/Introduction/Introduction.html#//apple_ref/doc/c_ref/QTFormatDescription" target="_top">QTFormatDescription</a> *)formatDescription</p><h5 class="tight">Return Value</h5><p>A <code>QTFormatDescription</code> object describing the media format of the buffer.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/getAudioStreamPacketDescriptions:inRange:" title="getAudioStreamPacketDescriptions:inRange:"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_9" title="getAudioStreamPacketDescriptions:inRange:"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_29"></a><h3 class="verytight">getAudioStreamPacketDescriptions:inRange:</h3><p class="spaceabove">Gets an array of Core Audio AudioStreamPacketDescriptions describing the lengths of samples in variable bit- rate audio buffers.</p><p class="spaceabovemethod">- (BOOL)getAudioStreamPacketDescriptions:(void *)<em>audioStreamPacketDescriptions</em>
inRange:(<a href="../../../../Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)<em>range</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>audioStreamPacketDescriptions</em></dt><dd><p>An array of Core Audio AudioStreamPacketDescription structures allocated to be large enough to fit the number of packet descriptions indicated by range. </p></dd><dt><em>range</em></dt><dd><p>The range of packet descriptions to use when filling the array. If the range falls outside the number of samples returned by <code>numberOfSamples</code>, this method raises an NSRangeException.  </p></dd></dl><h5 class="tight">Return Value</h5><p>If the buffer contains variable bit-rate audio, this method fills the <code>audioStreamPacketDescriptions</code> with <code>AudioStreamPacketDescription</code> structures and returns <code>YES</code>. If the buffer contains single bit-rate audio, this method returns <code>NO</code> and leaves <code>audioStreamPacketDescriptions</code> untouched. </p><h5 class="tight">Discussion</h5><p>Applications that need to process individual packets of variable bit-rate audio from the buffer should call this method to determine the length of each sample in the buffer. This method raises an NSInternalInconsistencyException if this method is invoked on a <code>QTSampleBuffer</code> object that does not describe an audio sample buffer.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/incrementSampleUseCount" title="incrementSampleUseCount"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_10" title="incrementSampleUseCount"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_30"></a><h3 class="verytight">incrementSampleUseCount</h3><p class="spaceabove">Increments the use count of the sample data owned by the receiver, preventing the sample data from being invalidated until a matching call to <code>decrementSampleUseCount</code>. </p><p class="spaceabovemethod">- (void)incrementSampleUseCount</p><h5 class="tight">Discussion</h5><p>This method allows clients to control when the potentially large memory buffers owned by the receiver are deallocated. A newly allocated <code>QTSampleBuffer</code> has a sample use count of 1. When the sample use count drops to 0, the memory allocated for the samples will be freed and the <code>bytesForAllSamples</code>, <code>lengthForAllSamples</code>, and <code>audioBufferListWithOptions:</code> methods will each throw an NSInternalInconsistencyException when called. </p><p>This method is analogous to the <code>NSObject</code> retain method in that it allows clients to declare ownership over data contained within the sample buffer. In particular, clients interested in the sample data of <code>QTSampleBuffer</code> objects returned by other APIs in QTKit should call this method to ensure that they have acceess to the sample data, and later call <code>decrementSampleUseCount</code> when they no longer need that data. It is particularly important that clients using garbage collection ensure that the sample use count is 0 when they no longer require the sample data owned by a <code>QTSampleBuffer</code>, so that memory can be deallocated promptly rather than when the object is finalized.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/lengthForAllSamples" title="lengthForAllSamples"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_11" title="lengthForAllSamples"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_31"></a><h3 class="verytight">lengthForAllSamples</h3><p class="spaceabove">Returns the length of the buffer returned by <code>bytesForAllSamples</code>.</p><p class="spaceabovemethod">- (NSUInteger)lengthForAllSamples</p><h5 class="tight">Return Value</h5><p>The length, in bytes of the buffer returned by <code>bytesForAllSamples</code>.</p><h5 class="tight">Discussion</h5><p>Clients reading bytes from the pointer returned by <code>bytesForAllSamples</code> should use this method to check the total length of the buffer. This method will throw an NSInternalInconsistencyException if called after <code>decrementSampleUseCount</code> has been used to invalidate the media data contained in the sample buffer.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/numberOfSamples" title="numberOfSamples"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_12" title="numberOfSamples"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_32"></a><h3 class="verytight">numberOfSamples</h3><p class="spaceabove">Returns the number of media samples contained in the buffer.</p><p class="spaceabovemethod">- (<a href="../../../../Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSInteger" target="_top">NSInteger</a>)numberOfSamples</p><h5 class="tight">Return Value</h5><p>The number of samples in the buffer. </p><h5 class="tight">Discussion</h5><p>In general, video buffers will always contain one sample (a single frame), while audio buffers may contain multiple samples. Applications that need to interpret variable bit-rate audio can get the individual sample lengths with the <code>getAudioStreamPacketDescriptions:inRange:</code> method. 
</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/presentationTime" title="presentationTime"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_13" title="presentationTime"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_33"></a><h3 class="verytight">presentationTime</h3><p class="spaceabove">Returns the presentation time of the buffer. </p><p class="spaceabovemethod">- (<!--a  -->QTTime<!--/a-->)presentationTime</p><h5 class="tight">Return Value</h5><p>A <code>QTTime</code> representing the presentation time of the buffer. For B-frame video media, the presentation time may be different from the <code>decodeTime</code>. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/sampleBufferAttributes" title="sampleBufferAttributes"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_14" title="sampleBufferAttributes"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_34"></a><h3 class="verytight">sampleBufferAttributes</h3><p class="spaceabove">Returns a dictionary of the sample buffer's current attirbutes.</p><p class="spaceabovemethod">- (<a href="../../../../Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDictionary" target="_top">NSDictionary</a> *)sampleBufferAttributes</p><h5 class="tight">Return Value</h5><p>A dictionary of attributes attached to the sample buffer. Attribute keys are described in the Constants section that discusses the attributes.</p><h5 class="tight">Discussion</h5><p>Applications can use this method to determine what attributes a specific sample buffer supports.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/occ/instm/QTSampleBuffer/sampleUseCount" title="sampleUseCount"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_15" title="sampleUseCount"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_35"></a><h3 class="verytight">sampleUseCount</h3><p class="spaceabove">Returns the use count of the sample data owned by the receiver.</p><p class="spaceabovemethod">- (NSUInteger)sampleUseCount</p><h5 class="tight">Return Value</h5><p>The use count of the sample data owned by the receiver.</p><h5 class="tight">Discussion</h5><p>This method returns the use count of the data owned by the reciever, as determined buy the number of invocations of <code>incrementSampleUseCount</code> and <code>decrementSampleUseCount</code>. If the value retunred by this method is 0, then the data owned by the reciever has been invalidated and the <code>bytesForAllSamples</code>, <code>lengthForAllSamples</code>, and <code>audioBufferListWithOptions:</code> methods wil throw an NSInternalInconsistencyException. Clients should rarely need to call this method. It is generally only useful for debugging purposes.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTSampleBuffer.h</code><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_16" title="Constants"></a><h2>Constants</h2><a name="//apple_ref/doc/constant_group/Sample_Buffer_Attributes" title="Sample Buffer Attributes" role="GlobalDataGroup"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-SW1" title="Sample Buffer Attributes" role="GlobalDataGroup"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_36"></a><h3 class="tight">Sample Buffer Attributes</h3><p class="spaceabove">The following are constants for different sample buffer attributes.</p><p class="spaceabove"><pre>
NSString * const QTSampleBufferHostTimeAttribute;
NSString * const <a href="Introduction.html#//apple_ref/doc/c_ref/QTSampleBufferSMPTETimeAttribute">QTSampleBufferSMPTETimeAttribute</a> <a href="../../../../Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> * const QTSampleBufferSceneChangeTypeAttribute;
NSString * const QTSampleBufferDateRecordedAttribute;
NSString * const QTSampleBufferExplicitSceneChange;
NSString * const QTSampleBufferTimeStampDiscontinuitySceneChange;
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/data/QTSampleBufferHostTimeAttribute" title="QTSampleBufferHostTimeAttribute"></a><a name="//apple_ref/doc/c_ref/QTSampleBufferHostTimeAttribute" title="QTSampleBufferHostTimeAttribute"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_37"></a><dt><code>QTSampleBufferHostTimeAttribute</code></dt><dd><p>Returns the buffer's host time, if the buffer is from a real time source. </p><p>The value returned by this attribute can be compared with the return value of <code>CVGetCurrentHostTime()</code> or <code>AudioGetCurrentHostTime()</code> to determine whether or not it is too late for the buffer to be processed in real time. Value is an <code>NSNumber</code> interpreted as a UInt64. This string value can be used in key paths for key-value coding, key-value observing, and bindings.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>QTSampleBuffer.h</code>.</p></dd><a name="//apple_ref/c/data/QTSampleBufferSMPTETimeAttribute" title="QTSampleBufferSMPTETimeAttribute"></a><a name="//apple_ref/doc/c_ref/QTSampleBufferSMPTETimeAttribute" title="QTSampleBufferSMPTETimeAttribute"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_38"></a><dt><code>QTSampleBufferSMPTETimeAttribute</code></dt><dd><p>Returns the SMPTE timecode of the sample buffer, if it has one. </p><p>The value is an <code>NSValue</code> interpreted as a <code>SMPTETime</code> (defined in <code>CoreAudio/CoreAudioTypes.h</code>). This string value can be used in key paths for key-value coding, key-value observing, and bindings.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>QTSampleBuffer.h</code>.</p></dd><a name="//apple_ref/c/data/QTSampleBufferSceneChangeTypeAttribute" title="QTSampleBufferSceneChangeTypeAttribute"></a><a name="//apple_ref/doc/c_ref/QTSampleBufferSceneChangeTypeAttribute" title="QTSampleBufferSceneChangeTypeAttribute"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_39"></a><dt><code>QTSampleBufferSceneChangeTypeAttribute</code></dt><dd><p>If the buffer marks a scene change in the input content, returns a constant. </p><p>The returned constant specifies the type of scene change. This string value can be used in key paths for key-value coding, key-value observing, and bindings.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>QTSampleBuffer.h</code>.</p></dd><a name="//apple_ref/c/data/QTSampleBufferDateRecordedAttribute" title="QTSampleBufferDateRecordedAttribute"></a><a name="//apple_ref/doc/c_ref/QTSampleBufferDateRecordedAttribute" title="QTSampleBufferDateRecordedAttribute"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_40"></a><dt><code>QTSampleBufferDateRecordedAttribute</code></dt><dd><p>Returns the date on which the media in the buffer was originally recorded. </p><p>The value is an <code>NSDate</code>. This string value can be used in key paths for key-value coding, key-value observing, and bindings.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>QTSampleBuffer.h</code>.</p></dd><a name="//apple_ref/c/data/QTSampleBufferExplicitSceneChange" title="QTSampleBufferExplicitSceneChange"></a><a name="//apple_ref/doc/c_ref/QTSampleBufferExplicitSceneChange" title="QTSampleBufferExplicitSceneChange"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_41"></a><dt><code>QTSampleBufferExplicitSceneChange</code></dt><dd><p>Indicates that a scene change was explicitly marked in the sample buffer’s metadata.</p><p>This constant is returned by <code>QTSampleBufferSceneChangeTypeAttribute</code> specifying what kind of scene change, if any, is marked by a sample buffer.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>QTSampleBuffer.h</code>.</p></dd><a name="//apple_ref/c/data/QTSampleBufferTimeStampDiscontinuitySceneChange" title="QTSampleBufferTimeStampDiscontinuitySceneChange"></a><a name="//apple_ref/doc/c_ref/QTSampleBufferTimeStampDiscontinuitySceneChange" title="QTSampleBufferTimeStampDiscontinuitySceneChange"></a><a name="//apple_ref/doc/uid/TP40005267-CH1-DontLinkElementID_42"></a><dt><code>QTSampleBufferTimeStampDiscontinuitySceneChange</code></dt><dd><p>Indicates that the scene changed due to a discontinuity in time stamps between the current sample buffer and the previous sample buffer. </p><p>This constant is returned by <code>QTSampleBufferSceneChangeTypeAttribute</code> specifying what kind of scene chnage, if any, is marked by a sample buffer.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>QTSampleBuffer.h</code>.</p></dd></dl>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-04-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/Reference/QTSampleBuffer_Ref/Introduction/Introduction.html%3Fid%3DTP40005267-1.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/Reference/QTSampleBuffer_Ref/Introduction/Introduction.html%3Fid%3DTP40005267-1.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/Reference/QTSampleBuffer_Ref/Introduction/Introduction.html%3Fid%3DTP40005267-1.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
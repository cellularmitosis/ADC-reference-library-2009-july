<html><head><title>Mac OS X
 Manual Page For ParseArgv(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/ParseArgv" title="Mac OS X
 Manual Page for ParseArgv(3tcl)"><a name="//apple_ref/doc/man/3/ParseArgv" title="Mac OS X
 Manual Page for ParseArgv(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/ParseArgv"; name=ParseArgv(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tk_ParseArgv(3)                             Tk Library Procedures                            <a href="Tk_ParseArgv.3tcl.html#//apple_ref/doc/man/3/Tk_ParseArgv">Tk_ParseArgv(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tk_ParseArgv - process command-line options

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       int
       <b>Tk_ParseArgv</b>(<u>interp,</u> <u>tkwin,</u> <u>argcPtr,</u> <u>argv,</u> <u>argTable,</u> <u>flags</u>)

<b>ARGUMENTS</b>
       Tcl_Interp    <u>*interp</u>     (in)      Interpreter to use for returning error messages.

       Tk_Window     <u>tkwin</u>       (in)      Window  to  use when arguments specify Tk options.  If NULL, then
                                           no Tk options will be processed.

       int           <u>argcPtr</u>     (in/out)  Pointer to number of arguments in argv;  gets  modified  to  hold
                                           number of unprocessed arguments that remain after the call.

       CONST char    <u>**argv</u>      (in/out)  Command  line arguments passed to main program.  Modified to hold
                                           unprocessed arguments that remain after the call.

       Tk_ArgvInfo   <u>*argTable</u>   (in)      Array of argument descriptors, terminated by  element  with  type
                                           TK_ARGV_END.

       int           <u>flags</u>       (in)      If non-zero, then it specifies one or more flags that control the
                                           parsing of arguments.  Different flags  may  be  OR'ed  together.
                                           The  flags  currently  defined  are  TK_ARGV_DONT_SKIP_FIRST_ARG,
                                           TK_ARGV_NO_ABBREV, TK_ARGV_NO_LEFTOVERS, and TK_ARGV_NO_DEFAULTS.
____________________________________________________________________________________________________________

<b>DESCRIPTION</b>
       <b>Tk_ParseArgv</b>  processes  an array of command-line arguments according to a table describing the kinds
       of arguments that are expected.  Each of the arguments in <u>argv</u> is processed in turn:  if  it  matches
       one of the entries in <u>argTable</u>, the argument is processed according to that entry and discarded.  The
       arguments that do not match anything in <u>argTable</u> are copied down to the beginning of <u>argv</u>  (retaining
       their  original order) and returned to the caller.  At the end of the call <b>Tk_ParseArgv</b> sets <u>*argcPtr</u>
       to hold the number of arguments that are left in <u>argv</u>, and <u>argv[*argcPtr]</u> will hold the  value  NULL.
       Normally, <b>Tk_ParseArgv</b> assumes that <u>argv[0]</u> is a command name, so it is treated like an argument that
       doesn't match <u>argTable</u> and returned to the caller;  however, if the  TK_ARGV_DONT_SKIP_FIRST_ARG  bit
       is set in <u>flags</u> then <u>argv[0]</u> will be processed just like the other elements of <u>argv</u>.

       <b>Tk_ParseArgv</b> normally returns the value TCL_OK.  If an error occurs while parsing the arguments, then
       TCL_ERROR is returned and <b>Tk_ParseArgv</b> will leave an error message in <u>interp-&gt;result</u> in the  standard
       Tcl  fashion.   In the event of an error return, <u>*argvPtr</u> will not have been modified, but <u>argv</u> could
       have been partially modified.  The possible causes of errors are explained below.

       The <u>argTable</u> array specifies the kinds of arguments that are expected;  each of its entries  has  the
       following structure:
              typedef struct {
                char *<u>key</u>;
                int <u>type</u>;
                char *<u>src</u>;
                char *<u>dst</u>;
                char *<u>help</u>;
              } Tk_ArgvInfo;
       The  <u>key</u>  field is a string such as ``-display'' or ``-bg'' that is compared with the values in <u>argv</u>.
       <u>Type</u> indicates how to process an argument that matches <u>key</u> (more on this below).   <u>Src</u>  and  <u>dst</u>  are
       additional  values used in processing the argument.  Their exact usage depends on <u>type</u>, but typically
       <u>src</u> indicates a value and <u>dst</u> indicates where to store the value.  The <b>char</b> <b>*</b>  declarations  for  <u>src</u>
       and  <u>dst</u>  are  placeholders:   the  actual types may be different.  Lastly, <u>help</u> is a string giving a
       brief description of this option;  this string is printed when users ask for help about  command-line
       options.

       When  processing  an  argument  in  <u>argv</u>,  <b>Tk_ParseArgv</b> compares the argument to each of the <u>key</u>'s in
       <u>argTable</u>.  <b>Tk_ParseArgv</b> selects the first specifier whose <u>key</u> matches the argument exactly, if such a
       specifier  exists.   Otherwise  <b>Tk_ParseArgv</b>  selects  a specifier for which the argument is a unique
       abbreviation.  If the argument is a unique abbreviation for more than one specifier, then an error is
       returned.   If  there  is no matching entry in <u>argTable</u>, then the argument is skipped and returned to
       the caller.

       Once a matching argument specifier is found, <b>Tk_ParseArgv</b> processes the  argument  according  to  the
       <u>type</u>  field  of  the specifier.  The argument that matched <u>key</u> is called ``the matching argument'' in
       the descriptions below.  As part of the processing, <b>Tk_ParseArgv</b> may also use the  next  argument  in
       <u>argv</u>  after  the matching argument, which is called ``the following argument''.  The legal values for
       <u>type</u>, and the processing that they cause, are as follows:

       <b>TK_ARGV_END</b>
              Marks the end of the table.  The last entry in <u>argTable</u> must have this type;  all of its other
              fields are ignored and it will never match any arguments.

       <b>TK_ARGV_CONSTANT</b>
              <u>Src</u>  is treated as an integer and <u>dst</u> is treated as a pointer to an integer.  <u>Src</u> is stored at
              <u>*dst</u>.  The matching argument is discarded.

       <b>TK_ARGV_INT</b>
              The following argument must contain an integer string in the format accepted by  <b>strtol</b>  (e.g.
              ``0''  and ``0x'' prefixes may be used to specify octal or hexadecimal numbers, respectively).
              <u>Dst</u> is treated as a pointer to an integer;  the following argument is converted to an  integer
              value and stored at <u>*dst</u>.  <u>Src</u> is ignored.  The matching and following arguments are discarded
              from <u>argv</u>.

       <b>TK_ARGV_FLOAT</b>
              The following argument must contain a floating-point number in the format accepted by  <b>strtol</b>.
              <u>Dst</u>  is  treated  as  the  address of an double-precision floating point value;  the following
              argument is converted to a double-precision value and stored at <u>*dst</u>.  The matching  and  fol-<font color="#ffffff" class="whiteout">lowing&nbsp;following</font>
              lowing arguments are discarded from <u>argv</u>.

       <b>TK_ARGV_STRING</b>
              In this form, <u>dst</u> is treated as a pointer to a (char *); <b>Tk_ParseArgv</b> stores at <u>*dst</u> a pointer
              to the following argument, and discards the matching and following arguments from  <u>argv</u>.   <u>Src</u>
              is ignored.

       <b>TK_ARGV_UID</b>
              This  form  is  similar to TK_ARGV_STRING, except that the argument is turned into a Tk_Uid by
              calling <b>Tk_GetUid</b>.  <u>Dst</u> is treated as a pointer to a Tk_Uid; <b>Tk_ParseArgv</b> stores at  <u>*dst</u>  the
              Tk_Uid  corresponding to the following argument, and discards the matching and following argu-<font color="#ffffff" class="whiteout">ments&nbsp;arguments</font>
              ments from <u>argv</u>.  <u>Src</u> is ignored.

       <b>TK_ARGV_CONST_OPTION</b>
              This form causes a Tk option to be set (as if the <b>option</b> command had been invoked).   The  <u>src</u>
              field is treated as a pointer to a string giving the value of an option, and <u>dst</u> is treated as
              a pointer to the name of the option.  The matching argument is discarded.  If <u>tkwin</u>  is  NULL,
              then argument specifiers of this type are ignored (as if they did not exist).

       <b>TK_ARGV_OPTION_VALUE</b>
              This  form  is  similar  to TK_ARGV_CONST_OPTION, except that the value of the option is taken
              from the following argument instead of from <u>src</u>.  <u>Dst</u> is used as the name of the option.   <u>Src</u>
              is ignored.  The matching and following arguments are discarded.  If <u>tkwin</u> is NULL, then argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
              ment specifiers of this type are ignored (as if they did not exist).

       <b>TK_ARGV_OPTION_NAME_VALUE</b>
              In this case the following argument is taken as the name of a Tk option and the argument after
              that  is  taken  as the value for that option.  Both <u>src</u> and <u>dst</u> are ignored.  All three argu-<font color="#ffffff" class="whiteout">ments&nbsp;arguments</font>
              ments are discarded from <u>argv</u>.  If <u>tkwin</u> is NULL, then argument specifiers of  this  type  are
              ignored (as if they did not exist).

       <b>TK_ARGV_HELP</b>
              When this kind of option is encountered, <b>Tk_ParseArgv</b> uses the <u>help</u> fields of <u>argTable</u> to for-<font color="#ffffff" class="whiteout">mat&nbsp;format</font>
              mat a message describing all the valid arguments.  The message is placed in <u>interp-&gt;result</u> and
              <b>Tk_ParseArgv</b>  returns  TCL_ERROR.  When this happens, the caller normally prints the help mes-<font color="#ffffff" class="whiteout">sage&nbsp;message</font>
              sage and aborts.  If the <u>key</u> field of a TK_ARGV_HELP specifier is  NULL,  then  the  specifier
              will  never  match any arguments;  in this case the specifier simply provides extra documenta-<font color="#ffffff" class="whiteout">tion,&nbsp;documentation,</font>
              tion, which will be included when some other TK_ARGV_HELP entry causes help information to  be
              returned.

       <b>TK_ARGV_REST</b>
              This option is used by programs or commands that allow the last several of their options to be
              the name and/or options for some other program.  If a <b>TK_ARGV_REST</b>  argument  is  found,  then
              <b>Tk_ParseArgv</b>  doesn't  process  any  of  the  remaining arguments;  it returns them all at the
              beginning of <u>argv</u> (along with any other unprocessed  arguments).   In  addition,  <b>Tk_ParseArgv</b>
              treats  <u>dst</u>  as  the address of an integer value, and stores at <u>*dst</u> the index of the first of
              the <b>TK_ARGV_REST</b> options in the returned <u>argv</u>.  This allows the  program  to  distinguish  the
              <b>TK_ARGV_REST</b> options from other unprocessed options that preceded the <b>TK_ARGV_REST</b>.

       <b>TK_ARGV_FUNC</b>
              For  this  kind of argument, <u>src</u> is treated as the address of a procedure, which is invoked to
              process the following argument.  The procedure should have the following structure:
                     int
                     <u>func</u>(<u>dst</u>, <u>key</u>, <u>nextArg</u>)
                       char *<u>dst</u>;
                       char *<u>key</u>;
                       char *<u>nextArg</u>;
                     {
                     }
              The <u>dst</u> and <u>key</u> parameters will contain the corresponding fields from the <u>argTable</u> entry,  and
              <u>nextArg</u> will point to the following argument from <u>argv</u> (or NULL if there aren't any more argu-<font color="#ffffff" class="whiteout">ments&nbsp;arguments</font>
              ments left in <u>argv</u>).  If <u>func</u> uses <u>nextArg</u> (so that <b>Tk_ParseArgv</b> should discard it),  then  it
              should  return  1.   Otherwise  it  should return 0 and <b>TkParseArgv</b> will process the following
              argument in the normal fashion.  In either event the matching argument is discarded.

       <b>TK_ARGV_GENFUNC</b>
              This form provides a more general procedural escape.  It treats <u>src</u> as the address of a proce-<font color="#ffffff" class="whiteout">dure,&nbsp;procedure,</font>
              dure, and passes that procedure all of the remaining arguments.  The procedure should have the
              following form:
                     int
                     <u>genfunc</u>(dst, interp, key, argc, argv)
                       char *<u>dst</u>;
                       Tcl_Interp *<u>interp</u>;
                       char *<u>key</u>;
                       int <u>argc</u>;
                       char **<u>argv</u>;
                     {
                     }
              The <u>dst</u> and <u>key</u> parameters will contain the corresponding  fields  from  the  <u>argTable</u>  entry.
              <u>Interp</u>  will  be the same as the <u>interp</u> argument to <b>Tcl_ParseArgv</b>.  <u>Argc</u> and <u>argv</u> refer to all
              of the options after the matching  one.   <u>Genfunc</u>  should  behave  in  a  fashion  similar  to
              <b>Tk_ParseArgv</b>:   parse  as  many of the remaining arguments as it can, then return any that are
              left by compacting them to the beginning of <u>argv</u> (starting at <u>argv</u>[0]).  <u>Genfunc</u> should return
              a  count  of  how many arguments are left in <u>argv</u>; <b>Tk_ParseArgv</b> will process them.  If <u>genfunc</u>
              encounters an error then it should leave an error message in <u>interp-&gt;result</u>, in the usual  Tcl
              fashion,  and  return -1;  when this happens <b>Tk_ParseArgv</b> will abort its processing and return
              TCL_ERROR.


<b>FLAGS</b>
       <b>TK_ARGV_DONT_SKIP_FIRST_ARG</b>
              <b>Tk_ParseArgv</b> normally treats <u>argv[0]</u> as a program or command  name,  and  returns  it  to  the
              caller  just  as  if  it  hadn't matched <u>argTable</u>.  If this flag is given, then <u>argv[0]</u> is not
              given special treatment.

       <b>TK_ARGV_NO_ABBREV</b>
              Normally, <b>Tk_ParseArgv</b> accepts unique abbreviations for <u>key</u> values in <u>argTable</u>.  If this  flag
              is given then only exact matches will be acceptable.

       <b>TK_ARGV_NO_LEFTOVERS</b>
              Normally,  <b>Tk_ParseArgv</b>  returns  unrecognized arguments to the caller.  If this bit is set in
              <u>flags</u> then <b>Tk_ParseArgv</b> will return an error if it encounters any argument that doesn't  match
              <u>argTable</u>.   The  only  exception to this rule is <u>argv[0]</u>, which will be returned to the caller
              with no errors as long as TK_ARGV_DONT_SKIP_FIRST_ARG isn't specified.

       <b>TK_ARGV_NO_DEFAULTS</b>
              Normally, <b>Tk_ParseArgv</b> searches an internal table of standard argument specifiers in  addition
              to  <u>argTable</u>.   If  this bit is set in <u>flags</u>, then <b>Tk_ParseArgv</b> will use only <u>argTable</u> and not
              its default table.


<b>EXAMPLE</b>
       Here is an example definition of an <u>argTable</u> and some sample command  lines  that  use  the  options.
       Note  the effect on <u>argc</u> and <u>argv</u>;  arguments processed by <b>Tk_ParseArgv</b> are eliminated from <u>argv</u>, and
       <u>argc</u> is updated to reflect reduced number of arguments.
              /*
               * Define and set default values for globals.
               */
              int debugFlag = 0;
              int numReps = 100;
              char defaultFileName[] = "out";
              char *fileName = defaultFileName;
              Boolean exec = FALSE;

              /*
               * Define option descriptions.
               */
              Tk_ArgvInfo argTable[] = {
                {"-X", TK_ARGV_CONSTANT, (char *) 1, (char *) &amp;debugFlag,
                   "Turn on debugging printfs"},
                {"-N", TK_ARGV_INT, (char *) NULL, (char *) &amp;numReps,
                   "Number of repetitions"},
                {"-of", TK_ARGV_STRING, (char *) NULL, (char *) &amp;fileName,
                   "Name of file for output"},
                {"x", TK_ARGV_REST, (char *) NULL, (char *) &amp;exec,
                   "File to exec, followed by any arguments (must be last argument)."},
                {(char *) NULL, TK_ARGV_END, (char *) NULL, (char *) NULL,
                    (char *) NULL}
              };

              main(argc, argv)
                int argc;
                char *argv[];
              {
                ...

                if (Tk_ParseArgv(interp, tkwin, &amp;argc, argv, argTable, 0) != TCL_OK) {
                   fprintf(stderr, "%s\n", interp-&gt;result);
                   <a href="../man1/exit.1.html#//apple_ref/doc/man/1/exit">exit(1)</a>;
                }

                /*
                 * Remainder of the program.
                 */
              }

       Note that default values can be assigned to variables named in <u>argTable</u>:  the variables will only  be
       overwritten if the particular arguments are present in <u>argv</u>.  Here are some example command lines and
       their effects.
              prog -N 200 infile# just sets the numReps variable to 200
              prog -of out200 infile # sets fileName to reference "out200"
              prog -XN 10 infile# sets the debug flag, also sets numReps
       In all of the above examples, <u>argc</u> will be set by  <b>Tk_ParseArgv</b>  to  2,  <u>argv</u>[0]  will  be  ``prog'',
       <u>argv</u>[1] will be ``infile'', and <u>argv</u>[2] will be NULL.


<b>KEYWORDS</b>
       arguments, command line, options



Tk                                                                                           <a href="Tk_ParseArgv.3tcl.html#//apple_ref/doc/man/3/Tk_ParseArgv">Tk_ParseArgv(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/ParseArgv.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/ParseArgv.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/ParseArgv.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

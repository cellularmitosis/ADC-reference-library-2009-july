<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Drawing the Window Contents(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING204></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-203.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-205.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-188.html"><B>Chapter 4 - Window Manager</B></A> / <A HREF="Toolbox-201.html"><B>Using the Window Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING204-0></A>
<H2><A NAME=MARKER-9-175></A>Drawing the Window Contents</H2>
 <A NAME=MARKER-2-176></A>Your application and the Window Manager work together to display windows on the screen. Once you have created a window and made it visible, the Window Manager automatically draws the window frame in the appropriate location. As the user makes changes to the desktop, moving and resizing different windows, the Window Manager alters the window frames as necessary. The window frame includes the window outline, the title bar, and the close and zoom boxes.<P>
 Your application is responsible for drawing the window's content region. It typically uses the Control Manager to draw the window controls, uses the Window Manager to draw the size box, and draws the user data itself. The sample code in this chapter uses the simple model of a content region that contains only controls, the size box, and a TextEdit record. (See <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I> for a description of TextEdit.)<P>
 <A HREF=#MARKER-9-177>Listing 4-8</A> illustrates an application-defined procedure that draws the content region of a window.<P>
<B>Listing 4-8  <A NAME=MARKER-9-177></A><A NAME=MARKER-21-178></A>Drawing a window</B><P>
<PRE>
PROCEDURE MyDrawWindow (window: WindowPtr);
VAR
   myData: MyDocRecHnd;
BEGIN
   SetPort(window);
   myData := MyDocRecHnd(GetWRefCon(window));
   HLock(Handle(myData));
   WITH window^ DO
   BEGIN
      EraseRect(portRect);    {erase content area}
      UpdateControls(window, visRgn);  {draw window controls}
      DrawGrowIcon(window);   {draw size box}
      {update window contents as appropriate to your }
      { application (in this case use TextEdit)}
      TEUpdate(portRect, myData^^.editRec);
   END;
   HUnLock(Handle(myData));
END;
</PRE>
 The <CODE>MyDrawWindow</CODE> procedure first sets the current port to the window's port and gets a handle to the window's document record. Using the data in the document record, the procedure first erases the content region, draws the controls, and draws the size box. Finally, it draws the user's data, in this case the contents of a TextEdit edit record.<P>
 If your application creates a window that contains a static display, you can let the Window Manager take care of drawing and updating the content region by placing a handle to a picture in the <CODE>windowPic</CODE> field of the window record. See the description <BR>of the <CODE>SetWindowPic</CODE> procedure on <A HREF=Toolbox-267.html#MARKER-9-523>page 4-110</A>.<A NAME=MARKER-2-75></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-203.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-205.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

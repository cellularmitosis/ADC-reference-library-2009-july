<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>MoreMasters (IM: M)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING65></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Memory-64.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-66.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Memory-2.html"><B>Memory</B></A> / <BR><DD><A HREF="Memory-56.html"><B>Chapter 2 - Memory Manager</B></A> / <A HREF="Memory-60.html"><B>Memory Manager Reference</B></A><BR><DL><DD><A HREF="Memory-62.html"><B>Memory Manager Routines</B></A> / <A HREF="Memory-63.html"><B>Setting Up the Application Heap</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING65-0></A>
<H3><A NAME=MARKER-11-244></A>MoreMasters<A NAME=MARKER-2-113></A><A NAME=MARKER-9-131></A></H3>
 Call the <CODE>MoreMasters</CODE> procedure several times at the beginning of your program to prevent the Memory Manager from running out of master pointers in the middle of application execution. If it does run out, it allocates more, possibly causing heap fragmentation.<P>
<PRE>
PROCEDURE MoreMasters;
</PRE>
<A NAME=HEADING65-3></A>
<H5>DESCRIPTION</H5>
 The <CODE>MoreMasters</CODE> procedure allocates another block of master pointers in the current heap zone. In the application heap, a block of master pointers consists of 64 master pointers, and in the system heap, a block consists of 32 master pointers. (These values, however, might change in future versions of system software.) When you initialize additional heap zones, you can specify the number of master pointers you want to have in a block of master pointers.<P>
 The Memory Manager automatically calls <CODE>MoreMasters</CODE> once for every new heap zone, including the application heap zone.<P>
 You should call <CODE>MoreMasters</CODE> at the beginning of your program enough times to ensure that the Memory Manager never needs to call it for you. For example, if your application never allocates more than 300 relocatable blocks in its heap zone, then five calls to the <CODE>MoreMasters</CODE> should be enough. It's better to call <CODE>MoreMasters</CODE> too many times than too few. For instance, if your application usually allocates about 100 relocatable blocks but might allocate 1000 in a particularly busy session, call <CODE>MoreMasters</CODE> enough times at the beginning of the program to accommodate times of greater memory use.<P>
 If you are forced to call <CODE>MoreMasters</CODE> so many times that it causes a significant slowdown, you could change the <CODE>moreMast</CODE> field of the zone header to the total number of master pointers you need and then call <CODE>MoreMasters</CODE> just once. Afterward, be sure to restore the <CODE>moreMast</CODE> field to its original value.<P>
<A NAME=HEADING65-8></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Because <CODE>MoreMasters</CODE> allocates memory, you should not call it at interrupt time.<P>
 The calls to <CODE>MoreMasters</CODE> at the beginning of your application should be in the main code segment of your application or in a segment that the main segment never unloads.<P>
<A NAME=HEADING65-11></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The registers on exit for <CODE>MoreMasters</CODE> are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING65-13></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>memFullErr<TD>-108<TD>Not enough memory</TABLE>
</H5>
<A NAME=HEADING65-14></A>
<H5>SEE ALSO</H5>
 If you initialize a new zone, you can specify the number of master pointers that a master pointer block should contain. See the description of the <CODE>InitZone</CODE> procedure on <A HREF=Memory-142.html#MARKER-9-505>page 2-86</A> for details.<A NAME=MARKER-2-185></A><A NAME=MARKER-2-248></A><A NAME=MARKER-2-249></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Memory-64.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-66.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Memory-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

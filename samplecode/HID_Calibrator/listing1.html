<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>HID Calibrator - /HID Calibrator-Read Me.txt</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Games/index.html">Games</a> &gt; <a href="../../samplecode/Games/idxHumanInterfaceDeviceForceFeedback-date.html">Human Interface Device & Force Feedback</a> &gt; <A HREF="javascript:location.replace('index.html');">HID Calibrator</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->


	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">HID Calibrator</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/HID Calibrator-Read Me.txt</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/HID Calibrator-Read Me.txt</option>
<option value="listing2.html">/HID Utilities/HID_Utilities.c</option>
<option value="listing3.html">/HID Utilities/HID_Utilities.h</option>
<option value="listing4.html">/HID Utilities/ImmrHIDUtilAddOn.c</option>
<option value="listing5.html">/HID Utilities/ImmrHIDUtilAddOn.h</option>
<option value="listing6.html">/HID Utilities/IOHIDDevice_.c</option>
<option value="listing7.html">/HID Utilities/IOHIDDevice_.h</option>
<option value="listing8.html">/HID Utilities/IOHIDElement_.c</option>
<option value="listing9.html">/HID Utilities/IOHIDElement_.h</option>
<option value="listing10.html">/HID Utilities/IOHIDLib_.h</option>
<option value="listing11.html">/main.c</option></select>
				</p>
				</form>
				<p><strong><a href="HID_Calibrator.zip">Download Sample</a></strong> (&#147;HID_Calibrator.zip&#148;, 94.5K)<BR>
<strong><a href="HID_Calibrator.dmg">Download Sample</a></strong> (&#147;HID_Calibrator.dmg&#148;, 145.6K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">HID Calibrator
Human Interface Device Calibration sample

Version 1.0 18 Oct 2007 Initial release.  
----

This application is a Carbon NIB sample which demonstrates the HID Manager APIs
introduced in Leopard (10.5). When run, the application it builds will create a
window for each attached HID device. The contents of each of these windows
consist will be a list of views; one for each HID elements for that HID device.
Each of these element views display a grey or green circle (indicating that this
element's value has changed since the HID element's view was created), the name
of that element, the usage page &amp; usage (In parentheses) and then a slider that
displays the elements current, minimal &amp; maximum (logical) values. A blue bar on
this slider indicates the range of values that have actually been received from
the device. These element views update as their corresponding HID element values
change.

----

Requirements: Mac OS X 10.5, Xcode 3.0

Packing List
------------
The sample contains the following items:

    HID Calibrator-Read Me.rtf      - this file
    HID Calibrator.xcodeproj        - Xcode project file
    configs                         - Xcode configuration files
    HID Calibrator_Prefix.pch       - prefix header file
    main.c                          - main source file
    HID Calibrator-Info.plist       - source for info.plist
    English.lproj                   - English localization files
           main.nib                 - the main nib
           InfoPlist.strings        - strings file
    HID Utilities                   - folder of sources for HID utility files
           IOHIDLib_.h              - single include header for HID utility
files
           HID_Utilities.c          - HID utility source
           HID_Utilities.h          - HID utility header
           IOHIDDevice_.c           - HID Device utilities source
           IOHIDDevice_.h           - HID Device utilities header
           IOHIDElement_.c          - HID Element utilities source
           IOHIDElement_.h          - HID Element utilities source
           English.lproj            - HID utilities localization files
               HID_usage_strings.plist - HID usage strings (XML) file
    build                           - contains a prebuilt binary.

Building the Sample
-------------------
The sample was built using Xcode 3.0 on Mac OS X 10.5.  You should be able to
just open the project and choose Build from the Build menu.  This will build
&quot;HID Calibrator.app&quot; in the &quot;build/debug&quot; or &quot;build/release&quot; directory.

Using the Sample
----------------
Launch &quot;HID Calibrator&quot; and it will create a window for each HID device on the
system. 
Select a window for a HID device that you can interact with (keyboard, mouse,
joystick, etc.).
Interact with the selected device; you should see corresponding element change
in its element view.
Note: you may need to scoll to see the effected element view.

How the code works
------------
In the &quot;main&quot; routine if all the initialization code executes successfully then
the Initialize_HID routine is called. This routine creates a IOHID Manager
reference which is then used to install device matching
(Handle_DeviceMatchingCallback) and removal (Handle_DeviceRemovalCallback)
callbacks and schedule the manager with the runloop. It then calls
HIDBuildMultiDeviceList (a routine in the HID Utilities sources) that opens the
IOHID Manager reference. 

When the IOHID Manager reference is opened the Handle_DeviceMatchingCallback
routine is called once for each HID device currently connected to the system.
This routine then calls Handle_New with the new HID device reference and then
registers a device input value callback (Handle_IOHIDValueCallback). 

The Handle_New routine creates a new window for the new device and set a custom
window property (kHIDDevicePropertyTag) for the HID device reference and a
custom HID device property (kHIDWindowRefPropertyKey) for the window reference
(this makes it easy to determine the association between windows and HID
devices). It then iterates over all the input HID elements for this device and
creates HIViews for each element and adds them to the window. A custom control
property (kHIDHIViewRefPropertyKey) is set to the HID element reference and a
custom HID element property is set to the HIView reference (this makes it easy
to determine the association between HIViews and HID elements).

When a HID element value changes the Handle_IOHIDValueCallback routine is
called. This routine first checks the new value to see if it is outside the
calibration range of the HID element (in which case it adjust those values).
Then it uses the custom property HID element  (kHIDHIViewRefPropertyKey) to
retrieve the HIViewRef for this HID element and uses that to check the controls
min/max values against the new value (and adjust them if necessary). Finally the
new control value is set and HIViewSetNeedsDisplay is called to force the HIView
to redraw.

When a HID device is removed the Handle_DeviceRemovalCallback routine is
called. The custom HID device property (kHIDWindowRefPropertyKey) is used to
retrieve the window reference associated with this device and dispose of (close)
it.

The drawing code for the element HIView is in the Handle_UserPaneEvents
routine.

Caveats
-------

This demonstration application and the set of utilities is constantly evolving
to both address any bugs and provide better support for developer requested
features. Any suggestions and/or bugs can be directed to the Apple bug reporter
at: &lt;http://developer.apple.com/bugreporter/index.html&gt;

We hope this helps people get up and running with the HID Manager APIs
introduced in 10.5 in a quick and painless manner.

Credits and Version History
---------------------------

Version 1.0 18 Oct 2007 Initial release.  

Share and Enjoy.
Apple Developer Technical Support
</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/HID_Calibrator/listing1.html%3Fid%3DDTS40007645-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/HID_Calibrator/listing1.html%3Fid%3DDTS40007645-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/HID_Calibrator/listing1.html%3Fid%3DDTS40007645-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
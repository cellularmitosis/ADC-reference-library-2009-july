<HTML>		<HEAD>		<TITLE>			EOFaultHandler		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOControl Reference</font><br><br><!--end of path --><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a><a name = "EOFaultHandler"></a><BR><h1><FONT COLOR="#000066"><a name="//apple_ref/java/cl/EOFaultHandler">EOFaultHandler</a></FONT></h1><br><blockquote><dl><dt><b>Inherits from: </b></dt><dd> (com.apple.client.eocontrol) Object<br>(com.apple.yellow.eocontrol) NSObject</dd></dl></blockquote><blockquote><dl><dt><b>Package: </b></dt><dd>com.apple.client.eocontrol</dd><dd>com.apple.yellow.eocontrol</dd></dl></blockquote><HR SIZE=4><br><h2>Class Description</h2><hr><p>EOFaultHandler is an abstract class that defines the mechanismsthat create faults and help them to fire. <b>Faults</b> areused as placeholders for an enterprise object's relationship destinations.For example, suppose an Employee object has a <code>department</code> relationshipto the employee's department. When an employee is fetched, faultsare created for its relationship destinations. In the case of the <code>department</code> relationship,an empty Department object is created. The Department object'sdata isn't fetched until the Department is accessed, at whichtime the fault is said to <b>fire</b>.</p><p>Subclasses of EOFaultHandler perform the specific steps necessaryto get data for the fault and fire it. The Access Layer, for example,uses private subclasses to fetch data using an EODatabaseContext (definedin EOAccess). Most of EOFaultHandler's methods are properly defined;you need only override  <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a> toprovide appropriate behavior. In com.apple.yellow.eocontrol applications,you can optionally implement  <a href="#//apple_ref/java/instm/EOFaultHandler/faultWillFire">faultWillFire</a> to prepare for conversion.</p><p>In a com.apple.yellow.eocontrol application you create an EOFaultHandler<code></code> usingthe standard constructor<code></code>. To create a fault ina com.apple.yellow.eocontrol application, you invoke the staticmethod  <a href="#//apple_ref/java/clm/EOFaultHandler/makeObjectIntoFault">makeObjectIntoFault</a> withthe object to turn into a fault and the EOFaultHandler. An EOFaultHandler belongsexclusively to a single fault, and shouldn't be shared or usedby any other object.</p><p>In a com.apple.client.eocontrol application you also createan EOFaultHandler using the standard constructor.To create a fault in a com.apple.client.eocontrol application, though,you send a newly-created object a  <a href="../Protocols/EOFaulting.html#//apple_ref/java/intfm/EOFaulting/turnIntoFault">turnIntoFault</a> message and providean EOFaultHandler that will help the fault tofire. In order for that newly-created object to be able to respondto <code>turnIntoFault</code>, the object must conformto the  <a href="../Protocols/EOFaulting.html#BEDCFBFB">EOFaulting</a> interface.An EOFaultHandler belongs exclusively toa single fault, and shouldn't be shared or used by any other object.In com.apple.client.eocontrol applications, the fault handler isthe private property of the fault; you shouldn't send any messagesto the fault handler, instead dealing exclusively with the fault.</p><br><h2>Firing a Fault</h2><p>When a fault receives a message that requires it to fire,it sends a  <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a> methodto its EOFaultHandler. This method is responsible for invoking the  <a href="#//apple_ref/java/clm/EOFaultHandler/clearFault">clearFault</a> methodto revert the fault to its original state, and then do whateveris necessary to complete initialization of the object. Doing sotypically involves fetching data from an external repository andpassing it to the object.</p><br><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Creating and examiningfaults</dt><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/createFaultForDeferredFault">createFaultForDeferredFault</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/clm/EOFaultHandler/clearFault">clearFault</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/clm/EOFaultHandler/isFault">isFault</a></dd><dd> <a href="#//apple_ref/java/clm/EOFaultHandler/makeObjectIntoFault">makeObjectIntoFault</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/clm/EOFaultHandler/handlerForFault">handlerForFault</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/clm/EOFaultHandler/targetClassForFault">targetClassForFault</a> (com.apple.yellow.eocontrol only)</dd></dl><dl><dt>Reference counting</dt><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/incrementExtraRefCount">incrementExtraRefCount</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/decrementExtraRefCountIsZero">decrementExtraRefCountIsZero</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/extraRefCount">extraRefCount</a> (com.apple.yellow.eocontrol only)</dd></dl><dl><dt>Getting the originalclass</dt><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/classForFault">classForFault</a> (com.apple.yellow.eocontrol only)</dd></dl><dl><dt>Firing a fault</dt><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a></dd><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/faultWillFire">faultWillFire</a> (com.apple.yellow.eocontrol only)</dd></dl><dl><dt>Getting a description</dt><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/descriptionForObject">descriptionForObject</a></dd><dd> <a href="#//apple_ref/java/clm/EOFaultHandler/eoShallowDescription">eoShallowDescription</a> (com.apple.client.eocontrol only)</dd></dl><dl><dt>Checking class information</dt><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/isKindOfClass">isKindOfClass</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/isMemberOfClass">isMemberOfClass</a> (com.apple.yellow.eocontrol only)</dd><dd> <a href="#//apple_ref/java/instm/EOFaultHandler/respondsToSelectorForFault">respondsToSelectorForFault</a> (com.apple.yellow.eocontrol only)</dd></dl></blockquote><br><br><h2>Static Methods</h2><hr><a name = "DAJGAEDA"></a><BR><h3><a name="//apple_ref/java/clm/EOFaultHandler/eoShallowDescription">eoShallowDescription</a></h3><p><code>public static String <code>eoShallowDescription</code>(Object <em>anObject</em>)</code></p>(com.apple.client.eocontrol only) See the methoddescription for EOEnterpriseObject's  <a href="../Protocols/EOEnterpriseObject.html#//apple_ref/java/intfm/EOEnterpriseObject/eoShallowDescription">eoShallowDescription</a>.<hr WIDTH="25%" ALIGN="LEFT"><a name = "CHBDCGHG"></a><BR><h3><a name="//apple_ref/java/clm/EOFaultHandler/clearFault">clearFault</a></h3><p><code>public static void <code>clearFault</code>(Object <em>aFault</em>)</code></p>(com.apple.yellow.eocontrol only) Restores <em>aFault</em>  toits status prior to the  <a href="#//apple_ref/java/clm/EOFaultHandler/makeObjectIntoFault">makeObjectIntoFault</a> messagethat created it. Throws an exception if <em>aFault</em>  isn'ta fault.<p>You rarely use this method. Faults typically fireautomatically when accessed, using the  <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a> method. </p><hr WIDTH="25%" ALIGN="LEFT"><a name = "CHBDHDDA"></a><BR><h3><a name="//apple_ref/java/clm/EOFaultHandler/handlerForFault">handlerForFault</a></h3><p><code>public static EOFaultHandler <code>handlerForFault</code>(Object <em>aFault</em>)</code></p>(com.apple.yellow.eocontrol only) Returns theEOFaultHandler that will help <em>aFault</em>  tofire. Returns <code>null</code> if <em>aFault</em>  isn'ta fault.<hr WIDTH="25%" ALIGN="LEFT"><a name = "CHBCIGHG"></a><BR><h3><a name="//apple_ref/java/clm/EOFaultHandler/isFault">isFault</a></h3><p><code>public static boolean <code>isFault</code>(Object <em>anObject</em>)</code></p>Returns <code>true</code> if <em>anObject</em>  isa fault, <code>false</code> otherwise.<hr WIDTH="25%" ALIGN="LEFT"><a name = "CHBCABHG"></a><BR><h3><a name="//apple_ref/java/clm/EOFaultHandler/makeObjectIntoFault">makeObjectIntoFault</a></h3><p><code>public static void <code>makeObjectIntoFault</code>(Object <em>anObject,</em> EOFaultHandler <em>aFaultHandler</em>)</code></p>(com.apple.yellow.eocontrol only) Converts <em>anObject</em>  intoa fault, assigning <em>aFaultHandler</em>  asthe object that stores its original state and later converts thefault back into a normal object (typically by fetching data froman external repository). The new fault becomes the owner of <em>aFaultHandler</em> ;you shouldn't assign it to another object.<hr WIDTH="25%" ALIGN="LEFT"><a name = "DAJBIEED"></a><BR><h3><a name="//apple_ref/java/clm/EOFaultHandler/targetClassForFault">targetClassForFault</a></h3><p><code>public static Class <code>targetClassForFault</code>(Object <em>anObject</em>)</code></p>(com.apple.yellow.eocontrol only) Returns theclass that will be instantiated when the fault fires. The returnedclass could be a superclass of the actual class instantiated.<hr WIDTH="25%" ALIGN="LEFT"><BR><BR><h2>Instance Methods</h2><hr><a name = "CHBCIDGC"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/classForFault">classForFault</a></h3><p><code>public Class <code>classForFault</code>(Object <em>fault</em>)</code></p>(com.apple.yellow.eocontrol only) Returns thetarget class of the receiver's fault object, which must be passedas <em>aFault</em>  in case the receiver needsto fire it (EOFaultHandlers don't keep references to their faults).For example, to support entity inheritance, the Access layer firesfaults for entities with subentities to confirm their precise classmembership.<p><b>See Also: </b>  <a href="#//apple_ref/java/instm/EOFaultHandler/targetClass">targetClass</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "completeInitializationOfObject_"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a></h3><p><code>public void <code>completeInitializationOfObject</code>(Object <em>aFault</em>)</code></p>Implemented by subclasses to revert <em>aFault</em>  toits original state and complete its initialization in whatever meansis appropriate to the subclass. For example, the Access layer subclassesof EOFaultHandler fetch data from the database and pass it to theobject. This method is invoked automatically by a fault when it'ssent a message it can't handle without fetching its data. EOFaultHandler'simplementation merely throws an exception.<hr WIDTH="25%" ALIGN="LEFT"><a name = "DAJBDIHG"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/createFaultForDeferredFault">createFaultForDeferredFault</a></h3><p><code>public Object <code>createFaultForDeferredFault</code>(Object <em>fault,</em>  Object <em>eo</em>)</code></p>(com.apple.yellow.eocontrol only) Invoked by  <a href="../Protocols/EODeferredFaulting.html#//apple_ref/java/intfm/EODeferredFaulting/willReadRelationship">willReadRelationship</a> to ensure that <em>fault</em>  isn'ta deferred fault, and to replace it with a normal fault if it is.EOFaultHandler's implementation simply returns its fault. A privatesubclass that handles deferred faulting implements this method toreturn a normal fault if <em>fault</em>  isa deferred fault, so you should never need to override this method.<hr WIDTH="25%" ALIGN="LEFT"><a name = "decrementExtraRefCountWasZero"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/decrementExtraRefCountIsZero">decrementExtraRefCountIsZero</a></h3><p><code>public boolean <code>decrementExtraRefCountIsZero</code>()</code></p>(com.apple.yellow.eocontrol only) Decrementsthe reference count for the receiver's fault. An object's referencecount is the number of objects that are accessing it. Newly createdobjects have a reference count of one. If another object is referencingan object, the object is said to have an extra reference count. <p>If,after decrementing the reference count, the fault's new referencecount is zero, this method returns true, If the reference counthas not become zero, this method returns false. Objects that havea zero reference count are candidates for garbage collection.</p><p>Thismethod is used by EOFaultHandler's internal reference countingmechanism.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "descriptionForObject_"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/descriptionForObject">descriptionForObject</a></h3><p><code>public String <code>descriptionForObject</code>(Object <em>aFault</em>)</code></p>Returns a string naming the original class ofthe receiver's fault and giving <em>aFault</em>'s address,and also noting that it's a fault. (The fault must be passed as <em>aFault</em>  becauseEOFaultHandlers don't keep references to their faults.)<hr WIDTH="25%" ALIGN="LEFT"><a name = "extraRefCount"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/extraRefCount">extraRefCount</a></h3><p><code>public int <code>extraRefCount</code>()</code></p>(com.apple.yellow.eocontrol only) Returns thereceiver's current reference count. This method is used by EOFaultHandler'sinternal reference counting mechanism.<hr WIDTH="25%" ALIGN="LEFT"><a name = "faultWillFire_"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/faultWillFire">faultWillFire</a></h3><p><code>public void <code>faultWillFire</code>(Object <em>aFault</em>)</code></p>(com.apple.yellow.eocontrol only) Informs thereceiver that <em>aFault</em>  is about tobe reverted to its original state. EOFaultHandler's implementationdoes nothing. <hr WIDTH="25%" ALIGN="LEFT"><a name = "incrementExtraRefCount"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/incrementExtraRefCount">incrementExtraRefCount</a></h3><p><code>public void <code>incrementExtraRefCount</code>()</code></p>(com.apple.yellow.eocontrol only) Incrementsthe reference count for the receiver's fault. An object's referencecount is the number of objects that are accessing it. Newly createdobjects have a reference count of one. If another object is referencingan object, the object is said to have an extra reference count. <p>Thismethod is used by EOFaultHandler's internal reference countingmechanism.</p><p><b>See Also: </b>  <a href="#//apple_ref/java/instm/EOFaultHandler/extraRefCount">extraRefCount</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "isKindOfClass_forFault_"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/isKindOfClass">isKindOfClass</a></h3><p><code>public boolean <code>isKindOfClass</code>(Class <em>aClass,</em> Object <em>aFault</em>)</code></p>(com.apple.yellow.eocontrol only) Returns true ifthe target class of the receiver's fault is <em>aClass</em>  or asubclass of <em>aClass.</em>  The fault mustbe passed in as <em>aFault</em>  in case thereceiver needs to fire it (EOFaultHandlers don't keep references totheir faults). For example, to support entity inheritance, the Accesslayer fires faults for entities with subentities to confirm theirprecise class membership.<p><b>See Also: </b>  <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "isMemberOfClass_forFault_"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/isMemberOfClass">isMemberOfClass</a></h3><p><code>public boolean <code>isMemberOfClass</code>(Class <em>aClass,</em> Object <em>aFault</em>)</code></p>(com.apple.yellow.eocontrol only) Returns true ifthe target class of the receiver's fault is <em>aClass.</em> This fault must be passed as <em>aFault</em>  incase the receiver needs to fire it (EOFaultHandlers don't keep references totheir faults). For example, to support entity inheritance, the Accesslayer fires faults for entities with subentities to confirm theirprecise class membership.<p><b>See Also: </b>  <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "respondsToSelector_forFault_"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/respondsToSelectorForFault">respondsToSelectorForFault</a></h3><p><code>public boolean <code>respondsToSelectorForFault</code>(NSSelector <em>aSelector,</em> Object <em>aFault</em>)</code></p>(com.apple.yellow.eocontrol only) Returns true ifthe target class of the receiver's fault responds to <em>aSelector.</em> This fault must be passed as <em>aFault</em>  incase the receiver needs to fire it (EOFaultHandlers don't store references totheir faults). For example, to support entity inheritance, the Accesslayer fires faults for entities with subentities to confirm theirprecise class membership.<p><b>See Also: </b>  <a href="#//apple_ref/java/instm/EOFaultHandler/completeInitializationOfObject">completeInitializationOfObject</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "targetClass"></a><BR><h3><a name="//apple_ref/java/instm/EOFaultHandler/targetClass">targetClass</a></h3><p><code>public Class <code>targetClass</code>()</code></p>(com.apple.yellow.eocontrol only) Returns thetarget class of the receiver's fault. The fault may, however,be converted to a member of this class or of a subclass of thisclass. For example, to support entity inheritance, the Access layerfires faults for entities with subentities into the appropriateclass on fetching their data.<hr WIDTH="25%" ALIGN="LEFT"><BR><br><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a></BODY></HTML>
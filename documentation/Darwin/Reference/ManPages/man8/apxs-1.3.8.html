<html><head><title>Mac OS X Server
 Manual Page For apxs-1.3(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/apxs-1.3" title="Mac OS X Server
 Manual Page for apxs-1.3(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/apxs-1.3"; name=apxs-1.3(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with Mac&nbsp;OS&nbsp;X&nbsp;Server.  It is
not available on standard Mac OS X (client) installations.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
apxs(8)                                                                                              <a href="apxs.8.html#//apple_ref/doc/man/8/apxs">apxs(8)</a>



<b>NAME</b>
       apxs - APache eXtenSion tool

<b>SYNOPSIS</b>
       <b>apxs</b> <b>-g</b> [ <b>-S</b> <u>variable=value</u> ] <b>-n</b> <u>name</u>

       <b>apxs</b> <b>-q</b> [ <b>-S</b> <u>variable=value</u> ] <u>query</u> ...

       <b>apxs</b> <b>-c</b> [ <b>-S</b> <u>variable=value</u> ] [ <b>-o</b> <u>dsofile</u> ] [ <b>-I</b> <u>incdir</u> ] [ <b>-D</b> <u>variable[=value]</u> ] [ <b>-L</b> <u>libdir</u> ] [ <b>-l</b>
       <u>libname</u> ] [ <b>-Wc,</b><u>compiler-flags</u> ] [ <b>-Wl,</b><u>linker-flags</u> ] <u>files</u> ...

       <b>apxs</b> <b>-i</b> [ <b>-S</b> <u>variable=value</u> ] [ <b>-n</b> <u>name</u> ] [ <b>-a</b> ] [ <b>-A</b> ] <u>dsofile</u> ...

       <b>apxs</b> <b>-e</b> [ <b>-S</b> <u>variable=value</u> ] [ <b>-n</b> <u>name</u> ] [ <b>-a</b> ] [ <b>-A</b> ] <u>dsofile</u> ...


<b>DESCRIPTION</b>
       <b>apxs</b> is a tool for building and installing extension modules for the Apache HyperText Transfer Proto-<font color="#ffffff" class="whiteout">col&nbsp;Protocol</font>
       col (HTTP) server. This is achieved by building a Dynamic Shared Object (DSO) from one or more source
       or object <u>files</u> which then can be loaded into the Apache server  under  runtime  via  the  <b>LoadModule</b>
       directive from <b>mod_so.</b>

       So  to  use  this  extension  mechanism, your platform has to support the DSO feature and your Apache
       <b>httpd</b> binary has to be built with the <b>mod_so</b> module.  The <b>apxs</b> tool automatically complains  if  this
       is not the case.  You can check this yourself by manually running the command

         $ httpd -l

       The module <b>mod_so</b> should be part of the displayed list.  If these requirements are fulfilled, you can
       easily extend your Apache server's functionality by installing your own modules with the  DSO  mecha-<font color="#ffffff" class="whiteout">nism&nbsp;mechanism</font>
       nism by the help of this <b>apxs</b> tool:

         $ apxs -i -a -c mod_foo.c
         gcc -fpic -DSHARED_MODULE -I/path/to/apache/include -c mod_foo.c
         ld -Bshareable -o mod_foo.so mod_foo.o
         cp mod_foo.so /path/to/apache/libexec/mod_foo.so
         chmod 755 /path/to/apache/libexec/mod_foo.so
         [activating module `foo' in /path/to/apache/etc/httpd.conf]
         $ apachectl restart
         /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
         [Tue Mar 31 11:27:55 1998] [debug] <!-- a -->mod_so.c(303)<!-- /a -->: loaded module foo_module
         /path/to/apache/sbin/apachectl restart: httpd started
         $ _

       The arguments <u>files</u> can be any C source file (.c), a object file (.o) or even a library archive (.a).
       The <b>apxs</b> tool automatically recognizes these extensions and automatically uses the C source files for
       compilation  while  it  just  uses the object and archive files for the linking phase. But when using
       such pre-compiled objects, make sure they are compiled for Position Independend Code (PIC) to be able
       to  use them for a DSO. For instance with GCC you always just have to use <b>-fpic</b>.  For other C compil-<font color="#ffffff" class="whiteout">ers&nbsp;compilers</font>
       ers please consult its manual page or watch for the flags <b>apxs</b> uses to compile the object files.

       For more details about DSO support in Apache, first read the  background  information  about  DSO  in
       htdocs/manual/dso.html, then read the documentation of <b>mod_so</b>.



<b>OPTIONS</b>
       Common options:

       <b>-n</b> <u>name</u>     This  explicitly  sets  the module name for the <b>-i</b> (install) and <b>-g</b> (template generation)
                   option. Use this to explicitly specify the module name.  For option <b>-g</b> this is  required,
                   for  option  <b>-i</b>  the <b>apxs</b> tool tries to determine the name from the source or (as a fall-<font color="#ffffff" class="whiteout">back)&nbsp;fallback)</font>
                   back) at least by guessing it from the filename.

       Query options:

       <b>-q</b>          Performs a query for <b>apxs</b>'s knowledge about certain settings. The <u>query</u> parameters can be
                   one or more of the following variable names:
                     CC              TARGET
                     CFLAGS          SBINDIR
                     CFLAGS_SHLIB    INCLUDEDIR
                     LD_SHLIB        LIBEXECDIR
                     LDFLAGS_SHLIB   SYSCONFDIR
                     LIBS_SHLIB      PREFIX
                   Use this for manually determining settings. For instance use
                     INC=-I`apxs -q INCLUDEDIR`
                   inside your own Makefiles if you need manual access to Apache's C header files.

       Configuration options:

       <b>-S</b> <u>variable=value</u>
                   This option changes the <b>apxs</b> settings described above.

       Template Generation options:

       <b>-g</b>          This  generates  a subdirectory <u>name</u> (see option <b>-n</b>) and there two files: A sample module
                   source file named <b>mod_</b><u>name.c</u> which can be used as a template for creating your  own  mod-<font color="#ffffff" class="whiteout">ules&nbsp;modules</font>
                   ules  or as a quick start for playing with the <b>apxs</b> mechanism.  And a corresponding <b>Make</b>-<font color="#ffffff" class="whiteout">file&nbsp;Makefile</font>
                   <b>file</b> for even easier building and installing of this module.

       DSO compilation options:

       <b>-c</b>          This indicates the compilation operation. It first compiles the C source  files  (.c)  of
                   <u>files</u>  into  corresponding  object files (.o) and then builds a DSO in <u>dsofile</u> by linking
                   these object files plus the remaining object files (.o and .a) of <u>files</u> If no  <b>-o</b>  option
                   is specified the output file is guessed from the first filename in <u>files</u> and thus usually
                   defaults to <b>mod_</b><u>name.so</u>

       <b>-o</b> <u>dsofile</u>  Explicitly specifies the filename of the created DSO file. If not specified and the  name
                   cannot be guessed from the <u>files</u> list, the fallback name <b>mod_unknown.so</b> is used.

       <b>-D</b> <u>variable[=value]</u>
                   This  option  is  directly passed through to the compilation <!-- a -->command(s)<!-- /a -->.  Use this to add
                   your own defines to the build process.

       <b>-I</b> <u>incdir</u>   This option is directly passed through to the compilation <!-- a -->command(s)<!-- /a -->.  Use  this  to  add
                   your own include directories to search to the build process.

       <b>-L</b> <u>libdir</u>   This  option  is directly passed through to the linker command.  Use this to add your own
                   library directories to search to the build process.

       <b>-l</b> <u>libname</u>  This option is directly passed through to the linker command.  Use this to add  your  own
                   libraries to search to the build process.

       <b>-Wc,</b><u>compiler-flags</u>
                   This  option passes <u>compiler-flags</u> as additional flags to the compiler command.  Use this
                   to add local compiler-specific options.

       <b>-Wl,</b><u>linker-flags</u>
                   This option passes <u>linker-flags</u> as additional flags to the linker command.  Use  this  to
                   add local linker-specific options.

       DSO installation and configuration options:

       <b>-i</b>          This indicates the installation operation and installs one or more DSOs into the server's
                   <u>libexec</u> directory.

       <b>-a</b>          This activates the module by automatically adding  a  corresponding  <b>LoadModule</b>  line  to
                   Apache's <b>httpd.conf</b> configuration file, or by enabling it if it already exists.

       <b>-A</b>          Same  as option <b>-a</b> but the created <b>LoadModule</b> directive is prefixed with a hash sign (#),
                   i.e. the module is just prepared for later activation but initially disabled.

       <b>-e</b>          This indicates the editing operation, which can be used with the <b>-a</b> and <b>-A</b> options  simi-<font color="#ffffff" class="whiteout">larly&nbsp;similarly</font>
                   larly to the <b>-i</b> operation to edit Apache's <b>httpd.conf</b> configuration file without attempt-<font color="#ffffff" class="whiteout">ing&nbsp;attempting</font>
                   ing to install the module.

<b>EXAMPLES</b>
       Assume you have an Apache module named mod_foo.c available which should extend Apache's server  func-<font color="#ffffff" class="whiteout">tionality.&nbsp;functionality.</font>
       tionality.  To accomplish this you first have to compile the C source into a DSO suitable for loading
       into the Apache server under runtime via the following command:

         $ apxs -c mod_foo.c
         gcc -fpic -DSHARED_MODULE -I/path/to/apache/include -c mod_foo.c
         ld -Bshareable -o mod_foo.so mod_foo.o
         $ _

       Then you have to update the Apache configuration by making sure a <b>LoadModule</b> directive is present  to
       load  this  DSO.  To  simplify  this  step  <b>apxs</b>  provides an automatic way to install the DSO in the
       "libexec" directory and updating the <b>httpd.conf</b> file accordingly. This can be achieved by running:

         $ apxs -i -a mod_foo.c
         cp mod_foo.so /path/to/apache/libexec/mod_foo.so
         chmod 755 /path/to/apache/libexec/mod_foo.so
         [activating module `foo' in /path/to/apache/etc/httpd.conf]
         $ _

       This way a line named

         LoadModule foo_module libexec/mod_foo.so

       is added to the configuration file if still not present.  If you want to have this  operation  to  be
       disabled, use the <b>-A</b> option, i.e.

         $ apxs -i -A mod_foo.c

       For  a  quick test of the <b>apxs</b> mechanism you can create a sample Apache module template plus a corre-<font color="#ffffff" class="whiteout">sponding&nbsp;corresponding</font>
       sponding <b>Makefile</b> via:

         $ apxs -g -n foo
         Creating [DIR]  foo
         Creating [FILE] foo/Makefile
         Creating [FILE] foo/mod_foo.c
         $ _

       Then you can immediately compile this sample module into a DSO and load it into the Apache server:

         $ cd foo
         $ make all reload
         apxs -c mod_foo.c
         gcc -fpic -DSHARED_MODULE -I/path/to/apache/include -c mod_foo.c
         ld -Bshareable -o mod_foo.so mod_foo.o
         apxs -i -a -n "foo" mod_foo.so
         cp mod_foo.so /path/to/apache/libexec/mod_foo.so
         chmod 755 /path/to/apache/libexec/mod_foo.so
         [activating module `foo' in /path/to/apache/etc/httpd.conf]
         apachectl restart
         /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
         [Tue Mar 31 11:27:55 1998] [debug] <!-- a -->mod_so.c(303)<!-- /a -->: loaded module foo_module
         /path/to/apache/sbin/apachectl restart: httpd started
         $ _

       You can even use <b>apxs</b> to compile complex modules outside the Apache source tree, like  PHP3,  because
       <b>apxs</b> automatically recognized C source files and object files.

         $ cd php3
         $ ./configure --with-shared-apache=../apache-1.3
         $ apxs -c -o libphp3.so mod_php3.c libmodphp3-so.a
         gcc -fpic -DSHARED_MODULE -I/tmp/apache/include  -c mod_php3.c
         ld -Bshareable -o libphp3.so mod_php3.o libmodphp3-so.a
         $ _

       Only C source files are compiled while remaining object files are used for the linking phase.


<b>SEE</b> <b>ALSO</b>
       <!-- a --><b>apachectl(1)</b><!-- /a --><b>,</b> <a href="httpd.8.html#//apple_ref/doc/man/8/httpd"><b>httpd(8)</b></a><b>.</b>



                                                February 2004                                        <a href="apxs.8.html#//apple_ref/doc/man/8/apxs">apxs(8)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/apxs-1.3.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/apxs-1.3.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/apxs-1.3.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

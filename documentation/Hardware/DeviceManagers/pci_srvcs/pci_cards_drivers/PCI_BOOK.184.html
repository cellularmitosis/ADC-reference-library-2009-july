<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> CreateInterruptSet11</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.183.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.183.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.185.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="RoH.RoutineHeading"><A NAME="pgfId=4493"> </A>CreateInterruptSet</H1><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=19439"> </A>OSStatus CreateInterruptSet (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InterruptSetID parentSet,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InterruptMemberNumber parentMember,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InterruptMemberNumber setSize,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InterruptSetID *setID,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InterruptSetOptions options);</CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=19443"> </A><TT CLASS="cv">--&gt; parentSet</TT><A NAME="33849"> </A></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4497"> </A>Member set ID.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=19453"> </A><TT CLASS="cv">--&gt; parentMember</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4498"> </A> Set member number.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=19463"> </A><TT CLASS="cv">--&gt; setSize</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4499"> </A>Number of child members to create.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=19472"> </A><TT CLASS="cv">&lt;--&gt; setID</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4500"> </A>Interrupt set ID.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=19481"> </A><TT CLASS="cv">--&gt; options</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4501"> </A>Options:<TT CLASS="cv"> kReturnToParentWhenComplete = 0x00000001  kReturnToParentWhenNotComplete = 0x00000002</TT> </DD></DL COMPACT><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=4502"> </A>DESCRIPTION</H5><P CLASS="T1.Text1"><A NAME="pgfId=4503"> </A>The <TT CLASS="cv">CreateInterruptSet</TT> function extends an IST. When calling it, pass the member set ID and the set member number in <TT CLASS="cv">parentSet</TT> and <TT CLASS="cv">parentMember</TT> to uniquely identify which leaf member is to become the parent member. Pass the number of child members to create in <TT CLASS="cv">setSize</TT>. Pass a pointer to a variable of type <TT CLASS="cv">InterruptSetID</TT> in <TT CLASS="cv">setID</TT>. <TT CLASS="cv">CreateInterruptSet</TT> returns <TT CLASS="cv">noErr</TT> if the creation process succeeded, and the variable pointed to by <TT CLASS="cv">setID</TT> contains the member set ID of the new set's child members.<A NAME="marker=8027"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=4504"> </A>The <TT CLASS="cv">options</TT> parameter operates in these ways to modify the default interrupt dispatching behavior:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=4505"> </A>Option <TT CLASS="cv">kReturnToParentWhenComplete</TT> modifies the behavior for successful interrupt completion. Any time a child in a set with this option returns <TT CLASS="cv">kIsrIsComplete</TT>, the dispatcher reinvokes the parent's transversal ISR. A parent can thus reevaluate its children's interrupt requests and can have another child serviced immediately instead of having to traverse the entire interrupt tree again.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=4506"> </A>Option <TT CLASS="cv">kReturnToParentWhenNotComplete</TT> modifies the behavior for unsuccessful interrupt completion. Any time a child in a set with this option returns <TT CLASS="cv">kIsrIsNotComplete</TT>, the dispatcher reinvokes the parent's transversal ISR. The parent can then invoke another child to try to service the interrupt request. This process is repeated until one of the children members returns <TT CLASS="cv">kIsrIsComplete</TT> or the parent returns <TT CLASS="cv">kIsrIsNotComplete</TT>. In the latter case, the dispatcher continues traversing the tree between the parent and the root, looking for an ISR to satisfy the interrupt request. If the root is reached, the interrupt request is treated as spurious.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=4507"> </A>If no options are set, the dispatcher traverses the tree toward the root, looking for an IST member's interrupt set that has options set, until it arrives at the root.</LI></UL></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=4508"> </A>EXECUTION CONTEXT</H5><P CLASS="T1.Text1"><A NAME="pgfId=4509"> </A><TT CLASS="cv">CreateInterruptSet</TT> may be called only from task level, not from secondary or hardware interrupt level.</P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=4529"> </A>RESULT CODES</H5><TABLE border=1 cellpadding=3><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=4512"> </A>noErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4514"> </A>0</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4516"> </A>No error</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=4518"> </A>paramErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4520"> </A>-50</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4522"> </A>Bad parameter</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=4524"> </A>memFullErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4526"> </A>-108</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4528"> </A>Not enough room in heap</FONT></TD></TR></TABLE></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.183.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.183.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.185.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
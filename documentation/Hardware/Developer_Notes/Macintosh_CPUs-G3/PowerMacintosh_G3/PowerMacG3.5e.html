<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><!-- <LINK REL="STYLESHEET" HREF="PowerMacG3.css"> --><script language="JavaScript" src="frametest.js"></script><TITLE> NewWorld Boot Process </TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> Power Macintosh G3 Developer Note		</font></td>	</tr>	</table><!-- end of path --><DIV><!-- top navigation --><P><A HREF="PowerMacG3.51.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="PowerMacG3.5d.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="PowerMacG3.5f.html"><img src="images/next.gif" border="0" alt="Next"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><h2 CLASS="H1.Heading1"><A NAME="pgfId=4582"> </A>NewWorld Boot Process <A NAME="marker=4581"> </A></h2><P CLASS="T1.Text1"><A NAME="pgfId=4583"> </A>Here is a high-level view of the execution path take when a NewWorld-based computer boots.</P><OL><LI CLASS="N/.NList=1"><A NAME="pgfId=4526"> </A>The POST code runs (preliminary diagnostics, boot beep, initialization, and setup), with possible intervention in the mini nub, a small debugging tool. <A NAME="marker=4527"> </A></LI><LI CLASS="N.NList"><A NAME="pgfId=4528"> </A>Open Firmware initializes and begins execution, including building the device tree and the interrupt trees.<A NAME="marker=4529"> </A></LI><LI CLASS="N.NList"><A NAME="pgfId=3400"> </A>Open Firmware loads the Mac OS ROM image file, based on defaults and NV-RAM settings.</LI><LI CLASS="N.NList"><A NAME="pgfId=3401"> </A>Open Firmware executes the Forth script in the bootinfo file, which contains instructions to read both the Trampoline code and the compressed Mac OS ROM Image and place them into a temporary place in memory. <A NAME="marker=3402"> </A></LI><LI CLASS="N.NList"><A NAME="pgfId=3403"> </A>The Forth script transfers control to the Trampoline code, which functions as the transition between Open Firmware and the beginning of the Mac OS execution.</LI><LI CLASS="N.NList"><A NAME="pgfId=4600"> </A>The Trampoline code decompresses the Mac OS ROM Image, gathers information about the system from Open Firmware, creates data structures based on this information, terminates Open Firmware, and rearranges the contents of memory to an interim location in physical memory space. <A NAME="marker=4601"> </A></LI><LI CLASS="N.NList"><A NAME="pgfId=4602"> </A>The Trampoline code transfers control to the <TT CLASS="cv">HardwareInit</TT> routine in the Mac OS ROM Image.</LI><LI CLASS="N.NList"><A NAME="pgfId=4603"> </A>The <TT CLASS="cv">HardwareInit</TT> routine copies data structures to their correct places in memory, and then calls the NanoKernel.</LI><LI CLASS="N.NList"><A NAME="pgfId=3408"> </A>The NanoKernel fills in its data structures and then calls the 68K emulator.</LI><LI CLASS="N.NList"><A NAME="pgfId=3409"> </A>The 68K emulator initializes itself, then transfers control to the startup initialization code.</LI><LI CLASS="N.NList"><A NAME="pgfId=3410"> </A>The startup initialization code begins execution, initializing data structures and managers, and booting the Mac OS.</LI></OL><P CLASS="T1.Text1"><A NAME="pgfId=3411"> </A>All functions found in the old Mac OS ROM are present in the NewWorld boot process, but occur at different times and places. To accomplish this, the code in the Mac OS ROM Image and POST is simplified, while the Trampoline code addresses the new functionality. <A NAME="marker=3412"> </A></P><HR>\xA9 1998 Apple Computer, Inc. &#151; (Last Updated 5 Jan 99)<P><A HREF="PowerMacG3.51.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="PowerMacG3.5d.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="PowerMacG3.5f.html"><img src="images/next.gif" border="0" alt="Next"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
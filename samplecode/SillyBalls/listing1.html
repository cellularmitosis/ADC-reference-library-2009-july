<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>SillyBalls - /SillyBalls.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; <A HREF="javascript:location.replace('index.html');">SillyBalls</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">SillyBalls</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/SillyBalls.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/SillyBalls.c</option></select>
				</p>
				</form>
				<p><strong><a href="SillyBalls.zip">Download Sample</a></strong> (&#147;SillyBalls.zip&#148;, 12.7K)<BR>
<strong><a href="SillyBalls.dmg">Download Sample</a></strong> (&#147;SillyBalls.dmg&#148;, 73.4K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    SillyBalls.c  Contains:  This is a very simple sample program that demonstrates how to use Color         QuickDraw.  It is about two pages of code, and does nothing more than open        a color window and draw randomly colored ovals in the window.          The purpose is to show how to get some initial results with Color QuickDraw.        It is a complete program and is very short to be as clear as possible.            It does not have an Event Loop.  It is not fully functional in the sense that        it does not do all the things you would expect a well behaved Macintosh         program to do, like size the window naturally, have an event loop, use menus,         etc.          See Sample and TESample for the general structure and MultiFinder techniques that        we recommend that you use when building a new application.        purpose:  To demonstrate a simple color App using Color QuickDraw.              It draws colored balls in a color window, then uses colored              text inverted in the ball.  The ball location and color is Random.                                  The inverted Bob text was a Skippy Blair special concept,              kept for obvious aesthetic reasons.                Written by: Bo3b Johnson    Copyright:  Copyright &copy; 1988-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        8/13/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        7/20/88     DJB        Converted to C              MW         -cut out some other program descriptions        8/31/93 JA          MW ** Metrowerks note **                      All changed code by Metrowerks is commented by &quot;//MW&quot;.                      There is one type of modification to the original source:                      * Added argument type and return type to function definitions.                      In order to pass with extended error checking on.*/#include &lt;Quickdraw.h&gt;#include &lt;Fonts.h&gt;#include &lt;Sound.h&gt;/* Constants */#define BallWidth    20#define BallHeight    20#define BobSize      8    /* Size of text in each ball *//* Globals */Rect  windRect;  /* Prototypes */void Initialize(void);void NewBall(void);// //  Main body of program SillyBalls////MW specified argument and return type.void main(void){  Initialize();    do {    NewBall();  } while (!Button());  }// //  Initialize everything for the program, make sure we can run////MW specified argument and return type.void Initialize(void){  WindowPtr  mainPtr;  OSErr    error;  SysEnvRec  theWorld;      //  //  Test the computer to be sure we can do color.    //  If not we would crash, which would be bad.    //  If we can't run, just beep and exit.  //  error = SysEnvirons(1, &amp;theWorld);  if (theWorld.hasColorQD == false) {    SysBeep(50);    ExitToShell();          /* If no color QD, we must leave. */  }    /* Initialize all the needed managers. */  InitGraf(&amp;qd.thePort);  InitFonts();  InitWindows();  InitMenus();  TEInit();  InitDialogs(nil);  InitCursor();  //  //  To make the Random sequences truly random, we need to make the seed start  //  at a different number.  An easy way to do this is to put the current time  //  and date into the seed.  Since it is always incrementing the starting seed  //  will always be different.  Don't for each call of Random, or the sequence  //  will no longer be random.  Only needed once, here in the init.  //  GetDateTime((unsigned long*) &amp;qd.randSeed);  //  //  Make a new window for drawing in, and it must be a color window.    //  The window is full screen size, made smaller to make it more visible.  //  windRect = qd.screenBits.bounds;  InsetRect(&amp;windRect, 50, 50);  mainPtr = NewCWindow(nil, &amp;windRect, &quot;\pBob Land&quot;, true, documentProc,             (WindowPtr) -1, false, 0);      SetPort(mainPtr);            /* set window to current graf port */  TextSize(BobSize);            /* smaller font for drawing. */}// //  NewBall: make another ball in the window at a random location and color.////MW -specified argument and return type.-void NewBall(void){  RGBColor  ballColor;  Rect    ballRect;  long int  newLeft,        newTop;    //   //  Make a random new color for the ball.  //  ballColor.red   = Random();  ballColor.green = Random();  ballColor.blue  = Random();    //   //  Set that color as the new color to use in drawing.  //  RGBForeColor (&amp;ballColor);  //    //  Make a Random new location for the ball, that is normalized to the window size.    //  This makes the Integer from Random into a number that is 0..windRect.bottom  //  and 0..windRect.right.  They are normalized so that we don't spend most of our  //  time drawing in places outside of the window.  //  newTop = Random();  newLeft = Random();  newTop = ((newTop+32767) * windRect.bottom)/65536;  newLeft = ((newLeft+32767) * windRect.right)/65536;  SetRect(&amp;ballRect, newLeft, newTop, newLeft+BallWidth, newTop+BallHeight);    //  //  Move pen to the new location, and paint the colored ball.  //  MoveTo(newLeft, newTop);  PaintOval (&amp;ballRect);    //  //  Move the pen to the middle of the new ball position, for the text  //  MoveTo(ballRect.left + BallWidth/2 - BobSize,     ballRect.top + BallHeight/2 + BobSize/2 -1);    //    //  Invert the color and draw the text there.  This won't look quite right in 1 bit  //  mode, since the foreground and background colors will be the same.  //  Color QuickDraw special cases this to not invert the color, to avoid  //  invisible drawing.  //  InvertColor(&amp;ballColor);   RGBForeColor(&amp;ballColor);  DrawString(&quot;\pBob&quot;);}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/SillyBalls/listing1.html%3Fid%3DDTS10000735-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/SillyBalls/listing1.html%3Fid%3DDTS10000735-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/SillyBalls/listing1.html%3Fid%3DDTS10000735-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>HMShowMenuBalloon (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING167></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-166.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-168.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-138.html"><B>Chapter 3 - Help Manager</B></A> / <A HREF="MoreToolbox-157.html"><B>Help Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-161.html"><B>Help Manager Routines </B></A> / <A HREF="MoreToolbox-165.html"><B>Displaying and Removing Help Balloons</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING167-0></A>
<H3><A NAME=MARKER-9-459></A>HMShowMenuBalloon</H3>
 <A NAME=MARKER-2-460></A><A NAME=MARKER-2-461></A>The Help Manager displays help balloons for applications that provide <CODE>'hmnu'</CODE> resources and use the standard menu definition procedure. If your application uses your own menu definition procedure, you can still use the Help Manager to display help balloons for the menus that your menu definition procedure manages. Use the <CODE>HMShowMenuBalloon</CODE> function to display balloons described by the standard balloon definition function. If you want to use your own balloon definition function from within your menu definition procedure, call the <CODE>HMShowBalloon</CODE> function (described in the previous section) and specify the <CODE>kHMSaveBitsNoWindow</CODE> constant for the <CODE>method</CODE> parameter. You can also use the <CODE>HMShowMenuBalloon</CODE> function as an alternative to creating an <CODE>'hmnu'</CODE> resource for your menu.<P>
<PRE>
FUNCTION HMShowMenuBalloon (itemNum: Integer; itemMenuID: Integer; 
                           itemFlags: LongInt; 
                           itemReserved: LongInt; 
                           tip: Point; alternateRect: RectPtr; 
                           tipProc: Ptr; theProc: Integer; 
                           variant: Integer): OSErr;
</PRE>
<DL>
<DT><CODE>itemNum</CODE>
<DD> The number of the menu item over which the cursor is currently located. Use a positive number in the <CODE>itemNum</CODE> parameter to specify a menu item, use -1 if the cursor is located over a divider line, or use 0 if the cursor is located over the menu title. 
<DT><CODE>itemMenuID</CODE>
<DD> The ID of the menu in which the cursor is currently located. 
<DT><CODE>itemFlags</CODE>
<DD> A long integer from the menu flags, telling whether a menu item is enabled or dimmed and whether the menu itself is enabled or dimmed. The Help Manager uses this value to determine which balloon to display from the <CODE>'hmnu'</CODE> resource.
<DT><CODE>itemReserved</CODE>
<DD> Reserved for future use by Apple. Specify 0 in this parameter.
<DT><CODE>tip</CODE>
<DD> The tip for the help balloon. The standard menu definition procedure places the tip 8 pixels from either the right or left edge of the menu item. For menu titles, the standard menu definition procedure centers the tip at the bottom of the menu bar; you should not specify a tip with coordinates in the menu bar for any menu titles. 
<DT>
<DD> The Help Manager uses the tip you specify in this parameter unless it places the help balloon offscreen or in the menu bar. If the tip is offscreen, the Help Manager uses the rectangle specified in the <CODE>alternateRect</CODE> parameter to calculate a new tip location. 
<DT><CODE>alternateRect</CODE>
<DD> The rectangle that the Help Manager uses to calculate a new tip location. (The standard menu definition procedure specifies the alternate rectangle as the rectangle that encloses the menu title or menu item.) If the balloon's first position is offscreen or in the menu bar, the Help Manager tries a different balloon variation code or calculates a new tip by transposing it to an opposite side of the alternate rectangle. If you specify <CODE>NIL</CODE> for the <CODE>alternateRect</CODE> parameter, the Help Manager does not attempt to calculate a new tip position when the help balloon is offscreen.
<DT><CODE>tipProc</CODE>
<DD> The tip function that the Help Manager calls before displaying the balloon. Specify <CODE>NIL</CODE> to use the Help Manager's default tip function, or supply your own tip function and point to it in this parameter.
<DT><CODE>theProc</CODE>
<DD> Reserved for use by Apple. Specify 0 in this parameter.
<DT><CODE>variant</CODE>
<DD> The variation code for the standard balloon definition function. Specify 0 to use the default balloon position or a code between 1 and 7 to use one of the other standard positions shown in <A HREF=MoreToolbox-140.html#MARKER-9-48>Figure 3-4 on page 3-9</A>.
</DL>
<A NAME=HEADING167-13></A>
<H5>DESCRIPTION</H5>
 The <CODE>HMShowMenuBalloon</CODE> function saves the bits behind the help balloon before displaying the help balloon. When you remove the balloon, the Help Manager restores the bits that were previously behind it.<P>
 After your menu definition procedure determines that the cursor is located in a menu item, you can use the <CODE>HMShowMenuBalloon</CODE> function to display any help balloons associated with that item. You must then use the <CODE>HMRemoveBalloon</CODE> function to remove the balloon when the cursor moves away from the menu item.<P>
 If you use the <CODE>HMShowMenuBalloon</CODE> function to display help balloons, you must identify hot rectangles, create your own data structures to store their locations, track the cursor yourself, and call <CODE>HMShowMenuBalloon</CODE> when the cursor moves to your hot rectangles. The Help Manager does not know the locations of your hot rectangles, so it cannot use them for moving the tip if the balloon is placed offscreen. Instead, the Help Manager uses the alternate rectangle that you point to with the <CODE>alternateRect</CODE> parameter.<P>
 Unlike the way the <CODE>alternateRect</CODE> parameter works in the <CODE>HMShowBalloon</CODE> function, specifying an alternate rectangle to <CODE>HMShowMenuBalloon</CODE> does not cause the Help Manager to track the cursor and remove the balloon for you. You must still track the cursor and use the <CODE>HMRemoveBalloon</CODE> function to remove the balloon when the cursor moves out of the area specified by the hot rectangle.<A NAME=MARKER-2-462></A><P>
 Specify <CODE>NIL</CODE> in the <CODE>tipProc</CODE> parameter to use the tip function values calculated by the Help Manager. If you supply your own tip function and specify it in the <CODE>tipProc</CODE> parameter, the Help Manager returns the tip, the region boundary of the entire balloon, the region boundary for the content area within the balloon frame, and the variation code to be used for the help balloon before displaying it. This allows you to examine and possibly adjust the balloon before it is displayed.<P>
<A NAME=HEADING167-19></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>HMShowMenuBalloon</CODE> function are 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_Pack14<TD>$0E05</TABLE>
 <P>
<A NAME=HEADING167-21></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error; the help balloon was displayed<TR>
<TD>memFullErr<TD>-108<TD>Not enough room in heap zone<TR>
<TD>hmHelpDisabled<TD>-850<TD>Help balloons are not enabled<TR>
<TD>hmBalloonAborted<TD>-853<TD>Because of constant cursor movement, the help balloon wasn't displayed<A NAME=MARKER-2-8></A><TR>
<TD>hmSameAsLastBalloon<TD>-854<TD>Menu and item are same as last menu and item</TABLE>
</H5>
<A NAME=HEADING167-22></A>
<H5>SEE ALSO</H5>
 You can supply your own tip function (as explained in the description of the <CODE>MyTip</CODE> function, which begins on <A HREF=MoreToolbox-193.html#MARKER-9-515>page 3-122</A>) and point to it in the <CODE>tipProc</CODE> parameter.<P>
 The <CODE>HMRemoveBalloon</CODE> function is described next.<A NAME=MARKER-2-463></A><A NAME=MARKER-2-464></A><A NAME=MARKER-2-465></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-166.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-168.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

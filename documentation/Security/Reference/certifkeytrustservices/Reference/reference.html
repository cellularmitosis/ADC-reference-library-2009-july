<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Certificate, Key, and Trust Services Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Certificate, Key, and Trust Services Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000157-DontLinkChapterID_1" title="Certificate, Key, and Trust Services Reference"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Security/index.html#//apple_ref/doc/uid/TP30001281-TP30000434" target="_top">Security</a> &gt; <a href="../../../../../reference/Security/idxAuthentication-date.html#//apple_ref/doc/uid/TP30001281-TP30000434-TP30000487" target="_top">Authentication</a> &gt; <a href="../index.html" target="_top">Certificate, Key, and Trust Services Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000157-DontLinkChapterID_1-DontLinkElementID_15" title="Certificate, Key, and Trust Services Reference"></a><h1>Certificate, Key, and Trust Services Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px"> <a href="../../SecurityFrameworkReference/index.html#//apple_ref/doc/uid/TP40004330" target="_top">Security</a>/Security.h</div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">SecBase.h</span><br/><span class="content_text">SecCertificate.h</span><br/><span class="content_text">SecIdentity.h</span><br/><span class="content_text">SecIdentitySearch.h</span><br/><span class="content_text">SecKey.h</span><br/><span class="content_text">SecKeychainItem.h</span><br/><span class="content_text">SecPolicy.h</span><br/><span class="content_text">SecPolicySearch.h</span><br/><span class="content_text">SecTrust.h</span><br/><span class="content_text">SecTrustSettings.h</span><br/><span class="content_text">cssmapple.h</span><br/></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/TP30000157-SW1" title="Overview"></a><h2>Overview</h2><p>Certificate, Key, and Trust Services provides a C API for managing certificates, public and private keys, and trust policies. You can use these services in your application to:</p><ul class="ul"><li class="li"><p>Determine identity by matching a certificate with a private key</p></li>
<li class="li"><p>Create and request certificate objects</p></li><li class="li"><p>Import certificates, keys, and identities</p></li>
<li class="li"><p>Create public-private key pairs</p></li>
<li class="li"><p>Represent trust policies</p></li></ul><p>Certificate, Key, and Trust Services can be used in applications running in Aspen.</p>



<a name="//apple_ref/doc/uid/TP30000157-DontLinkChapterID_1-DontLinkElementID_14" title="Functions by Task"></a><h2>Functions by Task</h2>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-328229" title="Getting Type Identifiers"></a>
    
    <h3 class="tasks">Getting Type Identifiers</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetTypeID">SecCertificateGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecCertificate</code> object belongs.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentityGetTypeID">SecIdentityGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecIdentity</code> object belongs.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchGetTypeID">SecIdentitySearchGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecIdentitySearch</code> object belongs.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecKeyGetTypeID">SecKeyGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecKey</code> object belongs.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetTypeID">SecPolicyGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecPolicy</code> object belongs.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchGetTypeID">SecPolicySearchGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecPolicySearch</code> object belongs.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustGetTypeID">SecTrustGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the unique identifier of the opaque type to which a <code>SecTrust</code> object belongs.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-329102" title="Managing Certificates"></a>
    
    <h3 class="tasks">Managing Certificates</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateAddToKeychain">SecCertificateAddToKeychain</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Adds a certificate to a keychain.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateCreateFromData">SecCertificateCreateFromData</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a certificate object based on the specified data, type, and encoding.'/>
            </span></li>
            
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateCopyCommonName">SecCertificateCopyCommonName</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the common name of the subject of a certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateCopyEmailAddresses">SecCertificateCopyEmailAddresses</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the email addresses for the subject of a certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateCopyPreference">SecCertificateCopyPreference</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the preferred certificate for the specified name and key use.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateCopyPublicKey">SecCertificateCopyPublicKey</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the public key from a certificate.'/>
            </span></li>
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetAlgorithmID">SecCertificateGetAlgorithmID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the algorithm identifier for a certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetCLHandle">SecCertificateGetCLHandle</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the certificate library handle from a certificate object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetData">SecCertificateGetData</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the data for a certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetIssuer">SecCertificateGetIssuer</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Unsupported.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetItem">SecCertificateGetItem</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Unsupported.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetSubject">SecCertificateGetSubject</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Unsupported.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateGetType">SecCertificateGetType</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the type of a specified certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCertificateSetPreference">SecCertificateSetPreference</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the preferred certificate for a specified name, key use, and date.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-330262" title="Managing Identities"></a>
    
    <h3 class="tasks">Managing Identities</h3>
        
    <ul class="tooltip">
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopyCertificate">SecIdentityCopyCertificate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves a certificate associated with an identity.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopyPreference">SecIdentityCopyPreference</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the preferred identity for the specified name and key use.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopyPrivateKey">SecIdentityCopyPrivateKey</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the private key associated with an identity.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopySystemIdentity">SecIdentityCopySystemIdentity</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains the system-wide identity associated with a specified domain. '/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentityCreateWithCertificate">SecIdentityCreateWithCertificate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a new identity for a certificate and its associated private key. '/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCopyNext">SecIdentitySearchCopyNext</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Finds the next identity matching specified search criteria'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCreate">SecIdentitySearchCreate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a search object for finding identities.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentitySetPreference">SecIdentitySetPreference</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the preferred identity for the specified name and key use.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecIdentitySetSystemIdentity">SecIdentitySetSystemIdentity</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Assigns the system-wide identity to be associated with a specified domain.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-330899" title="Cryptography and Digital Signatures"></a>
    
    <h3 class="tasks">Cryptography and Digital Signatures</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecKeyCreatePair">SecKeyCreatePair</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates an asymmetric key pair and stores it in a keychain.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCredentials">SecKeyGetCredentials</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns an access credential for a key.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCSPHandle">SecKeyGetCSPHandle</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the CSSM CSP handle for a key. '/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecKeyGenerate">SecKeyGenerate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a symmetric key and optionally stores it in a keychain.'/>
            </span></li>
            
            
            
            
            
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCSSMKey">SecKeyGetCSSMKey</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves a pointer to the <code>CSSM_KEY</code> structure containing the key stored in a keychain item.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-331429" title="Managing Policies"></a>
    
    <h3 class="tasks">Managing Policies</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetOID">SecPolicyGetOID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves a policy’s object identifier.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetTPHandle">SecPolicyGetTPHandle</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the trust policy handle for a policy object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetValue">SecPolicyGetValue</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves a policy’s value.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCopyNext">SecPolicySearchCopyNext</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves a policy object for the next policy matching specified search criteria.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCreate">SecPolicySearchCreate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a search object for finding policies.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecPolicySetValue">SecPolicySetValue</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets a policy&#8217;s value.'/>
            </span></li>
            
            
    </ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-332182" title="Managing Trust"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIFAGJA" title="Managing Trust"></a>
    
    <h3 class="tasks">Managing Trust</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyAnchorCertificates">SecTrustCopyAnchorCertificates</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the anchor (root) certificates stored by Mac OS X. '/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyCustomAnchorCertificates">SecTrustCopyCustomAnchorCertificates</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the custom anchor certificates, if any, used by a given trust.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyPolicies">SecTrustCopyPolicies</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the policies used by a given trust management object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a trust management object based on certificates and policies.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Evaluates trust for the specified certificate and policies.'/>
            </span></li>
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustGetCssmResult">SecTrustGetCssmResult</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the CSSM trust result.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustGetCssmResultCode">SecTrustGetCssmResultCode</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the CSSM result code from the most recent trust evaluation for a trust management object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves details on the outcome of a call to the function <code>SecTrustEvaluate</code>.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustGetTPHandle">SecTrustGetTPHandle</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the trust policy handle.'/>
            </span></li>
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the anchor certificates used when evaluating a trust management object.'/>
            </span></li>
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSetKeychains">SecTrustSetKeychains</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the keychains searched for intermediate certificates when evaluating a trust management object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSetParameters">SecTrustSetParameters</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the action and action data for a trust management object. '/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSetPolicies">SecTrustSetPolicies</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Set the policies to use in an evaluation.'/>
            </span></li>
            
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSetVerifyDate">SecTrustSetVerifyDate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the date and time against which the certificates in a trust management object are verified.'/>
            </span></li>
            
            
            
            
    <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustGetCSSMAnchorCertificates">SecTrustGetCSSMAnchorCertificates</a></code>&#032;&#032;<font color="red">Deprecated in Mac OS X v10.5</font>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the CSSM anchor certificates.'/>
            </span></li><li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustGetUserTrust">SecTrustGetUserTrust</a></code>&#032;&#032;<font color="red">Deprecated in Mac OS X v10.5</font>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Retrieves the user-specified trust setting for a certificate and policy.'/>
            </span></li><li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustSetUserTrust">SecTrustSetUserTrust</a></code>&#032;&#032;<font color="red">Deprecated in Mac OS X v10.5</font>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the user-specified trust settings of a certificate and policy. '/>
            </span></li></ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_8" title="Managing Trust Settings"></a>
    
    <h3 class="tasks">Managing Trust Settings</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCopyCertificates">SecTrustSettingsCopyCertificates</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains an array of all certificates that have trust settings in a specific trust settings domain. '/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCopyModificationDate">SecTrustSettingsCopyModificationDate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains the date and time at which a certificate’s trust settings were last modified.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCopyTrustSettings">SecTrustSettingsCopyTrustSettings</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains the trust settings for a certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCreateExternalRepresentation">SecTrustSettingsCreateExternalRepresentation</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains an external, portable representation of the specified domain&#8217;s trust settings.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsImportExternalRepresentation">SecTrustSettingsImportExternalRepresentation</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Imports trust settings into a trust domain.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsRemoveTrustSettings">SecTrustSettingsRemoveTrustSettings</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Deletes the trust settings for a certificate.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsSetTrustSettings">SecTrustSettingsSetTrustSettings</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Specifies trust settings for a certificate.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_10" title="Reporting Errors"></a>
    
    <h3 class="tasks">Reporting Errors</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/SecCopyErrorMessageString">SecCopyErrorMessageString</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a string describing an error.'/>
            </span></li>
    </ul>

<a name="//apple_ref/doc/uid/TP30000157-CH1g-328221" title="Functions"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBHFEJI" title="Functions"></a><h2>Functions</h2>












































<a name="//apple_ref/c/func/SecCertificateAddToKeychain" title="SecCertificateAddToKeychain"></a><a name="//apple_ref/doc/c_ref/SecCertificateAddToKeychain" title="SecCertificateAddToKeychain"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW16" title="SecCertificateAddToKeychain"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_17"></a><h3 class="tight">SecCertificateAddToKeychain</h3>
<p class="spaceabove">Adds a certificate to a keychain.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateAddToKeychain (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecKeychainRef" target="_top">SecKeychainRef</a> keychain
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificate</em></dt>
<dd><p>The certificate object for the certificate to add to the keychain.</p></dd>
<dt><em>keychain</em></dt>
<dd><p>The keychain object for the keychain to which you want to add the certificate. Pass <code>NULL</code> to add the certificate to the default keychain.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function requires a certificate object, which can, for example, be created with the <code><a href="reference.html#//apple_ref/c/func/SecCertificateCreateFromData">SecCertificateCreateFromData</a></code> function or obtained over a network (see <em><a href="../../secureTransportRef/index.html#//apple_ref/doc/uid/TP30000155" target="_top">Secure Transport Reference</a></em>). If the certificate has already been added to the specified keychain, the function returns <code>errSecDuplicateItem</code> and does not add another copy to the keychain. The function looks at the certificate data, not at the certificate object, to determine whether the certificate is a duplicate. It considers two certificates to be duplicates if they have the same primary key attributes.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateCopyCommonName" title="SecCertificateCopyCommonName"></a><a name="//apple_ref/doc/c_ref/SecCertificateCopyCommonName" title="SecCertificateCopyCommonName"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_1" title="SecCertificateCopyCommonName"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_18"></a><h3 class="tight">SecCertificateCopyCommonName</h3><p class="spaceabove">Retrieves the common name of the subject of a certificate.</p><p class="spaceabove"><pre>
OSStatus SecCertificateCopyCommonName(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> *commonName
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certificate</em></dt><dd><p>The certificate object from which to retrieve the common name.</p></dd><dt><em>commonName</em></dt><dd><p>On return, points to the common name. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateCopyEmailAddresses" title="SecCertificateCopyEmailAddresses"></a><a name="//apple_ref/doc/c_ref/SecCertificateCopyEmailAddresses" title="SecCertificateCopyEmailAddresses"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_2" title="SecCertificateCopyEmailAddresses"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_20"></a><h3 class="tight">SecCertificateCopyEmailAddresses</h3><p class="spaceabove">Retrieves the email addresses for the subject of a certificate.</p><p class="spaceabove"><pre>
OSStatus SecCertificateCopyEmailAddresses(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *emailAddresses
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certificate</em></dt><dd><p>The certificate object from which to retrieve the email addresses.</p></dd><dt><em>emailAddresses</em></dt><dd><p>On return, an array of zero or more <code>CFStringRef</code> elements, each containing one email address found in the certificate subject. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>Not every certificate subject includes an email address. If the function does not find any email addresses, it returns a <code>CFArrayRef</code> object with zero elements in the array.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateCopyPreference" title="SecCertificateCopyPreference"></a><a name="//apple_ref/doc/c_ref/SecCertificateCopyPreference" title="SecCertificateCopyPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW36" title="SecCertificateCopyPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_21"></a><h3 class="tight">SecCertificateCopyPreference</h3><p class="spaceabove">Retrieves the preferred certificate for the specified name and key use.</p><p class="spaceabove"><pre>
OSStatus SecCertificateCopyPreference(
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> name,
   <!--a-->CSSM_KEYUSE<!--/a--> keyUsage,
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> *certificate
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>name</em></dt><dd><p>A string containing an email address (RFC822) or other name for which a preferred certificate is requested.</p></dd><dt><em>keyUsage</em></dt><dd><p>A key use value, as defined in <code>Security.framework/cssmtype.h</code>. Pass <code>0</code> to ignore this parameter.</p></dd><dt><em>certificate</em></dt><dd><p>On return, a reference to the preferred certificate, or <code>NULL</code> if none was found. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>This function is typically used to obtain the preferred encryption certificate for an email recipient.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecCertificateSetPreference">SecCertificateSetPreference</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateCopyPublicKey" title="SecCertificateCopyPublicKey"></a><a name="//apple_ref/doc/c_ref/SecCertificateCopyPublicKey" title="SecCertificateCopyPublicKey"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_3" title="SecCertificateCopyPublicKey"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_22"></a><h3 class="tight">SecCertificateCopyPublicKey</h3><p class="spaceabove">Retrieves the public key from a certificate.</p><p class="spaceabove"><pre>
OSStatus SecCertificateCopyPublicKey(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> *key
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certificate</em></dt><dd><p>The certificate object from which to retrieve the public key.</p></dd><dt><em>key</em></dt><dd><p>On return, points to the public key for the specified certificate. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateCreateFromData" title="SecCertificateCreateFromData"></a><a name="//apple_ref/doc/c_ref/SecCertificateCreateFromData" title="SecCertificateCreateFromData"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBDCFCE" title="SecCertificateCreateFromData"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_24"></a><h3 class="tight">SecCertificateCreateFromData</h3>
<p class="spaceabove">Creates a certificate object based on the specified data, type, and encoding.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateCreateFromData (
   const <!--a-->CSSM_DATA<!--/a--> *data,
   <!--a-->CSSM_CERT_TYPE<!--/a--> type,
   <!--a-->CSSM_CERT_ENCODING<!--/a--> encoding,
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> *certificate
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>data</em></dt>
<dd><p>A pointer to the certificate data. The data must be an X509 certificate in binary format.</p></dd>
<dt><em>type</em></dt>
<dd><p>The certificate type as defined in <code>Security.framework/cssmtype.h</code>. Permissible values are <code>CSSM_CERT_X_509v1</code>, <code>CSSM_CERT_X_509v2</code>, and <code>CSSM_CERT_X_509v3</code>. If you are unsure of the certificate type, use <code>CSSM_CERT_X_509v3</code>. </p></dd>
<dt><em>encoding</em></dt>
<dd><p>The certificate encoding as defined in <code>Security.framework/cssmtype.h</code>. Permissible values are <code>CSSM_CERT_ENCODING_BER</code> and <code>CSSM_CERT_ENCODING_DER</code>. If you are unsure of the encoding, use <code>CSSM_CERT_ENCODING_BER</code>.</p></dd>
<dt><em>certificate</em></dt>
<dd><p>On return, points to the newly created certificate object. Call the <code>CFRelease</code> function to release this object when you are finished with it. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The certificate object returned by this function is used as input to several other functions in the API.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetAlgorithmID" title="SecCertificateGetAlgorithmID"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetAlgorithmID" title="SecCertificateGetAlgorithmID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_4" title="SecCertificateGetAlgorithmID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_26"></a><h3 class="tight">SecCertificateGetAlgorithmID</h3><p class="spaceabove">Retrieves the algorithm identifier for a certificate.</p><p class="spaceabove"><pre>
OSStatus SecCertificateGetAlgorithmID(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   const <!--a-->CSSM_X509_ALGORITHM_IDENTIFIER<!--/a--> **algid
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certificate</em></dt><dd><p>The certificate object from which to retrieve the algorithm identifier.</p></dd><dt><em>algid</em></dt><dd><p>On return, points to a struct that identifies the algorithm for this certificate. This pointer remains valid until the certificate reference is released. Do not attempt to free this pointer.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>The <code>CSSM_X509_ALGORITHM_IDENTIFIER</code> struct is defined in <code>Security.framework/x509defs.h</code> and discussed in <em>Common Security: CDSA and CSSM, version 2 (with corrigenda)</em> from <span class="content_text"><a href="http://www.opengroup.org/security/cdsa.htm" target="_blank">The Open Group (http://www.opengroup.org/security/cdsa.htm)</a></span>. Possible algorithms are enumerated in <code>Security.framework/oidsalg.h</code>. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetCLHandle" title="SecCertificateGetCLHandle"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetCLHandle" title="SecCertificateGetCLHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW18" title="SecCertificateGetCLHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_27"></a><h3 class="tight">SecCertificateGetCLHandle</h3>
<p class="spaceabove">Retrieves the certificate library handle from a certificate object.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateGetCLHandle (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <!--a-->CSSM_CL_HANDLE<!--/a--> *clHandle
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificate</em></dt>
<dd><p>The certificate object from which to obtain the certificate library handle.</p></dd>
<dt><em>clHandle</em></dt>
<dd><p>On return, points to the certificate library handle of the specified certificate. This handle remains valid until the certificate object is released.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The certificate library handle is the CSSM identifier of the certificate library module that is managing the certificate. The certificate library handle is used as an input to a number of CSSM functions.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetData" title="SecCertificateGetData"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetData" title="SecCertificateGetData"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW19" title="SecCertificateGetData"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_28"></a><h3 class="tight">SecCertificateGetData</h3>
<p class="spaceabove">Retrieves the data for a certificate.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateGetData (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <!--a-->CSSM_DATA_PTR<!--/a--> data
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificate</em></dt>
<dd><p>A certificate object for the certificate from which to retrieve the data.</p></dd>
<dt><em>data</em></dt>
<dd><p>On return, points to the data for the certificate specified. You must allocate the space for a <code>CSSM_DATA</code> structure before calling this function. This data pointer is only guaranteed to remain valid as long as the certificate remains unchanged and valid.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function requires a certificate object, which can, for example, be created with the <code><a href="reference.html#//apple_ref/c/func/SecCertificateCreateFromData">SecCertificateCreateFromData</a></code> function, obtained from an identity with the <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopyCertificate">SecIdentityCopyCertificate</a></code> function, or obtained over a network (see <em><a href="../../secureTransportRef/index.html#//apple_ref/doc/uid/TP30000155" target="_top">Secure Transport Reference</a></em>).</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/SSLSample/index.html#//apple_ref/doc/uid/DTS10001088" target="_top">SSLSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetIssuer" title="SecCertificateGetIssuer"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetIssuer" title="SecCertificateGetIssuer"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW20" title="SecCertificateGetIssuer"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_29"></a><h3 class="tight">SecCertificateGetIssuer</h3>
<p class="spaceabove">Unsupported.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateGetIssuer (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <!--a-->CSSM_X509_NAME<!--/a--> *issuer
);
</pre></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Unsupported.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetItem" title="SecCertificateGetItem"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetItem" title="SecCertificateGetItem"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW21" title="SecCertificateGetItem"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_30"></a><h3 class="tight">SecCertificateGetItem</h3>
<p class="spaceabove">Unsupported.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateGetItem (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecKeychainItemRef" target="_top">SecKeychainItemRef</a> *item
);
</pre></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Unsupported.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetSubject" title="SecCertificateGetSubject"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetSubject" title="SecCertificateGetSubject"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW22" title="SecCertificateGetSubject"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_31"></a><h3 class="tight">SecCertificateGetSubject</h3>
<p class="spaceabove">Unsupported.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateGetSubject (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <!--a-->CSSM_X509_NAME<!--/a--> *subject
);
</pre></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Unsupported.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetType" title="SecCertificateGetType"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetType" title="SecCertificateGetType"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW23" title="SecCertificateGetType"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_32"></a><h3 class="tight">SecCertificateGetType</h3>
<p class="spaceabove">Retrieves the type of a specified certificate.</p>
<p class="spaceabove"><pre>
OSStatus SecCertificateGetType (
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <!--a-->CSSM_CERT_TYPE<!--/a--> *certificateType
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificate</em></dt>
<dd><p>A certificate object for the certificate for which to obtain the type. </p></dd>
<dt><em>certificateType</em></dt>
<dd><p>On return, points to the type of the specified certificate. Certificate types are defined in<code> Security.framework/cssmtype.h</code>. You must allocate the space for a <code>CSSM_CERT_TYPE</code> structure before calling this function. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateGetTypeID" title="SecCertificateGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecCertificateGetTypeID" title="SecCertificateGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW9" title="SecCertificateGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_33"></a><h3 class="tight">SecCertificateGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecCertificate</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecCertificateGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecCertificateRef">SecCertificateRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecCertificateRef">SecCertificateRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCertificateSetPreference" title="SecCertificateSetPreference"></a><a name="//apple_ref/doc/c_ref/SecCertificateSetPreference" title="SecCertificateSetPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW37" title="SecCertificateSetPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_34"></a><h3 class="tight">SecCertificateSetPreference</h3><p class="spaceabove">Sets the preferred certificate for a specified name, key use, and date.</p><p class="spaceabove"><pre>
OSStatus SecCertificateSetPreference(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> name,
   <!--a-->CSSM_KEYUSE<!--/a--> keyUsage,
   <a href="../../../../CoreFoundation/Reference/CFDateRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDateRef" target="_top">CFDateRef</a> date
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certificate</em></dt><dd><p>The certificate object identifying the preferred certificate.</p></dd><dt><em>name</em></dt><dd><p>A string containing an email address (RFC822) or other name with which the preferred certificate is to be associated.</p></dd><dt><em>keyUsage</em></dt><dd><p>A key use value, as defined in <code>Security.framework/cssmtype.h</code>. Pass <code>0</code> if you don’t want to specify a particular key use.</p></dd><dt><em>date</em></dt><dd><p>The date after which this preference is no longer valid. If supplied, the preferred certificate is changed only if this date is later than the currently saved setting. Pass <code>NULL</code> if this preference should not be restricted by date.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>This function is typically used to set the preferred encryption certificate for an email recipient, either manually (when encrypting email to a recipient) or automatically upon receipt of encrypted email.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecCertificateCopyPreference">SecCertificateCopyPreference</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecCertificate.h</code><a name="//apple_ref/c/func/SecCopyErrorMessageString" title="SecCopyErrorMessageString"></a><a name="//apple_ref/doc/c_ref/SecCopyErrorMessageString" title="SecCopyErrorMessageString"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_11" title="SecCopyErrorMessageString"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_35"></a><h3 class="tight">SecCopyErrorMessageString</h3><p class="spaceabove">Returns a string describing an error.</p><p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> SecCopyErrorMessageString(
   <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> status,
   void *reserved
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>status</em></dt><dd><p>An error result code of type <code>OSStatus</code> or <code>CSSM_RETURN</code>, as returned by a security or CSSM function.</p></dd><dt><em>reserved</em></dt><dd><p>Reserved for future use. Pass <code>NULL</code> in this parameter.</p></dd></dl><h5 class="tight">Return Value</h5><p>A reference to an error string, or NULL if no error string is available for the specified result code. You must release this reference when you are finished with it by calling the <code>CFRelease</code> function.</p><h5 class="tight">Discussion</h5><p>The error strings returned by this function are taken from the <code>SecBase.h</code> header file and are therefore not localizable.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecBase.h</code><a name="//apple_ref/c/func/SecIdentityCopyCertificate" title="SecIdentityCopyCertificate"></a><a name="//apple_ref/doc/c_ref/SecIdentityCopyCertificate" title="SecIdentityCopyCertificate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIFGBCI" title="SecIdentityCopyCertificate"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_36"></a><h3 class="tight">SecIdentityCopyCertificate</h3>
<p class="spaceabove">Retrieves a certificate associated with an identity.</p>
<p class="spaceabove"><pre>
OSStatus SecIdentityCopyCertificate (
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> identityRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> *certificateRef
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>identityRef</em></dt>
<dd><p>The identity object for the identity whose certificate you wish to retrieve.</p></dd>
<dt><em>certificateRef</em></dt>
<dd><p>On return, points to the certificate object associated with the specified identity. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>An identity is a digital certificate together with its associated private key. </p>
<p>For a certificate in a keychain, you can cast the <code>SecCertificateRef</code> data type to a <code>SecKeychainItemRef</code> for use with Keychain Services functions.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentityCopyPreference" title="SecIdentityCopyPreference"></a><a name="//apple_ref/doc/c_ref/SecIdentityCopyPreference" title="SecIdentityCopyPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW39" title="SecIdentityCopyPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_37"></a><h3 class="tight">SecIdentityCopyPreference</h3><p class="spaceabove">Returns the preferred identity for the specified name and key use.</p><p class="spaceabove"><pre>
OSStatus SecIdentityCopyPreference(
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> name,
   <!--a-->CSSM_KEYUSE<!--/a--> keyUsage,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> validIssuers,
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> *identity
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>name</em></dt><dd><p>A string containing a URI, RFC822 email address, DNS hostname, or other name that uniquely identifies the service requiring an identity.</p></dd><dt><em>keyUsage</em></dt><dd><p>A key use value, as defined in <code>Security.framework/cssmtype.h</code>. Pass <code>0</code> if you don’t want to specify a particular key use.</p></dd><dt><em>validIssuers</em></dt><dd><p>An array of <code>CFDataRef</code> instances whose contents are the subject names of allowable issuers, as returned by a call to <code><!--a-->SSLCopyDistinguishedNames<!--/a--></code> (<code>Security.framework/SecureTransport.h</code>). Pass <code>NULL</code> if you don’t want to limit the search to specific issuers.</p></dd><dt><em>identity</em></dt><dd><p>On return, a reference to the preferred identity, or <code>NULL</code> if none was found. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>If a preferred identity has not been set for the specified name, the returned identity reference is <code>NULL</code>. You should then typically perform a search for possible identities, using <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCreate">SecIdentitySearchCreate</a></code> and <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCopyNext">SecIdentitySearchCopyNext</a></code> , allowing the user to choose from a list if more than one is found.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecIdentitySetPreference">SecIdentitySetPreference</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentityCopyPrivateKey" title="SecIdentityCopyPrivateKey"></a><a name="//apple_ref/doc/c_ref/SecIdentityCopyPrivateKey" title="SecIdentityCopyPrivateKey"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW24" title="SecIdentityCopyPrivateKey"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_38"></a><h3 class="tight">SecIdentityCopyPrivateKey</h3>
<p class="spaceabove">Retrieves the private key associated with an identity.</p>
<p class="spaceabove"><pre>
OSStatus SecIdentityCopyPrivateKey (
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> identityRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> *privateKeyRef
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>identityRef</em></dt>
<dd><p>The identity object for the identity whose private key you wish to retrieve. </p></dd>
<dt><em>privateKeyRef</em></dt>
<dd><p>On return, points to the private key object for the specified identity. The private key must be of class type <code>kSecAppleKeyItemClass</code>.  </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>An identity is a digital certificate together with its associated private key. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentityCopySystemIdentity" title="SecIdentityCopySystemIdentity"></a><a name="//apple_ref/doc/c_ref/SecIdentityCopySystemIdentity" title="SecIdentityCopySystemIdentity"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW41" title="SecIdentityCopySystemIdentity"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_39"></a><h3 class="tight">SecIdentityCopySystemIdentity</h3><p class="spaceabove">Obtains the system-wide identity associated with a specified domain. </p><p class="spaceabove"><pre>
OSStatus SecIdentityCopySystemIdentity(
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> domain,
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> *idRef,
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> *actualDomain
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>domain</em></dt><dd><p>The domain for which you want to find an identity, typically in reverse DNS notation, such as <code>com.apple.security</code>. You may also pass the values defined in <span class="content_text"><a href="reference.html#//apple_ref/doc/constant_group/System_Identity_Domains">“System Identity Domains.”</a></span></p></dd><dt><em>idRef</em></dt><dd><p>On return, the identity object of the system-wide identity associated with the specified domain. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd><dt><em>actualDomain</em></dt><dd><p>On return, the actual domain name of the returned identity object is returned here. This may be different from the requested domain. Pass <code>NULL</code> if you do not want this information. </p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>If no system-wide identity exists for the specified domain, a domain-specific alternate may be returned instead, typically (but not exclusively) the system-wide default identity (<code>kSecIdentityDomainDefault</code>).</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecIdentitySetSystemIdentity">SecIdentitySetSystemIdentity</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentityCreateWithCertificate" title="SecIdentityCreateWithCertificate"></a><a name="//apple_ref/doc/c_ref/SecIdentityCreateWithCertificate" title="SecIdentityCreateWithCertificate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_5" title="SecIdentityCreateWithCertificate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_40"></a><h3 class="tight">SecIdentityCreateWithCertificate</h3><p class="spaceabove">Creates a new identity for a certificate and its associated private key. </p><p class="spaceabove"><pre>
OSStatus SecIdentityCreateWithCertificate(
   <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> keychainOrArray,
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificateRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> *identityRef
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>keychainOrArray</em></dt><dd><p>A reference to a keychain or an array of keychains to search for the associated private key. Specify <code>NULL</code> to search the user's default keychain search list.</p></dd><dt><em>certificateRef</em></dt><dd><p>The certificate for which you want to create an identity.</p></dd><dt><em>identityRef</em></dt><dd><p>On return, an identity object for the certificate and its associated private key. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentityGetTypeID" title="SecIdentityGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecIdentityGetTypeID" title="SecIdentityGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW10" title="SecIdentityGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_41"></a><h3 class="tight">SecIdentityGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecIdentity</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecIdentityGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecIdentityRef">SecIdentityRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecIdentityRef">SecIdentityRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/SSLSample/index.html#//apple_ref/doc/uid/DTS10001088" target="_top">SSLSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentitySearchCopyNext" title="SecIdentitySearchCopyNext"></a><a name="//apple_ref/doc/c_ref/SecIdentitySearchCopyNext" title="SecIdentitySearchCopyNext"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBCBAEF" title="SecIdentitySearchCopyNext"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_42"></a><h3 class="tight">SecIdentitySearchCopyNext</h3>
<p class="spaceabove">Finds the next identity matching specified search criteria</p>
<p class="spaceabove"><pre>
OSStatus SecIdentitySearchCopyNext (
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentitySearchRef">SecIdentitySearchRef</a> searchRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> *identity
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>searchRef</em></dt>
<dd><p>An identity search object specifying the search criteria for this search. You create the identity search object by calling the <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCreate">SecIdentitySearchCreate</a></code> function.</p></dd>
<dt><em>identity</em></dt>
<dd><p>On return, points to the identity object of the next matching identity (if any). Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when finished with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. When there are no more identities that match the parameters specified to <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCreate">SecIdentitySearchCreate</a></code>, <code>errSecItemNotFound</code> is returned. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/SSLSample/index.html#//apple_ref/doc/uid/DTS10001088" target="_top">SSLSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>SecIdentitySearch.h</code><a name="//apple_ref/c/func/SecIdentitySearchCreate" title="SecIdentitySearchCreate"></a><a name="//apple_ref/doc/c_ref/SecIdentitySearchCreate" title="SecIdentitySearchCreate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBDCAAG" title="SecIdentitySearchCreate"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_43"></a><h3 class="tight">SecIdentitySearchCreate</h3>
<p class="spaceabove">Creates a search object for finding identities.</p>
<p class="spaceabove"><pre>
OSStatus SecIdentitySearchCreate (
   <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> keychainOrArray,
   <!--a-->CSSM_KEYUSE<!--/a--> keyUsage,
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentitySearchRef">SecIdentitySearchRef</a> *searchRef
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>keychainOrArray</em></dt>
<dd><p>A keychain object for a single keychain to search, an array of keychain objects for a set of keychains to search, or <code>NULL</code> to search the user’s default keychain search list.</p></dd>
<dt><em>keyUsage</em></dt>
<dd><p>ACSSM key use value as defined in <code>Security.framework/cssmtype.h</code>. (Note that, because key recovery is not implemented, the <code>SIGN_RECOVER</code> and <code>VERIFY_RECOVER</code> constants are not supported.) Use this parameter to filter the search by specifying the key use for the identity. Pass <code>0</code> if you want all identities returned by this search. Pass <code>CSSM_KEYUSE_ANY</code> to limit the identities returned to those that can be used for every operation.</p></dd>
<dt><em>searchRef</em></dt>
<dd><p>On return, points to the identity search object. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release this object when you are done with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>You can OR <code>CSSM_KEYUSE</code> values together to set more than one value for key use. Use the returned search object in calls to the <code><a href="reference.html#//apple_ref/c/func/SecIdentitySearchCopyNext">SecIdentitySearchCopyNext</a></code> function to obtain identities that match the search criteria. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/SSLSample/index.html#//apple_ref/doc/uid/DTS10001088" target="_top">SSLSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>SecIdentitySearch.h</code><a name="//apple_ref/c/func/SecIdentitySearchGetTypeID" title="SecIdentitySearchGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecIdentitySearchGetTypeID" title="SecIdentitySearchGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW11" title="SecIdentitySearchGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_44"></a><h3 class="tight">SecIdentitySearchGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecIdentitySearch</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecIdentitySearchGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecIdentitySearchRef">SecIdentitySearchRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecIdentitySearchRef">SecIdentitySearchRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecIdentitySearch.h</code><a name="//apple_ref/c/func/SecIdentitySetPreference" title="SecIdentitySetPreference"></a><a name="//apple_ref/doc/c_ref/SecIdentitySetPreference" title="SecIdentitySetPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW38" title="SecIdentitySetPreference"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_45"></a><h3 class="tight">SecIdentitySetPreference</h3><p class="spaceabove">Sets the preferred identity for the specified name and key use.</p><p class="spaceabove"><pre>
OSStatus SecIdentitySetPreference(
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> identity,
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> name,
   <!--a-->CSSM_KEYUSE<!--/a--> keyUsage
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>identity</em></dt><dd><p>A reference to the preferred identity.</p></dd><dt><em>name</em></dt><dd><p>A string containing a URI, RFC822 email address, DNS host name, or other name that uniquely identifies a service requiring this identity.</p></dd><dt><em>keyUsage</em></dt><dd><p>A key use value, as defined in <code>Security.framework/cssmtype.h</code>. Pass <code>0</code> if you don’t want to specify a particular key use.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopyPreference">SecIdentityCopyPreference</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecIdentitySetSystemIdentity" title="SecIdentitySetSystemIdentity"></a><a name="//apple_ref/doc/c_ref/SecIdentitySetSystemIdentity" title="SecIdentitySetSystemIdentity"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW40" title="SecIdentitySetSystemIdentity"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_46"></a><h3 class="tight">SecIdentitySetSystemIdentity</h3><p class="spaceabove">Assigns the system-wide identity to be associated with a specified domain.</p><p class="spaceabove"><pre>
OSStatus SecIdentitySetSystemIdentity(
   <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> domain,
   <a href="reference.html#//apple_ref/doc/c_ref/SecIdentityRef">SecIdentityRef</a> idRef
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>domain</em></dt><dd><p>The domain to which the specified identity will be assigned, typically in reverse DNS notation, such as <code>com.apple.security</code>.  You may also pass the values defined in <span class="content_text"><a href="reference.html#//apple_ref/doc/constant_group/System_Identity_Domains">“System Identity Domains.”</a></span></p></dd><dt><em>idRef</em></dt><dd><p>The identity to be assigned to the specified domain. Pass <code>NULL</code> to delete any currently-assigned identity for the specified domain; in this case, it is not an error if no identity exists for the specified domain.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>The caller must be running as root.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopySystemIdentity">SecIdentityCopySystemIdentity</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecIdentity.h</code><a name="//apple_ref/c/func/SecKeyCreatePair" title="SecKeyCreatePair"></a><a name="//apple_ref/doc/c_ref/SecKeyCreatePair" title="SecKeyCreatePair"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW25" title="SecKeyCreatePair"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_47"></a><h3 class="tight">SecKeyCreatePair</h3>
<p class="spaceabove">Creates an asymmetric key pair and stores it in a keychain.</p>
<p class="spaceabove"><pre>
OSStatus SecKeyCreatePair (
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecKeychainRef" target="_top">SecKeychainRef</a> keychainRef,
   <!--a-->CSSM_ALGORITHMS<!--/a--> algorithm,
   <!--a-->uint32<!--/a--> keySizeInBits,
   <!--a-->CSSM_CC_HANDLE<!--/a--> contextHandle,
   <!--a-->CSSM_KEYUSE<!--/a--> publicKeyUsage,
   <!--a-->uint32<!--/a--> publicKeyAttr,
   <!--a-->CSSM_KEYUSE<!--/a--> privateKeyUsage,
   <!--a-->uint32<!--/a--> privateKeyAttr,
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecAccessRef" target="_top">SecAccessRef</a> initialAccess,
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> *publicKey,
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> *privateKey
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>keychainRef</em></dt>
<dd><p>The keychain object for the keychain in which to store the private and public key items. Specify <code>NULL</code> for the default keychain.</p></dd>
<dt><em>algorithm</em></dt>
<dd><p>The algorithm to use to generate the key pair. Possible values are defined in <code>Security.framework/cssmtype.h</code>. Algorithms supported by the AppleCSP module are listed in <em>Security Release Notes</em>. This parameter is ignored if the <code>contextHandle</code> parameter is not <code>0</code>.</p></dd>
<dt><em>keySizeInBits</em></dt>
<dd><p>A key size for the key pair. See <em>Security Release Notes</em> for permissible key sizes for each algorithm supported by the AppleCSP module.</p></dd>
<dt><em>contextHandle</em></dt>
<dd><p>A CSSM CSP handle, or <code>0</code>. If this argument is not <code>0</code>, the <code>algorithm</code> and <code>keySizeInBits</code> parameters are ignored.</p></dd>
<dt><em>publicKeyUsage</em></dt>
<dd><p>A bit mask indicating all permitted uses for the new public key. The possible values for the <code>CSSM_KEYUSE</code> data type are defined in <code>Security.framework/cssmtype.h</code>.</p></dd>
<dt><em>publicKeyAttr</em></dt>
<dd><p>A bit mask defining attribute values for the new public key. The bit mask values are equivalent to those defined for <code>CSSM_KEYATTR_FLAGS</code> in <code>Security.framework/cssmtype.h</code>.</p></dd>
<dt><em>privateKeyUsage</em></dt>
<dd><p>A bit mask indicating all permitted uses for the new private key. The possible values for the <code>CSSM_KEYUSE</code> data type are defined in <code>Security.framework/cssmtype.h</code>.</p></dd>
<dt><em>privateKeyAttr</em></dt>
<dd><p>A bit mask defining attribute values for the new private key. The bit mask values are defined in <code>CSSM_KEYATTR_FLAGS</code> in <code>Security.framework/cssmtype.h</code>. Supported values are <code>CSSM_KETATTR_EXTRACTABLE</code> (the key can be taken out of the keychain) and <code>CSSM_KEYATTR_SENSITIVE</code> (an extractable key can be taken out of the keychain only in wrapped form—that is, encrypted). (Note that you must set <em>both</em> of these bits if you want the key to be extractable in wrapped form.) For any other value of this attribute, the key cannot be taken out of the keychain under any circumstances.</p></dd>
<dt><em>initialAccess</em></dt>
<dd><p>An access object that sets the initial access control list for each of the keys returned. See <span class="content_text"><!--a target="_top" -->“Creating an Access Object”<!--/a--></span> in <em><a href="../../keychainservices/index.html#//apple_ref/doc/uid/TP30000898" target="_top">Keychain Services Reference</a></em> for functions that create an access object. For default access, specify <code>NULL</code>. The default is free access to the tool or application that calls this function, with attempted access to sensitive information by any other application causing a confirmation dialog to be displayed.</p></dd>
<dt><em>publicKey</em></dt>
<dd><p>On return, points to the keychain item object of the new public key. Use this object as input to the <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCSSMKey">SecKeyGetCSSMKey</a></code> function to obtain the <code>CSSM_KEY</code> structure containing the key. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd>
<dt><em>privateKey</em></dt>
<dd><p>On return, points to the keychain item object of the new private key. Use this object as input to the <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCSSMKey">SecKeyGetCSSMKey</a></code> function to obtain the <code>CSSM_KEY</code> structure containing the key. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function uses default values for any attributes required by specific key-generation algorithms. Algorithms supported by the AppleCSP module are listed in <em>Security Release Notes</em>. For details about algorithms and default values for key-generation parameters, download the CDSA security framework from the ADC website at <span class="content_text"><a href="http://developer.apple.com/darwin/projects/security/" target="_top">http://developer.apple.com/darwin/projects/security/</a></span> and read the file <code>Supported_CSP_Algorithms.doc</code> in the Documentation folder.</p>
<p>If you need extra parameters to generate a key—as required by some algortihms—call <code><a href="../../keychainservices/Reference/reference.html#//apple_ref/c/func/SecKeychainGetCSPHandle" target="_top">SecKeychainGetCSPHandle</a></code> to obtain a CSSM CSP handle and then call <code>CSSM_CSP_CreateKeyGenContext</code> to create a context. With this context, use <code>CSSM_UpdateContextAttributes</code> to add additional parameters. Finally, call <code>CSSM_DeleteContext</code> to dispose of the context after calling this function.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecKeyGenerate">SecKeyGenerate</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecKey.h</code><a name="//apple_ref/c/func/SecKeyGenerate" title="SecKeyGenerate"></a><a name="//apple_ref/doc/c_ref/SecKeyGenerate" title="SecKeyGenerate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW42" title="SecKeyGenerate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_50"></a><h3 class="tight">SecKeyGenerate</h3><p class="spaceabove">Creates a symmetric key and optionally stores it in a keychain.</p><p class="spaceabove"><pre>
OSStatus SecKeyGenerate(
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecKeychainRef" target="_top">SecKeychainRef</a> keychainRef,
   <!--a-->CSSM_ALGORITHMS<!--/a--> algorithm,
   <!--a-->uint32<!--/a--> keySizeInBits,
   <!--a-->CSSM_CC_HANDLE<!--/a--> contextHandle,
   <!--a-->CSSM_KEYUSE<!--/a--> keyUsage,
   <!--a-->uint32<!--/a--> keyAttr,
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecAccessRef" target="_top">SecAccessRef</a> initialAccess,
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a>* keyRef
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>keychainRef</em></dt><dd><p>The keychain in which to store the generated key. Specify <code>NULL</code> to generate a transient key.</p></dd><dt><em>algorithm</em></dt><dd><p>The algorithm to use in generating the symmetric key. Possible values are defined in <code>cssmtype.h</code>. Algorithms supported by the AppleCSP module are listed in <em>Security Release Notes</em>. This parameter is ignored if the <code>contextHandle</code> parameter is not <code>0</code>.</p></dd><dt><em>keySizeInBits</em></dt><dd><p>A key size for the key pair. This parameter is ignored if the <code>contextHandle</code> parameter is not <code>0</code>.</p></dd><dt><em>contextHandle</em></dt><dd><p>A CSSM CSP handle, or <code>0</code>. If this argument is not <code>0</code>, the <code>algorithm</code> and <code>keySizeInBits</code> parameters are ignored.</p></dd><dt><em>keyUsage</em></dt><dd><p>A bit mask indicating all permitted uses for the new key. The possible values for the <code>CSSM_KEYUSE</code> data type are defined in <code>cssmtype.h</code>.</p></dd><dt><em>keyAttr</em></dt><dd><p>A bit mask defining attribute values for the new key. The bit mask values are defined in <code>CSSM_KEYATTR_FLAGS</code> in <code>cssmtype.h</code>.</p></dd><dt><em>initialAccess</em></dt><dd><p>An access object that sets the initial access control list for the key returned. See <span class="content_text"><!--a target="_top" -->“Creating an Access Object”<!--/a--></span> in <em><a href="../../keychainservices/index.html#//apple_ref/doc/uid/TP30000898" target="_top">Keychain Services Reference</a></em> for functions that create an access object. This parameter is ignored if you specify <code>NULL</code> for the <code>keychainRef</code> parameter.</p></dd><dt><em>keyRef</em></dt><dd><p>On return, points to the keychain item object of the new public key. Use this object as input to the <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCSSMKey">SecKeyGetCSSMKey</a></code> function to obtain the <code>CSSM_KEY</code> structure containing the key. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>Key-generation algorithms supported by the AppleCSP module are listed in <em>Security Release Notes</em>. For details about algorithms and default values for key-generation parameters, download the CDSA security framework from the ADC website at <span class="content_text"><a href="http://developer.apple.com/darwin/projects/security/" target="_top">http://developer.apple.com/darwin/projects/security/</a></span> and read the file <code>Supported_CSP_Algorithms.doc</code> in the Documentation folder.</p><p>If you need extra parameters to generate a key—as required by some algortihms—call <code><a href="../../keychainservices/Reference/reference.html#//apple_ref/c/func/SecKeychainGetCSPHandle" target="_top">SecKeychainGetCSPHandle</a></code> to obtain a CSSM CSP handle and then call <code>CSSM_CSP_CreateKeyGenContext</code> to create a context. With this context, use <code>CSSM_UpdateContextAttributes</code> to add additional parameters. Finally, call <code>CSSM_DeleteContext</code> to dispose of the context after calling this function.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecKeyCreatePair">SecKeyCreatePair</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecKey.h</code><a name="//apple_ref/c/func/SecKeyGetCredentials" title="SecKeyGetCredentials"></a><a name="//apple_ref/doc/c_ref/SecKeyGetCredentials" title="SecKeyGetCredentials"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW43" title="SecKeyGetCredentials"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_53"></a><h3 class="tight">SecKeyGetCredentials</h3><p class="spaceabove">Returns an access credential for a key.</p><p class="spaceabove"><pre>
OSStatus SecKeyGetCredentials(
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> keyRef,
   <a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/CSSM_ACL_AUTHORIZATION_TAG" target="_top">CSSM_ACL_AUTHORIZATION_TAG</a> operation,
   <a href="reference.html#//apple_ref/doc/c_ref/SecCredentialType">SecCredentialType</a> credentialType,
   const <!--a-->CSSM_ACCESS_CREDENTIALS<!--/a--> **outCredentials
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>keyRef</em></dt><dd><p>The key for which you want an access credential.</p></dd><dt><em>operation</em></dt><dd><p>The type of operation to be performed with this key. Possible values are listed under “Authorization tag types” in <code>Security.framework/cssmtype.h</code>.</p></dd><dt><em>credentialType</em></dt><dd><p>The type of credential requested. See <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecCredentialType">“Key Credential Type Constants”</a></span> for possible values.</p></dd><dt><em>outCredentials</em></dt><dd><p>On return, points to an access credential for the specified key. This pointer remains valid until the key reference is released. Do not attempt to modify or free this data.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>An access credential is required as an input to a number of CSSM functions.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecKey.h</code><a name="//apple_ref/c/func/SecKeyGetCSPHandle" title="SecKeyGetCSPHandle"></a><a name="//apple_ref/doc/c_ref/SecKeyGetCSPHandle" title="SecKeyGetCSPHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_6" title="SecKeyGetCSPHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_54"></a><h3 class="tight">SecKeyGetCSPHandle</h3><p class="spaceabove">Returns the CSSM CSP handle for a key. </p><p class="spaceabove"><pre>
OSStatus SecKeyGetCSPHandle(
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> keyRef,
   <!--a-->CSSM_CSP_HANDLE<!--/a--> *cspHandle
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>keyRef</em></dt><dd><p>The key for which you want a CSSM CSP handle.</p></dd><dt><em>cspHandle</em></dt><dd><p>On return, points to the CSSM CSP handle for the specified key. This pointer remains valid until the key reference is released. Do not attempt to modify or free this data.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>A CSSM CSP handle is required as an input to a number of CSSM functions.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecKey.h</code><a name="//apple_ref/c/func/SecKeyGetCSSMKey" title="SecKeyGetCSSMKey"></a><a name="//apple_ref/doc/c_ref/SecKeyGetCSSMKey" title="SecKeyGetCSSMKey"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBHGCAE" title="SecKeyGetCSSMKey"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_55"></a><h3 class="tight">SecKeyGetCSSMKey</h3>
<p class="spaceabove">Retrieves a pointer to the <code>CSSM_KEY</code> structure containing the key stored in a keychain item.</p>
<p class="spaceabove"><pre>
OSStatus SecKeyGetCSSMKey (
   <a href="reference.html#//apple_ref/doc/c_ref/SecKeyRef">SecKeyRef</a> key,
   const <!--a-->CSSM_KEY<!--/a--> **cssmKey
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>key</em></dt>
<dd><p>A keychain key item object. </p></dd>
<dt><em>cssmKey</em></dt>
<dd><p>A pointer to a <code>CSSM_KEY</code> structure for the specified key. You should not modify or free this data, because it is owned by the system.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The <code>CSSM_KEY</code> structure is used to represent keys in CSSM and is used as an input value to several CSSM functions. The <code>CSSM_KEY</code> structure is valid until the keychain item object is released. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecKey.h</code><a name="//apple_ref/c/func/SecKeyGetTypeID" title="SecKeyGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecKeyGetTypeID" title="SecKeyGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW12" title="SecKeyGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_56"></a><h3 class="tight">SecKeyGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecKey</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecKeyGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecKeyRef">SecKeyRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecKeyRef">SecKeyRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecKey.h</code><a name="//apple_ref/c/func/SecPolicyGetOID" title="SecPolicyGetOID"></a><a name="//apple_ref/doc/c_ref/SecPolicyGetOID" title="SecPolicyGetOID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIJIHJF" title="SecPolicyGetOID"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_62"></a><h3 class="tight">SecPolicyGetOID</h3>
<p class="spaceabove">Retrieves a policy’s object identifier.</p>
<p class="spaceabove"><pre>
OSStatus SecPolicyGetOID (
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> policyRef,
   <!--a-->CSSM_OID<!--/a--> *oid
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>policyRef</em></dt>
<dd><p>The policy object for which to obtain the object identifier. You can obtain a policy object with the <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCopyNext">SecPolicySearchCopyNext</a></code> function.</p></dd>
<dt><em>oid</em></dt>
<dd><p>On return, points to the policy’s object identifier. This identifier is owned by the policy object and remains valid until that object is destroyed; do not release it separately.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The policy’s object identifier, in the form of a <code>CSSM_OID</code> structure, is used in the CSSM API together with the policy’s value. Use the <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetValue">SecPolicyGetValue</a></code> function to obtain the value that corresponds to this object identifier. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecPolicy.h</code><a name="//apple_ref/c/func/SecPolicyGetTPHandle" title="SecPolicyGetTPHandle"></a><a name="//apple_ref/doc/c_ref/SecPolicyGetTPHandle" title="SecPolicyGetTPHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW28" title="SecPolicyGetTPHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_63"></a><h3 class="tight">SecPolicyGetTPHandle</h3>
<p class="spaceabove">Retrieves the trust policy handle for a policy object.</p>
<p class="spaceabove"><pre>
OSStatus SecPolicyGetTPHandle (
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> policyRef,
   <!--a-->CSSM_TP_HANDLE<!--/a--> *tpHandle
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>policyRef</em></dt>
<dd><p>The policy object from which to obtain the trust policy handle.</p></dd>
<dt><em>tpHandle</em></dt>
<dd><p>On return, points to the policy object’s trust policy handle. The handle remains valid until the policy object is released.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The trust policy handle is the CSSM identifier of the trust policy module that is managing the certificate. The trust policy handle is uses as an input to a number of CSSM functions. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecPolicy.h</code><a name="//apple_ref/c/func/SecPolicyGetTypeID" title="SecPolicyGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecPolicyGetTypeID" title="SecPolicyGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW13" title="SecPolicyGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_64"></a><h3 class="tight">SecPolicyGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecPolicy</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecPolicyGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecPolicyRef">SecPolicyRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecPolicyRef">SecPolicyRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecPolicy.h</code><a name="//apple_ref/c/func/SecPolicyGetValue" title="SecPolicyGetValue"></a><a name="//apple_ref/doc/c_ref/SecPolicyGetValue" title="SecPolicyGetValue"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIDHDIC" title="SecPolicyGetValue"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_65"></a><h3 class="tight">SecPolicyGetValue</h3>
<p class="spaceabove">Retrieves a policy’s value.</p>
<p class="spaceabove"><pre>
OSStatus SecPolicyGetValue (
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> policyRef,
   <!--a-->CSSM_DATA<!--/a--> *value
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>policyRef</em></dt>
<dd><p>The policy object for which to retrieve the value.</p></dd>
<dt><em>value</em></dt>
<dd><p>On return, points to the policy’s value. This value is owned by the policy object and remains valid until that object is destroyed; do not release it separately.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>A policy’s value is defined and interpreted by the policy. If you are using CSSM, you can specify object-identifier–policy-value pairs as input to the <code>CSSM_TP_POLICYINFO</code> function. Use the <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetOID">SecPolicyGetOID</a></code> function to obtain the object identifier (OID) for a policy.</p>
<p>Depending on how the policy uses the value, the value can be specific to a transaction. Because some other process might be using this policy object, it is best not to assign a new value to the policy using the same policy object. Instead, obtain a new policy object before assigning a new value to the policy.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecPolicySetValue">SecPolicySetValue</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecPolicy.h</code><a name="//apple_ref/c/func/SecPolicySearchCopyNext" title="SecPolicySearchCopyNext"></a><a name="//apple_ref/doc/c_ref/SecPolicySearchCopyNext" title="SecPolicySearchCopyNext"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBIFIFH" title="SecPolicySearchCopyNext"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_66"></a><h3 class="tight">SecPolicySearchCopyNext</h3>
<p class="spaceabove">Retrieves a policy object for the next policy matching specified search criteria.</p>
<p class="spaceabove"><pre>
OSStatus SecPolicySearchCopyNext (
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicySearchRef">SecPolicySearchRef</a> searchRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> *policyRef
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>searchRef</em></dt>
<dd><p>A policy search object specifying the search criteria for this search. You create the policy search object by calling the <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCreate">SecPolicySearchCreate</a></code> function. </p></dd>
<dt><em>policyRef</em></dt>
<dd><p>On return, points to the policy object for the next policy (if any) matching the specified search criteria. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. When there are no more policies that match the parameters specified to <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCreate">SecPolicySearchCreate</a></code>, <code>errSecPolicyNotFound</code> is returned. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecPolicySearch.h</code><a name="//apple_ref/c/func/SecPolicySearchCreate" title="SecPolicySearchCreate"></a><a name="//apple_ref/doc/c_ref/SecPolicySearchCreate" title="SecPolicySearchCreate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBBJGBA" title="SecPolicySearchCreate"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_67"></a><h3 class="tight">SecPolicySearchCreate</h3>
<p class="spaceabove">Creates a search object for finding policies.</p>
<p class="spaceabove"><pre>
OSStatus SecPolicySearchCreate (
   <!--a-->CSSM_CERT_TYPE<!--/a--> certType,
   const <!--a-->CSSM_OID<!--/a--> *policyOID,
   const <!--a-->CSSM_DATA<!--/a--> *value,
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicySearchRef">SecPolicySearchRef</a> *searchRef
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certType</em></dt>
<dd><p>The type of certificates a policy uses, as defined in <code>Security.framework/cssmtype.h</code>. Permissible values are <code>CSSM_CERT_X_509v1</code>, <code>CSSM_CERT_X_509v2</code>, and <code>CSSM_CERT_X_509v3</code>. If you are unsure of the certificate type, use <code>CSSM_CERT_X_509v3</code>.</p></dd>
<dt><em>policyOID</em></dt>
<dd><p>A pointer to a BER-encoded policy object identifier that uniquely specifies the policy. See <span class="content_text"><a href="../certKeyTrustPolicies/certKeyTrustPolicies.html#//apple_ref/doc/uid/TP30000157-CH204-CIHIJIII">“AppleX509TP Trust Policies”</a></span> for a list of policies and object identifiers provided by the AppleX509TP module.</p></dd>
<dt><em>value</em></dt>
<dd><p>A pointer to an optional, policy-defined value. The contents of this value depend on the policy object identifier specified. (Note that this parameter refers to the value stored in MDS and is not related to the <code>value</code> parameter of the <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetValue">SecPolicyGetValue</a></code> function.) Currently the function does not use this parameter; pass <code>NULL</code> for this pointer. </p></dd>
<dt><em>searchRef</em></dt>
<dd><p>On return, points to the newly created policy search object. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>You use the search object created by this function in subsequent calls to the <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCopyNext">SecPolicySearchCopyNext</a></code> function to obtain trust policy objects. Policies are stored in the Module Directory Services (MDS) database. MDS is described in detail in “Part 8: Module Directory Service (MDS)” of <em>Common Security: CDSA and CSSM, version 2 (with corrigenda)</em> from The Open Group (<span class="content_text"><a href="http://www.opengroup.org/security/cdsa.htm" target="_blank">http://www.opengroup.org/security/cdsa.htm</a></span>).</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecPolicySearch.h</code><a name="//apple_ref/c/func/SecPolicySearchGetTypeID" title="SecPolicySearchGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecPolicySearchGetTypeID" title="SecPolicySearchGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW14" title="SecPolicySearchGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_68"></a><h3 class="tight">SecPolicySearchGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecPolicySearch</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecPolicySearchGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecPolicySearchRef">SecPolicySearchRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecPolicySearchRef">SecPolicySearchRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecPolicySearch.h</code><a name="//apple_ref/c/func/SecPolicySetValue" title="SecPolicySetValue"></a><a name="//apple_ref/doc/c_ref/SecPolicySetValue" title="SecPolicySetValue"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW44" title="SecPolicySetValue"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_69"></a><h3 class="tight">SecPolicySetValue</h3><p class="spaceabove">Sets a policy's value.</p><p class="spaceabove"><pre>
OSStatus SecPolicySetValue(
   <a href="reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> policyRef,
   const <!--a-->CSSM_DATA<!--/a--> *value
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>policyRef</em></dt><dd><p>The policy object whose value you wish to set.</p></dd><dt><em>value</em></dt><dd><p>The value to be set into the policy object, replacing any previous value.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>A policy’s value is defined and interpreted by the policy. If you are using CSSM, you can specify object-identifier–policy-value pairs as input to the <code>CSSM_TP_POLICYINFO</code> function. Use the <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetOID">SecPolicyGetOID</a></code> function to obtain the object identifier (OID) for a policy.</p><p>Depending on how the policy uses the value, the value can be specific to a transaction. Because some other process might be using this policy object, it is best not to assign a new value to the policy using the same policy object. Instead, obtain a new policy object before assigning a new value to the policy.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecPolicyGetValue">SecPolicyGetValue</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecPolicy.h</code><a name="//apple_ref/c/func/SecTrustCopyAnchorCertificates" title="SecTrustCopyAnchorCertificates"></a><a name="//apple_ref/doc/c_ref/SecTrustCopyAnchorCertificates" title="SecTrustCopyAnchorCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIHGCGI" title="SecTrustCopyAnchorCertificates"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_70"></a><h3 class="tight">SecTrustCopyAnchorCertificates</h3>
<p class="spaceabove">Retrieves the anchor (root) certificates stored by Mac OS X. </p>
<p class="spaceabove"><pre>
OSStatus SecTrustCopyAnchorCertificates (
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *anchors
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>anchors</em></dt>
<dd><p>On return, points to an array of certificate objects for trusted anchor (root) certificates, which is the default set of anchors for the caller. Call the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code> function to release the <code>CFArrayRef</code> object when you are finished with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function retrieves the certificates in the system’s store of anchor certificates (see <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code>). You can use the <code>SecCertificateRef</code> objects retrieved by this function as input to other functions of this API, such as <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code>. If you want references to the anchor certificates in a form appropriate for calls to the CSSM API, use the <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustGetCSSMAnchorCertificates">SecTrustGetCSSMAnchorCertificates</a></code> function instead.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustCopyCustomAnchorCertificates" title="SecTrustCopyCustomAnchorCertificates"></a><a name="//apple_ref/doc/c_ref/SecTrustCopyCustomAnchorCertificates" title="SecTrustCopyCustomAnchorCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW49" title="SecTrustCopyCustomAnchorCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_71"></a><h3 class="tight">SecTrustCopyCustomAnchorCertificates</h3><p class="spaceabove">Retrieves the custom anchor certificates, if any, used by a given trust.</p><p class="spaceabove"><pre>
OSStatus SecTrustCopyCustomAnchorCertificates(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *anchors
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>trust</em></dt><dd><p>The trust management object from which you wish to retrieve the custom anchor certificates.</p></dd><dt><em>anchors</em></dt><dd><p>On return, a reference to an array of <code>SecCertificateRef</code> objects representing the set of anchor certificates that are considered valid (trusted) anchors by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function when verifying a certificate using the trust management object in the <code>trust</code> parameter. Returns <code>NULL</code> if no custom anchors have been specified. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>You can use the <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code> function to set custom anchor certificates.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustCopyPolicies" title="SecTrustCopyPolicies"></a><a name="//apple_ref/doc/c_ref/SecTrustCopyPolicies" title="SecTrustCopyPolicies"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW50" title="SecTrustCopyPolicies"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_72"></a><h3 class="tight">SecTrustCopyPolicies</h3><p class="spaceabove">Retrieves the policies used by a given trust management object.</p><p class="spaceabove"><pre>
OSStatus SecTrustCopyPolicies(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *policies
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>trust</em></dt><dd><p>The trust management object whose policies you wish to retrieve.</p></dd><dt><em>policies</em></dt><dd><p>On return, an array of <code><a href="reference.html#//apple_ref/c/tdef/SecPolicyRef">SecPolicyRef</a></code> objects for the policies used by this trust management object. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSetPolicies">SecTrustSetPolicies</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustCreateWithCertificates" title="SecTrustCreateWithCertificates"></a><a name="//apple_ref/doc/c_ref/SecTrustCreateWithCertificates" title="SecTrustCreateWithCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBIFDFE" title="SecTrustCreateWithCertificates"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_74"></a><h3 class="tight">SecTrustCreateWithCertificates</h3>
<p class="spaceabove">Creates a trust management object based on certificates and policies.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustCreateWithCertificates (
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> certificates,
   <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> policies,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> *trustRef
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificates</em></dt>
<dd><p>The certificate to be verified, plus any other certificates you think might be useful for verifying the certificate. The certificate to be verified must be the first in the array. If you want to specify only one certificate, you can pass a <code>SecCertificateRef</code> object; otherwise, pass an array of <code>SecCertificateRef</code> objects.</p></dd>
<dt><em>policies</em></dt>
<dd><p>References to one or more policies to be evaluated. You can pass a single <code>SecPolicyRef</code> object, or an array of one or more <code>SecPolicyRef</code> objects. Use the <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCopyNext">SecPolicySearchCopyNext</a></code> function to obtain policy objects. If you pass in multiple policies, all policies must verify for the certificate chain to be considered valid.</p></dd>
<dt><em>trustRef</em></dt>
<dd><p>On return, points to the newly created trust management object. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The trust management object includes a reference to the certificate to be verified, plus pointers to the policies to be evaluated for those certificates. You can optionally include references to other certificates, including anchor certificates, that you think might be in the certificate chain needed to verify the first (leaf) certificate. Any input certificates that turn out to be irrelevant are harmlessly ignored. Call the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function to evaluate the trust for the returned trust management object. </p>
<p>If not all the certificates needed to verify the leaf certificate are included in the <code>certificates</code> parameter, <code>SecTrustEvaluate</code> searches for certificates in the keychain search list (see <code><a href="reference.html#//apple_ref/c/func/SecTrustSetKeychains">SecTrustSetKeychains</a></code>) and in the system’s store of anchor certificates (see <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code>). However, you should gain a significant performance benefit by passing in the entire certificate chain, in order, in the <code>certificates</code> parameter.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustEvaluate" title="SecTrustEvaluate"></a><a name="//apple_ref/doc/c_ref/SecTrustEvaluate" title="SecTrustEvaluate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBHFGHI" title="SecTrustEvaluate"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_75"></a><h3 class="tight">SecTrustEvaluate</h3>
<p class="spaceabove">Evaluates trust for the specified certificate and policies.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustEvaluate (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustResultType">SecTrustResultType</a> *result
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trust</em></dt>
<dd><p>The trust management object to evaluate. A trust management object includes the certificate to be verified plus the policy or policies to be used in evaluating trust. It can optionally also include other certificates to be used in verifying the first certificate. Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function to create a trust management object. </p></dd>
<dt><em>result</em></dt>
<dd><p>On return, points to a result type reflecting the result of this evaluation. See <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustResultType">“Trust Result Type Constants”</a></span> for descriptions of possible values.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function evaluates a certificate’s validity to establish trust for a particular use—for example, in creating a digital signature or to establish a Secure Sockets Layer connection. Before you call this function, you can optionally call any of the <code>SecTrustSet...</code> functions (such as <code><a href="reference.html#//apple_ref/c/func/SecTrustSetParameters">SecTrustSetParameters</a></code> or <code><a href="reference.html#//apple_ref/c/func/SecTrustSetVerifyDate">SecTrustSetVerifyDate</a></code>) to set values for parameters and options. </p>
<p>The <code>SecTrustEvaluate</code> function validates a certificate by verifying its signature plus the signatures of the certificates in its certificate chain, up to the anchor certificate, according to the policy or policies included in the trust management object. For each policy, the function evaluates trust according to the user-specified trust setting (see <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustSetUserTrust">SecTrustSetUserTrust</a></code> and <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustGetUserTrust">SecTrustGetUserTrust</a></code>). For an example of user-specified trust settings, use the Keychain Access utility and look at any certificate. </p>
<p>For each policy, <code>SecTrustEvaluate</code> starts with the leaf certificate and checks each certificate in the chain, in turn, for a valid user-specified trust setting. It uses the first such value it finds for the trust evaluation. For example, if the user-specified trust for the leaf certificate is not set, the first intermediate certificate is set to “Always Trust,” and one of the other intermediate certificates is set to “Never Trust,” <code>SecTrustEvaluate</code> trusts the certificate. Thus, you can use a user-specified trust setting for a certificate closer to the leaf to override a setting closer to the anchor.</p>
<p> If there is no user-specified trust setting for the entire certificate chain, the <code>SecTrustEvaluate</code> function returns <code>kSecTrustResultUnspecified</code> as the result type. In that case, you should call the <code>SFCertificateTrustPanel</code> class in the <em><a href="../../SecurityObjectiveC/index.html#//apple_ref/doc/uid/TP30000996" target="_top">Security Interface Framework Reference</a></em> to let the user specify a trust setting for the certificate. Alternately, you can use a default value. If you use a default value, you should provide a preference setting so that the user can change the default.</p>
<p>If <code>SecTrustEvaluate</code> returns <code>kSecTrustResultRecoverableTrustFailure</code> as the result type, you can call the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code> function for details of the problem. Then, as appropriate, you can call one or more of the <code>SecTrustSet...</code> functions to correct or bypass the problem, or you can inform the user of the problem and call the <code>SFCertificateTrustPanel</code> class to let the user change the trust setting for the certificate. When you think you have corrected the problem, call <code>SecTrustEvaluate</code> again. Each time you call <code>SecTrustEvaluate</code>, it discards the results of any previous evaluation and replaces them with the new results. If <code>SecTrustEvaluate</code> returns <code>kSecTrustResultFatalTrustFailure</code>, on the other hand, changing parameter values and calling <code>SecTrustEvaluate</code> again is unlikely to be successful.</p>
<p>If not all the certificates needed to verify the leaf certificate are included in the trust management object, then <code>SecTrustEvaluate</code> searches for certificates in the keychain search list (see <code><a href="reference.html#//apple_ref/c/func/SecTrustSetKeychains">SecTrustSetKeychains</a></code>) and in the system’s store of anchor certificates (see <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code>).</p>
<p>By default, <code>SecTrustEvaluate</code> uses the current date and time when verifying a certificate. However, you can call the <code><a href="reference.html#//apple_ref/c/func/SecTrustSetVerifyDate">SecTrustSetVerifyDate</a></code> function before calling <code>SecTrustEvaluate</code> to set an other date and time to use when verifying the certificate. </p>
<p>Before you call <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustEvaluate">SecTrustEvaluate</a></code>, you can optionally use the <code><a href="reference.html#//apple_ref/c/func/SecTrustSetParameters">SecTrustSetParameters</a></code> function to set one or more actions to modify the evaluation or to pass data required by an action.</p>
<p>The results of the trust evaluation are stored in the trust management object. Call the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code> function to get more information about the results of the trust evaluation, or the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetCssmResult">SecTrustGetCssmResult</a></code> function to get information about the evaluation in a form that can be passed to CSSM functions.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustGetCssmResult" title="SecTrustGetCssmResult"></a><a name="//apple_ref/doc/c_ref/SecTrustGetCssmResult" title="SecTrustGetCssmResult"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIEGHHI" title="SecTrustGetCssmResult"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_79"></a><h3 class="tight">SecTrustGetCssmResult</h3>
<p class="spaceabove">Retrieves the CSSM trust result.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustGetCssmResult (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <!--a-->CSSM_TP_VERIFY_CONTEXT_RESULT_PTR<!--/a--> *result
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trust</em></dt>
<dd><p>A trust management object that has previously been sent to the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function for evaluation. </p></dd>
<dt><em>result</em></dt>
<dd><p>On return, points to the CSSM trust result pointer. You should not modify or free this data, as it is owned by the system. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>After calling the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function, you can call the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code> function or the <code>SecTrustGetCssmResult</code> function to get information about the certificates in the certificate chain and everything that might be wrong with each certificate. Whereas the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code> function returns the information in a form that you can interpret without extensive knowledge of CSSM, the <code>SecTrustGetCssmResult</code> function returns information in a form that can be passed directly to CSSM functions. See <em>Common Security: CDSA and CSSM, version 2 (with corrigenda)</em> from The Open Group (<span class="content_text"><a href="http://www.opengroup.org/security/cdsa.htm" target="_blank">http://www.opengroup.org/security/cdsa.htm</a></span> for more information about the <code>CSSM_TP_VERIFY_CONTEXT_RESULT</code> structure pointed to by the <code>result</code> parameter.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustGetCssmResultCode" title="SecTrustGetCssmResultCode"></a><a name="//apple_ref/doc/c_ref/SecTrustGetCssmResultCode" title="SecTrustGetCssmResultCode"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_7" title="SecTrustGetCssmResultCode"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_80"></a><h3 class="tight">SecTrustGetCssmResultCode</h3><p class="spaceabove">Retrieves the CSSM result code from the most recent trust evaluation for a trust management object.</p><p class="spaceabove"><pre>
OSStatus SecTrustGetCssmResultCode(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> *resultCode
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>trust</em></dt><dd><p>The trust management object for which you wish to retrieve a result code.</p></dd><dt><em>resultCode</em></dt><dd><p>On return, the CSSM result code produced by the most recent call to the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function for the trust management object specified in the <code>trust</code> parameter.  The value of this parameter is undefined if <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustEvaluate">SecTrustEvaluate</a></code> has not been called.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span> Returns <code>errSecTrustNotAvailable</code> if the <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustEvaluate">SecTrustEvaluate</a></code> function has not been called for the specified trust.</p><h5 class="tight">Discussion</h5><p>Whereas the <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustEvaluate">SecTrustEvaluate</a></code> function returns one of the Security Framework result codes (see <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes”</a></span>), the <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustGetCssmResultCode">SecTrustGetCssmResultCode</a></code> function returns the CSSM result code as enumerated in <code>Security.framework/cssmerr.h</code>. Other functions that might be of interest are the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code> function, which returns detailed results for each certificate in the certificate chain, and the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetCssmResult">SecTrustGetCssmResult</a></code> function, which returns the results in a format that can be passed directly to CSSM functions. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustGetResult" title="SecTrustGetResult"></a><a name="//apple_ref/doc/c_ref/SecTrustGetResult" title="SecTrustGetResult"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIGFDCI" title="SecTrustGetResult"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_81"></a><h3 class="tight">SecTrustGetResult</h3>
<p class="spaceabove">Retrieves details on the outcome of a call to the function <code>SecTrustEvaluate</code>.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustGetResult (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trustRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustResultType">SecTrustResultType</a> *result,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *certChain,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_TP_APPLE_EVIDENCE_INFO">CSSM_TP_APPLE_EVIDENCE_INFO</a> **statusChain
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trustRef</em></dt>
<dd><p>A trust management object that has previously been sent to the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function for evaluation. </p></dd>
<dt><em>result</em></dt>
<dd><p>A pointer to the result type returned in the <code>result</code> parameter by the <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustEvaluate">SecTrustEvaluate</a></code> function.</p></dd>
<dt><em>certChain</em></dt>
<dd><p>On return, points to an array of certificates that constitute the certificate chain used to verify the input certificate. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd>
<dt><em>statusChain</em></dt>
<dd><p>On return, points to an array of <code>CSSM_TP_APPLE_EVIDENCE_INFO</code> structures, one for each certificate in the certificate chain. The first item in the array corresponds to the leaf certificate, and the last item corresponds to the anchor (assuming that verification of the chain did not fail before reaching the anchor certificate). Each structure describes the status of one certificate in the chain. This structure is defined in <code>cssmapple.h</code>. Do not attempt to free this pointer; it remains valid until the trust management object is released or until the next call to the function <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustEvaluate">SecTrustEvaluate</a></code> that uses this trust management object.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>After calling the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function, you can call the <code>SecTrustGetResult</code> function or the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetCssmResult">SecTrustGetCssmResult</a></code> function to get detailed information about the results of the evaluation. Whereas the <code>SecTrustGetResult</code> function returns the information in a form that you can interpret without extensive knowledge of CSSM, the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetCssmResult">SecTrustGetCssmResult</a></code> function returns information in a form that can be passed directly to CSSM functions.</p>
<p>You can call the <code>SFCertificateTrustPanel</code> class in the <em><a href="../../SecurityObjectiveC/index.html#//apple_ref/doc/uid/TP30000996" target="_top">Security Interface Framework Reference</a></em> to display these results to the user.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustGetTPHandle" title="SecTrustGetTPHandle"></a><a name="//apple_ref/doc/c_ref/SecTrustGetTPHandle" title="SecTrustGetTPHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW31" title="SecTrustGetTPHandle"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_82"></a><h3 class="tight">SecTrustGetTPHandle</h3>
<p class="spaceabove">Retrieves the trust policy handle.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustGetTPHandle (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <!--a-->CSSM_TP_HANDLE<!--/a--> *handle
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trust</em></dt>
<dd><p>The trust management object from which to obtain the trust policy handle. A trust management object includes one or more certificates plus the policy or policies to be used in evaluating trust. Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function to create a trust management object.</p></dd>
<dt><em>handle</em></dt>
<dd><p>On return, points to a CSSM trust policy handle. This handle remains valid until the trust management object is released or until the next call to the function <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> that uses this trust management object. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The trust policy handle is the CSSM identifier of the trust policy module that is managing the certificate. The trust policy handle is used as an input to a number of CSSM functions. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustGetTypeID" title="SecTrustGetTypeID"></a><a name="//apple_ref/doc/c_ref/SecTrustGetTypeID" title="SecTrustGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW15" title="SecTrustGetTypeID"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_83"></a><h3 class="tight">SecTrustGetTypeID</h3>
<p class="spaceabove">Returns the unique identifier of the opaque type to which a <code>SecTrust</code> object belongs.</p>
<p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> SecTrustGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A value that identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecTrustRef">SecTrustRef</a></code> object.</p>
<h5 class="tight">Discussion</h5>
<p>This function returns a value that uniquely identifies the opaque type of a <code><a href="reference.html#//apple_ref/c/tdef/SecTrustRef">SecTrustRef</a></code> object. You can compare this value to the <code>CFTypeID</code> identifier obtained by calling the <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFGetTypeID" target="_top">CFGetTypeID</a></code> function on a specific object. These values might change from release to release or platform to platform.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustSetAnchorCertificates" title="SecTrustSetAnchorCertificates"></a><a name="//apple_ref/doc/c_ref/SecTrustSetAnchorCertificates" title="SecTrustSetAnchorCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCICBCHA" title="SecTrustSetAnchorCertificates"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_86"></a><h3 class="tight">SecTrustSetAnchorCertificates</h3>
<p class="spaceabove">Sets the anchor certificates used when evaluating a trust management object.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustSetAnchorCertificates (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> anchorCertificates
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trust</em></dt>
<dd><p>The trust management object containing the certificate you want to evaluate. A trust management object includes the certificate to be verified plus the policy or policies to be used in evaluating trust. It can optionally also include other certificates to be used in verifying the first certificate. Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function to create a trust management object. </p></dd>
<dt><em>anchorCertificates</em></dt>
<dd><p>A reference to an array of <code>SecCertificateRef</code> objects representing the set of anchor certificates that are to be considered valid (trusted) anchors by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function when verifying a certificate. Pass <code>NULL</code> to restore the default set of anchor certificates.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function looks for an anchor certificate in the array of certificates specified by the <code>SecTrustSetAnchorCertificates</code> function, or uses a default set provided by the system. In Mac OS X v10.3, for example, the default set of anchors is in the keychain file /System/Library/Keychains/X509Anchors. If you want to create a set of anchor certificates by modifying the default set, call the <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyAnchorCertificates">SecTrustCopyAnchorCertificates</a></code> function to obtain the current set of anchor certificates, modify that set as you wish, and create a new array of certificates. Then call <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code> with the modified array. </p><p>The list of custom anchor certificates is stored in the trust management object and can be retrieved with the <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyCustomAnchorCertificates">SecTrustCopyCustomAnchorCertificates</a></code> function.</p>
<p>Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustSetKeychains">SecTrustSetKeychains</a></code> function to set the keychains searched for intermediate certificates in the certificate chain.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_16" title="Important:"></a><p><strong>Important:</strong>&nbsp;Calling this function without also calling <code>SecTrustSetAnchorCertificatesOnly</code> disables the trusting of any anchors other than the ones specified by this function call.</p><p></p></div>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyCustomAnchorCertificates">SecTrustCopyCustomAnchorCertificates</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustSetKeychains" title="SecTrustSetKeychains"></a><a name="//apple_ref/doc/c_ref/SecTrustSetKeychains" title="SecTrustSetKeychains"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIHADCA" title="SecTrustSetKeychains"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_88"></a><h3 class="tight">SecTrustSetKeychains</h3>
<p class="spaceabove">Sets the keychains searched for intermediate certificates when evaluating a trust management object.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustSetKeychains (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> keychainOrArray
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trust</em></dt>
<dd><p>The trust management object containing the certificate you want to evaluate. A trust management object includes the certificate to be verified plus the policy or policies to be used in evaluating trust. It can optionally also include other certificates to be used in verifying the first certificate. Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function to create a trust management object.</p></dd>
<dt><em>keychainOrArray</em></dt>
<dd><p>A keychain object for a single keychain to search, an array of keychain objects for a set of keychains to search, or <code>NULL</code> to search the user’s default keychain search list. To prevent the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function from searching any keychains at all, pass a <code>CFArrayRef</code> array with no elements.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>By default, <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> uses the user’s keychain search list to look for intermediate certificates in the certificate chain. Use the <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustSetKeychains">SecTrustSetKeychains</a></code> function to change the set of keychains to be searched. If you want to modify the default set of keychains, first call the <code><a href="../../keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecKeychainCopySearchList" target="_top">SecKeychainCopySearchList</a></code> function (see <em><a href="../../keychainservices/index.html#//apple_ref/doc/uid/TP30000898" target="_top">Keychain Services Reference</a></em>) to obtain the current keychain search list, modify that set as you wish, and create a new search list. Then you can call <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustSetKeychains">SecTrustSetKeychains</a></code> with the modified list.</p>
<p>Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code> function to set the array of anchor certificates searched.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustSetParameters" title="SecTrustSetParameters"></a><a name="//apple_ref/doc/c_ref/SecTrustSetParameters" title="SecTrustSetParameters"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIHEJAB" title="SecTrustSetParameters"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_89"></a><h3 class="tight">SecTrustSetParameters</h3>
<p class="spaceabove">Sets the action and action data for a trust management object. </p>
<p class="spaceabove"><pre>
OSStatus SecTrustSetParameters (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trustRef,
   <!--a-->CSSM_TP_ACTION<!--/a--> action,
   <a href="../../../../CoreFoundation/Reference/CFDataRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDataRef" target="_top">CFDataRef</a> actionData
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trustRef</em></dt>
<dd><p>The trust management object to which you want to add an action or set action data. A trust management object includes one or more certificates plus the policy or policies to be used in evaluating trust. Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function to create a trust management object.</p></dd>
<dt><em>action</em></dt>
<dd><p>A CSSM trust action. Pass <code>CSSM_TP_ACTION_DEFAULT</code> for the default action. Other actions available, if any, are described in the documentation for the trust policy module. For the AppleX509TP module, see the <em>Security Release Notes</em>.</p></dd>
<dt><em>actionData</em></dt>
<dd><p>A reference to action data. <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/CSSM_APPLE_TP_ACTION_FLAGS">“Action Data Flags”</a></span> lists possible values for this parameter for the AppleX509TP trust policy module’s default action. For other actions (if any), the possible values for the action data are specified in the <em>Security Release Notes</em>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>Before you call <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code>, you can optionally use this function to set one or more action flags or to set action data. Actions, where available, affect the trust evaluation for all policies being evaluated. For example, if you set the action data for the default action to <code>CSSM_TP_ACTION_ALLOW_EXPIRED</code>, then the <code>SecTrustEvaluate</code> function ignores the certificate’s expiration date and time. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustSetPolicies" title="SecTrustSetPolicies"></a><a name="//apple_ref/doc/c_ref/SecTrustSetPolicies" title="SecTrustSetPolicies"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW51" title="SecTrustSetPolicies"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_90"></a><h3 class="tight">SecTrustSetPolicies</h3><p class="spaceabove">Set the policies to use in an evaluation.</p><p class="spaceabove"><pre>
OSStatus SecTrustSetPolicies(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> policies
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>trust</em></dt><dd><p>The trust management object whose policy list you wish to set.</p></dd><dt><em>policies</em></dt><dd><p>An array of one or more <code><a href="reference.html#//apple_ref/c/tdef/SecPolicyRef">SecPolicyRef</a></code> objects for the policies to be used by this trust management object. A single policy object of type <code>SecPolicyRef</code> may also be passed, representing an array of one policy. </p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>The policies you set with this function replace any already in the trust management object.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustCopyPolicies">SecTrustCopyPolicies</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustSettingsCopyCertificates" title="SecTrustSettingsCopyCertificates"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsCopyCertificates" title="SecTrustSettingsCopyCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW52" title="SecTrustSettingsCopyCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_91"></a><h3 class="tight">SecTrustSettingsCopyCertificates</h3><p class="spaceabove">Obtains an array of all certificates that have trust settings in a specific trust settings domain. </p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsCopyCertificates(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *certArray
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>domain</em></dt><dd><p>The trust settings domain for which you want a list of certificates. For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd><dt><em>certArray</em></dt><dd><p>On return, an array of <code>SecCertificateRef</code> objects representing the certificates that have trust settings in the specified domain. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span> Returns <code>errSecNoTrustSettings</code> if no trust settings exist for the specified domain.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSettingsCopyModificationDate" title="SecTrustSettingsCopyModificationDate"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsCopyModificationDate" title="SecTrustSettingsCopyModificationDate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_9" title="SecTrustSettingsCopyModificationDate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_92"></a><h3 class="tight">SecTrustSettingsCopyModificationDate</h3><p class="spaceabove">Obtains the date and time at which a certificate’s trust settings were last modified.</p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsCopyModificationDate(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain,
   <a href="../../../../CoreFoundation/Reference/CFDateRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDateRef" target="_top">CFDateRef</a> *modificationDate
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certRef</em></dt><dd><p>The certificate for which you wish to obtain the modification time. Pass the value <code>kSecTrustSettingsDefaultRootCertSetting</code> to obtain the modification time for the default root certificate trust settings for the domain.</p></dd><dt><em>domain</em></dt><dd><p>The trust settings domain of the trust settings for which you wish to obtain the modification time.  For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd><dt><em>modificationDate</em></dt><dd><p>On return, the date and time at which the certificate’s trust settings were last modified. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span> Returns <code>errSecItemNotFound</code> if no trust settings exist for the specified certificate and domain.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSettingsCopyTrustSettings" title="SecTrustSettingsCopyTrustSettings"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsCopyTrustSettings" title="SecTrustSettingsCopyTrustSettings"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW46" title="SecTrustSettingsCopyTrustSettings"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_93"></a><h3 class="tight">SecTrustSettingsCopyTrustSettings</h3><p class="spaceabove">Obtains the trust settings for a certificate.</p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsCopyTrustSettings(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain,
   <a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/c_ref/CFArrayRef" target="_top">CFArrayRef</a> *trustSettings
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certRef</em></dt><dd><p>The certificate for which you want the trust settings. Pass the value <code>kSecTrustSettingsDefaultRootCertSetting</code> to obtain the default root certificate trust settings for the domain.</p></dd><dt><em>domain</em></dt><dd><p>The trust settings domain of the trust settings that you wish to obtain.  For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd><dt><em>trustSettings</em></dt><dd><p>On return, an array of <code>CFDictionary</code> objects specifying the trust settings for the certificate. For the contents of the dictionaries, see the discussion below. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span> Returns <code>errSecItemNotFound</code> if no trust settings exist for the specified certificate and domain.</p><h5 class="tight">Discussion</h5><p>Each certificate’s trust settings are expressed as a <code>CFArray</code> that includes any number (including zero) of dictionaries of type <code>CFDictionary</code>, each of which comprises one set of usage constraints. Each usage constraints dictionary contains zero or one of each of the following key-value pairs:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>kSecTrustSettingsPolicy</code></p></td><td ><p>A policy object (<code>SecPolicyRef</code>) specifying the certificate verification policy; for example: SSL, SMIME. Use the <code><a href="reference.html#//apple_ref/c/func/SecPolicySearchCopyNext" target="_self">SecPolicySearchCopyNext</a></code> function to obtain a policy object.</p></td></tr><tr><td  scope="row"><p><code>kSecTrustSettingsApplication</code></p></td><td ><p>A trusted application reference (<code>SecTrustedApplicationRef</code>) for the application checking the certificate’s trust settings. Use the <code><a href="../../keychainservices/Reference/reference.html#//apple_ref/c/func/SecTrustedApplicationCreateFromPath" target="_top">SecTrustedApplicationCreateFromPath</a></code> function to get this reference.</p></td></tr><tr><td  scope="row"><p><code>kSecTrustSettingsPolicyString</code></p></td><td ><p>A<code>CFString</code> containing policy-specific data. For the SMIME policy, this string contains an email address. For the SSL policy, it contains a host name.</p></td></tr><tr><td  scope="row"><p><code>kSecTrustSettingsKeyUsage</code></p></td><td ><p>A<code>CFNumber</code> containing an <code>SInt32</code> value specifying the operations for which the encryption key in this certificate can be used. For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsKeyUsage">“Trust Settings Key Use Constants.”</a></span></p></td></tr><tr><td  scope="row"><p><code>kSecTrustSettingsResult</code></p></td><td ><p>A <code>CFNumber</code> containing an <code>SInt32</code> value indicating the effective trust setting for this usage constraints dictionary.  A given usage constraints dictionary is included in the evaluation of trust for a certificate only if the specified policy, application, and key use match the use for which the certificate is being evaluated. If this is the case, then the value of the <code>kSecTrustSettingsResult</code> key is  ORed with the results from other dictionaries to determine the overall trust setting for the certificate. </p><p>If this key is not present, a default value of <code>kSecTrustSettingsResultTrustRoot</code> is assumed. Because only a root certificate can have this value, a usage constraints dictionary for a non-root certificate that is missing this key is not valid.</p><p>Possible values for this key are listed in <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsResult">“Trust Settings Result Constants.”</a></span></p></td></tr><tr><td  scope="row"><p><code>kSecTrustSettingsAllowedError</code></p></td><td ><p>A <code>CFNumber</code> containing an <code>SInt32</code> value indicating a <code>CSSM_RETURN</code> result code which, if encountered during certificate verification, is ignored for that certificate. These “allowed error” values are applied to the evaluation only if the usage constraints dictionary meets the criteria described with the <code>kSecTrustSettingsResult</code> key.  A usage constraint dictionary with no constraints but with an allowed error value causes that error to always be allowed when the certificate is being evaluated.</p></td></tr></table></div><p>The overall trust settings for a certificate are the sum of all the usage constraints dictionaries that match the use for which that certificate is being evaluated. Trust settings for a given use apply if <em>any</em> of the dictionaries in the certificate’s trust settings array satisfies the specified use. Thus, when a certificate has multiple usage constraints  dictionaries in its trust settings array, the overall trust settings for the certificate are:</p><p>((usage constraint dictionary 0 component 0) AND (usage constraint dictionary 0 component 1) AND (...)) OR  ((usage constraint dictionary 1 component 0) AND (usage constraint dictionary 1 component 1) AND (...)) OR (...) ...</p><p>If the value of the <code>kSecTrustSettingsResult</code> component is <em>not</em> <code>kSecTrustSettingsResultUnspecified</code> for a usage constraints dictionary that has no constraints, the default value <code>kSecTrustSettingsResultTrustRoot</code> is assumed. To  specify a value for the <code>kSecTrustSettingsAllowedError</code> component without explicitly trusting or distrusting the associated certificate, specify a value of <code>kSecTrustSettingsResultUnspecified</code>  for the <code>kSecTrustSettingsResult</code> component. 
An empty trust settings array (that is, the <code>trustSettings</code> parameter returns a valid but empty <code>CFArray</code>) means "always trust this certificate” with an overall trust setting for the certificate of <code>kSecTrustSettingsResultTrustRoot</code>. Note that an empty trust settings array is not the same as no trust settings (the <code>trustSettings</code> parameter returns <code>NULL</code>), which means "this certificate must be verified to a known trusted certificate". 
Note the distinction between the results <code>kSecTrustSettingsResultTrustRoot</code> and <code>kSecTrustSettingsResultTrustAsRoot</code>: The former can only be applied to root (self-signed) certificates; the latter can only be applied to non-root certificates. Therefore, an empty trust settings array for a non-root certificate is invalid, because the default value of  <code>kSecTrustSettingsResultTrustRoot</code> is not valid for a non-root certificate. 
When making changes to the per-user trust settings, the user is prompted with an alert panel asking for authentication (user name and password or other credentials normally used for login). Therefore, it is not possible to modify per-user trust settings when not  running in a GUI environment (that is, when the user is not logged in via the login window).   When making changes to the system-wide trust settings, the user is prompted with an alert panel asking for an administrator's name and  password unless the calling process is running as root, in which case no futher authentication is needed.</p><p></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsSetTrustSettings">SecTrustSettingsSetTrustSettings</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSettingsCreateExternalRepresentation" title="SecTrustSettingsCreateExternalRepresentation"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsCreateExternalRepresentation" title="SecTrustSettingsCreateExternalRepresentation"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW48" title="SecTrustSettingsCreateExternalRepresentation"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_94"></a><h3 class="tight">SecTrustSettingsCreateExternalRepresentation</h3><p class="spaceabove">Obtains an external, portable representation of the specified domain's trust settings.</p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsCreateExternalRepresentation(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain,
   <a href="../../../../CoreFoundation/Reference/CFDataRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDataRef" target="_top">CFDataRef</a> *trustSettings
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>domain</em></dt><dd><p>The trust settings domain for which you want an external representation of trust settings. For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd><dt><em>trustSettings</em></dt><dd><p>An external representation of the domain’s trust settings. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span> Returns <code>errSecNoTrustSettings</code> if no trust settings exist for the specified domain.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsImportExternalRepresentation">SecTrustSettingsImportExternalRepresentation</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSettingsImportExternalRepresentation" title="SecTrustSettingsImportExternalRepresentation"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsImportExternalRepresentation" title="SecTrustSettingsImportExternalRepresentation"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW47" title="SecTrustSettingsImportExternalRepresentation"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_95"></a><h3 class="tight">SecTrustSettingsImportExternalRepresentation</h3><p class="spaceabove">Imports trust settings into a trust domain.</p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsImportExternalRepresentation(
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain,
   <a href="../../../../CoreFoundation/Reference/CFDataRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDataRef" target="_top">CFDataRef</a> trustSettings
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>domain</em></dt><dd><p>The trust settings domain into which you want to import trust settings. For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd><dt><em>trustSettings</em></dt><dd><p>An external representation of the trust settings (created by the <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCreateExternalRepresentation">SecTrustSettingsCreateExternalRepresentation</a></code> function) that you want to import. </p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCreateExternalRepresentation">SecTrustSettingsCreateExternalRepresentation</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSettingsRemoveTrustSettings" title="SecTrustSettingsRemoveTrustSettings"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsRemoveTrustSettings" title="SecTrustSettingsRemoveTrustSettings"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW53" title="SecTrustSettingsRemoveTrustSettings"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_96"></a><h3 class="tight">SecTrustSettingsRemoveTrustSettings</h3><p class="spaceabove">Deletes the trust settings for a certificate.</p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsRemoveTrustSettings(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certRef</em></dt><dd><p>The certificate whose trust settings you wish to remove. Pass the value <code>kSecTrustSettingsDefaultRootCertSetting</code> to remove the default root certificate trust settings for the domain.</p></dd><dt><em>domain</em></dt><dd><p>The trust settings domain for which you wish to remove the trust settings. For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span> Returns <code>errSecItemNotFound</code> if no trust settings exist for the certificate.</p><h5 class="tight">Discussion</h5><p>If a certificate has no trust settings, the certificate must be verified to a known, trusted certificate.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsSetTrustSettings">SecTrustSettingsSetTrustSettings</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSettingsSetTrustSettings" title="SecTrustSettingsSetTrustSettings"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsSetTrustSettings" title="SecTrustSettingsSetTrustSettings"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-SW45" title="SecTrustSettingsSetTrustSettings"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_97"></a><h3 class="tight">SecTrustSettingsSetTrustSettings</h3><p class="spaceabove">Specifies trust settings for a certificate.</p><p class="spaceabove"><pre>
OSStatus SecTrustSettingsSetTrustSettings(
   <a href="reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certRef,
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustSettingsDomain">SecTrustSettingsDomain</a> domain,
   <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> trustSettingsDictOrArray);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>certRef</em></dt><dd><p>The certificate for which you want to specify the trust settings. Pass the value <code>kSecTrustSettingsDefaultRootCertSetting</code> to set the default root certificate trust settings for the domain.</p></dd><dt><em>domain</em></dt><dd><p>The trust settings domain of the trust settings that you wish to specify.  For possible values, see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustSettingsDomain">“Trust Settings Domain Constants.”</a></span></p></dd><dt><em>trustSettings</em></dt><dd><p>On return, an array of <code>CFDictionary</code> objects specifying the trust settings for the certificate. For the contents of the dictionaries, see the discussion below. Call the <code>CFRelease</code> function to release this object when you are finished with it.</p></dd><dt><em>trustSettingsDictOrArray</em></dt><dd><p>The trust settings you wish to specify for this certificate, in the form of a <code>CFDictionary</code> object, a <code>CFArray</code> of <code>CFDictionary</code> objects, or <code>NULL</code>. The contents of <code>CFDictionary</code> objects used to specify trust settings are detailed in the <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCopyTrustSettings">SecTrustSettingsCopyTrustSettings</a></code> function description. Pass <code>NULL</code> if you want to specify an empty trust settings array.</p></dd></dl><h5 class="tight">Return Value</h5><p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p><h5 class="tight">Discussion</h5><p>If you pass <code>NULL</code> for the <code>trustSettingsDictOrArray</code> parameter, then the trust settings for this certificate are stored as an empty trust settings array, indicating "always trust this root certificate regardless of use." This setting is valid only for a self-signed (root) certificate. To instead remove all trust settings for the certificate (interpreted as "this certificate must be verified to a known trusted certificate"), use the <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsRemoveTrustSettings">SecTrustSettingsRemoveTrustSettings</a></code> function.  </p><p>If the specified certificate already has trust settings in the specified domain, this function replaces them.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCopyTrustSettings">SecTrustSettingsCopyTrustSettings</a></code></li><li class="availability">  <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsRemoveTrustSettings">SecTrustSettingsRemoveTrustSettings</a></code></li></ul><h5 class="tight">Declared In</h5><code>SecTrustSettings.h</code><a name="//apple_ref/c/func/SecTrustSetVerifyDate" title="SecTrustSetVerifyDate"></a><a name="//apple_ref/doc/c_ref/SecTrustSetVerifyDate" title="SecTrustSetVerifyDate"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIGFDIJ" title="SecTrustSetVerifyDate"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_99"></a><h3 class="tight">SecTrustSetVerifyDate</h3>
<p class="spaceabove">Sets the date and time against which the certificates in a trust management object are verified.</p>
<p class="spaceabove"><pre>
OSStatus SecTrustSetVerifyDate (
   <a href="reference.html#//apple_ref/doc/c_ref/SecTrustRef">SecTrustRef</a> trust,
   <a href="../../../../CoreFoundation/Reference/CFDateRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDateRef" target="_top">CFDateRef</a> verifyDate
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>trust</em></dt>
<dd><p>The trust management object whose verification date you want to set. A trust management object includes one or more certificates plus the policy or policies to be used in evaluating trust. Use the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function to create a trust management object.</p></dd>
<dt><em>verifyDate</em></dt>
<dd><p>The date and time to use when verifying the certificate. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>By default, the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function uses the current date and time when verifying a certificate. However, you can use <code><a href="reference.html#//apple_ref/doc/c_ref/SecTrustSetVerifyDate">SecTrustSetVerifyDate</a></code> to set another date and time to use when verifying a certificate. For example, you can determine whether the certificate was valid when the document was signed rather than whether it’s valid at the present time. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/doc/uid/TP30000157-CH2g-334490" title="Data Types"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-TPXREF118" title="Data Types"></a><h2>Data Types</h2>
<a name="//apple_ref/c/tdef/CSSM_TP_APPLE_EVIDENCE_INFO" title="CSSM_TP_APPLE_EVIDENCE_INFO"></a><a name="//apple_ref/doc/c_ref/CSSM_TP_APPLE_EVIDENCE_INFO" title="CSSM_TP_APPLE_EVIDENCE_INFO"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-SW1" title="CSSM_TP_APPLE_EVIDENCE_INFO"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_100"></a><h3 class="tight">CSSM_TP_APPLE_EVIDENCE_INFO</h3>
<p class="spaceabove">Contains information about a certificate evaluation.</p>
<p class="spaceabove"><pre>

typedef struct {
<a href="reference.html#//apple_ref/doc/c_ref/CSSM_TP_APPLE_CERT_STATUS">CSSM_TP_APPLE_CERT_STATUS</a>   StatusBits;
uint32                      NumStatusCodes
<!--a-->CSSM_RETURN<!--/a-->                 *StatusCodes;
<!--a-->uint32<!--/a-->                      Index;
CSSM_DL_DB_HANDLE           DlDbHandle
<!--a-->CSSM_DB_UNIQUE_RECORD_PTR<!--/a-->   UniqueRecord;
} CSSM_TP_APPLE_EVIDENCE_INFO;
</pre></p>
<h5 class="tight">Fields</h5><dl class="termdef">
<dt><code>StatusBits</code></dt>
<dd><p>Indicates whether the certificate is valid and where it was found; see <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/CSSM_TP_APPLE_CERT_STATUS">“Certificate Status Constants.”</a></span></p></dd>
<dt><code>NumStatusCodes</code></dt>
<dd><p>The number of <code>CSSM_RETURN</code> structures returned in the <code>StatusCodes</code> field.</p></dd>
<dt><code>StatusCodes</code></dt>
<dd><p>An array of <code>CSSM_RETURN</code> values indicating what problems were found with the certificate. Apple-specific values are in <code>cssmapple.h</code>. Standard CSSM values are defined in <code>cssmerr.h</code> and are discussed in “Error Codes and Error Values” in the “Trust Policy Services API” chapter of <em>Common Security: CDSA and CSSM, version 2 (with corrigenda)</em> from The Open Group (<span class="content_text"><a href="http://www.opengroup.org/security/cdsa.htm" target="_blank">http://www.opengroup.org/security/cdsa.htm</a></span></p></dd>
<dt><code>Index</code></dt>
<dd><p>An index into the standard set of certificates or anchor certificates if the certificate came from one of those sets.</p></dd>
<dt><code>DlDbHandle</code></dt>
<dd><p>A CSSM object that identifies a particular database. This field is used if the certificate did not come from the standard set of certificates or anchor certificates. This value is useful only as input to functions in the CSSM API.</p></dd>
<dt><code>UniqueRecord</code></dt>
<dd><p>A CSSM object that identifies a particular record in a database. This field is used if the certificate did not come from the standard set of certificates or anchor certificates. This value is useful only as in input to functions in the CSSM API.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>An array of these structures is returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustGetResult">SecTrustGetResult</a></code> function; each one describes a certificate in the certificate chain. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>cssmapple.h</code>
<a name="//apple_ref/c/tdef/SecCertificateRef" title="SecCertificateRef"></a><a name="//apple_ref/doc/c_ref/SecCertificateRef" title="SecCertificateRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBEDEIG" title="SecCertificateRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_101"></a><h3 class="tight">SecCertificateRef</h3>
<p class="spaceabove">Abstract Core Foundation-type object representing an X.509 certificate.</p>
<p class="spaceabove"><pre>
typedef struct __SecCertificate *SecCertificateRef;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>A <code>SecCertificateRef</code> object for a certificate that is stored in a keychain can be safely cast to a <code>SecKeychainItemRef</code> for manipulation as a keychain item. On the other hand, if the <code>SecCertificateRef</code> is not stored in a keychain, casting the object to a <code>SecKeychainItemRef</code> and passing it to Keychain Services functions returns errors.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecBase.h</code>
<a name="//apple_ref/c/tdef/SecIdentityRef" title="SecIdentityRef"></a><a name="//apple_ref/doc/c_ref/SecIdentityRef" title="SecIdentityRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBIJFJA" title="SecIdentityRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_102"></a><h3 class="tight">SecIdentityRef</h3>
<p class="spaceabove">Abstract Core Foundation-type object representing an identity.</p>
<p class="spaceabove"><pre>
typedef struct __SecIdentity *SecIdentityRef;
</pre></p><h5 class="tight">Discussion</h5><p>A <code>SecIdentityRef</code> object contains a <code>SecKeyRef</code> object and an associated <code>SecCertificateRef</code> object.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecBase.h</code>
<a name="//apple_ref/c/tdef/SecIdentitySearchRef" title="SecIdentitySearchRef"></a><a name="//apple_ref/doc/c_ref/SecIdentitySearchRef" title="SecIdentitySearchRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBJFAFF" title="SecIdentitySearchRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_103"></a><h3 class="tight">SecIdentitySearchRef</h3>
<p class="spaceabove">Contains information about an identity search.</p>
<p class="spaceabove"><pre>
typedef struct <!--a-->OpaqueSecIdentitySearchRef<!--/a--> *SecIdentitySearchRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecIdentitySearch.h</code>
<a name="//apple_ref/c/tdef/SecKeyRef" title="SecKeyRef"></a><a name="//apple_ref/doc/c_ref/SecKeyRef" title="SecKeyRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBCBDEC" title="SecKeyRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_104"></a><h3 class="tight">SecKeyRef</h3>
<p class="spaceabove">Abstract Core Foundation-type object representing an asymmetric key.</p>
<p class="spaceabove"><pre>
typedef struct __SecKey *SecKeyRef;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>A <code>SecKeyRef</code> object for a key that is stored in a keychain can be safely cast to a <code>SecKeychainItemRef</code> for manipulation as a keychain item. On the other hand, if the <code>SecKeyRef</code> is not stored in a keychain, casting the object to a <code>SecKeychainItemRef</code> and passing it to Keychain Services functions returns errors.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecBase.h</code>
<a name="//apple_ref/c/tdef/SecPolicyRef" title="SecPolicyRef"></a><a name="//apple_ref/doc/c_ref/SecPolicyRef" title="SecPolicyRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBFJGCF" title="SecPolicyRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_105"></a><h3 class="tight">SecPolicyRef</h3>
<p class="spaceabove">Contains information about a policy.</p>
<p class="spaceabove"><pre>
typedef struct <!--a-->OpaqueSecPolicyRef<!--/a--> *SecPolicyRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecBase.h</code>
<a name="//apple_ref/c/tdef/SecPolicySearchRef" title="SecPolicySearchRef"></a><a name="//apple_ref/doc/c_ref/SecPolicySearchRef" title="SecPolicySearchRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBDDBJB" title="SecPolicySearchRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_106"></a><h3 class="tight">SecPolicySearchRef</h3>
<p class="spaceabove">Contains information about a policy search.</p>
<p class="spaceabove"><pre>
typedef struct <!--a-->OpaquePolicySearchRef<!--/a--> *SecPolicySearchRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecPolicySearch.h</code>
<a name="//apple_ref/c/tdef/SecPublicKeyHash" title="SecPublicKeyHash"></a><a name="//apple_ref/doc/c_ref/SecPublicKeyHash" title="SecPublicKeyHash"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-SW2" title="SecPublicKeyHash"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_107"></a><h3 class="tight">SecPublicKeyHash</h3>
<p class="spaceabove">Represents a 20-byte public key hash.</p>
<p class="spaceabove"><pre>
typedef UInt8 SecPublicKeyHash[20];
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The <code>SecPublicKeyHash</code> type represents a hash of a public key. You can use the constant <code>kSecPublicKeyHashItemAttr</code> as input to functions in the Keychain Services API to set or retrieve a certificate attribute value of this type. See <em><a href="../../keychainservices/index.html#//apple_ref/doc/uid/TP30000898" target="_top">Keychain Services Reference</a></em> for information about getting and setting attribute values.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecKeychainItem.h</code>
<a name="//apple_ref/c/tdef/SecTrustRef" title="SecTrustRef"></a><a name="//apple_ref/doc/c_ref/SecTrustRef" title="SecTrustRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-CJBEHGCC" title="SecTrustRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_108"></a><h3 class="tight">SecTrustRef</h3>
<p class="spaceabove">Contains information about trust management.</p>
<p class="spaceabove"><pre>
typedef struct __SecTrust *SecTrustRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code>
<a name="//apple_ref/c/tdef/SecTrustUserSetting" title="SecTrustUserSetting"></a><a name="//apple_ref/doc/c_ref/SecTrustUserSetting" title="SecTrustUserSetting"></a><a name="//apple_ref/doc/uid/TP30000157-CH2g-SW3" title="SecTrustUserSetting"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH2g-DontLinkElementID_109"></a><h3 class="tight">SecTrustUserSetting</h3>
<p class="spaceabove">Represents user-specified trust settings.</p>
<p class="spaceabove"><pre>
typedef <a href="reference.html#//apple_ref/doc/c_ref/SecTrustResultType">SecTrustResultType</a> SecTrustUserSetting;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>See <span class="content_text"><a href="reference.html#//apple_ref/c/tdef/SecTrustResultType">“Trust Result Type Constants”</a></span> for possible values.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/doc/uid/TP30000157-CH3g-138035" title="Constants"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-TPXREF119" title="Constants"></a><h2>Constants</h2>
<a name="//apple_ref/doc/constant_group/Certificate_Item_Attribute_Constants" title="Certificate Item Attribute Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW2" title="Certificate Item Attribute Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_110"></a><h3 class="tight">Certificate Item Attribute Constants</h3>
<p class="spaceabove">Indicates certificate item attributes.</p>
<p class="spaceabove"><pre>
enum
{
   <a href="reference.html#//apple_ref/doc/c_ref/kSecSubjectItemAttr">kSecSubjectItemAttr</a>              = 'subj',
   <a href="reference.html#//apple_ref/doc/c_ref/kSecIssuerItemAttr">kSecIssuerItemAttr</a>               = 'issu',
   <a href="reference.html#//apple_ref/doc/c_ref/kSecSerialNumberItemAttr">kSecSerialNumberItemAttr</a>         = 'snbr',
   <a href="reference.html#//apple_ref/doc/c_ref/kSecPublicKeyHashItemAttr">kSecPublicKeyHashItemAttr</a>        = 'hpky',
   <a href="reference.html#//apple_ref/doc/c_ref/kSecSubjectKeyIdentifierItemAttr">kSecSubjectKeyIdentifierItemAttr</a> = 'skid',
   <a href="reference.html#//apple_ref/doc/c_ref/kSecCertTypeItemAttr">kSecCertTypeItemAttr</a>             = 'ctyp',
   <a href="reference.html#//apple_ref/doc/c_ref/kSecCertEncodingItemAttr">kSecCertEncodingItemAttr</a>         = 'cenc'
};
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/kSecSubjectItemAttr" title="kSecSubjectItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecSubjectItemAttr" title="kSecSubjectItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW3" title="kSecSubjectItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_111"></a><dt><code>kSecSubjectItemAttr</code></dt>
<dd><p>DER-encoded subject distinguished name.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecIssuerItemAttr" title="kSecIssuerItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecIssuerItemAttr" title="kSecIssuerItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW4" title="kSecIssuerItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_112"></a><dt><code>kSecIssuerItemAttr</code></dt>
<dd><p>DER-encoded issuer distinguished name.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecSerialNumberItemAttr" title="kSecSerialNumberItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecSerialNumberItemAttr" title="kSecSerialNumberItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW5" title="kSecSerialNumberItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_113"></a><dt><code>kSecSerialNumberItemAttr</code></dt>
<dd><p>DER-encoded certificate serial number.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecPublicKeyHashItemAttr" title="kSecPublicKeyHashItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecPublicKeyHashItemAttr" title="kSecPublicKeyHashItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW6" title="kSecPublicKeyHashItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_114"></a><dt><code>kSecPublicKeyHashItemAttr</code></dt>
<dd><p>Public key hash.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecSubjectKeyIdentifierItemAttr" title="kSecSubjectKeyIdentifierItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecSubjectKeyIdentifierItemAttr" title="kSecSubjectKeyIdentifierItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW7" title="kSecSubjectKeyIdentifierItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_115"></a><dt><code>kSecSubjectKeyIdentifierItemAttr</code></dt>
<dd><p>Subject key identifier.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecCertTypeItemAttr" title="kSecCertTypeItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecCertTypeItemAttr" title="kSecCertTypeItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW8" title="kSecCertTypeItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_116"></a><dt><code>kSecCertTypeItemAttr</code></dt>
<dd><p>Certificate type.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecCertEncodingItemAttr" title="kSecCertEncodingItemAttr"></a><a name="//apple_ref/doc/c_ref/kSecCertEncodingItemAttr" title="kSecCertEncodingItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW9" title="kSecCertEncodingItemAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_117"></a><dt><code>kSecCertEncodingItemAttr</code></dt>
<dd><p>Certificate encoding.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecCertificate.h</code>.</p></dd></dl>
<a name="//apple_ref/c/tdef/CSSM_TP_APPLE_CERT_STATUS" title="Certificate Status Constants" role="Enum"></a><a name="//apple_ref/doc/c_ref/CSSM_TP_APPLE_CERT_STATUS" title="Certificate Status Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-BCIJIJGE" title="Certificate Status Constants" role="Enum"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_118"></a><h3 class="tight">Certificate Status Constants</h3>
<p class="spaceabove">Specifies the status of a certificate.</p>
<p class="spaceabove"><pre>
typedef <!--a-->uint32<!--/a--> CSSM_TP_APPLE_CERT_STATUS;
enum
{
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_CERT_STATUS_EXPIRED">CSSM_CERT_STATUS_EXPIRED</a>            = 0<!--a-->x00000001<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_CERT_STATUS_NOT_VALID_YET">CSSM_CERT_STATUS_NOT_VALID_YET</a>      = 0<!--a-->x00000002<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_IN_INPUT_CERTS">CSSM_CERT_STATUS_IS_IN_INPUT_CERTS</a>  = 0<!--a-->x00000004<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_IN_ANCHORS">CSSM_CERT_STATUS_IS_IN_ANCHORS</a>      = 0<!--a-->x00000008<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_ROOT">CSSM_CERT_STATUS_IS_ROOT</a>            = 0<!--a-->x00000010<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_FROM_NET">CSSM_CERT_STATUS_IS_FROM_NET</a>        = 0<!--a-->x00000020<!--/a-->
};
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/CSSM_CERT_STATUS_EXPIRED" title="CSSM_CERT_STATUS_EXPIRED"></a><a name="//apple_ref/doc/c_ref/CSSM_CERT_STATUS_EXPIRED" title="CSSM_CERT_STATUS_EXPIRED"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW10" title="CSSM_CERT_STATUS_EXPIRED"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_119"></a><dt><code>CSSM_CERT_STATUS_EXPIRED</code></dt>
<dd><p>The certificate has expired.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_CERT_STATUS_NOT_VALID_YET" title="CSSM_CERT_STATUS_NOT_VALID_YET"></a><a name="//apple_ref/doc/c_ref/CSSM_CERT_STATUS_NOT_VALID_YET" title="CSSM_CERT_STATUS_NOT_VALID_YET"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW11" title="CSSM_CERT_STATUS_NOT_VALID_YET"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_120"></a><dt><code>CSSM_CERT_STATUS_NOT_VALID_YET</code></dt>
<dd><p>The certificate is not yet valid. In addition to the expiration, or “Not Valid After,” date and time, each certificate has a “Not Valid Before” date and time.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_CERT_STATUS_IS_IN_INPUT_CERTS" title="CSSM_CERT_STATUS_IS_IN_INPUT_CERTS"></a><a name="//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_IN_INPUT_CERTS" title="CSSM_CERT_STATUS_IS_IN_INPUT_CERTS"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW12" title="CSSM_CERT_STATUS_IS_IN_INPUT_CERTS"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_121"></a><dt><code>CSSM_CERT_STATUS_IS_IN_INPUT_CERTS</code></dt>
<dd><p>This is one of the certificates included in the array of certificates passed to the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_CERT_STATUS_IS_IN_ANCHORS" title="CSSM_CERT_STATUS_IS_IN_ANCHORS"></a><a name="//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_IN_ANCHORS" title="CSSM_CERT_STATUS_IS_IN_ANCHORS"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW13" title="CSSM_CERT_STATUS_IS_IN_ANCHORS"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_122"></a><dt><code>CSSM_CERT_STATUS_IS_IN_ANCHORS</code></dt>
<dd><p>This certificate was found in the system’s store of anchor certificates (see <code><a href="reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code>). </p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_CERT_STATUS_IS_ROOT" title="CSSM_CERT_STATUS_IS_ROOT"></a><a name="//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_ROOT" title="CSSM_CERT_STATUS_IS_ROOT"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW14" title="CSSM_CERT_STATUS_IS_ROOT"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_123"></a><dt><code>CSSM_CERT_STATUS_IS_ROOT</code></dt>
<dd><p>The certificate is a root certificate. If this bit is set but the <code>CSSM_CERT_STATUS_IS_IN_ANCHORS</code> bit is not, then this is an untrusted anchor.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_CERT_STATUS_IS_FROM_NET" title="CSSM_CERT_STATUS_IS_FROM_NET"></a><a name="//apple_ref/doc/c_ref/CSSM_CERT_STATUS_IS_FROM_NET" title="CSSM_CERT_STATUS_IS_FROM_NET"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW15" title="CSSM_CERT_STATUS_IS_FROM_NET"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_124"></a><dt><code>CSSM_CERT_STATUS_IS_FROM_NET</code></dt>
<dd><p>The certificate was obtained through some mechanism other than the certificates stored by the operating system and those passed into the <code><a href="reference.html#//apple_ref/c/func/SecTrustCreateWithCertificates">SecTrustCreateWithCertificates</a></code> function. For example, the certificate might have been fetched over a network. </p><p>Available in Mac OS X v10.3 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p> If none of these bits are set, the certificate came from a standard certificate search; see the description of the <code><a href="reference.html#//apple_ref/c/func/SecTrustSetKeychains">SecTrustSetKeychains</a></code> function.</p>
<a name="//apple_ref/c/tdef/SecTrustResultType" title="Trust Result Type Constants" role="Enum"></a><a name="//apple_ref/doc/c_ref/SecTrustResultType" title="Trust Result Type Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-BCIGAGFI" title="Trust Result Type Constants" role="Enum"></a>
<a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_134"></a><h3 class="tight">Trust Result Type Constants</h3>
<p class="spaceabove">Specifies the trust result type.</p>
<p class="spaceabove"><pre>
typedef enum {
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultInvalid">kSecTrustResultInvalid</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultProceed">kSecTrustResultProceed</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultConfirm">kSecTrustResultConfirm</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultDeny">kSecTrustResultDeny</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultUnspecified">kSecTrustResultUnspecified</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultRecoverableTrustFailure">kSecTrustResultRecoverableTrustFailure</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultFatalTrustFailure">kSecTrustResultFatalTrustFailure</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustResultOtherError">kSecTrustResultOtherError</a>
} SecTrustResultType;
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/kSecTrustResultInvalid" title="kSecTrustResultInvalid"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultInvalid" title="kSecTrustResultInvalid"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW24" title="kSecTrustResultInvalid"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_135"></a><dt><code>kSecTrustResultInvalid</code></dt>
<dd><p>Invalid setting or result. Usually, this result indicates that the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function did not complete successfully.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultProceed" title="kSecTrustResultProceed"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultProceed" title="kSecTrustResultProceed"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW25" title="kSecTrustResultProceed"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_136"></a><dt><code>kSecTrustResultProceed</code></dt>
<dd><p>The user indicated that you may trust the certificate for the purposes designated in the specified policies. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function or stored as part of the user trust settings. In the Keychain Access utility, this value is termed “Always Trust.”</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultConfirm" title="kSecTrustResultConfirm"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultConfirm" title="kSecTrustResultConfirm"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW26" title="kSecTrustResultConfirm"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_137"></a><dt><code>kSecTrustResultConfirm</code></dt>
<dd><p>Confirmation from the user is required before proceeding. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function or stored as part of the user trust settings. In the Keychain Access utility, this value is termed “Ask Permission.”</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultDeny" title="kSecTrustResultDeny"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultDeny" title="kSecTrustResultDeny"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW27" title="kSecTrustResultDeny"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_138"></a><dt><code>kSecTrustResultDeny</code></dt>
<dd><p>The user specified that the certificate should not be trusted. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function or stored as part of the user trust settings. In the Keychain Access utility, this value is termed “Never Trust.”</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultUnspecified" title="kSecTrustResultUnspecified"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultUnspecified" title="kSecTrustResultUnspecified"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW28" title="kSecTrustResultUnspecified"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_139"></a><dt><code>kSecTrustResultUnspecified</code></dt>
<dd><p>The user did not specify a trust setting. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function or stored as part of the user trust settings. In the Keychain Access utility, this value is termed “Use System Policy.” This is the default user setting. </p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultRecoverableTrustFailure" title="kSecTrustResultRecoverableTrustFailure"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultRecoverableTrustFailure" title="kSecTrustResultRecoverableTrustFailure"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW29" title="kSecTrustResultRecoverableTrustFailure"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_140"></a><dt><code>kSecTrustResultRecoverableTrustFailure</code></dt>
<dd><p>Trust denied; retry after changing settings. For example, if trust is denied because the certificate has expired, you can ask the user whether to trust the certificate anyway. If the user answers yes, then use the <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustSetUserTrust">SecTrustSetUserTrust</a></code> function to set the user trust setting to <code>kSecTrustResultProceed</code> and call <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> again. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function but not stored as part of the user trust settings.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultFatalTrustFailure" title="kSecTrustResultFatalTrustFailure"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultFatalTrustFailure" title="kSecTrustResultFatalTrustFailure"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW30" title="kSecTrustResultFatalTrustFailure"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_141"></a><dt><code>kSecTrustResultFatalTrustFailure</code></dt>
<dd><p>Trust denied; no simple fix is available. For example, if a certificate cannot be verified because it is corrupted, trust cannot be established without replacing the certificate. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function but not stored as part of the user trust settings.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kSecTrustResultOtherError" title="kSecTrustResultOtherError"></a><a name="//apple_ref/doc/c_ref/kSecTrustResultOtherError" title="kSecTrustResultOtherError"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW31" title="kSecTrustResultOtherError"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_142"></a><dt><code>kSecTrustResultOtherError</code></dt>
<dd><p>A failure other than that of trust evaluation; for example, an internal failure of the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function. This value may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function but not stored as part of the user trust settings.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>SecTrust.h</code>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>These constants may be returned by the <code><a href="reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function or stored as one of the user trust settings (see <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustSetUserTrust">SecTrustSetUserTrust</a></code>), as noted. When evaluating user trust, both <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustGetUserTrust">SecTrustGetUserTrust</a></code> and <code>SecTrustEvaluate</code> start with the leaf certificate and work through the chain down to the anchor. The <code>SecTrustGetUserTrust</code> function returns the user trust setting of the first certificate for which the setting is other than <code>kSecTrustResultUnspecified</code>. Similarly, the function uses the user trust setting of the first certificate for which the setting is other than <code>kSecTrustResultUnspecified</code>, regardless of the user trust settings of other certificates in the chain.</p>
<a name="//apple_ref/c/tdef/CSSM_APPLE_TP_ACTION_FLAGS" title="Action Data Flags" role="Enum"></a><a name="//apple_ref/doc/c_ref/CSSM_APPLE_TP_ACTION_FLAGS" title="Action Data Flags" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-BCIJBADI" title="Action Data Flags" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_143"></a><h3 class="tight">Action Data Flags</h3>
<p class="spaceabove">Specifies options for the AppleX509TP trust policy module’s default action. </p>
<p class="spaceabove"><pre>
typedef <!--a-->uint32<!--/a--> CSSM_APPLE_TP_ACTION_FLAGS;
enum {
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_TP_ACTION_ALLOW_EXPIRED">CSSM_TP_ACTION_ALLOW_EXPIRED</a>        = 0<!--a-->x00000001<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_TP_ACTION_LEAF_IS_CA">CSSM_TP_ACTION_LEAF_IS_CA</a>           = 0<!--a-->x00000002<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_TP_ACTION_FETCH_CERT_FROM_NET">CSSM_TP_ACTION_FETCH_CERT_FROM_NET</a>  = 0<!--a-->x00000004<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT">CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT</a>   = 0<!--a-->x00000008<!--/a-->
};
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/CSSM_TP_ACTION_ALLOW_EXPIRED" title="CSSM_TP_ACTION_ALLOW_EXPIRED"></a><a name="//apple_ref/doc/c_ref/CSSM_TP_ACTION_ALLOW_EXPIRED" title="CSSM_TP_ACTION_ALLOW_EXPIRED"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW32" title="CSSM_TP_ACTION_ALLOW_EXPIRED"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_144"></a><dt><code>CSSM_TP_ACTION_ALLOW_EXPIRED</code></dt>
<dd><p>Ignore the expiration date and time for all certificates.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_TP_ACTION_LEAF_IS_CA" title="CSSM_TP_ACTION_LEAF_IS_CA"></a><a name="//apple_ref/doc/c_ref/CSSM_TP_ACTION_LEAF_IS_CA" title="CSSM_TP_ACTION_LEAF_IS_CA"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW33" title="CSSM_TP_ACTION_LEAF_IS_CA"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_145"></a><dt><code>CSSM_TP_ACTION_LEAF_IS_CA</code></dt>
<dd><p>First certificate is that of a certification authority (CA). By formal definition, a valid certificate chain must begin with a certificate that is not a CA. Set this bit if you want to validate a partial chain, starting with a CA and working toward the anchor, or if you want to evaluate a single self-signed certificate as a one-certificate “chain” for testing purposes.</p><p>Available in Mac OS X v10.3 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_TP_ACTION_FETCH_CERT_FROM_NET" title="CSSM_TP_ACTION_FETCH_CERT_FROM_NET"></a><a name="//apple_ref/doc/c_ref/CSSM_TP_ACTION_FETCH_CERT_FROM_NET" title="CSSM_TP_ACTION_FETCH_CERT_FROM_NET"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW34" title="CSSM_TP_ACTION_FETCH_CERT_FROM_NET"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_146"></a><dt><code>CSSM_TP_ACTION_FETCH_CERT_FROM_NET</code></dt>
<dd><p>Enable fetching intermediate certificates over the network using http or LDAP.</p><p>Available in Mac OS X v10.3 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd>
<a name="//apple_ref/c/econst/CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT" title="CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT"></a><a name="//apple_ref/doc/c_ref/CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT" title="CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW35" title="CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_147"></a><dt><code>CSSM_TP_ACTION_ALLOW_EXPIRED_ROOT</code></dt>
<dd><p>Ignore the expiration date and time for root certificates only.</p><p>Available in Mac OS X v10.2 and later.</p><p>Declared in <code>cssmapple.h</code>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>See <code><a href="reference.html#//apple_ref/c/func/SecTrustSetParameters">SecTrustSetParameters</a></code> for more information about actions.</p><a name="//apple_ref/doc/constant_group/System_Identity_Domains" title="System Identity Domains" role="GlobalDataGroup"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW57" title="System Identity Domains" role="GlobalDataGroup"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_156"></a><h3 class="tight">System Identity Domains</h3><p class="spaceabove">Domains for which you can set or obtain a system-wide identity.</p><p class="spaceabove"><pre>
const <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kSecIdentityDomainDefault">kSecIdentityDomainDefault</a>;
const <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kSecIdentityDomainKerberosKDC">kSecIdentityDomainKerberosKDC</a>;
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/data/kSecIdentityDomainDefault" title="kSecIdentityDomainDefault"></a><a name="//apple_ref/doc/c_ref/kSecIdentityDomainDefault" title="kSecIdentityDomainDefault"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_157"></a><dt><code>kSecIdentityDomainDefault</code></dt><dd><p>The system-wide default identity.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecIdentity.h</code>.</p></dd><a name="//apple_ref/c/data/kSecIdentityDomainKerberosKDC" title="kSecIdentityDomainKerberosKDC"></a><a name="//apple_ref/doc/c_ref/kSecIdentityDomainKerberosKDC" title="kSecIdentityDomainKerberosKDC"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_158"></a><dt><code>kSecIdentityDomainKerberosKDC</code></dt><dd><p>Kerberos Key Distribution Center (KDC) identity.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecIdentity.h</code>.</p></dd></dl><h5 class="tight">Discussion</h5><p>These constants can be used with the <code><a href="reference.html#//apple_ref/c/func/SecIdentitySetSystemIdentity">SecIdentitySetSystemIdentity</a></code> and <code><a href="reference.html#//apple_ref/c/func/SecIdentityCopySystemIdentity">SecIdentityCopySystemIdentity</a></code> functions.</p><a name="//apple_ref/c/tdef/SecCredentialType" title="Key Credential Type Constants" role="Enum"></a><a name="//apple_ref/doc/c_ref/SecCredentialType" title="Key Credential Type Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW48" title="Key Credential Type Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_159"></a><h3 class="tight">Key Credential Type Constants</h3><p class="spaceabove">The credential type to be returned by <code><a href="reference.html#//apple_ref/c/func/SecKeyGetCredentials">SecKeyGetCredentials</a></code>.</p><p class="spaceabove"><pre>
typedef <!--a-->uint32<!--/a--> SecCredentialType;
   
enum
{
   <a href="reference.html#//apple_ref/doc/c_ref/kSecCredentialTypeDefault">kSecCredentialTypeDefault</a> = 0,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecCredentialTypeWithUI">kSecCredentialTypeWithUI</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecCredentialTypeNoUI">kSecCredentialTypeNoUI</a>
};
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/econst/kSecCredentialTypeDefault" title="kSecCredentialTypeDefault"></a><a name="//apple_ref/doc/c_ref/kSecCredentialTypeDefault" title="kSecCredentialTypeDefault"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW49" title="kSecCredentialTypeDefault"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_160"></a><dt><code>kSecCredentialTypeDefault</code></dt><dd><p>The default setting for determining whether to present UI is used. </p><p>The default setting can be changed with a call to <code><a href="../../keychainservices/Reference/reference.html#//apple_ref/c/func/SecKeychainSetUserInteractionAllowed" target="_top">SecKeychainSetUserInteractionAllowed</a></code>.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecKey.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecCredentialTypeWithUI" title="kSecCredentialTypeWithUI"></a><a name="//apple_ref/doc/c_ref/kSecCredentialTypeWithUI" title="kSecCredentialTypeWithUI"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW50" title="kSecCredentialTypeWithUI"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_161"></a><dt><code>kSecCredentialTypeWithUI</code></dt><dd><p>Keychain operations on keys that have this credential are allowed to present UI if required.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecKey.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecCredentialTypeNoUI" title="kSecCredentialTypeNoUI"></a><a name="//apple_ref/doc/c_ref/kSecCredentialTypeNoUI" title="kSecCredentialTypeNoUI"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW51" title="kSecCredentialTypeNoUI"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_162"></a><dt><code>kSecCredentialTypeNoUI</code></dt><dd><p>Keychain operations on keys that have this credential are not allowed to present UI, and will fail if UI is required.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecKey.h</code>.</p></dd></dl><h5 class="tight">Discussion</h5><p>See the section “Servers and the Keychain” in the <span class="content_text"><a href="../../../Conceptual/keychainServConcepts/03tasks/tasks.html#//apple_ref/doc/uid/TP30000897-CH205" target="_top">Keychain Services Tasks</a></span> chapter of <em><a href="../../../Conceptual/keychainServConcepts/index.html#//apple_ref/doc/uid/TP30000897" target="_top">Keychain Services Programming Guide</a></em> for information on the use of UI with keychain tasks.</p><a name="//apple_ref/c/tdef/SecTrustSettingsDomain" title="Trust Settings Domain Constants" role="Enum"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsDomain" title="Trust Settings Domain Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW54" title="Trust Settings Domain Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_163"></a><h3 class="tight">Trust Settings Domain Constants</h3><p class="spaceabove">The trust settings domains used by the trust settings API. </p><p class="spaceabove"><pre>
enum {     <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsDomainUser">kSecTrustSettingsDomainUser</a> = 0,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsDomainAdmin">kSecTrustSettingsDomainAdmin</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsDomainSystem">kSecTrustSettingsDomainSystem</a> }; typedef <!--a-->uint32<!--/a--> SecTrustSettingsDomain;
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/econst/kSecTrustSettingsDomainUser" title="kSecTrustSettingsDomainUser"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsDomainUser" title="kSecTrustSettingsDomainUser"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_164"></a><dt><code>kSecTrustSettingsDomainUser</code></dt><dd><p>Per-user trust settings.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsDomainAdmin" title="kSecTrustSettingsDomainAdmin"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsDomainAdmin" title="kSecTrustSettingsDomainAdmin"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_165"></a><dt><code>kSecTrustSettingsDomainAdmin</code></dt><dd><p>Locally administered, system-wide trust settings. </p><p>Administrator privileges are required to make changes to this domain.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsDomainSystem" title="kSecTrustSettingsDomainSystem"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsDomainSystem" title="kSecTrustSettingsDomainSystem"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_166"></a><dt><code>kSecTrustSettingsDomainSystem</code></dt><dd><p>System trust settings. </p><p>These trust settings are immutable and comprise the set of trusted root certificates supplied in Mac OS X. These settings are read-only, even by root.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd></dl><a name="//apple_ref/c/tdef/SecTrustSettingsKeyUsage" title="Trust Settings Key Use Constants" role="Enum"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsKeyUsage" title="Trust Settings Key Use Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW55" title="Trust Settings Key Use Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_167"></a><h3 class="tight">Trust Settings Key Use Constants</h3><p class="spaceabove">Allowed uses for the encryption key in a certificate.</p><p class="spaceabove"><pre>
enum {
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseSignature">kSecTrustSettingsKeyUseSignature</a>        = 0<!--a-->x00000001<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseEnDecryptData">kSecTrustSettingsKeyUseEnDecryptData</a>    = 0<!--a-->x00000002<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseEnDecryptKey">kSecTrustSettingsKeyUseEnDecryptKey</a>     = 0<!--a-->x00000004<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseSignCert">kSecTrustSettingsKeyUseSignCert</a>         = 0<!--a-->x00000008<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseSignRevocation">kSecTrustSettingsKeyUseSignRevocation</a>   = 0<!--a-->x00000010<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseKeyExchange">kSecTrustSettingsKeyUseKeyExchange</a>      = 0<!--a-->x00000020<!--/a-->,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseAny">kSecTrustSettingsKeyUseAny</a>              = 0<!--a-->xffffffff<!--/a-->
};
typedef <!--a-->uint32<!--/a--> SecTrustSettingsKeyUsage;
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseSignature" title="kSecTrustSettingsKeyUseSignature"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseSignature" title="kSecTrustSettingsKeyUseSignature"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_168"></a><dt><code>kSecTrustSettingsKeyUseSignature</code></dt><dd><p>The key can be used to sign data or verify a signature.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseEnDecryptData" title="kSecTrustSettingsKeyUseEnDecryptData"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseEnDecryptData" title="kSecTrustSettingsKeyUseEnDecryptData"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_169"></a><dt><code>kSecTrustSettingsKeyUseEnDecryptData</code></dt><dd><p>The key can be used to encrypt or decrypt data.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseEnDecryptKey" title="kSecTrustSettingsKeyUseEnDecryptKey"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseEnDecryptKey" title="kSecTrustSettingsKeyUseEnDecryptKey"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_170"></a><dt><code>kSecTrustSettingsKeyUseEnDecryptKey</code></dt><dd><p>The key can be used to encrypt or decrypt (wrap or unwrap) a key.</p><p>Private keys must be wrapped before they can be exported from a keychain.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseSignCert" title="kSecTrustSettingsKeyUseSignCert"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseSignCert" title="kSecTrustSettingsKeyUseSignCert"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_171"></a><dt><code>kSecTrustSettingsKeyUseSignCert</code></dt><dd><p>The key can be used to sign a certificate or verify a signature.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseSignRevocation" title="kSecTrustSettingsKeyUseSignRevocation"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseSignRevocation" title="kSecTrustSettingsKeyUseSignRevocation"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_172"></a><dt><code>kSecTrustSettingsKeyUseSignRevocation</code></dt><dd><p>The key can be used to sign an OCSP (online certificate status protocol) message or CRL (certificate verification list), or to verify a signature.</p><p>OCSP messages and CRLs are used to revoke certificates.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseKeyExchange" title="kSecTrustSettingsKeyUseKeyExchange"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseKeyExchange" title="kSecTrustSettingsKeyUseKeyExchange"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_173"></a><dt><code>kSecTrustSettingsKeyUseKeyExchange</code></dt><dd><p>The key is a private key that has been shared using a key exchange protocol, such as Diffie-Hellman key exchange. </p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsKeyUseAny" title="kSecTrustSettingsKeyUseAny"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUseAny" title="kSecTrustSettingsKeyUseAny"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_174"></a><dt><code>kSecTrustSettingsKeyUseAny</code></dt><dd><p>The key can be used for any purpose.</p><p>This is the default key-use setting if no other key use is specified.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd></dl><a name="//apple_ref/doc/constant_group/Trust_Settings_Usage_Constraints_Dictionary_Keys" title="Trust Settings Usage Constraints Dictionary Keys" role="PoundDefineGroup"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_12" title="Trust Settings Usage Constraints Dictionary Keys" role="PoundDefineGroup"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_175"></a><h3 class="tight">Trust Settings Usage Constraints Dictionary Keys</h3><p class="spaceabove">The keys in one usage constraints dictionary.</p><p class="spaceabove"><pre>
#define kSecTrustSettingsPolicy          CFSTR("kSecTrustSettingsPolicy")
#define kSecTrustSettingsApplication     CFSTR("kSecTrustSettingsApplication")
#define kSecTrustSettingsPolicyString    CFSTR("kSecTrustSettingsPolicyString")
#define kSecTrustSettingsKeyUsage        CFSTR("kSecTrustSettingsKeyUsage")
#define kSecTrustSettingsAllowedError    CFSTR("kSecTrustSettingsAllowedError")
#define kSecTrustSettingsResult          CFSTR("kSecTrustSettingsResult")
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/macro/kSecTrustSettingsPolicy" title="kSecTrustSettingsPolicy"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsPolicy" title="kSecTrustSettingsPolicy"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_176"></a><dt><code>kSecTrustSettingsPolicy</code></dt><dd><p>A policy object (<code>SecPolicyRef</code>) specifying the certificate verification policy.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/macro/kSecTrustSettingsApplication" title="kSecTrustSettingsApplication"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsApplication" title="kSecTrustSettingsApplication"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_177"></a><dt><code>kSecTrustSettingsApplication</code></dt><dd><p>A trusted application reference (<code>SecTrustedApplicationRef</code>) for the application checking the certificate’s trust settings.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/macro/kSecTrustSettingsPolicyString" title="kSecTrustSettingsPolicyString"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsPolicyString" title="kSecTrustSettingsPolicyString"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_178"></a><dt><code>kSecTrustSettingsPolicyString</code></dt><dd><p>A<code>CFString</code> containing policy-specific data.</p><p>For the SMIME policy, this string contains an email address. For the SSL policy, it contains a host name.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/macro/kSecTrustSettingsKeyUsage" title="kSecTrustSettingsKeyUsage"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsKeyUsage" title="kSecTrustSettingsKeyUsage"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_179"></a><dt><code>kSecTrustSettingsKeyUsage</code></dt><dd><p>A<code>CFNumber</code> containing an <code>SInt32</code> value specifying the operations for which the encryption key in this certificate can be used.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/macro/kSecTrustSettingsAllowedError" title="kSecTrustSettingsAllowedError"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsAllowedError" title="kSecTrustSettingsAllowedError"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_180"></a><dt><code>kSecTrustSettingsAllowedError</code></dt><dd><p>A <code>CFNumber</code> containing an <code>SInt32</code> value indicating a <code>CSSM_RETURN</code> result code which, if encountered during certificate verification, is ignored for that certificate.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/macro/kSecTrustSettingsResult" title="kSecTrustSettingsResult"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsResult" title="kSecTrustSettingsResult"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_181"></a><dt><code>kSecTrustSettingsResult</code></dt><dd><p>A <code>CFNumber</code> containing an <code>SInt32</code> value indicating the effective trust setting for this usage constraints dictionary. </p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd></dl><a name="//apple_ref/c/tdef/SecTrustSettingsResult" title="Trust Settings Result Constants" role="Enum"></a><a name="//apple_ref/doc/c_ref/SecTrustSettingsResult" title="Trust Settings Result Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-SW56" title="Trust Settings Result Constants" role="Enum"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_182"></a><h3 class="tight">Trust Settings Result Constants</h3><p class="spaceabove">Effective trust settings for usage constraints dictionaries used by the <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsCopyTrustSettings">SecTrustSettingsCopyTrustSettings</a></code> and <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsSetTrustSettings">SecTrustSettingsSetTrustSettings</a></code> functions.</p><p class="spaceabove"><pre>
enum {
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsResultInvalid">kSecTrustSettingsResultInvalid</a> = 0,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsResultTrustRoot">kSecTrustSettingsResultTrustRoot</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsResultTrustAsRoot">kSecTrustSettingsResultTrustAsRoot</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsResultDeny">kSecTrustSettingsResultDeny</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kSecTrustSettingsResultUnspecified">kSecTrustSettingsResultUnspecified</a>
};
typedef <!--a-->uint32<!--/a--> SecTrustSettingsResult;
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/econst/kSecTrustSettingsResultInvalid" title="kSecTrustSettingsResultInvalid"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsResultInvalid" title="kSecTrustSettingsResultInvalid"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_183"></a><dt><code>kSecTrustSettingsResultInvalid</code></dt><dd><p>Never valid in a trust settings array or in an API call.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsResultTrustRoot" title="kSecTrustSettingsResultTrustRoot"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsResultTrustRoot" title="kSecTrustSettingsResultTrustRoot"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_184"></a><dt><code>kSecTrustSettingsResultTrustRoot</code></dt><dd><p>This root certificate is explicitly trusted.</p><p>If the certificate is not a root (self-signed) certificate, the usage constraints dictionary is invalid.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsResultTrustAsRoot" title="kSecTrustSettingsResultTrustAsRoot"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsResultTrustAsRoot" title="kSecTrustSettingsResultTrustAsRoot"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_185"></a><dt><code>kSecTrustSettingsResultTrustAsRoot</code></dt><dd><p>This non-root certificate is explicitly trusted as if it were a trusted root.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsResultDeny" title="kSecTrustSettingsResultDeny"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsResultDeny" title="kSecTrustSettingsResultDeny"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_186"></a><dt><code>kSecTrustSettingsResultDeny</code></dt><dd><p>This certificate is explicitly distrusted.  </p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd><a name="//apple_ref/c/econst/kSecTrustSettingsResultUnspecified" title="kSecTrustSettingsResultUnspecified"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsResultUnspecified" title="kSecTrustSettingsResultUnspecified"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_187"></a><dt><code>kSecTrustSettingsResultUnspecified</code></dt><dd><p>This certificate is neither trusted nor distrusted. This value can be used to specify an "allowed error" without assigning trust to a specific certificate.</p><p>This value can be used to specify an allowed error without assigning trust to the certificate.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd></dl><a name="//apple_ref/doc/constant_group/Default_Root_Certificate_Trust_Settings" title="Default Root Certificate Trust Settings" role="PoundDefineGroup"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_13" title="Default Root Certificate Trust Settings" role="PoundDefineGroup"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_188"></a><h3 class="tight">Default Root Certificate Trust Settings</h3><p class="spaceabove">A value indicating the default root certificate trust settings when used for a <code>SecCertificateRef</code> object in a trust settings API function.</p><p class="spaceabove"><pre>
#define kSecTrustSettingsDefaultRootCertSetting        ((SecCertificateRef)-1)
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/macro/kSecTrustSettingsDefaultRootCertSetting" title="kSecTrustSettingsDefaultRootCertSetting"></a><a name="//apple_ref/doc/c_ref/kSecTrustSettingsDefaultRootCertSetting" title="kSecTrustSettingsDefaultRootCertSetting"></a><a name="//apple_ref/doc/uid/TP30000157-CH3g-DontLinkElementID_189"></a><dt><code>kSecTrustSettingsDefaultRootCertSetting</code></dt><dd><p>Default trust settings for root certificates.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>SecTrustSettings.h</code>.</p></dd></dl><h5 class="tight">Discussion</h5><p>Use this value with the <code><a href="reference.html#//apple_ref/c/func/SecTrustSettingsSetTrustSettings">SecTrustSettingsSetTrustSettings</a></code> function to set the default trust settings for root certificates. When evaluating trust settings for a root certificate in a given domain, if no matching explicit trust settings exist for that certificate, then the default value for the effective trust setting is returned (assuming that a default has been set and that the result is not <code>kSecTrustSettingsResultUnspecified</code>). </p><a name="//apple_ref/doc/uid/TP30000157-CH4g-CJBEABHG" title="Result Codes"></a><h2><a name="//apple_ref/doc/uid/TP30000157-CH4g-339030" title="Result Codes"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-TPXREF120" title="Result Codes"></a>Result Codes</h2>
<p>The most common result codes returned by Certificate, Key, and Trust Services are listed in the table below. The assigned error space is discontinuous: –25240..–25279 and –25290..–25329. </p>




<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left"><strong>Result Code</strong></th><th scope="col" align="left"><strong>Value</strong></th><th scope="col" align="left"><strong>Description</strong></th></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_194"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNotAvailable" title="errSecNotAvailable"></a><a name="//apple_ref/doc/c_ref/errSecNotAvailable" title="errSecNotAvailable"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW5" title="errSecNotAvailable"></a><code>errSecNotAvailable</code></td>
<td align="right" valign="top" class="content_text noWrap">–25291</td>

<td valign="top" class="content_text"><p>No keychain is available.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_195"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecReadOnly" title="errSecReadOnly"></a><a name="//apple_ref/doc/c_ref/errSecReadOnly" title="errSecReadOnly"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW6" title="errSecReadOnly"></a><code>errSecReadOnly</code></td>
<td align="right" valign="top" class="content_text noWrap">–25292</td>

<td valign="top" class="content_text"><p>A read-only error occurred.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_196"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecAuthFailed" title="errSecAuthFailed"></a><a name="//apple_ref/doc/c_ref/errSecAuthFailed" title="errSecAuthFailed"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW7" title="errSecAuthFailed"></a><code>errSecAuthFailed</code></td>
<td align="right" valign="top" class="content_text noWrap">–25293</td>

<td valign="top" class="content_text"><p>Authorization or authentication failed.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_197"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoSuchKeychain" title="errSecNoSuchKeychain"></a><a name="//apple_ref/doc/c_ref/errSecNoSuchKeychain" title="errSecNoSuchKeychain"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW8" title="errSecNoSuchKeychain"></a><code>errSecNoSuchKeychain</code></td>
<td align="right" valign="top" class="content_text noWrap">–25294</td>

<td valign="top" class="content_text"><p>The keychain does not exist.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_198"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInvalidKeychain" title="errSecInvalidKeychain"></a><a name="//apple_ref/doc/c_ref/errSecInvalidKeychain" title="errSecInvalidKeychain"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW9" title="errSecInvalidKeychain"></a><code>errSecInvalidKeychain</code></td>
<td align="right" valign="top" class="content_text noWrap">–25295</td>

<td valign="top" class="content_text"><p>The keychain is not valid.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_199"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecDuplicateKeychain" title="errSecDuplicateKeychain"></a><a name="//apple_ref/doc/c_ref/errSecDuplicateKeychain" title="errSecDuplicateKeychain"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW10" title="errSecDuplicateKeychain"></a><code>errSecDuplicateKeychain</code></td>
<td align="right" valign="top" class="content_text noWrap">–25296</td>

<td valign="top" class="content_text"><p>A keychain with the same name already exists.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_200"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecDuplicateItem" title="errSecDuplicateItem"></a><a name="//apple_ref/doc/c_ref/errSecDuplicateItem" title="errSecDuplicateItem"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW11" title="errSecDuplicateItem"></a><code>errSecDuplicateItem</code></td>
<td align="right" valign="top" class="content_text noWrap">–25299</td>

<td valign="top" class="content_text"><p>An item with the same primary key attributes already exists.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_201"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecItemNotFound" title="errSecItemNotFound"></a><a name="//apple_ref/doc/c_ref/errSecItemNotFound" title="errSecItemNotFound"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW12" title="errSecItemNotFound"></a><code>errSecItemNotFound</code></td>
<td align="right" valign="top" class="content_text noWrap">–25300</td>

<td valign="top" class="content_text"><p>The item cannot be found.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_202"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecBufferTooSmall" title="errSecBufferTooSmall"></a><a name="//apple_ref/doc/c_ref/errSecBufferTooSmall" title="errSecBufferTooSmall"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW13" title="errSecBufferTooSmall"></a><code>errSecBufferTooSmall</code></td>
<td align="right" valign="top" class="content_text noWrap">–25301</td>

<td valign="top" class="content_text"><p>The buffer is too small.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_203"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecDataTooLarge" title="errSecDataTooLarge"></a><a name="//apple_ref/doc/c_ref/errSecDataTooLarge" title="errSecDataTooLarge"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW14" title="errSecDataTooLarge"></a><code>errSecDataTooLarge</code></td>
<td align="right" valign="top" class="content_text noWrap">–25302</td>

<td valign="top" class="content_text"><p>The data is too large for the particular data type.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_204"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoSuchAttr" title="errSecNoSuchAttr"></a><a name="//apple_ref/doc/c_ref/errSecNoSuchAttr" title="errSecNoSuchAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW15" title="errSecNoSuchAttr"></a><code>errSecNoSuchAttr</code></td>
<td align="right" valign="top" class="content_text noWrap">–25303</td>

<td valign="top" class="content_text"><p>The attribute does not exist.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_205"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInvalidItemRef" title="errSecInvalidItemRef"></a><a name="//apple_ref/doc/c_ref/errSecInvalidItemRef" title="errSecInvalidItemRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW16" title="errSecInvalidItemRef"></a><code>errSecInvalidItemRef</code></td>
<td align="right" valign="top" class="content_text noWrap">–25304</td>

<td valign="top" class="content_text"><p>The item object is invalid.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_206"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInvalidSearchRef" title="errSecInvalidSearchRef"></a><a name="//apple_ref/doc/c_ref/errSecInvalidSearchRef" title="errSecInvalidSearchRef"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW17" title="errSecInvalidSearchRef"></a><code>errSecInvalidSearchRef</code></td>
<td align="right" valign="top" class="content_text noWrap">–25305</td>

<td valign="top" class="content_text"><p>The search object is invalid.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_207"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoSuchClass" title="errSecNoSuchClass"></a><a name="//apple_ref/doc/c_ref/errSecNoSuchClass" title="errSecNoSuchClass"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW18" title="errSecNoSuchClass"></a><code>errSecNoSuchClass</code></td>
<td align="right" valign="top" class="content_text noWrap">–25306</td>

<td valign="top" class="content_text"><p>The specified item does not appear to be a valid keychain item.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_208"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoDefaultKeychain" title="errSecNoDefaultKeychain"></a><a name="//apple_ref/doc/c_ref/errSecNoDefaultKeychain" title="errSecNoDefaultKeychain"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW19" title="errSecNoDefaultKeychain"></a><code>errSecNoDefaultKeychain</code></td>
<td align="right" valign="top" class="content_text noWrap">–25307</td>

<td valign="top" class="content_text"><p>A default keychain does not exist.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_209"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInteractionNotAllowed" title="errSecInteractionNotAllowed"></a><a name="//apple_ref/doc/c_ref/errSecInteractionNotAllowed" title="errSecInteractionNotAllowed"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW20" title="errSecInteractionNotAllowed"></a><code>errSecInteractionNotAllowed</code></td>
<td align="right" valign="top" class="content_text noWrap">–25308</td>

<td valign="top" class="content_text"><p>Interaction with the user is required in order to grant access or process a request; however, user interaction with the Security Server has been disabled by the program.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_210"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecReadOnlyAttr" title="errSecReadOnlyAttr"></a><a name="//apple_ref/doc/c_ref/errSecReadOnlyAttr" title="errSecReadOnlyAttr"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW21" title="errSecReadOnlyAttr"></a><code>errSecReadOnlyAttr</code></td>
<td align="right" valign="top" class="content_text noWrap">–25309</td>

<td valign="top" class="content_text"><p>The attribute is read-only.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_211"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecWrongSecVersion" title="errSecWrongSecVersion"></a><a name="//apple_ref/doc/c_ref/errSecWrongSecVersion" title="errSecWrongSecVersion"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW22" title="errSecWrongSecVersion"></a><code>errSecWrongSecVersion</code></td>
<td align="right" valign="top" class="content_text noWrap">–25310</td>

<td valign="top" class="content_text"><p>The version is incorrect.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_212"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecKeySizeNotAllowed" title="errSecKeySizeNotAllowed"></a><a name="//apple_ref/doc/c_ref/errSecKeySizeNotAllowed" title="errSecKeySizeNotAllowed"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW23" title="errSecKeySizeNotAllowed"></a><code>errSecKeySizeNotAllowed</code></td>
<td align="right" valign="top" class="content_text noWrap">–25311</td>

<td valign="top" class="content_text"><p>The key size is not allowed.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_213"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoStorageModule" title="errSecNoStorageModule"></a><a name="//apple_ref/doc/c_ref/errSecNoStorageModule" title="errSecNoStorageModule"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW24" title="errSecNoStorageModule"></a><code>errSecNoStorageModule</code></td>
<td align="right" valign="top" class="content_text noWrap">–25312</td>

<td valign="top" class="content_text"><p>No storage module is available.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_214"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoCertificateModule" title="errSecNoCertificateModule"></a><a name="//apple_ref/doc/c_ref/errSecNoCertificateModule" title="errSecNoCertificateModule"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW25" title="errSecNoCertificateModule"></a><code>errSecNoCertificateModule</code></td>
<td align="right" valign="top" class="content_text noWrap">–25313</td>

<td valign="top" class="content_text"><p>No certificate module is available.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_215"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoPolicyModule" title="errSecNoPolicyModule"></a><a name="//apple_ref/doc/c_ref/errSecNoPolicyModule" title="errSecNoPolicyModule"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW26" title="errSecNoPolicyModule"></a><code>errSecNoPolicyModule</code></td>
<td align="right" valign="top" class="content_text noWrap">–25314</td>

<td valign="top" class="content_text"><p>No policy module is available.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_216"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInteractionRequired" title="errSecInteractionRequired"></a><a name="//apple_ref/doc/c_ref/errSecInteractionRequired" title="errSecInteractionRequired"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW27" title="errSecInteractionRequired"></a><code>errSecInteractionRequired</code></td>
<td align="right" valign="top" class="content_text noWrap">–25315</td>
<td valign="top" class="content_text"><p>Interaction with the user is required in order to grant access or process a request; however, user interaction with the Security Server is impossible because the program is operating in a session incapable of graphics (such as a root session or ssh session).</p><p>Available in Mac OS X v10.2 and later.</p></td>
</tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_217"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecDataNotAvailable" title="errSecDataNotAvailable"></a><a name="//apple_ref/doc/c_ref/errSecDataNotAvailable" title="errSecDataNotAvailable"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW28" title="errSecDataNotAvailable"></a><code>errSecDataNotAvailable</code></td>
<td align="right" valign="top" class="content_text noWrap">–25316</td>

<td valign="top" class="content_text"><p>The data is not available.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_218"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecDataNotModifiable" title="errSecDataNotModifiable"></a><a name="//apple_ref/doc/c_ref/errSecDataNotModifiable" title="errSecDataNotModifiable"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW29" title="errSecDataNotModifiable"></a><code>errSecDataNotModifiable</code></td>
<td align="right" valign="top" class="content_text noWrap">–25317</td>

<td valign="top" class="content_text"><p>The data is not modifiable.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_219"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecCreateChainFailed" title="errSecCreateChainFailed"></a><a name="//apple_ref/doc/c_ref/errSecCreateChainFailed" title="errSecCreateChainFailed"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW30" title="errSecCreateChainFailed"></a><code>errSecCreateChainFailed</code></td>
<td align="right" valign="top" class="content_text noWrap">–25318</td>

<td valign="top" class="content_text"><p>One or more certificates required in order to validate this certificate cannot be found.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_220"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInvalidPrefsDomain" title="errSecInvalidPrefsDomain"></a><a name="//apple_ref/doc/c_ref/errSecInvalidPrefsDomain" title="errSecInvalidPrefsDomain"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW31" title="errSecInvalidPrefsDomain"></a><code>errSecInvalidPrefsDomain</code></td>
<td align="right" valign="top" class="content_text noWrap">–25319</td>

<td valign="top" class="content_text"><p>The preference domain specified is invalid. This error can occur in Mac OS X v10.3 and later.</p><p>Available in Mac OS X v10.3 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_221"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecACLNotSimple" title="errSecACLNotSimple"></a><a name="//apple_ref/doc/c_ref/errSecACLNotSimple" title="errSecACLNotSimple"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW32" title="errSecACLNotSimple"></a><code>errSecACLNotSimple</code></td>
<td align="right" valign="top" class="content_text noWrap">–25240</td>

<td valign="top" class="content_text"><p>The access control list is not in standard simple form.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_222"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecPolicyNotFound" title="errSecPolicyNotFound"></a><a name="//apple_ref/doc/c_ref/errSecPolicyNotFound" title="errSecPolicyNotFound"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW33" title="errSecPolicyNotFound"></a><code>errSecPolicyNotFound</code></td>
<td align="right" valign="top" class="content_text noWrap">–25241</td>

<td valign="top" class="content_text"><p>The policy specified cannot be found.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_223"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInvalidTrustSetting" title="errSecInvalidTrustSetting"></a><a name="//apple_ref/doc/c_ref/errSecInvalidTrustSetting" title="errSecInvalidTrustSetting"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW34" title="errSecInvalidTrustSetting"></a><code>errSecInvalidTrustSetting</code></td>
<td align="right" valign="top" class="content_text noWrap">–25242</td>

<td valign="top" class="content_text"><p>The trust setting is invalid.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_224"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecNoAccessForItem" title="errSecNoAccessForItem"></a><a name="//apple_ref/doc/c_ref/errSecNoAccessForItem" title="errSecNoAccessForItem"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW35" title="errSecNoAccessForItem"></a><code>errSecNoAccessForItem</code></td>
<td align="right" valign="top" class="content_text noWrap">–25243</td>

<td valign="top" class="content_text"><p>The specified item has no access control.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_225"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecInvalidOwnerEdit" title="errSecInvalidOwnerEdit"></a><a name="//apple_ref/doc/c_ref/errSecInvalidOwnerEdit" title="errSecInvalidOwnerEdit"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW36" title="errSecInvalidOwnerEdit"></a><code>errSecInvalidOwnerEdit</code></td>
<td align="right" valign="top" class="content_text noWrap">–25244</td>

<td valign="top" class="content_text"><p>An invalid attempt has been made to change the owner of an item.</p><p>Available in Mac OS X v10.2 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP30000157-CH4g-DontLinkElementID_226"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errSecTrustNotAvailable" title="errSecTrustNotAvailable"></a><a name="//apple_ref/doc/c_ref/errSecTrustNotAvailable" title="errSecTrustNotAvailable"></a><a name="//apple_ref/doc/uid/TP30000157-CH4g-SW37" title="errSecTrustNotAvailable"></a><code>errSecTrustNotAvailable</code></td>
<td align="right" valign="top" class="content_text noWrap">–25245</td>

<td valign="top" class="content_text"><p>No trust results are available.</p><p>Available in Mac OS X v10.3 and later.</p></td></tr>
</table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-11-19<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html%3Fid%3DTP30000157-4.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html%3Fid%3DTP30000157-4.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html%3Fid%3DTP30000157-4.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
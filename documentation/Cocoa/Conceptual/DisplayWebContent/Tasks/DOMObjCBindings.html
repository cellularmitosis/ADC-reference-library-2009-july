<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebKit Objective-C Programming Guide: Using the Document Object Model from Objective-C</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using the Document Object Model from Objective-C"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001206" title="Using the Document Object Model from Objective-C"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../InternetWeb-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000526" target="_top">Internet &amp; Web</a> &gt; <a href="../index.html" target="_top">WebKit Objective-C Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="UsingUndo.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="DOMExtensions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP30001206-BCIGCAIE" title="Using the Document Object Model from Objective-C"></a><hr /><H1>Using the Document Object Model from Objective-C</H1><p>The Document Object Model API implements the Level 2 Document Object Model (DOM) specification, developed by the World Wide Web Consortium. This specification provides a platform and language-neutral interface that allows programs and scripts to dynamically access and change the content, structure and style of a document —usually HTML or XML—by providing a structured set of objects that correspond to the document’s elements.</p><p>The intention of the DOM Objective-C API is to conform to—as close as technically possible—the W3C DOM specification. Therefore, standard Cocoa conventions such as method naming, argument titling, and exception handling may not be reflected in this API. Following a few conventions discussed in this article, you can derive the DOM Objective-C API from the specification. This article also discusses the differences between the DOM specification and DOM Objective-C API.</p><p>The WebKit extensions to the DOM specification are covered in <span class="content_text"><a href="DOMExtensions.html#//apple_ref/doc/uid/TP30001207-BBCJJHCH">“Using the Document Object Model Extensions.”</a></span> Refer to <em><a href="../../../../AppleApplications/Conceptual/SafariJSProgTopics/index.html#//apple_ref/doc/uid/TP40001483" target="_top">WebKit DOM Programming Topics</a></em> for more information on the DOM specification.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="DOMObjCBindings.html#//apple_ref/doc/uid/TP30001206-124858">Interpreting the DOM Specification</a>
				
			<br/>
			
        
			
			
				<a href="DOMObjCBindings.html#//apple_ref/doc/uid/TP30001206-132585">Handling Exceptions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001206-124858" title="Interpreting the DOM Specification"></a><h2>Interpreting the DOM Specification</h2><p>The DOM specification is written in Interface Definition Language (IDL) files available at the W3C web site. Links to them have been provided in the list that follows. The Objective-C DOM API is defined by header files in the WebKit framework, located at: <code>/System/Library/Frameworks/WebKit.framework</code>. Here is a list of the DOM specification’s IDL files and their associated Objective-C header files:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>W3C DOM IDL file</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>WebKit DOM header file</p></th></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Core/idl/dom.idl" target="_blank">dom.idl</a></span></p></td><td ><p><code>DOMCore.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Views/idl/views.idl" target="_blank">views.idl</a></span></p></td><td ><p><code>DOMViews.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Events/idl/events.idl" target="_blank">events.idl</a></span></p></td><td ><p><code>DOMEvents.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-HTML/idl/html2.idl" target="_blank">html2.idl</a></span></p></td><td ><p><code>DOMHTML.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Style/idl/stylesheets.idl" target="_blank">stylesheets.idl</a></span></p></td><td ><p><code>DOMStylesheets.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Style/idl/css.idl" target="_blank">css.idl</a></span></p></td><td ><p><code>DOMCSS.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Traversal-Range/idl/traversal.idl" target="_blank">traversal.idl</a></span></p></td><td ><p><code>DOMTraversal.h</code></p></td></tr><tr><td  scope="row"><p><span class="content_text"><a href="http://www.w3.org/TR/DOM-Level-2-Traversal-Range/idl/ranges.idl" target="_blank">ranges.idl</a></span></p></td><td ><p><code>DOMRange.h</code></p></td></tr></table></div><p>Two other header files are included in the Document Object Model API. <code>DOM.h</code> is a convenience header file that merely includes all of the other DOM header files. <code>DOMExtensions.h</code> defines additions that are not specified by the DOM specification. Use the extensions to help your DOM methods interact with the rest of the WebKit, and to use some of the WebKit’s higher abilities such as HTML editing. More information is available in the <span class="content_text"><a href="DOMExtensions.html#//apple_ref/doc/uid/TP30001207-BBCJJHCH">“Using the Document Object Model Extensions”</a></span> article.</p><p>The interfaces specified by the DOM IDL files are mapped to Objective-C classes. The names of interfaces are unchanged when the specification does not conflict with the namespaces of Objective-C, Java, or other common languages. For example, the <code>DOMImplementation</code> interface in the DOM Core IDL is reflected by the same name in the Objective-C <code>DOMCore</code> header file. Where namespaces conflict, the API prefixes the conflicting interface appropriately. For example, the DOM Core IDL’s <code>Node</code> interface appears as <code>DOMNode</code> in its Objective-C mapping. </p><p>This naming scheme also extends to constants. The API groups DOM constant lists into Objective-C <code>enum</code> types, and if a namespace conflict is present, the API prefixes them with an appropriate identifier. For example, the <code>ELEMENT_NODE</code> node type constant is reflected as <code>DOM_ELEMENT_NODE</code> in Objective-C.</p><p>Some names specified by the DOM specification may conflict with keywords or other reserved words in Objective-C. When this happens, they are given custom mappings and their Objective-C names must be inferred from the headers or from documentation. The API provides the custom mappings with appropriate names. For example, the two conflicting identifiers <code>id</code> and <code>name</code> (both Objective-C reserved words) are mapped to <code>idName</code> and <code>frameName</code>, respectively, and accurately reflect the intent of the specification.</p><p>Each Objective-C class derives, directly or indirectly, from the DOM root object <code>DOMObject</code>. This is an implementation detail that accommodates cross traffic between the WebKit and the DOM. The hierarchy of interfaces as defined by the W3C specification is also maintained. For example, <code>DOMDocument</code> extends from <code>DOMNode</code> in the specification as well as in the API.</p><p>Method names are mapped into Objective-C directly from the specification with no namespace transition. However, methods with multiple arguments in the DOM specification do not specify labels for their arguments—this behavior carries on into the Objective-C methods. For example, the specification declares this method prototype:</p><div class="codesample"><table><tr><td scope="row"><pre>Node insertBefore(in Node newChild, in Node refChild);<span></span></pre></td></tr></table></div><p>The Objective-C version is <em>not</em>, as you might expect, changed to something like:</p><div class="codesample"><table><tr><td scope="row"><pre>- (DOMNode *)insertNewChild:(DOMNode *)newChild<span></span></pre></td></tr><tr><td scope="row"><pre>                BeforeOld:(DOMNode *)refChild<span></span></pre></td></tr></table></div><p>The actual Objective-C prototype is:</p><div class="codesample"><table><tr><td scope="row"><pre>- (DOMNode *)insertBefore:(DOMNode *)newChild<span></span></pre></td></tr><tr><td scope="row"><pre>                        :(DOMNode *)refChild<span></span></pre></td></tr></table></div><p>As you can see, this varies from typical Cocoa method-naming conventions. This is done for an important reason—to match the Document Object Model specification as closely as possible. But if you are a Cocoa developer new to the DOM, you may find the naming scheme confusing.</p><p>The API maps other objects to their appropriate equivalents. For example, it maps <code>DOMString</code> objects to <code>NSString</code>. All other types (such as <code>void</code>, <code>boolean,</code><code>float</code>, and <code>unsigned long</code>) are mapped to their respective Objective-C types. Attributes which are both readable and writable are also given Cocoa-style get/set accessor methods. For example, the <code>DOMCore</code> IDL specifies this attribute:</p><div class="codesample"><table><tr><td scope="row"><pre>attribute DOMString nodeValue;<span></span></pre></td></tr></table></div><p>Objective-C accesses this attribute using these methods:</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSString *)nodeValue;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)setNodeValue:(NSString *)nodeValue;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30001206-132585" title="Handling Exceptions"></a><h2>Handling Exceptions</h2><p>The API also maps exceptions from the DOM specification to Objective-C. Methods that raise DOM exceptions also raise Objective-C exceptions (<code>NSException</code>), but because Objective-C exceptions are not part of a method interface as they are in the DOM specification, the exception class names are mapped to string constants. The main exception classes are raised as <code>DOMException</code>, <code>DOMEventException</code>, and <code>DOMRangeException</code>, and can alert you with any number of exception codes. See <code>DOMCore.h</code>, <code>DOMEvents.h</code>, and <code>DOMRange.h</code> for the codes.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="UsingUndo.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="DOMExtensions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/DOMObjCBindings.html%3Fid%3D10000164i-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/DOMObjCBindings.html%3Fid%3D10000164i-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/DOMObjCBindings.html%3Fid%3D10000164i-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

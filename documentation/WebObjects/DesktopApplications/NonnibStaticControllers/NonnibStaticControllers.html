<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Java Client Programming Guide (Legacy): Building Custom Controllers With XML</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Building Custom Controllers With XML"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001017-CH305" title="Building Custom Controllers With XML"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30001017-CH297-TP1">WebObjects Java Client Programming Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../NonDirectJavaClient/NonDirectJavaClient.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../InsideTheRuleSystem/InsideTheRuleSystem.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001017-CH305-TP1" title="Building Custom Controllers With XML"></a><h1>Building Custom Controllers With XML</h1><p>Direct to Java Client’s dynamic user-interface generation may not always provide all the kinds of user interfaces your applications require. As described in <span class="content_text"><a href="../NonDirectJavaClient/NonDirectJavaClient.html#//apple_ref/doc/uid/TP30001017-CH304-TP1">“Nondirect Java Client Development,”</a></span> you can use Interface Builder to build nondirect, static interfaces and use them within Direct to Java Client applications. Interface Builder generates a Java class file that contains Swing code. Although this saves you from writing Swing, it is not ideal.</p><p>When you use nib files, you need to provide a separate nib<a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_675"></a><a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_676"></a> file for each language and platform your application supports. So if your customers use both Windows and Mac OS X and require the application to be localized in French, German, and English, you need to build at least six nib files for every nib file your application uses. The maintenance burden should be obvious.</p><p>When you use controller classes, however, you need to write only a single version. Direct to Java Client dynamically provides localized and platform-specific versions of the controller when requested by the client. And when you need to write custom controllers for user interface elements that are not provided by Direct to Java Client, you need to write only minimal Swing code.</p><p>This chapter describes both how to write a custom controller class for a user interface element that isn’t provided by Direct to Java Client and also how to define user interfaces in XML using the provided controllers.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-TPXREF40">Custom Controller Class</a>
				
			<br/>
			
        
			
			
				<a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-BCFIEAHI">Use Controllers Rather Than Nib Files</a>
				
			<br/>
			
        
			
			
				<a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-TPXREF44">Retrieving Values From a Controller Hierarchy</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001017-CH305-TPXREF40" title="Custom Controller Class"></a><h2>Custom Controller Class</h2><a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_677"></a><a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_678"></a><p>When you run the JCRealEstatePhotos example, you may recognize a custom controller—the scroll view controller that displays photos of listings that are returned by a query. This controller is shown in <span class="content_text">Figure 8-1</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFFIJCB" title="Figure 8-1Scroll view controller with clickable images"></a><p><strong>Figure 8-1&nbsp;&nbsp;</strong>Scroll view controller with clickable images</p><img src = "../Art/scrollview.gif" alt = "Scroll view controller with clickable images" width="303" height="357"></div><br/><p>It was necessary to write a custom controller class to achieve this functionality because Direct to Java Client does not provide a scroll view controller whose contents are images. Direct to Java Client provides a number of prebuilt controller classes, but your applications may need to use specialized controllers that it doesn’t provide.</p><p>The custom scroll view controller requires you to do three things: write a Java class file that defines the controller in Swing, add a D2WComponent to the project that contains XML that references the custom controller, and register<a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_679"></a> a new task with the rule system that can be invoked to display the custom controller.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-TPXREF41" title="Java Swing Class"></a><h3>Java Swing Class</h3><p>Custom controller classes that are used to provide widget-level functionality to an application inherit from <code>com.webobjects.eogeneration.EOWidgetController</code>. All you need to do to provide a custom widget is to subclass that class and override the <code>newWidget</code> method, which returns a JComponent. The ScrollViewController class in the JCRealEstatePhotos example constructs and returns a JPanel that contains a JScrollPane that contains a number of JButton subclassed objects. See the class file in the example project.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-TPXREF42" title="XML Hierarchy"></a><h3>XML Hierarchy</h3><p>The ScrollViewController class is referenced in a D2WComponent’s XML description—that’s how it gets displayed. That XML description is quite simple, as shown in <span class="content_text">Listing 8-1</span>. The JCRealEstatePhotos example names this component ScrollViewComponent.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFDADGH" title="Listing 8-1Reference the custom controller in XML"></a><p class="codesample"><strong>Listing 8-1&nbsp;&nbsp;</strong>Reference the custom controller in XML</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;FRAMECONTROLLER reuseMode="never" horizontallyResizable="false"<span></span></pre></td></tr><tr><td scope="row"><pre>       verticallyResizable="true" label="Search Results" disposeIfDeactivated="true"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;CONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>         className="webobjectsexamples.realestatephotos.client.ScrollViewController"<span></span></pre></td></tr><tr><td scope="row"><pre>          horizontallyResizable="true" verticallyResizable="true" minimumHeight="300"<span></span></pre></td></tr><tr><td scope="row"><pre>          minimumWidth="300"/><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/FRAMECONTROLLER><span></span></pre></td></tr></table></div>	<p>The other controllers<a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_680"></a> in the XML description give you a lot of functionality for free. The <code>FRAMECONTROLLER</code> controller displays a JFrame, gives it a label, and specifies its resizing constraints. Likewise, the <code>CONTROLLER</code> controller references the custom controller class and adds it to the JFrame specified by the <code>FRAMECONTROLLER</code> controller, specifies its resizing constraints, and specifies its minimum dimensions. This is one of the great benefits of controllers—you can write user interfaces at a higher level than raw Swing.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-TPXREF43" title="The Rule"></a><h3>The Rule</h3><a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_681"></a><a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_682"></a><p>To actually display the custom controller, you need to invoke a particular task. So, you need to first register a new task with the rule system. The JCRealEstatePhotos example uses this rule to register a new task that displays the custom controller:</p><dl class="table-display"><dt>Left-Hand Side:</dt><dd><code>(task='scroll')</code></dd><dt>Key:</dt><dd><code>window</code></dd><dt>Value:</dt><dd><code>"ScrollViewComponent"</code></dd><dt>Priority:</dt><dd><code>50</code></dd></dl><p class="clear"></p><p>You can ask the controller factory to invoke the task with this call:</p><div class="codesample"><table><tr><td scope="row"><pre>EOControllerFactory.sharedControllerFactory().openWindowForTaskName("scroll");<span></span></pre></td></tr></table></div>	<p>That’s all you need to do to write and use static controllers that are not based on nib files in a Direct to Java Client application. Although writing your own controller hierarchies may not be fun, it’s the right way to build a static user interface for use in a Direct to Java Client application. You can use the Direct to Java Client Assistant to get clues on how to structure the XML hierarchy to get the user interface you want<a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_683"></a><a name="//apple_ref/doc/uid/TP30001017-CH305-DontLinkElementID_684"></a>. </p><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFIEAHI" title="Use Controllers Rather Than Nib Files"></a><h2>Use Controllers Rather Than Nib Files</h2><p>Building user interfaces in Interface Builder allows you to specify exactly the layout of a particular window. With that tool, you can specify exact widget sizes, the spacing between widgets, and other particular characteristics of a user interface. This is the advantage of using nib files: You have exact control over the look of a user interface.</p><p>However, you must weigh this advantage against the maintenance costs of using nib files. A good compromise between the precise user interface layout you can achieve in Interface Builder and dynamically generated user interfaces that you get for free from Direct to Java Client is to build up a user interface controller hierarchy by hand. While this does not afford you quite the same flexibility as using a nib file, you should able to achieve similar results.</p><p><span class="content_text">Figure 8-2</span> shows a user interface built in Interface Builder. A similar user interface built with a controller hierarchy appears in <span class="content_text">Figure 8-3</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFDDHIG" title="Figure 8-2Nib-based query window"></a><p><strong>Figure 8-2&nbsp;&nbsp;</strong>Nib-based query window</p><img src = "../Art/nibquery.gif" alt = "Nib-based query window" width="472" height="178"></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFCEBEI" title="Figure 8-3Controller-based query window"></a><p><strong>Figure 8-3&nbsp;&nbsp;</strong>Controller-based query window</p><img src = "../Art/controllerquery.gif" alt = "Controller-based query window" width="410" height="180"></div><br/><p>The controller hierarchy for the user interface in <span class="content_text">Figure 8-3</span> looks like <span class="content_text">Listing 8-2</span>.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFBDAGC" title="Listing 8-2Controller hierarchy for a user interface"></a><p class="codesample"><strong>Listing 8-2&nbsp;&nbsp;</strong>Controller hierarchy for a user interface</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;FRAMECONTROLLER horizontallyResizable="false" verticallyResizable="false" label="Search For Listings" minimumWidth="550"><span></span></pre></td></tr><tr><td scope="row"><pre> &lt;ACTIONBUTTONSCONTROLLER widgetPosition="TopRight"><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;CONTROLLER usesHorizontalLayout="false" verticallyResizable="false"<span></span></pre></td></tr><tr><td scope="row"><pre>     className="webobjectsexamples.realestatephotos.client.SearchController"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;BOXCONTROLLER borderType="Etched" usesTitledBorder="true" label="Search<span></span></pre></td></tr><tr><td scope="row"><pre>       Criteria" usesHorizontalLayout="true" horizontallyResizable="true"<span></span></pre></td></tr><tr><td scope="row"><pre>       verticallyResizable="false"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;BOXCONTROLLER usesTitledBorder="false" alignsComponents="true" borderType="None"<span></span></pre></td></tr><tr><td scope="row"><pre>        horizontallyResizable="true" verticallyResizable="false"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;TEXTFIELDCONTROLLER suppressesAssociation="true" label="Asking Price"<span></span></pre></td></tr><tr><td scope="row"><pre>         typeName="askingPrice input field" isQueryWidget="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;TEXTFIELDCONTROLLER suppressesAssociation="true" label="Year Built"<span></span></pre></td></tr><tr><td scope="row"><pre>         typeName="yearBuilt input field" isQueryWidget="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;TEXTFIELDCONTROLLER suppressesAssociation="true" label="Listing ID"<span></span></pre></td></tr><tr><td scope="row"><pre>         typeName="listingID input field" isQueryWidget="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>     &lt;/BOXCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>     &lt;COMPONENTCONTROLLER alignsComponents="true" horizontallyResizable="false"<span></span></pre></td></tr><tr><td scope="row"><pre>        verticallyResizable="false"><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;CONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>           className="webobjectsexamples.realestatephotos.client.ComboBoxController"<span></span></pre></td></tr><tr><td scope="row"><pre>           typeName="askingPrice combo box" minimumWidth="55" minimumHeight="22"/><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;CONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>           className="webobjectsexamples.realestatephotos.client.ComboBoxController"<span></span></pre></td></tr><tr><td scope="row"><pre>           typeName="yearBuilt combo box" minimumWidth="55" minimumHeight="22"/><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;/COMPONENTCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;BOXCONTROLLER usesTitledBorder="false" alignsComponents="true" borderType="None"<span></span></pre></td></tr><tr><td scope="row"><pre>         horizontallyResizable="true" verticallyResizable="false"><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;TEXTFIELDCONTROLLER suppressesAssociation="true" label="Square Feet"<span></span></pre></td></tr><tr><td scope="row"><pre>         typeName="squareFt input field" isQueryWidget="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;TEXTFIELDCONTROLLER suppressesAssociation="true" label="Bedrooms"<span></span></pre></td></tr><tr><td scope="row"><pre>          typeName="bedrooms input field" isQueryWidget="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;TEXTFIELDCONTROLLER suppressesAssociation="true" label="Bathrooms"<span></span></pre></td></tr><tr><td scope="row"><pre>          typeName="bathrooms input field" isQueryWidget="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;/BOXCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>         &lt;COMPONENTCONTROLLER alignsComponents="true" horizontallyResizable="false"<span></span></pre></td></tr><tr><td scope="row"><pre>            verticallyResizable="false"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;CONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>               className="webobjectsexamples.realestatephotos.client.ComboBoxController"<span></span></pre></td></tr><tr><td scope="row"><pre>               widgetPosition="Right" typeName="squareFt combo box" minimumWidth="55"<span></span></pre></td></tr><tr><td scope="row"><pre>               minimumHeight="22"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;CONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>               className="webobjectsexamples.realestatephotos.client.ComboBoxController"<span></span></pre></td></tr><tr><td scope="row"><pre>               widgetPosition="Right" typeName="bedrooms combo box" minimumWidth="55"<span></span></pre></td></tr><tr><td scope="row"><pre>               minimumHeight="22"/><span></span></pre></td></tr><tr><td scope="row"><pre>               &lt;CONTROLLER className="webobjectsexamples.realestatephotos.client.ComboBo<span></span></pre></td></tr><tr><td scope="row"><pre>              xController" widgetPosition="Right" typeName="bathrooms combo box"<span></span></pre></td></tr><tr><td scope="row"><pre>               minimumWidth="55" minimumHeight="22"/><span></span></pre></td></tr><tr><td scope="row"><pre>         &lt;/COMPONENTCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/BOXCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;CHECKBOXCONTROLLER alignment="Right" suppressesAssociation="true"<span></span></pre></td></tr><tr><td scope="row"><pre>          typeName="searchtype input checkbox" label="Find matching just some criteria"/><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/CONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/ACTIONBUTTONSCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/FRAMECONTROLLER><span></span></pre></td></tr></table></div>	<p>There are a few interesting things to point out in <span class="content_text">Listing 8-2</span>. Except for the window frame and button toolbar, the rest of the controllers are wrapped in a <code>CONTROLLER</code> tag whose class is <code>webobjectsexamples.realestatephotos.client.SearchController</code>. This class inherits from EOComponentController and is shown in <span class="content_text"><a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-BCFEHIIC">Listing 8-3</a></span>. It serves as the supercontroller for the controllers nested within it. A supercontroller has access to all the controllers nested within it, which allows you to retrieve information about those nested controllers and any data they contain (such as text users enter in a text field or the value of a checkbox).</p><p>Most of the controllers in <span class="content_text">Listing 8-2</span> include the attribute <code>suppressesAssociation="true"</code>. This tells the rule system that a particular controller is not associated with an enterprise object. Rather, that controller is just a user interface controller that is used to display a user interface widget and allows a user to enter data.</p><p>All the controllers in <span class="content_text">Listing 8-2</span> that accept user data include a <code>typeName</code> tag. This tag is used to identify each controller in the controller hierarchy so when you traverse the controller hierarchy looking for data, you can identify specific controllers.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-TPXREF44" title="Retrieving Values From a Controller Hierarchy"></a><h2>Retrieving Values From a Controller Hierarchy</h2><p>One of the tasks you need to perform when using a controller-based user interface is getting values the user enters. As discussed in <span class="content_text"><a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-BCFIEAHI">“Use Controllers Rather Than Nib Files”</a></span> and as implemented in <span class="content_text"><a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-BCFBDAGC">Listing 8-2</a></span>, by assigning controllers a value for the <code>typeName</code> attribute, you can traverse a given controller hierarchy and look up controllers based on that attribute.</p><p>The methods <code>valueFromInputField</code>, <code>valueFromCheckBox</code>, and <code>valueFromComboBox</code> in the SearchController class in <span class="content_text">Listing 8-3</span> accomplish this. Remember, SearchController is the supercontroller for the user interface elements in the controller hierarchy in <span class="content_text"><a href="NonnibStaticControllers.html#//apple_ref/doc/uid/TP30001017-CH305-BCFBDAGC">Listing 8-2</a></span>. From any supercontroller, you can traverse its subcontroller hierarchy to find certain controllers. This is what the <code>valueFrom</code> methods in <span class="content_text">Listing 8-3</span> do.</p><a name="//apple_ref/doc/uid/TP30001017-CH305-BCFEHIIC" title="Listing 8-3SearchController class"></a><p class="codesample"><strong>Listing 8-3&nbsp;&nbsp;</strong>SearchController class</p><div class="codesample"><table><tr><td scope="row"><pre>package webobjectsexamples.realestatephotos.client;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eoapplication.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eogeneration.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.swing.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.awt.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class SearchController extends EOComponentController {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public SearchController(EOXMLUnarchiver unarchiver) {<span></span></pre></td></tr><tr><td scope="row"><pre>        super(unarchiver);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    protected NSArray defaultActions() {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSMutableArray actions = new NSMutableArray();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        String title = EOUserInterfaceParameters.localizedString("Search");<span></span></pre></td></tr><tr><td scope="row"><pre>        String clearTitle = EOUserInterfaceParameters.localizedString("Clear");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        Icon icon = EOUserInterfaceParameters.localizedIcon("ActionIconFind");<span></span></pre></td></tr><tr><td scope="row"><pre>        actions.addObject(EOAction.actionForControllerHierarchy("search", title, title,<span></span></pre></td></tr><tr><td scope="row"><pre>         icon, null, null, 0, 0, false));<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        icon = EOUserInterfaceParameters.localizedIcon("ActionIconClear");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        actions.addObject(EOAction.actionForControllerHierarchy("clear", clearTitle,<span></span></pre></td></tr><tr><td scope="row"><pre>           clearTitle, icon, null, null, 0, 300, false));<span></span></pre></td></tr><tr><td scope="row"><pre>        return EOAction.mergedActions(actions, super.defaultActions());<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void search() {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        NSMutableDictionary valuesAndSuch = new NSMutableDictionary();<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromInputField("askingPrice"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "askingPriceValue");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromComboBox("askingPrice"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "askingPriceCompareBy");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromInputField("yearBuilt"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "yearBuiltValue");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromComboBox("yearBuilt"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "yearBuiltCompareBy");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromInputField("listingID"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "listingIDValue");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromInputField("squareFt"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "squareFtValue");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromComboBox("squareFt"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "squareFtCompareBy");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromInputField("bedrooms"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "bedroomsValue");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromComboBox("bedrooms"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "bedroomsCompareBy");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromInputField("bathrooms"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "bathroomsValue");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromComboBox("bathrooms"),<span></span></pre></td></tr><tr><td scope="row"><pre>           "bathroomsCompareBy");<span></span></pre></td></tr><tr><td scope="row"><pre>        valuesAndSuch.takeValueForKey(valueFromCheckBox("searchtype"), "searchtype");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        ImageSearch search = new ImageSearch(valuesAndSuch);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public String valueFromInputField(String identifier) {<span></span></pre></td></tr><tr><td scope="row"><pre>        EOWidgetController controller =<span></span></pre></td></tr><tr><td scope="row"><pre>          (EOWidgetController)(controllerWithKeyValuePair(EOController.SubcontrollersEnu<span></span></pre></td></tr><tr><td scope="row"><pre>         meration, null, "typeName", identifier + " input field"));<span></span></pre></td></tr><tr><td scope="row"><pre>        if (controller == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            throw new IllegalStateException("Can't find input checkbox controller for "             + identifier);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return (((JTextField)controller.widget()).getText());<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public String valueFromComboBox(String identifier) {<span></span></pre></td></tr><tr><td scope="row"><pre>        EOWidgetController controller =<span></span></pre></td></tr><tr><td scope="row"><pre>           (EOWidgetController)(controllerWithKeyValuePair(EOController.SubcontrollersEn<span></span></pre></td></tr><tr><td scope="row"><pre>           umeration, null, "typeName", identifier + " combo box"));<span></span></pre></td></tr><tr><td scope="row"><pre>        if (controller == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            throw new IllegalStateException("Can't find input checkbox controller for "<span></span></pre></td></tr><tr><td scope="row"><pre>              + identifier);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return (String)(((JComboBox)controller.widget()).getSelectedItem());<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public Boolean valueFromCheckBox(String identifier) {<span></span></pre></td></tr><tr><td scope="row"><pre>        EOWidgetController controller =<span></span></pre></td></tr><tr><td scope="row"><pre>          (EOWidgetController)(controllerWithKeyValuePair(EOController.SubcontrollersEnu<span></span></pre></td></tr><tr><td scope="row"><pre>         meration, null, "typeName", identifier + " input checkbox"));<span></span></pre></td></tr><tr><td scope="row"><pre>        if (controller == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            throw new IllegalStateException("Can't find input checkbox controller for "<span></span></pre></td></tr><tr><td scope="row"><pre>           + identifier);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return new Boolean(((JCheckBox)controller.widget()).isSelected());<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void clear() {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog.out.appendln("clearing in controller");<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	<p>The <code>search</code> method collects the search criteria as entered by the user, as well as the values of the combo boxes that control how the qualifier for a particular search criteria is constructed. It then passes these values in a dictionary to the ImageSearch class (not shown here), which actually performs the search.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../NonDirectJavaClient/NonDirectJavaClient.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../InsideTheRuleSystem/InsideTheRuleSystem.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/DesktopApplications/NonnibStaticControllers/NonnibStaticControllers.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/DesktopApplications/NonnibStaticControllers/NonnibStaticControllers.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/DesktopApplications/NonnibStaticControllers/NonnibStaticControllers.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
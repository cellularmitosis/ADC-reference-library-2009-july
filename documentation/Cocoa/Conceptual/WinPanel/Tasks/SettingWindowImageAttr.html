<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Window Programming Guide for Cocoa: Setting Attributes for the Window&acirc;&#128;&#153;s Image</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Setting Attributes for the Window&acirc;&#128;&#153;s Image"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000234" title="Setting Attributes for the Window&acirc;&#128;&#153;s Image"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../index.html" target="_top">Window Programming Guide for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="SettingWindowTitle.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="HandlingWindowEvents.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000234-BAJBDJCA" title="Setting Attributes for the Window&acirc;&#128;&#153;s Image"></a><hr /><H1>Setting Attributes for the Window’s Image</H1><p>Nearly every window has a corresponding display window device in the Window Server. The window device holds the window’s drawn image, and has two attributes determined by the Window Server and many attributes that the window controls. The Window Server assigns the window device a unique identifier (within an application). This is the <strong>window number</strong>, and it’s returned by the <code>windowNumber</code> method. Each window also has a <strong>graphics state</strong> that most <code>NSView</code> objects share for drawing (views can create their own as well). The <code>gState</code> method returns its identifier. The attributes under direct window control are:</p><ul class="ul"><li class="li"><p><strong>Backing store type</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-74467">“Setting How To Store the Window’s Image”</a></span></p></li><li class="li"><p><strong>Backing location</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-SW1">“Specifying Where To Store the Window’s Image”</a></span></p></li><li class="li"><p><strong>Window device creation</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-74108">“Setting When the Window’s Image is Created”</a></span></p></li><li class="li"><p><strong>One shot</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-111120">“Setting Whether the Window’s Image Persists When Off-Screen”</a></span></p></li><li class="li"><p><strong>Depth limit</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-111136">“Setting the Depth Limit for the Window’s Image”</a></span></p></li><li class="li"><p><strong>Dynamic depth limit</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-74296">“Setting Whether the Depth Limit Changes to the Screen’s Capacity”</a></span></p></li><li class="li"><p><strong>Content sharing</strong>, described in <span class="content_text"><a href="SettingWindowImageAttr.html#//apple_ref/doc/uid/20000234-SW2">“Specifying Whether Window Content Can Be Read or Written by Another Process.”</a></span></p></li></ul><a name="//apple_ref/doc/uid/20000234-74467" title="Specifying How To Store the Window&acirc;&#128;&#153;s Image"></a><a name="//apple_ref/doc/uid/20000234-74467-IEADGCJJ" title="Specifying How To Store the Window&acirc;&#128;&#153;s Image"></a><h2>Specifying How To Store the Window’s Image</h2><p>A window device’s <strong>backing store</strong> type determines how the window’s image is stored. It’s set when the window is initialized and can be one of three types. </p><p>A <strong>buffered window</strong> device renders all drawing into a display buffer and then flushes it to the screen. Always drawing to the buffer produces very smooth display, but can require significant amounts of memory. Buffered windows are best for displaying material that must be redrawn often, such as text. You must also use buffered windows if you want your windows to support transparency.</p><p>A <strong>retained window</strong> device also uses a buffer, but draws directly to the screen where possible and to the buffer for any portions that are obscured.</p><p>A <strong>nonretained window</strong> device has no buffer at all, and must redraw portions as they’re exposed. Further, this redrawing is suspended when the window’s display mechanism is preempted. For example, if the user drags a window across a nonretained window, the nonretained window is “erased” and isn’t redrawn until the user releases the mouse.</p><p>Both retained and nonretained windows are also subject to a flashing effect as individual drawing operations are performed, but their results do get to the screen more quickly than those of buffered windows. </p><p>You can change the backing store type between buffered and retained after initialization using the <code>setBackingType:</code> method.</p><a name="//apple_ref/doc/uid/20000234-SW1" title="Specifying Where To Store the Window&acirc;&#128;&#153;s Image"></a><h2>Specifying Where To Store the Window’s Image</h2><p>The Window Server chooses where to place the backing store for a buffered window, either in main memory or stored directly in video memory. It will choose the location that provides the best overall performance. You can query the Window Server to determine where your window’s backing store is located using the <code>backingLocation:</code> method.</p><p>You may choose to set a preferred location for a Window’s backing store using the <code>setPreferredBackingLocation:</code> method. While the Window Server is not required to respect this preferred backing location, it will attempt to do so. You should not change the preferred backing location without testing how it affects the performance of your application.</p><a name="//apple_ref/doc/uid/20000234-74108" title="Specifying When the Window&acirc;&#128;&#153;s Image Is Created"></a><a name="//apple_ref/doc/uid/20000234-74108-IEACHBCA" title="Specifying When the Window&acirc;&#128;&#153;s Image Is Created"></a><h2>Specifying When the Window’s Image Is Created</h2><p>The <code>defer</code> argument to the initializer specifies whether the window creates its window device immediately or only when it’s moved on screen. Deferring creation of the window device can offer some performance gain for windows that aren’t displayed immediately because it reduces the amount of work that needs to be performed up front. Deferring creation of the window device is particularly useful when creation of the window itself can’t be deferred or when an window is needed for purposes other than displaying content. Submenus with key equivalents, for example, must exist for the key equivalents to work, but may never actually be displayed.</p><a name="//apple_ref/doc/uid/20000234-111120" title="Specifying Whether the Window&acirc;&#128;&#153;s Image Persists When Offscreen"></a><a name="//apple_ref/doc/uid/20000234-111120-IEACIAEE" title="Specifying Whether the Window&acirc;&#128;&#153;s Image Persists When Offscreen"></a><h2>Specifying Whether the Window’s Image Persists When Offscreen</h2><p>Memory can also be saved by destroying the window device when the window is removed from the screen. The <code>setOneShot:</code> method controls this behavior. One-shot window devices exist only when their windows are onscreen.</p><a name="//apple_ref/doc/uid/20000234-111136" title="Specifying the Depth Limit for the Window&acirc;&#128;&#153;s Image"></a><a name="//apple_ref/doc/uid/20000234-111136-IEABCIAD" title="Specifying the Depth Limit for the Window&acirc;&#128;&#153;s Image"></a><h2>Specifying the Depth Limit for the Window’s Image</h2><p>Like the display hardware, a window device’s buffer has a depth, or a limit to the memory allotted each pixel. Buffered and retained windows start out with the same depth as the main display or 16 bits, whichever is deeper. These settings stay in effect unless changed using the <code>setDepthLimit:</code> method, which takes as an argument a window depth limit created using the <code>NSBestDepth</code> function.</p><a name="//apple_ref/doc/uid/20000234-74296" title="Specifying Whether the Depth Limit Changes to the Screen&acirc;&#128;&#153;s Capacity"></a><a name="//apple_ref/doc/uid/20000234-74296-IEACBBIJ" title="Specifying Whether the Depth Limit Changes to the Screen&acirc;&#128;&#153;s Capacity"></a><h2>Specifying Whether the Depth Limit Changes to the Screen’s Capacity</h2><p>Keeping a window’s depth at its richest preserves the displayed image, but may incur unnecessary memory overhead when the window buffer depth is deeper than the screen depth. You can use the <code>setDynamicDepthLimit:</code> method to tell a window to match the depth of the screen it’s on. When it’s moved to a new screen, a window with a dynamic depth limit adjusts its buffer to the new depth before redrawing. Making a window’s depth limit dynamic overrides the limit set using <code>setDepthLimit:</code>, and removing the dynamic limit reverts the window to the default limit.</p><a name="//apple_ref/doc/uid/20000234-SW2" title="Specifying Whether Window Content Can Be Read or Written by Another Process"></a><h2>Specifying Whether Window Content Can Be Read or Written by Another Process</h2><p>The contents of your window can be made available to other processes. By default the contents of your window can be read, but not written to by other processes. This allows system services to work with your window’s contents and also allows other applications to capture a snapshot of your windows contents.</p><p>You can override the default behavior using the <code>setSharingType:</code> method. Changing the sharing type to <code>NSWindowSharingNone</code> prevents other systems from capturing your window’s image data. However your window will also not be able to participate in a number of system services, so this setting should be used with caution. If you set your window sharing type to <code>NSWindowSharingReadWrite</code>, other processes can both read and modify the window’s content.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="SettingWindowTitle.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="HandlingWindowEvents.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/WinPanel/Tasks/SettingWindowImageAttr.html%3Fid%3D10000031i-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/WinPanel/Tasks/SettingWindowImageAttr.html%3Fid%3D10000031i-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/WinPanel/Tasks/SettingWindowImageAttr.html%3Fid%3D10000031i-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Identity Services Programming Guide: Identity Services Overview</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Identity Services Overview"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004490-CH3" title="Identity Services Overview"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000429" target="_top">Networking</a> &gt; <a href="../../../CoreFoundation-date.html#//apple_ref/doc/uid/TP30000440-TP30000429-TP30000444" target="_top">Core Foundation</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40004490-CH1-DontLinkElementID_19">Identity Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../identitypicker/identitypicker.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40004490-CH3-SW2" title="Identity Services Overview"></a><h1>Identity Services Overview</h1><p>To use the Identity Services APIs, it is important to know how identities work, and how they can be used. The following chapter describes the different types of identities and explains how to use them in Mac OS X. It also explains the APIs available for using identities in your applications.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="architecture.html#//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_6">What Is an Identity?</a>
				
			<br/>
			
        
			
			
				<a href="architecture.html#//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_7">Access Control Lists</a>
				
			<br/>
			
        
			
			
				<a href="architecture.html#//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_8">Types of Identities</a>
				
			<br/>
			
        
			
			
				<a href="architecture.html#//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_9">API Architecture</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_6" title="What Is an Identity?"></a><h2>What Is an Identity?</h2><p>When most people think about a user account, they think about a home directory. However, a user account is much more complicated than that.</p><p>A user account, or <strong>user</strong>, works in a similar manner to a debit card. You normally think of your debit card as a method to purchase items. When you go to a store, you find what you want to buy and hand it to the cashier along with your debit card. The cashier scans the card, and makes sure your PIN number matches what the bank has on file. Assuming it does, you receive your items and walk out.</p><p>A user account on a computer works in a similar fashion. When you log into the computer, the computer asks for a user name and password. The user name is like the debit card number, it specifies who you are. The password is like your PIN number, because it proves you are who you say you are. After you’re approved, the computer can give you access to your files.</p><p>But what is really happening when you use your debit card? When the cashier scans the card, the debit card number is sent to the bank. The bank has information about you, such as your name, birthday, social security number, and balance. The bank then tells the cashier whether the card is valid, so he knows if you can buy the item. The basis of the account is really the information stored on the computers at your bank, not the card itself.</p><p>In much the same way, a user is defined by its <strong>identity</strong>, which is a record that contains information about the user. Each identity is stored in a trusted directory known as an <strong>identity authority</strong>. Your user name is sent to the identity authority and your record is found. Then, if your password matches that on the record, you can get access to any file that your identity has access to.</p><p>Each identity contains the following required attributes:</p><ul class="ul"><li class="li"><p>A universally unique identifier (UUID)</p></li><li class="li"><p>A full name (must be unique throughout the system)</p></li><li class="li"><p>A POSIX ID (UID for a user, GID for a group)</p></li><li class="li"><p>A systemwide unique name (POSIX name)</p></li></ul><p>Additionally, identities can contain the following optional attributes:</p><ul class="ul"><li class="li"><p>A home directory (only for users)</p></li><li class="li"><p>Alternate names, known as aliases</p></li><li class="li"><p>An email address</p></li><li class="li"><p>An image</p></li></ul><p>You can edit these attributes using the Accounts preference pane in System Preferences by Control-clicking on the user. See <span class="content_text">Figure 1-1</span>.</p><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_21" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;Use extreme caution when changing account attributes, as the changes might damage the account.</p><p></p><div class="clear"></div></div><br/><div><a name="//apple_ref/doc/uid/TP40004490-CH3-SW4" title="Figure 1-1Advanced user options"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Advanced user options</p><img src = "../Art/advanced_options.jpg" alt = "" ></div><br/><a name="//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_7" title="Access Control Lists"></a><h2>Access Control Lists</h2><p>Fundamentally, identities are used to control who has access to files and services. If you view the Get Info panel on a file in the Finder, you’ve seen the Ownership and Permissions section (<span class="content_text">Figure 1-2</span>). This section displays what access users and groups have to the file or folder. These permissions (no access, read only, or read and write) are stored in an <strong>access control list</strong> (ACL). Every single folder and file on your computer has an associated ACL. Thus you can create very specific, customized access permissions for the files on your computer.</p><br/><div><a name="//apple_ref/doc/uid/TP40004490-CH3-SW5" title="Figure 1-2Ownership and permissions panel"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>Ownership and permissions panel</p><img src = "../Art/spotlight.jpg" alt = "" ></div><br/><p>Each sharing service (for example, SSH or AFP) on your computer also has an ACL. An ACL associated with a service is referred to as a <strong>service access control list</strong>, or SACL. The ability to create and customize ACLs and SACLs with users and groups helps make very secure, very adjustable applications.</p><a name="//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_8" title="Types of Identities"></a><h2>Types of Identities</h2><p>An identity can represent either a user or group:</p><p>A <strong>user</strong> is an identity that has <strong>authentication credentials</strong>. There are two forms of credentials: a traditional password, and a certificate. A user can be added to ACLs to access files or services. There are four different types of users: administrators, standard, child, and sharing. The list of user types and their features is available in <span class="content_text">Figure 1-3</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40004490-CH3-SW6" title="Figure 1-3User properties"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>User properties</p><img src = "../Art/users.jpg" alt = "" ></div><br/><p>A <strong>group</strong> is an identity that has other identities as members. Groups can be added to ACLs and provide a powerful way to manage permissions. A group can contain an unlimited number of members.</p><a name="//apple_ref/doc/uid/TP40004490-CH3-DontLinkElementID_9" title="API Architecture"></a><h2>API Architecture</h2><p>There are two levels to the Identity Services APIs: the C-based Core Services Identity API and the Objective-C-based Collaboration framework. The Core Services Identity API is comprised of three Core Foundation-based objects that allow you to create, manipulate, and remove users and groups: an identity object, an identity query object, and an identity authority object. The Collaboration framework is a set of wrapper classes for the Core Services Identity API objects. Additionally, it provides user interface support for applications.</p><p>An <strong>identity object</strong> (<code>CSIdentity</code>) represents an identity in an identity authority and contains the attributes of that user or group. The required attributes are a full name, a POSIX name, a UUID, and a POSIX ID. Of these attributes, the POSIX name, the UUID and the POSIX ID can all be autogenerated by the API. User identities also include authentication information (password and/or certificate), and group identities have a list of members. These attributes can be set and retrieved using the appropriate methods, and the user or group represented by the identity object can be stored in the identity’s authority database using a commit method. Each instantiation of the identity class represents one user or group. Identity objects are not limited to sharing users but can also be used to access standard users.</p><p>An <strong>identity query</strong> object (<code>CSIdentityQuery</code>) allows an application to search an identity authority database for users and groups and monitor them for changes. It provides methods for searching for identities by name, UUID, POSIX ID, reference data, or current user. In addition, an identity query object can register to be notified for changes to an identity. For example, if you have an identity object that represents a group, you can use an identity query object to notify you when the group membership changes.</p><p>An <strong>identity authority object </strong> (<code>CSIdentityAuthority</code>) represents a repository of identities. Every Mac OS X system contains a local identity authority that stores the identities local to the system. When you first create a user on a brand new Mac OS X system, the user identity is stored in the local identity authority. An identity authority can also exist on a network directory server. An identity authority object can represent either the local authority, the network-bound authorities, or both.</p><p>For a visual representation of how <code>CSIdentity</code> objects and <code>CSIdentityQuery</code> objects interact with an identity authority, see <span class="content_text">Figure 1-4</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40004490-CH3-SW3" title="Figure 1-4Identity class interaction"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>Identity class interaction</p><img src = "../Art/identity_class_interaction.jpg" alt = "" ></div><br/><p>The Collaboration framework allows you to access identities with Objective-C APIs. It also houses the the Identity Picker user interface element. The <code>CBIdentity</code> and <code>CBIdentityAuthority</code> APIs provide the read-only access to attributes of the <code>CSIdentity</code> and <code>CSIdentityAuthority</code> objects.</p><p>The Collaboration framework also has methods to convert between the <code>CSIdentity</code> objects and <code>CBIdentity</code> objects. If you have a <code>CSIdentity</code> object and want to use it in Cocoa, use the <code>identityWithCSIdentity:</code> class factory method to create a <code>CBIdentity</code> object from the same identity. Similarly, if you have a <code>CBIdentity</code> object and want to use it in C, use the <code>CSIdentity</code> method on the identity object to return a <code>CSIdentity</code> object from the same identity.</p><p>The Identity Picker’s relationship with Identity Services is analogous to the People Picker’s relationship with the Address Book. Just as the People Picker is a user interface element for selecting a person from the Address Book, the Identity Picker is a user interface element for selecting identities. The Identity Picker is a sheet or a modal dialog that allows someone to select users on the system and promote Address Book entries to sharing users. It is managed by a <code>CBIdentityPicker</code> object. More information about the Identity Picker is available in <span class="content_text"><a href="../identitypicker/identitypicker.html#//apple_ref/doc/uid/TP40004490-CH5-SW4">“Using the Identity Picker.”</a></span> The class hierarchy of the Collaboration framework can be seen in <span class="content_text">Figure 1-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40004490-CH3-SW1" title="Figure 1-5Identity Services class hierarchy"></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>Identity Services class hierarchy</p><img src = "../Art/collaboration_hierarchy.jpg" alt = "" ></div><br/><p>With a strong understanding of the structure of identities, you’ll find the APIs much easier to use, and more powerful.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../identitypicker/identitypicker.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Networking/Conceptual/IdentityServices_ProgGuide/architecture/architecture.html%3Fid%3DTP40004490-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Networking/Conceptual/IdentityServices_ProgGuide/architecture/architecture.html%3Fid%3DTP40004490-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Networking/Conceptual/IdentityServices_ProgGuide/architecture/architecture.html%3Fid%3DTP40004490-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
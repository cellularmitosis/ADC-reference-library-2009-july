<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Deployment Guide Using JavaMonitor: Deployment Tasks</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Deployment Tasks"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000064" title="Deployment Tasks"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../MacOSXServer/index.html#//apple_ref/doc/uid/TP30000440-TP30000426" target="_top">Mac OS X Server</a> &gt; <a href="../../../../MacOSXServer/WebObjects-date.html#//apple_ref/doc/uid/TP30000440-TP30000426-TP30000592" target="_top">WebObjects</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30000059-TPXREF101">WebObjects Deployment Guide Using JavaMonitor</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../DeploymentElements/DeploymentElements.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Administration/Administration.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000064-TPXREF101" title="Deployment Tasks"></a><h1>Deployment Tasks</h1><p>Now that you are acquainted with the deployment tools of WebObjects, you are ready to put that knowledge to work by deploying your applications.</p><p>This chapter explains how JavaMonitor allows you to perform most of the tasks required to maintain a WebObjects application site with point-and-click ease. The sections below guide you through the process of adding and configuring hosts, applications, and application instances. Also explained is the load-balancing mechanism used by the HTTP adaptor, which performs load balancing among the instances of an application (which can be distributed across more than one host) and how to set up email notifications so that you and your colleagues are notified when problems arise.</p><p>This chapter addresses the following subjects:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF110">“Setting Up Hosts”</a></span> explains how you add and configure hosts for application deployment. Note that this is different from configuring hosts in the HTTP adaptor.</p></li><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIDIIDD">“Installing Applications”</a></span> shows you where to place application files and web server resources on an application host before deploying an application.</p></li><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF113">“Setting Up Applications”</a></span> details the ways you can customize a deployment. These include choosing a load-balancing algorithm and scheduling instances to restart at regular intervals.</p></li><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIEHJEH">“Configuring Sites”</a></span> describes the site-wide properties available.  These include configuring JavaMonitor to use your SMTP (Simple Mail Transfer Protocol) server to send email notifications.</p></li><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIFFJGB">“Setting JavaMonitor Preferences”</a></span> shows you the JavaMonitor-specific settings you can use to tailor the tool’s behavior.</p></li><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIIIBEB">“Load Balancing”</a></span> explains how load balancing distributes user load among the running instances of an application in your site.</p></li><li class="li"><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIFHCBB">“Deploying Multiple Sites”</a></span> shows how you can maintain multiple sites on one set of computers.</p></li></ul><a name="//apple_ref/doc/uid/TP30000064-TPXREF110" title="Setting Up Hosts"></a><h2>Setting Up Hosts</h2><p>An application host<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_136"></a> is a computer that runs application instances. For JavaMonitor to be able to identify a host<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_137"></a>, the host has to be running a wotaskd<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_138"></a> process. In addition, JavaMonitor itself has to run on a registered host. That is, after launching JavaMonitor for the first time, you must add the computer it’s running on as an application host, as described in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF111">“Adding a Host.”</a></span></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;Computers running Mac OS X Server are initially set up so that they go to sleep after a period of inactivity. WebObjects does not operate reliably on a computer that’s asleep. Make sure to disable idle sleep on computers on which you intend to deploy WebObjects applications.</p></div><a name="//apple_ref/doc/uid/TP30000064-TPXREF111" title="Adding a Host"></a><h3>Adding a Host</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_139"></a>Before you can deploy applications, you need to tell JavaMonitor which hosts you want to use for deployment. (See <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIIIBEB">“Load Balancing”</a></span> for additional information regarding load balancing and hosts added in JavaMonitor.) <span class="content_text">Figure 5-1</span> shows JavaMonitor’s Hosts page, which you use to add and configure hosts.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIEJAJI" title="Figure 5-1The Hosts page"></a><p><strong>Figure 5-1&nbsp;&nbsp;</strong>The Hosts page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_140"></a><img src = "../Art/hostadd.gif" alt = "The Hosts page" width="486" height="269"></div><br/><p>Follow these steps to add an application host to a deployment:</p><ol class="ol"><li class="li"><p>In JavaMonitor, click the Hosts tab.</p></li><li class="li"><p>Enter the name or IP address of the host you want to add in the host text input field.</p><p>The computer must be running a wotaskd process in the port that JavaMonitor sends its lifebeats to.</p><p>Avoid using a <strong>loopback</strong> address (a connection that does not go over the network), such as <code>localhost</code> or <code>127.0.0.1</code>. If you do, it must be the only application host in your site.</p></li><li class="li"><p>Choose the appropriate platform from the pop-up menu.</p></li><li class="li"><p>Click Add Host.</p></li></ol><p><span class="content_text">Figure 5-2</span> shows the Hosts page after a host has been added.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIEBIFH" title="Figure 5-2Newly added host in JavaMonitor"></a><p><strong>Figure 5-2&nbsp;&nbsp;</strong>Newly added host in JavaMonitor</p><img src = "../Art/hostadd2.gif" alt = "Newly added host in Monitor" width="489" height="292"></div><br/><a name="//apple_ref/doc/uid/TP30000064-TPXREF112" title="Configuring a Host"></a><h3>Configuring a Host</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_141"></a>To change the configuration of an application host, click the Config button on the Hosts page. A page similar to the one in <span class="content_text">Figure 5-3</span> appears. It allows you to set the type of the host and to resynchronize configuration information if needed.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIGEACJ" title="Figure 5-3Host configuration page"></a><p><strong>Figure 5-3&nbsp;&nbsp;</strong>Host configuration page</p><img src = "../Art/hostconfigure.gif" alt = "Host configuration page" width="414" height="309"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BCIEDJCG" title="Viewing a Host&acirc;&#128;&#153;s Configuration"></a><h3>Viewing a Host’s Configuration</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_142"></a>To display the configuration of a host, click YES, on the Hosts page. A page similar to the one in <span class="content_text">Figure 5-4</span> is displayed in a separate web browser window.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIGBDCH" title="Figure 5-4Host configuration information page"></a><p><strong>Figure 5-4&nbsp;&nbsp;</strong>Host configuration information page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_143"></a><img src = "../Art/monwotaskdconfig.gif" alt = "Host configuration information page" width="496" height="335"></div><br/><p>This page displays the current state of the host<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_144"></a> in several sections.</p><p>The section visible in <span class="content_text">Figure 5-4</span> shows the contents of the host’s <code>SiteConfig.xml</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_145"></a> file. For more information on the <code>SiteConfig.xml</code> file, see <span class="content_text"><a href="../DeploymentElements/DeploymentElements.html#//apple_ref/doc/uid/TP30000063-BCIIEDEF">“Configuration Files.”</a></span></p><p>The next section shows the adaptor configuration sent to local HTTP adaptors, which lists all running application instances that wotaskd<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_146"></a> knows about (this includes JavaMonitor processes).</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="ASCII"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;adaptor><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;application name="JavaMonitor"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;instance id="-8888" port="8888" host="ebruce2.apple.com"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/application><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/adaptor><span></span></pre></td></tr></table></div><p>Note that the instance ID<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_147"></a> of the JavaMonitor process is negative. When wotaskd receives a lifebeat from an unregistered application instance<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_148"></a> (one that has not been added to your site through JavaMonitor), it discloses the instance to the web server with a negative ID number. This allows developers (internal users) to connect to development instances<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_149"></a> through the HTTP adaptor for testing purposes. To address security<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_150"></a> concerns, external users can connect to instances with negative ID numbers only if they know the instance’s port number. However, this can be disabled by setting <code>WODirectConnectEnabled</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_151"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_152"></a> to <code>false</code>. See <code>WODirectConnectEnabled</code> in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em> for details.</p><p>To connect to a development instance through the web server, the instance must run on the same computer that the web server<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_153"></a> runs on, and the computer must be the <code>localhost</code>.</p><p>Next is the local adaptor configuration sent to remote HTTP adaptors. This section lists all instances that are active, registered<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_154"></a> (configured through JavaMonitor), and available to external users.</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="ASCII"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;adaptor><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;application name="Payroll" urlVersion="4"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;instance id="1" port="2001" host="ebruce.apple.com"/><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;/application><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;application name="HR" urlVersion="4"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;instance id="1" port="2002" host="ebruce.apple.com"/><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;/application><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/adaptor><span></span></pre></td></tr></table></div><p>The next section shows the contents of the HTTP adaptor configuration file<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_155"></a>. If you tell wotaskd<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_156"></a> to write the HTTP adaptor configuration file, it lists all the registered application instances on the site, whether they are running or not. (This file is identical across all the site’s application hosts.) See <span class="content_text"><a href="../WebObjectsAdaptors/WebObjectsAdaptors.html#//apple_ref/doc/uid/TP30000062-BBCHBGFJ">“The HTTP Adaptor Configuration File”</a></span> for more information and an example of the file’s contents.</p><p>The last section lists information on the wotaskd process’s environment<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_157"></a>, including its port and multicast address.</p><div class="codesample"><table><tr><td scope="row"><pre>The Configuration Directory is: /Library/WebObjects/Configuration/<span></span></pre></td></tr><tr><td scope="row"><pre>Wotaskd is NOT writing WOConfig.xml to disk<span></span></pre></td></tr><tr><td scope="row"><pre>The multicast address is: 239.128.14.2<span></span></pre></td></tr><tr><td scope="row"><pre>This wotaskd is running on Port: 1085<span></span></pre></td></tr><tr><td scope="row"><pre>Wotaskd is NOT responding to Multicast<span></span></pre></td></tr><tr><td scope="row"><pre>WOAssumeApplicationIsDeadMultiplier is 4<span></span></pre></td></tr><tr><td scope="row"><pre>The System Properties are: ...<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000064-BCIDIIDD" title="Installing Applications"></a><h2>Installing Applications</h2><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_158"></a>Before you can deploy applications on your site, you have to install them on the hosts on which you want to run instances of them. Most applications have files of two types:</p><ul class="ul"><li class="li"><p><strong>application files<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_159"></a>,</strong> which store the application’s logic</p></li><li class="li"><p><strong>Web server resources<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_160"></a>,</strong> which store resources that can be shared among applications</p></li></ul> <p>You can use either Xcode or the Ant build system to install an application on a host. Using these tools, you create an application bundle, also known as the WOA bundle, containing all the files the application needs to run. However, most web applications contain web server resources, such as images. You should place these resources in the web server’s <code>Document Root</code> directory. You do this that by performing a split installation.</p><p>In a split installation, a directory containing an application’s web server resources is placed in the web server’s <code>Document Root</code> directory. This directory mirrors the WOA bundle’s organization, but it contains only web server resources. You can place the WOA bundle anywhere you like, preferably a location inaccessible to the outside world.</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_3" title="Building for Deployment with Xcode"></a><h3>Building for Deployment with Xcode</h3><p>To perform a split installation of your application using Xcode 2.1 or later, navigate to your project’s directory and execute the following commands as the <code>root</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_161"></a> user using your shell editor:<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_162"></a></p><div class="codesample"><table><tr><td scope="row"><pre>xcodebuild install -configuration Deployment DSTROOT=/<span></span></pre></td></tr><tr><td scope="row"><pre>xcodebuild install -configuration WebServer DSTROOT=/<span></span></pre></td></tr></table></div><p>To perform a split installation of your application using Xcode 2.0 or earlier, navigate to your project’s directory and execute the following commands as the <code>root</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_163"></a> user using your shell editor:<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_164"></a></p><div class="codesample"><table><tr><td scope="row"><pre>xcodebuild install -buildstyle Deployment DSTROOT=/<span></span></pre></td></tr><tr><td scope="row"><pre>xcodebuild install -buildstyle WebServer DSTROOT=/<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_4" title="Building for Deployment with Ant"></a><h3>Building for Deployment with Ant</h3><p>Starting with WebObjects 5.4 and later, Xcode no longer supports building for deployment for new WebObjects applications based on the Ant build system. As an alternative, you can use the Java Ant build tool to do a split installation.</p><p>The steps to build for deployment described below apply to a WebObjects example project. You can find the WebObjects examples in the <code>/Developer/Examples/JavaWebObjects</code> directory.</p><p>To perform a split installation of your application using the WebObjects Ant build system, navigate to your project’s directory and execute the following commands while logged in as the <code>root</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_165"></a> user from a shell:<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_166"></a></p><p><code>ant deployment</code></p><p>This command places the application files in the <code>/Library/WebObjects/Applications</code> directory and the web server resources in the <code>Document Root/WebObjects</code> directory. </p><p>The WebObjects Ant build system provides three types of application bundles in the <code>dist</code> directory of your project folder:  </p><ul class="spaceabove"><li class="li"><p>The legacy WOA application bundle</p><p>This is the traditional WebObjects WOA or Framework bundle.</p></li><li class="li"><p>The self-contained WOA application bundle</p><p>This self-contained WOA bundle embeds all dependent framework Jar files and resources within the bundle. The class path is configured to look for the internal bundled classes instead of the installed ones. It is generally recommended that you use a self-contained WOA bundle for deployment to keep the WebObjects application running even when the WebObjects runtime on the deployment machine is upgraded to a different version.</p></li><li class="li"><p>A J2EE-style war bundle with an embedded WebObjects application</p></li></ul><p>After producing a split installation on the development computer, copy the WOA bundle and the application’s resources to their final destination (or destinations, in case you want to run instances of the application in several computers) and use JavaMonitor to configure the deployment.</p><p>You can place application files in any directory of the application host. Web server resources, however, must be placed in the <code>Document Root</code> directory of the application host. Make sure that you use the following organization:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;Web server Document Root>/<span></span></pre></td></tr><tr><td scope="row"><pre>    WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>        AppName.woa/<span></span></pre></td></tr><tr><td scope="row"><pre>            Contents/<span></span></pre></td></tr><tr><td scope="row"><pre>                WebServerResources/<span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;resource files><span></span></pre></td></tr></table></div><p>In most situations you should deploy an application’s logic and resources on different computers. For example, while developing an application on Mac OS X, you can test it with the web server included with the system. However, you should not deploy the application in Mac OS X. Always deploy WebObjects applications on Mac OS X Server.</p><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_16" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;Never remove the <code>WebServerResources</code> directory that is generated as part of the application bundle.</p><p></p><div class="clear"></div></div><a name="//apple_ref/doc/uid/TP30000064-TPXREF113" title="Setting Up Applications"></a><h2>Setting Up Applications</h2><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_167"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_168"></a>To deploy an application on your site, it must be installed in the appropriate directories on the hosts that run instances of it. For more information, see <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIDIIDD">“Installing Applications.”</a></span></p><p>Setting up an application in your site involves three main steps:</p><ul class="ul"><li class="li"><p><strong>Adding the application,</strong> which is described in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF114">“Adding an Application.”</a></span></p></li><li class="li"><p><strong>Configuring the application</strong>, which includes the following subtasks:</p><ul class="nested"><li class="nested li"><p>defining a default configuration for new instances of the application</p></li><li class="nested li"><p>defining the recipients of email notifications</p></li><li class="nested li"><p>defining a schedule (only available for existing instances)</p></li><li class="nested li"><p>choosing a load-balancing algorithm</p></li></ul><p>These steps are detailed in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF115">“Configuring an Application.”</a></span></p></li><li class="li"><p><strong>Adding application instances,</strong> which is described in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIIIEHJ">“Adding Application Instances.”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP30000064-TPXREF114" title="Adding an Application"></a><h3>Adding an Application</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_169"></a>You add applications to your site using JavaMonitor’s Applications page, shown in <span class="content_text">Figure 5-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-TPXREF103" title="Figure 5-5Adding an application using JavaMonitor&acirc;&#128;&#153;s Applications page"></a><p><strong>Figure 5-5&nbsp;&nbsp;</strong>Adding an application using JavaMonitor’s Applications page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_170"></a><img src = "../Art/applicationadd.gif" alt = "Adding an application using Monitor’s Applications page" width="401" height="227"></div><br/><p>Follow these steps to add an application to your site:</p><ol class="ol"><li class="li"><p>Enter the application’s name (without the extension) in the Add Application Named text field.</p></li><li class="li"><p>Click Add Application.</p></li></ol><a name="//apple_ref/doc/uid/TP30000064-TPXREF115" title="Configuring an Application"></a><h3>Configuring an Application</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_171"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_172"></a>After you add an application, the application configuration page<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_173"></a> is displayed. This page has five major sections, which you can show and hide using the disclosure triangles:</p><ul class="spaceabove"><li class="li"><p>The <span class="content_text">“New Instance Defaults”</span> section lets you set the default values for the instance settings<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_174"></a> for application instances you add afterward. For example, you can change the default JVM setting for your application. See <span class="content_text">“New Instance Defaults”</span> for details.</p></li><li class="li"><p>The Application Settings section contains properties that apply to all the instances of the application<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_175"></a>. For more, see <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF117">“Application Settings.”</a></span></p></li><li class="li"><p>The Scheduling section allows you to individually schedule instances<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_176"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_177"></a> to restart at specific intervals. See <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF118">“Scheduling”</a></span> for details.</p></li><li class="li"><p>The Email Notifications section is where you specify the list of email addresses you want email notifications<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_178"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_179"></a> to be sent to. For details, see <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF119">“Email Notifications.”</a></span></p></li><li class="li"><p>The Load Balancing and Adaptor Settings section lets you choose the algorithm that the HTTP adaptor uses to perform load balancing<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_180"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_181"></a> among the instances of the application. See <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIBEJHC">“Load Balancing and Adaptor Settings.”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP30000064-TPXREF116" title="New Instance Defaults"></a><h4>New Instance Defaults</h4><p><span class="content_text">Figure 5-6</span> shows the section of the application configuration page that allows you to set defaults for the application instances. If application instances are running when you change these settings, you need to restart them to apply your changes. For details on the options shown on this page, see the description below or refer to <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em> as indicated. </p><ul class="spaceabove"><li class="li"><p>Path:  The file system path of the application launch script in the ".woa" directory.</p></li><li class="li"><p>Auto Recover:  Indicates whether JavaMonitor automatically restarts instances that are manually shut down or that have become unresponsive.</p></li><li class="li"><p>Minimum Active Sessions:  The minimum number of active sessions an instance must have before JavaMonitor can terminate it.</p></li><li class="li"><p>Caching Enabled:  See the description of <code>WOCachingEnabled</code> in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p></li><li class="li"><p>Debugging Enabled:  See the description of  <code>WODebuggingEnabled</code> in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p></li><li class="li"><p>Output Path:  See the description of  <code>WOOutputPath</code> in  <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p></li><li class="li"><p>Auto-Open in Browser:  See the description for <code>WOAutoOpenInBrowser</code> in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em></p></li><li class="li"><p>Lifebeat Interval:  See the description of  <code>WOLifebeatInterval</code>  in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p></li></ul><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIIHGDC" title="Figure 5-6The New Instance Defaults section of the application configuration page"></a><p><strong>Figure 5-6&nbsp;&nbsp;</strong>The New Instance Defaults section of the application configuration page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_182"></a><img src = "../Art/newinstancedefaults.gif" alt = "The New Instance Defaults section of the application configuration page" width="503" height="532"></div><br/><p>Here’s an explanation of the buttons on the page:</p><ul class="spaceabove"><li class="li"><p><strong>Push</strong>: updates the value of the property for new and configured (registered) instances of the application. The changes take effect after the instances are restarted.</p></li><li class="li"><p><strong>Push All</strong>: updates the value of the all the properties for new and configured instances of the application. As with Push, the changes become effective when the instances are restarted.</p></li><li class="li"><p><strong>Update for New Instances Only</strong>: sets the defaults to be used when you create new instances of the application. The properties of existing instances are not changed.</p></li><li class="li"><p><strong>Path Wizard</strong>: opens a tool that allows you to navigate through a host’s file system.</p></li></ul><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_5" title="Changing the JVM Size"></a><h4>Changing the JVM Size</h4><p>By default, the maximum allowed RAM usage for a Java application is 64 MB. Changing this setting using JavaMonitor affects only the applications launched by JavaMonitor. Follow these steps to change the JVM size used by applications deployed with JavaMonitor:</p><ol class="ol"><li class="li"><p>Double-click the Applications tab in JavaMonitor.</p></li><li class="li"><p>In the Applications view, click the Config icon to bring up the Configuration window.</p></li><li class="li"><p>Type <code>-Xmx128m</code> in the Additional Arguments text field.</p></li></ol><p>The <code>-Xmx128m</code> option sets the maximum RAM usage to 128 MB, but that is only an example. Experiment with different values to find out what has the best performance for your application. Setting the value too high may cause temporary slowdowns during garbage collection or disk paging. Some applications may benefit from setting the minimum RAM usage equal to the maximum. You can do this by setting the Java VM options to <code>-Xms128m -Xmx128m</code></p><a name="//apple_ref/doc/uid/TP30000064-TPXREF117" title="Application Settings"></a><h4>Application Settings</h4><p><span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIIGFDF">Figure 5-7</a></span> shows the Application Settings section of the application configuration page. In it, you define application settings that apply to all the instances of the application. For details of the properties shown in this section, see the description below or refer to <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em> as indicated.</p><ul class="spaceabove"><li class="li"><p>Name:  This property is used by the HTTP adaptor to implement load balancing.  The adaptor can load-balance only between instances with the same application name.  The property can be used to create groups of instances, even when the instances share the same executable file.  See the description of the <code>WOApplicationName</code> application property in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p></li><li class="li"><p>Starting Port:  The first port number JavaMonitor tries to assign to a new instance of the application.  If the port is in use by another instance of any application, JavaMonitor uses the next unassigned port number.</p></li><li class="li"><p>Time Allowed for Startup:  The number of seconds JavaMonitor waits for an instance to start before determining that the instance failed to start.</p></li><li class="li"><p>Phased Startup:  If this option is selected, when a wotaskd process starts up, the instances that it manages that have Auto Recover selected are started one at a time instead of all at once. This option is selected by default. For more information, see the description of Auto Recover in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF116">“New Instance Defaults.”</a></span></p></li><li class="li"><p>Adaptor:  The default adaptor class an instance uses (This is not the HTTP adaptor used by the web server.) You use this if the application defines a subclass of the WOAdaptor class to be used to create adaptor objects (instead of using the WOAdaptor class itself).</p></li><li class="li"><p>Minimum Adaptor Threads: The initial number of worker threads the adaptor creates to handle requests to the application. It applies only to adaptor processes of the WODefaultAdaptor class in WebObjects 5.</p></li><li class="li"><p>Maximum Adaptor Threads: The maximum number of worker threads the HTTP adaptor creates to handle requests to the application. It applies only to adaptor processes of the WODefaultAdaptor class in WebObjects 5. The purpose of these threads is to process TCP or UDP packets; they have nothing to do with request processing.</p></li><li class="li"><p>Adaptor Threads:  The number of worker threads that the HTTP adaptor creates to handle requests to the application. It applies only to adaptor objects of the WODefaultAdaptor class in WebObjects 4.5.</p></li><li class="li"><p>Listen Queue Size:  Determines the depth of the listen queue.  While the instance handles a request, the socket buffer can hold as many additional requests as this setting indicates before it starts refusing them.  Keep in mind that if an application instance’s listen queue size becomes full and a request is refused by it, the request does not get redirected to another instance with space left over in its queue. The client has to resend the request.  If you expect spikes in the traffic level of a specific application, consider increasing the listen queue size.  Doing so does not necessarily improve performance or allow the instance to process more requests at sustained high loads, but it may reduce the number of times an application’s user must resend a particular request during high-traffic periods.</p></li><li class="li"><p>Project Search Path:  List of file-system paths that WebObjects searches in rapid-turnaround mode. These are the paths where your projects are located (relative paths are relative to your project’s launch script). WebObjects searches for your projects in the order in which you specify the paths. You must specify the paths using the following format: <code>("firstPath","secondPath",...)</code></p></li><li class="li"><p>Session TimeOut:  Specifies the time interval, in seconds, since the last request is processed after which the session times out and is terminated.</p></li><li class="li"><p>Statistics Page Password:  Specifies the password that must be entered to gain access to the instance statistics page of an application instance.</p></li></ul><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIIGFDF" title="Figure 5-7The Application Settings section of the application configuration page"></a><p><strong>Figure 5-7&nbsp;&nbsp;</strong>The Application Settings section of the application configuration page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_183"></a><img src = "../Art/applicationsettings.gif" alt = "The Application Settings section of the application configuration page" width="566" height="601"></div><br/><a name="//apple_ref/doc/uid/TP30000064-TPXREF118" title="Scheduling"></a><h4>Scheduling</h4><p><span class="content_text">Figure 5-8</span> shows the Scheduling section<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_184"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_185"></a> of the application configuration page. After you add instances of an application, you can schedule them individually here. For details, see the description below or <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p><ul class="spaceabove"><li class="li"><p>Graceful Scheduling:  Determines whether an instance is shut down gracefully or immediately at its scheduled shut-down time. During a graceful shutdown, the instance does not create sessions for new users (they are automatically directed to other available instances, if any). Existing sessions remain active until they time out or are destroyed programmatically. When the number of active sessions drops to the value set for the Minimum Active Sessions property, the instance is restarted. When Graceful Scheduling is not selected for the instance, it is restarted immediately, terminating active sessions. See description of Minimum Active Sessions in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF116">“New Instance Defaults”</a></span> for more information.</p></li><li class="li"><p>Is Scheduled:  Determines whether the schedule defined for a particular instance is active.</p></li><li class="li"><p>Types of Schedule:</p><p>There are three types of schedule available for instances:</p><ul class="nested"><li class="nested li"><p>Hourly: The instance is restarted after a certain number of hours from a particular hour.</p></li><li class="nested li"><p>Daily: The instance is restarted at a particular hour every day.</p></li><li class="nested li"><p>Weekly: The instance is restarted a particular hour on a specific day of the week.</p></li></ul></li></ul><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIFFAGJ" title="Figure 5-8The Scheduling section of the application configuration page"></a><p><strong>Figure 5-8&nbsp;&nbsp;</strong>The Scheduling section of the application configuration page</p><img src = "../Art/scheduling.gif" alt = "The Scheduling section of the application configuration page" width="526" height="408"></div><br/><a name="//apple_ref/doc/uid/TP30000064-TPXREF119" title="Email Notifications"></a><h4>Email Notifications</h4><div class="notebox"><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_17" title="Note"></a><p><strong>Note:</strong>&nbsp; Before you can configure email notifications, you have to tell JavaMonitor which SMTP server<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_186"></a> to use. See <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIEHJEH">“Configuring Sites.”</a></span></p></div><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_187"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_188"></a><span class="content_text">Figure 5-9</span> shows the Email Notification Settings section of the application configuration page. In it you can enter the email addresses of people that are to be notified when instances of the application terminate unexpectedly. For more information, see <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIBJHID" title="Figure 5-9The Email Notifications section of the application configuration page"></a><p><strong>Figure 5-9&nbsp;&nbsp;</strong>The Email Notifications section of the application configuration page</p><img src = "../Art/emailnotifications.gif" alt = "The Email Notifications section of the Application Configuration page" width="519" height="338"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BCIBEJHC" title="Load Balancing and Adaptor Settings"></a><h4>Load Balancing and Adaptor Settings</h4><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_189"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_190"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_191"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_192"></a><span class="content_text">Figure 5-10</span> shows the Load Balancing and Adaptor Settings section of the application configuration page. This is where you enter values for the HTTP adaptor’s configuration properties, including the load-balancing algorithm the adaptor uses to balance user load among the application instances. These settings override the values entered in the HTTP Adaptor Settings section of the Site page. For information on the properties you can set, see the description below or <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em> as indicated.</p><ul class="spaceabove"><li class="li"><p>Load-Balancing Scheme: The load-balancing method used by the adaptor for instances of the application. The options available are Round Robin, Random, and Load Average.  You can also use a custom load balancer by choosing Custom in the pop-up menu and entering the load balancer’s name in the Custom Scheduler Name text field.</p></li><li class="li"><p>Retries:  The number of times a request is retried (trying several instances) if a communications failure occurs before an error page is returned to the web server.</p></li><li class="li"><p>Redirection URL:  The URL to which the user is redirected when an instance fails to respond to a direct request.</p></li><li class="li"><p>Dormant:  The number of times the adaptor skips an instance of the application before trying again.</p></li><li class="li"><p>Send Timeout:  The maximum number of seconds before the adaptor gives up attempting to send data to an instance of the application.</p></li><li class="li"><p>Receive Timeout:  The length of time, in seconds, the  adaptor waits for a response from an instance of the application before giving up.</p></li><li class="li"><p>Connect Timeout:  The maximum number of seconds before the adaptor gives up connecting to an instance.</p></li><li class="li"><p>Send Buffer Size:  The size, in bytes, of the TCP socket send buffer used for adaptor-to-instance communication.</p></li><li class="li"><p>Receive Buffer Size:  The size, in bytes, of the TCP socket receive buffer used for HTTP adaptor-to-instance communication.</p></li><li class="li"><p>Connection Pool Size:  The maximum number of simultaneous connections the HTTP adaptor should keep open for each configured instance.</p></li><li class="li"><p>URL Version:  The WebObjects version to use for URL parsing and formatting.  All WebObjects 4, 4.5, and 5 applications use version 4 URLs by default.</p></li></ul><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCICDJHJ" title="Figure 5-10The Load Balancing and Adaptor Settings section of the application configuration page"></a><p><strong>Figure 5-10&nbsp;&nbsp;</strong>The Load Balancing and Adaptor Settings section of the application configuration page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_193"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_194"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_195"></a><img src = "../Art/adaptorsettings.gif" alt = "The Load Balancing and Adaptor Settings section of the application configuration page" width="516" height="427"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BCIIIEHJ" title="Adding Application Instances"></a><h3>Adding Application Instances</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_196"></a>After configuring an application in JavaMonitor, you can create application instances with ease.</p><ol class="ol"><li class="li"><p>In JavaMonitor, click the Applications tab. The Applications page is displayed, as shown in <span class="content_text">Figure 5-11</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000064-BCIJIBHJ" title="Figure 5-11 The Applications page with one application"></a><p><strong>Figure 5-11&nbsp;&nbsp;</strong> The Applications page with one application</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_197"></a><img src = "../Art/applications.gif" alt = "The Applications page with one application" width="455" height="270"></div></li><li class="li"><p>Click the Detail View button under View Instances. The application detail page is displayed, as shown in <span class="content_text">Figure 5-12</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000064-BCIEBJBI" title="Figure 5-12 The application detail page"></a><p><strong>Figure 5-12&nbsp;&nbsp;</strong> The application detail page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_198"></a><img src = "../Art/applicationdetail.gif" alt = "The application detail page" width="450" height="269"></div></li><li class="li"><p>Enter the number of instances you want to add in the text input field.</p></li><li class="li"><p>Choose the application host you want the instances to run on from the pop-up menu.</p><p>The application must be installed on the host you choose; otherwise, an error message is displayed when you try to start the instance. See <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIDIIDD">“Installing Applications”</a></span> for details.</p></li><li class="li"><p>Click Add. Your web browser displays a page like the one in <span class="content_text">Figure 5-13</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000064-BCIEJDFG" title="Figure 5-13 The application detail page after an instance has been added"></a><p><strong>Figure 5-13&nbsp;&nbsp;</strong> The application detail page after an instance has been added</p><img src = "../Art/instanceadded.gif" alt = "The application detail page after an instance has been added" width="581" height="320"></div></li></ol><p>The Status column indicates whether the instance is on or off. The first time the page is displayed, the newly added instances are off. After a moment (or if you click Refresh Now), and if Auto Recover is enabled for the instance, the page refreshes, showing that the instance is active. For details on Auto Recover, see the description of  Auto Recover in <span class="content_text">“New Instance Defaults.”</span> (Read <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIFFJGB">“Setting JavaMonitor Preferences”</a></span> for how to change the length of the interval between the automatic updates of the application detail page.)</p><p><span class="content_text">Figure 5-14</span> shows the application detail page of the HR application, with two instances configured.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BBCGFEIB" title="Figure 5-14The application detail page with two instances added"></a><p><strong>Figure 5-14&nbsp;&nbsp;</strong>The application detail page with two instances added</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_199"></a><img src = "../Art/detailview.gif" alt = "The application detail page with two instances added" width="565" height="344"></div><br/><p>The following list describes the instance configuration information that appears in the application detail page:</p><ul class="spaceabove"><li class="li"><p><strong>Page heading</strong>: A link to the application through the HTTP adaptor. When you click it, the adaptor uses load balancing to determine which of the application’s instances should receive the request. Then, your web browser displays a new window showing your application’s entry page. For this to work, the HTTP adaptor URL has to be set (<span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIEHJEH">“Configuring Sites”</a></span> shows you how to do this).</p></li><li class="li"><p><strong>Name</strong>: A link to the instance through the HTTP adaptor. When you click it, the request goes through the adaptor but it’s not load balanced. The URL is derived in the same way the URL of the page heading is derived but with the addition of the instance number. Such a URL looks similar to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>http://ebruce2.apple.com/cgi-bin/WebObjects/HR.woa/1<span></span></pre></td></tr></table></div></li><li class="li"><p><strong>Host-Port</strong>: A direct link to the instance; does not go through the HTTP adaptor.</p></li><li class="li"><p><strong>Status<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_200"></a></strong>: Tells whether the instance is on, off, starting, or stopping.</p></li><li class="li"><p><strong>Start-Stop<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_201"></a></strong>: Click the green button to turn the instance on or the red button to turn it off.</p></li><li class="li"><p><strong>Auto Recover<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_202"></a></strong>: Click to toggle between ON and OFF. This is available only if the instance is not scheduled. See description of Auto Recover in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF116">“New Instance Defaults.”</a></span> </p></li><li class="li"><p><strong>Refuse New Sessions<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_203"></a></strong>: Click to toggle between ON and OFF. When ON, the instance does not accept new users. This is available only if the instance is not scheduled.</p></li><li class="li"><p><strong>Scheduled<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_204"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_205"></a></strong>: Click to toggle between ON and OFF. When ON, JavaMonitor uses the schedule defined for the instance.</p></li><li class="li"><p><strong>Configure<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_206"></a></strong>: Click the Config button to go to the instance configuration page for the instance.</p></li><li class="li"><p><strong>Delete<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_207"></a></strong>: Click the Delete button to delete the instance. JavaMonitor displays a confirmation page before executing the deletion.</p></li></ul><p>For an explanation of the columns under Statistics, see <span class="content_text"><a href="../Administration/Administration.html#//apple_ref/doc/uid/TP30000065-TPXREF119">“The Application Detail Page.”</a></span></p><p>The row with the caption ALL INSTANCES contains buttons that perform some of the functions listed above on all the instances of the application. Clicking Config displays the application configuration page.<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_208"></a></p><a name="//apple_ref/doc/uid/TP30000064-TPXREF147" title="Configuring Instances"></a><h3>Configuring Instances</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_209"></a>After adding an instance, you can change its configuration in the instance configuration page<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_210"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_211"></a>, shown in <span class="content_text">Figure 5-15</span>. You can access this page through the instance’s Config button in the application detail page. It contains two sections: Instance Settings and Adaptor Settings. For information on those sections, see <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIJIBEI">“Instance Settings”</a></span> and <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIBGIHC">“Adaptor Settings.”</a></span></p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIEFFAE" title="Figure 5-15Instance configuration page"></a><p><strong>Figure 5-15&nbsp;&nbsp;</strong>Instance configuration page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_212"></a><img src = "../Art/instanceconfigure.gif" alt = "Instance configuration page" width="541" height="523"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BCIJIBEI" title="Instance Settings"></a><h4>Instance Settings</h4><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_213"></a>This section is very similar to the New Instance Defaults section of the application configuration page (<span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-TPXREF116">“New Instance Defaults”</a></span>). It has two additional properties: ID and Port, which can be changed only after an instance has been added. ID is the application instance number which must be unique for each instance of an application.  For Port details, see <code>WOPort</code> in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>. </p><a name="//apple_ref/doc/uid/TP30000064-BCIBGIHC" title="Adaptor Settings"></a><h4>Adaptor Settings</h4><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_214"></a>In this section you can change a subset of the properties available in the Load Balancing and Adaptor Settings section of the application configuration page. For details, see the descriptions in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIBEJHC">“Load Balancing and Adaptor Settings.”</a></span></p><a name="//apple_ref/doc/uid/TP30000064-BCIGIGEF" title="Setting a Password for the Instance Statistics Page"></a><h4>Setting a Password for the Instance Statistics Page</h4><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_215"></a>For each instance of your application, there’s a statistics page that displays information such as its running time and memory usage. See <span class="content_text"><a href="../Administration/Administration.html#//apple_ref/doc/uid/TP30000065-TPXREF106">“The Instance Statistics Page”</a></span> for more information on this page. If you want to prevent outside agents from gaining access to the instance statistics page, you can set a password in the Instance Settings section of the instance configuration page. Add the following to the Additional Arguments property:</p><p><code>-WOStatisticsPassword password</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_216"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_217"></a></p><p><span class="content_text">Figure 5-16</span> shows an example where the <code>WOStatisticsPassword</code> argument has been added to the Additional Arguments field.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-TPXREF104" title="Figure 5-16 Setting a password for an instance&acirc;&#128;&#153;s statistics page"></a><p><strong>Figure 5-16&nbsp;&nbsp;</strong> Setting a password for an instance’s statistics page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_218"></a><img src = "../Art/statisticspassword.gif" alt = "Setting a password for an instance’s statistics page" width="538" height="385"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BCIEHJEH" title="Configuring Sites"></a><h2>Configuring Sites</h2><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_219"></a>When you click the Site tab in JavaMonitor<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_220"></a>, the site configuration page is displayed. It contains three sections:</p><ul class="ul"><li class="li"><p><strong>HTTP Adaptor URL<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_221"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_222"></a></strong>. This is where you tell JavaMonitor how to compose an application’s URL, which is used in the application detail page to connect you to instances of your application<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_223"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_224"></a>.</p><p>To set the URL for your application, enter the URL in the URL to Adaptor field.</p></li><li class="li"><p><strong>HTTP Adaptor Settings<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_225"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_226"></a></strong>. This is where you set default HTTP adaptor settings for all your deployed applications. They can be overridden by each application. For more information, see the descriptions in <span class="content_text"><a href="Deployment.html#//apple_ref/doc/uid/TP30000064-BCIBEJHC">“Load Balancing and Adaptor Settings.”</a></span></p></li><li class="li"><p><strong>Email Notifications<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_227"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_228"></a></strong>. Here’s where you specify the SMTP host and the return address that JavaMonitor uses for email notifications.</p></li></ul><p><span class="content_text">Figure 5-17</span> shows the site configuration page.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIBCCFC" title="Figure 5-17The site configuration page"></a><p><strong>Figure 5-17&nbsp;&nbsp;</strong>The site configuration page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_229"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_230"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_231"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_232"></a><img src = "../Art/site.gif" alt = "The site configuration page" width="534" height="558"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BCIFFJGB" title="Setting JavaMonitor Preferences"></a><h2>Setting JavaMonitor Preferences</h2><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_233"></a>When you click the Preferences<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_234"></a> tab in JavaMonitor, the page in <span class="content_text">Figure 5-18</span> is displayed. It contains two sections: JavaMonitor Password and Detail View Refresh Settings.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIEHGFA" title="Figure 5-18The preferences page"></a><p><strong>Figure 5-18&nbsp;&nbsp;</strong>The preferences page</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_235"></a><img src = "../Art/preferences.gif" alt = "The preferences page" width="501" height="376"></div><br/><a name="//apple_ref/doc/uid/TP30000064-BBCBHCJC" title="JavaMonitor Password"></a><h3>JavaMonitor Password</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_236"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_237"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_238"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_239"></a>You can restrict access to JavaMonitor by requiring its users to enter a password before they can use it. When a site is protected this way, the site’s wotaskd processes are also protected; that is, you cannot directly obtain a wotaskd process’s information by connecting to its port.</p><p><span class="content_text">Figure 5-19</span> shows the login page that JavaMonitor displays after you password-protect your site.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-TPXREF154" title="Figure 5-19Login page displayed by JavaMonitor on a password-protected site"></a><p><strong>Figure 5-19&nbsp;&nbsp;</strong>Login page displayed by JavaMonitor on a password-protected site</p><img src = "../Art/monitorlogin.gif" alt = "Login page displayed by Monitor on a password-protected site" width="277" height="158"></div><br/><p>When you try to view the configuration of an application host on a site that you’ve password-protected<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_240"></a> by connecting to the appropriate wotaskd process’s port, you see a page similar to the one shown in <span class="content_text">Figure 5-20</span> (the page’s content varies according to your deployment platform).</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BBCHEJBD" title="Figure 5-20Page returned by wotaskd when the site is password-protected"></a><p><strong>Figure 5-20&nbsp;&nbsp;</strong>Page returned by wotaskd when the site is password-protected</p><img src = "../Art/wotaskdprotected.gif" alt = "Page returned by wotaskd when the site is password-protected" width="418" height="151"></div><br/><p>On password-protected sites, you have to use JavaMonitor to view an application host’s configuration.</p><a name="//apple_ref/doc/uid/TP30000064-TPXREF153" title="Detail-View Refresh Settings"></a><h3>Detail-View Refresh Settings</h3><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_241"></a>This section allows you to tell JavaMonitor if you want it to refresh the application detail page and how often to do it.<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_242"></a></p><a name="//apple_ref/doc/uid/TP30000064-BCIIIBEB" title="Load Balancing"></a><h2>Load Balancing</h2><div class="notebox"><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_18" title="Note"></a><p><strong>Note:</strong>&nbsp;Load balancing occurs only between the hosts that the HTTP adaptor knows about. Adding a host in JavaMonitor is not enough. For more information on how to configure hosts in the HTTP adaptor, see <span class="content_text"><a href="../WebObjectsAdaptors/WebObjectsAdaptors.html#//apple_ref/doc/uid/TP30000062-BBCFAAIE">“State Discovery.”</a></span></p></div><p>Load balancing<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_243"></a> is a mechanism by which user-load is spread out among the instances of an application; these instances can be running on different hosts. Load balancing ensures that your site’s hardware resources are used efficiently and with the highest level of performance<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_244"></a>. The default load-balancing scheme<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_245"></a> used is Random. The following list describes how user load is distributed under each of the provided algorithms:</p><ul class="ul"><li class="li"><p><strong>Random<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_246"></a></strong>: Assigns a user to an arbitrarily-chosen instance.</p></li><li class="li"><p><strong>Round Robin<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_247"></a></strong>: Assigns users among instances sequentially.</p></li><li class="li"><p><strong>Load Average<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_248"></a></strong>: Balances load by distributing users evenly among instances.</p></li></ul><p>You can choose a load-balancing algorithm at two levels:</p><ul class="ul"><li class="li"><p><strong>Site level<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_249"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_250"></a></strong>: You set a site-wide load-balancing algorithm in the HTTP Adaptor Settings section of the Site page. From then on, the applications in your site will use that load-balancing algorithm.</p></li><li class="li"><p><strong>Application level<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_251"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_252"></a></strong>: You can override the site-wide load-balancing algorithm in the Load Balancing and Adaptor Settings section of the application configuration page.</p></li></ul><a name="//apple_ref/doc/uid/TP30000064-BCIFHCBB" title="Deploying Multiple Sites"></a><h2>Deploying Multiple Sites</h2><p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_253"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_254"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_255"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_256"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_257"></a>You can deploy and configure separate sites on a set of computers by running multiple web servers, each with its own HTTP adaptor. Such a deployment requires a separate group of wotaskd<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_258"></a> processes running on the same port. You also need a separate JavaMonitor process to configure each site.</p><p>The default installation of the WebObjects Deployment package provides you with one site—one wotaskd process per host, running on port <code>1085</code>. To create a second site, using the same hardware, you have to add an additional wotaskd process to each of the hosts you want to use.</p><p>What separates the environments from each other are the <code>WOPort</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_259"></a> and <code>WOLifebeatDestinationPort</code><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_260"></a> settings of each wotaskd process and the configuration directory used for each site. The application instances send their lifebeats<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_261"></a> to their <code>WOLifebeatDestinationPort</code>, while wotaskd processes listen for them in their <code>WOPort</code>. <span class="content_text">Figure 5-21</span> illustrates two sites on one host.</p><br/><div><a name="//apple_ref/doc/uid/TP30000064-BCIHJCFF" title="Figure 5-21Multiple application environments on one computer"></a><p><strong>Figure 5-21&nbsp;&nbsp;</strong>Multiple application environments on one computer</p><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_262"></a><img src = "../Art/multipleappenv.gif" alt = "Multiple application environments on one computer" width="457" height="427"></div><br/><p>Because JavaMonitor is not started by a wotaskd process, its <code>WOLifebeatDestinationPort</code><code></code> argument needs to be set to match wotaskd’s <code>WOPort</code> setting.</p><p>For details on how to set the command-line argument values required when starting wotaskd and JavaMonitor processes for separate application environments, see <code>WOPort</code>, <code>WOLifebeatDestinationPort</code>, and <code>WODeploymentConfigurationDirectory</code> in <em><a href="../../../WOAppProperties/index.html#//apple_ref/doc/uid/TP30001020" target="_top">WebObjects Application Properties Reference</a></em>.<a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_263"></a><a name="//apple_ref/doc/uid/TP30000064-DontLinkElementID_264"></a></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../DeploymentElements/DeploymentElements.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Administration/Administration.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Deployment/Deploying_Applications/Deployment/Deployment.html%3Fid%3DTP30001009-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Deployment/Deploying_Applications/Deployment/Deployment.html%3Fid%3DTP30001009-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Deployment/Deploying_Applications/Deployment/Deployment.html%3Fid%3DTP30001009-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
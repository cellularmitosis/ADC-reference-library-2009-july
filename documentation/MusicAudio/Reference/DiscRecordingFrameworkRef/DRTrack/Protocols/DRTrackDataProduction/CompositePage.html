<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html><head>
    <title>DRTrackDataProduction</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="generator" content="HeaderDoc" />
<link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style></head><body bgcolor="#ffffff">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/MusicAudio/index.html#//apple_ref/doc/uid/TP30001281-TP30000428" target="_top">Audio</a> <b>&gt;</b> <a href="../../../../../../../reference/MusicAudio/idxCarbon-date.html#//apple_ref/doc/uid/TP30001281-TP30000428-TP30000494" target="_top">Carbon</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/discrecording" target="_top">Disc Recording Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>


<!-- end of header -->
<a name="top"></a>
<a name="//apple_ref/doc/protocol/DRTrackDataProduction" title="DRTrackDataProduction"></a>
<hr><table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h1><a name="DRTrackDataProduction">DRTrackDataProduction</a></h1>
</td></tr></table><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr><td scope="row"><b>Declared In:</b></td><td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">DRTrack.h</a></div></div></td></tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract -->	Informal protocol describing methods implemented by a track data producer.
<!-- end abstract --></p>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->	
The DRTrackDataProduction informal protocol defines those methods that a track data producer 
instance can implement. A track data producer is the object that is
resposible for providing the track data to the burn engine on request. 
<br><br>
In concept a track data producer similar to an NSTable data source in Cocoa. 
Each producer method receives a pointer to the track it should produce data for. 
There is one method that <b>must</b> be implemented -
<a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:">produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags: </a>.
<br><br>
The methods of this protocol will be called in roughly this order:
<br><br>
<ol type="1">
<li><!-- a -->prepareTrackForBurn: <!-- /a --></li>
<li><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:">producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags: </a></li>
<li><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:">produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags: </a></li>
<li><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrackForVerification:">prepareTrackForVerification: </a></li>
<li><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:">verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags: </a></li>
<li><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterVerification:">cleanupTrackAfterVerification: </a></li>
<li><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterBurn:">cleanupTrackAfterBurn: </a></li>
</ol>
<br><br>
If verification of the disc is not requested, or a track omits or defines 
<a href="../../CompositePage.html#//apple_ref/c/data/DRVerificationTypeKey" target="_top">DRVerificationTypeKey </a> to be <a href="../../CompositePage.html#//apple_ref/c/data/DRVerificationTypeNone" target="_top">DRVerificationTypeNone </a>, then 
<a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrackForVerification:">prepareTrackForVerification: </a>, 
<a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:">verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags: </a> and
<a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterVerification:">cleanupTrackAfterVerification: </a>
will not be called.
<br><br>
During a burn, <a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:">produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags: </a> is called
very frequently in a real-time thread. Because of this, it is of utmost importance that
this method very effficient and does not perform any long task, since by doing so, the
burn may fail because data is not available to write to the disc.
<!-- end discussion --></p>
<hr><br><h2>Methods</h2>
<a name="HeaderDoc_methods"></a>
<dl>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterBurn:" target="doc">-cleanupTrackAfterBurn:</a></tt></dt>
<dd>Cleans up the track after the burn completes.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterVerification:" target="doc">-cleanupTrackAfterVerification:</a></tt></dt>
<dd>Cleans up the track after the verification completes.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/estimateLengthOfTrack:" target="doc">-estimateLengthOfTrack:</a></tt></dt>
<dd>Estimates the size of the track to be burned.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrack:forBurn:toMedia:" target="doc">-prepareTrack:forBurn:toMedia:</a></tt></dt>
<dd>Prepares the track for burning.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrackForVerification:" target="doc">-prepareTrackForVerification:</a></tt></dt>
<dd>Prepare the track to be verified.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:" target="doc">-produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:</a></tt></dt>
<dd>Produces the track data.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:" target="doc">-producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:</a></tt></dt>
<dd>Produces the pregap data.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:" target="doc">-verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:</a></tt></dt>
<dd>Cleans up the track after the burn completes.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRTrackDataProduction/verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags:" target="doc">-verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags:</a></tt></dt>
<dd>Checks the integrity track pregap after a burn.
</dd>
</dl>
<hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterBurn:;  name=DRTrackDataProduction::cleanupTrackAfterBurn: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterBurn:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="cleanupTrackAfterBurn:">cleanupTrackAfterBurn:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Cleans up the track after the burn completes.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a>) <!-- a --><span class="function">cleanupTrackAfterBurn</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="var">track</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> to indicate that the burn should proceed and <i>NO</i> to indicate a failure occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Called after burning is complete. Typically you'll clean up what was setup in <b>prepareTrackForBurn</b>. 
Since this method is called after the laser is turned off and the burn is finished, 
this method can perform time consuming tasks. 
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterVerification:;  name=DRTrackDataProduction::cleanupTrackAfterVerification: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/cleanupTrackAfterVerification:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="cleanupTrackAfterVerification:">cleanupTrackAfterVerification:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Cleans up the track after the verification completes.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">cleanupTrackAfterVerification</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="var">track</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->Return <i>YES</i> to indicate success, <i>NO</i> to indicate failure.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Once the verification phase is complete, this method is called. The class implementing
the method has a chance to do anything up to and including failing the verification. 
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/estimateLengthOfTrack:;  name=DRTrackDataProduction::estimateLengthOfTrack: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/estimateLengthOfTrack:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="estimateLengthOfTrack:">estimateLengthOfTrack:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Estimates the size of the track to be burned.
<!-- end abstract --></p>
<p></p><pre>- (<!-- a --><span class="type">uint64_t</span><!-- /a -->) <!-- a --><span class="function">estimateLengthOfTrack</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="var">track</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object for which to estimate the size</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The number of blocks of data that the track will occupy. The estimate should be 
reasonably accurate, and no smaller than the actual size that will be needed.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This message is sent outside of a burn cycle in response to a -estimateLength message 
sent to the track.
<br><br>
<br><br>
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrack:forBurn:toMedia:;  name=DRTrackDataProduction::prepareTrack:forBurn:toMedia: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrack:forBurn:toMedia:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="prepareTrack:forBurn:toMedia:">prepareTrack:forBurn:toMedia:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Prepares the track for burning.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">prepareTrack</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="param">track</span> <!-- a --><span class="function">forBurn</span><!-- /a -->:(<a href="../../../DRBurn/Classes/DRBurn/index.html#//apple_ref/occ/cl/DRBurn" target="_top" class="type"><span class="type">DRBurn</span></a><span class="type">*</span>)<span class="param">burn</span> 
        <!-- a --><span class="function">toMedia</span><!-- /a -->:(<a href="../../../../../../Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary" target="_top" class="type"><span class="type">NSDictionary</span></a><span class="type">*</span>)<span class="var">mediaInfo</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
<dt><code>burn</code></dt><dd>The burn object controlling the burn</dd>
<dt><code>mediaInfo</code></dt><dd>The media being burned to. This is the same dictionary as returned by <a href="../../../DRDevice/Classes/DRDevice/CompositePage.html#//apple_ref/occ/instm/DRDevice/status" target="_top">-[DRDevice status] </a>.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> to indicate that the burn should proceed and <i>NO</i> to indicate a failure occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Called before any burning starts. Do any sort of setup that needs to be performed
(such as opening files). This method can calculate and update the exact track length
that will be burned.
<br><br>
Since this method is called before the laser is turned on, this method can perform 
time consuming tasks. 
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrackForVerification:;  name=DRTrackDataProduction::prepareTrackForVerification: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/prepareTrackForVerification:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="prepareTrackForVerification:">prepareTrackForVerification:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Prepare the track to be verified.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">prepareTrackForVerification</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="var">track</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> to indicate that the verification should proceed and <i>NO</i> to indicate a failure occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This method is called after the burn complets writing data to disc and before verification
phase starts. Now would be a good time to prepare to produce data again by rewinding to the start
of files, etc. 
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:;  name=DRTrackDataProduction::produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:">produceDataForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Produces the track data.
<!-- end abstract --></p>
<p></p><pre>- (<!-- a --><span class="type">uint32_t</span><!-- /a -->) <!-- a --><span class="function">produceDataForTrack</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="param">track</span> <!-- a --><span class="function">intoBuffer</span><!-- /a -->:(<!-- a --><span class="type">char</span><!-- /a --><span class="type">*</span>)<span class="param">buffer</span> 
        <!-- a --><span class="function">length</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">bufferLength</span> <!-- a --><span class="function">atAddress</span><!-- /a -->:(<!-- a --><span class="type">uint64_t</span><!-- /a -->)<span class="param">address</span> 
        <!-- a --><span class="function">blockSize</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">blockSize</span> <!-- a --><span class="function">ioFlags</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a --><span class="type">*</span>)<span class="var">flags</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
<dt><code>buffer</code></dt><dd>The buffer to place data into</dd>
<dt><code>bufferLength</code></dt><dd>The length of buffer</dd>
<dt><code>address</code></dt><dd>The on-disc address of where data will be written</dd>
<dt><code>blockSize</code></dt><dd>the size of each block on the disc. It's best to return a multiple of this size.</dd>
<dt><code>flags</code></dt><dd>flags</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The number of bytes produced.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This method is called many times over the course of a burn to obtain data for the track. 
The buffer passed in will be a multiple of blockSize (bufferLength == blockSize * N, where N > 1) 
and should be filled as full as possible with data. address is the sector address on the disc from
the start of the track that is the buffer will be written to.
<br><br>
Since while burning, keeping the drive's buffer full is 
of utmost importance, you should not perform lengthy operations or block for data in this method.
This method should return the number of bytes actually in the buffer or 0 to indicate that there
was an error producing the data.. 
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:;  name=DRTrackDataProduction::producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:">producePreGapForTrack:intoBuffer:length:atAddress:blockSize:ioFlags:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Produces the pregap data.
<!-- end abstract --></p>
<p></p><pre>- (<!-- a --><span class="type">uint32_t</span><!-- /a -->) <!-- a --><span class="function">producePreGapForTrack</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="param">track</span> 
        <!-- a --><span class="function">intoBuffer</span><!-- /a -->:(<!-- a --><span class="type">char</span><!-- /a --><span class="type">*</span>)<span class="param">buffer</span> <!-- a --><span class="function">length</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">bufferLength</span> 
        <!-- a --><span class="function">atAddress</span><!-- /a -->:(<!-- a --><span class="type">uint64_t</span><!-- /a -->)<span class="param">address</span> <!-- a --><span class="function">blockSize</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">blockSize</span> 
        <!-- a --><span class="function">ioFlags</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a --><span class="type">*</span>)<span class="var">flags</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
<dt><code>buffer</code></dt><dd>The buffer to place data into</dd>
<dt><code>bufferLength</code></dt><dd>The length of buffer</dd>
<dt><code>address</code></dt><dd>The on-disc address of where data will be written</dd>
<dt><code>blockSize</code></dt><dd>the size of each block on the disc. It's best to return a multiple of this size.</dd>
<dt><code>flags</code></dt><dd>flags</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The number of bytes produced.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This method is called to obtain data for the track's pregap. If the <a href="../../CompositePage.html#//apple_ref/c/data/DRPreGapLengthKey" target="_top">DRPreGapLengthKey </a> 
key is present in the track properties, the track producer will be asked for the pregap 
data first. If the producer implements this selector, then it's the responsibility
of the producer to provide data for the pregap, otherwise that length of 
silence will be produced by DiscRecording.
<br><br>
The buffer passed in will be a multiple of blockSize (bufferLength == blockSize * N, where N > 1) 
and should be filled as full as possible with data. address is the sector address on the disc from
the start of the track that is the buffer will be written to.
<br><br>
Since while burning, keeping the drive's buffer full is 
of utmost importance, you should not perform lengthy operations or block for data in this method.
This method should return the number of bytes actually in the buffer or 0 to indicate that there
was an error producing the data.. 
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:;  name=DRTrackDataProduction::verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:">verifyDataForTrack:inBuffer:length:atAddress:blockSize:ioFlags:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Cleans up the track after the burn completes.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">verifyDataForTrack</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="param">track</span> <!-- a --><span class="function">inBuffer</span><!-- /a -->:(<span class="keyword">const</span> <!-- a --><span class="type">char</span><!-- /a --><span class="type">*</span>)<span class="param">buffer</span> 
        <!-- a --><span class="function">length</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">bufferLength</span> <!-- a --><span class="function">atAddress</span><!-- /a -->:(<!-- a --><span class="type">uint64_t</span><!-- /a -->)<span class="param">address</span> 
        <!-- a --><span class="function">blockSize</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">blockSize</span> <!-- a --><span class="function">ioFlags</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a --><span class="type">*</span>)<span class="var">flags</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
<dt><code>buffer</code></dt><dd>The data read in from the track to compare with</dd>
<dt><code>bufferLength</code></dt><dd>The length of buffer</dd>
<dt><code>address</code></dt><dd>The on-disc address of where data will was read from.</dd>
<dt><code>blockSize</code></dt><dd>the size of each block on the disc. It's best to return a multiple of this size.</dd>
<dt><code>flags</code></dt><dd>flags</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> to indicate that the data compared successfully and <i>NO</i> to indicate a failure occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->If the class implementing this method asks for a verification type of <a href="../../CompositePage.html#//apple_ref/c/data/DRVerificationTypeReceiveData" target="_top">DRVerificationTypeReceiveData </a>, 
then a series of calls to this method will start. It's up to the class to reproduce the data
again and compare it to the data passed in buffer. The buffer passed in will be a multiple of blockSize 
(bufferLength == blockSize * N, where N > 1). address is the sector address on the disc from
the start of the track that is the buffer was written to.
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRTrackDataProduction/verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags:;  name=DRTrackDataProduction::verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags: -->
<a name="//apple_ref/occ/intfm/DRTrackDataProduction/verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags:">verifyPreGapForTrack:inBuffer:length:atAddress:blockSize:ioFlags:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Checks the integrity track pregap after a burn.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">verifyPreGapForTrack</span><!-- /a -->:(<a href="../../Classes/DRTrack/index.html#//apple_ref/occ/cl/DRTrack" target="_top" class="type"><span class="type">DRTrack</span></a><span class="type">*</span>)<span class="param">track</span> <!-- a --><span class="function">inBuffer</span><!-- /a -->:(<span class="keyword">const</span> <!-- a --><span class="type">char</span><!-- /a --><span class="type">*</span>)<span class="param">buffer</span> 
        <!-- a --><span class="function">length</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">bufferLength</span> <!-- a --><span class="function">atAddress</span><!-- /a -->:(<!-- a --><span class="type">uint64_t</span><!-- /a -->)<span class="param">address</span> 
        <!-- a --><span class="function">blockSize</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">blockSize</span> <!-- a --><span class="function">ioFlags</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a --><span class="type">*</span>)<span class="var">flags</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>track</code></dt><dd>The track object being burned</dd>
<dt><code>buffer</code></dt><dd>The data read in from the track to compare with</dd>
<dt><code>bufferLength</code></dt><dd>The length of buffer</dd>
<dt><code>address</code></dt><dd>The on-disc address of where data will was read from.</dd>
<dt><code>blockSize</code></dt><dd>the size of each block on the disc. It's best to return a multiple of this size.</dd>
<dt><code>flags</code></dt><dd>flags</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> to indicate that the data compared successfully and <i>NO</i> to indicate a failure occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->If the class implementing this method asks for a verification type of <a href="../../CompositePage.html#//apple_ref/c/data/DRVerificationTypeReceiveData" target="_top">DRVerificationTypeReceiveData </a>, 
then a series of calls to this method will start. It's up to the class to reproduce the pregap
again and compare it to the data passed in buffer. The buffer passed in will be a multiple of blockSize 
(bufferLength == blockSize * N, where N > 1). address is the sector address on the disc from
the start of the track that is the buffer was written to.
<!-- end discussion --></p>
<p></p><p><!-- start of footer -->

	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/DiscRecordingFrameworkRef/DRTrack/Protocols/DRTrackDataProduction/CompositePage.html%3Fid%3DTP40004404-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/DiscRecordingFrameworkRef/DRTrack/Protocols/DRTrackDataProduction/CompositePage.html%3Fid%3DTP40004404-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/DiscRecordingFrameworkRef/DRTrack/Protocols/DRTrackDataProduction/CompositePage.html%3Fid%3DTP40004404-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>



<!-- end of footer -->
Last Updated: 2008-04-01
</p></body></html>

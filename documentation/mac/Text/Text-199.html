<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>How the Font Manager Renders Outline Fonts(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING199></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-198.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-200.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-181.html"><B>Chapter 4 - Font Manager</B></A> / <A HREF="Text-193.html"><B>About the Font Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING199-0></A>
<H2>How the Font Manager Renders Outline Fonts<A NAME=MARKER-2-793></A><A NAME=MARKER-2-131></A></H2>
 Outline fonts are stored in an outline font (<CODE>'sfnt'</CODE>) resource as a collection of outline points. (Don't confuse these outline points with the points that determine point size, or the <CODE>Point</CODE> data type, which specifies a location in the QuickDraw coordinate plane.) The Font Manager calculates lines and curves between the points, sets the bits that make the bitmap, and then sends the bitmap to QuickDraw for display.<A NAME=MARKER-2-204></A><P>
 There are two types of outline points: <A NAME=MARKER-2-22></A><B>on-curve points</B> define the endpoints of lines, and <A NAME=MARKER-2-94></A><B>off-curve points</B> determine the curve of the line between the on-curve points. Two consecutive on-curve points define a straight line. To draw a curve, the Font Manager needs a third point that is off the curve and between the two on-curve points.<A NAME=MARKER-9-76></A> <A NAME=MARKER-21-77></A> <A NAME=MARKER-2-27></A> <A NAME=MARKER-9-78></A><P>
 The Font Manager uses this parametric B&eacute;zier equation to draw the curves of the glyph from an outline font: <P>
<PRE>
F(t) = (1 - t)2 * A + 2t(1 - t) * B + t2 * C
</PRE>
 where <CODE>t</CODE> ranges between 0 and 1 as the curve moves from point A to point C. A and C are on-curve points; B is an off-curve point. <P>
 <A HREF=#MARKER-9-193>Figure 4-8</A> shows two <A NAME=MARKER-2-144></A>B&eacute;zier curves. The positions of on-curve points A and C remain constant, while off-curve point B shifts. The curve changes in relation to the position <BR>of point B.<P>
<B>Figure 4-8  <A NAME=MARKER-9-193></A>The effect of an off-curve point on two B&eacute;zier curves</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FM-09.jpg">
 <A NAME=MARKER-9-81></A>A font designer can use any number of outline points to create a glyph outline. <BR>These points must be numbered in a logical order, because the Font Manager draws <BR>lines and curves sequentially. This process produces a glyph such as the lowercase "b" <BR>in <A HREF=#MARKER-9-195>Figure 4-9</A>.<P>
<B>Figure 4-9  <A NAME=MARKER-9-195></A>An outline with points on and off the curve</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FM-10.jpg">
 There are several groups of points in <A HREF=#MARKER-9-195>Figure 4-9</A> that include two consecutive off-curve points. For instance, points 2 and 3 are both off-curve. In this case, the Font Manager interpolates an on-curve point midway between the two off-curve points, thereby defining two B&eacute;zier curves, as shown in <A HREF=#MARKER-9-196>Figure 4-10</A>. Note that this additional on-curve point is used for creation of the glyph only; the Font Manager does not alter the outline font resource's list of points.<P>
<B>Figure 4-10  <A NAME=MARKER-9-196></A>A curve with consecutive off-curve points</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FM-11.jpg">
 <A NAME=MARKER-2-85></A>When the Font Manager has finished drawing a closed loop, it has completed one <A NAME=MARKER-6-198></A>contour of the outline. The font designer groups the points in the outline font resource into contours. In <A HREF=#MARKER-9-195>Figure 4-9</A>, the Font Manager draws the first contour in the glyph from point 0 to point 17, and the second contour from point 18 to the end, creating the glyph in <A HREF=#MARKER-9-200>Figure 4-11</A>.<A NAME=MARKER-2-117></A><P>
<B>Figure 4-11  <A NAME=MARKER-9-200></A>A glyph from an outline font</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FM-12.jpg">
 At this stage, the glyph does not have a fixed point size. Remember that point size is measured as the distance from the base line of one line of text to the base line of the next line of single-spaced text. Because the Font Manager has the measurements of the outline relative to the base line and ascent line, it can correlate the measurements with the requested point size and calculate how large the outline should be for that point size. <P>
 The Font Manager uses the contours to determine the boundaries of the bitmap for this glyph when it is displayed. For example, the Macintosh computer's screen is a grid made of pixels. The Font Manager fits the glyph, scaled for the correct size, to this grid. If the center of one section of this grid--comparable to a pixel or a printer dot--falls on a contour or within two contours, the Font Manager sets this bit for the bitmap.<A NAME=MARKER-2-87></A> <P>
 Because there are two contours for the glyph in <A HREF=#MARKER-9-200>Figure 4-11</A>, the Font Manager begins with pixels at the boundary marked by contour 1 and stops when it gets to contour 2. Some glyphs need only one contour, such as the uppercase "I" in some fonts. Others have three or more contours, such as the - glyph from the ITC Zapf Dingbats font.<A NAME=MARKER-2-34></A> <P>
 If the pixels (or dots) are tiny in proportion to the outline (when resolution is high or the point size of the glyph is large), they fill out the outline smoothly, and any pixels that jut out from the contours are not noticeable. If the display device has a low resolution or the point size is small, the pixels are large in relation to the outline. You can see in <A HREF=#MARKER-9-205>Figure 4-12</A> that the outline has produced an unattractive bitmap. There are gaps and blocky areas that would not be found in the high-resolution versions of the same glyph.<A NAME=MARKER-2-224></A> <A NAME=MARKER-2-204></A><P>
<B>Figure 4-12  <A NAME=MARKER-9-205></A>An unmodified glyph from an outline font at a small point size</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FM-13.jpg">
 Because the size of the pixels or dots used by the display device cannot change, the outline should adapt in order to produce a better bitmap. To achieve this end, font designers include instructions in the outline font resource that indicate how to change the shape of the outline under various conditions, such as low resolution or small point size. The lowercase "b" outline in <A HREF=#MARKER-9-214>Figure 4-13</A> is the same one depicted in <A HREF=#MARKER-9-205>Figure 4-12</A>, except that the Font Manager has applied the instructions to the figure and produced a better bitmapped glyph. These instructions are equivalent to "move these points here" or "change the angle formed by these points." A font designer includes programs consisting of these instructions in certain outline font resource tables, where the Font Manager finds them and executes them under specified conditions. Most applications do not need to use instructions; however, if you want to know more about them, see the book <I>TrueType Font Format Specification</I>.<A NAME=MARKER-2-96></A> <A NAME=MARKER-2-228></A><A NAME=MARKER-2-556></A><P>
 Once the Font Manager has produced the outline according to the design and instructions, it creates a bitmap and sends the bitmap to QuickDraw, which draws it on the screen. The Font Manager then saves the bitmapped glyph in memory (caches it) and uses it the next time the user requests this glyph in this font at this point size. <A NAME=MARKER-2-233></A> <A NAME=MARKER-2-325></A> <A NAME=MARKER-2-326></A><A NAME=MARKER-9-751></A> <A NAME=MARKER-2-213></A><P>
<B>Figure 4-13  <A NAME=MARKER-9-214></A>An instructed glyph from an outline font</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FM-14.jpg">
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-198.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-200.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

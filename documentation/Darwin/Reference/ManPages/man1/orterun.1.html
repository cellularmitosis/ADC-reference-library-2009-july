<html><head><title>Mac OS X
 Manual Page For orterun(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/orterun" title="Mac OS X
 Manual Page for orterun(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/orterun"; name=orterun(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MPIRUN(1)                                     OPEN MPI COMMANDS                                    <!-- a -->MPIRUN(1)<!-- /a -->



<b>NAME</b>
       orterun, mpirun, mpiexec - Execute serial and parallel jobs in Open MPI.

       <b>Note:</b>  <u>mpirun</u>,  <u>mpiexec</u>,  and  <u>orterun</u> are all exact synonyms for each other.  Using any of the names
       will result in exactly identical behavior.

<b>SYNOPSIS</b>
       Single Process Multiple Data (SPMD) Model:

       <b>mpirun</b> [ options ] <b>&lt;program&gt;</b> [ &lt;args&gt; ]

       Multiple Instruction Multiple Data (MIMD) Model:

       <b>mpirun</b> [ global_options ]
              [ local_options1 ] <b>&lt;program1&gt;</b> [ &lt;args1&gt; ] :
              [ local_options2 ] <b>&lt;program2&gt;</b> [ &lt;args2&gt; ] :
              ... :
              [ local_optionsN ] <b>&lt;programN&gt;</b> [ &lt;argsN&gt; ]


       Note that in both models, invoking <u>mpirun</u> via an absolute path name is equivalent to  specifying  the
       <u>--prefix</u>  option  with a <u>&lt;dir&gt;</u> value equivalent to the directory where <u>mpirun</u> resides, minus its last
       subdirectory.  For example:

           <b>shell$</b> /usr/local/bin/mpirun ...

       is equivalent to

           <b>shell$</b> mpirun --prefix /usr/local


<b>QUICK</b> <b>SUMMARY</b>
       If you are simply looking for how to run an MPI application, you probably want to use a command  line
       of the following form:

           <b>shell$</b> mpirun [ -np X ] [ --hostfile &lt;filename&gt; ]  &lt;program&gt;

       This  will  run  X  copies of <u>&lt;program&gt;</u> in your current run-time environment (if running under a sup-<font color="#ffffff" class="whiteout">ported&nbsp;supported</font>
       ported resource manager, Open MPI's <u>mpirun</u> will usually automatically use the corresponding  resource
       manager process starter, as opposed to, for example, <u>rsh</u> or <u>ssh</u>, which require the use of a hostfile,
       or will default to running all X copies on the localhost), scheduling (by default) in  a  round-robin
       fashion by CPU slot.  See the rest of this page for more details.

<b>OPTIONS</b>
       <u>mpirun</u>  will  send  the  name  of the directory where it was invoked on the local node to each of the
       remote nodes, and attempt to change to that directory.  See the "Current Working  Directory"  section
       below for further details.

       <b>&lt;args&gt;</b>    Pass  these  run-time  arguments to every new process.  These must always be the last argu-<font color="#ffffff" class="whiteout">ments&nbsp;arguments</font>
                 ments to <u>mpirun</u>. If an app context file is used, <u>&lt;args&gt;</u> will be ignored.

       <b>&lt;program&gt;</b> The program executable. This is identified as the first non-recognized argument to  mpirun.

       <b>-aborted</b>, <b>--aborted</b> &lt;#&gt;
                 Set the maximum number of aborted processes to display.

       <b>--app</b> &lt;appfile&gt;
                 Provide an appfile, ignoring all other command line options.

       <b>-bynode</b>, <b>--bynode</b>
                 Allocate (map) the processes by node in a round-robin scheme.

       <b>-byslot</b>, <b>--byslot</b>
                 Allocate (map) the processes by slot in a round-robin scheme. This is the default.

       <b>-c</b> &lt;#&gt;    Synonym for <u>-np</u>.

       <b>-debug</b>, <b>--debug</b>
                 Invoke the user-level debugger indicated by the <u>orte</u><b>_</b><u>base</u><b>_</b><u>user</u><b>_</b><u>debugger</u> MCA parameter.

       <b>-debugger</b>, <b>--debugger</b>
                 Sequence   of  debuggers  to  search  for  when  <u>--debug</u>  is  used  (i.e.   a  synonym  for
                 <u>orte</u><b>_</b><u>base</u><b>_</b><u>user</u><b>_</b><u>debugger</u> MCA parameter).

       <b>-gmca</b>, <b>--gmca</b> &lt;key&gt; &lt;value&gt;
                 Pass global MCA parameters that are applicable to all  contexts.  <u>&lt;key&gt;</u>  is  the  parameter
                 name; <u>&lt;value&gt;</u> is the parameter value.

       <b>-h</b>, <b>--help</b>
                 Display help for this command

       <b>-H</b> &lt;host1,host2,...,hostN&gt;
                 Synonym for <u>-host</u>.

       <b>-host</b>, <b>--host</b> &lt;host1,host2,...,hostN&gt;
                 List of hosts on which to invoke processes.

       <b>-hostfile</b>, <b>--hostfile</b> &lt;hostfile&gt;
                 Provide a hostfile to use.

       <b>-machinefile</b>, <b>--machinefile</b> &lt;machinefile&gt;
                 Synonym for <u>-hostfile</u>.

       <b>-mca</b>, <b>--mca</b> <b>&lt;key&gt;</b> <b>&lt;value&gt;</b>
                 Send arguments to various MCA modules.  See the "MCA" section, below.

       <b>-n</b>, <b>--n</b> &lt;#&gt;
                 Synonym for <u>-np</u>.

       <b>-nolocal</b>, <b>--nolocal</b>
                 Do  not  run any copies of the launched application on the same node as orterun is running.
                 This option will override listing the localhost with <b>--host</b> or  any  other  host-specifying
                 mechanism.

       <b>-nooversubscribe</b>, <b>--nooversubscribe</b>
                 Do  not  oversubscribe  any  nodes; error (without starting any processes) if the requested
                 number of processes would cause oversubscription.  This option implicitly sets  "max_slots"
                 equal to the "slots" value for each node.

       <b>-np</b> &lt;#&gt;   Run  this  many  copies  of the program on the given nodes.  This option indicates that the
                 specified file is an executable program and not an application context. If no value is pro-<font color="#ffffff" class="whiteout">vided&nbsp;provided</font>
                 vided  for  the  number  of copies to execute (i.e., neither the "-np" nor its synonyms are
                 provided on the command line), Open MPI will automatically execute a copy of the program on
                 each  process  slot (see below for description of a "process slot"). This feature, however,
                 can only be used in the SPMD model and will return an error (without beginning execution of
                 the application) otherwise.

       <b>-nw</b>, <b>--nw</b> Launch  the processes and do not wait for their completion. mpirun will complete as soon as
                 successful launch occurs.

       <b>-path</b>, <b>--path</b> &lt;path&gt;
                 &lt;path&gt; that will be used when attempting to locate requested executables.

       <b>--prefix</b> &lt;dir&gt;
                 Prefix directory that will be used to set the <u>PATH</u> and <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u> on the  remote  node
                 before invoking Open MPI or the target process.  See the "Remote Execution" section, below.

       <b>-q</b>, <b>--quiet</b>
                 Suppress informative messages from orterun during application execution.

       <b>--tmpdir</b> &lt;dir&gt;
                 Set the root for the session directory tree for mpirun only.

       <b>-tv</b>, <b>--tv</b> Launch processes under the TotalView debugger.  Deprecated  backwards  compatibility  flag.
                 Synonym for <u>--debug</u>.

       <b>--universe</b> &lt;username@hostname:universe_name&gt;
                 For this application, set the universe name as:
                      username@hostname:universe_name

       <b>-v</b>, <b>--verbose</b>
                 Be verbose

       <b>-V</b>, <b>--version</b>
                 Print  version  number.   If  no other arguments are given, this will also cause orterun to
                 exit.

       <b>-wd</b> &lt;dir&gt; Synonym for <u>-wdir</u>.

       <b>-wdir</b> &lt;dir&gt;
                 Change to the directory &lt;dir&gt; before the user's program executes.  See the "Current Working
                 Directory"  section for notes on relative paths.  <b>Note:</b> If the <u>-wdir</u> option appears both on
                 the command line and in an application context, the context will take precedence  over  the
                 command line.

       <b>-x</b> &lt;env&gt;  Export  the  specified  environment variables to the remote nodes before executing the pro-<font color="#ffffff" class="whiteout">gram.&nbsp;program.</font>
                 gram.  Existing environment variables can be specified (see the Examples  section,  below),
                 or new variable names specified with corresponding values.  The parser for the <u>-x</u> option is
                 not very sophisticated; it does not even understand quoted values.  Users  are  advised  to
                 set variables in the environment, and then use <u>-x</u> to export (not define) them.

       The  following  options  are useful for developers; they are not generally useful to most ORTE and/or
       MPI users:

       <b>-d</b>, <b>--debug-devel</b>
              Enable debugging of the OpenRTE (the run-time layer in Open MPI).  This is not generally  use-<font color="#ffffff" class="whiteout">ful&nbsp;useful</font>
              ful for most users.

       <b>--debug-daemons</b>
              Enable debugging of any OpenRTE daemons used by this application.

       <b>--debug-daemons-file</b>
              Enable debugging of any OpenRTE daemons used by this application, storing output in files.

       <b>--no-daemonize</b>
              Do not detach OpenRTE daemons used by this application.

<b>DESCRIPTION</b>
       One invocation of <u>mpirun</u> starts an MPI application running under Open MPI. If the application is sin-<font color="#ffffff" class="whiteout">gle&nbsp;single</font>
       gle process multiple data (SPMD), the application can be specified on the <u>mpirun</u> command line.

       If the application is multiple instruction multiple data (MIMD), comprising of multiple programs, the
       set  of  programs  and argument can be specified in one of two ways: Extended Command Line Arguments,
       and Application Context.

       An application context describes the MIMD program set including all arguments  in  a  separate  file.
       This  file  essentially  contains  multiple  <u>mpirun</u> command lines, less the command name itself.  The
       ability to specify different options for different instantiations of a program is another  reason  to
       use an application context.

       Extended  command  line  arguments allow for the description of the application layout on the command
       line using colons (<u>:</u>) to separate the specification of programs and arguments. Some options are glob-<font color="#ffffff" class="whiteout">ally&nbsp;globally</font>
       ally  set across all specified programs (e.g. --hostfile), while others are specific to a single pro-<font color="#ffffff" class="whiteout">gram&nbsp;program</font>
       gram (e.g. -np).

   <b>Process</b> <b>Slots</b>
       Open MPI uses "slots" to represent a potential location for a process.  Hence, a node  with  2  slots
       means that 2 processes can be launched on that node. For performance, the community typically equates
       a "slot" with a physical CPU, thus ensuring that any process assigned to that slot  has  a  dedicated
       processor. This is not, however, a requirement for the operation of Open MPI.

       Slots can be specified in hostfiles after the hostname.  For example:

       host1.example.com slots=4
           Indicates that there are 4 process slots on host1.

       If  no slots value is specified, then Open MPI will automatically assign a default value of "slots=1"
       to that host.

       When running under resource managers (e.g., SLURM, Torque, etc.), Open MPI will obtain both the host-<font color="#ffffff" class="whiteout">names&nbsp;hostnames</font>
       names  and  the  number  of slots directly from the resource manger.  For example, if running under a
       SLURM job, Open MPI will automatically receive the hosts that SLURM has allocated to the job as  well
       as  how  many  slots on each node that SLURM says are usable - in most high-performance environments,
       the slots will equate to the number of processors on the node.

       When deciding where to launch processes, Open MPI will first fill up all available slots before over-<font color="#ffffff" class="whiteout">subscribing&nbsp;oversubscribing</font>
       subscribing (see "Location Nomenclature", below, for more details on the scheduling algorithms avail-<font color="#ffffff" class="whiteout">able).&nbsp;available).</font>
       able).  Unless told otherwise, Open MPI will arbitrarily oversubscribe nodes.  For  example,  if  the
       only  node available is the localhost, Open MPI will run as many processes as specified by the -n (or
       one of its variants) command line option on the localhost (although they may run quite slowly,  since
       they'll all be competing for CPU and other resources).

       Limits  can  be placed on oversubscription with the "max_slots" attribute in the hostfile.  For exam-<font color="#ffffff" class="whiteout">ple:&nbsp;example:</font>
       ple:

       host2.example.com slots=4 max_slots=6
           Indicates that there are 4 process slots on host2.  Further, Open MPI is limited to  launching  a
           maximum of 6 processes on host2.

       host3.example.com slots=2 max_slots=2
           Indicates  that there are 2 process slots on host3 and that no oversubscription is allowed (simi-<font color="#ffffff" class="whiteout">lar&nbsp;(similar</font>
           lar to the <u>--nooversubscribe</u> option).

       host4.example.com max_slots=2
           Shorthand; same as listing "slots=2 max_slots=2".

       Note that Open MPI's support for resource managers does not currently set the "max_slots" values  for
       hosts.   If you wish to prevent oversubscription in such scenarios, use the <u>--nooversubscribe</u> option.

       In scenarios where the user wishes to launch an application across all available slots by not provid-<font color="#ffffff" class="whiteout">ing&nbsp;providing</font>
       ing a "-n" option on the mpirun command line, Open MPI will launch a process on each process slot for
       each host within the provided environment. For example, if a hostfile has been  provided,  then  Open
       MPI will spawn processes on each identified host up to the "slots=x" limit if oversubscription is not
       allowed. If oversubscription is allowed (the default), then Open MPI will  spawn  processes  on  each
       host  up  to  the  "max_slots=y"  limit  if  that  value is provided. In all cases, the "-bynode" and
       "-byslot" mapping directives will be enforced to ensure proper placement of process ranks.

   <b>Location</b> <b>Nomenclature</b>
       As described above, <u>mpirun</u> can specify arbitrary locations in the current Open MPI  universe.   Loca-<font color="#ffffff" class="whiteout">tions&nbsp;Locations</font>
       tions can be specified either by CPU or by node.

       <b>Note:</b>  This  nomenclature  does not force Open MPI to bind processes to CPUs -- specifying a location
       "by CPU" is really a convenience mechanism for SMPs that ultimately maps down to a specific node.

       Specifying locations by node will launch one copy of an executable per  specified  node.   Using  the
       <u>--bynode</u>  option tells Open MPI to use all available nodes.  Using the <u>--byslot</u> option tells Open MPI
       to use all slots on an available node before allocating resources on the next  available  node.   For
       example:

       mpirun --bynode -np 4 a.out
           Runs  one  copy  of  the  the  executable  <u>a.out</u> on all available nodes in the Open MPI universe.
           MPI_COMM_WORLD rank 0 will be on node0, rank 1 will be on node1,  etc.  Regardless  of  how  many
           slots are available on each of the nodes.

       mpirun --byslot -np 4 a.out
           Runs  one  copy  of the the executable <u>a.out</u> on each slot on a given node before running the exe-<font color="#ffffff" class="whiteout">cutable&nbsp;executable</font>
           cutable on other available nodes.

   <b>Specifying</b> <b>Hosts</b>
       Hosts can be specified in a number of ways. The most common of which is in a

          <b>shell$</b> cat my-hostfile
          node00 slots=2
          node01 slots=2
          node02 slots=2


       mpirun --hostfile my-hostfile -np 3 a.out
              This will run one copy of the executable <u>a.out</u> on hosts node00,node01, and node02.

       Another method for specifying hosts is directly on the command line. Here can can include and exclude
       hosts from the set of hosts to run on. For example:

       mpirun -np 3 --host a a.out
              Runs three copies of the executable <u>a.out</u> on host a.

       mpirun -np 3 --host a,b,c a.out
              Runs one copy of the executable <u>a.out</u> on hosts a, b, and c.

       mpirun -np 3 --hostfile my-hostfile --host node00 a.out
              Runs three copies of the executable <u>a.out</u> on host node00.

       mpirun -np 3 --hostfile my-hostfile --host node10 a.out
              This will prompt an error since node10 is not in my-hostfile; mpirun will abort.

       shell$ mpirun -np 1 --host a hostname : -np 2 --host b,c uptime
              Runs one copy of the executable <u>hostname</u> on host a. And runs one copy of the executable <u>uptime</u>
              on hosts b and c.

   <b>No</b> <b>Local</b> <b>Launch</b>
       Using the <b>--nolocal</b> option to orterun tells the system to not launch any of the application processes
       on  the  same  node  that orterun is running.  While orterun typically blocks and consumes few system
       resources, this option can be helpful for launching very large jobs where orterun may  actually  need
       to  use  noticable  amounts of memory and/or processing time.  <b>--nolocal</b> allows orteun to run without
       sharing the local node with the launched applications, and likewise allows the launched  applications
       to run unhindered by orterun's system usage.

       Note  that  <b>--nolocal</b>  will  override  any other specification to launch the application on the local
       node.  It will disqualify the localhost from being capable of running any processes in  the  applica-<font color="#ffffff" class="whiteout">tion.&nbsp;application.</font>
       tion.

       shell$ mpirun -np 1 --host localhost --nolocal hostname
              This  example  will  result  in  an error because orterun will not find anywhere to launch the
              application.

   <b>No</b> <b>Oversubscription</b>
       Using the <u>--nooversubscribe</u> option causes Open MPI to implicitly set the "max_slots" value to be  the
       same  as  the  "slots" value for each node.  This can be especially helpful when running jobs under a
       resource manager because Open MPI currently only sets the "slots" value for each node that it obtains
       from the resource manager.

   <b>Application</b> <b>Context</b> <b>or</b> <b>Executable</b> <b>Program?</b>
       To  distinguish the two different forms, <u>mpirun</u> looks on the command line for <u>--app</u> option.  If it is
       specified, then the file named on the command line is assumed to be an application context.  If it is
       not specified, then the file is assumed to be an executable program.

   <b>Locating</b> <b>Files</b>
       If  <u>no</u>  relative  or absolute path is specified for a file, Open MPI will look for files by searching
       the directories in the user's PATH environment variable as defined on the source <!-- a -->node(s)<!-- /a -->.

       If a relative directory is specified, it must be relative to the initial working directory determined
       by  the  specific starter used. For example when using the rsh or ssh starters, the initial directory
       is $HOME by default. Other starters may set the initial directory to the  current  working  directory
       from the invocation of <u>mpirun</u>.

   <b>Current</b> <b>Working</b> <b>Directory</b>
       The  <u>-wdir</u>  mpirun  option (and its synonym, <u>-wd</u>) allows the user to change to an arbitrary directory
       before the program is invoked.  It can also be used in application context files to  specify  working
       directories on specific nodes and/or for specific applications.

       If  the  <u>-wdir</u> option appears both in a context file and on the command line, the context file direc-<font color="#ffffff" class="whiteout">tory&nbsp;directory</font>
       tory will override the command line value.

       If the <u>-wdir</u> option is specified, Open MPI will attempt to change to the specified directory  on  all
       of the remote nodes. If this fails, <u>mpirun</u> will abort.

       If  the <u>-wdir</u> option is <b>not</b> specified, Open MPI will send the directory name where <u>mpirun</u> was invoked
       to each of the remote nodes. The remote nodes will try to change  to  that  directory.  If  they  are
       unable (e.g., if the directory does not exit on that node), then Open MPI will use the default direc-<font color="#ffffff" class="whiteout">tory&nbsp;directory</font>
       tory determined by the starter.

       All directory changing occurs before the user's program is invoked; it does not wait  until  <u>MPI</u><b>_</b><u>INIT</u>
       is called.

   <b>Standard</b> <b>I/O</b>
       Open  MPI  directs UNIX standard input to /dev/null on all processes except the MPI_COMM_WORLD rank 0
       process. The MPI_COMM_WORLD rank 0 process inherits standard input from <u>mpirun</u>.  <b>Note:</b> The node  that
       invoked <u>mpirun</u> need not be the same as the node where the MPI_COMM_WORLD rank 0 process resides. Open
       MPI handles the redirection of <u>mpirun</u>'s standard input to the rank 0 process.

       Open MPI directs UNIX standard output and error from remote nodes to the node that invoked <u>mpirun</u> and
       prints  it on the standard output/error of <u>mpirun</u>.  Local processes inherit the standard output/error
       of <u>mpirun</u> and transfer to it directly.

       Thus it is possible to redirect standard I/O for Open MPI applications by using the typical shell re-<font color="#ffffff" class="whiteout">direction&nbsp;redirection</font>
       direction procedure on <u>mpirun</u>.

             <b>shell$</b> mpirun -np 2 my_app &lt; my_input &gt; my_output

       Note  that  in  this  example  <u>only</u>  the  MPI_COMM_WORLD  rank 0 process will receive the stream from
       <u>my</u><b>_</b><u>input</u> on stdin.  The stdin on all the other nodes will be tied to /dev/null.  However, the  stdout
       from all nodes will be collected into the <u>my</u><b>_</b><u>output</u> file.

   <b>Signal</b> <b>Propagation</b>
       When  orterun  receives  a  SIGTERM and SIGINT, it will attempt to kill the entire job by sending all
       processes in the job a SIGTERM, waiting a small number of seconds, then sending all processes in  the
       job  a  SIGKILL.   SIGUSR1 and SIGUSR2 signals received by orterun are propagated to all processes in
       the job.  Other signals are not currently propagated by orterun.

   <b>Process</b> <b>Termination</b> <b>/</b> <b>Signal</b> <b>Handling</b>
       During the run of an MPI application, if any rank dies abnormally  (either  exiting  before  invoking
       <u>MPI</u><b>_</b><u>FINALIZE</u>,  or  dying  as the result of a signal), <u>mpirun</u> will print out an error message and kill
       the rest of the MPI application.

       User signal handlers should probably avoid trying to cleanup MPI state (Open MPI is, currently,  nei-<font color="#ffffff" class="whiteout">ther&nbsp;neither</font>
       ther  thread-safe  nor  async-signal-safe).   For example, if a segmentation fault occurs in <u>MPI</u><b>_</b><u>SEND</u>
       (perhaps because a bad buffer was passed in) and a user signal handler is invoked, if this user  han-<font color="#ffffff" class="whiteout">dler&nbsp;handler</font>
       dler  attempts  to  invoke  <u>MPI</u><b>_</b><u>FINALIZE</u>, Bad Things could happen since Open MPI was already "in" MPI
       when the error occurred.  Since <u>mpirun</u> will notice that the process died due to a signal, it is prob-<font color="#ffffff" class="whiteout">ably&nbsp;probably</font>
       ably not necessary (and safest) for the user to only clean up non-MPI state.

   <b>Process</b> <b>Environment</b>
       Processes  in the MPI application inherit their environment from the Open RTE daemon upon the node on
       which they are running.  The environment is typically inherited from the  user's  shell.   On  remote
       nodes,  the  exact environment is determined by the boot MCA module used.  The <u>rsh</u> launch module, for
       example, uses either <u>rsh</u>/<u>ssh</u> to launch the Open RTE daemon on remote nodes,  and  typically  executes
       one  or  more  of  the  user's  shell-setup files before launching the Open RTE daemon.  When running
       dynamically linked applications which require the <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u> environment  variable  to  be  set,
       care must be taken to ensure that it is correctly set when booting Open MPI.

       See the "Remote Execution" section for more details.

   <b>Remote</b> <b>Execution</b>
       Open MPI requires that the <u>PATH</u> environment variable be set to find executables on remote nodes (this
       is typically only necessary in <u>rsh</u>- or <u>ssh</u>-based environments -- batch/scheduled  environments  typi-<font color="#ffffff" class="whiteout">cally&nbsp;typically</font>
       cally copy the current environment to the execution of remote jobs, so if the current environment has
       <u>PATH</u> and/or <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u> set properly, the remote nodes will also have it set properly).  If  Open
       MPI  was  compiled  with shared library support, it may also be necessary to have the <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u>
       environment variable set on remote nodes as well (especially to find the shared libraries required to
       run user MPI applications).

       However,  it  is  not  always  desirable  or  possible to edit shell startup files to set <u>PATH</u> and/or
       <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u>.  The <u>--prefix</u> option is provided for some simple configurations where  this  is  not
       possible.

       The  <u>--prefix</u> option takes a single argument: the base directory on the remote node where Open MPI is
       installed.  Open MPI will use this directory to set the remote <u>PATH</u> and <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u>  before  exe-<font color="#ffffff" class="whiteout">cuting&nbsp;executing</font>
       cuting  any Open MPI or user applications.  This allows running Open MPI jobs without having pre-con-<font color="#ffffff" class="whiteout">figued&nbsp;pre-configued</font>
       figued the <u>PATH</u> and <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u> on the remote nodes.

       Open MPI adds the basename of the current node's "bindir" (the directory where Open MPI's executables
       are  installed)  to the prefix and uses that to set the <u>PATH</u> on the remote node.  Similarly, Open MPI
       adds the basename of the current node's "libdir"  (the  directory  where  Open  MPI's  libraries  are
       installed) to the prefix and uses that to set the <u>LD</u><b>_</b><u>LIBRARY</u><b>_</b><u>PATH</u> on the remote node.  For example:

       Local bindir:  /local/node/directory/bin

       Local libdir:  /local/node/directory/lib64

       If the following command line is used:

           <b>shell$</b> mpirun --prefix /remote/node/directory

       Open  MPI will add "/remote/node/directory/bin" to the <u>PATH</u> and "/remote/node/directory/lib64" to the
       D_LIBRARY_PATH on the remote node before attempting to execute anything.

       Note that <u>--prefix</u> can be set on a per-context basis, allowing for  different  values  for  different
       nodes.

       The <u>--prefix</u> option is not sufficient if the installation paths on the remote node are different than
       the local node (e.g., if "/lib" is used on the local node, but "/lib64" is used on the remote  node),
       or if the installation paths are something other than a subdirectory under a common prefix.

       Note  that executing <u>mpirun</u> via an absolute pathname is equivalent to specifying <u>--prefix</u> without the
       last subdirectory in the absolute pathname to <u>mpirun</u>.  For example:

           <b>shell$</b> /usr/local/bin/mpirun ...

       is equivalent to

           <b>shell$</b> mpirun --prefix /usr/local

   <b>Exported</b> <b>Environment</b> <b>Variables</b>
       All environment variables that are named in the form OMPI_* will automatically  be  exported  to  new
       processes  on  the  local  and  remote nodes.  The <u>-x</u> option to <u>mpirun</u> can be used to export specific
       environment variables to the new processes.  While the syntax of the <u>-x</u> option allows the  definition
       of  new variables, note that the parser for this option is currently not very sophisticated - it does
       not even understand quoted values.  Users are advised to set variables in the environment and use  <u>-x</u>
       to export them; not to define them.

   <b>MCA</b> <b>(Modular</b> <b>Component</b> <b>Architecture)</b>
       The  <u>-mca</u>  switch  allows  the passing of parameters to various MCA modules.  MCA modules have direct
       impact on MPI programs because they allow tunable parameters to be set at run time (such as which BTL
       communication device driver to use, what parameters to pass to that BTL, etc.).

       The <u>-mca</u> switch takes two arguments: <u>&lt;key&gt;</u> and <u>&lt;value&gt;</u>.  The <u>&lt;key&gt;</u> argument generally specifies which
       MCA module will receive the value.  For example, the <u>&lt;key&gt;</u> "btl" is used to select which  BTL  to  be
       used for transporting MPI messages.  The <u>&lt;value&gt;</u> argument is the value that is passed.  For example:

       mpirun -mca btl tcp,self -np 1 foo
           Tells  Open  MPI to use the "tcp" and "self" BTLs, and to run a single copy of "foo" an allocated
           node.

       mpirun -mca btl self -np 1 foo
           Tells Open MPI to use the "self" BTL, and to run a single copy of "foo" an allocated node.

       The <u>-mca</u> switch can be used multiple times to specify different <u>&lt;key&gt;</u> and/or <u>&lt;value&gt;</u>  arguments.   If
       the same <u>&lt;key&gt;</u> is specified more than once, the <u>&lt;value&gt;</u>s are concatenated with a comma (",") separat-<font color="#ffffff" class="whiteout">ing&nbsp;separating</font>
       ing them.

       <b>Note:</b> The <u>-mca</u> switch is simply a shortcut for setting environment variables.  The same effect may be
       accomplished  by  setting corresponding environment variables before running <u>mpirun</u>.  The form of the
       environment variables that Open MPI sets are:

             OMPI_&lt;key&gt;=&lt;value&gt;

       Note that the <u>-mca</u> switch overrides any previously set environment variables.  Also note that unknown
       <u>&lt;key&gt;</u>  arguments  are  still set as environment variable -- they are not checked (by <u>mpirun</u>) for cor-<font color="#ffffff" class="whiteout">rectness.&nbsp;correctness.</font>
       rectness.  Illegal or incorrect <u>&lt;value&gt;</u> arguments may or may not be reported --  it  depends  on  the
       specific MCA module.

<b>EXAMPLES</b>
       Be sure to also see the examples in the "Location Nomenclature" section, above.

       mpirun -np 1 prog1
           Load  and  execute  prog1  on  one node.  Search the user's $PATH for the executable file on each
           node.

       mpirun -np 8 --byslot prog1
           Run 8 copies of prog1 wherever Open MPI wants to run them.

       mpirun -np 4 -mca btl ib,tcp,self prog1
           Run 4 copies of prog1 using the "ib", "tcp", and "self" BTL's for the transport of MPI  messages.

<b>RETURN</b> <b>VALUE</b>
       <u>mpirun</u> returns 0 if all ranks started by <u>mpirun</u> exit after calling MPI_FINALIZE.  A non-zero value is
       returned if an internal error occurred in  mpirun,  or  one  or  more  ranks  exited  before  calling
       MPI_FINALIZE.  If an internal error occurred in mpirun, the corresponding error code is returned.  In
       the event that one or more ranks exit before calling MPI_FINALIZE, the return value of  the  rank  of
       the  process that <u>mpirun</u> first notices died before calling MPI_FINALIZE will be returned.  Note that,
       in general, this will be the first rank that died but is not guaranteed to be so.

       However, note that if the <u>-nw</u> switch is used, the return value from mpirun does not indicate the exit
       status of the ranks.



Open MPI                                         March 2006                                        <!-- a -->MPIRUN(1)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/orterun.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/orterun.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/orterun.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

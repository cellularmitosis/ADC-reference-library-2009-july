<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Item Color Table Resource(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING441></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-440.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-442.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-370.html"><B>Chapter 6 - Dialog Manager</B></A> / <A HREF="Toolbox-386.html"><B>Dialog Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-435.html"><B>Resources</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING441-0></A>
<H3>The Item Color Table Resource</H3>
 <A NAME=MARKER-2-669></A><A NAME=MARKER-2-670></A><A NAME=MARKER-2-671></A>On color monitors, the Dialog Manager automatically draws the items in your dialog and alert boxes so that they match the colors of the items used by system software in its dialog and alert boxes. The Dialog Manager also uses the default system font when it draws the text in the static text and editable text items of your dialog and alert boxes.<P>
 If you feel absolutely compelled to use nonstandard fonts and colors, you can use the Dialog Manager to specify your own colors, typeface, font style, and font size.<P>
<DL>
<DT><B>Note</B>
<DD>The Dialog Manager displays the typeface, font style, and font size you specify only on color monitors.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Your application can specify these by creating an item color table (<CODE>'ictb'<DFN>) </DFN></CODE>resource <DFN>with the same resource ID as the dialog or alert box's item list resource , and then providing a </DFN>dialog color table resource for a dialog box or an alert color table resource for an alert box. You don't have to call any new routines to change the colors, typefaces, font styles, or font sizes used in dialog boxes. When you call the <CODE>GetNewDialog</CODE> function, for example, the Dialog Manager automatically attempts to load an item color table resource with the same resource ID as the item list resource.<P>
<DL>
<DT><B>Note</B>
<DD>To make it easier to localize your application for other script <BR>systems, you should not change the font. Do not use a smaller font, <BR>such as 9-point Geneva; some script systems, such as KanjiTalk, <BR>require 12-point fonts.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Also, be aware that nonstandard colors for items in your dialog and alert boxes may initially confuse your users.<P>
<DL>
<DT><B>WARNING</B>
<DD>Because the behavior of color alert and dialog boxes, color items, and color icons is unreliable on computers using system software versions earlier than System 7, do not create these color elements if you wish to maintain backward compatibility.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 If you want to provide an item color table resource for an alert box or a dialog box, you must create an alert color table resource or a dialog color table resource, even if the item color table resource has no actual color information and describes only static text and editable text style changes.<P>
 An item color table resource is a resource of type <CODE>'ictb'<DFN>. All item color table resources must have resource ID numbers greater than 128.</DFN></CODE><P>
 There is no Rez template available for creating item color table resources. When <BR>you compile an item color table resource, it should follow the format illustrated in <BR><A HREF=#MARKER-9-672>Figure 6-49</A>.<P>
<B>Figure 6-49  <A NAME=MARKER-9-672></A>Structure of a compiled item color table resource</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-L-57.jpg"><P>
 You define an item color table resource for a dialog box or an alert box by specifying these elements in a resource with the <CODE>'ictb'<DFN> resource type:</DFN></CODE><P>
<UL>
<LI>Items. These consist of a variable number of items, corresponding to those in an item list resource with the same resource ID as this item color table resource.
<LI>Control color tables and text style tables.<P>
<UL>
<LI>A <B>control color table</B> defines the colors used in a control. Several controls can share the same control color table.<A NAME=MARKER-2-673></A>
<LI>A <B>text style table</B> defines the font family, font style, font size, and color of text in an editable text item or a static text item. Several editable text and static text items can share the same text style table.<A NAME=MARKER-2-723></A><P>
</UL>
<LI>Optionally, a list of font families. If you use any text style tables, you generally conclude the item color table resource with a list of text strings, each of which specifies a font family. Although you may specify font numbers instead of font names, it's much more reliable to specify names, because system software may renumber these fonts as they are installed and removed. For every editable text item and static text item listed at the top of the item color table resource, specify a font family at the bottom of the resource.<P>
</UL>
 The information contained in an element depends on the type of item it describes:<P>
<UL>
<LI>Item data. This contains information about how this item is described in the rest of this resource.<P>
<UL>
<LI>For a control, this is the length (in bytes) of its control color table.
<LI>For a static text item or an editable text item, the bits of this element determine which elements of the text style table to use and are interpreted as follows:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bit<TH>Meaning<TR>
<TD>0<TD>Change the font family.<TR>
<TD>1<TD>Change the typeface.<TR>
<TD>2<TD>Change the font size.<TR>
<TD>3<TD>Change the font foreground color.<TR>
<TD>4<TD>Add the font size.<TR>
<TD>13<TD>Change the font background color.<TR>
<TD>14<TD>Change the font mode.<TR>
<TD>15<TD>The font element is an offset to the name.</TABLE>
<P>
</UL>
<LI>Item offset. The number of bytes from the beginning of the resource to either the control color table or the text style table that describes this item.<P>
</UL>
 When both the item data and item offset elements are set to 0, then the control or text item is drawn with the default colors, typeface, font size, and font style. Even if only the first few items of the dialog box have color style information, there must be room for all of the items actually in the box (with the item data and item offset elements of the unused entries set to 0).<A NAME=MARKER-2-675></A><P>
 For controls, the colors are described by a color table identical to a <CODE>'cctb'</CODE> resource used by the Control Manager. Multiple controls can use the same color table. If the resource sets both the item data and the item offset element to 0, then the system's default colors are used for the control. The format of a control color table is illustrated in <A HREF=#MARKER-9-676>Figure 6-50</A>. <P>
<B>Figure 6-50  <A NAME=MARKER-9-676></A>Structure of a compiled control color table</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-L-58.jpg"><P>
 A control color table consists of the following elements:<P>
<UL>
<LI>Reserved. This should always be set to a value of 0.
<LI>Reserved. Again, should always be set to a value of 0.
<LI>Number of control parts. For standard controls other than scroll bars, this should be set to 3, because a standard control uses only three parts: frame, control body, and text. For scroll bars, this should be set to 12; see the description of the control color table resource in the chapter "Control Manager" for information on specifying the colors for a scroll bar. To create a control that uses other parts, you must create a custo<DFN>m <CODE>'CDEF' resource, as described in the chapter "Control Manager" in this book.</CODE></DFN>
<LI>Part identifier. This is a value that identifies a part of the first control. The following list shows the values and constants they represent for the standard controls other than scroll bars. For information on the part identifiers for a scroll bar, see the description of the control color table resource in the chapter "The Control Manager" in this book. They can be listed in any order in the control color table.
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TH>Control part<TR>
<TD>cFrameColor<TD>0<TD><A NAME=MARKER-2-15></A>Frame<A NAME=MARKER-2-15></A><TR>
<TD>cBodyColor<TD>1<TD><A NAME=MARKER-2-17></A>Body<A NAME=MARKER-2-17></A><TR>
<TD>cTextColor<TD>2<TD><A NAME=MARKER-2-19></A>Text (such as titles)<A NAME=MARKER-2-19></A></TABLE>

<LI>Red component. This is an integer that represents the intensity of the red component of the color to use when drawing this control part.
<LI>Green component. This is an integer that represents the intensity of the green component of the color to use when drawing this control part.
<LI>Blue component. This is an integer that represents the intensity of the blue component of the color to use when drawing this control part.
<LI>Part identifier, and the red, green, and blue color components for the next control part. Specify color components for every part of this control whose color you want to change. If a part is not listed in the control color table, the Dialog Manager draws it in its default color.<A NAME=MARKER-2-677></A><P>
</UL>
 <A HREF=#MARKER-9-679>Figure 6-51</A> shows the format of a text style table.<A NAME=MARKER-2-678></A><P>
<B>Figure 6-51  <A NAME=MARKER-9-679></A>Structure of a compiled text style table</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-L-59.jpg"><P>
 The text style table must be 20 bytes long, as shown in <A HREF=#MARKER-9-679>Figure 6-51</A>. Multiple editable text and static text items can use the same text style record. To display text in the standard typeface, color, font size, and font style, set the item data and item offset elements for the item to 0. Allocate space for all fields in the text style table, even if they are not used.<P>
 A text style table consists of the following elements (see <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I> for a discussion of font families, font style, and point sizes):<P>
<UL>
<LI>Typeface. This is the name of the font family to use. If bit 15 in the item data element is set to 1, then this element contains an offset (in bytes) to a font name element at the end of the resource. If bit 0 in the item data element is set to 1, then this element contains the number of a font family. If bit 0 in the item data element is set to 0, this element is set to 0, and the system default font is used. 
<LI>Font style. This is the font style to use. If bit 1 in the item data element is set to 1, then this element uses the bits of the low-order byte to describe which styles to apply to the text. If all bits in the low-order byte are set to 0, the plain font style is used. The bit numbers and the styles they represent are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bit <BR>value<TH>Style<TR>
<TD>0<TD>Bold<TR>
<TD>1<TD>Italic<TR>
<TD>2<TD>Underline<TR>
<TD>3<TD>Outline<TR>
<TD>4<TD>Shadow<TR>
<TD>5<TD>Condensed<TR>
<TD>6<TD>Extended</TABLE>

<LI>Font size. This is the point size of the font. If bit 2 in the item data element is set to 1, this element contains a value representing a point size. If bit 4 in the item data element is set to 1, this element contains a value to add to the current point size of the text. If bit 0 in the item data element is set to 0, this element is set to 0, and the system font size (12) is used.
<LI>Text red color. If bit 3 in the item data element is set to 1, this element contains an integer that represents the intensity of the red component of the color to use when drawing the text.
<LI>Text green color. If bit 3 in the item data element is set to 1, this element contains an integer that represents the intensity of the green component of the color to use when drawing the text.
<LI>Text blue color. If bit 3 in the item data element is set to 1, this element contains an integer that represents the intensity of the blue component of the color to use when drawing the text.
<LI>Background red color. If bit 13 in the item data element is set to 1, this element contains an integer that represents the intensity of the red component of the color <BR>to use when drawing the background behind the text.
<LI>Background green color. If bit 13 in the item data element is set to 1, this element contains an integer that represents the intensity of the green component of the color <BR>to use when drawing the background behind the text.
<LI>Background blue color. If bit 13 in the item data element is set to 1, this element contains an integer that represents the intensity of the blue component of the color <BR>to use when drawing the background behind the text.
<LI>Mode. If bit 14 in the item data element is set to 1, this element contains an integer that represents how characters are placed in the bit image. The values that the Dialog Manager interprets and the constants that represent them are listed here. See <I>Inside Macintosh: Imaging</I> for a discussion of source transfer modes.<A NAME=MARKER-2-680></A>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TR>
<TD>scrOr<TD><A NAME=MARKER-2-21></A>1<A NAME=MARKER-2-21></A><TR>
<TD>srcXor<TD><A NAME=MARKER-2-23></A>2<A NAME=MARKER-2-23></A><TR>
<TD>srcBic<TD><A NAME=MARKER-2-25></A>3<A NAME=MARKER-2-25></A><A NAME=MARKER-2-26></A><A NAME=MARKER-2-28></A><A NAME=MARKER-2-29></A><A NAME=MARKER-2-30></A></TABLE>
<P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-440.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-442.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<HTML>		<HEAD>        <title>Creatingthe User Interface</title>		</HEAD>	<BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="The_Ingredi_ent_Project.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Building_an_Application.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF122"></a><h2><font face="Helvetica,Arial,Lucida Grande">Creatingthe User Interface</font></h2><!-- apple_doc: pageHeadingEnd --><p><font face="Times">When you create a Java Client application using the ProjectBuilder Assistant, Project Builder puts a nib file in the Interfacesgroup of the project. A nib file is primarily a description of auser interface (or part of a user interface). It resides in theInterfaces group of the project, is edited by the Interface Builderapplication and can be archived along with other resources of yourapplication. This interface file is just like the interface filesin typical applications, which are defined using Cocoa objects.The Enterprise Objects palette translates the Cocoa objects intoSwing objects that Java Client uses to generate the user-interfaceon the client. </font></p><p><font face="Times">You typically construct a user interface using Interface Builder,by dragging objects from a palette and dropping them into the contentwindow. Java Client WebObjects applications require that the EnterpriseObjects palette be loaded into Interface Builder. This palette includestwo objects: EOEditingContext and EODisplayGroup. </font></p><br><a name = "BABGDBCG"></a><h3><font face="Helvetica,Arial,Lucida Grande">Addingthe EnterpriseObjects Palette</font></h3><p><font face="Times">Before you can create the user-interface for a Java Clientapplication, you have to make sure that Interface Builder has theEnterpriseObjects palette loaded. To do this you need to launchInterface Builder and examine its Preferences window.</font></p><ol><p><li>Start InterfaceBuilder.<p>Navigate to <code>/Developer/Applications</code> andlaunch Interface Builder.</p><p> <img src = "../Art/interfacebuildericon.gif" alt = "[image: ../Art/interfacebuildericon.gif]"></p></li></p><p><li>Load the required palettes.<p>In Interface Builder, chooseInterface Builder &gt; Preferences.</p><p>Click the Palettestab.</p> <img src = "../Art/ibpreferences.gif" alt = "[image: ../Art/ibpreferences.gif]"><p>Ifyou don't see the EnterpriseObjects option, you add it by performingthese steps:</p><ol><p><li>Click Add.</li></p><p><li>In the Open Palette dialog, Navigate to the <tt>/Developer/Palettes</tt> directory.</li></p><p><li>Double-click <code>EnterpriseObjects.palette</code>.</li></p></ol><p>Makesure that EnterpriseObjects is selected.</p><p>Close the InterfaceBuilder Preferences window.</p></li></p><p><li>Quit Interface Builder.<p>Choose Interface Builder &gt;Quit Interface Builder.</p></li></p></ol><br><a name = "TPXREF101"></a><h3><font face="Helvetica,Arial,Lucida Grande">LayingOut the User-Interface Elements</font></h3><p><font face="Times">You can construct a basic interface for a Java Client WebObjectsapplication by simply dragging icons from EOModeler into the contentwindow in Interface Builder</font></p><ol><p><li>Open theStudioManager nib file.<p>In the Groups & Files list of theProject Builder main window, open the Interfaces group.</p><p>Double-click <code>StudioManagerInterfaceController.nib</code>.</p><p>Ablank window (the content window), a nib file window, and a palettewindow appear when Interface Builder is launched. In  <a href="#BABDCCFG">Figure 2-3</a> youcan see the windows you'll use to create your application'suser interface.</p><a name = "BABDCCFG"></a><p><font face="Helvetica,Arial,Lucida Grande"><b>Figure2-3 The Interface Builder environment</b></font></p> <img src = "../Art/iblaunch.gif" alt = "[image: ../Art/iblaunch.gif]"><p>If you don'tsee the EnterpriseObjects palette, which contains the EOEditingContext andEODisplayGroup elements, you need to add it. For details on howto perform this task, see  <a href="#BABGDBCG">"Adding the EnterpriseObjects Palette"</a>.</p></li></p><p><li>Open the model file.<p>In the Groups & Files list,open the Resources group.</p><p>Double-click <code>Movies.eomodeld</code>.</p><br><table border = "0" BGCOLOR="#E6E6E6"><tr><td scope="row"><p><b>Note: </b>Thisis a duplicate of the model file you created in  <a href="Creating_the_Movies_Model.html#TPXREF153" target = "_right">"Creating the Movies Model"</a>. Theoriginal model file will not be touched in the remaining of thistutorial.</p></td></tr></table><br></li></p><p><li>Drag the Studio entity from EOModeler into the content windowin Interface Builder. <img src = "../Art/eomstudiodrag.gif" alt = "[image: ../Art/eomstudiodrag.gif]"><p>Inthe nib file window, there's a new EODisplayGroup named "Studio",after the entity you dragged in. Note that the nib file window alsoincludes an EOEditingContext object. An EOEditingContext objectis added to your application along with the first entity you draginto Interface Builder. Because a document typically only needsone EOEditingContext, this object is only added once.</p> <img src = "../Art/ibstudiodisplaygroup.gif" alt = "[image: ../Art/ibstudiodisplaygroup.gif]"><p>(See  <a sector="mod" href="../Concepts/iWhat_Are_EO_ngContexts_.html" target="_top">"What Are EODisplayGroups and EOEditingContexts?"</a> for more on display groups and editing contexts.)</p><p>Anentity EODisplayGroup has keys that correspond to the propertiesin its associated entity. You can examine these keys in the EODisplayGroupInfo window.</p></li></p><p><li>Examine the EODisplayGroup in the Info window.<p>Selectthe Studio EODisplayGroup in the nib file window.</p><p> <img src = "../Art/studiodisplaygroupicon.gif" alt = "[image: ../Art/studiodisplaygroupicon.gif]"></p><p>ChooseTools &gt; Show Info.</p><p>Display the Attributes pane bychoosing it from the pop-up menu below the Info window's titlebar.</p><p>Make sure that "Fetch on load" is selected.</p> <img src = "../Art/ibstudiodisplaygroupinfo.gif" alt = "[image: ../Art/ibstudiodisplaygroupinfo.gif]"><p>The "Fetch on load" optionis important because it allows data to be fetched from the databasewhen you start your application.</p><p>The keys listed correspondto the class properties specified for the entity in EOModeler. Youcan add other keys that are not class properties, such as methodsdefined in the associated enterprise object class.</p><p>Theinterface that was created when you dragged an entity into the windowis already a functional (if simple) application. You can test it.</p></li></p><p><li>Save the interface.</li></p><p><li>Test the interface.<p>Choose File &gt; Test Interface.</p> <img src = "../Art/ibinterfacetest.gif" alt = "[image: ../Art/ibinterfacetest.gif]"><p>Click  <img src = "../Art/ibinterfacetesticon.gif" alt = "[image: ../Art/ibinterfacetesticon.gif]"> in the menubar to end the test.</p><p>Note that because the "Fetch on load" option wasenabled for the Studio EODisplayGroup in its Info window, the datais automatically fetched when you test your interface.</p></li></p></ol><br><a name = "TPXREF123"></a><h3><font face="Helvetica,Arial,Lucida Grande">FormattingCurrency Values</font></h3><p><font face="Times">Notice that the Budget column displays the budget amount foreach studio as an unformatted number. You can make the value forthe budget attribute display using currency formatting.</font></p><p><font face="Times">To set formatting, follow these steps:</font></p><ol><p><li>Select theBudget column head in the table view. You accomplish this by first double-clickingthe table and then clicking the column header.</li></p><p><li>Choose Tools &gt; Show Info.</li></p><p><li>Display the Formatter pane of the Info window.</li></p><p><li>Select a standard currency format.<p>Do not set the formatto show negative values in red. Colored text is not currently implementedin J2SE.</p></li></p></ol> <img src = "../Art/ibnstablecolumninfo.gif" alt = "[image: ../Art/ibnstablecolumninfo.gif]"><br><a name = "TPXREF124"></a><h3><font face="Helvetica,Arial,Lucida Grande">AddingAction Methods</font></h3><p><font face="Times">You can add basic behavior to your application, such as givingit the ability to add, delete, and save objects, without writinga line of code. This is possible because the EODisplayGroup, EOEditingContext,and EOInterfaceController objects in Interface Builder have predefinedaction methods that you can use to trigger operations in your application.An action method is a method that's invoked when the user clicksa button or another control object.</font></p><p><font face="Times">Perform these steps to add action methods to your user-interface:</font></p><ol><p><li>Add the interfaceelements.<p>Add three buttons to your window and label them "Add","Remove", and "Save".</p><p>These buttons will beused to insert new studios, delete existing studios, and save changes.</p></li></p><p><li>Connect the Add and Remove buttons to the <code>insert:</code> and <code>deleteSelection:</code> methods.<p>Control-dragfrom the Add button to the Studio EODisplayGroup.</p> <img src = "../Art/ibbuttonconnectiondrag.gif" alt = "[image: ../Art/ibbuttonconnectiondrag.gif]"><p>In the NSButtonInfo window, choose Outlets from the pop-up menu at the top of the leftcolumn. </p><p>Select <code>target</code> inthe left column.</p><p>Select <code>insert:</code> inthe right column and click Connect.</p> <img src = "../Art/ibaddbuttonconnectioninfo.gif" alt = "[image: ../Art/ibaddbuttonconnectioninfo.gif]"><p>Using the sameprocess, connect the Remove button to the <code>deleteSelection:</code> method.</p></li></p><p><li>Connect the Save button to the owner's <code>save()</code> method<p>Toconnect the Save button, Control-drag from the button to the File'sOwner object in the nib file window.  <img src = "../Art/filesownericon.gif" alt = "[image: ../Art/filesownericon.gif]"></p><p>Inthe Info window of the Save button, choose Outlets in the pop-upmenu at the top of the left column.</p><p>Select target inthe left column.</p><p>Double-click <code>save()</code> inthe right column.</p></li></p></ol><p><font face="Times">The File's Owner icon represents the object that "owns"the nib file, or the nib file's root object. In a Java ClientWebObjects application, this object is an instance of a custom subclassof EOInterfaceController that is automatically created for you (<code>StudioManager.java</code>,in this case). EOInterfaceController defines the <code>save</code> methodand implements it to commit changes to the database.</font></p><br><table border = "0" BGCOLOR="#E6E6E6"><tr><td scope="row"><p><b>Note: </b>TheEOEditingContext object in the nib file ("EditingContext") alsodefines a method-<code>saveChanges</code>-thatcommits changes to the database. However, EOInterfaceController'smethod is preferable because it catches exceptions that might arisefrom this operation.</p></td></tr></table><br><br>    <br><a href="The_Ingredi_ent_Project.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Building_an_Application.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<p><font face="Geneva,Helvetica,Arial" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
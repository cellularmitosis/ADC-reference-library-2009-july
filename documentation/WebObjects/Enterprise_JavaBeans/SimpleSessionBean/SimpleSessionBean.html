<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Enterprise JavaBeans (Legacy): Developing Session Beans</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Developing Session Beans"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000099" title="Developing Session Beans"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/WebObjects-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000592" target="_top">WebObjects</a> &gt; <a href="../AboutThisBook/AboutThisBook.html#//apple_ref/doc/uid/TP30000097-TPXREF101">Enterprise JavaBeans (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../EntityBean/EntityBean.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000099-BBCBJDAG" title="Developing Session Beans"></a><h1>Developing Session Beans</h1><p><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_172"></a>Before developing WebObjects applications that use enterprise beans, you have to create enterprise-bean frameworks. These frameworks contain the JAR files (which include the deployment descriptor files) needed to deploy enterprise beans.</p><p>You can develop a bean framework by writing the beans yourself or by using third-party beans (either from Java source and deployment descriptor files or JAR files). Project Builder helps you develop beans by providing you with bean templates that get you started.</p><p>In most cases, you save both time and money when you purchase enterprise beans from EJB vendors<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_173"></a><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_174"></a> instead of developing your own. This is because you obtain a solution that has been tested by the solution vendor and other developers. Also remember that you cannot take advantage of Enterprise Object technology in your enterprise beans; for example, you may have to implement primary-key classes, finder methods, primary-key–value generation, and so on in your entity beans. In addition, you have to choose between implementing a bean as an entity bean or a session bean. It’s a bean provider’s job to design an effective and efficient bean solution for you. You can then compare similar solutions from various vendors and purchase the one that most closely addresses your situation.</p><p>The following sections show how to develop a stateless session bean for use in a WebObjects application both on Mac OS X and Windows.</p><p>This chapter contains the following sections:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="SimpleSessionBean.html#//apple_ref/doc/uid/TP30000099-TPXREF102">“Developing a Session Bean in Mac OS X”</a></span> explains how to develop a Web application that uses a session bean in Mac OS X.</p></li><li class="li"><p><span class="content_text"><a href="../ConfigurationReference/ConfigurationReference.html#//apple_ref/doc/uid/TP30000103-TPXREF114">“method-params element”</a></span> shows how to develop a Web application that uses a session bean in Windows.</p></li></ul>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="SimpleSessionBean.html#//apple_ref/doc/uid/TP30000099-TPXREF102">Developing a Session Bean in Mac OS X</a>
				
			<br/>
			
        
			
			
				<a href="SimpleSessionBean.html#//apple_ref/doc/uid/TP30000099-TPXREF114">Developing a Session Bean in Windows</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000099-TPXREF102" title="Developing a Session Bean in Mac OS X"></a><h2>Developing a Session Bean in Mac OS X</h2><p>This section shows you how you develop a stateless session bean for use in a WebObjects application in Mac OS X.</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF103" title="Creating the Bean Framework"></a><h3>Creating the Bean Framework</h3><p>Follow these steps to create a session-bean framework.</p><ol class="ol"><li class="li"><p><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_175"></a>Launch Project Builder.</p></li><li class="li"><p>Choose File > New Project.</p></li><li class="li"><p>In the New Project pane of the Project Builder Assistant, select Enterprise JavaBean Framework from the list of project types, and click Next.</p><div class="item_figure"><img src = "../art/pbanewproj_ejbfwk.gif" alt = "New Project Pane of the Project Builder Assistant" width="358" height="301"></div></li><li class="li"><p>Name the project <code>Hello</code><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_176"></a>.</p></li><li class="li"><p>In the Create New Enterprise Java Bean pane of the Assistant, select “Create source files for a new Enterprise Java Bean.”</p><div class="item_figure"><img src = "../art/pbanewproj_newejb.gif" alt = "Create New Enterprise JavaBean" width="359" height="302"></div></li><li class="li"><p>In the Choose Bean Type pane, make sure Stateless Bean is selected under Enterprise JavaBean Types.</p><div class="item_figure"><img src = "../art/pbanewproj_beantype.gif" alt = "Choose Bean Type" width="358" height="301"></div></li><li class="li"><p>In the Enterprise JavaBean Class Name pane:</p><ol class="ol"><li class="ol ol"><p>Enter <code>Hello</code> in the Class Name text field.</p></li><li class="ol ol"><p>Enter <code>my.ejb</code> in the Package Name text field.</p></li></ol><div class="item_figure"><img src = "../art/pbanewproj_ejbclassname.gif" alt = "Enterprise JavaBean Class Name" width="358" height="301"></div></li></ol><a name="//apple_ref/doc/uid/TP30000099-TPXREF104" title="Analyzing the Hello Bean&acirc;&#128;&#153;s Files"></a><h3>Analyzing the Hello Bean’s Files</h3><p>The Hello project has templates for the home and remote interfaces, as well as for the implementation class of the Hello enterprise bean in the Classes group of the Files list. In addition, the Resources group contains the bean’s deployment descriptor file.</p><p><span class="content_text">Listing 3-1</span> shows the template for the home interface<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_177"></a> of the Hello enterprise bean (<code>HelloHome.java</code>):</p><a name="//apple_ref/doc/uid/TP30000099-CJBBHBHD" title="Listing 3-1HelloHome.java file"></a><p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong><code>HelloHome.java</code> file</p><div class="codesample"><table><tr><td scope="row"><pre>package my.ejb;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.ejb.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.RemoteException;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public interface HelloHome extends EJBHome {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /** Creation methods **/<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /* Stateful session beans may have multiple create methods taking<span></span></pre></td></tr><tr><td scope="row"><pre>    * different parameters. They must all be reflected in identically<span></span></pre></td></tr><tr><td scope="row"><pre>    * named methods in the home interface without the 'ejb' prefix<span></span></pre></td></tr><tr><td scope="row"><pre>    * and initial cap.<span></span></pre></td></tr><tr><td scope="row"><pre>    *<span></span></pre></td></tr><tr><td scope="row"><pre>    * Stateless session bean create methods never have parameters.<span></span></pre></td></tr><tr><td scope="row"><pre>    */<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public Hello create() throws RemoteException, CreateException;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 3-2</span> shows the template for the bean’s remote interface<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_178"></a> (<code>Hello.java</code>):</p><a name="//apple_ref/doc/uid/TP30000099-CJBBFEGC" title="Listing 3-2Hello.java file"></a><p class="codesample"><strong>Listing 3-2&nbsp;&nbsp;</strong><code>Hello.java</code> file</p><div class="codesample"><table><tr><td scope="row"><pre>package my.ejb;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.ejb.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.RemoteException;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.Remote;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public interface Hello extends EJBObject {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre>    // Business Logic Interfaces<span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Example:<span></span></pre></td></tr><tr><td scope="row"><pre>    // public String hello() throws java.rmi.RemoteException;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 3-3</span> shows the template for the bean’s implementation class (<code>HelloBean.java</code>):</p><a name="//apple_ref/doc/uid/TP30000099-CJBDCAEF" title="Listing 3-3HelloBean.java file"></a><p class="codesample"><strong>Listing 3-3&nbsp;&nbsp;</strong><code>HelloBean.java</code> file</p><div class="codesample"><table><tr><td scope="row"><pre>package my.ejb;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.ejb.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class HelloBean implements SessionBean {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre>    // Creation methods<span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public HelloBean() {<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void ejbCreate() throws CreateException {<span></span></pre></td></tr><tr><td scope="row"><pre>        /* Stateless session bean create methods never have parameters */<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre>    // SessionBean interface implementation<span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    private SessionContext _ctx;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void setSessionContext(SessionContext ctx) {<span></span></pre></td></tr><tr><td scope="row"><pre>        this._ctx = ctx;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void ejbPassivate() {<span></span></pre></td></tr><tr><td scope="row"><pre>        /* does not apply to stateless session beans */<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void ejbActivate() {<span></span></pre></td></tr><tr><td scope="row"><pre>        /* does not apply to stateless session beans */<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void ejbRemove() {<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre>    // Business Logic Implementations<span></span></pre></td></tr><tr><td scope="row"><pre>    //<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Example:<span></span></pre></td></tr><tr><td scope="row"><pre>    // public String hello() { return "hello"; }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 3-4</span> shows the bean’s deployment descriptor file <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_179"></a>(<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_180"></a><code>ejb-jar.xml</code>):</p><a name="//apple_ref/doc/uid/TP30000099-CJBHGGCD" title="Listing 3-4ejb-jar.xml file"></a><p class="codesample"><strong>Listing 3-4&nbsp;&nbsp;</strong><code>ejb-jar.xml</code> file</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 1.1//EN' 'http://java.sun.com/j2ee/dtds/ejb-jar_1_1.dtd'><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;ejb-jar><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;description>deployment descriptor for Hello&lt;/description><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;display-name>Hello&lt;/display-name><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;enterprise-beans><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;session><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;description>deployment descriptor for HelloBean&lt;/description><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;display-name>HelloBean&lt;/display-name><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;ejb-name>HelloBean&lt;/ejb-name><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;home>my.ejb.HelloHome&lt;/home><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;remote>my.ejb.Hello&lt;/remote><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;ejb-class>my.ejb.HelloBean&lt;/ejb-class><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;session-type>Stateless&lt;/session-type><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;transaction-type>Container&lt;/transaction-type><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/session><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/enterprise-beans><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/ejb-jar><span></span></pre></td></tr></table></div><p>In addition to providing you with most of the code needed to deploy a bean, Project Builder also partitions the source code appropriately between two targets: EJB Deployment and EJB Client Interfaces.</p><p><span class="content_text">Figure 3-1</span> shows how the bean’s source files are assigned to the EJB Deployment target<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_181"></a>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000099-TPXREF132" title="Figure 3-1Hello project&acirc;&#128;&#148;the EJB Deployment target&acirc;&#128;&#153;s members"></a><p><strong>Figure 3-1&nbsp;&nbsp;</strong>Hello project—the EJB Deployment target’s members</p><img src = "../art/pbhello_ejbdeptrgt.gif" alt = "Hello project—the EJB Deployment target’s members" width="195" height="216"></div><br/><p>When you view the EJB Client Interfaces target<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_182"></a>, however, you see that the implementation class and the deployment descriptor files are not assigned to it, as shown in <span class="content_text">Figure 3-2</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000099-TPXREF133" title="Figure 3-2Hello project&acirc;&#128;&#148;the EJB"></a><p><strong>Figure 3-2&nbsp;&nbsp;</strong>Hello project—the EJB</p><img src = "../art/pbhello_ejbinterfacestrgt.gif" alt = "Hello project—the EJB" width="195" height="217"></div><br/><a name="//apple_ref/doc/uid/TP30000099-TPXREF105" title="Adding Business Logic to the Bean"></a><h3>Adding Business Logic to the Bean</h3><p>Now you’re ready to add the business logic required for the Hello bean to provide a message to its clients.</p><p>Edit <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_183"></a><code>Hello.java</code> by adding the following method declaration:</p><div class="codesample"><table><tr><td scope="row"><pre>public String message() throws RemoteException;<span></span></pre></td></tr></table></div><p>Edit <code>HelloBean.java</code> by adding the implementation of the <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_184"></a><code>message</code> method, which is listed below.</p><div class="codesample"><table><tr><td scope="row"><pre>public String message() {<span></span></pre></td></tr><tr><td scope="row"><pre>    return "Hello, World.";<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF106" title="Building the Bean Framework"></a><h3>Building the Bean Framework</h3><p>To build the Hello bean framework, all you have to do is click Build in the toolbar or choose Build > Build. (Make sure that the Hello target is selected in the target pop-up menu before you build.)</p><p>After the framework is built, you can find it in the project’s <code>build</code> directory:<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_185"></a></p><div class="codesample"><table><tr><td scope="row"><pre>Hello/<span></span></pre></td></tr><tr><td scope="row"><pre>    build/<span></span></pre></td></tr><tr><td scope="row"><pre>        Hello.framework<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF107" title="Creating the Client Application"></a><h3>Creating the Client Application</h3><p><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_186"></a>Now that the Hello bean framework is built, you’re ready to use it in an application. In this case, the client application is an Web application that invokes the bean’s <code>message</code> method and displays its return value using a WOString element.</p><ol class="ol"><li class="li"><p>Create a WebObjects application project.</p></li><li class="li"><p>Name the project <code>Hello_Client</code><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_187"></a>.</p></li><li class="li"><p>In the Enable J2EE Integration pane of the Project Builder Assistant, select “Deploy as an Enterprise JavaBean container.”</p><div class="item_figure"><img src = "../art/pbanewproj_j2ee.gif" alt = "J2EE Integration" width="357" height="301"></div><p>When you deploy the client application as an EJB container, each application instance has its own EJB container. For more information on internal and external containers, see <span class="content_text"><a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30000098-CJBGFGCA">“Enterprise JavaBeans in WebObjects.”</a></span></p></li><li class="li"><p>This example doesn’t require the use of any data-store adaptors, so make sure no adaptors are selected in the Choose EOAdaptors pane.</p><p>You need to select a data-store adaptor only when you plan to use enterprise objects<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_188"></a> in your application. Entity beans that use bean-managed persistence (BMP) are responsible for interfacing with the necessary data stores. For entity beans that use container-managed persistence (CMP), the bean container has this responsibility. The Hello_Client application does not use enterprise objects.</p></li><li class="li"><p>Add the Hello framework to the project.</p><ol class="ol"><li class="ol ol"><p>In the Choose Frameworks pane of the Assistant, click Add.</p></li><li class="ol ol"><p>Select <code>Hello.framework</code> in the build folder of the Hello project folder, and click Choose.</p></li></ol></li></ol><p><span class="content_text">Figure 3-3</span> highlights <code>Hello.framework</code> in the Hello_Client project.</p><br/><div><a name="//apple_ref/doc/uid/TP30000099-TPXREF135" title="Figure 3-3Hello_Client project&acirc;&#128;&#148;Hello.framework in Frameworks group"></a><p><strong>Figure 3-3&nbsp;&nbsp;</strong>Hello_Client project—<code>Hello.framework</code> in Frameworks group</p><img src = "../art/pbhello_client_fwks.gif" alt = "Hello_Client project—Hello.framework in Frameworks group" width="227" height="306"></div><br/><a name="//apple_ref/doc/uid/TP30000099-TPXREF108" title="Adding Business Logic to the Client Application"></a><h3>Adding Business Logic to the Client Application</h3><p>You have generated an application that, when run, instantiates its own EJB container. This container behaves like a standard EJB container. To access bean instances, you use standard EJB methods.</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF109" title="Modify Session.java"></a><h4>Modify Session.java</h4><p>Now, edit <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_189"></a><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_190"></a><code>Session.java</code> so that each new session creates a Hello bean proxy that your components can access.</p><p>First, add these <code>import</code> statements:</p><div class="codesample"><table><tr><td scope="row"><pre>import my.ejb.Hello;<span></span></pre></td></tr><tr><td scope="row"><pre>import my.ejb.HelloHome;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.RemoteException;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.util.Properties;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.ejb.CreateException;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.naming.Context;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.naming.InitialContext;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.naming.NamingException;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.rmi.PortableRemoteObject;<span></span></pre></td></tr></table></div><p>Now, add two instance variables: one to hold a Hello bean instance and another to hold a Hello home-interface object.</p><div class="codesample"><table><tr><td scope="row"><pre>// Holds a Hello bean instance.<span></span></pre></td></tr><tr><td scope="row"><pre>protected Hello hello;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Holds the Hello bean’s home interface.<span></span></pre></td></tr><tr><td scope="row"><pre>private HelloHome _helloHome = null;<span></span></pre></td></tr></table></div><p>Modify the <code>Session</code> constructor so that it looks like this</p><div class="codesample"><table><tr><td scope="row"><pre>public Session() {<span></span></pre></td></tr><tr><td scope="row"><pre>    super();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Instantiate a Hello bean object.<span></span></pre></td></tr><tr><td scope="row"><pre>    try {<span></span></pre></td></tr><tr><td scope="row"><pre>        hello = helloHome().create();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    catch (RemoteException re) {<span></span></pre></td></tr><tr><td scope="row"><pre>        re.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    catch (CreateException ce) {<span></span></pre></td></tr><tr><td scope="row"><pre>        ce.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Finally, add the following method:</p><div class="codesample"><table><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Obtains Hello bean’s home interface.<span></span></pre></td></tr><tr><td scope="row"><pre> * @return Hello bean’s home interface.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>public HelloHome helloHome() {<span></span></pre></td></tr><tr><td scope="row"><pre>    if (_helloHome == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>        try {<span></span></pre></td></tr><tr><td scope="row"><pre>            Context jndiContext = new InitialContext();<span></span></pre></td></tr><tr><td scope="row"><pre>            _helloHome = (HelloHome)PortableRemoteObject.narrow(jndiContext.lookup("HelloBean"), HelloHome.class);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        catch (NamingException ne) {<span></span></pre></td></tr><tr><td scope="row"><pre>            ne.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return _helloHome;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF110" title="Modify Main.wo"></a><h4>Modify Main.wo</h4><p>Open <code>Main.wo</code> in WebObjects Builder by double-clicking <code>Main.wo</code>, which is located under the Main subgroup of the Web Components group in the Files list.</p><p>Add a String key called <code>greeting</code> to <code>Main.wo</code> through the Edit Source pop-up menu.</p><br/><div><img src = "../art/wobgreetingkey.gif" alt = "Add Key" width="276" height="318"></div><br/><p>Add a WOString element to the component, and bind it to the <code>greeting</code> key.</p><br/><div><img src = "../art/wobmain.gif" alt = "Main.wo" width="471" height="342"></div><br/><a name="//apple_ref/doc/uid/TP30000099-TPXREF111" title="Modify Main.java"></a><h4>Modify Main.java</h4><p>When a Main page is about to be displayed, the Main object needs to invoke the <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_191"></a><code>message</code> method of its Hello bean proxy to obtain the bean’s greeting and store the value returned in its <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_192"></a><code>greeting</code> instance variable. When the WOString element is rendered on the page, its <code>value</code> binding provides the text to be displayed; in this case, the value comes from <code>greeting</code> in the Main object.</p><p>Add the following <code>import</code> statements to <code>Main.java</code><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_193"></a>:</p><div class="codesample"><table><tr><td scope="row"><pre>import my.ejb.Hello;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.RemoteException;<span></span></pre></td></tr></table></div><p>Edit the <code>Main</code> constructor so that it looks like this</p><div class="codesample"><table><tr><td scope="row"><pre>public Main(WOContext context) {<span></span></pre></td></tr><tr><td scope="row"><pre>    super(context);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    Session session = (Session)session();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    try {<span></span></pre></td></tr><tr><td scope="row"><pre>        greeting = session.hello.message();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    catch (RemoteException re) {<span></span></pre></td></tr><tr><td scope="row"><pre>        re.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF112" title="Configuring the Container"></a><h3>Configuring the Container</h3><p>This simple session bean project doesn’t make use of bean persistence. Therefore, it requires no container configuration. The text you need to delete from the <code>TransactionManagerConfiguration.xml</code><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_194"></a> file (<span class="content_text">Listing 3-5</span>) starts at the line numbered 1 and ends at the line numbered 2 in (everything between the <code>&lt;resources></code> tag and the <code>&lt;/resources></code> tag, and the tags themselves). See <span class="content_text"><a href="../ContainerConfiguration/ContainerConfiguration.html#//apple_ref/doc/uid/TP30000102-BAJFIIHD">“Transaction Manager Configuration ”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF138" title="Listing 3-5TransactionManagerConfiguration.xml file of the Hello_Client project with container-configuration information"></a><p class="codesample"><strong>Listing 3-5&nbsp;&nbsp;</strong><code>TransactionManagerConfiguration.xml</code> file of the Hello_Client project with container-configuration information</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;domain><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;name>default&lt;/name><span></span></pre></td></tr><tr><td scope="row"><pre>   &lt;resources><span>// 1</span></pre></td></tr><tr><td scope="row"><pre>     &lt;dataSource><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;name>DefaultDatabase&lt;/name><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;class>tyrex.resource.jdbc.xa.EnabledDataSource&lt;/class><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;!-- Path to the database-driver JAR File if not in the extensions directory--><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;jar>file:/FAKEPATHNAME&lt;/jar><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;config><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;driverName>jdbc:oracle:thin:@HOSTNAME:PORTNAME:DATABASENAME&lt;/driverName><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;driverClassName>oracle.jdbc.OracleDriver&lt;/driverClassName><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;user>ejb&lt;/user><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;password>ejb&lt;/password><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;!-- Transaction timeout in seconds. --><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;transactionTimeout>60&lt;/transactionTimeout><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;!-- Specifies the JDBC transaction isolation attribute. --><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;isolationLevel>Serializable&lt;/isolationLevel><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/config><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;limits><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;maximum>100&lt;/maximum><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;minimum>10&lt;/minimum><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;initial>10&lt;/initial><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;maxRetain>300&lt;/maxRetain><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;timeout>50&lt;/timeout><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/limits><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dataSource><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;/resources><span>// 2</span></pre></td></tr><tr><td scope="row"><pre>&lt;/domain><span></span></pre></td></tr></table></div>	<p>After removing the irrelevant information, the <code>TransactionManagerConfiguration.xml</code> file should look like <span class="content_text">Listing 3-6</span>:</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF139" title="Listing 3-6TransactionManagerConfiguration.xml file of the Hello_Client project without container-configuration information"></a><p class="codesample"><strong>Listing 3-6&nbsp;&nbsp;</strong><code>TransactionManagerConfiguration.xml</code> file of the Hello_Client project without container-configuration information</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;domain><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;name>default&lt;/name><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/domain><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF113" title="Running the Hello_Client Application"></a><h3>Running the Hello_Client Application</h3><p>After you build and run the application, you should see a Web page similar to the one in <span class="content_text">Figure 3-4</span> in your Web browser.<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_195"></a></p><br/><div><a name="//apple_ref/doc/uid/TP30000099-BCIBGECC" title="Figure 3-4Output of the Hello_Client application"></a><p><strong>Figure 3-4&nbsp;&nbsp;</strong>Output of the Hello_Client application</p><img src = "../art/webhello_client.gif" alt = "Output of the Hello_Client application" width="403" height="229"></div><br/><a name="//apple_ref/doc/uid/TP30000099-TPXREF114" title="Developing a Session Bean in Windows"></a><h2>Developing a Session Bean in Windows</h2><p>This section shows how to develop a stateless session bean for use in a WebObjects application in Windows.</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF115" title="Creating the Bean Framework"></a><h3>Creating the Bean Framework</h3><p>Follow these steps to create a session-bean framework.</p><ol class="ol"><li class="li"><p><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_196"></a>Launch Project Builder.</p></li><li class="li"><p>Choose Project > New.</p></li><li class="li"><p>Choose Java WebObjects EJB Framework from the Project Type pop-up menu in the New Project dialog, and click Browse.</p></li><li class="li"><p>Select a path for your project, name it <code>Hello</code><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_197"></a>, and click Save.</p></li><li class="li"><p>In the Specify Enterprise JavaBeans pane of the EJB Framework Wizard, select “Create source files for a new Enterprise Java Bean” and click Next.</p></li><li class="li"><p>Make sure that Stateless Session Bean is selected in the Chose Enterprise JavaBeans Type pane of the wizard and click Next.</p></li><li class="li"><p>In the Create New Enterprise JavaBeans class pane:</p><ol class="ol"><li class="ol ol"><p>Enter <code>Hello</code> in the Class Name text field.</p></li><li class="ol ol"><p>Enter <code>my.ejb</code> in the Package Name text field.</p></li><li class="ol ol"><p>Click Finish.</p></li></ol></li></ol><a name="//apple_ref/doc/uid/TP30000099-TPXREF116" title="Adding Business Logic to the Bean"></a><h3>Adding Business Logic to the Bean</h3><p>Now you’re ready to add the business logic required for the Hello bean to provide a message to its clients.</p><p>Edit <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_198"></a><code>Hello.java</code> by adding the following code (the file is located in the Classes bucket):</p><div class="codesample"><table><tr><td scope="row"><pre>public String message() throws RemoteException;<span></span></pre></td></tr></table></div><p>Edit <code>HelloBean.java</code> by adding the implementation of the <code>message</code> method, which is listed below (the file is located in the Classes bucket of the EJBServer subproject).</p><div class="codesample"><table><tr><td scope="row"><pre>public String message() {<span></span></pre></td></tr><tr><td scope="row"><pre>    return "Hello, World.";<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF117" title="Building the Framework"></a><h3>Building the Framework</h3><p>To build the Hello framework, click the Build button or choose Tools > Project Build > Build.</p><p>After the framework is built, you find it in the project’s directory:<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_199"></a></p><div class="codesample"><table><tr><td scope="row"><pre>Hello/<span></span></pre></td></tr><tr><td scope="row"><pre>    Hello.framework<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF118" title="Creating the Client Application Project"></a><h3>Creating the Client Application Project</h3><p><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_200"></a>Now that the Hello framework is built, you’re ready to use it in an application. In this case, the client application is a Web application that invokes the bean’s <code>message</code> method and displays its return value using a WOString element.</p><ol class="ol"><li class="li"><p>Create a Java WebObjects Application project and name it <code>Hello_Client</code><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_201"></a><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_202"></a>.</p></li><li class="li"><p>Choose None in the “Choose type of assistance in your Java project” pane of the WebObjects Application Wizard.</p></li><li class="li"><p>Choose “Deploy as an EJB Container” in the Enable J2EE Integration pane.</p></li><li class="li"><p>In the Choose EOAdaptors pane, click Select None, and then click Finish.</p></li></ol><a name="//apple_ref/doc/uid/TP30000099-TPXREF119" title="Adding the Hello Bean Framework to the Hello_Client Project"></a><h3>Adding the Hello Bean Framework to the Hello_Client Project</h3><p>You need to add the Hello bean framework<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_203"></a> to the Hello_Client project in order to use the services provided by the Hello enterprise bean—mainly providing a greeting. To accomplish that, follow these steps:</p><ol class="ol"><li class="li"><p>Select the Frameworks bucket and choose Project > Add Files.</p></li><li class="li"><p>Navigate to the Hello project directory, select <code>Hello.framework</code>, and click Open.</p></li><li class="li"><p>Click Add in the search order dialog.</p></li></ol><a name="//apple_ref/doc/uid/TP30000099-TPXREF120" title="Creating the Container Configuration Files"></a><h3>Creating the Container Configuration Files</h3><p>To create the configuration files that the client application needs to interact with its environment, you need to run an application named OpenEJBTool<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_204"></a>, whose launch script is located in <code>/Apple/Library/WebObjects/JavaApplications/OpenEIBTool.woa</code>.</p><p>Using the Bourne shell, execute the following commands:</p><div class="codesample"><table><tr><td scope="row"><pre>cd /Apple/Library/WebObjects/JavaApplications/OpenEJBTool.woa<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>./OpenEJBTool.cmd -o c:/&lt;Hello_Client_path><span></span></pre></td></tr><tr><td scope="row"><pre>                   c:/&lt;Hello_path>Hello.framework<span></span></pre></td></tr></table></div><p>When the tool is finished, you need to add the configuration files it generated (<code>OpenEJBConfiguration.xml</code> and <code>TransactionManagerConfiguration.xml</code>) to the Resources bucket of the Hello_Client project.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;You have to run OpenEJBTool manually every time you add bean frameworks to your project or when the deployment descriptor file in any of the bean frameworks your project uses changes.</p></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF121" title="Adding Business Logic to the Client Application"></a><h3>Adding Business Logic to the Client Application</h3><p>You have generated a WebObjects application that, when run, instantiates its own EJB container. This container behaves like a standard EJB container. To access bean instances, you use standard EJB methods.</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF122" title="Modify Session.java"></a><h4>Modify Session.java</h4><p>Here you edit <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_205"></a><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_206"></a><code>Session.java</code> so that each new session creates a Hello proxy and provides access to it to components.</p><p>First, add these <code>import</code> statements:</p><div class="codesample"><table><tr><td scope="row"><pre>import my.ejb.Hello;<span></span></pre></td></tr><tr><td scope="row"><pre>import my.ejb.HelloHome;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.RemoteException;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.util.Properties;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.ejb.CreateException;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.naming.Context;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.naming.InitialContext;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.naming.NamingException;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.rmi.PortableRemoteObject;<span></span></pre></td></tr></table></div><p>Now, add two instance variables: one to hold a Hello bean object and another to hold a Hello home-interface object.</p><div class="codesample"><table><tr><td scope="row"><pre>// Holds a Hello bean instance.<span></span></pre></td></tr><tr><td scope="row"><pre>protected Hello hello;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Holds a Hello bean home-interface object.<span></span></pre></td></tr><tr><td scope="row"><pre>private HelloHome _helloHome;<span></span></pre></td></tr></table></div><p>Modify the <code>Session</code> constructor so that it looks like this:</p><div class="codesample"><table><tr><td scope="row"><pre>public Session() {<span></span></pre></td></tr><tr><td scope="row"><pre>    super();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Instantiate a HelloBean object.<span></span></pre></td></tr><tr><td scope="row"><pre>    try {<span></span></pre></td></tr><tr><td scope="row"><pre>        hello = helloHome().create();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    } catch (RemoteException re) {<span></span></pre></td></tr><tr><td scope="row"><pre>        re.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>    } catch (CreateException ce) {<span></span></pre></td></tr><tr><td scope="row"><pre>        ce.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Finally, add the following method:</p><div class="codesample"><table><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Obtains HelloBean’s home interface.<span></span></pre></td></tr><tr><td scope="row"><pre> * @return HelloBean’s home interface.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>public HelloHome helloHome() {<span></span></pre></td></tr><tr><td scope="row"><pre>    if (_helloHome == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>        try {<span></span></pre></td></tr><tr><td scope="row"><pre>            Context jndiContext = new InitialContext();<span></span></pre></td></tr><tr><td scope="row"><pre>            _helloHome = (HelloHome)PortableRemoteObject.narrow(jndiContext.lookup("HelloBean"), HelloHome.class);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        } catch (NamingException ne) {<span></span></pre></td></tr><tr><td scope="row"><pre>            ne.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return _helloHome;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF123" title="Modify Main.wo"></a><h4>Modify Main.wo</h4><p>Open <code>Main.wo</code> in WebObjects Builder by double-clicking <code>Main.wo</code>, which is located under the Web Components bucket.</p><p>Add a String key called <code>greeting</code> to <code>Main.wo</code> through the Edit Source pop-up menu.</p><p>Add a WOString element to the component, and bind it to the <code>greeting</code> key.</p><a name="//apple_ref/doc/uid/TP30000099-TPXREF124" title="Modify Main.java"></a><h4>Modify Main.java</h4><p>When a Main page is about to be displayed, the Main object needs to invoke the <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_207"></a><code>message</code> method of its Hello bean proxy to obtain the bean’s greeting and store the value returned in its <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_208"></a><code>greeting</code> instance variable. When the WOString element is rendered on the page, its <code>value</code> binding provides the text to be displayed; in this case, the value comes from <code>greeting</code> in the Main object.</p><p>Add the following <code>import</code> statements to <a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_209"></a><code>Main.java</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>import com.my.ejb.Hello;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.rmi.RemoteException;<span></span></pre></td></tr></table></div><p>Edit the <code>Main</code> constructor so that it looks like this:</p><div class="codesample"><table><tr><td scope="row"><pre>public Main(WOContext context) {<span></span></pre></td></tr><tr><td scope="row"><pre>    super(context);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    Session session = (Session)session();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    try {<span></span></pre></td></tr><tr><td scope="row"><pre>        greeting = session.hello.message();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    } catch (RemoteException re) {<span></span></pre></td></tr><tr><td scope="row"><pre>        re.printStackTrace();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF125" title="Configuring the Container"></a><h3>Configuring the Container</h3><p>This simple session-bean project doesn’t make use of bean persistence. Therefore, it requires no database configuration. You need to edit the <code>TransactionManagerConfiguration.xml</code> file of the project to remove extraneous container configuration information, which is everything between the <code>&lt;resources></code> and <code>&lt;/resources></code> tags, and the tags themselves.</p><p>After removing the irrelevant information, the <code>TransactionManagerConfiguration.xml</code> file should look like this</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;domain><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;name>default&lt;/name><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/domain><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000099-TPXREF126" title="Running the Hello_Client Application"></a><h3>Running the Hello_Client Application</h3><p>After you build and run the application, you should see a Web browser window with the message “Hello, World.”<a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_210"></a><a name="//apple_ref/doc/uid/TP30000099-DontLinkElementID_211"></a></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../EntityBean/EntityBean.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001, 2004 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2004-10-05<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Enterprise_JavaBeans/SimpleSessionBean/SimpleSessionBean.html%3Fid%3DTP30001012-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Enterprise_JavaBeans/SimpleSessionBean/SimpleSessionBean.html%3Fid%3DTP30001012-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Enterprise_JavaBeans/SimpleSessionBean/SimpleSessionBean.html%3Fid%3DTP30001012-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
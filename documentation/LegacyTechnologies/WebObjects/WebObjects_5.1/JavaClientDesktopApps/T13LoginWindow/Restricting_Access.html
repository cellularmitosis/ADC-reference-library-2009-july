<HTML>
	<HEAD>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="XML_Publisher">
		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">
        <title>Restricting
Access</title>
		</HEAD>
	<BODY bgcolor="#ffffff">
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --> <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Adding_Logi_icate_Users.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="../Appendix_A/index.html" target="_top"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerTop -->  
<!-- apple_doc: pageHeadingStart --><a name = "TPXREF41"></a><a name="-648545"></a><h2><font face="Lucida Grande,Helvetica,Arial">Restricting
Access</font></h2><!-- apple_doc: pageHeadingEnd -->

<p>The login window you added won't be of much use until you
change the default startup sequence to remove the Documents menu
and the default query window. Otherwise, users can simply ignore
the login window and start using the application.</p>
<p>To learn how to remove the Documents menu, see  <a href="../T1RestrictingAccess/iThe_Documen_PXREF38.html" target="_top">"The Documents Menu"</a>. To learn
how to suppress the default query window, see  <a href="../T1RestrictingAccess/iThe_Default_PXREF4_.html" target="_top">"The Default Query Window"</a>.</p>
<p>Finally, now that you've disabled all the default mechanisms
for users to use the application, you need to provide custom access.
In  <a href="Adding_Logi_icate_Users.html#BACICHHE" target = "content">Listing 20-2</a>, currently
nothing happens if the user successfully authenticates&#151;except
that they don't see the error dialog stating that authentication
failed. </p>
<p>However, there are many things you can do, such as using the
controller factory programmatically ( <a href="../T2UsingFactory/iTask_Using__htmlTP1.html" target="_top">"Task: Using the Controller Factory Programmatically"</a>)
or loading another nib file that provides a menu of the application's
primary tasks. You can display the default query window after the
user authenticates by adding this code in the <code>if</code> part
of the conditional in the <code>login</code> method
in  <a href="Adding_Logi_icate_Users.html#BACICHHE" target = "content">Listing 20-2</a>:</p>
<pre>EOControllerFactory.sharedControllerFactory().queryControllerWithEntity
  (&lt;entity name&gt;)</pre>
<p>Make sure to add the import statement for the<code> com.webobjects.eogeneration.client</code> package
to the nib file.</p>
<p>To load a nib file programmatically, change the <code>login</code> method
in  <a href="Adding_Logi_icate_Users.html#BACICHHE" target = "content">Listing 20-2</a> to  <a href="#TPXREF44">Listing 20-4</a>.</p>
<a name = "TPXREF44"></a><a name="-648737"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing 20-4 Load
a nib file programmatically</font></b></p>
<pre>public void login() {
     if (this.clientSideRequestLogin()) {
        MainMenuInterfaceController mainMenu = new
            MainMenuInterfaceController();		                        //1
        EOFrameController.runControllerInNewFrame(mainMenu, null);		//2
     }
     else {
        EODialogs.runErrorDialog(&quot;Login failed&quot;, &quot;Login failed. Please try
         again.&quot;);
        }
}</pre>
<p>Code line 1 instantiates a new instance of the nib file named "MainMenuInterfaceController"
and code line 2 displays the nib file.</p>

<!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Adding_Logi_icate_Users.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="../Appendix_A/index.html" target="_top"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerBottom --> <br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated May 1, 2002)</font></p><!-- start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->
</body>
</html>

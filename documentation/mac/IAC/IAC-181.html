<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>AEInstallCoercionHandler(IM:IC)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING181></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="IAC-180.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-182.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="IAC-2.html"><B>Interapplication Communication</B></A> / <BR><DD><A HREF="IAC-115.html"><B>Chapter 4 - Responding to Apple Events</B></A> / <A HREF="IAC-130.html"><B>Reference to Responding to Apple Events</B></A><BR><DL><DD><A HREF="IAC-134.html"><B>Routines for Responding to Apple Events</B></A> / <A HREF="IAC-180.html"><B>Creating and Managing the Coercion Handler Dispatch Tables</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING181-0></A>
<H3>AEInstallCoercionHandler</H3>
 You can use the <CODE>AEInstallCoercionHandler</CODE> function to install a coercion handler routine in either the application or system coercion handler dispatch table.<A NAME=MARKER-2-35></A><A NAME=MARKER-2-293></A><P>
<PRE>
FUNCTION AEInstallCoercionHandler (fromType: DescType; 
                                   toType: DescType; 
                                   handler: ProcPtr; 
                                   handlerRefcon: LongInt; 
                                   fromTypeIsDesc: Boolean; 
                                   isSysHandler: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>fromType</CODE> 
<DD> The descriptor type of the data coerced by the handler.
<DT><CODE>toType</CODE> 
<DD> The descriptor type of the resulting data. If there was already an entry in the specified coercion handler table for the same source descriptor type and result descriptor type, the existing entry is replaced.
<DT><CODE>handler</CODE> 
<DD> A pointer to the coercion handler. Note that a handler in the system coercion table must reside in the system heap; thus, if the value of the <CODE>isSysHandler</CODE> parameter is <CODE>TRUE</CODE>, the <CODE>handler</CODE> parameter should point to a location in the system heap. Otherwise, if you put your system handler code in your application heap, you should use <CODE>AERemoveCoercionHandler</CODE> to remove the handler when your application quits.
<DT><CODE>handlerRefcon</CODE>
<DD> <BR>A reference constant passed by the Apple Event Manager to the handler each time the handler is called. If your handler doesn't expect a reference constant, use 0 as the value of this parameter.
<DT><CODE>fromTypeIsDesc</CODE>
<DD> <BR>Specifies the form of the data to be coerced. If the value of this parameter is <CODE>TRUE</CODE>, the coercion handler expects the data to be passed as a descriptor record. If the value is <CODE>FALSE</CODE>, the coercion handler expects a pointer to the data. Because it is more efficient for the Apple Event Manager to provide a pointer to data than to a descriptor record, all coercion routines should accept a pointer to data if possible.
<DT><CODE>isSysHandler</CODE>
<DD> <BR>Specifies the coercion table to which the handler is added. If the value of this parameter is <CODE>TRUE</CODE>, the handler is added to the system coercion table and made available to all applications. If the value is <CODE>FALSE</CODE>, the handler is added to the application coercion table. Note that a handler in the system coercion table must reside in the system heap; thus, if the value of the <CODE>isSysHandler</CODE> parameter is <CODE>TRUE</CODE>, the handler parameter must point to a location in the system heap.
</DL>
<A NAME=HEADING181-9></A>
<H5>DESCRIPTION</H5>
 Before using AEInstallCoercionHandler to install a handler for a particular descriptor type into the system coercion handler dispatch table, use the <CODE>AEGetCoercionHandler</CODE> function to determine whether the table already contains a coercion handler for that descriptor type. If an entry exists, <CODE>AEGetCoercionHandler</CODE> returns a reference constant and a pointer to that handler. Chain these to your coercion handler by providing, in the <CODE>handlerRefcon</CODE> parameter of <CODE>AEInstallCoercionHandler</CODE>, pointers to the previous handler and its reference constant. If your coercion handler returns the error <CODE>errAECoercionFail</CODE>, use these pointers to call the previous handler. If you remove your system coercion handler, be sure to reinstall the chained handlers.<P>
<A NAME=HEADING181-11></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Before an application calls a system coercion handler, system software has set up the A5 register for the calling application. For this reason, if you provide a system coercion handler, it should never use A5 global variables or anything that depends on a particular context; otherwise, the application that calls the system handler may crash.<P>
<A NAME=HEADING181-13></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>memFullErr<TD>-108<TD>Not enough room in heap zone<A NAME=MARKER-2-270></A></TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="IAC-180.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-182.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="IAC-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

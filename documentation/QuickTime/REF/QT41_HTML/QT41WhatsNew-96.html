<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><head><script language="JavaScript" src="../../frametest.js"></script><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><!-- Link line removed --><TITLE> ExtendedScheduledSoundHeader</TITLE><script language=javascript> window.parent.focus(); </script></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="QT41WhatsNew-95.html">Previous</A> | <A HREF="QT41WhatsNew-1.html">Chapter Contents</A> | <A HREF="QT41WhatsNew.html">Chapter Top</A> | <A HREF="QT41WhatsNew-97.html">Next</A> |</P><!-- QTnavbar end --><H1 CLASS="H3-Heading3"><A NAME="pgfId-30186"></A>ExtendedScheduledSoundHeader</H1><P CLASS="T1-Text1"><A NAME="pgfId-30187"></A>The extended forms of the <TT>SoundComponentData</TT> and <TT>SoundParamBlock</TT> records are all with which a sound decompressor implementer need be concerned.</P><P CLASS="T1-Text1"><A NAME="pgfId-38487"></A>However, to allow for the passing of these extended fields to the sound channel, a new flavor of <TT>ScheduledSoundHeader</TT> is introduced.</P><P CLASS="T1-Text1"><A NAME="pgfId-38488"></A>This is called an <TT>ExtendedScheduledSoundHeader</TT>. Like the <TT>ScheduledSoundHeader</TT>, this record is passed as a parameter to the <TT>scheduledSoundCmd</TT> sound command. </P><BLOCKQUOTE><B>Note:&nbsp;&nbsp;</B><A NAME="pgfId-38494"></A>The <TT>ScheduledSoundHeader</TT> and <TT>scheduledSoundCmd</TT> are available with Sound Manager 3.3 or later and when QuickTime is installed. </P></BLOCKQUOTE><P CLASS="T1-Text1"><A NAME="pgfId-30190"></A>By way of quick review, <TT>ScheduledSoundHeader</TT> is defined like this:</P><TT><A NAME="pgfId-55804"></A>struct&nbsp;ScheduledSoundHeader&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;SoundHeaderUnion&nbsp;u;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;flags;<BR>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;reserved;<BR>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;callBackParam1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;callBackParam2;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TimeRecord&nbsp;startTime;<BR>};<BR>typedef&nbsp;struct&nbsp;ScheduledSoundHeader&nbsp;&nbsp;ScheduledSoundHeader;<BR>typedef&nbsp;ScheduledSoundHeader&nbsp;*<BR>ScheduledSoundHeaderPtr;</TT><P CLASS="T1-Text1"><A NAME="pgfId-30192"></A>and consists of the following fields:</P><DL COMPACT><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55806"></A><TT>u</TT> </DT><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30193"></A>A <TT>SoundHeaderUnion</TT> used to pass the audio to the channel.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55819"></A><TT>flags</TT> </DT><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30194"></A>A set of flags previously defined to be one of the following:</DD><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-30195"></A><TT>kScheduledSoundDoScheduled = 1 &lt;&lt; 0</TT></DD><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-30196"></A>If set, this indicates that the <TT>startTime</TT> field holds the time when this buffer should be played.</DD><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-30197"></A><TT>kScheduledSoundDoCallBack  = 1 &lt;&lt; 1</TT></DD><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-30198"></A>If set, this means the callback should be called when the buffer completes. This typically is used to chain buffer playback together.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55836"></A><TT>reserved</TT> </DT><P><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30199"></A>Reserved. Set to 0.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55845"></A><TT>callBackParam1</TT></DT><P><DD CLASS="DD-DefinitionDef"><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55852"></A><TT>callBackParam2</TT> </DT><P><DD CLASS="DD-DefinitionDef"><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-30202"></A>These two fields are passed as the parameters to the sound callback associated with the channel.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55862"></A><TT>startTime</TT> </DT><P><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30203"></A>A <TT>TimeRecord</TT> indicating the time that the sound buffer should play. Note that this <TT>TimeRecord</TT> describes a time in the future.</DD><P></DL COMPACT><P CLASS="T1-Text1"><A NAME="pgfId-30204"></A>The sound clock associated with the channel is used to determine when it should be played.</P><P CLASS="T1-Text1"><A NAME="pgfId-30205"></A>To these fields, extended fields are added. The <TT>ExtendedScheduledSoundHeader</TT> definition including both older and newer fields is shown as follows:</P><TT><A NAME="pgfId-55879"></A>struct&nbsp;ExtendedScheduledSoundHeader&nbsp;{<BR>SoundHeaderUnion&nbsp;&nbsp;u;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;flags;<BR>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;&nbsp;&nbsp;reserved;<BR>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;&nbsp;&nbsp;callBackParam1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;callBackParam2;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TimeRecord&nbsp;&nbsp;&nbsp;startTime;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;recordSize;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;extendedFlags;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;bufferSize;<BR>};<BR>typedef&nbsp;struct&nbsp;ExtendedScheduledSoundHeader&nbsp;ExtendedScheduledSoundHeader;</TT><P&nbsp;CLASS="T1-Text1"><A NAME="pgfId-30207"></A>The extended fields consist of:</P><DL COMPACT><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55881"></A><TT>recordSize</TT> </DT><P><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30208"></A>Holds the size of the record in bytes. Again, in the future this may grow.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55893"></A><TT>extendedFlags</TT> Holds the same flags in the <TT>extendedFlags</TT> as the <TT>ExtendedSoundComponentData</TT> and </DT><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30209"></A><TT>ExtendedSoundParamBlock</TT> records already discussed.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55900"></A><TT>bufferSize</TT> </DT><P><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-30210"></A>The buffer size in bytes. This field is not valid if the <TT>extendedFlags</TT> field's <TT>kExtendedSoundBufferSizeValid</TT> flag is clear.</DD><P></DL COMPACT><P CLASS="T1-Text1"><A NAME="pgfId-30211"></A>Finally, to determine if a <TT>ScheduledSoundHeader</TT> is an <TT>ExtendedScheduledSoundHeader</TT>, you can check for this additional flag in its <TT>flags</TT> field.</P><TT><A NAME="pgfId-55914"></A>kScheduledSoundExtendedHdr = 1 &lt;&lt; 2</TT><P CLASS="T1-Text1"><A NAME="pgfId-30213"></A>If clear, this is a classic <TT>ScheduledSoundHeader</TT>. If set, this is an <TT>ExtendedScheduledSoundHeader</TT> and at least contains the <TT>recordSize</TT> and <TT>extendedFlags</TT> fields. (It includes a <TT>bufferSize</TT> field, since this is the first version of an <TT>ExtendedScheduledSoundHeader</TT>.)</P><hr>&#169; 2000 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="QT41WhatsNew-95.html">Previous</A> | <A HREF="QT41WhatsNew-1.html">Chapter Contents</A> | <A HREF="QT41WhatsNew.html">Chapter Top</A> | <A HREF="QT41WhatsNew-97.html">Next</A> |</P><!-- QTnavbar end --></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
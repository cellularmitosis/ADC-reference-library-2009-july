<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Monitoring Activity</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Application_inistration.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="Improving_Performance.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF102"></a><h2><font face="Lucida Grande,Helvetica,Arial">Monitoring Activity</font></h2><!-- apple_doc: pageHeadingEnd --><p>There are several ways to obtain information about the applicationsdeployed on your site. You can</p><ul><li>use Monitor</font></li><li>analyze logs from application instances and adaptors</font></li><li>view instance statistics (WOStats) pages</font></li></ul><br><a name = "TPXREF103"></a><h3><font face="Lucida Grande,Helvetica,Arial">Monitoring Application Performance</font></h3><p>Monitor's Applications page gives you an overall view ofa site.  <a href="#BAJEFCEH">Figure 7-1</a> illustrates the kind of information you can accessthrough the Applications page:</p><ul><li>configuredapplications</font></li><li>number of configured instances per application</font></li><li>number of running instances per application</font></li></ul><br><a name = "BAJEFCEH"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure7-1 The Applications page</font></b></p> <img src = "../art/applications2.gif" alt = "[image: ../art/applications2.gif]"><p>From this page, you can perform several tasks:</p><ul><li><b>Connectto an instance of an application</b> The entry page of theapplication is displayed in a new Web browser window.</font></li><li><b>Display the application detail page of an application</b> Fordetails on the information provided, see  <a sector="mod" href="../Deployment/iSetting_Up_Applications.html" target="_top">"Adding an Application"</a>.</font></li><li><b>Display the application configuration page</b> See  <a sector="mod" href="../Deployment/iSetting_Up_Applications.html" target="_top">"Configuring an Application"</a> for moreinformation.</font></li><li><b>Delete an application</b> You confirm thatyou really want to delete the application (including all of itsinstances) in a confirmation page before the deletion takes place.</font></li></ul><br><a name = "TPXREF119"></a><h4><font face="Lucida Grande,Helvetica,Arial">The Application Detail Page</font></h4><p> <a href="#BAJDIEHA">Figure 7-2</a> depicts the application detail page.</p><br><a name = "BAJDIEHA"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure7-2 The application detail page</font></b></p> <img src = "../art/applicationdetail2.gif" alt = "[image: ../art/applicationdetail2.gif]"><p>The application's name is displayed centered and in boldletters. When there are active instances, it is a link to the applicationthrough the HTTP adaptor; the request is load balanced among theapplication hosts configured in the adaptor. (For this to work,the HTTP adaptor URL property must be set; see  <a sector="mod" href="../Deployment/iConfiguring_Sites.html" target="_top">"Configuring Sites"</a> for details.)If no value has been entered for the property, the default URL <code>(http://localhost/cgi-bin/WebObjects/</code>)is used instead.) The URL used to connect to the application lookssimilar to the following:</p><pre>http://localhost/cgi-bin/WebObjects/Payroll</pre><p>The following list describes the performance-related informationshown on the application detail page in the Statistics column group:</p><ul><li><b>Transactions</b> Thenumber of requests the instance has received since it was started.</font></li><li><b>Active Sessions</b> The number of activesessions (users) currently maintained by the instance.</font></li><li><b>Average Transaction</b> Average time, inseconds, the instance has taken to process requests.</font></li><li><b>Average Idle Period</b> The average time,in seconds, that the instance is idle (average time between requests).</font></li><li><b>Deaths</b> The number of unexpected failuresor deaths the instance has had since it was started. These excludescheduled shutdowns or manual shutdowns through Monitor.</font></li><li><b>WOStats</b> Click to display the statisticspage for the instance in a new Web browser window. See  <a href="#TPXREF106">"The Instance Statistics Page"</a> for details.<p>Before you can view the instancestatistics page, you have to enter the password you set on the instanceconfiguration page. See  <a sector="mod" href="../Deployment/iSetting_Up_Applications.html" target="_top">"Setting a Password for the Instance Statistics Page"</a> for details.</p></font></li></ul><p>The row with the caption ALL INSTANCES contains application-wideperformance information, including the average number of transactionsprocessed per minute (TPM).</p><br><a name = "TPXREF106"></a><h4><font face="Lucida Grande,Helvetica,Arial">The Instance Statistics Page</font></h4><p>You can access the instance statistics (WOStats) page of aninstance through Monitor or directly through a Web browser.</p><p>To use Monitor, go to the application detail page and clickWOStats for the instance whose statistics you want to view.</p><p>To use your Web browser, access the following URL:</p><pre>http://myhost/cgi-bin/WebObjects/MyApp.woa/wa/WOStats</pre><p>If there are multiple instances, specify the instance numberas well:</p><pre>http://myhost/cgi-bin/WebObjects/MyApp.woa/1/wa/WOStats</pre><p> <a href="#BAJDCFFB">Figure 7-3</a> and  <a href="#BAJCDAIB">Figure 7-4</a> show the information the instance statistics pageprovides.</p><br><a name = "BAJDCFFB"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure7-3 The instance statistics page&#151;part1 of 2</font></b></p> <img src = "../art/wostats.gif" alt = "[image: ../art/wostats.gif]"><br><a name = "BAJCDAIB"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure7-4 The instance statistics page&#151;part2 of 2</font></b></p> <img src = "../art/wostats2.gif" alt = "[image: ../art/wostats2.gif]"><br><a name = "TPXREF104"></a><h3><font face="Lucida Grande,Helvetica,Arial">Logging and Analyzing ApplicationActivity</font></h3><p>WebObjects applications can record information in a log filethat can be analyzed by a Common Log File Format (CLFF) standardanalysis tool. Applications do not maintain this log file by default;log-file recording must be enabled through an application's code.When enabled, the application records a list of components accessedduring each session. By default, only component names are recorded,but you may add more information.</p><br><a name = "TPXREF105"></a><h3><font face="Lucida Grande,Helvetica,Arial">Logging and Analyzing AdaptorActivity</font></h3><p>To enable adaptor logging, you create a file called <tt>logWebObjects</tt> inthe temporary directory of the computer where the HTTP server runs.When logging is enabled, the adaptor logs its activity in a filecalled <code>WebObjects.log</code> inthe temporary directory. Logging adaptor activity significantlydecreases performance. Use this feature only as a troubleshootingaid; do not use it during regular deployment.</p><p>The location of the temporary directory depends on the platform:</p><ul><li>Mac OS XServer and Solaris: <code>/tmp</code></font></li><li>Windows 2000: The directory indicated by the <code>TEMP</code> environmentvariable.</font></li></ul><br><a name = "TPXREF120"></a><h4><font face="Lucida Grande,Helvetica,Arial">Creating the Adaptor Log File</font></h4><p>On UNIX-based platforms, do the following to create the <code>logWebObjects</code> file(you must have root privileges):</p><ol><li>Start a command-shellwindow.</font></li><li>Set the working directory to the temporary directory.</font></li><li>Enter the following command:<pre>touch logWebObjects</pre></font></li></ol><p>On Windows 2000, create a blank file using a text editor andsave it as <code>logWebObjects</code> inthe temporary directory.</p><p>You can use the <code>tail</code> (UNIX)or <code>type</code> (Windows 2000)commands to display the adaptor log file in your console.</p><p>On UNIX-based systems, use the following:</p><pre>tail -f WebObjects.log</pre><p>On Windows 2000, type the following in a DOS prompt:</p><pre>type WebObjects.log</pre><br><a name = "TPXREF121"></a><h4><font face="Lucida Grande,Helvetica,Arial">Analyzing the Adaptor Log File'sContents</font></h4><p>You can analyze the information in the log to find out suchthings as which applications are being requested, which applicationsare being auto-started, and what the HTTP headers of the requestsare. You can also use the log to verify that the HTTP adaptor is properlyconfigured for load balancing.</p><p>The following excerpt includes an error message that indicatesthat an instance of Payroll wasn't running when a request forit came in:</p><pre>Info: &lt;WebObjects Apache Module&gt; new request: /cgi-bin/WebObjects/PayrollDebug: App Name: Payroll (7)Info: Specific instance Payroll: not found. Reloading config.</pre><p>After Payroll is started, the same request produces the followinglog-file entries:</p><pre>Info: New response: HTTP/1.0 200 Apple WebObjectsInfo: ac_newInstance(): added Payroll:2 (2001)Info: V4 URL: /cgi-bin/WebObjects/PayrollInfo: loadaverage: selected instance at index 4Info: Selected new app instance at index 4Debug: Composed URL to '/cgi-bin/WebObjects/Payroll.woa/1'Info: New request is GET /cgi-bin/WebObjects/Payroll.woa/1 HTTP/1.0Info: Sending request to instance number 1, port 2001Info: Trying to contact Payroll:1 on (2001)Info: attempting to connect to ebruce.apple.com on port 2001Info: Created new pooled connection [1] to ebruce.apple.com:2001Info: Using pooled connection to ebruce.apple.com:2001Info: Payroll:1 on (2001) connected [pooled: Yes]Info: Request GET /cgi-bin/WebObjects/Payroll.woa/1 HTTP/1.0 sent, awaiting responseDebug: ac_readConfiguration(): skipped reading configInfo: New response: HTTP/1.0 200 Apple WebObjectsInfo: Payroll 1 load avg = 1Info: received -&gt;200 Apple</pre><br>    <br><a href="Application_inistration.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="Improving_Performance.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated January 8, 2002)</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
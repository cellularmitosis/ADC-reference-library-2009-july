<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The 'itl2' Sorting Hooks(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING549></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-548.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-550.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-531.html"><B>Appendix B - International Resources</B></A> / <A HREF="Text-547.html"><B>String-Manipulation Resource (Type 'itl2')</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING549-0></A>
<H2><A NAME=MARKER-9-264></A>The 'itl2' Sorting Hooks</H2>
 <A NAME=MARKER-2-377></A>The string-manipulation resource contains five sorting hooks, each of which can modify the functioning of its equivalent default sorting routine that is built into Text Utilities. If the sorting hooks are all empty, the default U.S. Roman sorting behavior results. For example, the <CODE>'itl2'</CODE> resource in the version of the Roman script system that has been localized for the United States contains the built-in sorting behavior and empty hooks. For other script systems, one or more of the hooks are replaced with actual routines, to handle characters that need to be sorted differently from the default--for example, the Spanish character combination "rr" or the Norwegian "&ntilde;". Most of the sorting routines are called in turn for each character in each string of a pair that are being compared. Here is what each of the routines does:<P>
<UL>
<LI>Init routine. The init routine prepares two strings for comparison. The Text Utilities sorting routines compare a pair of strings byte for byte, and pass control to the init routine as soon as a pair of unequal byte values occur. All the init routine does is check to see if either of the byte values is the second byte of a 2-byte character (or other sorting unit, such as "rr" in Spanish). If it is, the init routine backs up one byte in the string, and passes control to the fetch routine.
<LI>Fetch routine. The fetch routine fetches the next sorting unit from each string, taking into account whether the unit is composed of one or two bytes. Many, though not all, characters in 2-byte script systems are 2 bytes long. Character combinations in 1-byte scripts can also be considered as single sorting units during sorting--such as "ch" in Spanish and "dz" in Croatian. For example, consider the second characters in these two strings:<P>
b c h a<BR>b c a d<P>
In analyzing the second sorting unit of each string, English versions of the fetch routine would return "c" in each case. Spanish versions, which combine "c" and "h" into a singular sorting unit "ch", would return "ch" for the upper string and "c" for the lower string.
<LI><A NAME=MARKER-2-266></A>Project routine. The project routine defines the primary sorting position for the individual sorting unit passed to it. In the example just presented, the English version of the project routine would give the same result for the second sorting unit of each string, whereas the Spanish version would give them different values.<P>
Where secondary sorting exists, the project routine "projects" each character into the sorting position of its equivalent primary character (perhaps uppercase with diacritical marks stripped). For example, consider the following two strings:<P>
b C a d f <BR>B c &aring; d g<P>
The project routine would give identical results for all the character pairs until passed the "f" and "g". In terms of the project routine, the strings would be sorted as if <BR>they were<P>
B C A D F<BR>B C A D G<P>
The Text Utilities use the project routine to establish decision characters to be used later if a primary difference is not available. The first pair of sorting units that have the same projected position but are not byte-for-byte identical is saved from this. Those decision characters are acted upon by the vernier routine.
<LI><A NAME=MARKER-2-267></A>Vernier routine. The vernier routine is the tie breaker that determines the sorting order for strings that are equivalent in terms of primary sorting. It defines the secondary sorting position for the sorting unit passed to it. Suppose, in the previous example, that the strings were<P>
b c a d f<BR>b c &aring; d f<P>
Primary equivalence exists between the two strings. The decision characters "a" and "&aring;" are passed in turn to the vernier routine; the vernier routine passes back a sorting position for each one. The return values determine whether "a" sorts before or after "&aring;", and thus establish the sorting order for the strings.
<LI>Exit routine. This sorting hook exists to allow for any needed post-processing after the sorting order for a pair of strings has been determined. It is called just before the Text Utilities string-comparison routine returns to the caller.<P>
</UL>
 For information on providing custom versions of the sorting hooks, see <A HREF=Text-551.html#MARKER-9-287>"Supplying Custom Sorting Routines" on page B-43</A>.<A NAME=MARKER-2-383></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-548.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-550.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

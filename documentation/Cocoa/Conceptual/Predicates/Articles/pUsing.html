<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Predicate Programming Guide: Using Predicates</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Predicates"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001794" title="Using Predicates"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">Predicate Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="pCreating.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="pSpotlightComparison.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40001794-CJBDBHCB" title="Using Predicates"></a><hr /><H1>Using Predicates</H1><p>This document describes in general how you use predicates, and how the use of predicates may influence the structure of your application data.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-250111">Evaluating Predicates</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-250409">Using Predicates with Arrays</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW3">Using Predicates with Relationships</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW1">Null Values</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW5">Using Predicates with Cocoa Bindings</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW6">Using Predicates with Core Data</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW9">Regular Expressions</a>
				
			<br/>
			
        
			
			
				<a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW2">Performance</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001794-250111" title="Evaluating Predicates"></a><h2>Evaluating Predicates</h2><p>To evaluate a predicate, you use the <code>NSPredicate</code> method <code>evaluateWithObject:</code> and pass in the object against which the predicate will be evaluated. The method returns a Boolean value—in the following example, the result is <code>YES</code>.</p><div class="codesample"><table><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF IN %@",<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSArray arrayWithObjects:@"Stig", @"Shaffiq", @"Chris", nil]];<span></span></pre></td></tr><tr><td scope="row"><pre>BOOL result = [predicate evaluateWithObject:@"Shaffiq"];<span></span></pre></td></tr></table></div><p>You can use predicates with any class of object, but note that a class must support key-value coding for the keys you want to use in a predicate.</p><a name="//apple_ref/doc/uid/TP40001794-250409" title="Using Predicates with Arrays"></a><h2>Using Predicates with Arrays</h2><p><code>NSArray</code> and <code>NSMutableArray</code> provide methods to filter array contents. <code>NSArray</code> provides <code>filteredArrayUsingPredicate:</code> which returns a new array containing objects in the receiver that match the specified predicate. <code>NSMutableArray</code> provides <code>filterUsingPredicate:</code> which evaluates the receiver’s content against the specified predicate and leaves only objects that match.</p><div class="codesample"><table><tr><td scope="row"><pre>NSMutableArray *array =<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSMutableArray arrayWithObjects:@"Bill", @"Ben", @"Chris", @"Melissa", nil];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *bPredicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] 'b'"];<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *beginWithB = [array filteredArrayUsingPredicate:bPredicate];<span></span></pre></td></tr><tr><td scope="row"><pre>// beginWithB contains { @"Bill", @"Ben" }.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *sPredicate = [NSPredicate predicateWithFormat:@"SELF contains[c] 's'"];<span></span></pre></td></tr><tr><td scope="row"><pre>[array filterUsingPredicate:sPredicate];<span></span></pre></td></tr><tr><td scope="row"><pre>// array now contains { @"Chris", @"Melissa" }<span></span></pre></td></tr></table></div><p>If you use the Core Data framework, the array methods provide an efficient means of filtering an existing array of objects without—as a fetch does—requiring a round trip to a persistent data store.</p><a name="//apple_ref/doc/uid/TP40001794-SW3" title="Using Predicates with Relationships"></a><h2>Using Predicates with Relationships</h2><p>Recall that you can follow relationships in a predicate using a key path. The following example illustrates the creation of a predicate to find employees that belong to a department with a given name (but see also <span class="content_text"><a href="pUsing.html#//apple_ref/doc/uid/TP40001794-SW2">“Performance”</a></span>).</p><div class="codesample"><table><tr><td scope="row"><pre>NSString *departmentName = ... ;<span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>        @"department.name like %@", departmentName];<span></span></pre></td></tr></table></div>	<p>If you use a to-many relationship, the construction of a predicate is slightly different. If you want to fetch Departments in which at least one of the employees has the first name "Matthew," for instance, you use an <code>ANY</code> operator as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>    @"ANY employees.firstName like 'Matthew'"];<span></span></pre></td></tr></table></div>	<p>If you want to find Departments in which <em>all</em> the employees are paid more than a certain amount, you use an <code>ALL</code> operator as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>float salary = ... ;<span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>    @"ALL employees.salary > %f", salary];<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001794-SW1" title="Null Values"></a><h2>Null Values</h2><p>A comparison predicate does not match any value with null except null (<code>nil</code>) or the <code>NSNull</code> null value (that is, (<code>$value == nil</code>) returns <code>YES</code> if <code>$value</code> is <code>nil</code>). Consider the following example.</p><div class="codesample"><table><tr><td scope="row"><pre>NSString *firstName = @"Ben";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSMutableArray *array = [NSMutableArray array];<span></span></pre></td></tr><tr><td scope="row"><pre>[array addObject:<span></span></pre></td></tr><tr><td scope="row"><pre>        [NSDictionary dictionaryWithObject:@"Turner" forKey:@"lastName"]];<span></span></pre></td></tr><tr><td scope="row"><pre>[array addObject:<span></span></pre></td></tr><tr><td scope="row"><pre>        [NSDictionary dictionaryWithObjectsAndKeys:@"Ben", @"firstName",<span></span></pre></td></tr><tr><td scope="row"><pre>                @"Ballard", @"lastName",<span></span></pre></td></tr><tr><td scope="row"><pre>                [NSDate dateWithString:@"1972-03-24 10:45:32 +0600"], @"birthday", nil]];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *predicate =<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSPredicate predicateWithFormat:@"firstName like %@", firstName];<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *filteredArray = [array filteredArrayUsingPredicate:predicate];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"filteredArray: %@", filteredArray);<span></span></pre></td></tr><tr><td scope="row"><pre>// Output:<span></span></pre></td></tr><tr><td scope="row"><pre>// filteredArray ({birthday = 1972-03-24 10:45:32 +0600; \\<span></span></pre></td></tr><tr><td scope="row"><pre>                      firstName = Ben; lastName = Ballard; })<span></span></pre></td></tr></table></div>	<p>The predicate does match the dictionary that contains a value <code>Ben</code> for the key <code>firstName</code>, but does not match the dictionary with no value for the key <code>firstName</code>. The following code fragment illustrates the same point using a date and a greater-than comparator. </p><div class="codesample"><table><tr><td scope="row"><pre>NSDate *referenceDate = [NSDate dateWithTimeIntervalSince1970:0];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>predicate = [NSPredicate predicateWithFormat:@"birthday > %@", referenceDate];<span></span></pre></td></tr><tr><td scope="row"><pre>filteredArray = [array filteredArrayUsingPredicate:predicate];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"filteredArray: %@", filteredArray);<span></span></pre></td></tr><tr><td scope="row"><pre>// Output:<span></span></pre></td></tr><tr><td scope="row"><pre>// filteredArray: ({birthday = 1972-03-24 10:45:32 +0600; \\<span></span></pre></td></tr><tr><td scope="row"><pre>                       firstName = Ben; lastName = Ballard; })<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001794-SW4" title="Testing for Null"></a><h3>Testing for Null</h3><p>If you want to match null values, you must include a specific test in addition to other comparisons, as illustrated in the following fragment.</p><div class="codesample"><table><tr><td scope="row"><pre>predicate = [NSPredicate predicateWithFormat:@"(firstName like %@) || (firstName = nil)", firstName];<span></span></pre></td></tr><tr><td scope="row"><pre>filteredArray = [array filteredArrayUsingPredicate:predicate];<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"filteredArray: %@", filteredArray);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Output:<span></span></pre></td></tr><tr><td scope="row"><pre>// filteredArray: ( { lastName = Turner; }, { birthday = 1972-03-23 20:45:32 -0800; firstName = Ben; lastName = Ballard; }<span></span></pre></td></tr></table></div>	<p>By implication, a test for null that matches a null value returns true. In the following code fragment, <code>ok</code> is set to <code>YES</code> for both predicate evaluations.</p><div class="codesample"><table><tr><td scope="row"><pre>BOOL ok;<span></span></pre></td></tr><tr><td scope="row"><pre>predicate = [NSPredicate predicateWithFormat:@"firstName = nil"];<span></span></pre></td></tr><tr><td scope="row"><pre>ok = [predicate evaluateWithObject:[NSDictionary dictionary]];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>ok = [predicate evaluateWithObject:<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSDictionary dictionaryWithObject:[NSNull null] forKey:@"firstName"]];<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001794-SW5" title="Using Predicates with Cocoa Bindings"></a><h2>Using Predicates with Cocoa Bindings</h2><p>You can set a predicate for an array controller to filter the content array. You can set the predicate in code (using <code>setFilterPredicate:</code>). You can also bind the array controller's <code>filterPredicate</code> binding to a method that returns an <code>NSPredicate</code> object. The object that implements the method may be the File's Owner or another controller object. If you change the predicate, remember that you must do so in a key-value observing compliant way (see <em><a href="../../KeyValueObserving/index.html#//apple_ref/doc/uid/10000177i" target="_top">Key-Value Observing Programming Guide</a></em>) so that the array controller updates itself accordingly. </p><p>You can also bind the <code>predicate</code> binding of an <code>NSSearchField</code> object to the <code>filterPredicate</code> of an array controller. A search field's <code>predicate</code> binding is a multi-value binding, described in <span class="content_text"><a href="../../../Reference/CocoaBindingsRef/Concepts/BindingTypes.html#//apple_ref/doc/uid/20002305" target="_top">Binding Types</a></span>.</p><a name="//apple_ref/doc/uid/TP40001794-SW6" title="Using Predicates with Core Data"></a><h2>Using Predicates with Core Data</h2><p>If you are using the Core Data framework, you can use predicates in the same way as you would if you were not using Core Data (for example, to filter arrays or with an array controller). In addition, however, you can also use predicates as constraints on a fetch request and you can store fetch request templates in the managed object model (see <span class="content_text"><a href="../../CoreData/Articles/cdMOM.html#//apple_ref/doc/uid/TP40002328" target="_top">Managed Object Models</a></span>).</p><p>Note the you cannot necessarily translate "arbitrary" SQL queries into predicates or fetch requests. There is no way, for example, to convert a SQL statement such as <code>SELECT name, sum(value) FROM ... GROUP BY name</code> into a fetch request. You must fetch the objects of interest, then either perform a calculation directly using the results, or use an array operator.</p><a name="//apple_ref/doc/uid/TP40001794-SW7" title="Fetch Requests"></a><h3>Fetch Requests</h3><p>You create a predicate to match properties of the target entity (note that you can follow relationships using key paths) and associate the predicate with a fetch request. When the request is executed, an array is returned that contains the objects (if any) that match the criteria specified by the predicate. The following example illustrates the use of a predicate to find employees that earn more than a specified amount.</p><div class="codesample"><table><tr><td scope="row"><pre>NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>NSEntityDescription *entity = [NSEntityDescription entityForName:@"Employee"<span></span></pre></td></tr><tr><td scope="row"><pre>        inManagedObjectContext:managedObjectContext];<span></span></pre></td></tr><tr><td scope="row"><pre>[request setEntity:entity];<span></span></pre></td></tr><tr><td scope="row"><pre>// assume salaryLimit defined as an NSNumber variable<span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>        @"salary > %@", salaryLimit];<span></span></pre></td></tr><tr><td scope="row"><pre>[request setPredicate:predicate];<span></span></pre></td></tr><tr><td scope="row"><pre>NSError *error = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *array = [managedObjectContext executeFetchRequest:request error:&amp;error];<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001794-SW8" title="Object Controllers"></a><h3>Object Controllers</h3><p>If you are using Cocoa bindings, you can specify a fetch predicate for an object controller (such as an instance of <code>NSObjectController</code> or <code>NSArrayController</code>). You can type a predicate directly into the predicate editor text field in the inspector panel of Interface Builder or you can set it programmatically using <code>setFetchPredicate:</code>. The predicate is used to constrain the results returned when the controller executes a fetch. If you are using an <code>NSObjectController</code> object, you specify a fetch that uniquely identifies the object you want to be the controller's content—for example, if the controller's entity is Department, the predicate might be <code>name like "Engineering"</code>.</p><a name="//apple_ref/doc/uid/TP40001794-SW9" title="Regular Expressions"></a><h2>Regular Expressions</h2><p>The <code>MATCHES</code> operator uses <span class="content_text"><a href="http://icu.sourceforge.net/userguide/regexp.html" target="_blank">ICU's Regular Expressions package</a></span>, as illustrated in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSArray *array = [NSArray arrayWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>    @"TATACCATGGGCCATCATCATCATCATCATCATCATCATCATCACAG",<span></span></pre></td></tr><tr><td scope="row"><pre>    @"CGGGATCCCTATCAAGGCACCTCTTCG", @"CATGCCATGGATACCAACGAGTCCGAAC",<span></span></pre></td></tr><tr><td scope="row"><pre>    @"CAT", @"CATCATCATGTCT", @"DOG", nil];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// find strings that contain a repetition of at least 3 'CAT' sequences,<span></span></pre></td></tr><tr><td scope="row"><pre>// but not followed by a further 'CA'<span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *catPredicate =<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSPredicate predicateWithFormat:@"SELF MATCHES '.*(CAT){3,}(?!CA).*'"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *filteredArray = [array filteredArrayUsingPredicate:catPredicate];<span></span></pre></td></tr><tr><td scope="row"><pre>// filteredArray contains just 'CATCATCATGTCT'<span></span></pre></td></tr></table></div><p>Note that, according to the ICU specification, regular expression metacharacters are not valid inside a pattern set. For example, the regular expression <code>\d{9}[\dxX]</code> does <em>not</em> match valid ISBN numbers (any ten digit number, or a string with nine digits and the letter 'X') since the pattern set (<code>[\dxX]</code>) contains a metacharacter (<code>\d</code>). Instead you could write an OR expression, as shown in the following code sample: </p><div class="codesample"><table><tr><td scope="row"><pre>NSArray *isbnTestArray =<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSArray arrayWithObjects:@"123456789X", @"987654321x",<span></span></pre></td></tr><tr><td scope="row"><pre>        @"1234567890", @"12345X", @"1234567890X", nil];<span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *isbnPredicate =<span></span></pre></td></tr><tr><td scope="row"><pre>    [NSPredicate predicateWithFormat:@"SELF MATCHES '\\\\d{10}|\\\\d{9}[Xx]'"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *isbnArray = [isbnTestArray filteredArrayUsingPredicate:isbnPredicate];<span></span></pre></td></tr><tr><td scope="row"><pre>// isbnArray contains (123456789X, 987654321x, 1234567890)<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001794-SW2" title="Performance"></a><h2>Performance</h2><p>You should structure compound predicates to minimize the amount of work done. Regular expression matching in particular is an expensive operation. In a compound predicate, you should therefore perform simple tests before a regular expression; thus instead of using a predicate shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>    @"( title matches .*mar[1-10] ) OR ( type = 1 )"];<span></span></pre></td></tr></table></div>	<p>you should write</p><div class="codesample"><table><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>    @"( type = 1 ) OR ( title matches .*mar[1-10] )"];<span></span></pre></td></tr></table></div>	<p>In the second example, the regular expression is evaluated only if the first clause is false. </p><a name="//apple_ref/doc/uid/TP40001794-SW10" title="Joins"></a><h3>Joins</h3><p>In general, joins (queries that cross relationships) are also expensive operations, and you should avoid them if you can. When testing to-one relationships, if you already have—or can easily retrieve—the relationship source object (or its object ID), it is more efficient to test for object equality than to test for a property of the source object. Instead of writing the following:</p><div class="codesample"><table><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>        @"department.name like %@", [department name]];<span></span></pre></td></tr></table></div>	<p>it is more efficient to write:</p><div class="codesample"><table><tr><td scope="row"><pre>NSPredicate *predicate = [NSPredicate predicateWithFormat:<span></span></pre></td></tr><tr><td scope="row"><pre>        @"department == %@", department];<span></span></pre></td></tr></table></div>	<p>If a predicate contains more than one expression, it is also typically more efficient to structure it to avoid joins. For example, <code>@"firstName startswith[cd] 'Matt' AND (ANY directreports.paygrade &lt;= 7)"</code>  is likely to be more efficient than <code>@"(ANY directreports.paygrade &lt;= 7) AND (firstName startswith[cd] 'Matt')"</code> because the former avoids making a join unless the first test succeeds.</p><a name="//apple_ref/doc/uid/TP40001794-208815" title="Structuring Your Data"></a><h3>Structuring Your Data</h3><p>In some situations, there may be tension between the representation of your data and the use of predicates. If you intend to use predicates in your application, the pattern of typical query operations may influence how you structure your data. In Core Data, although you specify entities and entity-class mapping, the levels that create the underlying structures in the persistent store are opaque. Nevertheless, you still have control over your entities and the properties they have.</p><p>In addition to tending to be expensive, joins may also restrict flexibility. It may be appropriate, therefore, to de-normalize your data. In general—assuming that queries are issued often—it may be a good trade-off to have larger objects, but for it to be easier to find the right ones (and so have fewer in memory). </p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="pCreating.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="pSpotlightComparison.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-05-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html%3Fid%3DTP40001789-1.11&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html%3Fid%3DTP40001789-1.11&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html%3Fid%3DTP40001789-1.11&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Opening Recognition Systems and Recognizers</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING11></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="srec-10.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="srec-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="srec-87.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="srec-12.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="srec-2.html"><B>Speech Recognition Manager</B></A> / <BR><DD><A HREF="srec-4.html"><B>Chapter 1 - Speech Recognition Manager</B></A> / <A HREF="srec-9.html"><B>Using the Speech Recognition Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING11-0></A>
<H2><A NAME=MARKER-9-108></A>Opening Recognition Systems and Recognizers</H2>
 <A NAME=MARKER-2-109></A>Before calling any other Speech Recognition Manager routines, you need to call the <CODE>SROpenRecognitionSystem</CODE> function to open a recognition system. Then you need to call <CODE>SRNewRecognizer</CODE> to create a recognizer associated with that recognition system. <A HREF=#MARKER-9-110>Listing 1-3</A> shows how to use these functions to initialize speech recognition for your application.<P>
<B>Listing 1-3  <A NAME=MARKER-9-110></A>Initializing speech recognition</B><P>
<PRE>
SRRecognitionSystem     gRecSystem = NULL;/* our recognition system */
SRRecognizer            gRecognizer = NULL;/* our recognizer */

OSErr MyInitSpeechRecognition (void)
{
   OSErr             myErr;
   
   /* Ensure that the Speech Recognition Mgr is available. */
   if (!MyHasSpeechRecognitionMgr()) 
      return(kSRNotAvailable);

   /* Open the default recognition system. */
   myErr = SROpenRecognitionSystem(&amp;gRecSystem, kSRDefaultRecognitionSystemID);

   /* Use standard feedback window and listening modes. */
   if (!myErr) {
      short myModes = kSRHasFeedbackHasListenModes;
      myErr = SRSetProperty(gRecSystem, kSRFeedbackAndListeningModes, 
                                          &amp;myModes, sizeof(myModes));
   }

   /* Create a new recognizer. */
   if (!myErr)
      myErr = SRNewRecognizer(gRecSystem, &amp;gRecognizer, kSRDefaultSpeechSource);

   /* Set reference constant of rejected word. */
   if (!myErr)
      myErr = MySetRejectedWordRefCon(gRecSystem);

   return(myErr);
}
</PRE>
 Note that the <CODE>MyInitSpeechRecognition</CODE> function defined in <A HREF=#MARKER-9-110>Listing 1-3</A> explicitly sets the feedback and listening modes property of the recognition system to the value <CODE>kSRHasFeedbackHasListenModes</CODE> immediately after it calls the <CODE>SROpenRecognitionSystem</CODE> function. This instructs the recognition system to use the standard feedback and listening behavior for any recognizers associated with it, which helps ensure that the user has a consistent experience when using any applications that use the Speech Recognition Manager. In general, you should use other feedback and listening modes values only if your application provides its own feedback mechanism.<A NAME=MARKER-2-111></A><A NAME=MARKER-2-112></A><P>
 The <CODE>MyInitSpeechRecognition</CODE> function defined in <A HREF=#MARKER-9-110>Listing 1-3</A> also creates a recognizer by calling the <CODE>SRNewRecognizer</CODE> function. <CODE>SRNewRecognizer</CODE> takes a reference to an existing recognition system and a <B>speech source ID,</B> which specifies a speech source. <CODE>SRNewRecognizer</CODE> returns a reference to the new recognizer through its second parameter (here, <CODE>gRecognizer</CODE>). <CODE>MyInitSpeechRecognition</CODE> also calls <CODE>MySetRejectedWordRefCon</CODE> (shown in <A HREF=srec-14.html#MARKER-9-123>Listing 1-8 on page 1-24</A>) to simplify the processing of recognition results.<A NAME=MARKER-2-114></A><P>
 You can terminate your connection to the Speech Recognition Manager by calling <CODE>SRReleaseObject</CODE> to dispose of your recognizer and then <CODE>SRCloseRecognitionSystem</CODE> to close your recognition system, as illustrated in <A HREF=#MARKER-9-115>Listing 1-4</A>.<P>
<B>Listing 1-4  <A NAME=MARKER-9-115></A>Ending speech recognition</B><P>
<PRE>
OSErr MyTerminateSpeechRecognition (void)
{
   OSErr                   myErr;

   /* Stop processing any incoming sound. */
   myErr = SRStopListening(gRecognizer);

   /* Balance call to SRNewRecognizer in MyInitSpeechRecognition. */
   myErr = SRReleaseObject(gRecognizer);

   /* Balance call to SROpenRecognitionSystem in MyInitSpeechRecognition. */
   myErr = SRCloseRecognitionSystem(gRecSystem);

   return(myErr);
}
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="srec-10.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="srec-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="srec-87.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="srec-12.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="srec-3.html">&copy; Apple Computer, Inc.</A><br>22 JAN 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

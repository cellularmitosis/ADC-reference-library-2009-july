<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>TextWidth(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING164></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-163.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-165.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-126.html"><B>Chapter 3 - QuickDraw Text</B></A> / <A HREF="Text-143.html"><B>QuickDraw Text Reference</B></A><BR><DL><DD><A HREF="Text-147.html"><B>Routines</B></A> / <A HREF="Text-161.html"><B>Measuring Text</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING164-0></A>
<H3>TextWidth</H3>
 The <A NAME=MARKER-2-133></A><CODE>TextWidth</CODE> function returns the length in pixels of the specified text.<P>
<PRE>
FUNCTION TextWidth (textBuf: Ptr; 
                    firstByte, byteCount: Integer): Integer;
</PRE>
<DL>
<DT><CODE>textBuf</CODE>
<DD> A pointer to a buffer that contains the text to be measured.
<DT><CODE>firstByte</CODE>
<DD> An offset from <CODE>textBuf</CODE> to the first byte of the text to be measured.
<DT><CODE>byteCount</CODE>
<DD> The number of bytes of text to be measured.
</DL>
<A NAME=HEADING164-6></A>
<H5>DESCRIPTION</H5>
 You can use <CODE>TextWidth</CODE> to measure the screen pixel width of any text segment that has uniform character attributes. You can use it to measure the style runs in a line of text, whether you intend to draw the line using <CODE>DrawText</CODE> or <CODE>DrawJustified</CODE>. The <CODE>TextWidth</CODE> function takes into account the character attributes set in the graphics <BR>port. If you change any of these attributes after determining the text width but before actually drawing the text, the predetermined width may not be correct. For a space character, <CODE>TextWidth</CODE> also includes the effect of <CODE>SpaceExtra</CODE>. For a nonspace character, <CODE>TextWidth</CODE> includes the effect of <CODE>CharExtra</CODE>.<P>
 The <CODE>TextWidth</CODE> function works with text in all script systems because the script management system modifies the routine if necessary to give the proper results.<P>
<DL>
<DT><B>Note</B>
<DD>To draw justified lines of text that include multiple style runs, you calculate the amount of extra pixels, or slop, that remains to be distributed throughout the line. This process entails measuring the screen pixel width of each style run on the line: you can use <CODE>TextWidth</CODE> for this purpose. For a complete discussion of how to use <CODE>TextWidth</CODE> to prepare to draw a line of justified text, refer to <A HREF=Text-139.html#MARKER-9-136>"Measuring and Drawing Lines of Text"</A> beginning <A HREF=Text-139.html#MARKER-9-136>page 3-29</A>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING164-10></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 For 1-byte complex script systems, <CODE>TextWidth</CODE> calculates the widths of any ligatures, reversals, and compound characters that need to be drawn.<P>
 Note that <CODE>byteCount</CODE> is the number of bytes to be measured, not the number of characters. Because 2-byte script systems also include characters consisting of only one byte, you should not simply multiply the number of characters by 2 to determine this value; you must determine and specify the correct number of bytes<A NAME=MARKER-2-266></A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-163.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-165.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN1140: The Euro Currency Symbol</title>    <meta name="keywords" content="Mac OS 8 euro currency symbol fonts fond apple support">    <meta name="Description" content="Technical Note TN1140: This Technical Note attempts to gatherall of the available                                    information from Apple about Mac OS and Mac                                    OS X Server support for the Euro currencysymbol. This Note also points to various sites                                    on the internet that deal specificallywith this new                                     currencysymbol."><meta name="categories" content="Printing and Text"><meta name="week-posted" content="Dec 27, 1999 - Jan 7, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002979" title="The Euro Currency Symbol"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/Internationalization/index.html">Internationalization</a> &gt; <a href="../../technicalnotes/Internationalization/idxLocalization-date.html">Localization</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1140</div>
<div id="pageheadsub">The Euro Currency Symbol</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box -->         <table width="600" cellpadding="0" cellspacing="0" border="0">     <tr><td width=300 valign="top" align=left scope="row">    <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>        </tr>        <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left>       <span id="menutitle">CONTENTS   <br>  <br>       </span>   </td>        </tr>        <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left>       <!-- begin_toc --><p id="menutext"><A HREF = "#Euro">What is the Euro and what does it look like?</A><BR><BR><A HREF = "#Unicode">Unicode and the Euro</A><BR><BR><A HREF = "#OSSupport">Mac OS Support - Fonts and Printing</A> <BR><BR><A HREF = "#ServerSupport">Mac OS X Server Support</A><BR><BR><A HREF = "#Summary">Summary</A><BR><BR><A HREF = "#References">References</A><BR><BR><A HREF = "#Downloads">Downloadables</A></p><!-- end_toc --></td>        </tr>        <tr>   <td width=300 align=left scope="row">       <img src="images/tnmenubottom.gif" alt="" width=300 height=16>   </td>        </tr>    </table></td><td width=300 valign="top" align=left>       <!-- begin_intro_text --><P id = "introtext">Many developers have contacted Apple's Worldwide Developer Support group asking about Mac OS and Mac OS X Server support for the Euro currency symbol. This Technote attempts to gather all of the available information from Apple and also points to various sites on the internet that deal specifically with this new currency symbol.</p><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Sep 14 1998]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><A NAME="Euro"></A><h2>What is the Euro and what does it look like?</h2><img src="images/tn1140_001.gif" alt="Euro" width=55 height=55>  <p><I>The Euro currency symbol</I></p><P>The Euro is the name of the proposed single currency symbol for the European Union. According to the European Union, the Euro is scheduled to exist as banking currency beginning on January 1, 1999, and it will move into more general use with the introduction of coins and notes on January 1, 2002. We recommend that all developers add support for the Euro now to prepare for its launch in 1999. For more information on the Euro, please see <A HREF = "http://europa.eu.int/euro/">The European Union web site</A>.</p><BR><P><A HREF="#top">Back to top</A></P><A NAME="Unicode"></A><h2>Unicode and the Euro</h2><P>As stated by the Unicode Consortium's Unicode <A HREF = "http://www.unicode.org/unicode/reports/tr8.html">Technical Report #8</A>: "The Euro character is encoded in the Unicode Standard as U+20AC EURO SIGN. To avoid confusion, the historical character U+20A0 EURO-CURRENCY SIGN has been updated with an informative note and a cross reference to U+20AC EURO SIGN." Please see the Unicode Consortium's Unicode <A HREF = "http://www.unicode.org/unicode/reports/tr8.html">Technical Report #8</A> for more detail. </p><BR><P><A HREF="#top">Back to top</A></P><A NAME="OSSupport"></A><h2>Mac OS Support - Fonts and Printing</h2><h3>Mac OS Fonts</h3><P>The standard European glyph, as designed and specified by the European Union in Brussels, has been added to all of Apple's Mac OS fonts to be distributed with Mac OS 8.5, due out later in 1998. Under Mac OS 8.5, you will find the Euro glyph in the following fonts: Apple Chancery, Capitals, Charcoal, Chicago, Courier, Gadget, Geneva, Helvetica, Hoefler Text, Monaco, New York, Palatino, Sand, Skia, Symbol, Techno, Textile, and Times. </p><p>In all of the fonts listed above, except Symbol, the character has been added at Option-Shift-2 (MacRoman Encoding decimal 219, hex <CITE>0xDB</CITE>), replacing the international currency symbol.</p><p><img src="images/tn1140_002.gif" alt="International Currency" width=48 height=50> </p><p><i> The international currency symbol</i></p><P>For Symbol, the glyph has been added at Option-t (MacRoman Encoding decimal 160, hex <CODE>0xA0</CODE>, previously unused). The glyph has not been stylized in any of Apple's fonts, i.e., it does not take on the font and style characteristics of the font in which it resides. Apple may stylize this glyph with a future release of the Mac OS, although at this time, Apple is not planning to release the Apple fonts mentioned above outside of the Mac OS 8.5 release. Third parties, however, do have fonts that contain this Euro glyph if you are not running Mac OS 8.5.</p><h3>Printing</h3><h4>LaserWriter 8</h4><h4>LaserWriter 8.6</h4><P>The changes to the LaserWriter 8.6 driver for supporting the Euro character apply only to Mac-encoded fonts. A font is considered a Mac-encoded font if the host-based version of the font is marked as a font that requires Mac Encoding (Bit-1 of the font's font classification word is set). The following description only applies to fonts which are marked as Mac-encoded fonts.</p><P>The LaserWriter driver is responsible for reencoding fonts marked as Mac-encoded fonts so that their encoding corresponds to the Apple-defined MacEncoding vector. Prior to LaserWriter 8.6, the MacEncoding vector contained the name "/currency" at the code point corresponding to Option-Shift-2. When imaging the character at the Option-Shift-2 code point in Mac-encoded fonts, drivers prior to LaserWriter 8.6 imaged the character named "/currency" (which corresponds to the international currency symbol).</p><P>With the introduction of Mac OS 8.5 and LaserWriter 8.6, Apple is redefining this code point in the MacEncoding vector to instead correspond to the Euro character. Therefore, the MacEncoding vector supplied by LaserWriter 8.6 contains the name "/Euro" at the code point corresponding to Option-Shift-2. While Apple is supplying screen fonts  which contain the Euro glyph at this code point, a large number of printer-resident fonts do not contain the Euro glyph at all. In order to support the Euro glyph whenever LaserWriter 8.6 encounters the Option-Shift-2 character from a Mac-encoded font, it images the Euro glyph (named "/Euro") from the Symbol font. If the Symbol font does not contain a character named "/Euro", then LaserWriter 8.6 adds it to the existing printer Symbol font prior to any imaging.</p><P>This LaserWriter 8.6 behavior is implemented for all Mac-encoded fonts,regardless of what glyph is actually present at that code point in the screen font on the host. Even if the international currency symbol appears on screen, if the font is a Mac-encoded font, the LaserWriter  8.6 driver will image a Euro character on the printed page. The LaserWriter 8.6 driver does not detect   which glyph is present in the screen fonts; it simply treats the Option-Shift-2 code point of Mac-encoded    fonts as the Euro code point.</p><P>The behavior for older LaserWriter 8 drivers depends upon the driver and possibly the version of the <code>PrintingLib</code> file.</p><h4>LaserWriter 8.4.x through 8.5.1</h4><P>The LaserWriter 8.4.x and 8.5.1 versions of the driver use a number of shared libraries contained in the <code>PrintingLib</code> file. If the version of <code>PrintingLib</code> is any version prior to 8.6, these drivers will continue to print as they have in the past; that is, imaging of the character at the Option-Shift-2 code point in Mac-encoded fonts will image the character named "/currency" (which corresponds to the international currency symbol) in the font on the printer. This occurs regardless of what character appears on screen for that code point in that font.</p><P>These drivers' behavior will be different if they are used with <code>PrintingLib</code> 8.6. Since <code>PrintingLib</code> 8.6 uses a MacEncoding vector which contains "/Euro" at this encoding point, and since the older drivers do not image the Euro from the Symbol font, imaging of the character at the Option-Shift-2 code point in Mac-encoded fonts will image the character named "/Euro" in that font on the printer. If the font does not contain a character named "/Euro", then the "/.notdef" character will image instead. This is typically a space or an empty box, as designed by the font designer. This result occurs regardless of what character appears on screen for the Option-Shift-2 code point for that font.</p><h4>LaserWriter 8.3.x and earlier</h4><P>These drivers do not use the <code>PrintingLib</code> file and always use a MacEncoding vector which contains the name "/currency" at the code point corresponding to Option-Shift-2. That is, imaging of the character at the Option-Shift-2 code point in Mac-encoded fonts will image the character named "/currency" (which corresponds to the international currency symbol) in the font on the printer. This occurs regardless of what character appears on screen for that code point in that font.</p><h3>Other Printer Drivers</h3><h4>Raster</h4><P>All raster printer drivers should not have problems printing the Euro character, inside or outside of Mac OS 8.5. Apple's Color StyleWriter series are able to print this glyph without problems.</p><h4>PostScript</h4><P>Third-party PostScript printer drivers may or may not be able to handle printing the Euro glyph contained in our new fonts. If you are having problems printing with a third-party printer driver, please contact the printer driver developer for more information, or try using LaserWriter 8.6 with your PostScript device to get the proper output.</p><h4>Third-party Font Developers</h4><P>So what should you do with your font to support the Euro so that it shows up on the screen and prints? This depends on whether you are making a PostScript or a TrueType font. PostScript fonts contain only one resource to be altered:  the <code>FOND</code> resource. TrueType fonts contain two resources to be altered: the <code>FOND</code> and the   <code>'sfnt'</code>. </p>  <h3>The <code>FOND</code> Resource</h3><h4><code>FOND</code> changes to be made</h4><P>There are three things to be checked and edited as necessary in the <code>FOND</code>: Bit-1, Bit-9, and the Glyph reencoding Table.</p><P>The <code>FOND</code> contains several boolean bit fields, including the font classification word, that form the top portion of the Style Mapping Table in your font.  There are two specific bits in the font classification word, Bit-1 and Bit-9, which provide the printer driver with information about the encoding of characters within a font.  For detailed information on the Style Mapping Table and these bit settings, please  see <a href="../../documentation/mac/Text/Text-275.html#HEADING275-0">Inside Macintosh: Text, p. 4-99</A>.</p><h3>"Encoding", "Encoding Vector", and "Natural Encoding":</h3><P>An "encoding" refers to an arrangement of glyphs within an ordered list of byte codes. An "encoding vector" is a two-column table that associates glyphs with byte codes. An 8-bit encoding vector contains 256 entries. The encoding  vector enables byte codes in the print stream to be interpreted in terms of glyph names. e.g.,: byte code decimal 219  is associated with the glyph name "Euro".</p><P>The "natural encoding" of a font is the encoding vector with which it was originally built. This concept pertains to PostScript fonts as they cannot be built without an original (i.e., natural) encoding vector, whereas a TrueType  font has a structure that permits multiple <code>cmap</code>s from the beginning  -  none of which are more   "natural" than another. </p><P>When a TrueType font is converted to PostScript, the encoding vector is generated from the currently selected <code>cmap</code>. When a PostScript font is printed, the driver can either use the "natural" encoding within the font, or impose the Macintosh Standard encoding over the font by reencoding it. Bit-1 and Bit-9 control these encoding choices in the following ways:</p><h4>Bit-1</h4><P>Bit-1 activates Symbol font substitution by the LaserWriter 8 driver as described in the "Printing" section of this document. It causes the printer to print certain byte codes using glyphs from the Symbol font instead of the glyphs from the source font. The 16 byte codes which are subject to the Bit-1 Symbol substitution mechanism are:</p><TABLE border="1"><TR>    <td align="left"><p><B>Glyph</B></p></td>            <td align="left"><p><B><CODE>post</CODE> Name Mac Encoding</B></p></TD>    <td align="left"><p><B>(decimal)</B></p></TD></TR><TR>    <td align="left"><P>&#8800;</p></TD>    <td align="left"><P>notequal</p></TD>    <td align="left"><P>173</p></TD></TR><TR>    <td align="left"><P>&#8734;</p></TD>        <td align="left"><P>infinity</p></TD>        <td align="left"><P>176</p></TD></TR><TR>    <td align="left"><P>&#8804;</p></TD>        <td align="left"><P>lessequal</p></TD>        <td align="left"><P>178</p></TD></TR><TR>    <td align="left"><P>&#8805;</p></TD>        <td align="left"><P>greaterequal</p></TD>        <td align="left"><P>179</p></TD></TR><TR>    <td align="left"><P>&#8706;</p></TD>        <td align="left"><P>partialdiff</p></TD>        <td align="left"><P>182</p></TD></TR><TR>    <td align="left"><P>&#8721;</p></TD>        <td align="left"><P>summation</p></TD>        <td align="left"><P>183</p></TD></TR><TR>    <td align="left"><P>&#8719;</p></TD>        <td align="left"><P>product</p></TD>        <td align="left"><P>184</p></TD></TR><TR>    <td align="left"><P>&#188;</p></TD>        <td align="left"><P>pi</p></TD>        <td align="left"><P>185</p></TD></TR><TR>    <td align="left"><P>&#8747;</p></TD>        <td align="left"><P>integral</p></TD>        <td align="left"><P>186</p></TD></TR><TR>    <td align="left"><P>&#969;</p></TD>        <td align="left"><P>Omega</p></TD>        <td align="left"><P>189</p></TD></TR><TR>    <td align="left"><P>&#8730;</p></TD>        <td align="left"><P>radical</p></TD>        <td align="left"><P>195</p></TD></TR><TR>    <td align="left"><P>&#8776;</p></TD>        <td align="left"><P>approxequal</p></TD>        <td align="left"><P>197</p></TD></TR><TR>    <td align="left"><P>&#916;</p></TD>        <td align="left"><P>Delta</p></TD>        <td align="left"><P>198</p></TD></TR><TR>    <td align="left"><P>&#9674;</p></TD>        <td align="left"><P>lozenge</p></TD>        <td align="left"><P>215</p></TD></TR><TR>    <TD align=left><img src="images/tn1140_003.gif" width=54 height=49 alt="Euro small"></TD>     <td align="left"><P>Euro</p></TD>        <td align="left"><P>219</p></TD></TR><TR>    <TD align=left><img src="images/tn1140_004.gif" width=10 height=13 alt="Apple symbol"></TD>     <td align="left"><P>apple</p></TD>    <td align="left"><P>240</p></td></TR></TABLE><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>If you see the international currency symbol printing in the list above, it means you are using an old system and/or old printer driver.</P></TD></TR></TABLE></CENTER><BR><BR><P>This means that if you have glyphs at any of the code points listed above which you want printed with the glyphs defined in your own source font, you must turn Bit-1 <B>off</B>. This will deactivate substitution of ALL the above listed glyphs. </p><P>Consequently, with Bit-1 off, it is then your responsibility to ensure that the glyphs in your font correspond to the encoding you intend. If Mac Standard Encoding is intended, you must have all of the above Symbol glyphs  present in your font in their correct positions - including the Euro, of course.</p><P>Bit-1 set to <B>on</B> in combination with Bit-9 set to <B>off</B> also marks the encoding as "Macintosh Standard Encoding". In this case, the printer driver generates the Macintosh Standard Encoding vector for the font.</p><h4>Bit-9</h4><P>Bit-9 makes the driver read a custom encoding table in the <code>FOND</code>.  The entries in this table then update the natural character encoding of the font. </p><P>Note that setting Bit-9 affects the interpretation of Bit-1 because it deactivates Macintosh Standard Encoding as described above.</p><P>The  natural encoding of a font is the one it was generated with. This will typically also be Macintosh Standard Encoding if it was generated for the Macintosh with a normal development tool like Fontographer. Please note, however, that it may not be - the natural encoding could be the Adobe Standard Encoding or it could be any other made by specialist tools or developers. </p><P>Care should therefore be taken to establish what the natural encoding is when working with Bit-1 off (i.e., Non-Macintosh Standard Encoding).</p><P>If Bit-9 is set there should also be a glyph reencoding vector ("glyph-name encoding subtable") present in the <code>FOND</code> containing the overriding encoding values. </p><P>Bit-9 normally indicates that the font does not use the default MacEncoding vector. However, in the cases where you want the MacEncoding vector but wish to image the 16 Symbol substitution glyphs with glyphs from your own font, then Bit-1 would be off, Bit-9 would be set, and the reencoding vector would contain the full Standard MacEncoding.  If you know your natural encoding exactly, the reencoding vector would contain only the changes necessary to make it MacStandard.</p><h3>Glyph reencoding vector</h3><P>Within DumpFOND text files, the glyph reencoding vector table is labeled the "GLYPH REENCODING TABLE". Within <U>Inside Macintosh</U>, it is called the "glyph-name encoding subtable". The format and location of the glyph-name encoding subtable in the <code>FOND</code> is described in <a href="../../documentation/mac/Text/Text-269.html#HEADING269-0">Inside Macintosh-Text, p. 4-105 through 4-106</A>.</p><h3>Always declare the Euro in your fonts</h3><P>Because the Macintosh Standard Encoding now has two variations - the old Generic Currency symbol variant and the new Euro variant - a new method other than the encoding name is needed to resolve the variants. This information is necessary for programmers who need to map data in the font to another encoding, such as Unicode, or to another platform. Binary identical cross-platform data formats are an example.</p><P>Apple recommends that a reencoding vector containing the "Euro" be added to the <code>FOND</code> resource for all fonts that contain the Euro, even if it is not used (i.e., Bit-9 is not set). The reason is that this is the most universally available place that applications and system programmers can look to find out if the font contains a glyph for the Euro or the older International Currency Symbol. TrueType fonts declare the "Euro" in the <CODE>post</CODE> table, but PostScript fonts and <CODE>NFNT</CODE>s have no such structure.  The <code>FOND</code> is the only resource common to all these types of font. </p><P>Note that as discussed in the earlier section describing LaserWriter 8 printing, LaserWriter 8.6 does not detect the Euro in the font. For fonts marked as MacEncoded Fonts, the LaserWriter driver 8.6 always treats the code position decimal 219 as the Euro character. The declaration being recommended here is purely for other applications.</p><h3>Summary of Bit Settings</h3><TABLE width=500><TR>    <td valign=top align=left><P><B>Bit-1</B></p></TD>    <td valign=top align=left><P><B>Bit-9</B></p></TD>    <td valign=top align=left><P><B>Description</B></p></TD></TR>    <TR>    <td valign=top align=left><P>0</p></TD>    <td valign=top align=left><P>0</p></TD>    <td valign=top align=left><P>Download the font exactly as it exists using the natural encoding.</p></TD></TR><TR>    <td valign=top align=left><P>1</p></TD>    <td valign=top align=left><P>0</p></TD>     <td valign=top align=left><P>Replace the encoding vector with Mac Standard encoding including the Euro. Also switch to Symbol.</p></TD></TR><TR>    <td valign=top align=left><P>0</p></TD>     <td valign=top align=left><P>1</p></TD>     <td valign=top align=left><P>Take delta vector supplied and apply as an update to the natural encoding. No switch to Symbol. (Typically used for dingbat and "pi" fonts such as Carta, Symbol, Zapf Dingbats and Adobe Expert sets.)</p></TD></TR><TR>    <td valign=top align=left><P>1</p></TD>     <td valign=top align=left><P>1</p></TD>     <td valign=top align=left><P>Take delta vector supplied and apply as an update to the natural encoding. Switch to Symbol. Do not apply Macintosh Standard encoding. (Typically used with Macintosh Roman variant encodings).</p></TD></TR></TABLE><h3>How to add the <code>FOND</code> reencoding vector</h3><P>To work on the <code>FOND</code> resource, you should consider using DumpFOND and FuseFOND. These are free font tools available from Apple at <A HREF = "http://fonts.apple.com">http://fonts.apple.com</A>.</p><P><img src="images/tn1140_005.gif" alt="DumpFOND" width=445 height=62><BR><img src="images/tn1140_006.gif" alt="FusepFOND" width=447 height=60></p><P>Steps to add the <code>FOND</code> reencoding vector:</p><P>(1) Run DumpFOND to create a text file of the <code>FOND</code> of your font. A complete sample <code>FOND</code> text source of the Geneva font (with all of the tables filled in) accompanies this document. An excerpt is included below to show the Style Mapping Table and the Glyph Reencoding Table (or "vector").</p><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>/* DUMP OF FOND RESOURCE 3, NAME 'Geneva' */.....contents/* FONT ASSOCIATION TABLE */.....contents/* STYLE MAPPING TABLE */Font name needs coordinating: trueFont requires Mac vector reencoding: trueFont is outlinable by setting PaintType 2: trueNo smear and whiteout outlining simulation: falseNo smear bolding simulation: falseSimulate bold by increasing pointsize: falseNo obliquing for italic simulation: falseNo simulation of condensed style: falseNo simulation of expanded style: falseFont requires non-Mac reencoding: falseNo additional interchar spacing other than space char: falseReserved: 0..... additional contents/* GLYPH REENCODING TABLE */......contents excerpt.....Name for character code 0xD9: 'Ydieresis'Name for character code 0xDA: 'fraction'Name for character code 0xDB: 'Euro'Name for character code 0xDC: 'guilsinglleft'Name for character code 0xDD: 'guilsinglright'Name for character code 0xDE: 'fi'Name for character code 0xDF: 'fl'/* GLYPH WIDTH TABLE */.....contents/* BOUNDING BOX TABLE */.....contents</pre></TD></TR></TABLE></CENTER><BR><BR><P>(2) Most fonts in the marketplace today do not have a Glyph Reencoding Table. Therefore, it is likely that you will need to create one and add it to your font. If you have a Standard Mac Encoding font design, you can use the Geneva sample file included with this document. You can simply paste the text for the Glyph Reencoding Table from Geneva into your <code>FOND</code> text dump. If you prefer, you can also run DumpFOND on any of the new Mac OS 8.5 fonts, except Symbol, and use that table instead.</p><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Note: The text for the reencoding table should be inserted within the <code>FOND</code> in the sequence shown - i.e., after the Style Mapping Table and before the Glyph Width Table.</p></TD></TR></TABLE></CENTER><BR><BR><P>If you would like another encoding arrangement, you will need to create or edit your own table. You should use the standard PostScript encoding (<CODE>'post'</CODE>) names for each of your glyphs as published in <A HREF = "http://www.adobe.com">Adobe's PostScript Language Reference Manual</A>. Please note that <code>'post'</code> names are case-sensitive.</p><P>(3) Use a text editor, such as SimpleText, to replace the name "currency" with "Euro" wherever it is found in the dumped <code>FOND</code> glyph reencoding table. Do not use a "replace all" function so you don't replace "currency" in other tables, such as the metrics table. Note that the "Euro" must be begin with an upper-case "E", as PostScript names are case-sensitive. </p><P>(4) Set Bit-1. For normal MacEncoded fonts, make sure that Bit-1 in the font classification word in the <code>FOND</code> is set to true, as shown below (see comments on Bit-1 and Bit-9 settings above). </p><h3>Font requires Mac vector reencoding: true</h3><P>(5) Setting of Bit-9. If your font design requires glyph reencoding table overrides to the standard encoding, make sure that Bit-9 in the font classification word in the <code>FOND</code> is set to true, as shown below (see comments on Bit-1 and Bit-9 settings above).</p><h4>Font requires non-Mac reencoding: true</h4><P>(6) Run Fuse<code>FOND</code> to take the edited file and compile it back into the <code>FOND</code> resource of your font.</p><h4>Scope of reencoding vectors</h4><P>It is helpful to consider that there are three classes of reencoding vector: Full, Half, and Delta. The full vector contains 256 entries. The half vector contains 128 entries covering either the "low-byte" range (0-127) or the "high-byte" range (128-255). A delta reencoding vector contains only those characters that differ from the natural encoding. The smallest delta can be a single entry.</p><P>The sample Geneva reencoding vector contains a half vector for the high-byte range (i.e., it has 128 line entries which cover all glyphs in the high byte).</p><P>Apple recommends using a half vector for the high byte. There are three reasons for this:  </p><BLOCKQUOTE><P>(1)  Within the Roman script, most reencoding issues do not affect the low-byte ASCII range. <BR><br>(2) Creating a delta encoding requires that you know exactly what your natural encoding is. Knowing what the natural encoding is can be hard as it is not easily viewable and may also depend on fonts resident in your printer. <BR><br>(3) The OS 8.1 release and later printer drivers support delta reencoding vectors of any size (i.e., 1-256 entries), but some earlier drivers may only work with half or full reencoding vectors.</p></BLOCKQUOTE><P>Experiment with different scope reencoding vectors, depending on your design needs. A full or half vector has the benefit of explicit declaration, which avoids confusion and is less dependent on the exact behavior of a specific printer driver. </p><P>If you have a Euro in the font, at the very least include a single entry delta containing the "Euro". We recommend that you do this regardless of whether Bit-9 is on or off.</p><h3><code>'sfnt'</code></h3><h4><code>'sfnt'</code> changes to be made</h4><P>The <code>'sfnt'</code> resource normally describes a TrueType outline font, though it can also contain Type 1 PostScript fonts.  This discussion applies only to TrueType outline fonts in the <code>'sfnt'</code>. The <code>'sfnt'</code>  contains a large number of tables that are necessary to draw and interpret the glyphs of a font. The two TrueType   tables that need changing for Euro support are the <code>'cmap'</code> table (Character Code Mapping Table) and    the <code>'post'</code> table (PostScript Encoding Names Table). </p>   <P>A <code>'cmap'</code> associates character codes to glyph indices.  A <code>'post'</code> table associates glyph indices with PostScript encoding names. Within these tables individual glyphs are identified by a glyph index number, which is arbitrary and internal to the font (i.e. if you remove a glyph, the index numbers of glyphs following the deletion will change). Fonts can contain multiple <code>'cmap'</code> resources, enabling them to be used on different platforms with varying encodings, or for various purposes on the same platform. The Mac OS platform supports a series of language script encodings (e.g., MacRoman, MacArabic, MacJapanese),  as well as the Unicode encoding UTF-16.</p> <P>TrueType fonts can contain a large glyph collection (up to 65,000) which is independent of any encoding.  Moreover, TrueType supports multiple character encodings for a single font, and normal TrueType development  tools allow you to work with each of these parts independently.</p>  <P>Apple recommends appending the Euro glyph to a TrueType font without removing the existing international currency symbol. This has two advantages: </p>  <BLOCKQUOTE><p>(1) the glyph index of the Euro is the last glyph index value, and all other indexes and associated tables do not change. <BR><BR>(2) Unicode-savvy applications that use Apple Type Services for Unicode Imaging (ATSUI) will have access to both characters.</p></BLOCKQUOTE><p>The specific <code>'sfnt'</code> changes that must be made for Euro support are: </p><BLOCKQUOTE><P>(1) The Euro glyph should be given the <CODE>post</CODE> name "Euro".  (PostScript names are case-sensitive, so the "E" must be upper-case).<BR><BR>(2) The MacRoman <code>'cmap'</code> should be edited to assign the "Euro" to the code point <CODE>OxDB</CODE> (decimal 219).<BR><BR>(3) The Unicode <code>'cmap'</code> should then be edited to assign the "Euro" to the code point U+20AC.</p></BLOCKQUOTE><p>How to change the <CODE>post</CODE> names and <code>cmap</code>To work on the <code>'sfnt'</code> (TrueType) resource, you should consider using DumpPOST and AATFontTool. These are free Apple tools which you can download from <A HREF = "http://fonts.apple.com"> http://fonts.apple.com</A>.</p><P><img src="images/tn1140_008.gif" alt="DumpPOST" width=451 height=45><BR><img src="images/tn1140_009.gif" alt="AATFontTool" width=452 height=46></p><P>Your TrueType font is assumed in this discussion to be one of the Macintosh Roman encodings and to contain a <code>'cmap'</code> and <code>'post'</code> table. </p><P>To alter the <CODE>post</CODE> table, you must use a name list as input to the AAT Font Tool.This will override the existing value and automatically update the <code>cmap</code>. You achieve this by doing the following steps:</p><P>(1)  Run DumpPOST to produce a text file of all the <code>'post'</code> names in the font. This shows the postname and its associated glyph index value.  With TrueType fonts you can add glyphs to the font which are not encoded. This means you can either append the Euro glyph or you can paste it over the currency glyph.  We recommend the former (appending) so that the  currency glyph can then still be accessed by ATSUI users or via a switched <code>'cmap'</code>.</p><P>In the sample below, you can see the currency symbol has been left in, and the Euro added as a separate TrueType glyph with its internal glyph index incremented at the end of the collection.</p><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>Ydieresis /* 187 */fraction /* 188 */currency /* 189 */guilsinglleft /* 190 */guilsinglright /* 191 */.......excerpt....Dcroat /* 379 */commaaccent /* 380 */Euro /* 381 */</pre></TD></TR></TABLE></CENTER><BR><BR><P>(2)  Save the postnames file and run AAT Font Tool. Go to the options menu (which you will find all checked initially). Uncheck all except the first three options (shown in screen shot below):</p> <P><img src="images/tn1140_010.gif" alt="AAT Font options" width=294 height=173></p><P>(3) Select "Use Name List..." from the File menu and select the <CODE>postnames</CODE> file. Then select "Open and process..." from the File menu and select your font. The AAT Font Tool will then update  the <code>'post'</code> table and <code>'cmap'</code> table accordingly.</p> <P>You can confirm that the changes have been made to your font by opening your font in TrueEdit (a free tool available on the <A HREF = "http://fonts.apple.com">fonts.apple.com</A> web site). Open the <code>'post'</code> table in TrueEdit and confirm by inspection that the "Euro" entry is present as intended.</p><h3>About the AAT Font Tool</h3><P>Running the AAT Font Tool can also do a few other smart things to your fonts if you leave the other options checked. Here is an short outline of how it works: The AAT Font Tool tool does not rely on "standard glyph ordering". It analyzes the glyph repertoire based primarily on the <code>'post'</code> table, which is to say, the actual names. It looks at the existing <code>'cmap'</code> tables for 2-byte  fonts, and for any one-byte fonts which don't have names in the <code>'post'</code> table (i.e., the  <code>'post'</code> table is format 3).</p> <P>It adds all the <code>'cmap'</code> tables which represent scripts and/or languages which are present to significant degree. Thus, if a font only has a Hebrew alef but not the other letters, it won't add a Hebrew  <code>'cmap'</code>; if all the letters are present, then it will.</p><P>It adds all the Roman variants for script 0 fonts. It has been successfully used on third-party fonts whose glyph layouts are significantly different from Apple's. </p><p>Full details are in the AAT Font Tool's documentation on Apple's font web site, including descriptions of the many other powerful GX and AAT features you can add to your fonts at the same time while adding the Euro glyph.</p><h3>The Benefit</h3><P>Apple's system fonts have been updated as described above. Third-party fonts that follow these recommendations will inherit the same semantic and character handling properties in the system and the same keyboard mappings, which is important for consistent user interface.</p><h3>Adding a Euro glyph to a TrueType font with RoyalT</h3><P>For those who have TrueType fonts that contain a large investment in hinting, it is undesirable to lose those hints and revert back to a PostScript source just to get one new Euro glyph added.  Here is a step-by-step  instruction on how to use the RoyalT font tool to add a Euro glyph to the TrueType font file:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Warning:</B><BR>RoyalT is a very specialized tool for TrueType fonts. It is no longer supported     by Apple, nor is it fully stable. The following steps are therefore more than a work guide  -  they are      a "straight and narrow" path that you need to follow to get useful work out of the tool without too much trouble.      Please ensure that you back up and read up on RoyalT installation and use before running.  Though nearing the end       of its life, RoyalT is on the <A HREF = "http://fonts.apple.com">fonts.apple.com</A> web site because it is still        the only free tool that can do certain valuable and advanced things with Apple TrueType fonts - this operation         included. Again, there is no support for this tool from Apple.</P></TD></TR></TABLE></CENTER><BR><BR><P>This sequence of instructions copies a standard Euro glyph from one font and pastes it over a glyph in the target font. The CVT and hint instructions for the glyph are then updated manually. Entry numbers  refer to points in the Euro glyph outline. These numbers will differ from the particular glyph you will  be using. You will have to identify which points hints reference in your own outlines:</p><TABLE border=1 width=500><TR>    <td width=25 valign=top align=left>(1)</TD>    <td valign=top align=left>Launch RoyalT PPC 3.2d4 </TD></TR><TR>    <td valign=top align=left>(2) </TD>    <td valign=top align=left>Open your Euro glyph source font</TD></TR><TR>    <td valign=top align=left>(3)</TD>     <td valign=top align=left>Command-H and go to the glyph index number of the Euro</TD></TR><TR>    <td valign=top align=left>(4)</TD>     <td valign=top align=left>Open your Target font</TD></TR><TR>    <td valign=top align=left>(5) </TD>    <td valign=top align=left>Command-H and go to the target glyph location. e.g., 189, the approximate/usual index number     of the international currency symbol in standard Macintosh fonts.</TD></TR><TR>    <td valign=top align=left>(6) </TD>    <td valign=top align=left>Click on the main window of the source font, then command-C to copy the glyph already     selected (source font can be closed after this).</TD></TR><TR>    <td valign=top align=left>(7)</TD>     <td valign=top align=left>Click on the main window of the target font, then command-V to paste to the glyph already selected.</TD></TR><TR>    <td valign=top align=left>(8) </TD>    <td valign=top align=left>Open Views: CVT from pull-down menu.</TD></TR><TR>    <td valign=top align=left>(9) </TD>    <td valign=top align=left>Scroll to end of list and highlight the last entry.</TD></TR><TR>    <td valign=top align=left>(10) </TD>    <td valign=top align=left>Command-D to append to the end of the list.</TD></TR><TR>    <td valign=top align=left>(11)</TD>     <td valign=top align=left>Add entry value 130. Note the entry line number on paper and mark it as entry "A".</TD></TR><TR>    <td valign=top align=left>(12) </TD>    <td valign=top align=left>Scroll to the end of the list again and highlight the last entry.</TD></TR><TR>    <td valign=top align=left>(13) </TD>    <td valign=top align=left>Command-D to append to the end of the list.</TD></TR><TR>    <td valign=top align=left>(14) </TD>    <td valign=top align=left>Add entry value 48. Note the entry line number on paper and mark it as entry "B".</TD></TR><TR>    <td valign=top align=left>(15) </TD>    <td valign=top align=left>Open Views: Instructions window from the pull-down menu.</TD></TR> <TR>    <td valign=top align=left>(16) </TD>    <td valign=top align=left>At every occurrence of the number 227 (8 occurrences for this Euro outline), change it to the value of "A" from step (11) above. In this example these are instruction lines 3, 19, 23, 25, 28, 29, 30.</TD></TR><TR>    <td valign=top align=left>(17) </TD>    <td valign=top align=left>At every occurrence of the number 228 (5 occurrences for this Euro outline), change it to the value of "B" from step (14) above. In this example these are instruction lines 6, 11,14, 15, 16.</TD></TR><TR>    <td valign=top align=left>(18)</TD>     <td valign=top align=left>Command-R to recalculate</TD></TR><TR>    <td valign=top align=left>(19) </TD>    <td valign=top align=left>Open Views:Info window from the pull-down menu.</TD></TR><TR>    <td valign=top align=left>(20) </TD>    <td valign=top align=left>Change the LSB value to 100, unless the font is monospaced; in this case, change the LSB to match the RSB (rough guide only).</TD></TR><TR>    <td valign=top align=left>(21)</TD>     <td valign=top align=left>Command-R to recalculate</TD></TR><TR>    <td valign=top align=left>(22) </TD>    <td valign=top align=left>Click on main window of target font &amp; Save.</TD></TR><TR>    <td valign=top align=left>(23)</TD>     <td valign=top align=left>Run ResEdit and remove <CODE>'PREC'</CODE> and <CODE>'STR '</CODE> resources that were automatically added by RoyalT.</TD></TR><TR>    <td valign=top align=left>(24)</TD>    <td valign=top align=left>Update the <code>'post'</code> table to contain the postname of the glyph you have added at the appropriate index value.</TD></TR></TABLE><BR><P><A HREF="#top">Back to top</A></P><A NAME="ServerSupport"></A><h2>Mac OS X Server Support</h2><p>The Mac OS X Server team is currently working on adding support for the Euro character. Please watch the <a href="http://developer.apple.com/macosx/server/">Mac OS X Server web site</A> for further information.</p><BR><P><A HREF="#top">Back to top</A></P><A NAME="Summary"></A><h2>Summary</h2><p>As you can see, there is plenty of good information on the Euro out there. We hope this gives you a good sense of the support that Apple has added to its OS releases, and gives you an idea of what you need to do with your fonts.</p><BR><P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><p>Apple information:</p>        <p><a href="../../documentation/mac/Text/Text-275.html#HEADING275-0">Inside Macintosh: Text</A></p>        <p><A HREF = "http://fonts.apple.com">Apple's Font web site</A></p>        <p><a href="http://developer.apple.com/macosx/server/">Mac OS X Server web site</A></p>        <p> The official European Union Euro pages:</p>        <p><A HREF = "http://europa.eu.int/euro/">Central EU Euro page</A></p>        <P><A HREF = "http://europa.eu.int/euro/download.asp?lang=en">EU Euro page in English</A></p>        <p><A HREF = "http://www.unicode.org/unicode/reports/tr8.html">Unicode Consortium Euro information</A></p>    <p><A HREF = "http://homepages.iol.i.e./%7Epobeirne/eurofaq.htm">Euro SIG FAQ</A></p>        <p>Adobe Information:</p>        <p><A HREF = "http://www.adobe.com/supportservice/custsupport/LIBRARY/503a.htm">Adobe Euro Fonts </a></p>        <p><A HREF = "http://www.adobe.com">Adobe PostScript Language Reference Manual</A></p>        <p>Microsoft's Euro pages:</p>        <p><A HREF = "http://www.microsoft.com/typography/OTSPEC/EURO.HTM">Microsoft Euro description</a></p>        <p><A HREF = "http://www.microsoft.com/typography/default.htm">Microsoft Typography</a></p>        <p>General Euro Info sites:</p>          <p><A HREF = "http://www.ispo.cec.be/y2keuro/euroit.htm">IT Impact of the Euro</a></p>        <p><A HREF = "http://www.rural.co.uk/emu/symbol.htm">Euro Symbol</a></p>         <BR><P><A HREF="#top">Back to top</A></P>        <A NAME="Downloads"></A>         <h2>Downloadables</h2>        <center><TABLE BORDER=0 CELLPADDING=3 WIDTH="600">         <TR>             <td width=50 align=left>               <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P>            </TD>            <td align="left">               <p>Acrobat version of this Note (192K).</P>            </TD>            <td width=60 align=left>               <p><A HREF="pdf/tn1140.pdf">Download</A></P>            </TD>          </TR>                      <TR>            <td width=50 align=left>                  <P ALIGN=center><img src="images/bluebook.gif" width=22 height=23 align=bottom alt="Bluebook gif"></P>               </TD>            <td align="left">               <p>Geneva dump (23K).</P>            </TD>            <td width=60 align=left>               <p><A HREF = "downloads/tn1140.1.hqx">Download</A></P>            </TD>          </TR>                      </table></center><BR><BR><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1140.html%3Fid%3DDTS10002979-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1140.html%3Fid%3DDTS10002979-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1140.html%3Fid%3DDTS10002979-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
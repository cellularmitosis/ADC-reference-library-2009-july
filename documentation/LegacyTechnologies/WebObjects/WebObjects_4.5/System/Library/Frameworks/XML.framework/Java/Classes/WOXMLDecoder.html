<HTML>		<HEAD>		<TITLE>			WOXMLDecoder		</TITLE>		</HEAD>	<BODY bgcolor="#ffffff"><!--start of banner --><!-- #include virtual="/techpubs/navbar" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>XML Reference</font><br><br><!--end of path --><a href="../XMLTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="up"></a><a name = "WOContext"></a><BR><h1><FONT COLOR="#000066"><a name="//apple_ref/java/cl/WOXMLDecoder">WOXMLDecoder</a></FONT></h1><br><blockquote><dl><dt><b>Inheritsfrom: </b></dt><dd> NSObject</dd></dl></blockquote><blockquote><dl><dt><b>Package: </b></dt><dd>com.apple.webobjects.xml</dd></dl></blockquote><HR SIZE=4><a name = "DAFBHJBF"></a><br><h2>Class Description</h2><hr><p>Use this class to construct ("decode") an object fromXML data. Decoding can take place either with or without a mappingmodel. The mapping model provides greater control over the decodingprocess and is typically used when you are encoding and decodingXML that is destined for, or originates from, an external source.When the WOXMLCoder and WOXMLDecoder areused as an archiving mechanism, the mapping model is usually notnecessary. For more information on the mapping model, see the  <a href="../Introduction.html#BAAJGIAH">"The Format of the Mapping Model" </a> inthe framework introduction.</p><br><a name = "CHBEDHDE"></a><h2>Decoding XML Without aMapping Model</h2><p>On its own, without a mapping model,  <a href="#WOContext">WOXMLDecoder</a> is able to decode anyobject as long as the object and all of its children either implementthe  <a href="../Protocols/WOXMLCoding.html#WOContext">WOXMLCoding</a> interfaceor are an instance of String, Number (or a subclass, provided thatthe subclass doesn't add instance variables), NSArray, NSDictionary,NSDate, NSData, or EOEnterpriseObject (or a subclass, providingthat all instance variables are either attributes or relationships).To construct an object from XML data, invoke one of the  <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a> methods. </p><p>Objects that implement the WOXMLCoding interfacemust also implement a single-argument constructor that takes a  <a href="#WOContext">WOXMLDecoder</a> objectas the single argument if they are to be decoded. Within this constructoryou decode your object's instance variables using  <a href="#WOContext">WOXMLDecoder</a>'svarious <b>decode...ForKey</b> methods.</p><p>The following simple "Person" class implements both thesingle-argument constructor needed to decode objects of this classand the WOXMLCoding interface.</p><blockquote><pre>import com.apple.webobjects.xml.*;import com.apple.yellow.foundation.*;import java.lang.*;import java.net.*;import java.math.*;public class Person extends Object implements WOXMLCoding {    String name;    boolean married;    int children;    public Person() {        name = "John Smith";        married = true;        children = 2;    }    public void encodeWithWOXMLCoder(WOXMLCoder coder) {        coder.encodeObjectForKey(name, "Name");        coder.encodeBooleanForKey(married, "MaritalStatus");        coder.encodeIntForKey(children, "NumberOfChildren");   }    // constructor required for decoding    public Person(WOXMLDecoder decoder) {        name = (String)decoder.decodeObjectForKey("Name");        married = decoder.decodeBooleanForKey("MaritalStatus");        children = decoder.decodeIntForKey("NumberOfChildren");    }}</pre></blockquote><br><p>See the XMLArchiving example (accessible through the WebObjectsInfo Center under Examples &gt; WebObjects &gt; Java &gt; XMLArchiving)for a more complete example.</p><br><a name = "DAFGBIBJ"></a><h2>Decoding XML With a MappingModel</h2><p>The mapping decoder gives you much greater control over thedecoding process, since it operates under the direction of an XML-formatmapping model that you create. This mapping model allows you tospecify how XML elements and attributes are to be mapped to objectsand object attributes (the mapping is performed using key-valuecoding). Because of the added power and flexibility the mappingmodel provides, the mapping decoder is particularly well-suitedto decode XML that wasn't generated by the  <a href="WOXMLCoder.html#WOContext">WOXMLCoder</a>.</p><p>Suppose you had the following XML:</p><blockquote><pre>&lt;command quantity="10"&gt;    &lt;customer&gt;&lt;name&gt;Ringle&lt;/name&gt;&lt;/customer&gt;    &lt;fullMovie name="Alien"&gt;        &lt;date&gt;1979-10-25 00:00:00 -0700&lt;/date&gt;        &lt;cat&gt;Horror&lt;/cat&gt;        &lt;role name="Brett"&gt;&lt;/role&gt;        &lt;role name="Kane"&gt;&lt;/role&gt;        &lt;role name="Dallas"&gt;&lt;/role&gt;        &lt;role name="Parker"&gt;&lt;/role&gt;        &lt;role name="Lambert"&gt;&lt;/role&gt;        &lt;role name="Ash"&gt;&lt;/role&gt;        &lt;role name="Ripley"&gt;&lt;/role&gt;    &lt;/fullMovie&gt;&lt;/command&gt;</pre></blockquote><br><p>Futher suppose that you wanted to decode the above XML intoan object of the following class:</p><blockquote><pre>public class Command extends NSObject {    public EOGenericRecord movie;    public NSMutableDictionary customer;    public int qty;}</pre></blockquote><br><p>The WOXMLDecoder will do the job foryou given the following mapping model:</p><blockquote><pre>&lt;model&gt;    &lt;entity name="Command" xmlTag="command"&gt;        &lt;property name="qty" xmlTag="quantity" attribute="YES"/&gt;        &lt;property name="movie" xmlTag="movie"/&gt;        &lt;property name="customer" xmlTag="customer"/&gt;    &lt;/entity&gt;    &lt;entity name="MyMovie" xmlTag="movie"&gt;        &lt;property name="title" xmlTag="name" attribute="YES"/&gt;        &lt;property name="dateReleased" xmlTag="date"&gt;        &lt;property name="roles" xmlTag="role"&gt;        &lt;property name="category" xmlTag="cat"/&gt;    &lt;/entity&gt;    &lt;entity name="com.apple.yellow.eocontrol.EOGenericRecord" xmlTag="role"&gt;        &lt;property name="roleName" xmlTag="name" attribute="YES"/&gt;    &lt;/entity&gt;&lt;/model&gt;</pre></blockquote><br><p>The above is a simple example; see the RelatedLinks example(accessible through the WebObjects Info Center under Examples &gt;WebObjects &gt; Java &gt; RelatedLinks) for a more complete exampleillustrating the use of the WOXMLDecoder witha mapping model.</p><br><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Creating a WOXMLDecoder</dt><dd> <a href="#//apple_ref/java/clm/WOXMLDecoder/decoder">decoder</a></dd><dd> <a href="#//apple_ref/java/clm/WOXMLDecoder/decoderWithMapping">decoderWithMapping</a></dd></dl><dl><dt>Decoding XML</dt><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a></dd></dl><dl><dt>Reconstructing an object'scontents without a mapping model</dt><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeBooleanForKey">decodeBooleanForKey</a></dd><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeDoubleForKey">decodeDoubleForKey</a></dd><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeFloatForKey">decodeFloatForKey</a></dd><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a></dd><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeObjectForKey">decodeObjectForKey</a></dd></dl><dl><dt>Working with the XMLparser</dt><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a></dd><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a></dd><dd> <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></dd></dl></blockquote><br><br><h2>Static Methods</h2><hr><a name = "DAFDCACF"></a><BR><h3><a name="//apple_ref/java/clm/WOXMLDecoder/decoder">decoder</a></h3><p><code>public static WOXMLDecoder <b>decoder</b>()</code></p><p>Creates and returns a new  <a href="#WOContext">WOXMLDecoder</a> object.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFBCIDB"></a><BR><h3><a name="//apple_ref/java/clm/WOXMLDecoder/decoderWithMapping">decoderWithMapping</a></h3><p><code>public static WOXMLDecoder <b>decoderWithMapping</b>(String <em>mappingURL</em>)</code></p><p>Creates and returns a new  <a href="#WOContext">WOXMLDecoder</a> objectthat decodes XML based upon the mapping model specified by <em>mappingURL</em>.For more information, see  <a href="#DAFGBIBJ">"Decoding XML With a Mapping Model" </a>.</p><br><table border = "0" BGCOLOR="#E6E6E6"><tr><td scope="row">Windows NT uses backslasheswhere other systems use forward slashes. When prepending the "file:"URL prefix to a path such as is returned by WOResourceManager's <code>pathForResourceNamed</code> method,on Windows NT the prefix must be "file:\\" while on all other platformsthe prefix must be "file://". See the RelatedLinks example forone way to select the proper prefix based upon the underlying system.</td></tr></table><br><hr WIDTH="25%" ALIGN="LEFT"><BR><BR><h2>Instance Methods</h2><hr><a name = "DAFCFEHI"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeBooleanForKey">decodeBooleanForKey</a></h3><p><code>public boolean <b>decodeBooleanForKey</b>(String <em>key</em>)</code></p><p>Invoke this method from within in yoursingle-argument constructor to set a boolean instance variable tothe value of the key element within the XML being decoded. For example,to extract the marital status from the following XML:</p><blockquote><pre>&lt;element type="Person" objectID="4"&gt;    &lt;Name type="java.lang.String" objectID="5"&gt;John Smith&lt;/Name&gt;    &lt;MaritalStatus type="boolean"&gt;True&lt;/MaritalStatus&gt;    &lt;NumberOfChildren type="int"&gt;2&lt;/NumberOfChildren&gt;&lt;/element&gt;</pre></blockquote><br><p>Youcould use something similar to the following:</p><blockquote><pre>married = decoder.decodeBooleanForKey("MaritalStatus");</pre></blockquote><br><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFFFFAE"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeDoubleForKey">decodeDoubleForKey</a></h3><p><code>public double <b>decodeDoubleForKey</b>(String <em>key</em>)</code></p><p>Invoke this method from within in yoursingle-argument constructor to set an instance variable of type doubleto the value of the key element within the XML being decoded.</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFGCADJ"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeFloatForKey">decodeFloatForKey</a></h3><p><code>public float <b>decodeFloatForKey</b>(String <em>key</em>)</code></p><p>Invoke this method from within in yoursingle-argument constructor to set an instance variable of type intto the value of the key element within the XML being decoded.</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFGDGDE"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a></h3><p><code>public int <b>decodeIntForKey</b>(String <em>key</em>)</code></p><p>Invoke this method from within in yoursingle-argument constructor to set an instance variable of type intto the value of the key element within the XML being decoded. Forexample, to extract the number of children from the following XML:</p><blockquote><pre>&lt;element type="Person" objectID="4"&gt;    &lt;Name type="java.lang.String" objectID="5"&gt;John Smith&lt;/Name&gt;    &lt;MaritalStatus type="boolean"&gt;True&lt;/MaritalStatus&gt;    &lt;NumberOfChildren type="int"&gt;2&lt;/NumberOfChildren&gt;&lt;/element&gt;</pre></blockquote><br><p>Youcould use something similar to the following:</p><blockquote><pre>children = decoder.decodeIntForKey("NumberOfChildren");</pre></blockquote><br><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFJCCCB"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeObjectForKey">decodeObjectForKey</a></h3><p><code>public Object <b>decodeObjectForKey</b>(String <em>key</em>)</code></p><p>Invoke this method from within in yoursingle-argument constructor to set an instance variable to a newlyconstructed object whose class and content depends upon the valueof the key element within the XML being decoded. The object beingdecoded must meet the same criteria outlined in  <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a>; if not, or if anerror arises during the construction of the object, <b>decodeObjectForKey</b> throwsa WOXMLException.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFIIEJA"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a></h3><p><code>public synchronized Object <b>decodeRootObject</b>(NSData <em>data</em>)</code></p><p><code>public synchronized Object <b>decodeRootObject</b>(String <em>XMLfileURL</em>) </code></p><p><code>public synchronized Object <b>decodeRootObject</b>(org.xml.sax.InputSource <em>inputSource</em>)</code></p><p>Decodes the indicated XML and constructsa corresponding object. <b>decodeRootObject</b> acceptsXML either in an NSData object, in a file, or through an InputSource.If the XML resides within a file, <em>XMLfileURL</em> shouldbe a URL that identifies the file containing the XML. If the XML resideswithin a String object, use a StringReader object to supply an InputSource,like this:</p><blockquote><pre>stringReader = new StringReader(xmlString);is = new InputSource(stringReader);// invoke setEncoding (on the input source) if the XML contains multibyte charactersdecodedObject = (NSMutableArray)myDecoder.decodeRootObject(is);</pre></blockquote><br><p>Inthe above example, <code>xmlString</code> isa String object that contains the XML for an encoded NSMutableArrayobject.</p><p>Each object encoded within the XML must havea <tt>type</tt> attribute that indicates the object'sclass. Each encoded object must be one of the following:</p><ul><li>an instance of String</li><li>an instance of NSArray</li><li>an instance of NSDictionary</li><li>an instance of NSDate)</li><li>an instance of Number (or a subclass, providing that the subclassdoesn't add instance variables)</li><li>an instance of NSData</li><li>an object that implements the WOXMLCoding interface</li><li>an instance of EOEnterpriseObject (or a subclass, providingthat all instance variables are either attributes or relationships)</li></ul><p><p>Objectsthat implement the  <a href="../Protocols/WOXMLCoding.html#WOContext">WOXMLCoding</a> interfacemust also implement a special constructor; see  <a href="#CHBEDHDE">"Decoding XML Without a Mapping Model" </a> formore information and an example.</p></p><p>If the parseris unable to parse the supplied XML, <b>decodeRootObject</b> throwsa WOXMLException that encloses either a SAXException or an IOException.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFIAEGD"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/parser">parser</a></h3><p><code>public org.xml.sax.Parser <b>parser</b>()</code></p><p>Returns the XML parser (instantiatingone based upon the parser class name, if necessary). This method throwsa ClassNotFoundException if the parser class cannot be located,and an InstantiationException or IllegalAccessException if the parsercannot be created. The default parser is the SAX parser (com.ibm.xml.parsers.SAXParser).</p><p>Thismethod is invoked by  <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a>.</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a>,  <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFFBEHE"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a></h3><p><code>public String <b>parserClassName</b>()</code></p><p>Returns the name of the XML parser'sclass. By default, this is "com.ibm.xml.parsers.SAXParser".</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a>,  <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "DAFJHFCH"></a><BR><h3><a name="//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></h3><p><code>public void <b>setParserClassName</b>(String <em>className</em>)</code></p>Sets <em>className</em> asthe name of the class to be instantiated and used as the XML parser.The default parser class name is "com.ibm.xml.parsers.SAXParser".This method must be invoked before the parser is instantiated (bythe  <a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a> method);once the parser has been instantiated,  <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a> has no effect.<p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a>,  <a href="#//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a></p><hr WIDTH="25%" ALIGN="LEFT"><BR><br><a href="../XMLTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="up"></a></BODY></HTML>
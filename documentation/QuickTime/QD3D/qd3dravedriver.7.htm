<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Finding a Drawing Engine</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=44988"> </A><A NAME="27446"> </A>Finding a Drawing Engine</H1><P CLASS="T1.Text1"><A NAME="pgfId=45033"> </A><A NAME="marker=51437"> </A>Not all drawing engines are capable of drawing into all type of virtual devices. For example, some drawing engines might not support memory devices at all, and other drawing engines might support only a particular graphics device. As a result, once you've initialized a virtual device, you need to find a drawing engine that is capable of drawing into that device. You do this by finding the available drawing engines and selecting one that is capable of drawing into the desired virtual device. If more than one engine supports that device, you need to choose one of them.</P><P CLASS="T1.Text1"><A NAME="pgfId=57847"> </A>QuickDraw&nbsp;3D versions 1.1 and later provide a control panel that allows the user to select the drawing engine to use for each available monitor.</P><P CLASS="T1.Text1"><A NAME="pgfId=57849"> </A><A NAME="marker=57848"> </A>You can search through the list of available drawing engines by calling the <TT CLASS="cv">QADeviceGetFirstEngine</TT> and <TT CLASS="cv">QADeviceGetNextEngine</TT> functions. The <TT CLASS="cv">QADeviceGetFirstEngine</TT> function returns the preferred drawing engine for the specified device; in most cases, this engine is the best engine to use for high performance rendering. However, you might need specific drawing features that are not supported by the preferred drawing engine. If so, you can use the <TT CLASS="cv">QAEngineGestalt</TT> function to query the engine's capabilities, as shown in <A HREF="qd3dravedriver.7.htm#14507" CLASS="XRef">Listing&nbsp;6</A>.</P><P CLASS="L.Listing"><A NAME="pgfId=45064"> </A>Listing&nbsp;6<A NAME="14507"> </A>Finding a drawing engine with fast texture mapping</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=63968"> </A>TQAEngine *MyFindPreferredEngine (TQADevice *device)<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQAEngine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*myEngine;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fast;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;for (myEngine = QADeviceGetFirstEngine(device); <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myEngine;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myEngine = QADeviceGetNextEngine(device, myEngine)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (QAEngineGestalt(myEngine, kQAGestalt_FastFeatures, &amp;fast) == kQANoErr) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (fast &amp; kQAFast_Texture)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return(myEngine);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;return(NULL);<BR>}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=45182"> </A><A NAME="marker=63970"> </A>The <TT CLASS="cv">MyFindPreferredEngine</TT> function defined in <A HREF="qd3dravedriver.7.htm#14507" CLASS="XRef">Listing&nbsp;6</A> calls the <TT CLASS="cv">QADeviceGetFirstEngine</TT> function to get the preferred drawing engine for the specified device. Then it calls <TT CLASS="cv">QAEngineGestalt</TT>, passing the <TT CLASS="cv">kQAGestalt_FastFeatures</TT> selector, to determine which (if any) features are accelerated by that engine. If the engine supports accelerated texture mapping, the <TT CLASS="cv">MyFindPreferredEngine</TT> function returns that drawing engine. Otherwise, the <TT CLASS="cv">MyFindPreferredEngine</TT> function loops through all engines capable of drawing into the specified device until it finds one that does support fast texture mapping. If none is found, <TT CLASS="cv">MyFindPreferredEngine</TT> returns the value <TT CLASS="cv">NULL</TT>.</P><P CLASS="Note"><A NAME="pgfId=45312"> </A>See <A HREF="qd3dravedriver.28.htm#34472" CLASS="XRef">&quot;Gestalt Selectors&quot;</A> for a complete description of the selectors you can pass to the <TT CLASS="cv">QAEngineGestalt</TT> function. <A NAME="marker=51438"> </A></P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
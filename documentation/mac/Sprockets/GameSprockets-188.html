<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>ISpInit (GameSprockets)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" ="A" NAME="HEADING188"></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GameSprockets-187.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-189.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GameSprockets-2.html"><B>Apple Game Sprockets Guide</B></A> / <BR><DD><A HREF="GameSprockets-162.html"><B>Chapter 3 - InputSprocket</B></A> / <A HREF="GameSprockets-165.html"><B>InputSprocket Reference</B></A><BR><DL><DD><A HREF="GameSprockets-186.html"><B>InputSprocket Functions</B></A> / <A HREF="GameSprockets-187.html"><B>Configuring the Application</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING188-0"></A>
<H3>ISpInit<A NAME="MARKER-11-110"></A></H3>
 You can use the ISpInit function to initialize the InputSprocket layer and autoconfigure all the devices.<P>
<PRE>
OSStatus ISpInit (
	UInt32 count,
	ISpNeed *needs,
	ISpElementReference *inReferences,
	OSType appCreatorCode,
	OSType subCreatorCode,
	UInt32 flags,
	short setListResourceID
	UInt32 version);
</PRE>
<DL>
<DT><CODE>count</CODE>
<DD> The number of input requirements the game has. Each requirement is described in an <CODE>ISpNeed</CODE> structure.
<DT><CODE>needs</CODE>
<DD> A pointer to an array of <CODE>ISpNeed</CODE> structures. The order of the need structures in the array is important because the input devices will try to fulfill input requirements beginning with the first need structure in the array. More important requirements should be put first--for example, "jump" before "look at map." 
<DT><CODE>inReferences</CODE>
<DD> A pointer to an array of virtual elements identifying the elements that can meet your game's input requirements. The array will contain the number of element references specified in the <CODE>count</CODE> parameter. You can use all the usual calls to get events or poll these element references.
<DT><CODE>appCreatorCode</CODE>
<DD> The creator code of the application.
<DT><CODE>subCreatorCode</CODE>
<DD> The subcreator code. InputSprocket and device drivers use a union of the creator and subcreator codes to save and restore preferences. For every pair of codes the game's requirements for input should be identical; otherwise, there is an unknown result. The subcreator code gives you a domain in which to have multiple different preference settings within any given application.
<DT><CODE>flags</CODE>
<DD> Leave as 0.
<DT><CODE>setListResourceID</CODE>
<DD> A resource of type <CODE>kISpSetListResourceType</CODE>. See <A HREF="GameSprockets-227.html#MARKER-9-170">"The InputSprocket Set List Resource" (page 3-58)</A>
<DT><CODE>version</CODE>
<DD> The version of InputSprocket the game depends on.
<DT><I>function result</I>
<DD> A result code.
</DL>
<A NAME="HEADING188-12"></A>
<H5>DESCRIPTION</H5>
 The <CODE>ISpInit</CODE> function takes the number of input requirements in the <CODE>count</CODE> parameter, a pointer to an array of need structures in the <CODE>needs</CODE> parameter, and a pointer to an array of virtual element references in the <CODE>inReferences</CODE> parameter. A virtual element reference does not correspond to any physical control on a physical device. Devices push data into a virtual element reference when they have data that corresponds to the input requirement that reference represents. DrawSprocket provides two functions for creating virtual elements--ISpElement_NewVirtual <A HREF="GameSprockets-194.html#MARKER-9-116">(page 3-36)</A> and ISpElement_NewVirtualFromNeeds <A HREF="GameSprockets-195.html#MARKER-9-118">(page 3-36)</A>. <P>
 To determine which elements can meet the game's requirements for input, <CODE>ISpInit</CODE> goes down a list of system devices and asks each device in turn if it can meet any of the requirements listed in the <CODE>needs</CODE> array. On the list of system devices, which is created the first time InputSprocket is loaded, the keyboard appears last and the mouse next to last; there is no particular order for other devices. The game can use the following InputSprocket routines for extracting devices from the list and deactivating or activating devices to eliminate devices that are unsuited to the game from the list: the <CODE>ISpDevices_Extract</CODE> function <A HREF="GameSprockets-197.html#MARKER-9-121">(page 3-38)</A>, the <CODE>ISpDevices_ExtractByClass</CODE> function <A HREF="GameSprockets-198.html#MARKER-9-123">(page 3-39)</A>, the <CODE>ISpDevices_ExtractByIdentifier</CODE> function <A HREF="GameSprockets-199.html#MARKER-9-125">(page 3-40)</A>, the <CODE>ISpDevices_Activate</CODE> function <A HREF="GameSprockets-200.html#MARKER-9-127">(page 3-41)</A>, and the <CODE>ISpDevices_Deactivate</CODE> function <A HREF="GameSprockets-201.html#MARKER-9-42">(page 3-41)</A>.<P>
 As each device tries to fulfill the input requirements, it looks at the need structures in the order in which they appear in the array. If a particular requirement has already been fulfilled by a prior device and has the <CODE>kInputSprocketNoMultiConfig</CODE> flag set in the <CODE>ISpNeed</CODE> structure <CODE>flags </CODE>field, the device will ignore it. The device driver keeps track of how its actual device elements are matched to the virtual element references it creates-- in other words, which elements will meet which input requirements. <P>
 For each device driver, InputSprocket stores its configuration information, using the codes passed in the <CODE>appCreatorCode</CODE> and <CODE>subCreatorCode</CODE> parameters to identify them for future use. <P>
 The game passes a resource of type <CODE>kISpSetListResourceType</CODE> in the <CODE>setListResourceID</CODE> parameter. The game also passes a version number in the <CODE>version</CODE> parameter so that if the system is running an incompatible version of InputSprocket, the user can be alerted. <P>
<A NAME="HEADING188-18"></A>
<H5>CALLING RESTRICTIONS</H5>
 Do not call during interrupt time.<P>
</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="GameSprockets-187.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-189.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="GameSprockets-3.html">&copy; Apple Computer, Inc.</A><BR>2 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<html><head><title>Mac OS X Developer Tools
 Manual Page For rpcgen(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/rpcgen" title="Mac OS X Developer Tools
 Manual Page for rpcgen(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/rpcgen"; name=rpcgen(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
RPCGEN(1)                 BSD General Commands Manual                RPCGEN(1)

<b>NAME</b>
     <b>rpcgen</b> -- Remote Procedure Call (RPC) protocol compiler

<b>SYNOPSIS</b>
     <b>rpcgen</b> <u>infile</u>
     <b>rpcgen</b> [<b>-D</b> [<u>name=value</u>]] [<b>-A</b>] [<b>-M</b>] [<b>-T</b>] [<b>-K</b> <u>secs</u>] <u>infile</u>
     <b>rpcgen</b> [<b>-L</b>] <b>-c</b> | <b>-h</b> | <b>-l</b> | <b>-m</b> | <b>-t</b> | <b>-Sc</b> | <b>-Ss</b> | [<b>-o</b> <u>outfile</u>] [<u>infile</u>]
     <b>rpcgen</b> <b>-c</b> | <u>nettype</u> [<b>-o</b> <u>outfile</u>] [<u>infile</u>]
     <b>rpcgen</b> <b>-s</b> | <u>netid</u> [<b>-o</b> <u>outfile</u>] [<u>infile</u>]

<b>DESCRIPTION</b>
     <b>rpcgen</b> is a tool that generates C code to implement an RPC protocol.  The input to <b>rpcgen</b> is a language
     similar to C known as RPC Language (Remote Procedure Call Language).  <b>rpcgen</b> is normally used as in the
     first synopsis where it takes an input file and generates up to four output files.  If the <u>infile</u> is
     named <u>proto.x</u>, then <b>rpcgen</b> will generate a header file in <u>proto.h</u>, XDR routines in <u>proto</u><b>_</b><u>xdr.c</u>, server-<font color="#ffffff" class="whiteout">side&nbsp;serverside</font>
     side stubs in <u>proto</u><b>_</b><u>svc.c</u>, and client-side stubs in <u>proto</u><b>_</b><u>clnt.c</u>.  With the <b>-T</b> option, it will also
     generate the RPC dispatch table in <u>proto</u><b>_</b><u>tbl.i</u>.  With the <b>-Sc</b> option, it will also generate sample code
     which would illustrate how to use the remote procedures on the client side. This code would be created
     in <u>proto</u><b>_</b><u>client.c</u>.  With the <b>-Ss</b> option, it will also generate a sample server code which would illus-<font color="#ffffff" class="whiteout">trate&nbsp;illustrate</font>
     trate how to write the remote procedures. This code would be created in <u>proto</u><b>_</b><u>server.c</u>.

     The server created can be started both by the port monitors (for example, <u>inetd</u> or <u>listen</u>) or by
     itself.  When it is started by a port monitor, it creates servers only for the transport for which the
     file descriptor 0 was passed.  The name of the transport must be specified by setting up the environ-<font color="#ffffff" class="whiteout">mental&nbsp;environmental</font>
     mental variable PM_TRANSPORT.  When the server generated by <b>rpcgen</b> is executed, it creates server han-<font color="#ffffff" class="whiteout">dles&nbsp;handles</font>
     dles for all the transports specified in NETPATH environment variable, or if it is unset, it creates
     server handles for all the visible transports from <u>/etc/netconfig</u> file.

     <u>Note:</u> the transports are chosen at run time and not at compile time.  When the server is self-started,
     it backgrounds itself by default.  A special define symbol RPC_SVC_FG can be used to run the server
     process in foreground.  The second synopsis provides special features which allow for the creation of
     more sophisticated RPC servers.  These features include support for user provided #defines and RPC dis-<font color="#ffffff" class="whiteout">patch&nbsp;dispatch</font>
     patch tables.  The entries in the RPC dispatch table contain:

           + pointers to the service routine corresponding to that procedure,
           + a pointer to the input and output arguments,
           + the size of these routines

     A server can use the dispatch table to check authorization and then to execute the service routine; a
     client library may use it to deal with the details of storage management and XDR data conversion.

     The other three synopses shown above are used when one does not want to generate all the output files,
     but only a particular one.  Some examples of their usage is described in the EXAMPLE section below.
     When <b>rpcgen</b> is executed with the <b>-s</b> option, it creates servers for that particular class of transports.
     When executed with the <b>-n</b> option, it creates a server for the transport specified by <u>netid</u>.  If <u>infile</u>
     is not specified, <b>rpcgen</b> accepts the standard input.

     The C preprocessor, <a href="cpp.1.html#//apple_ref/doc/man/1/cpp">cpp(1)</a> is run on the input file before it is actually interpreted by <b>rpcgen</b> For
     each type of output file, <b>rpcgen</b> defines a special preprocessor symbol for use by the <b>rpcgen</b> program-<font color="#ffffff" class="whiteout">mer:&nbsp;programmer:</font>
     mer:

     RPC_HDR   defined when compiling into header files

     RPC_XDR   defined when compiling into XDR routines

     RPC_SVC   defined when compiling into server-side stubs

     RPC_CLNT  defined when compiling into client-side stubs

     RPC_TBL   defined when compiling into RPC dispatch tables

     Any line beginning with `%' is passed directly into the output file, uninterpreted by <b>rpcgen</b>.

     For every data type referred to in <u>infile</u> <b>rpcgen</b> assumes that there exists a routine with the string
     ``xdr_'' prepended to the name of the data type.  If this routine does not exist in the RPC/XDR
     library, it must be provided.  Providing an undefined data type allows customization of XDR routines.

<b>OPTIONS</b>
     <b>-a</b>      Generate all the files including sample code for client and server side.

     <b>-b</b>      This generates code for the SunOS 4.1 style of RPC.  This is the default.

     <b>-C</b>      Generate code in ANSI C.  This option also generates code that could be compiled with the C++
             compiler.

     <b>-c</b>      Compile into XDR routines.

     <b>-D</b> <u>name</u>[<u>=value</u>]
             Define a symbol name.  Equivalent to the #define directive in the source.  If no value is
             given, value is defined as 1.  This option may be specified more than once.

     <b>-h</b>      Compile into C data-definitions (a header file).  The <b>-T</b> option can be used in conjunction to
             produce a header file which supports RPC dispatch tables.

     <b>-K</b> <u>secs</u>
             By default, services created using <b>rpcgen</b> wait 120 seconds after servicing a request before
             exiting.  That interval can be changed using the <b>-K</b> flag.  To create a server that exits imme-<font color="#ffffff" class="whiteout">diately&nbsp;immediately</font>
             diately upon servicing a request, ``<b>-K</b> 0'' can be used.  To create a server that never exits,
             the appropriate argument is ``<b>-K</b> -1''.

             When monitoring for a server, some port monitors, like the AT&amp;T System V.4 UNIX utility
             <!-- a -->listen(1)<!-- /a -->, <u>always</u> spawn a new process in response to a service request.  If it is known that a
             server will be used with such a monitor, the server should exit immediately on completion.  For
             such servers, <b>rpcgen</b> should be used with ``<b>-K</b> -1''.

     <b>-L</b>      Server errors will be sent to syslog instead of stderr.

     <b>-l</b>      Compile into client-side stubs.

     <b>-m</b>      Compile into server-side stubs, but do not generate a <b>main</b>() routine.  This option is useful
             for doing callback-routines and for users who need to write their own <b>main</b>() routine to do ini-<font color="#ffffff" class="whiteout">tialization.&nbsp;initialization.</font>
             tialization.

     <b>-N</b>      Use the newstyle of <b>rpcgen</b>.  This allows procedures to have multiple arguments.  It also uses
             the style of parameter passing that closely resembles C.  So, when passing an argument to a
             remote procedure you do not have to pass a pointer to the argument but the argument itself.
             This behaviour is different from the oldstyle of <b>rpcgen</b> generated code.  The newstyle is not
             the default case because of backward compatibility.

     <b>-n</b> <u>netid</u>
             Compile into server-side stubs for the transport specified by <u>netid.</u> There should be an entry
             for <u>netid</u> in the netconfig database.  This option may be specified more than once, so as to
             compile a server that serves multiple transports.

     <b>-o</b> <u>outfile</u>
             Specify the name of the output file.  If none is specified, standard output is used (<b>-c</b> <b>-h</b> <b>-l</b>
             <b>-m</b> <b>-n</b> <b>-s</b> modes only)

     <b>-Sc</b>     Generate sample code to show the use of remote procedure and how to bind to the server before
             calling the client side stubs generated by <b>rpcgen</b>.

     <b>-Ss</b>     Generate skeleton code for the remote procedures on the server side. You would need to fill in
             the actual code for the remote procedures.

     <b>-s</b> <u>nettype</u>
             Compile into server-side stubs for all the transports belonging to the class <u>nettype</u>.  The sup-<font color="#ffffff" class="whiteout">ported&nbsp;supported</font>
             ported classes are <u>netpath,</u> <u>visible,</u> <u>circuit</u><b>_</b><u>n,</u> <u>circuit</u><b>_</b><u>v,</u> <u>datagram</u><b>_</b><u>n,</u> <u>datagram</u><b>_</b><u>v,</u> <u>tcp,</u> and <u>udp</u>
             [see <a href="../man3/rpc.3.html#//apple_ref/doc/man/3/rpc">rpc(3)</a> for the meanings associated with these classes.  <u>Note:</u> BSD currently supports only
             the <u>tcp</u> and <u>udp</u> classes].  This option may be specified more than once.  <u>Note:</u> the transports
             are chosen at run time and not at compile time.

     <b>-T</b>      Generate the code to support RPC dispatch tables.

     <b>-t</b>      Compile into RPC dispatch table.

     The options <b>-c</b>, <b>-h</b>, <b>-l</b>, <b>-m</b>, <b>-s</b>, and <b>-t</b> are used exclusively to generate a particular type of file,
     while the options <b>-D</b> and <b>-T</b> are global and can be used with the other options.

<b>NOTES</b>
     The RPC Language does not support nesting of structures.  As a work-around, structures can be declared
     at the top-level, and their name used inside other structures in order to achieve the same effect.

     Name clashes can occur when using program definitions, since the apparent scoping does not really
     apply.  Most of these can be avoided by giving unique names for programs, versions, procedures and
     types.

     The server code generated with <b>-n</b> option refers to the transport indicated by <u>netid</u> and hence is very
     site specific.

<b>EXAMPLE</b>
     The command

           $ rpcgen -T prot.x

     generates the five files: <u>prot.h</u>, <u>prot</u><b>_</b><u>clnt.c</u>, <u>prot</u><b>_</b><u>svc.c</u>, <u>prot</u><b>_</b><u>xdr.c</u> and <u>prot</u><b>_</b><u>tbl.i</u>.

     The following example sends the C data-definitions (header file) to standard output.

           $ rpcgen -h prot.x

     To send the test version of the -DTEST, server side stubs for all the transport belonging to the class
     <u>datagram</u><b>_</b><u>n</u> to standard output, use:

           $ rpcgen -s datagram_n -DTEST prot.x

     To create the server side stubs for the transport indicated by <u>netid</u> <u>tcp</u>, use:

           $ rpcgen -n tcp -o prot_svc.c prot.x

<b>SEE</b> <b>ALSO</b>
     <a href="cpp.1.html#//apple_ref/doc/man/1/cpp">cpp(1)</a>

                                 June 11, 1995
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/rpcgen.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/rpcgen.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/rpcgen.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> The Macintosh ROM and The NewWorld Architecture</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.25.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.25.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.27.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H1.Heading1"><A NAME="pgfId=3296"> </A>The Macintosh ROM and The NewWorld Architecture</H1><P CLASS="T1.Text1"><A NAME="pgfId=3297"> </A>Historically, the Macintosh ROM has been structured as one monolithic chunk of firmware in ROM, containing both low-level and high-level code. That is, it contained the routines needed by the computer at power-up time (hardware knowledge, initialization, diagnostics, drivers, and such), as well as quite a bit of higher level Mac OS code.<A NAME="marker=3298"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3299"> </A>While a computer needs to have a ROM with hardware-specific code in order to boot, the higher level code was also included in the Macintosh ROM because the Macintosh ROM had its genesis in the original 128K Macintosh computer back in 1983. In those days, ROM was cheaper than RAM, and the available disk space (which was floppy based) was at a premium. These factors are certainly no longer valid reasons for keeping (permanently locking) everything in ROM. RAM is relatively inexpensive now and it is faster than ROM. </P><P CLASS="T1.Text1"><A NAME="pgfId=3300"> </A>The NewWorld architecture separates the hardware-specific and higher level system software into two logically distinct pieces. In the NewWorld model, one piece, the bootROM, holds most of the hardware-specific components needed to boot the specific logic board implementation, while the other, the Mac OS ROM image file, contains boot-time Mac OS routines and hardware-specific software components that are common to many Macintosh computers.</P><P CLASS="T1.Text1"><A NAME="pgfId=3301"> </A>Low-level hardware-specific code still exists in firmware (ROM) in order to handle the computer's start-up activities. This code fits into one ROM called the bootROM. The bootROM has the hardware-specific code and description of the hardware needed to start up the computer and provide common hardware access services the operating system might require. Open Firmware is in the bootROM and provides access to the basic hardware subsystems and a Forth interpreter. Macintosh computers that support the NewWorld architecture have Open Firmware version 3.0 or later. Open Firmware is defined in <A HREF="PCI_BOOK.3a.html#27578" CLASS="XRef">Startup and System Configuration</A> and <A HREF="PCI_BOOK.59.html#29811" CLASS="XRef">PCI Open Firmware Drivers</A>.<A NAME="marker=3308"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3309"> </A>The Macintosh Toolbox is no longer in the on-board ROM. Only Open Firmware boot services still exist in the on-board hardware ROM. The Toolbox and other services necessary to boot the operating system after hardware initialization has taken place are in a disk file called &quot;Mac OS ROM.&quot; The Mac&nbsp;OS ROM image file (also known as the bootinfo file) is loaded from a mass storage device. The contents of the Mac OS ROM file is decompressed and stitched into the memory map as if it were a firmware ROM (that is, it is write- protected in the memory map). This is where the term ROM-in-RAM comes from. <A NAME="marker=3310"> </A></P><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.27.html#pgfId=3311" CLASS="Hypertext">Differences Introduced by the NewWorld Architecture</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.35.html#pgfId=3387" CLASS="Hypertext">NewWorld Components</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.36.html#pgfId=3411" CLASS="Hypertext">NewWorld Boot Process</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.37.html#pgfId=3428" CLASS="Hypertext">New Name Registry Functionality</A></H2><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.25.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.25.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.27.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Apple Help Programming Guide: Authoring Apple Help</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Authoring Apple Help"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000903-CH206" title="Authoring Apple Help"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../UserExperience/index.html#//apple_ref/doc/uid/TP30000440-TP30000437" target="_top">User Experience</a> &gt; <a href="../../../../UserExperience/HelpTechnologies-date.html#//apple_ref/doc/uid/TP30000440-TP30000437-TP30000520" target="_top">Help Technologies</a> &gt; <a href="../user_help_intro/user_assistance_intro.html#//apple_ref/doc/uid/TP30000903-CH204-CHDIDJFE">Apple Help Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../user_help_concepts/apple_help_concepts.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../registering_help/registering_help.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000903-CH206-CIHEAADH" title="Authoring Apple Help"></a><h1>Authoring Apple Help</h1><p>This chapter describes how to author help content for Help Viewer and organize it into a help book. Anyone authoring user help for Mac OS X should be familiar with the basic requirements of creating a help book and with the general guidelines for writing user help.</p><p>These are the basic steps for creating a help book for Mac OS X:</p><ol class="ol"><li class="li"><p>Design the help content.</p></li><li class="li"><p>Author the HTML help pages.</p></li><li class="li"><p>Organize the help book. This includes creating the necessary auxiliary files that Help Viewer uses.</p></li><li class="li"><p>Index the help book.</p></li></ol><p>In addition, this chapter describes how you can include additional content, such as QuickTime movies and AppleScript scripts, in your help book and how you can localize your help book for other languages.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHEHEAC">Designing a Help Book</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHGHDFJ">Authoring Help Pages</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-TPXREF103">Creating a Basic Help Book</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHFDHGJ">Creating a Chapter-Based Help Book</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHHFHAF">Indexing Your Help Book</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BEJEGADC">Adding Specialized Content to Your Help Book</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW5">Setting Up Exact Match Searching</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW12">Providing Your Own Online Support Articles</a>
				
			<br/>
			
        
			
			
				<a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BEJIGBGJ">Localizing Your Help Book</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000903-CH206-CIHEHEAC" title="Designing a Help Book"></a><h2>Designing a Help Book</h2><p>The first steps in authoring your help book are identifying the topics your help must cover and designing a layout for presenting these topics. To this end, you may find it useful to create a topic outline. If the software product for which you are creating help already has existing documentation, you may be able to base your outline on this material. If you are creating a help book from scratch, there are a number of ways you can approach the outline. A few examples:</p><ul class="ul"><li class="li"><p>Walk through the steps of the main task sequence in order. If you are writing help for a larger application, there may be several different task sequences a user would perform. For example, a productivity suite may have different task sequences for word processing, using spreadsheets, and creating presentations.</p></li><li class="li"><p>List topics alphabetically. </p></li><li class="li"><p>Go through each menu and menu item in the application sequentially.</p></li></ul><p>Each topic should be simple enough to be described in a few short paragraphs on a single HTML page. If a topic is lengthy, you should consider breaking it up into smaller subtopics.</p><p>Here are some tips to keep in mind when designing your help book.</p><ul class="ul"><li class="li"><p>Divide the information into overview information and tasks. Overview information defines terms and explains concepts important to an understanding of your software product; task information gives step-by-step directions for accomplishing a particular goal. You should generally place these two kinds of information on separate help pages to give users quick access to the information they want. You can link between pages containing overview and task information when appropriate. Avoid including “feature-oriented” pages, which describe application features but don’t tell users what they can do or how.</p></li><li class="li"><p>Identify any information you think you’ll need to give users more than once in a help book. You can write an individual help page to cover this information and link to it from other topics in the book to avoid duplication.</p></li><li class="li"><p>Build pages around four central questions: </p><ul class="nested"><li class="nested li"><p>What can users do?</p></li><li class="nested li"><p>Why do they want to do it?</p></li><li class="nested li"><p>How can they do it?</p></li><li class="nested li"><p>How can they solve problems doing it?</p></li></ul><p>Depending upon the complexity of the task, a well-designed help page may cover each of the first three questions in one or two sentences and the fourth in two or three bullet points. </p></li></ul><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHGHDFJ" title="Authoring Help Pages"></a><h2>Authoring Help Pages</h2><p>Once you have identified the subjects covered in your help book, you need to create HTML files for your help pages. To ensure that your help displays properly in Help Viewer, your help files should comply with the HTML 4.01 specification. Your main file—which contains the <code>AppleTitle</code> meta tag—should conform to the XHTML 1.0 specification. For a comprehensive description of the HTML 4.01 specification, see <em>HTML 4.01 Specification</em>, W3C Recommendation 24 December 1999 (<span class="content_text"><a href="http://www.w3.org/TR/1999/REC-html401-19991224/" target="_blank">http://www.w3.org/TR/1999/REC-html401-19991224/</a></span>). XHTML is described in <em>XHTML 1.0 The Extensible HyperText Markup Language (Second Edition)</em>, W3C Recommendation 26 January 2000, revised 1 August 2002 (<span class="content_text"><a href="http://www.w3.org/TR/2002/REC-xhtml1-20020801/" target="_blank">http://www.w3.org/TR/2002/REC-xhtml1-20020801/</a></span>).</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_8" title="Compatibility Note"></a><p><strong>Compatibility Note:</strong>&nbsp;If your help book is used only on Mac OS X v10.4 or later, use HTML 4.01 and use XHTML for the main page that contains the <code>AppleTitle</code> meta tag. Help Viewer references this file often and formatting it as XHTML improves performance.  If your help book is also used on Mac OS X v10.3 or earlier, however, use HTML 3.2 and do not use XHTML for the main page. If you use XHTML in that case, your help book will not be indexed properly. For details about writing Apple Help for older versions of Mac OS X, see <em>Providing User Assistance With Apple Help</em> in the Legacy Documentation section of the Apple Developer Connection Reference Library.</p></div><p>For an example of a help book to use as a starting point, see the files for Mac Help in <code>/Library/Documentation/Help/MacHelp.help/Contents/Resources/</code>.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF101" title="Authoring Tools"></a><h3>Authoring Tools</h3><p>You can author your help book in any application that generates valid HTML 4 files. Likewise, you can view your help book in any HTML 4–qualified browser; however, you should always test your help book in Help Viewer to ensure that your help book displays properly. </p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHBFEFA" title="Creating Topic Pages"></a><h3>Creating Topic Pages</h3><p>Each help page should cover only one topic, which can be expressed in a few short paragraphs. As mentioned in the section <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHEHEAC">“Designing a Help Book,”</a></span> your help book may contain both overview and task information. Overview pages define terms and concepts important to your application or offer other general information that users may need to know to understand your software product. For example, the help book page shown in <span class="content_text">Figure 2-1</span> describes application menus. </p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHECGDG" title="Figure 2-1A help book page containing overview information"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>A help book page containing overview information</p><img src = "../Art/overview_page.jpg" alt = "A help book page containing overview information" ></div><br/><p>Task pages, on the other hand, offer a step-by-step description of the actions the user must take to perform a common task in your software product. The help book page shown in <span class="content_text">Figure 2-2</span> describes the steps necessary to change the background of a Finder window.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHIFECC" title="Figure 2-2A task-oriented help book page"></a><p><strong>Figure 2-2&nbsp;&nbsp;</strong>A task-oriented help book page</p><img src = "../Art/task_page.jpg" alt = "A task-oriented help book page" ></div><br/><p>Topic pages typically include these elements:</p><ul class="spaceabove"><li class="li"><p>A title identifying the topic. In <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHECGDG">Figure 2-1</a></span>, “About application menus” identifies the topic and indicates that the topic is informational, not task oriented. In <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHIFECC">Figure 2-2</a></span>, “Changing a window’s background” indicates (by beginning with a verb) that the topic describes a procedure or task.</p></li><li class="li"><p>The topic introduction. For an overview page, this section describes what the user will learn about by reading this page. For a task-oriented page, the introduction indicates what the user will accomplish by performing the task. </p></li><li class="li"><p>Requirements for performing the task. For a task page, any conditions that must be met in order for the task to succeed should be mentioned up front, before the user begins the task. For example, if the help topic is "Burning a CD," the system requirements—such as the presence of a CD burner—for burning the CD should be mentioned here.</p></li><li class="li"><p>The task description. These are the steps that the user must perform to accomplish the given task. Overview pages typically do not contain this information.</p></li><li class="li"><p>The topic wrap-up. This includes any information the user may need in order to wrap up any task described in the page. It is also a good place to include tips, shortcuts, troubleshooting information, and links to related help topics. For example, the last paragraph shown in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHIFECC">Figure 2-2</a></span> gives a hint the user might need in order to see a large picture in their Finder window.</p></li><li class="li"><p>Related topics. At the end of a topic is a list of links to other topics that are related to this one and thus might be of special interest to the user.</p></li></ul><a name="//apple_ref/doc/uid/TP30000903-CH206-SW17" title="Printing A Page&acirc;&#128;&#153;s URL"></a><h3>Printing A Page’s URL</h3><p>While debugging a help book or examining a help book to learn how it was made, it can be difficult to figure out which file is the source of the page being displayed. To find the URL of the page of a help book, execute the following command in the Terminal application:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write com.apple.helpviewer PrintURLInFooter YES<span></span></pre></td></tr></table></div><p>This command causes every page’s URL to be listed in the footer when the page is printed. The onscreen version of the page does not change. <span class="content_text">Figure 2-3</span> shows a printed help page with a URL in the footer.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW16" title="Figure 2-3URL printed in footer"></a><p><strong>Figure 2-3&nbsp;&nbsp;</strong>URL printed in footer</p><img src = "../Art/print_URL.jpg" alt = "The page's URL is printed in the footer." ></div><br/><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHJDGFC" title="Creating Navigation Pages"></a><h3>Creating Navigation Pages</h3><p>In addition to topic pages, you may need to create navigation pages for your help book. Users should be able to find most of the information they need by searching and navigating through links in your topic pages. However, navigation pages, such as tables of content, allow users to browse your help book and navigate to topics they want to learn more about without having a particular search topic in mind. You may consider providing a table of contents at the following levels:</p><ul class="spaceabove"><li class="li"><p>Top level</p></li><li class="li"><p>Chapter level</p></li><li class="li"><p>Topic level</p></li></ul><p>Including a table of contents on the title page, at the top level of your help book, allows the user to select a starting point within your help book. A title-page table of contents gets the user started in finding help, even if they do not quite know what they are looking for. <span class="content_text">Figure 2-4</span> shows the top-level table of contents for the Mail application. </p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHIJIHD" title="Figure 2-4The title-page table of contents for Mail Help"></a><p><strong>Figure 2-4&nbsp;&nbsp;</strong>The title-page table of contents for Mail Help</p><img src = "../Art/mail_toc.jpg" alt = "The top-level table of contents for AppleWorks Help" ></div><br/><p>As mentioned in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHEHEAC">“Designing a Help Book,”</a></span> you should break complex topics with lengthy descriptions into smaller subtopics in order to keep each help topic short and focused. However, it may not be appropriate to include all of the subtopics directly in your main table of contents. </p><p>You can create navigation pages that contain links to sets of related subtopics. <span class="content_text">Figure 2-5</span> shows a high-level TOC page from Mac Help. If the user clicks one of the topics, a list of subtopics appears, giving information about each (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW1">Figure 2-6</a></span>). By clicking one of those subtopics, the user can get an information or task page for that subtopic (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW2">Figure 2-7</a></span>). Typically, this page also contains links to further information about this subtopic and to pages for related subtopics.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHGJFDB" title="Figure 2-5A high-level table of contents in Mac Help"></a><p><strong>Figure 2-5&nbsp;&nbsp;</strong>A high-level table of contents in Mac Help</p><img src = "../Art/machelp_toc_1.jpg" alt = "../Art/iphoto_navigation.jpg" ></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW1" title="Figure 2-6A subtopic-level table of contents in Mac help"></a><p><strong>Figure 2-6&nbsp;&nbsp;</strong>A subtopic-level table of contents in Mac help</p><img src = "../Art/machelp_toc_2.jpg" alt = "A top level table of contents in iPhoto Help" ></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW2" title="Figure 2-7A task page for a subtopic in Mac help"></a><p><strong>Figure 2-7&nbsp;&nbsp;</strong>A task page for a subtopic in Mac help</p><img src = "../Art/machelp_toc_3.jpg" alt = "A low level table of contents in iPhoto Help" ></div><br/><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF103" title="Creating a Basic Help Book"></a><h2>Creating a Basic Help Book</h2><p>Once you create the HTML files containing your help content, you must organize them into a help book. To do this, create a help book folder and include the following items:</p><ul class="ul"><li class="li"><p>The topic and navigation pages. These are the HTML pages that you created for your help content, as described in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHGHDFJ">“Authoring Help Pages.”</a></span></p></li><li class="li"><p>A title page (sometimes called a start page). This is the XHTML file that is displayed by default when the user first opens your help book.</p></li><li class="li"><p>A help book icon. This icon is displayed next to your help book in the Library menu.</p></li></ul><p>For an example of a help book to use as a starting point, see the files for Mail Help in <code>/Applications/Mail.app/Contents/Resources/English.lproj/MailHelp/</code>. (Note that you have to select Show Package Contents from the contextual menu to see the contents of the Mail.app bundle.)</p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF104" title="Organizing the Help Book Folder"></a><h3>Organizing the Help Book Folder</h3><p>Every help book must be enclosed in its own folder. For a simple help book, Apple recommends that you also create separate subfolders for your HTML help files and graphics. <span class="content_text">Figure 2-8</span> shows an example of a simple help folder for SurfWriter Help. </p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHCIHJC" title="Figure 2-8An example of a simple help book folder structure"></a><p><strong>Figure 2-8&nbsp;&nbsp;</strong>An example of a simple help book folder structure</p><img src = "../Art/simple_book_structure.jpg" alt = "An example of a simple help book folder structure" ></div><br/><p>At the top level of the SurfWriter Help folder are the index file and the title page. The book’s icon and other graphics files are in the gfx folder. The pgs folder contains the HTML pages for all the help topics. The shrd folder contains AppleScript and JavaScript scripts. The sty folder contains style sheets. Note that this is an example of a typical help folder, not a prescription for how you need to organize your help book. Only the index file, the title page, and the exact match property list file (if any—see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW5">“Setting Up Exact Match Searching”</a></span>) should be located at the top level of the help folder. (For chapter-based help books, each chapter can have its own index file—see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW13">“Organizing a Chapter-Based Help Book Folder”</a></span>). For performance reasons, there should be only a single HTML file at the top level. What other files and folders you use are entirely up to you.</p><p>The title page is described in the next section, <span class="content_text">“Creating a Title Page.”</span> <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHDHGCJ">“Specifying a Help Book Icon”</a></span> describes how to add an icon to your help book. Index files are discussed in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHHFHAF">“Indexing Your Help Book.”</a></span> </p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHJEAEF" title="Creating a Title Page"></a><h3>Creating a Title Page</h3><p>The title page is your help book’s default page, which appears when the user opens your help book, either by choosing the application help item from the Help menu in your application or by choosing your help book from the Library menu. The title page introduces your help book and serves as the entry point into the rest of your help content. All help books registered with the Help Viewer must have a title page.</p><p>There are many ways you can approach designing the title page for your help book. For example, the title page from Mac Help, the system help book, has a link to a help page that describes the new features in the current version of Mac OS X, a link to a page that introduces the capabilities of the system, and offers a number of links to help pages answering common queries to get the reader started.</p><p>To indicate the title page of your help book, include the <code>AppleTitle</code> meta tag in the header section of the XHTML file you want to use as your book’s default page. This XHTML file must reside at the top level of your help book folder, as shown in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHCIHJC">Figure 2-8</a></span>. Here is how you would use the <code>AppleTitle</code> meta tag in the title page for a help book called SurfWriter Help:</p><p><code>&lt;meta name="AppleTitle" content="SurfWriter Help"></code></p><p><span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHIJIHD">Figure 2-4</a></span> shows the title page for Mail Help. </p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHDHGCJ" title="Specifying a Help Book Icon"></a><h3>Specifying a Help Book Icon</h3><p>When you register a help book, your help book becomes visible in the Library menu. If you provide an icon, Help Viewer displays this icon in the Library menu, next to the title of your help book. Adding an icon to your help book makes it easier for users to associate your book with your application.</p><p>To specify an icon for your help book, use the <code>AppleIcon</code> meta tag in the header section of your title page file. Here is how you would specify an icon file called <code>surfwritericon16.png</code> for SurfWriter Help if the icon were at the top level of the help folder.</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta name="AppleIcon" content="SurfWriter%20Help/surfwritericon16.png"><span></span></pre></td></tr></table></div><p><span class="content_text">Figure 2-9</span> shows the Library menu, with each application’s icon next to the book title.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHJBEHD" title="Figure 2-9The Library menu"></a><p><strong>Figure 2-9&nbsp;&nbsp;</strong>The Library menu</p><img src = "../Art/helplibrary.jpg" alt = "The SurfWriter help book in the Help Center" ></div><br/><p>The icon file can be placed at the top level of the help folder or in any subfolder as long as you specify the path accordingly. Many applications place the icon file in the same graphics subfolder as all the illustrations for the help book. The icon should be a 16-by-16 pixel version of your application icon, with a transparent background, saved as a PNG file. Note that the icon cannot be updated from a remote server. Only the local icon file is used by Help Viewer. </p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHFDHGJ" title="Creating a Chapter-Based Help Book"></a><h2>Creating a Chapter-Based Help Book</h2><p>If your application uses optional components such as plug-ins or expansion packs, you may find it useful to organize your help book into chapters. Chapters are subfolders within a help book. The advantage of creating a chapter-based help book is that you can choose to install only those chapters that support components the user has installed. If the user later adds or removes components, you can install or remove individual chapter folders as required.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW13" title="Organizing a Chapter-Based Help Book Folder"></a><h3>Organizing a Chapter-Based Help Book Folder</h3><p>Each chapter has its own title page and may contain its own index and subfolders. For example, SurfWriter features several optional components, so the help book is organized into a main folder and a subfolder for each component. <span class="content_text">Figure 2-10</span> shows the SurfWriter help book with only the main folder installed.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CHDICCHC" title="Figure 2-10SurfWriter help book with main folder installed"></a><p><strong>Figure 2-10&nbsp;&nbsp;</strong>SurfWriter help book with main folder installed</p><img src = "../Art/sw_main_chapter.jpg" alt = "SurfWriter help book with main folder installed" ></div><br/><p><span class="content_text">Figure 2-11</span> shows the SurfWriter help book after the user installs the optional spelling checker. Note that each subfolder has its own title page.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CHDDJGFF" title="Figure 2-11SurfWriter help book with optional chapter installed"></a><p><strong>Figure 2-11&nbsp;&nbsp;</strong>SurfWriter help book with optional chapter installed</p><img src = "../Art/sw_spell_chapter.jpg" alt = "SurfWriter help book with optional chapter installed" ></div><br/><p>In addition, you should provide a separate table of contents for each chapter. This makes your help book truly modular, allowing chapters to be easily added and removed. You can use this chapter-level table of contents as your chapter title page.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_9" title="Important:"></a><p><strong>Important:</strong>&nbsp;Chapter-based books can have an index file for the whole book or separate index files for each chapter. If you are providing an index file for each chapter of your chapter-based help book, do not also provide a separate index file at the top-level of your help book.</p><p></p></div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHGEBAH" title="Creating a Dynamic Table of Contents"></a><h3>Creating a Dynamic Table of Contents</h3><p>If you have a chapter-based help book, you can create a dynamic table of contents for it. With a dynamic table of contents, you can install and remove chapters, and the top-level table of contents for your help book will always reflect the latest contents of the help book currently on the user’s system.</p><p>To create a dynamic table of contents, each chapter in your help book must have a title page containing the <code>AppleTitle</code> meta tag. At the top level of your help book, include a template file for the table of contents. The template file must be named <code>toctmpl.htm</code>. In this template file, specify the format of the table, using HTML comments containing the strings <code>AppleTOCRowBegin</code> and <code>AppleTOCRowEnd</code>. For example, the following lines specify the format of a table row in the dynamically generated table of contents for SurfWriter Help:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;!-- AppleTOCRowBegin --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;tr height="1"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;td height="1" width="158">&lt;/td><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/tr><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;tr><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;td width="158">&lt;font face="Helvetica,Arial" size="2"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;a href="AppleURL" target="AppleTarget">&lt;b>AppleTitle&lt;/b>&lt;/a>&lt;/font><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/td><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/tr><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!-- AppleTOCRowEnd --><span></span></pre></td></tr></table></div><p>The <code>AppleTOCRowBegin</code> and <code>AppleTOCRowEnd</code> HTML comments mark the beginning and end of the definition of a table row in the dynamically generated table of contents. Help Viewer locates the title page of each chapter in the book and, using the table row definition in your template file, inserts a row in the table of contents linking to that page. Help Viewer uses the chapter title, defined by the <code>AppleTitle</code> meta tag in the chapter title page, as the text of the link. Any content that appears before the <code>AppleTOCRowBegin</code> comment in the template file is copied over to the dynamically generated table of contents without change. </p><p>You can use the generated table of contents as your help book’s title page by including the <code>AppleTitle</code> tag at the top of your template file, above the <code>AppleTOCRow</code> comments. You should also include any other relevant title page information, such as your help book icon.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF106" title="Specifying Chapter Order"></a><h3>Specifying Chapter Order</h3><p>You can control the ordering of the chapters in your help book’s table of contents by using the <code>AppleOrder</code> meta tag in the header of each chapter’s title page file. For example:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta name="AppleOrder" content="80"><span></span></pre></td></tr></table></div><p>When Help Viewer creates a dynamic table of contents for your help book, it lists each chapter in the order specified by the <code>AppleOrder</code> vaues, lowest to highest. Chapters with no <code>AppleOrder</code> value are listed last. If you do not specify chapter ordering, Help Viewer displays all chapter titles in alphabetical order. For example, given a help book with three chapters titled "About SurfWriter," "Using SurfWriter," and "SurfWriter Reference," the default chapter ordering is as follows:</p><ol class="ol"><li class="li"><p>About SurfWriter</p></li><li class="li"><p>SurfWriter Reference</p></li><li class="li"><p>Using SurfWriter</p></li></ol><p>Using the <code>AppleOrder</code> tag, the chapter ordering for the same book can be changed. Given an <code>AppleOrder</code> value of 10 for "About SurfWriter," 20 for "Using SurfWriter," and 30 for "SurfWriter Reference," Help Viewer orders the table of contents as follows:</p><ol class="ol"><li class="li"><p>About SurfWriter</p></li><li class="li"><p>Using SurfWriter</p></li><li class="li"><p>SurfWriter Reference</p></li></ol><p>If you specify the same <code>AppleOrder</code> value for more than one chapter, Help Viewer sorts those chapters alphabetically.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHHFHAF" title="Indexing Your Help Book"></a><h2>Indexing Your Help Book</h2><p>To help users quickly find the information they need to accomplish their tasks, you should make your help book searchable by running the Help Indexer utility to create an index for the book. The Help Indexer utility is described in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHGAIIA">“Using the Help Indexer Utility.”</a></span></p><p>You should also include additional tags and metadata in your HTML help files to control how your help is indexed. Including this information improves the user experience of searching your help book by increasing the relevance of the results returned for searches of your help book and improving their appearance in Help Viewer. <span class="content_text">“Controlling Indexing of Your Help”</span> describes how you can improve indexing and searching of your help book.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_10" title="Compatibility Note"></a><p><strong>Compatibility Note:</strong>&nbsp;Starting with Mac OS X v10.4, index files support several advanced features such as automatic creation of help-page abstracts. These index files have the suffix <code>.helpindex</code>. Help Viewer in Mac OS X v10.3 and earlier, on the other hand, cannot read <code>*.helpindex</code> files. If you are writing help that must be compatible with Mac OS X v10.3 and earlier, you cannot use UTF-8 character encoding and you must generate index files with the suffix <code>.idx</code> in addition to the <code>*.helpindex</code> files. The <code>*.idx</code> index files do not support the new Help Viewer features. For more information on features and compatibility of these two types of indexes, see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW4">“Generating an Index Compatible with Different Versions of Mac OS X.”</a></span> To learn how to generate either type of index file, see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHGAIIA">“Using the Help Indexer Utility.”</a></span></p></div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHJIIBJ" title="Controlling Indexing of Your Help"></a><h3>Controlling Indexing of Your Help</h3><p>There are a number of tags that you can include in your HTML pages to control how your help content is indexed by the Help Indexer utility. In addition to indexing the text of your help topics, this tool indexes the following items:</p><ul class="spaceabove"><li class="li"><p><strong>Keywords</strong>. Keywords allow you to specify synonyms or common misspellings for a help topic, ensuring that users who search on these alternate terms still get a hit on the relevant topic.</p></li><li class="li"><p><strong>Abstracts</strong>. An abstract is a brief summary of a help topic that is displayed when the user places the cursor over the topic in a list of search results. Users can determine whether they wish to learn more about the topic without actually loading the topic page.</p></li><li class="li"><p><strong>Anchors</strong>. Anchors allow you to uniquely identify a topic or section within a page. Anchors help you provide quick access to help content; you can specify an anchor as the destination of a link or use the Apple Help API to search for and display the content identified by an anchor.</p></li><li class="li"><p><strong>Segments</strong>. Segments divide a single HTML file into subsections, each of which can be indexed and returned as a separate hit in a search. Segments are particularly useful in help systems with lengthy topic pages.</p></li></ul><p>Finally, you can specify which content in your help book should be indexed, as described in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHCICGI">“Specifying What Is Indexed.”</a></span> By using these various elements in your help book, you can greatly improve the search results for your help book and make your help book more easily accessible from your application.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHJFHGA" title="Setting Keywords"></a><h4>Setting Keywords</h4><p>Keywords are a set of additional search terms for an HTML help page. When a user searches your help book for a term that is designated as a keyword for a topic page, Help Viewer returns that page as a search result, even though the term may not appear in the body of the page. Using keywords, you can specify a set of synonyms and common misspellings for topics covered in your help book.</p><p>You can specify keywords for a help page using the <code>KEYWORDS</code> meta tag in the header of the help page’s HTML file. The following example shows keywords that you could set for a help page that describes how to use the Trash:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;head><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;title>Importing Files&lt;/title><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;meta name="KEYWORDS" content="discard, dispose, delete, clear, erase"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/head><span></span></pre></td></tr></table></div><p>Do not add keywords for terms that already occur on the page. Repeating a keyword that already appears on the page can cause the page to be given an incorrectly high relevance rating when Help Viewer returns it in response to a user’s query.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-CHDJIBBI" title="Adding Abstracts"></a><h4>Adding Abstracts</h4><p>An abstract is a brief description of a help topic that appears when the user places the mouse cursor over that topic in a list of search results. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;Beginning in Mac OS X v10.2, Help Viewer displays the default text “No summary provided“ for help topics without abstracts. Beginning in Mac OS X v10.4, you have the option of having the Help Indexer utility select a sentence from the help page to use as an abstract when no abstract has been provided (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW4">“Generating an Index Compatible with Different Versions of Mac OS X”</a></span>).</p></div><p>Well-written abstracts help users ascertain whether a given page, returned as a search result, in fact contains the information they were searching for. For example, SurfWriter Help contains a page describing how to import files from other formats. The page’s title, “Importing Files,” gives the user some idea of the page’s contents, but you can provide a fuller description by using an abstract phrase such as, “SurfWriter can import files of the following formats: txt, rtf, pages, and doc.” </p><p>To add an abstract to a help page, use the <code>description</code> meta tag in the header section of the page’s HTML file. Here is an example of how to create such an abstract:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;head><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;title>Sorting your messages&lt;/title><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;meta name="description" content="Permanently remove messages that  you've deleted to save space."><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/head><span></span></pre></td></tr></table></div><p><code>“Example of a search result showing an abstract”</code> shows how such a page and its abstract show up as a search result.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHIHEHE" title="Figure 2-12Example of a search result showing an abstract"></a><p><strong>Figure 2-12&nbsp;&nbsp;</strong>Example of a search result showing an abstract</p><img src = "../Art/sw_abstract.jpg" alt = "Example of a search result showing an abstract" ></div><br/><a name="//apple_ref/doc/uid/TP30000903-CH206-CHDFBEHF" title="Setting Anchors"></a><h4>Setting Anchors</h4><p>Anchors allow you to uniquely identify topics in your help book. When a user follows a link to an anchor, Help Viewer loads the page containing the anchor.  If your link includes the specific file containing the anchor (such as <code>SurfScript.html#anchor1</code>), Help Viewer scrolls to the anchor location (if it is not at the top of the page). For example, assume that SurfWriter has a simple scripting language called SurfScript. In the help page for SurfScript, you could specify a unique anchor for each SurfScript command, enabling Help Viewer to scroll directly to the desired text when the page loads. </p><p>If you use multiple files for your help book, you can put an anchor at the beginning of each file and direct links to the anchors so that you don’t have to know the final locations of the help files when you code your HTML. To do so, you use the <code>help:anchor</code> URL provided by Apple Help in your link (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-TPXREF112">“Creating a Link to an Anchor Location”</a></span>).</p><p>You can also use anchors to load an anchored page from within your application by calling the Apple Help function <code><a href="../../../Reference/Apple_Help/Reference/reference.html#//apple_ref/doc/c_ref/AHLookupAnchor" target="_top">AHLookupAnchor</a></code>. To continue the example, SurfWriter could provide an online lookup function that loads the help page for a SurfScript command by calling the <code><a href="../../../Reference/Apple_Help/Reference/reference.html#//apple_ref/doc/c_ref/AHLookupAnchor" target="_top">AHLookupAnchor</a></code> function and passing the appropriate anchor name when a user Option-clicks a command name in a SurfScript document. </p><p>If you need to access your help content programmatically—as you would, for example, if you provide contextually sensitive help—you should consider using anchors to make your help easily accessible from your application. Because you can change the location of anchors within your help book without affecting your product’s code, anchors provide a simple and maintainable way for your application to access specific topics within your help book.</p><p>You can create multiple anchors in a single file. This is especially useful if you split a file into segments, as you can use the anchors to scroll directly to the beginning of each segment. Segments are described in the next section, <span class="content_text">“Creating Segments in Help Files.”</span></p><p>You specify an anchor using the standard HTML 4 anchor element, as shown in the following example, which creates an anchor called <code>SurfScriptCommand_OPEN</code> in a help page describing SurfScript’s <code>OPEN</code> command:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a name="SurfScriptCommand_OPEN">&lt;/a><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!-- Here is the description of SurfScript’s OPEN command --><span></span></pre></td></tr></table></div><p>You link to an anchor by using an HTML anchor element and a <code>help:anchor</code> URL:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:anchor=SurfCmnd_OPEN bookID=SurfWriter Help">Open command&lt;/a><span></span></pre></td></tr></table></div><p>The <code>NSAlert</code>, <code>SFChooseIdentityPanel</code>, <code>SFCertificatePanel</code> classes provide help buttons for dialogs. To display such a help button and link it to an anchor in your help book, use the methods <code>setShowsHelp:</code> and <code>setHelpAnchor:</code> in those classes. See <em><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/index.html#//apple_ref/doc/uid/TP40004001" target="_top">NSAlert Class Reference</a></em>, <em><a href="../../../../Security/Reference/SecurityInterfaceFramework/Classes/SFChooseIdentityPanel_Class/index.html#//apple_ref/doc/uid/TP40003984" target="_top">SFChooseIdentityPanel Class Reference</a></em>, and <em><a href="../../../../Security/Reference/SecurityInterfaceFramework/Classes/SFCertificatePanel_Class/index.html#//apple_ref/doc/uid/TP40003981" target="_top">SFCertificatePanel Class Reference</a></em> for details. </p><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_12" title="Important:"></a><p><strong>Important:</strong>&nbsp;If you use anchors in your help book, you must turn anchor indexing on when you index your help book with the Help Indexer utility. For more information, see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BEJHIFIC">“Anchor Indexing.”</a></span></p><p></p></div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW10" title="Setting Anchors for Generated Lists"></a><h4>Setting Anchors for Generated Lists</h4><p>In addition to using anchors to jump to a location in a help book, anchors are used to implement generated lists (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW8">“Generating Lists from Anchors”</a></span>) and exact match searches (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW5">“Setting Up Exact Match Searching”</a></span>). Unlike anchors used to jump to a specific page, each of which must be used only once, the anchors used for lists can be placed in any number of places. When you specify an anchor to generate a list, every page containing that anchor is included in the list. For example, the anchor corresponding to the “Accounts preferences” generated list in Mac Help is located in the pages for “About administrator accounts,” “About logging in and out,” “About passwords in Mac OS X,” and so forth.  On the other hand, the “About administrator accounts” page (for example) includes a unique anchor used only in that file. The “About administrator accounts” page, therefore, contains one anchor used to jump to that page (<code>mchlp1746</code>) plus several other anchors used in generated lists, including the anchor used for the “Accounts preferences” generated list  (<code>almh10339</code>):</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a name="mchlp1746">&lt;/a>&lt;a name="almh10045">&lt;/a>&lt;a name="almh10090">&lt;/a>&lt;a name="almh10339">&lt;/a>&lt;a name="almh10564">&lt;/a>&lt;a name="almh10334">&lt;/a><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000903-CH206-CHDDBGAA" title="Creating Segments in Help Files"></a><h4>Creating Segments in Help Files</h4><p>A large help book may contain hundreds of individual pages. Rather than using a separate HTML file for each page, you can combine several pages into one file by dividing the file into segments. Help Viewer treats segments much like separate files; each segment in a file can have a different abstract, anchor, and keyword set. The following example shows how SurfWriter Help defines a segment and specifies its abstract and keywords:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;!-- AppleSegStart="Opening a File" --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!-- AppleSegDescription="How to open a SurfWriter file" --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!-- AppleSegKeywords="launch, read, look , examine" --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!-- Topic text goes here --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;div id="pagetitle"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;h1>How to open a SurfWriter file&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;p>To open a SurfWriter file, you ...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;p><span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;p><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!-- AppleSegEnd --><span></span></pre></td></tr></table></div><p>The beginning of the segment is marked by the <code>AppleSegStart</code> command. If the segment has an abstract or keywords, they are specified using the <code>AppleSegDescription</code> and <code>AppleSegKeywords</code> commands, respectively. The content of the segment follows. The <code>AppleSegEnd</code> command marks the end of the segment.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHCICGI" title="Specifying What Is Indexed"></a><h4>Specifying What Is Indexed</h4><p>By default, each file in your help book is fully indexed. You can use the <code>ROBOTS</code> meta tag in the HTML header of a particular file to control how that file is indexed. The <code>ROBOTS</code> meta tag supports the values shown in <span class="content_text">Table 2-1</span>. </p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHBIEIA" title="Table 2-1Values of the ROBOTS meta tag"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>Values of the <code>ROBOTS</code> meta tag</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Meaning</p></th></tr><tr><td  scope="row"><p><code>NOINDEX</code></p></td><td ><p>Specifies that the HTML file should not be indexed.</p></td></tr><tr><td  scope="row"><p><code>KEYWORDS</code></p></td><td ><p>Specifies that the HTML file should be indexed for keywords only.</p></td></tr><tr><td  scope="row"><p><code>SEGMENTS</code></p></td><td ><p>Specifies that the HTML file should be indexed for the content of the segments in that file.</p></td></tr><tr><td  scope="row"><p><code>ANCHORS</code></p></td><td ><p>Specifes that the HTML file should be indexed for anchors only.</p></td></tr></table></div><p>Apple recommends that you do not index a page that contains only links or graphics, or a page on which you don’t want the user to land as a result of a search. For example, if you have a sequence of pages that are linked in a series, you might only want to index the first page in the sequence. To specify that a file should not be indexed, use the <code>ROBOTS</code> meta tag with the value <code>NOINDEX</code> as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta name="ROBOTS" content="NOINDEX"><span></span></pre></td></tr></table></div><p>Specify <code>KEYWORDS</code> as the value of the <code>ROBOTS</code> meta tag if you want the indexer to pick up only your specified keywords for use as search results. If you define segments in a file, as described in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CHDDBGAA">“Creating Segments in Help Files,”</a></span> you can supply a value of <code>SEGMENTS</code> in the file’s header to specify that only the content of the segments is indexed. The <code>ANCHORS</code> value is useful for pages which you want to be able to retrieve using anchor lookup, but which are not useful as search results, such as your title page.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-CIHGAIIA" title="Using the Help Indexer Utility"></a><h3>Using the Help Indexer Utility</h3><p>Once you have finished adding abstracts, keywords, and any other indexing information to your help book files, you must run the Help Indexer utility on your help book. The Help Indexer utility creates an index file for your help content and stores it as a separate file at the top level of the help book folder. The index file contains links to all the words (or tokens) in your help files that are equal to or greater than the minimum term length, excluding any stopwords. You use Help Indexer preferences to specify the minimum term length and the list of stopwords.</p><p>Because the index file may be invalidated if you change or rearrange the content of the help folder, be sure to update the index file after the help book content is complete and all files are in their final location.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;Some help books include a page labeled <em>Index</em>, containing a list of links to topics and to lists of topics. This Index is an HTML page created by the help book author, and is not related to the index file created by the Help Indexer utility. For information on how to generate an index list for your help book, see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW8">“Generating Lists from Anchors”</a></span></p></div><p>You can create an index for your help book by opening Help Indexer (<code>/Developer/Applications/Utilities/Help Indexer.app</code>) and entering your help book folder in the dialog that appears. You can also drag the folder containing the help book onto the Help Indexer utility, or execute the utility from a command line. The command-line interface and Help Indexer preferences are documented in the Help Indexer Help. <span class="content_text">Figure 2-13</span> shows the Help Indexer preferences window.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-BABDGEBH" title="Figure 2-13Help Indexer preferences window"></a><p><strong>Figure 2-13&nbsp;&nbsp;</strong>Help Indexer preferences window</p><img src = "../Art/helpindxrpref.jpg" alt = "Turning on anchor indexing in the Apple Help Indexing Tool" ></div><br/><p>You must modify the default preference settings of the Help Indexer utility if you wish to do any of the following:</p><ul class="spaceabove"><li class="li"><p>Index a help book for a language other than English. </p></li><li class="li"><p>Turn off the indexing of anchor information.</p></li><li class="li"><p>Supply help content from a remote server.</p></li><li class="li"><p>Provide an index compatible with versions of Mac OS X earlier than Mac OS X v10.4.</p></li><li class="li"><p>Specify a minimum term length other than three tokens (note that three is the recommended setting).</p></li><li class="li"><p>Specify a list of stopwords.</p></li><li class="li"><p>Have warnings or status messages returned in addition to errors.</p></li></ul><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_1" title="Indexing for Languages Other Than English"></a><h4>Indexing for Languages Other Than English</h4><p>Read <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BEJIGBGJ">“Localizing Your Help Book”</a></span> for more information on indexing non-English help books.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-BEJHIFIC" title="Anchor Indexing"></a><h4>Anchor Indexing</h4><p>If you add anchors to your help book, you must index your help book with anchor indexing selected in the Help Indexer utility’s preferences. When anchor indexing is on, the Help Indexer puts information about the anchors in the index file and Help Viewer uses that information to follow the links to <code>help:anchor</code> URLs in your files (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CHDFBEHF">“Setting Anchors”</a></span>). Anchor indexing is on by default. If you don’t use anchors, or don’t want to use <code>help:anchor</code> URLs to link to your files, you can turn off anchor indexing. To toggle anchor indexing off or on, perform the following steps:</p><ol class="ol"><li class="li"><p>Open Help Indexer preferences by choosing Preferences from the application menu.</p></li><li class="li"><p>Click the checkbox labeled “Index anchor information in all files” (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BABDGEBH">Figure 2-13</a></span>).</p></li></ol><a name="//apple_ref/doc/uid/TP30000903-CH206-CHDGIECE" title="Storing Pages on Remote Servers"></a><h4>Storing Pages on Remote Servers</h4><p>As described in <span class="content_text"><a href="../user_help_concepts/apple_help_concepts.html#//apple_ref/doc/uid/TP30000903-CH205-CIHECHIB">“Internet-Based Help Book Content,”</a></span> Help Viewer supports Internet-based help. To provide updates to your help content via the Internet, you must specify a remote server from which to download updated help content. To specify a remote server for your help content, do the following:</p><ol class="ol"><li class="li"><p>Open Help Indexer preferences.</p></li><li class="li"><p>Click the checkbox labeled “Use remote root for missing files and updates.”</p></li><li class="li"><p>In the text field under this checkbox, enter the server address where your remote help content is available. <span class="content_text">Figure 2-14</span> shows a remote root specified in Help Indexer preferences.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000903-CH206-BABHHBHF" title="Figure 2-14Specifying a remote server in Help Indexer"></a><p><strong>Figure 2-14&nbsp;&nbsp;</strong>Specifying a remote server in Help Indexer</p><img src = "../Art/helpindxrpref_remsvr.jpg" alt = "Specifying a remote server in the Apple Help Indexing Tool" ></div></li></ol><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_14" title="Important:"></a><p><strong>Important:</strong>&nbsp;The web server you use to provide remote content for your help files must support HTTP/1.1 Conditional Get requests. Mac OS X Server does support such requests.</p><p></p></div><p>You can specify “Internet-primary” help by clicking the checkbox labeled “Prefer network files to local files.” When you choose Internet-primary help, before loading a page Help Viewer checks the specified server for a newer version of the page. If the local page is the same as the remote page, Help Viewer uses the local page. If the remote page is newer, Help Viewer downloads the remote page in preference to the local page. Help Viewer caches remotely accessed pages on the user’s system.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;If you select “Use remote root for missing files and updates” and specify a remote server, but do not choose Internet-primary help, you can provide “Internet-only” help by installing a minimal help folder on the user’s system that contains only a title page, index, and any other pages that should be quickly accessible and that don’t have to be updated. Any files that you want to provide exclusively online should be stored on the remote server, but not installed locally.</p>Whether you are installing a minimal help book on the local system or are placing the full contents of your help book locally, you must index your help folder with all pages installed and organized into the correct subfolders, if any.</p></div><p>Help Viewer can also download updated index files from a remote server. When Help Viewer launches, it looks in your help book’s index file for a remote root. If you specified a remote root in Help Indexer preferences, Help Viewer contacts the server and checks for an index file at that location. If an index file is present, and if it is newer than the locally stored index, then Help Viewer downloads the file. </p><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_16" title="Important:"></a><p><strong>Important:</strong>&nbsp;Because the index file for your help book records the remote root at which Help Viewer can access your Internet-based help, you must include an index file in the help book folder that you install locally.</p><p></p></div><p>You can control how long your help pages are cached, using the two meta tags shown below:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta http-equiv="Expires" content="Tue, 01 Jan 1980 1:00:00 GMT"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;meta http-equiv="Pragma" content="no-cache"><span></span></pre></td></tr></table></div><p>The first example sets a specific expiration date for the cached page. A 24-hour clock is used, and the time zone is included when specifying a particular expiration date. The second example tells Help Viewer that the file should never be cached.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW4" title="Generating an Index Compatible with Different Versions of Mac&Acirc;&nbsp;OS&Acirc;&nbsp;X"></a><h4>Generating an Index Compatible with Different Versions of Mac OS X</h4><p>Starting with Mac OS X v10.4, the Help Indexer utility can create index files that take advantage of the Search Kit features introduced with that version of the operating system. Improvements starting with Mac OS X v10.4 include the ability to:</p><ul class="spaceabove"><li class="li"><p>Extract a summary sentence from a help file to use when no <code>DESCRIPTION</code> meta tag is provided (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CHDJIBBI">“Adding Abstracts”</a></span>)</p></li><li class="li"><p>Specify a list of stopwords (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW3">“Specifying a Minimum Term Length and Stopwords”</a></span>)</p></li><li class="li"><p>Specify a minimum number of tokens for indexed terms (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW3">“Specifying a Minimum Term Length and Stopwords”</a></span>)</p></li></ul><p>Help Viewer can use indexes created for Mac OS X v10.4 or later (file suffix <code>.helpindex</code>) or those created for Mac OS X v10.3 or earlier (file suffix <code>.idx</code>). However, to take advantage of the newer features, a <code>*.helpindex</code> file must be present. Starting with Mac OS X v10.5, the Help Indexer utility always creates a <code>*.helpindex</code> file. The Help Indexer Utility for Mac OS X versions 10.4 and 10.5 can optionally also create a <code>*.idx</code> index file.</p><p>If your help book is used only on Mac OS X v10.4 or later, use HTML 4.01 and use UTF-8 as the character set. </p><p>If your help book is also used on Mac OS X v10.3 or earlier, use HTML 3.2 and do not use UTF-8. If you use UTF-8, you will not be able to reliably create an index compatible with those operating systems. In this case, generate an <code>*.idx</code> file in addition to the <code>*.helpindex</code> index file by selecting the “Generate Panther-Compatible Indices” option. </p><p>If you choose to create an index for Mac OS X v10.3 and earlier systems, you must specify the language of the tokenizer to use. For Mac OS X v10.4 and later indexes, no language choice is necessary because UTF-8 supports all languages. However, you can specify a language-specific list of stopwords, as described in the following section, <span class="content_text">“Specifying a Minimum Term Length and Stopwords.”</span> See <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-TPXREF115">“Indexing a Non-English Help Book”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW3" title="Specifying a Minimum Term Length and Stopwords"></a><h4>Specifying a Minimum Term Length and Stopwords</h4><p>Staring with Mac OS X v10.4, the Help Indexer utility enables you to specify the minimum length of terms to be indexed. For example, if the minimum term length is 3 tokens (the default), then the words “I,“ “to,“ and “at” are not indexed, but “and” and “but” are included in the index. Apple recommends using the default value.</p><p>To prevent commonly used or irrelevant words from being included in the index, you can also include a list of words—referred to as stopwords—to be excluded from the index. In Help Indexer preferences (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BABDGEBH">Figure 2-13</a></span>), you can specify whether to use no list of stopwords, one of the language-specific stopword lists provided with the Help Indexer, or your own stopword list. The provided stopword lists are the ones used by Apple, and should be adequate for most purposes.</p><p>The provided stopword lists are located in a property list in the Help Indexer application bundle at <code>/Developer/Applications/Utilities/Help Indexer.app/Contents/Resources/Stopwords.plist</code>.  </p><p>Instead of one of the standard lists of stopwords, you can specify your own list. A stopword list must be a newline-deliminated list of words in a text file. </p><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_2" title="Setting Error Verbosity"></a><h4>Setting Error Verbosity</h4><p>There are three levels of information you can log during a run of the Help Indexer utility: errors, warnings, and status messages. Errors are problems that prevent Help Indexer from creating an index. . Warnings are problems that don’t prevent the creation of an index, but that might cause the results to be different from what you are expecting. . Status messages indicate the progress of the utility so that you can check for expected results, such as anchors being indexed or pages being skipped due to the <code>ROBOTS NOINDEX</code> meta tag (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHCICGI">“Specifying What Is Indexed”</a></span>). You use the logging options section of Help Indexer preferences (<span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BABDGEBH">Figure 2-13</a></span>) to set the level of messages you wish to have logged. If any messages are generated, the log window opens after the utility completes execution (<span class="content_text">Figure 2-15</span>).</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW6" title="Figure 2-15Help Indexer log window"></a><p><strong>Figure 2-15&nbsp;&nbsp;</strong>Help Indexer log window</p><img src = "../Art/help_indexer_log.jpg" alt = "Help Indexer log window" ></div><br/><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_3" title="Running Help Indexer from the Command Line"></a><h3>Running Help Indexer from the Command Line</h3><p>You can run the Help Indexer utility from the command line. The command-line syntax allows you to specify any of the preferences available in the preferences window; if you don’t specify any preferences on the command line, then the utility uses the preferences last set in the preferences window, or a default set of preferences if there is no preferences file.</p><p>The command-line interface is fully documented in the Help Indexer Help text file available from the Help menu.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-BEJEGADC" title="Adding Specialized Content to Your Help Book"></a><h2>Adding Specialized Content to Your Help Book</h2><p>You can enrich the user experience of your help book by including additional resources such as animated tutorials, scripted tasks, and other multimedia content supported by Help Viewer. This section shows you how to:</p><ul class="ul"><li class="li"><p>Embed QuickTime movies in your help book</p></li><li class="li"><p>Automate tasks using AppleScript scripts in your help book</p></li><li class="li"><p>Initiate Help Viewer searches from a link in your help book</p></li><li class="li"><p>Link to anchors in your help book</p></li></ul><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF108" title="Adding QuickTime Movies to Your Help Book"></a><h3>Adding QuickTime Movies to Your Help Book</h3><p>You can use QuickTime to create animated tutorials or demos for your help book. To link to a QuickTime movie, use the standard HTML <code>embed</code> tag. The following example shows how to call a movie file called <code>SurfScriptDemo.mov</code> located in the movies subfolder of the SurfWriter Help folder:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;embed src="SurfWriter%20Help/movies/SurfScriptDemo.mov"><span></span></pre></td></tr></table></div><p>Use only legal URL characters to specify the URL for the path; for example, the folder name “SurfWriter Help” is specified as <code>SurfWriter%20Help</code>.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF109" title="Running Other Applications from Your Help Book"></a><h3>Running Other Applications from Your Help Book</h3><p>You can launch other applications, such as media players or custom help applications, from your help book by using the standard HTML anchor element. Here is an example of how you would specify a link that opens an application called SurfScriptPlayer located in the SurfWriter Help folder:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="SurfWriter%20Help/SurfScriptPlayer"><span></span></pre></td></tr></table></div><p>Use only legal URL characters to specify the URL for the path; for example, the folder name “SurfWriter Help” is specified as <code>SurfWriter%20Help</code>.</p><p>A better strategy than directly executing an application is to execute an AppleScript script that can handle errors such as a missing program, incorrect permissions, and so on. See <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BEJHEHHE">“Automating Help Tasks with AppleScript.”</a></span></p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW18" title="Opening an External Web Page in Help Viewer"></a><h3>Opening an External Web Page in Help Viewer</h3><p>When you include an <code>http://</code> link in your help book HTML, Help Viewer ordinarily opens the link in the user’s default web browser. You can use the <code>target-"_helpViewer"</code> argument to cause the link to open in the Help Viewer window instead. For example, you can use a link of this sort to open a page on your customer service website in Help Viewer, making it appear to the user as if it’s part of your help book. The following line would cause the support page for iCal on the Apple, Inc. website to open in the Help Viewer window:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="http://www.apple.com/support/ical" target="_helpViewer">Support Website&lt;/a><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF110" title="Using Help URLs in Your Help Book"></a><h3>Using Help URLs in Your Help Book</h3><p>The URLs using the Help Viewer <code>help:</code> protocol, introduced in <span class="content_text"><a href="../user_help_concepts/apple_help_concepts.html#//apple_ref/doc/uid/TP30000903-CH205-TPXREF104">“Help URLs,”</a></span> allow you to access other help content, including:</p><ul class="spaceabove"><li class="li"><p>Executing AppleScript scripts</p></li><li class="li"><p>Initiating Help Viewer searches</p></li><li class="li"><p>Jumping to anchor locations</p></li><li class="li"><p>Generating lists from anchors</p></li><li class="li"><p>Opening other help books</p></li></ul><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_17" title="Important:"></a><p><strong>Important:</strong>&nbsp;The syntax used for these URLs is specific to Apple Help. You need to follow the guidelines given here exactly or the links won’t work as desired.</p><p></p></div><a name="//apple_ref/doc/uid/TP30000903-CH206-BEJHEHHE" title="Automating Help Tasks with AppleScript"></a><h4>Automating Help Tasks with AppleScript</h4><p>You can take advantage of AppleScript’s ability to automate Mac OS events by linking to scripts in your help book. For example, <span class="content_text">Figure 2-16</span> shows a page from Mac Help that uses an AppleScript script to open the Network Diagnostics utility when the user clicks the link at the bottom of the page.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-BEJFHHAC" title="Figure 2-16A link to an AppleScript script in a help page"></a><p><strong>Figure 2-16&nbsp;&nbsp;</strong>A link to an AppleScript script in a help page</p><img src = "../Art/applescript_in_help.jpg" alt = "A link to an AppleScript script in a help page" ></div><br/><p>The syntax for calling a script is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:runscript=help_folder_name/subfolder/scriptnamestring='optional_string_parameter'"><span></span></pre></td></tr></table></div><p>The optional string parameter is a string value that you can pass to the script. The script is responsible for parsing the value passed in the string parameter. If the script accepts multiple parameters, use commas to separate the values. The following example shows how to specify a script called “MakeNewSaveFolder” in the scripts subfolder of the SurfWriter Help folder and pass it a folder name value in the string parameter:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:runscript=SurfWriter%20Help/scripts/MakeNewSaveFolderstring='My Save Folder'"><span></span></pre></td></tr></table></div><p>Make sure that you enclose the entire tag value in double quotes.  </p><p></p><p>If you pass the script any parameters with the <code>help:runscript</code> command, then you have to have a <code>helphdhp</code> routine inside the script to receive the parameters. For example, Mac Help has an AppleScript handler used to open an application from a Help Viewer page. The HTML command to open the Mail application looks like this:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:runscript=MacHelp.help/Contents/Resources/English.lproj/shrd/opnbndsig.scpt string='com.apple.mail'"> Open Mail&lt;/a><span></span></pre></td></tr></table></div><p>The AppleScript handler that receives the parameter (in this case, an application bundle ID) is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>on «event helphdhp» (completeParam)<span></span></pre></td></tr><tr><td scope="row"><pre>    -- localizable text<span></span></pre></td></tr><tr><td scope="row"><pre>    set cancelBtn to "Cancel"<span></span></pre></td></tr><tr><td scope="row"><pre>    set errorText to "The item cannot be opened. It may be disabled or not installed."<span></span></pre></td></tr><tr><td scope="row"><pre>    --end localizable text<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    try<span></span></pre></td></tr><tr><td scope="row"><pre>        tell application "Finder"<span></span></pre></td></tr><tr><td scope="row"><pre>            open application file id completeParam<span></span></pre></td></tr><tr><td scope="row"><pre>        end tell<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    on error errMsg number errNum<span></span></pre></td></tr><tr><td scope="row"><pre>        display dialog errorText buttons {cancelBtn} default button 1 with icon 0<span></span></pre></td></tr><tr><td scope="row"><pre>        return<span></span></pre></td></tr><tr><td scope="row"><pre>    end try<span></span></pre></td></tr><tr><td scope="row"><pre>end «event helphdhp»<span></span></pre></td></tr></table></div><p>For examples of AppleScript scripts in a help book to use as a starting point, see the scripts included in Mac Help at <code>/Library/Documentation/Help/MacHelp.help/Contents/Resources/</code>. Do not link to any of these scripts; however, you are welcome to make copies of them to put in your own help book.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF111" title="Initiating a Search from Your Help Book"></a><h4>Initiating a Search from Your Help Book</h4><p>The <code>help:search</code> URL allows you to create a link in your help book that, when clicked by the user, initiates a search for a particular term or phrase. This is particularly useful for linking to further information about subjects that appear in multiple help pages. Rather than link to each topic page, you can simply set up a search that will find all pages in your help book in which the subject appears. The syntax for initiating a Help Viewer search is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:search='search_term' bookID=help_book_name"><span></span></pre></td></tr></table></div><p>The <code>bookID</code> parameter is a string value specifying which help book Help Viewer should search. If you do not specify a book, Help Viewer searches all help books currently installed on the system. Your book must be indexed for the search to return results.</p><p>The following example creates a link to a search for topics related to importing files in the SurfWriter help book:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:search='importing files' bookID=SurfWriter%20Help"><span></span></pre></td></tr></table></div><p>The value for the book ID should be the help book title, as defined by the <code>AppleTitle</code> tag in the title page of the book.</p><p>When the user clicks the resulting link, Help Viewer searches SurfWriter Help for all topics pertaining to importing files, just as if the user had typed the query string "importing files" into Help Viewer’s search field.</p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF112" title="Creating a Link to an Anchor Location"></a><h4>Creating a Link to an Anchor Location</h4><p>Using the <code>help:anchor</code> URL, you can create a link to any help book location identified by an anchor. It is often simpler to create links using anchors than to hardcode the path to the destination in the link, and it allows a link to be moved without having to update all the pages that point to it. The syntax for linking to an anchor location is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:anchor=anchor_name bookID=help_book_name"><span></span></pre></td></tr></table></div><p>The <code>bookID</code> parameter is a string value identifying the help book in which Help Viewer should search for the anchor. If no help book is specified, Help Viewer searches all of the registered help books currently on the system. The following example creates a link to the topic on opening files in SurfWriter Help:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;a href="help:anchor=openfile bookID=SurfWriter%20Help"><span></span></pre></td></tr></table></div><p>When the user clicks the link, Help Viewer takes the user to the location identified by the anchor named “openfile.” If more than one anchor is found matching the anchor name, Help Viewer displays all of the matching anchor locations in a search results page. To link to anchor locations in your help book, you must index your help book with anchor indexing turned on, as described in <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-BEJHIFIC">“Anchor Indexing.”</a></span></p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW8" title="Generating Lists from Anchors"></a><h4>Generating Lists from Anchors</h4><p>The <code>help:topic_list</code> URL allows you to generate lists of pages to which the user can jump without having to create and maintain such lists manually. </p><p></p><p>You must provide an anchor ID, a path to the book ID, a path to a template file (used by a Help Viewer XQuery script), a path to a CSS file that specifies the styling for the list, and the name of the list item.  Here is the HTML in Mac Help used to generate the Accounts preferences index list:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;p>&lt;a href="help:topic_list=almh10090 bookID=Mac Help template=sty/genlist.html stylesheet=sty/genlist_style.css Other=Accounts preferences">Accounts preferences&lt;/a>&lt;/p><span></span></pre></td></tr></table></div><p>Here is the XQuery template from Mac Help that is referenced by this URL:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;html><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;head><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;meta http-equiv="content-type" content="text/html;charset=utf-8"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;title>AppleTopicListOther&lt;/title><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;meta name="robots" content="noindex"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;link href="AppleTopicListCSS" rel="stylesheet" media="all"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/head><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;body><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;div id="list"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;h1>AppleTopicListOther&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;p>Click a topic below.&lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;!-- AppleTopicListRowBegin --><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;p>&lt;a href="AppleTopicListURL">AppleTopicListItemTitle&lt;/a>&lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;!-- AppleTopicListRowEnd -->&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;div id="banner"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;div id="machelp"><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;a class="bread" href="help:anchor='access' bookID=Mac Help">Mac Help&lt;/a>&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;div id="index"><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;a class="leftborder" href="help:anchor='x1' bookID=Mac Help">Index&lt;/a>&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/body><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/html><span></span></pre></td></tr></table></div><p>This template replaces the variable <code>AppleTopicListOther</code> with the value passed as the <code>Other</code> parameter. The variable <code>AppleTopicListURL</code> is used to look up all instances of the anchor passed as the <code>topic_list</code> parameter, and the title of the page identified by that anchor is substituted for the <code>AppleTopicListItemTitle</code> variable. The resulting list generated for the “Accounts preferences” index item is shown in <span class="content_text">Figure 2-17</span>. Each page in this list contains the anchor specified in the <code>help:topic_list</code> URL (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW10">“Setting Anchors for Generated Lists”</a></span>). To add or remove items from a generated list, you add or remove that list’s anchor ID on the relevant HTML pages in the help book and generate a new index file. Because the list is generated each time it’s requested, it always reflects the current set of relevant help pages.</p><p>For other examples of code used to generate lists, look in the help folders of Mac Help and other Apple help books. Generated lists are used to create the help book index and the See-also lists at the end of topic pages.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW9" title="Figure 2-17Accounts preferences generated list"></a><p><strong>Figure 2-17&nbsp;&nbsp;</strong>Accounts preferences generated list</p><img src = "../Art/accts_prefs_gen_list.jpg" alt = "Generated list for the accounts preferences index item" ></div><br/><a name="//apple_ref/doc/uid/TP30000903-CH206-SW11" title="Opening Other Help Books"></a><h4>Opening Other Help Books</h4><p>You can use the <code>help:openbook</code> URL to open a specified help book in Help Viewer. You can use this URL, for example, to open the help book for a related application in an application suite. The syntax for opening a help book is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;A HREF="help:openbook=help_book_name"><span></span></pre></td></tr></table></div><p>When the user clicks the link, Help Viewer opens the title page of the specified help book. For example, to create a link that opens the SurfWriter Help book to the title page, you would include the following code in your help book:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;A HREF="help:openbook=SurfWriter%20Help"><span></span></pre></td></tr></table></div><p>To create a link that jumps to a particular location in a help book, see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-TPXREF112">“Creating a Link to an Anchor Location.”</a></span></p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW5" title="Setting Up Exact Match Searching"></a><h2>Setting Up Exact Match Searching</h2><p>You can provide a list of search terms and corresponding search results. When the user enters a search term that exactly matches a term in your list, Help Viewer takes the corresponding search result from your list, gives it a relevance rating of 100%, and displays it along with other search results. You can use an exact match search list, for example, to provide responses to search terms too short to normally be used in a seach (such as “CD”) or to make sure that the most relevant results receive the highest relevancy rating.</p><p>To set up exact match searching, you create a property list containing the search terms and search results and place the <code>.plist</code> file at the top level of the help book, along with the title page and the help book index (see <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-TPXREF104">“Organizing the Help Book Folder”</a></span>). The property list contains a set of key-value pairs. All keys and values are strings. Each key is a search term, specified as all lowercase with all spaces removed. Hyphens and other punctuation marks are not allowed. Each corresponding value is an anchor ID. As with generated lists, each anchor can be used in any number of help book pages. When a user enters a search term, Help Viewer takes a lowercase, spaces-removed version of the search string and compares it to the keys in the exact match property list. If it finds an exact match for the entire string, Help Viewer returns every page containing the referenced anchor string, assigns it a relevancy rank of 100%, adds it to the list of search results, and displays the results. <span class="content_text">Figure 2-18</span> shows the exact match property list from Mac Help. <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW15">Figure 2-19</a></span> shows the search results displayed when the user searches for one of the terms in that property list. The top items in the search results, with rankings of 100%, contain the anchor ID in the property list for that search term. It’s important to note that exact match searching does not return results from stems or partial matches. If you want exact match search results for “CD”, “CDs”, "VCD”, and “CD or DVD”, for example, you need four entries in the property list: <code>cd</code>, <code>cds</code>, <code>vcd</code>, and <code>cdordvd</code>. </p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW14" title="Figure 2-18Exact match property list"></a><p><strong>Figure 2-18&nbsp;&nbsp;</strong>Exact match property list</p><img src = "../Art/exactmatch_plist.jpg" alt = "Exact match plist as seen in the plist editor" ></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW15" title="Figure 2-19Search results corresponding to an exact match"></a><p><strong>Figure 2-19&nbsp;&nbsp;</strong>Search results corresponding to an exact match</p><img src = "../Art/exactmatch_search_results.jpg" alt = "Search results.  The top few results came from the exact match list." ></div><br/><p></p><a name="//apple_ref/doc/uid/TP30000903-CH206-SW12" title="Providing Your Own Online Support Articles"></a><h2>Providing Your Own Online Support Articles</h2><p>The default behavior for the Help Viewer application is to provide a listing of online support articles in addition to help book topics in response to a query. Help Viewer sends the query to Apple’s Knowledge Base support website. Instead, you can provide a URL to your own support site. To do so, provide a URL in your search script on the main page of your help book, as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta name="AppleKnowledgeBaseURL" content="http://<em>www.yourcompany.com</em>/search.py?lang=en&amp;amp;product='<em>product</em>'&amp;amp;query='<em>query</em>'"/><span></span></pre></td></tr></table></div><p>Help Viewer replaces the <code>'query'</code> argument of the URL with the user’s query and the optional <code>'product'</code> argument with the product name. It takes the product name from the <code>AppleKnowledgeBaseProduct</code> meta tag, or if there is none, from the name of the help book minus the word “Help”. For example, iChat uses the following lines of HTML code to generate the URL used to communicate with the Knowledge Base support site: </p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta name="AppleKnowledgeBaseProduct" content="iChat" /><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;meta name="AppleKnowledgeBaseURL" content="http://www.info.apple.com/searchredir.html?bucket=helpviewer&amp;amp;lang=en&amp;amp;as_oq='product'&amp;amp;val='query'"/><span></span></pre></td></tr></table></div><p>Help Viewer expects the returned results to be in XML, in the form of an array of dictionaries sorted in order of relevance, as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"<span></span></pre></td></tr><tr><td scope="row"><pre>"http://www.apple.com/DTDs/PropertyList-1.0.dtd"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="1.0"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;array><span></span></pre></td></tr><tr><td scope="row"><pre> &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;key>title&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;string>Article title&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;key>url&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;string>http://kb.yourcompany.com/article.py?num=23&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;key>abstract&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;string>Article abstract ...&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre> &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist><span></span></pre></td></tr></table></div><p>Return no more than 25 articles, the maximum that Help Viewer will display.</p><p>If there are no results for the given query, return the following XML:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"<span></span></pre></td></tr><tr><td scope="row"><pre>"http://www.apple.com/DTDs/PropertyList-1.0.dtd"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="1.0"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;array><span></span></pre></td></tr><tr><td scope="row"><pre> &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>   &lt;key>NoResultsFound&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>   &lt;string>No results were found.&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre> &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/array> &lt;/plist><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000903-CH206-BEJIGBGJ" title="Localizing Your Help Book"></a><h2>Localizing Your Help Book</h2><p>If your application will be used in more than one part of the world, your help book should be localized for every relevant language, country, or cultural region where it will be used. Localizing your help book involves translating the text of your help content and customizing graphics and other resources used in your help book. </p><p>This section shows you how you can ensure that your localized help content appears correctly in Help Viewer. </p><p>For more information on internationalization and HTML, see <span class="content_text"><a href="http://www.w3.org/International/" target="_blank">http://www.w3.org/International/</a></span></p><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_4" title="Language-Specific Resource Directories"></a><h3>Language-Specific Resource Directories</h3><p>For each language you support, you must provide a complete, localized help book in its own resource subdirectory within the <code>Resources</code> directory in the software bundle. <span class="content_text">Figure 2-20</span> shows a set of resource subdirectories (each with a prefix specifying the language and the <code>.lproj</code> extension) in an application bundle.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH206-SW7" title="Figure 2-20Resource subdirectories in an application bundle"></a><p><strong>Figure 2-20&nbsp;&nbsp;</strong>Resource subdirectories in an application bundle</p><img src = "../Art/lproj_dirs.jpg" alt = "Resource subdirectories in an application bundle" ></div><br/><p>Each localized version of the help book should have a localized book name and localized meta tags, including <code>AppleTitle</code>, <code>AppleKnowledgeBaseProduct/URL</code>, <code>Keywords</code>, and so forth) as appropriate. </p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF113" title="Specifying Character Encoding"></a><h3>Specifying Character Encoding</h3><p>To specify the character encoding used by your help book, use the standard HTML 4 syntax, as shown in the example below, which specifies the UTF-8 character encoding: </p><div class="codesample"><table><tr><td scope="row"><pre>&lt;meta http-equiv="content-type" content="text/html;charset=UTF-8"><span></span></pre></td></tr></table></div><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH206-DontLinkElementID_18" title="Important:"></a><p><strong>Important:</strong>&nbsp;Starting with Mac OS X v10.4, UTF-8 is recommended for all your content. See <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW4">“Generating an Index Compatible with Different Versions of Mac OS X.”</a></span></p><p></p></div><p></p><a name="//apple_ref/doc/uid/TP30000903-CH206-TPXREF115" title="Indexing a Non-English Help Book"></a><h3>Indexing a Non-English Help Book</h3><p>Once you have created your localized help book, you must run the Help Indexer utility on the book. For indexes compatible with Mac OS X v10.3 and earlier, you must specify a tokenizer compatible with the language of the help book. To do so, open the Preferences dialog in the Help Indexer utility, check the “Generate Panther-compatible indices” checkbox, and select a tokenizer from the pop-up menu).</p><p>The use of UTF-8 character encoding enables Help Indexer to support all languages for indexers compatible with Mac OS X v 10.4 and later. See <span class="content_text"><a href="authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-SW4">“Generating an Index Compatible with Different Versions of Mac OS X”</a></span> for information about creating indexes compatible with different versions of Mac OS X.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../user_help_concepts/apple_help_concepts.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../registering_help/registering_help.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html%3Fid%3DTP30000903-3.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html%3Fid%3DTP30000903-3.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html%3Fid%3DTP30000903-3.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
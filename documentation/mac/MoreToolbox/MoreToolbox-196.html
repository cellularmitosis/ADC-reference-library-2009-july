<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Dialog-Item Help Resource (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING196></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-195.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-197.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-138.html"><B>Chapter 3 - Help Manager</B></A> / <A HREF="MoreToolbox-157.html"><B>Help Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-194.html"><B>Resources</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING196-0></A>
<H3><A NAME=MARKER-9-533></A>The Dialog-Item Help Resource</H3>
 <A NAME=MARKER-2-534></A>You can provide help balloons for individual items in a dialog box or an alert box by supplying a dialog-item help resource, which is a resource of type <CODE>'hdlg'</CODE>. You specify different help balloons for various states of an item--by highlight value if the item is a control, and by enabled or disabled states for items that are not controls.<P>
 To associate an <CODE>'hdlg'</CODE> resource with a particular alert box or dialog box, either you must include an item of type <CODE>HelpItem</CODE> in the box's item list (<CODE>'DITL'</CODE>) resource, or you must create an <CODE>'hwin'</CODE> resource. <A HREF=MoreToolbox-148.html#MARKER-9-255>Listing 3-8 on page 3-55</A> shows how to use an item of type <CODE>HelpItem</CODE>--and <A HREF=MoreToolbox-151.html#MARKER-9-321>Listing 3-10 on page 3-67</A> shows you how to use an <CODE>'hwin'</CODE> resource--for associating an <CODE>'hdlg'</CODE> resource with a particular alert box or dialog box. For detailed information about using an item of type <CODE>HelpItem</CODE>, see <A HREF=MoreToolbox-148.html#MARKER-9-263>"Adding a Help Item to an Item List Resource" on page 3-57</A>. For detailed information on using an <CODE>'hwin'</CODE> resource, see <A HREF=MoreToolbox-151.html#MARKER-9-291>"Associating Help Resources With Static Windows" on page 3-63</A>.<P>
 All <CODE>'hdlg'</CODE> resources must have resource IDs greater than 128. <P>
 The format of a Rez input file for an <CODE>'hdlg'</CODE> resource differs from its compiled output form. This section describes the structure of a Rez-compiled <CODE>'hdlg'</CODE> resource. If you are concerned only with creating <CODE>'hdlg'</CODE> resources, see <A HREF=MoreToolbox-148.html#MARKER-9-227>"Providing Help Balloons for Items in Dialog Boxes and Alert Boxes" on page 3-47</A> for a detailed description, using several code samples, of how to use Rez input files to create <CODE>'hdlg'</CODE> resources.<P>
 An <CODE>'hdlg'</CODE> resource consists of a header component, a missing-items component, and a variable number of dialog-item components. <A HREF=#MARKER-9-535>Figure 3-30</A> shows the general structure of a compiled <CODE>'hdlg'</CODE> resource.<P>
<B>Figure 3-30  <A NAME=MARKER-9-535></A>Structure of a compiled dialog-item help (<CODE>'hdlg'</CODE>) resource</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-30.jpg">
 If you examine a compiled version of an <CODE>'hdlg'</CODE> resource, you find that the header component consists of the following elements:<P>
<UL>
<LI>Help Manager version. The version of the Help Manager to use. This is usually specified in a Rez input file with the <CODE>HelpMgrVersion</CODE> constant.
<LI>Index. An index (starting with 0) into an item list (<CODE>'DITL'</CODE>) resource. The Help Manager adds the value of this index to the number of the first item in the item <BR>list resource and then associates the result with an item number within the item list resource; therefore, index 0 corresponds to item 1 in the item list resource (because 0 plus 1 equals 1). The Help Manager then uses the first dialog-item component in the <CODE>'hdlg'</CODE> resource to provide help for the item to which this index corresponds. Subsequent dialog-item components specify help messages for subsequent items in the item list resource. For example, when 4 is specified as the index, the first dialog-item component specifies help messages for the fifth item in an item list resource. (As explained earlier, either an item of type <CODE>helpItem</CODE> in the item <BR>list resource or an <CODE>'hwin'</CODE> resource is used to associate the messages in the dialog-item components of this <CODE>'hdlg'</CODE> resource with the items of a particular dialog box or alert box.)
<LI>Options. The sum of the values of available options, described in <A HREF=MoreToolbox-146.html#MARKER-9-146>"Specifying Options in Help Resources" beginning on page 3-22</A>.
<LI>Balloon definition function. The resource ID of the window definition function used for drawing the help balloon. The standard balloon definition function is of type <CODE>'WDEF'</CODE> with resource ID 126; this can be specified by the number 0 in the Rez input file.
<LI>Variation code. A number signifying the preferred position of the help balloon relative to the hot rectangle. The balloon definition function draws the frame of the help balloon based on the variation code specified here. The eight variation codes and how they affect the standard balloon definition function are illustrated in <A HREF=MoreToolbox-140.html#MARKER-9-48>Figure 3-4 on page 3-9</A>.
<LI>Item count. The number of remaining components--that is, the missing-items component plus all dialog-item components--defined in the rest of this resource.<P>
</UL>
 The missing-items component always follows the header component of an <CODE>'hdlg'</CODE> resource. Then a variable number of dialog-item components are stored in this resource. The Help Manager determines the end of the <CODE>'hdlg'</CODE> resource by using the item count information in the header component. The Help Manager determines the type of each component by its order in the resource. <P>
 The structures of the missing-items component and the dialog-item components depend on identifiers specified inside the components. The identifiers used in a Rez input file are described in <A HREF=MoreToolbox-145.html#MARKER-9-122>"Specifying the Format for Help Messages" on page 3-21</A>.<P>
 The missing-items component and the dialog-item components can each specify four different help messages:<P>
<UL>
<LI>First help message.<P>
<UL>
<LI>In the missing-items component, this is the help message both for missing, active, unselected controls (that is, those with highlight values of 0) and for missing enabled items that are not controls.
<LI>In dialog-item components, this is the help message for an active, unselected control (that is, one with a highlight value of 0) or for an enabled item that is not <BR>a control.<P>
</UL>
<LI>Second help message.<P>
<UL>
<LI>In the missing-items component, this is the help message both for missing dimmed controls (that is, those with highlight values of 255) and for missing disabled items that are not controls.
<LI>In dialog-item components, this is the help message for a dimmed control (that is, one with a highlight value of 255) or for a disabled item that is not a control.<P>
</UL>
<LI>Third help message.<P>
<UL>
<LI>In the missing-items component, this is the help message for missing active controls that are checked (that is, those with highlight values of 1).
<LI>In dialog-item components, this is the help message for an active control that is checked (that is, one with a highlight value of 1).<P>
</UL>
<LI>Fourth help message.<P>
<UL>
<LI>In the missing-items component, this is the help message for missing, selected controls with highlight values between 2 and 253.
<LI>In dialog-item components, this is the help message for a selected control with any highlight value between 2 and 253.<P>
</UL>
</UL>
 An empty string or a resource ID of 0 for a message in any dialog-item component causes the Help Manager to use the appropriate help message contained in the missing-items component.<P>
 Since they both adhere to the formats specified by the previously described identifiers, the missing-items component and the dialog-item components can have similar structures. The Help Manager determines the end of a component by examining its length, which is stored in the first 2 bytes of the component.<P>
 <A HREF=#MARKER-9-536>Figure 3-31</A> shows the structure of a component that stores its help messages as Pascal strings within the <CODE>'hdlg'</CODE> resource itself. <P>
<B>Figure 3-31  <A NAME=MARKER-9-536></A>Structure of an <CODE>'hdlg'</CODE> component compiled with the <CODE>HMStringItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-31.jpg">
 If you examine a compiled version of an <CODE>'hdlg'</CODE> resource, you find that a component identified in a Rez input file by the <CODE>HMStringItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data. The value 1 is specified here when the help messages are stored as Pascal strings within this component.
<LI>Tip's coordinates. The coordinates of the help balloon's tip. The tip's coordinates are local to the item's display rectangle.
<LI>Alternate rectangle. The coordinates for a rectangle used by the Help Manager for transposing the tip if a help balloon does not fit onscreen. These coordinates are local to the item's display rectangle.
<LI>Text string. The first help message (as previously described).
<LI>Text string. The second help message (as previously described).
<LI>Text string. The third help message (as previously described).
<LI>Text string. The fourth help message (as previously described).
<LI>Alignment bytes. Zero or one bytes used to make the previous text strings end on a word boundary.<P>
</UL>
 <A HREF=#MARKER-9-537>Figure 3-32</A> shows the structure of an <CODE>'hdlg'</CODE> component that specifies its help messages as text strings stored in string list (<CODE>'STR#'</CODE>) resources. <P>
<B>Figure 3-32  <A NAME=MARKER-9-537></A>Structure of an <CODE>'hdlg'</CODE> component compiled with the <CODE>HMStringResItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-32.jpg">
 If you examine a compiled version of an <CODE>'hdlg'</CODE> resource, you find that a component identified in a Rez input file by the <CODE>HMStringResItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data. The value 3 is specified here when the help messages for this component are stored in string list (<CODE>'STR#'</CODE>) resources.
<LI>Tip's coordinates. The coordinates of the help balloon's tip. The tip's coordinates are local to the item's display rectangle.
<LI>Alternate rectangle. The coordinates for a rectangle used by the Help Manager for transposing the tip if a help balloon does not fit onscreen. These coordinates are local to the item's display rectangle.
<LI>Resource ID. The resource ID of an <CODE>'STR#'</CODE> resource. 
<LI>Index into the string list resource. A number used as an index to a particular text string within the <CODE>'STR#'</CODE> resource. This text string is used for the first help message (as previously described).<P>
</UL>
 Three more pairs of resource IDs and their index numbers follow. The text strings referenced by these pairs are used for the second, third, and fourth help messages, respectively.<P>
 <A HREF=#MARKER-9-538>Figure 3-33</A> shows the structure of an <CODE>'hdlg'</CODE> component that specifies its help messages in picture (<CODE>'PICT'</CODE>) resources, styled text (<CODE>'TEXT'</CODE> and <CODE>'styl'</CODE>) resources, or string (<CODE>'STR '</CODE>) resources. <P>
<B>Figure 3-33  <A NAME=MARKER-9-538></A>Structure of an <CODE>'hdlg'</CODE> component compiled with the <CODE>HMPictItem</CODE>, <CODE>HMTEResItem</CODE>, or <CODE>HMSTRResItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-33.jpg">
 If you examine a compiled version of an <CODE>'hdlg'</CODE> resource, you find that a component identified in a Rez input file by either the <CODE>HMPictItem</CODE>, <CODE>HMTEResItem</CODE>, or <CODE>HMSTRResItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data.<P>
<UL>
<LI>The value 2 is specified here when the help messages for this component are stored in <CODE>'PICT'</CODE> resources.
<LI>The value 6 is specified here when the help messages for this component are stored as styled text--that is, in both <CODE>'TEXT'</CODE> and <CODE>'styl'</CODE> resources.
<LI>The value 7 is specified here when the help messages for this component are stored in <CODE>'STR '</CODE> resources.<P>
</UL>
<LI>Tip's coordinates. The coordinates of the help balloon's tip. The tip's coordinates are local to the item's display rectangle.
<LI>Alternate rectangle. The coordinates for a rectangle used by the Help Manager for transposing the tip if a help balloon does not fit onscreen. These coordinates are local to the item's display rectangle.
<LI>Resource ID.<P>
<UL>
<LI>The resource ID of a <CODE>'PICT'</CODE> resource when the value 2 is specified as the type of data. The Help Manager uses the picture contained in this resource for the first help message (as previously described).
<LI>The resource ID common to both a <CODE>'TEXT'</CODE> and an <CODE>'styl'</CODE> resource when the value 6 is specified as the type of data. The Help Manager uses the styled text specified by these resources for the first help message.
<LI>The resource ID of an <CODE>'STR '</CODE> resource when the value 7 is specified as the type of data. The Help Manager uses the text contained in this resource for the first help message.<P>
</UL>
</UL>
 Three more resource IDs follow; the Help Manager uses these resources (either <CODE>'PICT'</CODE>, <CODE>'TEXT'</CODE> and <CODE>'styl'</CODE>, or <CODE>'STR '</CODE>) for the second, third, and fourth help messages, respectively (as previously described).<P>
 <A HREF=#MARKER-9-539>Figure 3-34</A> shows the structure of an <CODE>'hdlg'</CODE> component that specifies no help messages. <P>
<B>Figure 3-34  <A NAME=MARKER-9-539></A>Structure of an <CODE>'hdlg'</CODE> component compiled with the <CODE>HMSkipItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-34.jpg">
 If you examine a compiled version of an <CODE>'hdlg'</CODE> resource, you find that a component identified by the <CODE>HMSkipItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The value 4, for the number of bytes contained in this component.
<LI>Type of data. The value 256.<A NAME=MARKER-2-540></A><P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-195.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-197.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

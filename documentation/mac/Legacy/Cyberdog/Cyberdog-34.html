<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Opening a Display Part Embedded in a Navigator(Cyberdog)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING34></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Cyberdog-33.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Cyberdog-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Cyberdog-319.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Cyberdog-35.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Cyberdog-2.html"><B>Cyberdog Programmer's Kit</B></A> / <A HREF="Cyberdog-20.html"><B>Part 2 - Programming in Cyberdog</B></A><BR><DD><A HREF="Cyberdog-32.html"><B>Chapter 5 - Embedding a Cyberdog Display Part in a Navigator</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING34-0></A>
<H1><A NAME=MARKER-9-22></A>Opening a Display Part Embedded in a Navigator</H1>
 When a Cyberdog item is opened, the item calls the Cyberdog part extension's <CODE>OpenCyberItem</CODE> method. The parameter set associated with the call to <BR>the <CODE>OpenCyberItem</CODE> method may specify an opener part; the opener part may be a navigator. Your implementation of the <CODE>OpenCyberItem</CODE> method must support using the opener part, if it exists. For more information about opener parts, see <A HREF=Cyberdog-19.html#MARKER-9-121>"Cyberdog Item Opening Process" (page 71)</A>.<P>
 If you handle embedding in the part extension's <CODE>OpenCyberItem</CODE> method, your implementation of the <A NAME=MARKER-2-23></A><CODE>OpenCyberItem</CODE> method must take these actions:<P>
<UL>
<LI>Call your part extension's <A NAME=MARKER-2-24></A><CODE>SetCyberItem</CODE> method to store a reference to the Cyberdog item being opened.
<LI>Obtain a navigator part by calling the Cyberdog session's <A NAME=MARKER-2-25></A><CODE>ObtainOpener</CODE> method, specifying the navigator kind of opener part.
<LI>Acquire the navigator part's Cyberdog navigator part extension.
<LI><A NAME=MARKER-2-26></A>Embed your display part by calling the navigator part extension's <A NAME=MARKER-2-27></A>GoToCyberItem method.<P>
</UL>
 To embed your display part in a navigator, you must completely override the <CODE>OpenCyberItem</CODE> method; do not call its inherited method. <P>
 In the embedded text-viewer sample, the part extension's <CODE>OpenCyberItem</CODE> method calls the embedded text-viewer part's <CODE>OpenCyberItem</CODE> method. For information about the Cyberdog part extension's <CODE>OpenCyberItem</CODE> method, see <A HREF=Cyberdog-29.html#MARKER-9-27>"Overriding Cyberdog Part Extension Methods" (page 119)</A>. <A HREF=#MARKER-9-28>Listing 5-2</A> shows how the embedded text-viewer part's <CODE>OpenCyberItem</CODE> method performs these actions.<P>
<B>Listing 5-2  <A NAME=MARKER-9-28></A>The <CODE>OpenCyberItem</CODE> method of the embedded text-viewer part</B><P>
<PRE>
void CybTxtNavViewer::OpenCyberItem(Environment *ev, 
                           CyberItem* item, 
                           ODPart* openerPart, 
                           ParameterSet* openParams) 
{
   
   // Start the download.
   this-&gt;InitiateDownload(ev, item, openParams);
   
   // Let the extension know which Cyberdog item is being displayed.
   fCybTxtNavViewerCyberExt-&gt;SetCyberItem(ev, item, openParams);
   
   // Ensure that a parameter set is available for the call to
   // the ObtainOpener method.
   TempParameterSet acquiredParams 
                     = AcquireCreateParameterSet(ev, openParams);
   
   // Obtain a navigator kind of opener part.
   ODPart* navPart = GetCyberSession(ev)-&gt;ObtainOpener(ev, 
                                          openerPart, 
                                          kNavigatorKind,
                                          item,
                                          acquiredParams);
   
   // Tell the navigator to go to this part, which causes the part to
   // become embedded in the navigator's content area.
   TempNavigatorExtension navigatorExt(navPart,
                              kCyberNavigatorExtension);
   navigatorExt-&gt;GoToCyberItem(ev, item, GetODPart(ev), acquiredParams);
}
</PRE>
 The call to InitiateDownload starts the download operation and sets up the progress broadcaster. For information about starting a download operation, see <A HREF=Cyberdog-30.html#MARKER-9-60>"Creating a Stream for Downloading" (page 135)</A>. For information about progress broadcasters, see <A HREF=Cyberdog-73.html#MARKER-13-41>"Using a Progress Broadcaster" (page 154)</A>.<P>
 When a Cyberdog item calls the <CODE>OpenCyberItem</CODE> method, it passes an opener part in the openerPart parameter, if one exists; otherwise, it passes <CODE>kODNULL</CODE>. If an opener part is passed in the parameter, the <CODE>ObtainOpener</CODE> method uses it if the part matches the specified kind of opener part. <P>
 Thus, in <A HREF=#MARKER-9-28>Listing 5-2</A>, the call to <CODE>ObtainOpener</CODE> specifies creating a kNavigatorKind opener part. If this kind of part is passed when the Cyberdog item calls the <CODE>OpenCyberItem</CODE> method, the <CODE>ObtainOpener</CODE> method returns it; otherwise, the method returns a new navigator part.<P>
<DL>
<DT><B>Note</B>
<DD>Even if Cyberdog calls the <CODE>OpenCyberItem</CODE> method with a kNavigatorKind opener part, the <CODE>ObtainOpener</CODE> method might return a new navigator part; for example, if the Browse in Place preferences are different. <EM>u</EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 The <CODE>ObtainOpener</CODE> method requires a parameter set object to be passed in. You cannot pass <CODE>kODNULL</CODE>. In <A HREF=#MARKER-9-28>Listing 5-2</A>, the AcquireCreateParameterSet method creates a <A NAME=MARKER-2-29></A>parameter set object if the Cyberdog item calls the <CODE>OpenCyberItem</CODE> method and passes <CODE>kODNULL</CODE> in the openParams parameter. <A HREF=#MARKER-9-30>Listing 5-3</A> shows the AcquireCreateParameterSet method.<P>
<B>Listing 5-3  <A NAME=MARKER-9-30></A>Creating a parameter set object</B><P>
<PRE>
ParameterSet* CybTxtNavViewer::AcquireCreateParameterSet
                                    (Environment* ev, 
                                     ParameterSet* params)
{
   if (params)
   {
      params-&gt;Acquire(ev);
      return params;
   }
   else
   {
      TempParameterSet newParams = new ParameterSet;
      FailNil(newParams);
      newParams-&gt;IParameterSet(ev);
      return newParams.DontRelease();
   }
}
</PRE>
 <A HREF=#MARKER-9-28>Listing 5-2</A> shows the use of objects created from C++ templates, such as TempNavigatorExtension and TempOpenerPartExtension. These templates define extensions that are based on Cyberdog classes, such as CyberNavigatorExtension and CyberOpenerPartExtension, but whose methods handle existence checks and automatically manage the release of their corresponding Cyberdog objects. Otherwise, objects created from these templates behave exactly as their corresponding Cyberdog objects behave. <P>
<DL>
<DT><B>IMPORTANT</B>
<DD>These template classes are not part of the Cyberdog API. They are provided with the sample code on the <I>Cyberdog Programming SDK</I> "as is" for your convenience.   <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Cyberdog-33.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Cyberdog-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Cyberdog-319.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Cyberdog-35.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Cyberdog-3.html">&copy; Apple Computer, Inc.</A><br>13 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>   

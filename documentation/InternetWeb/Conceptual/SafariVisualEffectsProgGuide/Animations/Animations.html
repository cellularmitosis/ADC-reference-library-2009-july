<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Safari Visual Effects Guide: Animations</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Animations"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40008032-CH6" title="Animations"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000469" target="_top">Internet &amp; Web</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40008032-CH1-SW1">Safari Visual Effects Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Transitions/Transitions.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Transforms/Transforms.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40008032-CH6-SW1" title="Animations"></a><h1>Animations</h1><p>You can use animation properties to animate elements as they move, resize, change color and opacity, and undergo other visual changes. You can also animate 2D and 3D visual effects such as rotating, scaling, and translating elements.</p><p>To create an animation, you first set animation properties, then you create keyframes, and then apply the animation to some elements. For example, you set the animation’s name, duration, direction, and iteration count. You can also set a timing function that specifies how an animation progresses between keyframes. The timing function defines a Bezier curve—a path that the animation follows between keyframes. You define keyframes using a special keyframes at-rule.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40008032-CH6-SW11" title="Note"></a><p><strong>Note:</strong>&nbsp;There are actually two types of animations: declared animations and implicit animations. Declared animations, described in this article, are explicitly executed when the animation properties are applied to elements. Implicit animations are called <strong>transitions</strong> and are triggered when you set a new value for an animatable CSS property. Read <span class="content_text"><a href="../Transitions/Transitions.html#//apple_ref/doc/uid/TP40008032-CH4-SW1">“Transitions”</a></span> for details on implicit animations.</p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW14">How Animations Work</a>
				
			<br/>
			
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW10">Setting Animation Properties</a>
				
			<br/>
			
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW7">Creating Keyframes</a>
				
			<br/>
			
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW12">Using Timing Functions</a>
				
			<br/>
			
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW13">Repeating Animations</a>
				
			<br/>
			
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW9">Starting Animations</a>
				
			<br/>
			
        
			
			
				<a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW18">Handling Animation Events</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40008032-CH6-SW14" title="How Animations Work"></a><h2>How Animations Work</h2><p>Animations are similar to transitions except you have more fine control by specifying keyframes. A keyframe defines the state of an animation at a particular point in time. A sequence of keyframes define the starting, middle, and ending points of an animation. The frames in between these points are computed based on the animation and style properties you set.</p><p>Similar to transitions, when applying an animation to an element’s property, the change animates smoothly from the old value to the new value over time. The property values are computed over time. Therefore, if you query the value of a property during an animation, you may get an intermediate value that is the current animated value, not the old or new value. However, unlike transitions, animations do not change property values at the end of the animation.</p><p>Similar to transitions, you can control how these intermediate values are computed over time using a timing function, except that the timing function applies to the part of the animation between keyframes. Read <span class="content_text"><a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW12">“Using Timing Functions”</a></span> to learn more about timing functions.</p><p>You can create unique effects combining animations with 2D and 3D transforms. For example, <span class="content_text">Figure 1</span> shows an animation of elements in 3D space. See the <em><!--a target="_top" -->PosterCircle<!--/a--></em> sample code project for the complete source code for this example.</p><br/><div><a name="//apple_ref/doc/uid/TP40008032-CH6-SW2" title="Figure 1Circle Poster example"></a><p><strong>Figure 1&nbsp;&nbsp;</strong>Circle Poster example</p><object alt = "Circle Poster example" width="320" height="372"><param name="src" value="../Art/numbers.mp4"><param name="autoplay" value="false"></object><br/><br/><img src = "../Art/numbers.jpg" alt = "Circle Poster example" ></div><br/><a name="//apple_ref/doc/uid/TP40008032-CH6-SW10" title="Setting Animation Properties"></a><h2>Setting Animation Properties</h2><p>Use the CSS animation properties to set basic parameters about an animation. At a minimum, you need to set an animation name and duration. In addition, you can specify how many times an animation iterates, whether it alternates between the begin and end states, and whether the animation should begin in a running or paused state. You can also set a delay before the animation begins.</p><p>Each parameter has a corresponding CSS property beginning with -<code>webkit-animation</code>. For example, use the <code><a href="../../../../AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-animation-name" target="_top">-webkit-animation-name</a></code> property to specify a name. Use the <code><a href="../../../../AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-animation-duration" target="_top">-webkit-animation-duration</a></code> property to specify the duration in seconds. Use the <code><a href="../../../../AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-animation-iteration-count" target="_top">-webkit-animation-iteration-count</a></code> property to specify the number of times the animation repeats. In addition, you can use the <code><a href="../../../../AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-animation" target="_top">-webkit-animation</a></code> property as a shorthand to set all these parameters in one style rule.</p><p>For example, an animation called diagonal-slide is declared in <span class="content_text">Listing 1</span>. The animation name is <code>diagonal-slide</code>, its duration is five seconds, and it repeats ten times.</p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW8" title="Listing 1Setting animation properties"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>Setting animation properties</p><div class="codesample"><table><tr><td scope="row"><pre>.diagonalslide {<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-name: diagonal-slide;<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-duration: 5s;<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-iteration-count: 10;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The animation name is used to associate it with its keyframes. You use the animation name in the keyframes at-rule as described in <span class="content_text"><a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW7">“Creating Keyframes.”</a></span> </p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW7" title="Creating Keyframes"></a><h2>Creating Keyframes</h2><p>Keyframes are specified in CSS using a specialized <code><a href="../../../../AppleApplications/Reference/SafariCSSRef/Articles/OtherStandardCSS3Features.html#//apple_ref/css/rule/@-webkit-keyframes" target="_top">@-webkit-keyframes</a></code> at-rule. The keyframes rule consists of the <code>@-webkit-keyframes</code> keyword, followed by the animation name, and then a set of style rules for each keyframe as shown in <span class="content_text">Listing 2</span>. The style rules are contained in blocks, surrounded by braces, and are preceded by a percentage value marking the keyframe’s point in time. Any style rules can be placed in the blocks including 2D and 3D visual effects.</p><p>The value is a percentage of the animation’s duration (or the keywords <code>from</code> or <code>to</code>) . For example, 0% specifies the start of an animation, 50% halfway through an animation, and 100% the end of an animation. The <code>from</code> keyword is equivalent to 0% and the <code>to</code> keyword is equivalent to 100%. When the animation executes, it transitions smoothly from one state to the next in increasing order, from 0% to 100%. </p><p><span class="content_text">Listing 2</span> shows a keyframes at-rule where the animation is called <code>wobble</code> and the keyframes move an element back and forth over time. (You set the animation name using the <code>-webkit-animation-name</code> property as described in <span class="content_text"><a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW10">“Setting Animation Properties.”</a></span>)  In the first keyframe,  the value of the element’s <code>left</code> property is 100 pixels. By 40% of the animation duration, the value of the <code>left</code> property animates to 150 pixels. At 60% of the animation duration, the value of the <code>left</code> property animates back to 75 pixels. At the end of the animation, the value of the <code>left</code> property returns to 100 pixels. </p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW3" title="Listing 2Declaring keyframes"></a><p class="codesample"><strong>Listing 2&nbsp;&nbsp;</strong>Declaring keyframes</p><div class="codesample"><table><tr><td scope="row"><pre>    @-webkit-keyframes wobble {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      0% {<span></span></pre></td></tr><tr><td scope="row"><pre>        left: 100px;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      40% {<span></span></pre></td></tr><tr><td scope="row"><pre>        left: 150px;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      60% {<span></span></pre></td></tr><tr><td scope="row"><pre>        left: 75px;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      100% {<span></span></pre></td></tr><tr><td scope="row"><pre>        left: 100px;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40008032-CH6-SW12" title="Using Timing Functions"></a><h2>Using Timing Functions</h2><p>Timing functions allow an animation to change speed over its duration. The timing function is a mathematical function that provides a smooth curve or path for the transition. These effects are commonly called <strong>easing</strong> functions. </p><p>You set a timing function in a keyframe block using the <code><a href="../../../../AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-animation-timing-function" target="_top">-webkit-animation-timing-function</a></code> property. The timing function determines the speed of an animation from the current to the next keyframe. The timing function is specified using a cubic Bezier curve, which is defined by four control points as illustrated in <span class="content_text"><a href="../Transitions/Transitions.html#//apple_ref/doc/uid/TP40008032-CH4-SW11">Figure 3</a></span>. The first control point is always (0,0) and the last control point is (1,1), so you only need to specify the two in-between control points of the curve. The in-between points are specified as a percentage of the overall duration. For example, this line of code sets the second point to (0.5, 0.2) and the third point to (0.3, 1.0) using the <code><!--a-->cubic-bezier()<!--/a--></code> function:</p><div class="codesample"><table><tr><td scope="row"><pre>-webkit-transition-timing-function: cubic-bezier(0.5, 0.2, 0.3, 1.0);<span></span></pre></td></tr></table></div><p>Similar to the <code>-webkit-transition-timing-function</code> property, you can set your control points by passing the <code><!--a-->cubic-bezier()<!--/a--></code> function as the parameter with your custom control points as arguments or by using constants for common timing effects. For example, <span class="content_text">Listing 3</span> shows a keyframes at-rule that uses two timing function constants: <code>ease-out</code> and <code>ease-in</code>. Five keyframes are specified for an animation called <code>bounce</code>. Between the first and second keyframe (the first quarter of the duration) an <code>ease-out</code> timing function is used. Between the second and third keyframe (second quarter of the duration) an <code>ease-in</code> timing function is used. And so on. The effect appears as an element that moves up the page 50 pixels, slowing down as it reaches its highest point then speeding up as it falls back to 100 pixels. The second half of the animation behaves in a similar manner, but only moves the element 25 pixels units up the page creating a bouncing ball effect.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40008032-CH6-SW15" title="Note"></a><p><strong>Note:</strong>&nbsp;The y-axis increases downwards. Therefore, in the first bounce, when the element’s y-coordinate changes from 100 to 50 pixels, it moves up by 50 pixels. In the second bounce, when the y-coordinate changes from 100 to 75 pixels, it moves up by 25 pixels, half the height of the first bounce.</p></div><a name="//apple_ref/doc/uid/TP40008032-CH6-SW4" title="Listing 3Using timing functions in keyframes"></a><p class="codesample"><strong>Listing 3&nbsp;&nbsp;</strong>Using timing functions in keyframes</p><div class="codesample"><table><tr><td scope="row"><pre>    @-webkit-keyframes bounce {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      from {<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-transform: translateY(100px);<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-animation-timing-function: ease-out;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      25% {<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-transform: translateY(50px);<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-animation-timing-function: ease-in;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      50% {<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-transform: translateY(100px);<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-animation-timing-function: ease-out;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      75% {<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-transform: translateY(75px);<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-animation-timing-function: ease-in;<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      to {<span></span></pre></td></tr><tr><td scope="row"><pre>        -webkit-transform: translateY(100px);<span></span></pre></td></tr><tr><td scope="row"><pre>      }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40008032-CH6-SW13" title="Repeating Animations"></a><h2>Repeating Animations</h2><p>You use the <code>-webkit-animation-iteration-count</code> property to set the number of times to repeat an animation. <span class="content_text">Listing 4</span> defines an animation that slides elements from the upper-left to lower-right corner. The <code>-webkit-animation-iteration-count</code> property is set to 10 causing the animation to repeat 10 times when it is applied. </p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW5" title="Listing 4Creating an animation that repeats"></a><p class="codesample"><strong>Listing 4&nbsp;&nbsp;</strong>Creating an animation that repeats</p><div class="codesample"><table><tr><td scope="row"><pre>.diagonalslide {<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-name: diagonal-slide;<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-duration: 5s;<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-iteration-count: 10;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@-webkit-keyframes diagonal-slide {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>  from {<span></span></pre></td></tr><tr><td scope="row"><pre>    left: 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    top: 0;<span></span></pre></td></tr><tr><td scope="row"><pre>  }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>  to {<span></span></pre></td></tr><tr><td scope="row"><pre>    left: 100px;<span></span></pre></td></tr><tr><td scope="row"><pre>    top: 100px;<span></span></pre></td></tr><tr><td scope="row"><pre>  }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40008032-CH6-SW9" title="Starting Animations"></a><h2>Starting Animations</h2><p>Once you create an animation and specify its keyframes, you apply it to an element to begin the animation. You do this by applying the animation style to an element. This is typically triggered by some event such as the user clicking an element.</p><p><span class="content_text">Listing 5</span> shows how to apply an animation to an element when the user clicks it. (The <code>diagonalslide</code> is defined in <span class="content_text"><a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW5">Listing 4</a></span>.)  When the user taps in the blue box that says “Tap to slide” the <code>onClick</code> attribute changes the style class of the <code>div</code> element to <code>diagonalslide</code> and the animation begins.</p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW6" title="Listing 5Starting an animation"></a><p class="codesample"><strong>Listing 5&nbsp;&nbsp;</strong>Starting an animation</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;div onClick="className='diagonalslide'"><span></span></pre></td></tr><tr><td scope="row"><pre>    Tap to slide<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/div><span></span></pre></td></tr></table></div><p>The effects of an animation cease once the animation completes or if the animation is removed. You remove an animation by setting the <code>-webkit-animation-name</code> property to a value that does not include the name of that animation.</p><p>When an animation finishes running because it has executed the number of times described in its iteration count, the properties that were being animated return to their original values without animation.</p><p>To restart an animation, set the <code>-webkit-animation-name</code> property to a value that includes the name of that animation. Because style changes are coalesced, you may have to do this after a short delay. <span class="content_text">Listing 6</span> shows how to restart the <code>bounce</code> animation.</p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW19" title="Listing 6Restarting an animation"></a><p class="codesample"><strong>Listing 6&nbsp;&nbsp;</strong>Restarting an animation</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;style><span></span></pre></td></tr><tr><td scope="row"><pre>top:<span></span></pre></td></tr><tr><td scope="row"><pre>.bounce {<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-name: bounce;<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-duration: 4s;<span></span></pre></td></tr><tr><td scope="row"><pre>  -webkit-animation-iteration-count: 3;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/style><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;script type="text/javascript" charset="utf-8"><span></span></pre></td></tr><tr><td scope="row"><pre>function restartBounce(element)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>  element.style.webkitAnimationName = '';<span></span></pre></td></tr><tr><td scope="row"><pre>  window.setTimeout(function() {<span></span></pre></td></tr><tr><td scope="row"><pre>    element.style.webkitAnimationName = 'bounce';<span></span></pre></td></tr><tr><td scope="row"><pre>  }, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/script><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;body><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;div class="bounce" onclick="restartBounce(this)"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/body><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40008032-CH6-SW18" title="Handling Animation Events"></a><h2>Handling Animation Events</h2><p>Several animation-related events are available through the DOM event system. The start and end of an animation, and the end of each iteration of an animation, all generate DOM events. The events are instances of the <code><!--a target="_top" -->WebKitAnimationEvent<!--/a--></code> class and the possible types are <code>webkitAnimationStart</code>, <code>webkitAnimationIteration</code>, and <code>webkitAnimationEnd</code> in CSS.</p><p><span class="content_text">Listing 7</span> adds an event listener for <code>webkitAnimationEnd</code> events at page load time on the <code>div</code> element with the <code>box</code> identifier. (See <span class="content_text"><a href="Animations.html#//apple_ref/doc/uid/TP40008032-CH6-SW4">Listing 3</a></span> for the definition of the bounce keyframes in this sample.) When the <code>webkitAnimationEnd</code> event occurs, an instance of <code>WebKitAnimationEvent</code> is created, the function checks to see if the animation was the <code>bounce</code> animation, and, if so, hides the box by setting the element’s display style to <code>hidden</code>.</p><a name="//apple_ref/doc/uid/TP40008032-CH6-SW20" title="Listing 7Handling animation events"></a><p class="codesample"><strong>Listing 7&nbsp;&nbsp;</strong>Handling animation events</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;html><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;head><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/><span></span></pre></td></tr><tr><td scope="row"><pre>       &lt;title>Bounce Animation&lt;/title><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;style><span></span></pre></td></tr><tr><td scope="row"><pre>            div#box {<span></span></pre></td></tr><tr><td scope="row"><pre>               position: absolute;<span></span></pre></td></tr><tr><td scope="row"><pre>               width: 100px;<span></span></pre></td></tr><tr><td scope="row"><pre>               height: 100px;<span></span></pre></td></tr><tr><td scope="row"><pre>               background-color: blue;<span></span></pre></td></tr><tr><td scope="row"><pre>               -webkit-transform: translateY(100px);<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>            .bounce {<span></span></pre></td></tr><tr><td scope="row"><pre>                -webkit-animation-name: bounce;<span></span></pre></td></tr><tr><td scope="row"><pre>                -webkit-animation-duration: 4s;<span></span></pre></td></tr><tr><td scope="row"><pre>                -webkit-animation-iteration-count: 3;<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>            @-webkit-keyframes bounce {<span></span></pre></td></tr><tr><td scope="row"><pre>                ...<span></span></pre></td></tr><tr><td scope="row"><pre>                }<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/style><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;script type="text/javascript" charset="utf-8"><span></span></pre></td></tr><tr><td scope="row"><pre>            function attachEventHandler() {<span></span></pre></td></tr><tr><td scope="row"><pre>                box.addEventListener( 'webkitAnimationEnd', function( event ) { alert( "Finished animation!" ); }, false );<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/script><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/head><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;body onload="attachEventHandler()"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;div id="box" class="bounce"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/body><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/html><span></span></pre></td></tr></table></div><p>Note that an event is generated for each <code>animation-name</code> value and not necessarily for each property being animated since you can animate more than one property of an element at a time. You can animate multiple properties either with a single <code>animation-name</code> value with keyframes containing multiple properties, or with multiple <code>animation-name</code> values. For the purposes of events, each <code>animation-name</code> specifies a single animation. </p><p>The time the animation has been running is sent with each event generated. This allows a <code>webkitAnimationIteration</code> event handler to determine the current iteration of a looping animation or the current position of an alternating animation. This time does not include any time the animation was in the paused play state.</p><p>Read <span class="content_text"><a href="../InteractiveVisualEffects/InteractiveVisualEffects.html#//apple_ref/doc/uid/TP40008032-CH3-SW1">“Interactive Visual Effects”</a></span> for how to create interactive user interfaces using visual effects with DOM touch events.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Transitions/Transitions.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Transforms/Transforms.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-11-19<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Animations/Animations.html%3Fid%3DTP40008032-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Animations/Animations.html%3Fid%3DTP40008032-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Animations/Animations.html%3Fid%3DTP40008032-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
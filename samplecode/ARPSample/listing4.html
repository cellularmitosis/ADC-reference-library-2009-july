<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>ARPSample - /OTARPModule.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; <A HREF="javascript:location.replace('index.html');">ARPSample</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxNetworking-date.html" target="_blank">Carbon > Networking</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">ARPSample</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/OTARPModule.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/ARPerations.c</option>
<option value="listing2.html">/ARPerations.h</option>
<option value="listing3.html">/ARPSampleShell.c</option>
<option value="listing4.html">/OTARPModule.h</option></select>
				</p>
				</form>
				<p><strong><a href="ARPSample.zip">Download Sample</a></strong> (&#147;ARPSample.zip&#148;, 53.0K)<BR>
<strong><a href="ARPSample.dmg">Download Sample</a></strong> (&#147;ARPSample.dmg&#148;, 117.3K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    OTARPModule.h  Contains:  Types and constants to interface to the OT ARP module.  Written by: Quinn &quot;The Eskimo!&quot;    Copyright:  Copyright &copy; 1997-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        7/21/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        */#if PRAGMA_ALIGN_SUPPORTED#pragma options align=mac68k#endif///////////////////////////////////////////////////////////////////// Pick up the standard UInt32 types.#include &lt;Types.h&gt;// Pick up the MIOC_CMD macro.#include &lt;OpenTransport.h&gt;// Pick up queue_t.#include &lt;mistream.h&gt;// Pick up the MIOC_ARP constants.// #include &lt;miioccom.h&gt;// This constant is actually defined in &lt;miioccom.h&gt;, but//  commented out for some reason )-:#define MIOC_ARP    'h'    /* ioctl's for Mentat's arp module *////////////////////////////////////////////////////////////////////// ARP Command Structures // arc_t is the standard header for all ARP command structures.// The structure you should use is determined by the arc_cmd// field. See the command constants for details of which// structures to use with which commands..typedef struct {  UInt32  arc_cmd;  UInt32  arc_name_offset;  UInt32  arc_name_length;  UInt32  arc_proto;  UInt32  arc_proto_addr_offset;  UInt32  arc_proto_addr_length;  UInt32  arc_flags;  queue_t * arc_client_q;    /* context save area for client module */} arc_t;typedef  struct {  arc_t  area_arc;  UInt32  area_proto_mask_offset;  UInt32  area_hw_addr_offset;  UInt32  area_hw_addr_length;} area_t;typedef  struct {  arc_t  areq_arc;  UInt32  areq_sender_addr_offset;  UInt32  areq_sender_addr_length;  UInt32  areq_xmit_count;  /* 0 ==&gt; cache lookup only */  UInt32  areq_xmit_interval;  /* # of milliseconds; 0: default */  UInt32  areq_max_buffered;  /* # ofquests to buffer; 0: default */  UInt8  areq_sap[8];    /* to insert in returned template */} areq_t;typedef  struct {  arc_t  arma_arc;  UInt32  arma_proto_mask_offset;  UInt32  arma_proto_extract_mask_offset;  UInt32  arma_hw_addr_offset;  UInt32  arma_hw_addr_length;  UInt32  arma_hw_mapping_start;  /* Offset to start of the mask&amp;proto_addr */} arma_t;// ARP Command Codes for use in the arc_cmd field of arc_t,// along with the true structures you should use.#define  AR_ENTRY_ADD    MIOC_CMD(MIOC_ARP,1)// Add an ARP cache entry.// Use area_t structure.// In://    area_arc.arc_cmd = AR_ENTRY_ADD//    area_arc.arc_name_offset = offset to name of interface//    area_arc.arc_name_length = length of name of interface (including zero terminator)//    area_arc.arc_proto = ARP protocol type (eg IP_ARP_PROTO_TYPE)//    area_arc.arc_proto_addr_offset = offset to protocol address to look up (eg an InetHost)//    area_arc.arc_proto_addr_offset = length of protocol address to look up (eg sizeof(InetHost))//    area_arc.arc_flags = flags for this cache entry (see below)//    area_proto_mask_offset = offset to a protocol address mask (usually $FFFFFFFF)//    area_hw_addr_offset = offset to hardware address//    area_hw_addr_length = length of hardware address (eg 6)#define  AR_MAPPING_ADD    MIOC_CMD(MIOC_ARP,7)// Use arma_t structure.#define  AR_ENTRY_DELETE    MIOC_CMD(MIOC_ARP,2)// Delete an entry in the ARP cache.// Use arc_t structure.// In://    arc_cmd = AR_ENTRY_DELETE//    arc_name_offset = offset to name of interface//    arc_name_length = length of name of interface (including zero terminator)//    arc_proto = ARP protocol type (eg IP_ARP_PROTO_TYPE)//    arc_proto_addr_offset = offset to protocol address to delete (eg an InetHost)//    arc_proto_addr_length = length of protocol address to delete (eg sizeof(InetHost))#define  AR_ENTRY_QUERY    MIOC_CMD(MIOC_ARP,3)// Look for an entry, either in the cache or by talking on the network.// Use areq_t structure.// In://    areq_arc.arc_cmd = AR_ENTRY_QUERY//    areq_arc.arc_name_offset = offset to name of interface//    areq_arc.arc_name_length = length of name of interface (including zero terminator)//    areq_arc.arc_proto = ARP protocol type (eg IP_ARP_PROTO_TYPE)//    areq_arc.arc_proto_addr_offset = offset to protocol address to look up (eg an InetHost)//    areq_arc.arc_proto_addr_offset = length of protocol address to look up (eg sizeof(InetHost))//    areq_sender_addr_offset = offset to protocol address of sender (eg an InetHost)//    areq_sender_addr_length = length of protocol address of sender (eg sizeof(InetHost))//    areq_xmit_count = number of transmissions before giving up (use 0 for a straight cache lookup)//    areq_xmit_interval = number of milliseconds between transmissions (0 gives a sensible default)//    areq_max_buffered = number of requests to buffer (0 gives a sensible default)//    areq_sap = a SAP to insert into the returned response// Out://    The output is in the form of a DLPI message that you can//    use as the header to a message to the requested host.#define  AR_ENTRY_SQUERY    MIOC_CMD(MIOC_ARP,6)// Look for an entry in the ARP cache.// Use area_t structure.// In://    area_arc.arc_cmd = AR_ENTRY_SQUERY//    area_arc.arc_name_offset = offset to name of interface//    area_arc.arc_name_length = length of name of interface (including zero terminator)//    area_arc.arc_proto = ARP protocol type (eg IP_ARP_PROTO_TYPE)//    area_arc.arc_proto_addr_offset = offset to protocol address to look up (eg an InetHost)//    area_arc.arc_proto_addr_offset = length of protocol address to look up (eg sizeof(InetHost))//    area_hw_addr_offset = offset to buffer to store hardware address//    area_hw_addr_length = length of buffer to store hardware address (eg 6)// Out://    area_arc.arc_flags = flags for this entry//    buffer pointed to by area_hw_addr_offset and area_hw_addr_length = hardware address#define  AR_XMIT_REQUEST    MIOC_CMD(MIOC_ARP,4)// Use arc_t structure.#define  AR_XMIT_RESPONSE  MIOC_CMD(MIOC_ARP,11)// Use arc_t structure.#define  AR_INTERFACE_UP    MIOC_CMD(MIOC_ARP,9)// Bring an ARPing interface up.// Use arc_t structure.// In://    arc_cmd = AR_INTERFACE_UP//    arc_name_offset = offset to name of interface//    arc_name_length = length of name of interface (including zero terminator)#define  AR_INTERFACE_DOWN  MIOC_CMD(MIOC_ARP,10)// Tear an ARPing interface down.// Use arc_t structure.// In://    arc_cmd = AR_INTERFACE_DOWN//    arc_name_offset = offset to name of interface//    arc_name_length = length of name of interface (including zero terminator)// Flags used in the arc_flags field of arc_t.#define  ACE_F_PERMANENT    0x1    // This entry will not time out.#define  ACE_F_PUBLISH    0x2    // ARP will respond to incoming ARP requests for this entry#define  ACE_F_DYING      0x4    // This entry is going away very soon.#define  ACE_F_RESOLVED    0x8    // This entry is valid.#define ACE_F_MAPPING    0x10  // Use bit mask on target address.// The protocol value for IP ARPs, for use in the arc_proto field of the arc_t.#define  IP_ARP_PROTO_TYPE    0x0800#if PRAGMA_ALIGN_SUPPORTED#pragma options align=reset#endif</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/ARPSample/listing4.html%3Fid%3DDTS10000227-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/ARPSample/listing4.html%3Fid%3DDTS10000227-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/ARPSample/listing4.html%3Fid%3DDTS10000227-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
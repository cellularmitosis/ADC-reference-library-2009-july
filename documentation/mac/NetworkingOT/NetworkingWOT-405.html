<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTInetQuery</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING405></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-404.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-406.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-377.html"><B>Chapter 29 - TCP/IP Services Reference</B></A> / <A HREF="NetworkingWOT-393.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-404.html"><B>Retrieving DNS Query Information</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING405-0></A>
<H3><A NAME=MARKER-13-140></A>OTInetQuery<A NAME=MARKER-13-141></A></H3>
 Executes a generic DNS query.<P>
<A NAME=HEADING405-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-0-95></A>OSStatus OTInetQuery(InetSvcRef ref,
                     char* name, 
                     UInt16 qClass, 
                     UInt16 qType, 
                     char* buf, 
                     size_t buflen, 
                     void** argv,
                     size_t argvlen,
                     OTFlags flags);
</PRE>
<A NAME=HEADING405-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-143></A>OSStatus TInternetServices::Query(char* name,
                     UInt16 qClass, 
                     UInt16 qType,
                     char* buf, 
                     size_t buflen, 
                     void** argv, 
                     size_t argvlen,
                     OTFlags flags)
</PRE>
<A NAME=HEADING405-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The internet services reference you obtained when you opened the TCP/IP service provider.
<DT><CODE>name</CODE>
<DD> A pointer to the fully qualified domain name or IP address for which you are issuing the query.
<DT><CODE>qClass</CODE>
<DD> The numeric value for the DNS resource record class, such as <CODE>Inet</CODE> or <CODE>Hesiod</CODE>. 255 is a wildcard.
<DT><CODE>qType</CODE>
<DD> The numeric value for the DNS resource record type, such as <CODE>CNAME</CODE> and <CODE>PTR</CODE>,. 255 is a wildcard.
<DT><CODE>buf</CODE>
<DD> A pointer to the buffer in which to store one or more DNS query information structures (<CODE>DNSQueryInfo</CODE>). Open Transport fits as many complete structures into the buffer as it can; incomplete structures are not returned.
<DT><CODE>buflen</CODE>
<DD> The size (in bytes) of the buffer.
<DT><CODE>argv</CODE>
<DD> A pointer to an empty pointer array that Open Transport uses to return a set of pointers to the individual DNS query information structures returned. This parameter is optional, specify <CODE>nil</CODE> if you don't want to use this array.
<DT><CODE>argvlen</CODE>
<DD> The length of the <CODE>argv</CODE> buffer. 
<DT><CODE>flags</CODE>
<DD> Reserved. Set to 0.
<DT><I>function result</I>
<DD> A result code. See <A HREF=NetworkingWOT-479.html#MARKER-9-72>Appendix B</A> for more information.
</DL>
<A NAME=HEADING405-17></A>
<H5>DISCUSSION</H5>
 The OTInetQuery function allows you to use the Domain Name Resolver (DNR) for generic domain name service (DNS) queries. You can ask query any type and class, and Open Transport returns as many responses as it can fit in the buffer you provide. <P>
 The <CODE>argv</CODE> and <CODE>argvlen</CODE> parameters are optional. If provided, Open Transport uses the <CODE>argv</CODE> buffer to return pointers to the locations of individual <CODE>DNSQueryInfo</CODE> structures written into the buffer pointed to by the <CODE>buf</CODE> parameter. For example, if you set <CODE>argvlen</CODE> to 5 and your query receives three answers, the value of <CODE>argv[0]</CODE> would be a pointer to the first answer in the answer buffer, the value of <CODE>argv[1]</CODE> would be a pointer to the second answer, the value of <CODE>argv[2]</CODE> would be a pointer to the third answer, and the rest of the <CODE>argv</CODE> array would have null pointers. <P>
 If you call <CODE>OTInetQuery</CODE> asynchronously, Open Transport calls your notifier with a <CODE>T_DNRQUERYCOMPLETE</CODE> event when the call completes. When using asynchronous mode, you must not modify the <CODE>buf</CODE> or <CODE>argv</CODE> structures before the function completes. <P>
 The <CODE>OTInetQuery</CODE> function works with both known and unknown query classes and types. Open Transport expands compressed answers for the <CODE>Inet</CODE> query class and known query types before returning them into the answer buffer. Answers that are resource records of unknown class and type are put into the answer buffer unparsed because Open Transport assumes that DNS compression is not used.<P>
 Open Transport provides simplified functions for the most commonly made queries such as name-to-address (<CODE>A</CODE>), address-to-name (<CODE>PTR</CODE>), system CPU and OS (<CODE>HINFO</CODE>), and mail exchange (<CODE>MX</CODE>) queries. These are the <A HREF=NetworkingWOT-395.html#MARKER-9-116><CODE>OTInetStringToAddress</CODE></A>, <A HREF=NetworkingWOT-396.html#MARKER-9-120><CODE>OTInetAddressToName</CODE></A>, <A HREF=NetworkingWOT-402.html#MARKER-9-131><CODE>OTInetSysInfo</CODE></A>, and <A HREF=NetworkingWOT-403.html#MARKER-9-135><CODE>OTInetMailExchange</CODE></A> functions, respectively. The information obtained is the same using either type of function, although in some cases the simplified functions limit the maximum number of answers that can be returned.<P>
 Currently, only answers of type <CODE>PTR</CODE>, <CODE>A</CODE>, and <CODE>CNAME</CODE> are cached by OpenTransport. OpenTransport does not use this cached information to resolve address-to-name translations because doing so would defeat server load balancing schemes. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-404.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-406.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

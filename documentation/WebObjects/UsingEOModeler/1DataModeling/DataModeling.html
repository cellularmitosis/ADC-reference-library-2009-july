<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>EOModeler User Guide (Legacy): Data Modeling and EOModeler</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Data Modeling and EOModeler"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001018-CH202" title="Data Modeling and EOModeler"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30001018-CH201-TP1">EOModeler User Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../3UsingModeler/UsingModeler.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001018-CH202-TP1" title="Data Modeling and EOModeler"></a><h1>Data Modeling and EOModeler</h1><p>This chapter introduces the concept of <strong>data modeling</strong><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_72"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_73"></a>. It also introduces the WebObjects data modeling tool, called EOModeler. It then leads you through the process of building a simple model. It is divided into the following sections:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-TPXREF126">“Why Model Your Data?”</a></span> addresses that question.</p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-TPXREF127">“When to Model Data”</a></span> suggests where in the development cycle data modeling should occur.</p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-TPXREF128">“EOModeler Features”</a></span> discusses the tool WebObjects provides to model data.</p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-BABDECIE">“Entity-Relationship Modeling Fundamentals”</a></span> introduces some of the main concepts of this data modeling paradigm.</p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-TPXREF130">“Creating a Model From an Existing Data Source”</a></span> leads you through the process of creating a simple model.</p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-TPXREF141">“What a New Model Includes”</a></span> describes what you get from a new model.</p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-TPXREF142">“Checking for Consistency”</a></span> discusses EOModeler’s consistency-checking feature.</p></li></ul><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF126" title="Why Model Your Data?"></a><h2>Why Model Your Data?</h2><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_74"></a><p>While it may seem obvious<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_75"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_76"></a>, data modeling is perhaps the most important phase of WebObjects application development. Data models form the foundation of your business logic<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_77"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_78"></a> and business logic forms the core of your application. Good business logic is essential to building effective applications, so it follows that good data models are essential to the success of the applications you build. Most importantly, data modeling plays a crucial role in object-relational mapping, the process in which database records are transposed into Java objects. </p><p>Using data models to develop data-driven applications provides you a unique advantage: applications are isolated from the idiosyncrasies of the data sources they access. This separation of an application’s business logic from database logic allows you to change the database an application accesses without needing to change the application.</p><p>Also, WebObjects provides a rapid development environment that enables the creation of full-featured Web and desktop applications based on data models. So if you build well-designed data models, WebObjects gives you usable applications for free without any code.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF127" title="When to Model Data"></a><h2>When to Model Data</h2><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_79"></a><p>Whenever possible, data modeling<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_80"></a> should occur in the earliest phases of application design and development. In data-driven applications, data modeling almost always influences an application’s goals. That is, you cannot define an application’s goals outside of the context of the application’s data models.</p><p>Data models in Enterprise Objects reflect the earliest decisions about what data users see and how they are allowed to interact with data. This is because an important part of data modeling is deciding which entities and attributes are visible to clients and editable by clients. So by including data modeling as an early part of the design process, you can simplify future implementation details.</p><p>This doesn’t imply, however, that you need to lock down a model before you begin other phases of application development. Although it’s easier to start with a model that is fairly complete, you can revise models after you’ve started other phases of application development.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF128" title="EOModeler Features"></a><h2>EOModeler Features</h2><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_81"></a><p>WebObjects provides you with a great tool for object-relational mapping called EOModeler. It allows you to</p><ul class="ul"><li class="li"><p>build data models either from scratch or by analyzing preexisting data sources using reverse engineering</p></li><li class="li"><p>add and customize entities (tables) and attributes (columns)</p></li><li class="li"><p>form relationships between entities</p></li><li class="li"><p>form relationships across multiple models</p></li><li class="li"><p>generate SQL from a model to create or update a data-source schema based on the model</p></li><li class="li"><p>generate Java classes from a model in which you can add custom business logic</p></li><li class="li"><p>use stored procedures within data models</p></li><li class="li"><p>graphically build fetch specifications for retrieving data</p></li><li class="li"><p>flatten attributes and relationships</p></li><li class="li"><p>define derived attributes</p></li><li class="li"><p>build database queries in raw SQL</p></li><li class="li"><p>synchronize changes made in the data source schema or in the data model using schema synchronization</p></li></ul><p>How you use EOModeler greatly depends on the control you have over an application’s data sources. For instance, if you are not allowed to define new database tables or edit database columns, you have less control over modeling the data; instead your responsibility is to define parameters for object-relational mapping.</p><p>You’ll create better models if you’re empowered to change the database schema, but you can still create effective models if you can’t.</p><p>The most important thing EOModeler does is to provide a foundation with which to define the mapping between data source schemas and Java objects. EOModeler produces many things, the most important being EOModel files that provide the concrete mapping definition. The industry-standard term for the mapping between data-source schemas and objects is <strong>Entity-Relationship modeling</strong><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_82"></a>.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-BABDECIE" title="Entity-Relationship Modeling Fundamentals"></a><h2>Entity-Relationship Modeling Fundamentals</h2><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_83"></a><p>A data source stores data in the structures it defines: A relational database uses tables, an object-oriented database uses objects, a file system uses files, and so on. <a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_84"></a>Entity-Relationship modeling provides terminology and methodology to describe how a data source’s data structures can be mapped to Java objects or other multidimensional data structures. Enterprise Objects uses a modified version of Entity-Relationship modeling.</p><p>When working with relational-database systems, you can use EOModeler to define the mapping between relational-database data structures and Java objects.<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_85"></a> The product of EOModeler, a model file, describes the database’s data structures in terms that the Enterprise Object technology can understand and work with.</p><p>In an Entity-Relationship model, distinguishable things are known as <strong>entities</strong>, each entity is defined by its component <strong>attributes</strong>, and the affiliations, or <strong>relationships</strong> between entities, are identified (together, attributes and relationships are known as <strong>properties</strong>). From these three simple modeling objects—entities, attributes, and relationships—arbitrarily complex systems can be modeled.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF146" title="Entities and Attributes"></a><h3>Entities and Attributes</h3><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_86"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_87"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_88"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_89"></a><p>Entities and attributes represent structures that contain data. In a relational database data model, entities represent tables and an entity’s attributes represent columns. </p><p>Each row in the table can be thought of as an instance of an entity. So, a customer record is called an instance of the Customer entity. Each instance of an entity typically maps to one object, but more complex mappings are possible.</p><p>Contained within an entity is a list of attributes of the thing that’s being modeled. The Customer entity could contain attributes such as a customer’s first name, last name, phone number, and so on.</p><p>In traditional Entity-Relationship mapping, each entity represents all or part of one database table. However, Enterprise Objects allows you to go beyond this by adding attributes to an entity that actually reflect data in other related tables (this type of attribute is known as a <strong>flattened attribute</strong><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_90"></a>). So, in Enterprise Objects, an entity can map to one or more database tables.</p><p>Entities can also have <strong>derived attributes,</strong><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_91"></a> which do not directly correspond to any of the columns in the database table to which the entity maps. These attributes are usually computed from one or more attributes in the entity. For example, a derived attribute could represent the total amount of money spent by a customer by adding the amounts of all a customer’s purchases together.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF147" title="Naming Conventions"></a><h3>Naming Conventions</h3><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_92"></a><p>Entities and attributes in data models derive their names based on the database elements they represent. A CUSTOMER table in a database, for example, would likely map to an entity named “Customer,” though this is not strictly required. In your application, you refer to the CUSTOMER table not by its database name but by using its entity name, Customer.</p><p>This allows you to build data models that are largely independent of any particular data source. Different data sources enforce different naming conventions for their data structures, so providing a mapping between those names allows you to build reusable data models that can be used with different data sources.</p><p>End users don’t care if the Customer entity maps to a table named CUSTOMER or CUST or _CUSTOMER, so the mapping also helps make the earliest decisions about how data structures appear in the end-user application.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF148" title="Data Types"></a><h3>Data Types</h3><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_93"></a><p>Every database column is assigned a data type such as <code>int</code>, <code>varchar</code>, <code>float</code>, or <code>blob</code>. These data types map to primitive Java types such as <code>int</code> and <code>float</code> but also to Java objects such as <code>java.lang.String</code> and <code>java.lang.Object</code>. The data model defines the data-type mapping between columns and attributes just as it defines the naming mapping between them.</p><p>When data is fetched from a data source into an enterprise object, the value of each attribute is converted from its external data type into a Java-specific data type. Likewise, when the data in an enterprise object is pushed back to a data source, each attribute is converted from its Java data type to the data type specified in the model.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF149" title="Relationships"></a><h3>Relationships</h3><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_94"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_95"></a><p>In the relational-database paradigm, a relationship expresses the affiliation between two tables in the data source. Relationships allow one table to access related information in another table. In more complex data modeling, relationships can express the affinity between multiple tables.</p><p>At the data-source level, the two tables in a relationship are linked together using primary and foreign keys. How the table pair is related (that is, what kind of relationship is expressed) depends on the configuration of primary and foreign keys in each table.</p><p>At the Enterprise Objects level, relationships are mapped to a particular kind of object that includes not only information about the tables involved in a particular relationship but also the rules of the relationship between the two tables.</p><p>Relationships are a complex concept in the Entity-Relationship model. The chapter <span class="content_text"><a href="../5WorkingWithRelationships/WorkingWithRelationships.html#//apple_ref/doc/uid/TP30001018-CH205-TP1">“Working With Relationships”</a></span> provides a more thorough introduction to the concept of relationships and also introduces the additional features you get when using relationships with Enterprise Objects.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF150" title="ER Modeling in Enterprise Objects "></a><h3>ER Modeling in Enterprise Objects </h3><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_96"></a><p>In Enterprise Objects, data models describe the data source–to–enterprise object mapping by using these objects:</p><ul class="spaceabove"><li class="li"><p><code>com.webobjects.eoaccess.EOModel</code></p></li><li class="li"><p><code>com.webobjects.eoaccess.EOEntity</code></p></li><li class="li"><p><code>com.webobjects.eoaccess.EOAttribute</code></p></li><li class="li"><p><code>com.webobjects.eoaccess.EORelationship</code></p></li></ul><p>The following table describes the object-relational mapping provided by Enterprise Object models. The column titled “Database/directory element” lists elements as they are named in relational databases and then elements as they are named in LDAP directories, if applicable.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_97"></a><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF143" title="Table 1-1Object-relational mapping"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Object-relational mapping</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Database/directory element</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Model object</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Object mapping</p></th></tr><tr><td  scope="row"><p>Schema</p></td><td ><p>EOModel</p></td><td ><p>Enterprise object model</p></td></tr><tr><td  scope="row"><p>Table/object class</p></td><td ><p>EOEntity</p></td><td ><p>Enterprise object class</p></td></tr><tr><td  scope="row"><p>Row/entry</p></td><td ><p>EOEnterpriseObject</p></td><td ><p>Enterprise object instance</p></td></tr><tr><td  scope="row"><p>Column/attribute</p></td><td ><p>EOAttribute</p></td><td ><p>Enterprise object instance variable</p></td></tr><tr><td  scope="row"><p>Referential constraint/foreign key</p></td><td ><p>EORelationship</p></td><td ><p>Reference to another enterprise object</p></td></tr></table></div><p>While the modeling classes correspond to elements in a data source, a model represents a level of abstraction above the data source. Consequently, mapping between modeling classes and database components doesn’t have to be one-to-one. So, for example, while an EOEntity object described in a model corresponds to a single database table, it can contain references to multiple tables. In that sense, a model is more analogous to a database view.</p><p>Similarly, an EOAttribute can either correspond directly to a column in the root entity or it can be derived or flattened. A derived attribute typically has no corresponding database column while a flattened attribute is added to one entity from another entity<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_98"></a>.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF130" title="Creating a Model From an Existing Data Source"></a><h2>Creating a Model From an Existing Data Source</h2><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_99"></a><p>Although models can be programmatically generated at runtime, you typically create models using EOModeler and then add them to your project as model files or as part of a framework your project includes.</p><p>This section describes how to create a new model from an existing data source. It is organized in the following sections:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-BABIBHFG">“Selecting an Adaptor”</a></span></p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-BABHFFDE">“Choosing What to Include”</a></span></p></li><li class="li"><p><span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-BABCDECI">“Choosing the Tables to Include”</a></span></p></li></ul><p>EOModeler is installed in <code>/Developer/Applications</code>.</p><p>To create a new model, choose New from the Model menu. EOModeler starts the New Model Wizard, which helps you configure the new model.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-BABIBHFG" title="Selecting an Adaptor"></a><h3>Selecting an Adaptor</h3><p>An adaptor is an object that connects your application to a particular data source. Since data sources use different connection protocols (JDBC, JNDI, ERP, and so forth), you need a specialized adaptor for each type of data source you use. Also, since vendors build different features into their data sources, you also need an adaptor plug-in for each data source you use. </p><p>In WebObjects 5.2, adaptors are provided for JDBC and JNDI connectivity and adaptor plug-ins are provided for the following data sources:<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_100"></a></p><ul class="spaceabove"><li class="li"><p>Oracle (JDBC)</p></li><li class="li"><p>Microsoft SQL Server 2000 (JDBC)</p></li><li class="li"><p>MySQL (JDBC)</p></li><li class="li"><p>OpenBase (JDBC)</p></li><li class="li"><p>Sybase (JDBC)</p></li><li class="li"><p>OpenLDAP (JNDI)</p></li><li class="li"><p>iPlanet (JNDI)</p></li></ul><p>Refer to the document <em>Post Installation Guide</em> for exact specifications on which data sources are qualified for WebObjects. </p><p>The Enterprise Objects adaptor architecture is modular so you can write adaptor plug-ins for other types of data sources and for other data-source vendors (see Apple Technical Note TN2027). However, this is a very advanced feature so it’s best to use a data source that’s officially supported by WebObjects, such as those listed above.</p><p>WebObjects provides two adaptor types out of the box: JDBC and JNDI. The first pane that appears in the New Model Wizard allows you to choose the adaptor you want to use in the model, as shown in <span class="content_text">Figure 1-1</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABHFAGH" title="Figure 1-1Choose an adaptor"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Choose an adaptor</p><img src = "../Art/choose_adaptor.gif" alt = "Choose an adaptor" width="375" height="266"></div><br/><p>After you select an adaptor, EOModeler displays a window prompting you to enter login and other information to connect to the data source. <span class="content_text">Figure 1-2</span> shows the JDBC Connection window that appears if you select the JDBC adaptor. <span class="content_text">Figure 1-4</span> shows the JNDI Connection window that appears if you select the JNDI adaptor. For this example, use the JDBC adaptor.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_2" title="Note"></a><p><strong>Note:</strong>&nbsp;Although this example assumes that you choose the JDBC adaptor, there is valuable information throughout regarding the JNDI adaptor.</p></div><p>If necessary, supply the correct login information for the data source. You must also supply the URL of the data source. Depending on the data source and adaptor you want to use, you may also need to supply information in the Driver and Plugin fields.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;If you are connecting to a database on your local machine and you are not connected to a network, you may need to use 127.0.0.1 as the address rather than <code>localhost</code>.</p></div><p>For this example, use the WORealEstate database that is installed with WebObjects. The example databases uses OpenBase, so the URL you enter in the JDBC Connection window is specific to that particular database. When you create models from other vendor’s databases, you may need to use a different URL format. <span class="content_text"><a href="DataModeling.html#//apple_ref/doc/uid/TP30001018-CH202-BABBIBCI">Figure 1-3</a></span> shows the URL format Oracle uses.</p><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABFABAH" title="Figure 1-2JDBC Connection window with OpenBase connection information"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>JDBC Connection window with OpenBase connection information</p><img src = "../Art/jdbc_connection.gif" alt = "JDBC Connection window with OpenBase connection information" width="464" height="198"></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABBIBCI" title="Figure 1-3JDBC Connection window with Oracle connection information"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>JDBC Connection window with Oracle connection information</p><img src = "../Art/jdbcconnectoracle.gif" alt = "JDBC Connection window with Oracle connection information" width="411" height="260"></div><br/><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABCDHHA" title="Figure 1-4JNDI Connection window"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>JNDI Connection window</p><img src = "../Art/jndiconnectiondialog.gif" alt = "JNDI Connection window" width="322" height="251"></div><br/><a name="//apple_ref/doc/uid/TP30001018-CH202-BABHFFDE" title="Choosing What to Include"></a><h3>Choosing What to Include</h3><p>After you log in to the data source, the wizard asks you what you want to include in the model, as shown in <span class="content_text">Figure 1-5</span>. The options available here largely depend on how complete the schema information in the data store is. For example, the wizard includes relationships in your model only if the server’s schema information specifies foreign key constraints.</p><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABDGCBJ" title="Figure 1-5Choose what to include "></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>Choose what to include </p><img src = "../Art/choose_what.gif" alt = "Choose what to include" width="378" height="265"></div><br/><p>Using the options in this page, you tell EOModeler that you want to supplement the model with additional information. Keep in mind that the wizard does not modify the data source. Also note that you can do everything the wizard does to a model manually after the initial model is created—but using the wizard saves you time.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;If you use the JNDI adaptor, always deselect these four options as they don’t apply to those types of data sources.</p></div><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF131" title="Assign Primary Keys to All Entities"></a><h4>Assign Primary Keys to All Entities</h4><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_101"></a><p>Enterprise Objects uses primary keys to create unique identifiers (<code>com.webobjects.eocontrol.EOGlobalID</code> objects) for enterprise objects and also to map enterprise objects to the appropriate database rows. Therefore, every entity in a model must be assigned a primary key. </p><p>If you select this option in the New Model Wizard, primary keys are assigned to entities in the model if the wizard finds primary key constraints in the data store’s schema information. If the data store’s schema does not include primary key information, the wizard first asks you to select the primary key for each entity before it assigns it to an entity in the model.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF132" title="Ask About Relationships"></a><h4>Ask About Relationships</h4><p>If a data store’s schema includes foreign key constraints, the wizard creates corresponding relationships in the model. However, foreign key definitions in a schema may not provide enough information for the wizard to set all of a relationship’s options (such as delete rule and optionality). Selecting this option causes the wizard to prompt you to provide the additional information it needs to configure the relationships, if necessary.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF133" title="Ask About Stored Procedures"></a><h4>Ask About Stored Procedures</h4><p>Selecting this option causes the wizard to read stored procedures from the data source’s schema information, display them, and allows you to choose which to include in the model. See <span class="content_text"><a href="../6WorkingWithEntities/WorkingWithEntities.html#//apple_ref/doc/uid/TP30001018-CH206-BABGBCJE">“Stored Procedure Inspector”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF134" title="Use Custom Enterprise Objects"></a><h4>Use Custom Enterprise Objects</h4><p>When deciding what class to map a table to, the wizard offers two choices: EOGenericRecord or a custom class (a subclass of EOGenericRecord or EOCustomObject). EOGenericRecord is a class that implements the <code>com.webobjects.eocontrol.EOEnterpriseObject</code> interface. Its instances store key-value pairs that correspond to an entity’s properties and the data associated with each property.</p><p>If you do not select this option in the New Model Wizard, the wizard maps all your database tables to EOGenericRecord<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_102"></a>. If you do select this option, the wizard maps all your database tables to custom classes that you write. The wizard assumes that each entity is to be represented by a custom class with the same name. For example, a table named LISTING corresponds to an entity named Listing, which corresponds to an EOGenericRecord or EOCustomObject subclass named <code>Listing.java</code>.</p><p>If you choose to use EOGenericRecord rather than custom classes, you do not generate Java files for the entities in your model. This means that you have less opportunity to add business logic to perform validation, insert initial values, or otherwise manipulate enterprise objects programmatically. For some entities, this may be what you want. A common design pattern is to use custom classes only for entities in which you need to implement custom business logic and to use EOGenericRecord for other entities.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-BABCDECI" title="Choosing the Tables to Include"></a><h3>Choosing the Tables to Include</h3><p>In this section of the wizard, you are prompted to choose the tables to include in the model. By default all tables are selected, as shown in <span class="content_text">Figure 1-6</span>, but you can select only certain tables if you want. The wizard creates entities only for the selected tables. Keep in mind that if you want a join to be reflected in the model as a relationship, you must select the source table and the destination table of the join.</p><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABCADIF" title="Figure 1-6Select tables to include in model"></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>Select tables to include in model</p><img src = "../Art/select_tables.gif" alt = "Select tables to include in model" width="434" height="308"></div><br/><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF135" title="Specifying Primary Keys"></a><h3>Specifying Primary Keys</h3><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_103"></a><p>If you are using a data source that stores primary key information in its schema information, the wizard skips this step. It has already read primary key information from the schema and assigned primary keys to entities in the model.</p><p>However, if primary key information isn’t specified in the data source’s schema or if the adaptor can’t read it, the wizard asks you to specify a primary key for each entity.</p><p>If an entity’s primary key is compound; that is, if it’s composed of more than one attribute, Command-click to select multiple attributes to use as a compound primary key. You usually use a compound primary key when any single attribute isn’t sufficient to identify a row uniquely. That is, you should need to use a compound primary key only if no single attribute can uniquely identify a row.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF136" title="Specifying Referential Integrity Rules"></a><h3>Specifying Referential Integrity Rules</h3><p>If foreign key constraints aren’t specified in the data source’s schema information or if the adaptor can’t read that information, the wizard doesn’t create relationships in the model so it skips this step. If this is the case, you can add relationships later as described in <span class="content_text"><a href="../5WorkingWithRelationships/WorkingWithRelationships.html#//apple_ref/doc/uid/TP30001018-CH205-TP1">“Working With Relationships.”</a></span></p><p>However, if you’re using a data source that stores foreign key constraints in its schema information, the wizard reads them and creates corresponding relationships in the model. </p><p>At this point, if you specified that the wizard ask about relationships, it now asks you to provide additional information about the relationships so it can further configure them. <span class="content_text">Figure 1-7</span> shows the wizard asking about the <code>customers</code> relationship in the Agent entity.</p><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABHHJGJ" title="Figure 1-7Specify referential integrity rules for a relationship"></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>Specify referential integrity rules for a relationship</p><img src = "../Art/agent_customer_rules.gif" alt = "Specify referential integrity rules for a relationship" width="375" height="271"></div><br/><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF137" title="Owns Destination"></a><h4>Owns Destination</h4><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_104"></a><p>This option lets you specify whether the relationship’s source owns its destination objects. If a source object owns its destination object, for example, as when an Agent object owns its Customer objects, then when something happens so that a destination object (Customer) is removed from the relationship, it is also removed from the data source. Ownership implies that an owned object cannot exist without its owner.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF138" title="Delete Rule"></a><h4>Delete Rule</h4><p>The options in this section of the window specify what to do when the source object of a relationship is deleted. There are four options, which are described in <span class="content_text"><a href="../5WorkingWithRelationships/WorkingWithRelationships.html#//apple_ref/doc/uid/TP30001018-CH205-TPXREF137">“Delete Rule.”</a></span></p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF139" title="Choosing Stored Procedures"></a><h3>Choosing Stored Procedures</h3><p>If you asked the wizard to include stored procedures in your model, in this window it asks you to specify which stored procedures to include. By default, all stored procedures are selected. If you later decide that you want to include a stored procedure in the model that you didn’t select here, you can always add it later. See <span class="content_text"><a href="../6WorkingWithEntities/WorkingWithEntities.html#//apple_ref/doc/uid/TP30001018-CH206-BABGBCJE">“Stored Procedure Inspector”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF140" title="Save the Model"></a><h3>Save the Model</h3><p>After using the wizard to create the initial model, save the model. If there are any warnings indicating problems with the model, go ahead and continue with the save, then go back and fix the model. You can check for problems at any time by choosing Check Consistency from the File menu<a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_105"></a>.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF141" title="What a New Model Includes"></a><h2>What a New Model Includes</h2><a name="//apple_ref/doc/uid/TP30001018-CH202-DontLinkElementID_106"></a><p>When you create a new model, the information it includes depends on how complete the underlying data source is and also on the choices you made in the New Model Wizard. EOModeler can read all of the following from a data source and compose a model from it:</p><ul class="ul"><li class="li"><p>table and column names</p></li><li class="li"><p>column data types, including the width constraint of string data types</p></li><li class="li"><p>primary keys</p></li><li class="li"><p>constraints defined in the database such as “NOT NULL” and “UNIQUE”</p></li><li class="li"><p>foreign key constraints (which are expressed in models as relationships)</p></li><li class="li"><p>stored procedures</p></li></ul><p>A model contains not only the information it reads from a data source, but also values it derives from that information, including</p><ul class="ul"><li class="li"><p>entity and attribute names</p></li><li class="li"><p>a mapping between the data type of a data column and a corresponding value class (object type), such as String (<code>java.lang.String</code>), Number (<code>java.lang.Number</code>), and Data (<code>com.webobjects.foundation.NSData</code>)</p></li></ul><p>EOModeler derives entity names by taking a data-source table name and making all of it lowercase except for the first letter. It then removes underscore characters and capitalizes the first character following each removed underscore. <span class="content_text">Table 1-2</span> gives an example.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF144" title="Table 1-2Table name to entity name mapping"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong>Table name to entity name mapping</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data-source table name</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Model entity name</p></th></tr><tr><td  scope="row"><p>PERSON</p></td><td ><p>Person</p></td></tr><tr><td  scope="row"><p>PERSON_PHOTO</p></td><td ><p>PersonPhoto</p></td></tr><tr><td  scope="row"><p>PERSON_REVIEW_NOTES</p></td><td ><p>PersonReviewNotes</p></td></tr></table></div><p>Attribute names are based on corresponding database columns. They are derived in the same way as entity names except that EOModeler doesn’t capitalize the first character. EOModeler follows the Java convention for naming methods and instance variables. An example appears in <span class="content_text">Table 1-3</span>.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF145" title="Table 1-3Column name to attribute name mapping"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-3&nbsp;&nbsp;</strong>Column name to attribute name mapping</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data-source column name</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Model attribute name</p></th></tr><tr><td  scope="row"><p>NAME</p></td><td ><p><code>name</code></p></td></tr><tr><td  scope="row"><p>LAST_NAME</p></td><td ><p><code>lastName</code></p></td></tr><tr><td  scope="row"><p>FINAL_IMAGE_NAME</p></td><td ><p><code>finalImageName</code></p></td></tr></table></div><p>Although default entity and attribute names follow a naming convention, you can choose to use arbitrary names. All that really matters is that the external names of the entities match the table names in the schema and that the external names of the attributes match the column names in the tables. However, since business objects are Java objects, your code will be more readable and manageable if you follow the default naming convention for entities and attributes which follows standard Java naming conventions.</p><a name="//apple_ref/doc/uid/TP30001018-CH202-TPXREF142" title="Checking for Consistency"></a><h2>Checking for Consistency</h2><p>EOModeler provides consistency checking to confirm that your model is valid. For example, a model that has entities without primary keys or relationships without joins is not valid.</p><p>You can check your model at any time by choosing Check Consistency from the Model menu. Consistency checking is also invoked automatically whenever you save a model. When a consistency check occurs and inconsistencies are found, the Consistency Check window appears with a list of diagnostic messages.</p><p>You can choose what consistency checking looks for in EOModeler’s Preferences pane, as shown in <span class="content_text">Figure 1-8</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001018-CH202-BABDBADD" title="Figure 1-8Consistency-checking options"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>Consistency-checking options</p><img src = "../Art/consistency_options.gif" alt = "Consistency-checking options" width="197" height="147"></div><br/>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../3UsingModeler/UsingModeler.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-05-23<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/UsingEOModeler/1DataModeling/DataModeling.html%3Fid%3DTP30001018-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/UsingEOModeler/1DataModeling/DataModeling.html%3Fid%3DTP30001018-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/UsingEOModeler/1DataModeling/DataModeling.html%3Fid%3DTP30001018-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
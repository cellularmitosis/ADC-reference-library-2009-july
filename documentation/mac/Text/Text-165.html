<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>MeasureText(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING165></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-164.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-166.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-126.html"><B>Chapter 3 - QuickDraw Text</B></A> / <A HREF="Text-143.html"><B>QuickDraw Text Reference</B></A><BR><DL><DD><A HREF="Text-147.html"><B>Routines</B></A> / <A HREF="Text-161.html"><B>Measuring Text</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING165-0></A>
<H3>MeasureText</H3>
 The <A NAME=MARKER-2-300></A><CODE>MeasureText</CODE> procedure provides an array version of the <CODE>TextWidth</CODE> function. For each character in the specified text, MeasureText calculates the width of the character's glyph in pixels from the left edge of the text segment.<P>
<PRE>
PROCEDURE MeasureText (count: Integer; textAddr, charLocs: Ptr);
</PRE>
<DL>
<DT><CODE>count</CODE>
<DD> The number of bytes to be measured.
<DT><CODE>textAddr</CODE>
<DD> A pointer to the memory location of the beginning of the text to be measured. The value of <CODE>textAddr</CODE> must point directly to the first character whose glyph is to be measured.
<DT><CODE>charLocs</CODE>
<DD> A pointer to an application-defined array of <CODE>count</CODE> + 1 integers.
</DL>
<A NAME=HEADING165-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>MeasureText</CODE> procedure calculates the onscreen pixel width of the glyph of each character beginning from the left edge of the text segment. On return, the first element in the <CODE>charLocs</CODE> array contains 0 and the last element contains the total width of the text segment, when the primary line direction is left to right and the text is unidirectional. When the primary line direction is right to left and the text is unidirectional, the first element in the array contains the total width of the text segment, and the last element in the array contains 0. When the text is bidirectional, at a direction boundary, <CODE>MeasureText</CODE> selects the character whose direction maps to that of the primary line direction.<P>
 The <CODE>MeasureText</CODE> procedure returns the same results that an application would get if it called <CODE>CharToPixel</CODE> for each character with a direction parameter value of <CODE>hilite</CODE>. Using <CODE>MeasureText</CODE> to find the pixel location of a character's glyph is less efficient than using the <CODE>CharToPixel</CODE> function because the application must define the array pointed to by <CODE>charLocs</CODE>, and then walk the array after <CODE>MeasureText</CODE> returns the results.<P>
 For more information about <CODE>MeasureText</CODE>, contact Developer Technical Support.<P>
<A NAME=HEADING165-10></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Some fonts in 1-byte script systems may have zero-width characters, which are usually overlapping diacritical marks that typically follow the base character in memory. In this case, <CODE>MeasureText</CODE> measures both the glyph of the base character (the high-order, low-address byte) and the width of the diacritical mark. The <CODE>charLoc</CODE> array includes an entry for each, but both entries contain the same value.<P>
 For 1-byte complex script systems, <CODE>MeasureText</CODE> calculates the widths of any ligatures, reversals, compound characters, and character clusters that need to be drawn. For example, for an Arabic ligature, the entry that corresponds to the trailing edge of each character that is part of the ligature is the trailing edge of the entire ligature.<P>
 Note that <CODE>count</CODE> is the number of <I>bytes</I> to be measured, not the number of characters. Because 2-byte script systems also include characters consisting of only one byte, do not simply multiply the number of characters by 2 to determine this value; you must determine and specify the correct number of bytes. For 2-byte characters, the <CODE>charLocs</CODE> array contains two entries--one corresponding to each byte--but both entries contain the same pixel-width value.<A NAME=MARKER-2-324></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-164.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-166.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

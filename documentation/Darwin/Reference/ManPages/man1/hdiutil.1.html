<html><head><title>Mac OS X
 Manual Page For hdiutil(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/hdiutil" title="Mac OS X
 Manual Page for hdiutil(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/hdiutil"; name=hdiutil(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>

HDIUTIL(1)                BSD General Commands Manual               HDIUTIL(1)

<b>NAME</b>
     <b>hdiutil</b> -- manipulate disk images (attach, verify, burn, etc)

<b>SYNOPSIS</b>
     <b>hdiutil</b> <u>verb</u> [options]

<b>DESCRIPTION</b>
     <b>hdiutil</b> uses the DiskImages framework to manipulate disk images.  Common verbs include <b>attach</b>, <b>detach</b>,
     <b>verify</b>, <b>create</b>, <b>convert</b>, and <b>burn</b>.

     The rest of the verbs are: <b>help</b>, <b>info</b>, <b>load</b>, <b>checksum</b>, <b>chpass</b>, <b>eject</b> (historical synonym for <b>detach</b>),
     <b>flatten</b>, <b>unflatten</b>, <b>imageinfo</b>, <b>mount</b> (historical synonym for <b>attach</b>), <b>mountvol</b>, <b>unmount,</b> <b>plugins</b>,
     <b>udifrez</b>, <b>internet-enable</b>, <b>resize</b>, <b>segment</b>, <b>compact</b>, <b>makehybrid</b>, and <b>pmap</b>.

<b>COMMON</b> <b>OPTIONS</b>
     The following option descriptions apply to all verbs:

     <b>-verbose</b> be verbose; default is less output.  This option can help the user decipher why a particular
              operation failed.  At a minimum, the probing of any specified images will be detailed.
     <b>-quiet</b>   minimize output in most cases.  <b>-debug</b> and <b>-verbose</b> negate almost all of <b>-quiet</b>'s functional-<font color="#ffffff" class="whiteout">ity.&nbsp;functionality.</font>
              ity.
     <b>-debug</b>   be very verbose.  This option is good if a large amount of information about what <b>hdiutil</b> and
              the DiskImages framework are doing is needed.  <b>-debug</b> and <b>-verbose</b> generate almost entirely
              independent outputs.

     Many <b>hdiutil</b> verbs understand the following options:

     <b>-plist</b>         provide result output in plist format.  Other programs invoking <b>hdiutil</b> are expected to
                    use <b>-plist</b> rather than try to parse the usual output.  The usual output will remain con-<font color="#ffffff" class="whiteout">sistent&nbsp;consistent</font>
                    sistent but unstructured.
     <b>-puppetstrings</b> provide progress output that is easy for another program to parse.  Any program trying
                    to interpret <b>hdiutil</b>'s progress should use <b>-puppetstrings</b>.

     <b>-srcimagekey</b> <u>key=value</u>
                    specify a key/value pair for the disk image recognition system.  (<b>-imagekey</b> is normally
                    a synonym)
     <b>-tgtimagekey</b> <u>key=value</u>
                    specify a key/value pair for any image created.  (<b>-imagekey</b> is only a synonym if there
                    is no input image).

     <b>-encryption</b> [<u>AES-128|AES-256</u>]
                    specify a particular type of encryption or, if not specified, the default encryption
                    algorithm.  Two default algorithm is the AES cipher with a 128-bit key.
     <b>-stdinpass</b>     read a null-terminated passphrase from standard input.  If the standard input is a tty,
                    the passphrase will be read with <a href="../man3/readpassphrase.3.html#//apple_ref/doc/man/3/readpassphrase">readpassphrase(3)</a>.  <b>-stdinpass</b> replaces <b>-passphrase</b>
                    though the latter is still supported for compatibility.  Beware that the password will
                    contain any newlines before the NULL.  See the EXAMPLES section.
     <b>-agentpass</b>     Used with pubkey option if you need to create an encrypted image protected by both a
                    public key and a password. A dialog will be shown prompting for a password. This may be
                    used instead of <b>-stdinpass</b> in this case. This behavior is the default if not specifying
                    <b>-pubkey</b>
     <b>-recover</b> <u>keychain</u><b>_</b><u>file</u>
                    specify a keychain containing the secret corresponding to the certificate specified with
                    <b>-certificate</b> when the image was created).  The correct alternate secret will unlock the
                    image.
     <b>-certificate</b> <u>certificate</u><b>_</b><u>file</u>
                    specify a secondary access certificate for the image being created.
     <b>-pubkey</b> <u>PK1,PK2,...,PKn</u>
                    specify a list of public key hashes in ASCII hex for the image being created.  The
                    <!-- a -->hash(s)<!-- /a --> will be used to locate a public key used to protect an encrypted image.
     <b>-cacert</b> <u>cert</u>   specify a certificate authority certificate.  <u>cert</u> can be either a PEM file or a direc-<font color="#ffffff" class="whiteout">tory&nbsp;directory</font>
                    tory of certificates processed by <a href="c_rehash.1ssl.html#//apple_ref/doc/man/1/c_rehash">c_rehash(1)</a>.  See also <b>--capath</b> and <b>--cacert</b> in
                    <a href="curl.1.html#//apple_ref/doc/man/1/curl">curl(1)</a>.
     <b>-insecurehttp</b>  ignore SSL host validation failures.  Useful for self-signed servers for which the
                    appropriate certificates are unavailable or if access to a server is desired when the
                    server name doesn't match what is in the certificate.

     <b>-shadow</b> [<u>shadowfile</u>]
                    Use a shadow file in conjunction with the data in the image.  This option prevents modi-<font color="#ffffff" class="whiteout">fication&nbsp;modification</font>
                    fication of the original image and allows read-only images to be attached read/write.
                    When blocks are being read from the image, blocks present in the shadow file override
                    blocks in the base image.  All data written to the attached device will be redirected to
                    the shadow file.  If not specified, -shadow defaults to <u>image</u>.shadow. If the shadow file
                    does not exist, it is created.  Verbs accepting <b>-shadow</b> also accept <b>-cacert</b> and
                    <b>-insecurehttp</b>.

     Verbs that create images automatically append the correct extension to any filenames if the extension
     is not already present.  The creation engine also examines the filename extension of the provided file-<font color="#ffffff" class="whiteout">name&nbsp;filename</font>
     name and changes its behavior accordingly.  For example, a sparse image can be created without specify-<font color="#ffffff" class="whiteout">ing&nbsp;specifying</font>
     ing -type SPARSEBUNDLE simply by appending the .sparsebundle extension to the provided filename.

<b>VERBS</b>
     Each verb is listed with its description and individual arguments.  Arguments to the verbs can be
     passed in any order.  A sector is 512 bytes.

     <b>help</b>       display minimal usage information for each verb.  <b>hdiutil</b> <u>verb</u> <b>-help</b> will provide full usage
                information for that verb.

     <b>attach</b> <u>image</u> [<u>options</u>]
                attach a disk image to the system as a device.  <b>attach</b>, like <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a>, will return informa-<font color="#ffffff" class="whiteout">tion&nbsp;information</font>
                tion about an already-attached image as if it had attached it.  <b>mount</b> is a synonym for
                <b>attach</b>.

                Beware that an image freshly created and attached is treated as a new removable device.  See
                <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a> and the EXAMPLES section below for more details.

                NOTE: The format of the output from the attach command is subject to change from release to
                release.  The normal output displays the disk node, content hint, and mount point (if any).
                In particular, writers should NOT rely upon the content hint being the same for a given par-<font color="#ffffff" class="whiteout">tition&nbsp;partition</font>
                tition type; for instance, HFS partitions have the content hint "Apple_HFS" on an image with
                an Apple partition map and "48465300-0000-11AA-AA11-0030654" on an image with a GUID parti-<font color="#ffffff" class="whiteout">tion&nbsp;partition</font>
                tion map.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-recover</b>, <b>-imagekey</b>, <b>-shadow</b>, <b>-puppetstrings</b>, and
                <b>-plist</b>.

                Options:
                <b>-readonly</b>          force the resulting device to be read-only
                <b>-readwrite</b>         attempt to override the DiskImages framework's decision to attach a par-<font color="#ffffff" class="whiteout">ticular&nbsp;particular</font>
                                   ticular image read-only.  For example, <b>-readwrite</b> can be used to modify
                                   the HFS filesystem on a HFS/ISO hybrid CD image.
                <b>-nokernel</b>          attach with a helper process.
                <b>-kernel</b>            attempt to attach this image without a helper process; fail if not possi-<font color="#ffffff" class="whiteout">ble.&nbsp;possible.</font>
                                   ble.
                <b>-notremovable</b>      prevent this image from being detached.  Only root can use this option.

                <b>-mount</b> <u>required|optional|suppressed</u>
                                   indicate whether filesystems in the image should be mounted or not.  OS X
                                   10.2.x and earlier defaulted to <u>optional</u> behavior; the default is now
                                   <u>required</u>.
                <b>-nomount</b>           identical to <b>-mount</b> <u>suppressed</u>.
                <b>-mountroot</b> <u>path</u>    mount volumes in <u>path</u> instead of in <u>/Volumes</u>.  <u>path</u> must exist.  Note
                                   that mountpoint paths must be less than MNAMELEN characters (90 as of
                                   this writing).
                <b>-mountrandom</b> <u>path</u>  like <b>-mountroot</b>, but mountpoint names are randomized with <a href="../man3/mkdtemp.3.html#//apple_ref/doc/man/3/mkdtemp">mkdtemp(3)</a>.
                                   Note that mountpoint paths must be less than MNAMELEN characters (90 as
                                   of this writing).
                <b>-mountpoint</b> <u>path</u>   assuming only one volume, mount it at <u>path</u> instead of in <u>/Volumes.</u> Note
                                   that mountpoint paths must be less than MNAMELEN characters (90 as of
                                   this writing).  See <a href="../man5/fstab.5.html#//apple_ref/doc/man/5/fstab">fstab(5)</a> for ways a system administrator can make
                                   particular volumes automatically mount in particular filesystem locations
                                   by editing the file /etc/fstab.
                <b>-union</b>             perform a union mount
                <b>-private</b>           suppress mount notifications to the rest of the system.  Note that
                                   <b>-private</b> can confuse programs using the Carbon File Manager and should
                                   generally be avoided.
                <b>-nobrowse</b>          mark the volumes non-browsable in applications such as the Finder.
                <b>-owners</b> <u>on|off</u>     enable or disable owners for HFS+ volumes, potentially overriding the
                                   system's default value for the volume.
                <b>-drivekey</b> <u>key=value</u>
                                   specify a key/value pair to be attached to the device in the IOKit reg-<font color="#ffffff" class="whiteout">istry.&nbsp;registry.</font>
                                   istry.

                The following options have corresponding elements in the <u>com.apple.frameworks.diskimages</u>
                preferences domain and thus can be rendered in both the positive and the negative:

                <b>-[no]verify</b>       do [not] suppress verification of the image.  By default, <b>hdiutil</b> <b>attach</b>
                                  verifies all images containing checksums before attaching them.  To main-<font color="#ffffff" class="whiteout">tain&nbsp;maintain</font>
                                  tain backwards compatibility, <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a> does not attempt to verify images
                                  before attaching them.
                <b>-[no]ignorebadchecksums</b>
                                  specify whether bad checksums should be ignored.  The default is to abort
                                  when a bad checksum is detected.
                <b>-[no]idme</b>         do [not] perform IDME actions on IDME images.  IDME actions are normally
                                  only performed when a browser downloads and attaches an image.
                <b>-[no]idmereveal</b>   do [not] reveal (in the Finder) the results of IDME processing.
                <b>-[no]idmetrash</b>    do [not] put IDME images in the trash after processing.
                <b>-[no]autoopen</b>     do [not] auto-open volumes (in the Finder) after attaching an image.  By
                                  default, read-only volumes are auto-opened in the Finder.
                <b>-[no]autoopenro</b>   do [not] auto-open read-only volumes.
                <b>-[no]autoopenrw</b>   do [not] auto-open read/write volumes.
                <b>-[no]autofsck</b>     do [not] force automatic file system checking before mounting a disk
                                  image.  If fsck is successful and the image can be written, fsck will only
                                  run once on any particular instance of an image.

     <b>detach</b> <u>dev</u><b>_</b><u>name</u> [<b>-force</b>]
                detach a disk image and terminate any associated hdid process.  <u>dev</u><b>_</b><u>name</u> is a partial /dev
                node path (e.g. "disk1").  As of OS X 10.4, <u>dev</u><b>_</b><u>name</u> can also be a mount point.  If Disk
                Arbitration is running, <b>detach</b> will use it to unmount any filesystems and detach the image.
                If not, <b>detach</b> will attempt to unmount any filesystems and detach the image directly (using
                the `eject' ioctl).  If Disk Arbitration is not running, it may be necessary to unmount the
                filesystems with <a href="../man8/umount.8.html#//apple_ref/doc/man/8/umount">umount(8)</a> before detaching the image.  <b>eject</b> is a synonym for <b>detach</b>.

                Options:
                <b>-force</b>   Similar to umount -f.  Unmounts any filesystems and detaches the image, regardless
                         of any open files on the image.

     <b>verify</b> <u>image</u> [<u>options</u>]
                compute the checksum of a read-only (or compressed) image, and verify it against the value
                stored in the image.  <b>verify</b> accepts the common options <b>-encryption</b>, <b>-stdinpass</b>,
                <b>-srcimagekey</b>, <b>-puppetstrings</b>, and <b>-plist</b>.

     <b>create</b> <u>size</u><b>_</b><u>spec</u> <u>image</u>
                create a new image of the given size or from the provided data.  If <u>image</u> already exists,
                <b>-ov</b> must be specified or <b>create</b> will fail.  If <u>image</u> is attached, it must be detached before
                it can be overwritten, even if <b>-ov</b> is specified.  To make a cross-platform CD or DVD, use
                <b>makehybrid</b>.  See also EXAMPLES below.

                The size specified is the size of the image to be created.  Filesystem and partition layout
                overhead (64 sectors for the default SPUD layout on PPC machines, 80 sectors for the default
                GPTSPUD layout on Intel machines) will be deducted before space is made for user data in any
                volume on the image.
                Size specifiers:
                <b>-size</b> <u>??b|??k|??m|??g|??t??p|??e</u>
                           Specify the size of the image in the style of <a href="../man8/mkfile.8.html#//apple_ref/doc/man/8/mkfile">mkfile(8)</a> with the addition of
                           tera-, peta-, and exa-bytes sizes (note that 'b' specifies a number of sectors,
                           not bytes).  The larger sizes are useful when creating large sparse images.
                <b>-sectors</b> <u>sector</u><b>_</b><u>count</u>
                           Specify the size of the image file in 512 byte sectors.
                <b>-megabytes</b> <u>size</u>
                           Specify the size of the image file in megabytes (1024*1024 bytes).

                <b>-srcfolder</b> <u>source</u>
                           Derive the image size from the the filesystem entity <u>source</u> and copy the contents
                           of <u>source</u> to the resulting image.  The filesystem type of the image volume will
                           match that of the source as closely as possible unless overridden with <b>-fs</b>.
                           Other size specifiers, such as <b>-size</b>, will override the default (size of the
                           source directory plus some padding for filesystem overhead), allowing for more or
                           less free space in the resulting filesystem.  <b>-srcfolder</b> copies file by file,
                           creating a fresh (theoretically defragmented) filesystem on the destination
                           image.  Such an image would be good for use with <a href="../man8/asr.8.html#//apple_ref/doc/man/8/asr">asr(8)</a>.  <b>-srcdir</b> is a synonym.
                <b>-srcdevice</b> <u>device</u>
                           specifies that the blocks of <u>device</u> should be used to create a new image.  The
                           image size will match the size of <u>device</u>.  <b>resize</b> can be used to adjust the size
                           of a filesystem in any writable image.  Both <b>-srcdevice</b> and <b>-srcfolder</b> can run
                           into errors if there are bad blocks on a disk.  One way around this problem is to
                           write over the files in question in the hopes that the drive will remap the bad
                           blocks when it notices them.  Data will be lost, but the image creation operation
                           will subsequently succeed.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-certificate</b>, <b>-pubkey</b>, <b>-plist</b>, <b>-imagekey</b>,
                <b>-tgtimagekey</b>, <b>-puppetstrings</b>, and <b>-plist</b>.

                <b>-imagekey</b> <u>di-sparse-puma-compatible=TRUE</u> and <b>-imagekey</b> <u>di-shadow-puma-compatible=TRUE</u> will
                create, respectively, sparse and shadow images that can be attached on OS X 10.1.  <b>-imagekey</b>
                <u>encrypted-encoding-version</u> can select between version 1 and version 2 of the encrypted
                encoding.  The framework preferences have a corresponding key to change the default for all
                images.  Version 2 is not compatible with OS X 10.2 but is more robust for SPARSE (UDSP)
                images.  Version 1 is the default for non-sparse images.  As of OS X 10.4.7, sparse,
                encrypted images always use version 2.

                General options:
                <b>-align</b> <u>alignment</u>
                               specifies a size to which the final data partition will be aligned.  The
                               default is 4K.
                <b>-type</b> <u>UDIF|SPARSE|SPARSEBUNDLE</u>
                               UDIF is the default disk image type.  If specified, a UDRW of the specified
                               size will be created.  Specifying SPARSE creates a UDSP: a read/write single-<font color="#ffffff" class="whiteout">file&nbsp;singlefile</font>
                               file image which expands as is is filled with data.  SPARSEBUNDLE creates a
                               UDSB: a read/write backed by a directory bundle.  The default for UDSP is to
                               grow one megabyte at a time.  The default for UDSB is to create band files of
                               up to 128 MB.  <b>sparse-band-size</b> can be used (with <b>-imagekey</b>) to specify the
                               number of sectors that will be added each time the image grows.  The maximum
                               size of a sparse image (of either type) is bounded by the filesystem in the
                               image, the partition map (if any).  SPARSE images are additionally bounded by
                               an internal limit of 128 petabytes.  <b>compact</b> can reclaim unused bands in a
                               UDSP if it has an HFS+ filesystem on it.  As an alternative to sparse images,
                               a UDRW can be resized with <b>resize</b>.  See USING PERSISTENT SPARSE IMAGES below
                               for more information.
                <b>-fs</b> <u>filesystem</u>
                               where <u>filesystem</u> is one of HFS+, HFS+J, HFSX, HFS, MS-DOS, or UFS.  <b>-fs</b> will
                               cause a filesystem of the specified type to be written to the image.  <b>-fs</b> may
                               also change the default layout if that particular filesystem is not native to
                               an Apple_HFS partition in an Apple Partition Map.
                <b>-volname</b> <u>volname</u>
                               The newly-created filesystem will be named <u>volname</u>.  The default name is
                               `untitled'.
                <b>-uid</b> <u>uid</u>       the root of the newly-created volume will be owned by the given numeric user
                               id.  99 maps to the magic `unknown' user (see <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a>).
                <b>-gid</b> <u>gid</u>       the root of the newly-created volume will be owned by the given numeric group
                               id.  99 maps to `unknown'.
                <b>-mode</b> <u>mode</u>     the root of the newly-created volume will have mode (in octal) <u>mode</u>.
                <b>-[no]autostretch</b> do [not] suppress automatically making stretchable volumes when the volume
                               size crosses the auto-stretch-size threshold (default: 256 MB).  See also
                               <a href="../man8/asr.8.html#//apple_ref/doc/man/8/asr">asr(8)</a>.
                <b>-stretch</b> <u>max</u><b>_</b><u>stretch</u>
                               <b>-stretch</b> initializes HFS+ filesystem data such that it can later be stretched
                               on older systems (which could only stretch within predefined limits) using
                               <b>hdiutil</b> <b>resize</b> or by <a href="../man8/asr.8.html#//apple_ref/doc/man/8/asr">asr(8)</a>.  <u>max</u><b>_</b><u>stretch</u> is specified like <b>-size</b>.
                <b>-fsargs</b> <u>newfs</u><b>_</b><u>args</u>
                               additional arguments to pass to whatever newfs program is implied by <b>-fs</b>.
                               <a href="../man8/newfs_hfs.8.html#//apple_ref/doc/man/8/newfs_hfs">newfs_hfs(8)</a> has a number of options that can reduce the amount of space
                               needed by the filesystem's data structures.  Suppressing the journal with <b>-fs</b>
                               <u>HFS+</u> and passing arguments such as <u>-c</u> <u>c=64,a=16,e=16</u> to <b>-fsargs</b> will minimize
                               gaps at the front of the filesystem, allowing <b>resize</b> to squeeze more space
                               from the filesystem.  For truly optimal filesystems, <b>makehybrid</b> should be
                               used.
                <b>-layout</b> <u>layout</u>
                               Specify the partition layout of the image.  <u>layout</u> can be anything specified
                               in MediaKit.framework's MKDrivers.bundle.  NONE creates an image with no par-<font color="#ffffff" class="whiteout">tition&nbsp;partition</font>
                               tition map.  When such an image is attached, a single /dev entry will be cre-<font color="#ffffff" class="whiteout">ated&nbsp;created</font>
                               ated (e.g. /dev/disk1).  SPUD is an acronym for Single Partition UDIF.  SPUD
                               creates an image with a DDM and an Apple Partition Scheme partition map with
                               a single entry for an Apple_HFS partition.  GPTSPUD creates an image with a
                               GUID Partition Scheme partition map with a single entry for an Apple_HFS par-<font color="#ffffff" class="whiteout">tition.&nbsp;partition.</font>
                               tition.  When attached, multiple /dev entries will be created and the 2nd
                               partition will be the data partition (e.g.  /dev/disk1, /dev/disk1s1,
                               /dev/disk1s2; the second partition is disk1s2).  Unless changed by <b>-fs</b>, the
                               default is SPUD on PPC machines, and GPTSPUD on Intel machines.  Other lay-<font color="#ffffff" class="whiteout">outs&nbsp;layouts</font>
                               outs include "UNIVERSAL HD" and "UNIVERSAL CD" which add appropriate OS 9
                               driver partitions for those types of media.  OS 9 drivers are not used by OS
                               X nor by its Classic environment.
                <b>-partitionType</b> <u>partition</u><b>_</b><u>type</u>
                               Change the type of partition in a single-partition disk image.  The default
                               is Apple_HFS, though if the layout is not specified, the appropriate parti-<font color="#ffffff" class="whiteout">tion&nbsp;partition</font>
                               tion scheme and type will be automatically chosen depending on the argument
                               to <b>-fs</b>.
                <b>-ov</b>            overwrite an existing file.  The default is not to overwrite existing files.
                               See the note with <b>create</b> about not being allowed to overwrite attached
                               images.
                <b>-attach</b>        attach the image after creating it (plain <b>attach</b> -- use <b>hdiutil</b> <b>attach</b> for
                               more options).  Note that if no filesystem is specified via <b>-fs</b>, the attach
                               will fail per the default <b>attach</b> <b>-mount</b> <u>required</u> behavior.

                Image from source options (for <b>-srcfolder</b> and <b>-srcdevice</b>):
                <b>-format</b> <u>format</u> Specify the final image format.  The default when a source is specified is
                               UDZO.  <u>format</u> can be any of the format parameters used by <b>convert</b>.

                Options specific to <b>-srcdevice</b>:
                <b>-segmentSize</b> <u>size</u><b>_</b><u>spec</u>
                               Specify that the image should be written in segments no bigger than <u>size</u><b>_</b><u>spec</u>
                               (which follows <b>-size</b> conventions).

                Options specific to <b>-srcfolder</b>:
                <b>-[no]crossdev</b>   do [not] cross device boundaries on the source filesystem.
                <b>-[no]scrub</b>      do [not] skip temporary files when imaging a volume with <b>-srcfolder</b>.  Scrub-<font color="#ffffff" class="whiteout">bing&nbsp;Scrubbing</font>
                                bing is the default when the source is the root of a mounted volume.
                                Scrubbed items include trashes, temporary directories, swap, etc.
                <b>-[no]anyowners</b>  do [not] require that the user invoking <b>hdiutil</b> own all of the files in the
                                source.
                <b>-copyuid</b> <u>user</u>   perform the copy as the given user.  Normally, the copy is performed to
                                maintain fidelity as explained below.
                <b>-skipunreadable</b> skip files that can't be read by the copying user and don't authenticate.

                By default, <b>create</b> <b>-srcfolder</b> attempts to maintain the permissions present in the source
                directory.  It prompts for authentication if it detects an unreadable file, a file owned by
                someone other than the user creating the image, or a SGID file in a group that the copying
                user is not in.

     <b>convert</b> <u>image</u> <b>-format</b> <u>format</u> <b>-o</b> <u>outfile</u>
                convert <u>image</u> to type <u>format</u> and write the result to <u>outfile</u>.

                As mentioned above, the correct filename extension will be added only if it isn't part of
                the provided name.  <u>Format</u> is one of:

                      UDRW - UDIF read/write image
                      UDRO - UDIF read-only image
                      UDCO - UDIF ADC-compressed image
                      UDZO - UDIF zlib-compressed image
                      UDBZ - UDIF bzip2-compressed image (OS X 10.4+ only)
                      UFBI - UDIF entire image with MD5 checksum
                      UDRo - UDIF read-only (obsolete format)
                      UDCo - UDIF compressed (obsolete format)
                      UDTO - DVD/CD-R master for export
                      UDxx - UDIF stub image
                      UDSP - SPARSE (grows with content)
                      UDSB - SPARSEBUNDLE (grows with content; bundle-backed)
                      RdWr - NDIF read/write image (deprecated)
                      Rdxx - NDIF read-only image (Disk Copy 6.3.3 format)
                      ROCo - NDIF compressed image (deprecated)
                      Rken - NDIF compressed (obsolete format)
                      DC42 - Disk Copy 4.2 image

                In addition to the compression offered by some formats, the UDIF and NDIF read-only formats
                completely remove unused space in HFS and UFS filesystems.  For UDZO, <b>-imagekey</b>
                <u>zlib-level=value</u> allows the zlib compression level to be specified ala <a href="gzip.1.html#//apple_ref/doc/man/1/gzip">gzip(1)</a>.  The default
                compression level is 1 (fastest).

                <u>Options</u> are any of:

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-certificate</b>, <b>-srcimagekey</b>, <b>-tgtimagekey</b>, <b>-shadow</b>
                with friends, <b>-puppetstrings</b>, and <b>-plist</b>.

                Other options:
                <b>-align</b> <u>alignment</u>
                             The default is 4 (2K).
                <b>-pmap</b>        add partition map.
                             When converting a NDIF to a any variety of UDIF, or when converting an unparti-<font color="#ffffff" class="whiteout">tioned&nbsp;unpartitioned</font>
                             tioned UDIF, the default is true.
                <b>-segmentSize</b> [<u>size</u><b>_</b><u>spec</u>]
                             Specify segmentation into <u>size</u><b>_</b><u>spec</u>-sized segments as <u>outfile</u> is being written.
                             The default <u>size</u><b>_</b><u>spec</u> when <b>-segmentSize</b> is specified alone is 2*1024*1024 (1 GB
                             worth of sectors) for UDTO images and 4*1024*1024 (2 GB segments) for all other
                             image types.  <u>size</u><b>_</b><u>spec</u> can also be specified ??b|??k|??m|??g|??t??p|??e like
                             <b>create</b>'s <b>-size</b> flag.
                <b>-tasks</b> <u>task</u><b>_</b><u>count</u>
                             When converting an image into a compressed format, specify the number of
                             threads to use for the compression operation.  The default is the number of
                             processors active in the current system.

     <b>burn</b> <u>image</u>
                Burn <u>image</u> to optical media in an attached burning device.  In all cases, a prompt for media
                will be printed once an appropriate drive has been found.  Common options: <b>-shadow</b> with
                friends, <b>-srcimagekey</b>, <b>-encryption</b>, <b>-puppetstrings</b>, and <b>-stdinpass</b>.

                Other options:
                <b>-device</b>          specify a device to use for burning.  See <b>-list</b>.
                <b>-testburn</b>        don't turn on laser (laser defaults to on).
                <b>-anydevice</b>       explicitly allow burning to devices not qualified by Apple (kept for back-<font color="#ffffff" class="whiteout">wards&nbsp;backwards</font>
                                 wards compatibility as <b>burn</b> will burn to any device by default as of OS X
                                 10.4).

                <b>-[no]eject</b>       do [not] eject disc after burning. The default is to eject the disc.
                <b>-[no]verifyburn</b>  do [not] verify disc contents after burn.  The default is to verify.

                <b>-[no]addpmap</b>     do [not] add partition map if necessary.  Some filesystem types will not be
                                 recognized when stored on optical media unless they are enclosed in a par-<font color="#ffffff" class="whiteout">tition&nbsp;partition</font>
                                 tition map.  This option will add a partition map to any bare filesystem
                                 which needs a partition map in order to be recognized when burned to opti-<font color="#ffffff" class="whiteout">cal&nbsp;optical</font>
                                 cal media.  The default is to add the partition map if needed.

                <b>-[no]skipfinalfree</b> do [not] skip final free partition.  If there is a partition map on the
                                 image specifying an Apple_Free partition as the last partition, that
                                 Apple_Free partition will not be burned.  The burned partition map will
                                 still reference the empty space.  The default is to skip burning a final
                                 free partition.

                <b>-[no]optimizeimage</b> do [not] optimize filesystem for burning.  Optimization can reduce the
                                 size of an HFS or HFS+ volume to the size of the data contained on the vol-<font color="#ffffff" class="whiteout">ume.&nbsp;volume.</font>
                                 ume.  This option will change what is burned such that the disc will have a
                                 different checksum than the image it came from.  The default is to burn all
                                 blocks of the disk image (minus any trailing Apple_Free).

                <b>-[no]forceclose</b>  do [not] force the disc to be closed after burning.  Further burns to the
                                 disc will be impossible.  The default is not to close the disc.

                <b>-nounderrun</b>      Disable the default buffer underrun protection.

                <b>-[no]synthesize</b>  [Don't] Synthesize a hybrid filesystem for the disc.  The default is to
                                 create a new (HFS/ISO) filesystem when the source image's blocks could not
                                 be legally burned to a disc.

                <b>-speed</b> <u>x</u><b>_</b><u>factor</u>  1, 2, 4, 6, ...  `max'
                                 The desired "x-factor".  e.g. 8 means the drive will be instructed burn at
                                 "8x speed".  `max' will cause the burn to proceed at the maximum speed of
                                 the drive.  `max' is the default speed.  Slower speeds can produce more
                                 reliable burns.  The speed factor is relative to the media being burned
                                 (e.g.  <b>-speed</b> <u>2</u> has a different data rate when used for a DVD burn vs. a CD
                                 burn).  Note that some drives have a minimum burn speed in which case any
                                 slower speed specified will result in a burn at the drive's minimum speed.

                <b>-sizequery</b>       calculate the size of disc required (the size returned is in sectors) with-<font color="#ffffff" class="whiteout">out&nbsp;without</font>
                                 out burning anything.

                <b>-erase</b>           prompt for optical media (DVD-RW/CD-RW) and then, if the hardware supports
                                 it, quickly erase the media.  If an image is specified, it will be burned
                                 to the media after the media has been erased.
                <b>-fullerase</b>       erase all sectors of the disc (this usually takes quit a bit longer than
                                 <b>-erase</b>).
                <b>-list</b>            list all burning devices, with OpenFirmware paths suitable for <b>-device</b>.

     <b>makehybrid</b> <b>-o</b> <u>image</u> <u>source</u>
                Generate a potentially-hybrid filesystem in a read-only disk image using the DiscRecording
                framework's content creation system.

                <u>source</u> can either be a directory or a disk image.  The generated image can later be burned
                using <b>burn</b>, or converted to another read-only format with <b>convert</b>.  By default, the filesys-<font color="#ffffff" class="whiteout">tem&nbsp;filesystem</font>
                tem will be readable on most modern computing platforms.  The generated filesystem is not
                intended for conversion to read/write, but can safely have its files copied to a read/write
                filesystem by <!-- a -->ditto(8)<!-- /a --> or <a href="../man8/asr.8.html#//apple_ref/doc/man/8/asr">asr(8)</a> (in file-copy mode).

                <b>hdiutil</b> supports generating El Torito-style bootable ISO9660 filesystems, which is commonly
                used for booting x86-based hardware. The specification includes several emulation modes. By
                default, an El Torito boot image emulates either a 1.2MB, 1.44MB, or 2.88MB floppy drive,
                depending on the size of the image.  Also available are "No Emulation" and "Hard Disk
                Emulation" modes, which allow the boot image to either be loaded directly into memory, or be
                virtualized as a partitioned hard disk, respectively. The El Torito options should not be
                used for data CDs.

                Filesystem options:
                <b>-hfs</b>    Generate an HFS+ filesystem.  This filesystem can be present on an image simultane-<font color="#ffffff" class="whiteout">ously&nbsp;simultaneously</font>
                        ously with an ISO9660 or Joliet or UDF filesystem.  On operating systems that under-<font color="#ffffff" class="whiteout">stand&nbsp;understand</font>
                        stand HFS+ as well as ISO9660 and UDF, like Mac OS 9 or Mac OS X, it is usually the
                        preferred filesystem.
                <b>-iso</b>    Generate an ISO9660 Level 2 filesystem with Rock Ridge extensions.  This filesystem
                        can be present on an image simultaneously with an HFS+ or Joliet or UDF filesystem.
                        ISO9660 is the standard cross-platform interchange format for CDs and some DVDs, and
                        is understood by virtually all operating systems.  If an ISO9660 or Joliet filesys-<font color="#ffffff" class="whiteout">tem&nbsp;filesystem</font>
                        tem is present on a disk image or CD, but not HFS+, Mac OS X will use the ISO9660
                        (or Joliet) filesystem.
                <b>-joliet</b> Generate Joliet extensions to ISO9660.  This view of the filesystem can be present
                        on an image simultaneously with HFS+, and requires the presence of an ISO9660
                        filesystem.  Joliet supports Unicode filenames, but is only supported on some oper-<font color="#ffffff" class="whiteout">ating&nbsp;operating</font>
                        ating systems.  If both an ISO9660 and Joliet filesystem are present on a disk image
                        or CD, but not HFS+, Mac OS X will prefer the Joliet filesystem.
                <b>-udf</b>    Generate a UDF filesystem. This filesystem can be present on an image simultaneously
                        with HFS+, ISO9660, and Joliet. UDF is the standard interchange format for DVDs,
                        although operating system support varies based on OS version and UDF version.

                By default, if no filesystem is specified, the image will be created with all four filesys-<font color="#ffffff" class="whiteout">tems&nbsp;filesystems</font>
                tems as a hybrid image.  When multiple filesystems are selected, the data area of the image
                is shared between all filesystems, and only directory information and volume meta-data are
                unique to each filesystem.  This means that creating a cross-platform ISO9660/HFS+ hybrid
                has a minimal overhead when compared to a single filesystem image.

                Other options (most take a single argument):
                <b>-hfs-blessed-directory</b> Path to directory which should be "blessed" for Mac OS X booting on
                                       the generated filesystem.  This assumes the directory has been other-<font color="#ffffff" class="whiteout">wise&nbsp;otherwise</font>
                                       wise prepared, for example with bless <b>-bootinfo</b> to create a valid
                                       <u>BootX</u> file.  (HFS+ only).
                <b>-hfs-openfolder</b>        Path to a directory that will be opened by the Finder automatically.
                                       See also the <b>-openfolder</b> option in <a href="../man8/bless.8.html#//apple_ref/doc/man/8/bless">bless(8)</a> (HFS+ only).
                <b>-hfs-startupfile-size</b>  Allocate an empty HFS+ Startup File of the specified size, in bytes
                                       (HFS+ only).

                <b>-abstract-file</b>         Path to a file in the source directory (and thus the root of the gen-<font color="#ffffff" class="whiteout">erated&nbsp;generated</font>
                                       erated filesystem) for use as the ISO9660/Joliet Abstract file
                                       (ISO9660/Joliet).
                <b>-bibliography-file</b>     Path to a file in the source directory (and thus the root of the gen-<font color="#ffffff" class="whiteout">erated&nbsp;generated</font>
                                       erated filesystem) for use as the ISO9660/Joliet Bibliography file
                                       (ISO9660/Joliet).
                <b>-copyright-file</b>        Path to a file in the source directory (and thus the root of the gen-<font color="#ffffff" class="whiteout">erated&nbsp;generated</font>
                                       erated filesystem) for use as the ISO9660/Joliet Copyright file
                                       (ISO9660/Joliet).
                <b>-application</b>           Application string (ISO9660/Joliet).
                <b>-preparer</b>              Preparer string (ISO9660/Joliet).
                <b>-publisher</b>             Publisher string (ISO9660/Joliet).
                <b>-system-id</b>             System Identification string (ISO9660/Joliet).
                <b>-keep-mac-specific</b>     Expose Macintosh-specific files (such as .DS_Store) in non-HFS+
                                       filesystems (ISO9660/Joliet).
                <b>-eltorito-boot</b>         Path to an El Torito boot image. By default, floppy drive emulation
                                       is used, so the image must be one of 1200KB, 1440KB, or 2880KB. If
                                       the image has a different size, either <b>-no-emul-boot</b> or
                                       <b>-hard-disk-boot</b> must be used to enable "No Emulation" or "Hard Disk
                                       Emulation" mode, respectively (ISO9660/Joliet).
                <b>-hard-disk-boot</b>        Use El Torito Hard Disk Emulation mode. The image must represent a
                                       virtual device with an MBR partition map and a single partition
                <b>-no-emul-boot</b>          Use El Torito No Emulation mode. The system firmware will load the
                                       number of sectors specified by <b>-boot-load-size</b> and execute it, with-<font color="#ffffff" class="whiteout">out&nbsp;without</font>
                                       out emulating any devices (ISO9660/Joliet).
                <b>-no-boot</b>               Mark the El Torito image as non-bootable. The system firmware may
                                       still create a virtual device backed by this data. This option is not
                                       recommended (ISO9660/Joliet).
                <b>-boot-load-seg</b>         For a No Emulation boot image, load the data at the specified segment
                                       address.  This options is not recommended, so that the system
                                       firmware can use its default address (ISO9660/Joliet)
                <b>-boot-load-size</b>        For a No Emulation boot image, load the specified number of 512-byte
                                       emulated sectors into memory and execute it. By default, 4 sectors
                                       (2KB) will be loaded (ISO9660/Joliet).
                <b>-eltorito-platform</b>     Use the specified numeric platform ID in the El Torito Boot Catalog
                                       Validation Entry or Section Header. Defaults to 0 to identify x86
                                       hardware (ISO/Joliet).
                <b>-eltorito-specification</b> For complex layouts involving multiple boot images, a plist-format-<font color="#ffffff" class="whiteout">ted&nbsp;plist-formatted</font>
                                       ted string can be provided, using either OpenStep-style syntax or XML
                                       syntax, representing an array of dictionaries. Any of the El Torito
                                       options can be set in the sub-dictionaries and will apply to that
                                       boot image only. If <b>-eltorito-specification</b> is provided in addition
                                       to the normal El Torito command-line options, the specification will
                                       be used to populate secondary non-default boot entries.
                <b>-udf-version</b>           Version of UDF filesystem to generate. This can be either "1.02" or
                                       "1.50".  If not specified, it defaults to "1.50" (UDF).

                <b>-default-volume-name</b>   Default volume name for all filesystems, unless overridden.  If not
                                       specified, defaults to the last path component of <u>source</u>.
                <b>-hfs-volume-name</b>       Volume name for just the HFS+ filesystem if it should be different
                                       (HFS+ only).
                <b>-iso-volume-name</b>       Volume name for just the ISO9660 filesystem if it should be different
                                       (ISO9660 only).
                <b>-joliet-volume-name</b>    Volume name for just the Joliet filesystem if it should be different
                                       (Joliet only).
                <b>-udf-volume-name</b>       Volume name for just the UDF filesystem if it should be different
                                       (UDF only).

                <b>-hide-all</b>              A glob expression of files and directories that should not be exposed
                                       in the generated filesystems.  The string may need to be quoted to
                                       avoid shell expansion, and will be passed to <a href="../man3/glob.3.html#//apple_ref/doc/man/3/glob">glob(3)</a> for evaluation.
                                       Although this option cannot be used multiple times, an arbitrarily
                                       complex glob expression can be used.
                <b>-hide-hfs</b>              A glob expression of files and directories that should not be exposed
                                       via the HFS+ filesystem, although the data may still be present for
                                       use by other filesystems (HFS+ only).
                <b>-hide-iso</b>              A glob expression of files and directories that should not be exposed
                                       via the ISO filesystem, although the data may still be present for
                                       use by other filesystems (ISO9660 only).  Per above, the Joliet hier-<font color="#ffffff" class="whiteout">archy&nbsp;hierarchy</font>
                                       archy will supersede the ISO hierarchy when the hybrid is mounted as
                                       an ISO 9660 filesystem on Mac OS X.  Therefore, if Joliet is being
                                       generated (the default) <b>-hide-joliet</b> will also be needed to hide the
                                       file from <a href="../man8/mount_cd9660.8.html#//apple_ref/doc/man/8/mount_cd9660">mount_cd9660(8)</a>.
                <b>-hide-joliet</b>           A glob expression of files and directories that should not be exposed
                                       via the Joliet filesystem, although the data may still be present for
                                       use by other filesystems (Joliet only).  Because OS X's ISO 9660
                                       filesystem uses the Joliet catalog if it is available, <b>-hide-joliet</b>
                                       effectively supersedes <b>-hide-iso</b> when the resulting filesystem is
                                       mounted as ISO on OS X.
                <b>-hide-udf</b>              A glob expression of files and directories that should not be exposed
                                       via the UDF filesystem, although the data may still be present for
                                       use by other filesystems (UDF only).
                <b>-only-udf</b>              A glob expression of objects that should only be exposed in UDF.
                <b>-only-iso</b>              A glob expression of objects that should only be exposed in ISO.
                <b>-only-joliet</b>           A glob expression of objects that should only be exposed in Joliet.

                <b>-print-size</b>            Preflight the data and calculate an upper bound on the size of the
                                       image.  The actual size of the generated image is guaranteed to be
                                       less than or equal to this estimate.
                <b>-plistin</b>               Instead of using command-line parameters, use a standard plist from
                                       standard input to specific the parameters of the hybrid image genera-<font color="#ffffff" class="whiteout">tion.&nbsp;generation.</font>
                                       tion.  Each command-line option should be a key in the dictionary,
                                       without the leading "-", and the value should be a string for path
                                       and string arguments, a number for number arguments, and a boolean
                                       for toggle options.  The <u>source</u> argument should use a key of "source"
                                       and the <u>image</u> should use a key of "output".

                If a disk image was specified for <u>source</u>, the image will be attached and paths will be eval-<font color="#ffffff" class="whiteout">uated&nbsp;evaluated</font>
                uated relative to the mountpoint of the image.  No absolute paths can be used in this case.
                If <u>source</u> is a directory, all argument paths should point to files or directories either via
                an absolute path, or via a relative path to the current working directory.

                The volume name options, just like files in the filesystems, may need to be mapped onto the
                legal character set for a given filesystem or otherwise changed to obey naming restrictions.
                Use <a href="drutil.1.html#//apple_ref/doc/man/1/drutil">drutil(1)</a> as <b>drutil</b> <b>filename</b> <u>myname</u> to see how a given string would be remapped.

                The <b>-abstract-file</b>, <b>-bibliography-file</b>, <b>-and</b> <b>-copyright-file</b> must exist directly in the
                source directory, not a sub-directory, and must have an 8.3 name for compatibility with
                ISO9660 Level 1.

     <b>compact</b> <u>image</u>
                scans the bands of a sparse (SPARSE or SPARSEBUNDLE) disk image containing an HFS filesys-<font color="#ffffff" class="whiteout">tem,&nbsp;filesystem,</font>
                tem, removing those parts of the image which are no longer being used by the filesystem.
                Depending on the location of files in the hosted filesystem, <b>compact</b> may or may not shrink
                the image.  For SPARSEBUNDLE images, completely unused band files are simply removed.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, <b>-shadow</b> with friends, <b>-puppetstrings</b>,
                and <b>-plist</b>.

     <b>info</b>       display information about DiskImages.framework, the disk image driver, and any images that
                are currently attached.  <b>hdiutil</b> <b>info</b> accepts <b>-plist</b>.

     <b>load</b>       manually load the disk image driver.  Normally, the disk image driver is loaded by the
                DiskImages framework whenever needed.  As of OS X 10.2, the driver will automatically unreg-<font color="#ffffff" class="whiteout">ister&nbsp;unregister</font>
                ister itself after the last image is detached (it will then be unloaded after about a minute
                without being used again).

     <b>checksum</b> <u>image</u> <b>-type</b> <u>type</u>
                Calculate the specified checksum on the image data, regardless of image type.

                Common options: <b>-shadow</b> with friends, <b>-encryption</b>, <b>-stdinpass</b>.  <b>-srcimagekey</b>,
                <b>-puppetstrings</b>, and <b>-plist</b>,

                <u>type</u> is one of:
                      UDIF-CRC32 - CRC-32 image checksum
                      UDIF-MD5 - MD5 image checksum
                      DC42 - Disk Copy 4.2
                      CRC28 - CRC-32 (NDIF)
                      CRC32 - CRC-32
                      MD5 - MD5
                      SHA - SHA
                      SHA1 - SHA-1
                      SHA256 - SHA-256
                      SHA384 - SHA-384
                      SHA512 - SHA-512

     <b>chpass</b> <u>image</u>
                change the passphrase for an encrypted image.  The default is to change the password inter-<font color="#ffffff" class="whiteout">actively.&nbsp;interactively.</font>
                actively.

                Common options: <b>-recover</b> and <b>-srcimagekey</b>.  The options <b>-oldstdinpass</b> and <b>-newstdinpass</b>
                allow, in the order specified, the null-terminated old and new passwords to be read from the
                standard input in the same manner as with <b>-stdinpass</b>.

     <b>unflatten</b> <u>image</u>
                unflatten a UDIF disk image, creating a dual-fork file in traditional format (resource-only;
                no XML).  If the resource fork representation of the metadata becomes greater than 16 MB,
                the operation will fail with error -39 ("End of fork").

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, and <b>-srcimagekey</b>.

     <b>flatten</b> <u>image</u>
                Flatten a read-only (or compressed) UDIF disk image into a single-fork file.  By default,
                metadata will be stored both as XML (for the kernel's use) and in an embedded resource fork
                (for OS X 10.1 and earlier).  Note: UDBZ is not supported in-kernel.

                Common options: <b>-srcimagekey</b>, <b>-encryption</b>, and <b>-stdinpass</b>.  <b>flatten</b> is only required if the
                UDIF has previously been <b>unflatten</b>ed.

                Other options:
                <b>-noxml</b>      don't embed XML data for in-kernel attachment.  The image will never attach in-<font color="#ffffff" class="whiteout">kernel.&nbsp;inkernel.</font>
                            kernel.
                <b>-norsrcfork</b> don't embed resource fork data.  The image will not attach on OS X versions
                            prior to OS X 10.2.

     <b>fsid</b> <u>image</u>
                Print information about file systems on a given disk image.  As is usually the case, <u>image</u>
                can be a <u>/dev</u> entry corresponding to a physical disk.  See the NOTE ON DEV ENTRY ACCESS sec-<font color="#ffffff" class="whiteout">tion.&nbsp;section.</font>
                tion.  More detailed information is presented for HFS file systems.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, and <b>-shadow</b> with friends.

     <b>mountvol</b> <u>dev</u><b>_</b><u>name</u>
                Attempt to mount the filesystem in <u>dev</u><b>_</b><u>name</u> using Disk Arbitration (similar to <b>diskutil</b>
                <b>mount</b>). XML output is available from <b>-plist</b>.  Note that <b>mountvol</b> (rather than <b>mount</b>) will
                remount a volume after it has been unmounted by <b>unmount</b>.  Images are attached and detached;
                volumes are mounted and unmounted.  <b>mountvol</b> undoes a <b>unmount</b> operation.

                <b>mount</b>/<b>attach</b> can be called on a /dev entry, but it will treat the /dev entry as a disk image
                to be attached (creating another /dev entry).  This is usually undesirable.

     <b>unmount</b> <u>volume</u> [<b>-force</b>]
                unmounts a mounted volume without detaching any associated image.  <u>volume</u> is a /dev entry or
                the name of a mountpoint.  NOTE: <b>unmount</b> does NOT detach any disk image associated with the
                volume.  Images are attached and detached; volumes are mounted and unmounted.  <b>mount</b> (which
                is a synonym for <b>attach</b>) will NOT remount an image-based volume if the image is already
                attached but the volume is not mounted (i.e. if <b>unmount</b> has been used on the filesystem).
                <b>mountvol</b> will remount a volume that has been unmounted by <b>unmount</b>.

                Options:
                <b>-force</b> unmount filesystem regardless of open files on that filesystem.  Similar to umount
                       -f.

     <b>imageinfo</b> <u>image</u>
                Print out information about a disk image.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, <b>-shadow</b> with friends, and <b>-plist</b>.

                Options are any of:
                <b>-format</b>   just print out the image format
                <b>-checksum</b> just print out the image checksum

     <b>plugins</b>    print information about DiskImages framework plugins.  The user, system, local, and network
                domains are searched for plugins (i.e.  <u>~/Library/Plug-ins/DiskImages</u>,
                <u>/System/Library/Plug-ins/DiskImages</u>, <u>/Library/Plug-ins/DiskImages</u>,
                <u>/Network/Library/Plug-ins/DiskImages</u>). <b>-plist</b> is available.

     <b>internet-enable</b> [<b>-yes</b>] | <b>-no</b> | <b>-query</b> <u>image</u>
                Enable or disable post-processing for the image.  Without arguments, IDME will be enabled.
                If so enabled, upon first encounter with Disk Copy (on OS X 10.2.3+) or a browser using the
                feature for a download on OS X 10.3, the image will have its visible contents copied into
                the directory containing the image and the image will be put into the trash with IDME turned
                off.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, and <b>-plist</b>.

     <b>resize</b> <u>size</u><b>_</b><u>spec</u> <u>image</u>
                Resize a disk image or the containers within it.  Given a read/write partitioned UDIF, if
                the last partition is Apple_HFS, attempt to resize the partition to the end of the image, or
                to the last used block in the embedded HFS/HFS+ filesystem (depending on <u>size</u><b>_</b><u>spec</u>). On
                older systems, <b>resize</b> was limited to pre-defined limits that depended on how the filesystem
                was created.  As of OS X 10.4, <b>resize</b> can be used to grow an HFS filesystem within an image
                to any size supported by HFS and the filesystem hosting the image.

                <b>resize</b> is often used when a device image needs to be shrunk so that the HFS/HFS+ partition
                can be converted to CD-R/DVD-R format and still be burned.  Note that gaps cannot be
                reclaimed as <b>resize</b> does not move data.  <b>-fsargs</b> can sometimes be used to minimize filesys-<font color="#ffffff" class="whiteout">tem-generated&nbsp;filesystem-generated</font>
                tem-generated gaps.  <b>resize</b> can grow a filesystem and image within the bounds of the image
                and filesystem formats (e.g. roughly 2^63 bytes for HFS+ inside of a UDRW on HFS+).

                <b>hdiutil</b> <b>burn</b> does not burn Apple_Free partitions at the end of the devices, so an image with
                a resized filesystem can be burned to create a CD-R/DVD-R master that contains only the
                actual data in the hosted filesystem (assuming minimal data fragmentation).

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, <b>-shadow</b> with friends, and <b>-plist</b>.

                Size specifiers:
                <b>-size</b> <u>??b|??k|??m|??g|??t??p|??e</u>
                <b>-sectors</b> <u>sector</u><b>_</b><u>count</u> | <u>min</u> | <u>max</u>
                                 Specify the number of 512 byte sectors to which the partition should be
                                 resized.  If this falls outside the min/max values, an error will be
                                 returned and the partition will not be resized.  <u>min</u> automatically deter-<font color="#ffffff" class="whiteout">mines&nbsp;determines</font>
                                 mines the smallest size the partition can be resized to and uses that
                                 value.  <u>max</u> automatically determines the largest size to which the parti-<font color="#ffffff" class="whiteout">tion&nbsp;partition</font>
                                 tion can be grown and then uses that value.

                Other options:
                <b>-imageonly</b>       only resize the image file, not the <!-- a -->partition(s)<!-- /a --> inside of it.  This is the
                                 default for UDIF images (more partitions can then be added in the new free
                                 space).
                <b>-partitiononly</b>   only resize the <!-- a -->partition(s)<!-- /a --> in the image (including their embedded
                                 filesystems).  This is the default for NDIF images.  For a newly-created
                                 single partition disk image where the partition fills the image, the parti-<font color="#ffffff" class="whiteout">tion&nbsp;partition</font>
                                 tion can only be shrunk.  If there is an Apple_Free partition after an
                                 existing partition, that partition can be expanded into the space marked by
                                 the Apple_Free.  Shrinking a partition results in a larger Apple_Free par-<font color="#ffffff" class="whiteout">tition.&nbsp;partition.</font>
                                 tition.
                <b>-partitionNumber</b> <u>partitionNumber</u>
                                 specifies which partition to resize (UDIF only -- see HISTORY below).
                                 <u>partitionNumber</u> is 0-based, but, per <b>hdiutil</b> <b>pmap</b>, partition 0 is the par-<font color="#ffffff" class="whiteout">tition&nbsp;partition</font>
                                 tition map itself.

                <b>-growonly</b>        only allow the image to grow
                <b>-shrinkonly</b>      only allow the image to shrink
                <b>-nofinalgap</b>      allow resize to entirely eliminate the trailing free partition.  Such an
                                 image restored to a hard drive will not boot OS 9 nor will it allow OS X to
                                 boot on old-world (beige) machines.

                <b>-limits</b>          Displays the minimum, current, and maximum sizes (in 512 byte sectors) that
                                 could be passed given possible <b>-imageonly</b> or <b>-partitiononly</b> flags.  In
                                 addition to any filesystem constraints, the maximum size is limited by
                                 available disk space for UDRW images.  Does not modify the image.
                <b>-oldlimits</b>       behaves like <b>-limits</b> except that it reports the stretch sizes that OS X
                                 version 10.3 would have reported (useful if an image needs to be used with
                                 <a href="../man8/asr.8.html#//apple_ref/doc/man/8/asr">asr(8)</a> on an older system).

     <b>segment</b>
                <b>segment</b> <b>-o</b> <u>firstSegname</u> <b>-segmentCount</b> <u>#segs</u> <u>image</u> [opts]
                <b>segment</b> <b>-o</b> <u>firstSegname</u> <b>-segmentSize</b> <u>size</u> <u>image</u> [opts]
                segment a NDIF or UDIF disk image.  Segmented images work around limitations in file size
                which are sometimes imposed by filesystems, network protocols, or media.  Note: whether or
                not the segments are encrypted is determined by the options passed to <b>segment</b> and not by the
                state of the source image.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, <b>-tgtimagekey</b>, <b>-puppetstrings</b>, and
                <b>-plist</b>.

                Options:
                <b>-segmentCount</b> <u>segment</u><b>_</b><u>count</u>
                             Specify the number of segments.  Only one of <b>-segmentCount</b> or <b>-segmentSize</b> will
                             be honored.
                <b>-segmentSize</b> <u>segment</u><b>_</b><u>size</u>
                             Specify the segment size in sectors or in the style of <a href="../man8/mkfile.8.html#//apple_ref/doc/man/8/mkfile">mkfile(8)</a> (here unquali-<font color="#ffffff" class="whiteout">fied&nbsp;unqualified</font>
                             fied numbers are still sectors).  If the original image size is not an exact
                             multiple of the segment size, the last segment will be shorter than the others.
                             Only one of <b>-segmentCount</b> or <b>-segmentSize</b> will be honored.  Segmenting
                             read/write (UDRW) images is not supported (as of OS X 10.3).

                <b>-firstSegmentSize</b> <u>segment</u><b>_</b><u>size</u>
                             Specify the first segment size in sectors in the same form as for <b>-segmentSize</b>.
                             Used for multi-CD restores.
                <b>-restricted</b>  Make restricted segments for use in multi-CD restores.
                <b>-ov</b>          overwrite any existing files.  See notes with <b>create</b> about not being allowed to
                             overwrite attached images, etc.

     <b>pmap</b> <u>image</u><b>_</b><u>source</u> [<b>-options</b> <u>optstr</u>]
                display the partition map of an image or device.  <u>image</u><b>_</b><u>source</u> is either a plain file or
                special file (i.e. a /dev/disk entry).  See the NOTE ON DEV ENTRY ACCESS below.

                Common options: <b>-encryption</b>, <b>-stdinpass</b>, <b>-srcimagekey</b>, and <b>-shadow</b> with friends.

                <u>optstr</u> defaults to "xsSgcvk" and can be any combination of the following:

                      r raw       - process all without modification
                      x extended  - process 2K &amp; 512 entries and merge
                      s sectorize - return all quantities in sectors
                      S sort      - sort all entries by block number
                      g genfree   - account for all unmapped space
                      c combfree  - combine adjacent freespace entries
                      f fixfinal  - extend last partition to device end
                      v volume synthesize - synthesize single volumes as
                                            a single partition entry
                      k skip zero-length - skip zero length entries
                      K skip void/free   - skip all free &amp; void partitions
                      m merge free space - Merge small free partitions into                      a previous
                      partition if possible
                      i ignore shims     - ignore small free partitions                      caused by block
                      alignment

     <b>udifrez</b> [options] <u>image</u>
                Attaches resources (software license agreements, for example) to a disk image.

                You must specify one of the following options:
                <b>-xml</b> <u>inputfile</u>
                          Copy resources from an XML file.
                <b>-rsrcfork</b> <u>inputfile</u>
                          Copy resources from the resource fork of a file.

                You must also specify two files:
                <u>image</u>
                          the disk image you wish to modify.
                <u>inputfile</u>
                          a file containing the resources you wish to attach.

<b>EXAMPLES</b>
     Verifying:
           hdiutil verify myimage.img
               Verifies an image against its internal checksum.

     Segmenting:
           hdiutil segment -segmentSize 10m -o /tmp/aseg 30m.dmg
               creates aseg.dmg, aseg.002.dmgpart, and aseg.003.dmgpart

     Converting:
           hdiutil convert master.dmg -format UDTO -o master
               Converts master.dmg to a CD-R export image, appending           .toast to the filename.
           hdiutil convert CDmaster.dmg -format UDTO -o CDmaster.cdr
               Converts CDmaster.dmg to a CD-R export image named           CDmaster.cdr.
           hdiutil convert /dev/disk1 -format UDRW -o devimage
               Converts the disk /dev/disk1 to a read/write device image           file.  <a href="authopen.1.html#//apple_ref/doc/man/1/authopen">authopen(1)</a> will
     be used if read access to           /dev/rdisk1 is not available.  Note use of the block-special
               device.

     Burning:
           hdiutil burn myImage.dmg
               Burns the image to available optical media and verifies           the burn.
           hdiutil burn myRawImage.cdr -noverifyburn -noeject
               Burns the image without verifying the burn or ejecting           the disc.  Volumes will be
     mounted after burning.

     Creating a 50 MB encrypted image:
           hdiutil create -encryption -size 50m e.dmg -fs HFS+J

     Creating a 50 MB encrypted image protected with public key only:
           hdiutil create -encryption -size 50m e.dmg -fs HFS+J
              -pubkey F534A3B0C2AEE3B988308CC89AA04ABE7FDB5F30

     Creating a 50 MB encrypted image protected with public key and password:
           hdiutil create -encryption -size 50m e.dmg -fs HFS+J -agentpass
              -pubkey F534A3B0C2AEE3B988308CC89AA04ABE7FDB5F30

     Creating an encrypted single-partition (Apple Partition Map on PPC and GUID Partition Scheme on Intel)
     disk image without user interaction:
           echo -n pp|hdiutil create -encryption -stdinpass -size 9m sp.dmg

     Creating a "1 GB" SPARSE image (a 1 GB filesystem in a growable file):
           hdiutil create -type SPARSE -size 1g -fs HFS+ growableTo1g

     Creating a "1 GB" SPARSEBUNDLE (a 1 GB filesystem in a growable bundle):
           hdiutil create -type SPARSEBUNDLE -size 1g -fs HFS+ growableTo1g

     Creating a new mounted volume backed by an image:
           hdiutil create -volname Dick -size 1.3m -fs HFS -attach Moby.dmg

     Using a shadow file to attach a read-only image read-write to modify it, then convert it back to a
     read-only image. This method eliminates the time/space required to convert a image to read-write before
     modifying it.
           hdiutil attach -owners on Moby.dmg -shadow
             /dev/disk2   Apple_partition_scheme
             /dev/disk2s1 Apple_partition_map
             /dev/disk2s2 Apple_HFS               /Volumes/Moby

          ditto /Applications/Preview.app /Volumes/Moby

          hdiutil detach /dev/disk2

          hdiutil convert -format UDZO Moby.dmg -shadow

     Using makehybrid.  Given the files:
           albumlist.txt song2.wma     song4.m4a     song6.mp3     song8.mp3
           song1.wma     song3.m4a     song5.mp3     song7.mp3

     Create an HFS+/ISO9660/Joliet hybrid MusicBackup.iso with some common content between filesystems. The
     HFS+ filesystem, typically only visible on Macintosh systems, will not include the .wma files, but will
     show the .m4a and .mp3 files. The Joliet filesystem will not show the .m4a and .mp3 files, but will
     show the .wma files. The ISO9660 filesystem, typically the default filesystem for optical media on many
     platforms, will only show the .mp3 files. All three filesystems will include the "albumlist.txt" files.
     The -hide options take glob expressions as expanded by <a href="../man3/glob.3.html#//apple_ref/doc/man/3/glob">glob(3)</a>.

           hdiutil makehybrid -o MusicBackup.iso Music -hfs -iso -joliet \
           -hide-hfs 'Music/*.wma' -hide-joliet 'Music/{*.m4a,*.mp3}' \
           -hide-iso 'Music/*.{wma,m4a}'

     (see also <a href="drutil.1.html#//apple_ref/doc/man/1/drutil">drutil(1)</a> for making CD audio discs)

     Image from directory (new-style):
           hdiutil create -srcfolder mydir mydir.dmg

     Image from directory (10.1-style; of historical interest):
           du -s myFolder             # <a href="du.1.html#//apple_ref/doc/man/1/du">du(1)</a> will count resource forks
           10542
           hdiutil create -sectors 10642 folder     # add ~1% for filesytem
           hdid -nomount folder.dmg
           ...
           /dev/disk1s2            Apple_HFS
           newfs_hfs -v myFolderImage /dev/rdisk1s2
           hdiutil detach disk1
           hdid folder.dmg
           ...
           /dev/disk1s2            Apple_HFS         /Volumes/myFolderImage
           sudo mount -u -t hfs -o perm /dev/disk1s2 /Volumes/myFolderImage
           # optionally enable owners; sudo unneeded if manually mounted

           ditto -rsrcFork myFolder /Volumes/myFolderImage
           hdiutil detach disk1s2                  # all done
           hdiutil convert -format UDZO -o folder.z.dmg folder.dmg # compress

     Manually changing ownership settings of a read-only disk image:
           hdiutil attach myimage.dmg
           ...
           /dev/disk1s2            Apple_HFS         /Volumes/myVolume
           sudo mount -ur -t hfs -o perm /dev/disk1s2 /Volumes/myVolume
           # what if I prefer using /sbin/mount
           disktool -p disk1s2             # try 'diskutil unmount' on Panther
           mkdir /Volumes/myVolume

     Forcing a known image to attach:
           hdiutil attach -imagekey diskimage-class=CRawDiskImage myBlob.bar

<b>ENVIRONMENT</b>
     The following environment variables affect <b>hdiutil</b> and DiskImages:

     com_apple_hdid_verbose
                enable <b>-verbose</b> behavior for <b>attach</b>.

     com_apple_hdid_debug
                enable <b>-debug</b> behavior for <b>attach</b>.

     com_apple_hdid_nokernel
                similar to <b>-nokernel</b> but works even with, for example, <b>create</b> <b>-attach</b>.

     com_apple_hdid_kernel
                attempt to attach in-kernel first (like <b>attach</b> <b>-kernel</b>). In OS X 10.4.x, in-kernel was the
                default behavior for UDRW and SPARSE images.  On OS X 10.5, these and other kernel-compati-<font color="#ffffff" class="whiteout">ble&nbsp;kernel-compatible</font>
                ble images, including RAM-based images described in <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a>, will attach with a user process
                unless <b>attach</b> <b>--kernel</b> is used or the corresponding variable is set.  If an image is not
                "kernel-compatible" and <b>-kernel</b> is specified, the attach will fail.  (WARNING: ram:// images
                currently use wired memory when attached in-kernel).

     com_apple_diskimages_insecureHTTP
                disable SSL peer verification the same way <b>-insecurehttp</b> does.  Useful for clients of
                DiskImages such as <a href="../man8/asr.8.html#//apple_ref/doc/man/8/asr">asr(8)</a> which don't support a similar command line option.

<b>ERRORS</b>
     DiskImages uses many frameworks and can encounter many error codes.  In general, it tries to turn these
     errors numbers into localized strings for the user.  For background, <a href="../man2/intro.2.html#//apple_ref/doc/man/2/intro">intro(2)</a> is a good explanation of
     the initial error domain, the BSD errno values.  For debugging, <b>-verbose</b> should generally provide
     enough information to figure out what has gone wrong.  The following is a list of interesting errors
     that hdiutil may encounter:

     [ENXIO]            Device not configured.  This error is returned by DiskImages when its kernel driver
                        or framework helper cannot be contacted.  The former usually means the IOHDIXCon-<font color="#ffffff" class="whiteout">troller&nbsp;IOHDIXController</font>
                        troller kernel extension can't be loaded.  The latter usually means Foundation's
                        distributed objects RPC mechanism cannot be configured.  DO doesn't work under dead
                        mach bootstrap contexts such as exist in a reattached <a href="screen.1.html#//apple_ref/doc/man/1/screen">screen(1)</a> session.  Root users
                        can take advantage of <a href="../man8/StartupItemContext.8.html#//apple_ref/doc/man/8/StartupItemContext">StartupItemContext(8)</a> (in <u>/usr/libexec</u>) to access the startup
                        item mach bootstrap context.

     [EINVAL]           Invalid argument.  This error is used in many contexts and is often a clue that
                        <b>hdiutil</b>'s arguments are subtly non-sensical (e.g. an invalid layout name passed to
                        <b>create</b> <b>-layout</b>).

     [EFBIG]            File too large.  DiskImages uses this error explicitly when attempting to access a
                        disk image over HTTP that is too large for the server to support Range requests.
                        See <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a> for more details.

     [EAUTH]            Authentication error.  Used by DiskImages when <a href="../man3/libcurl.3.html#//apple_ref/doc/man/3/libcurl">libcurl(3)</a> is unable to verify its
                        SSL peer.  See <b>-insecurehttp</b> for more information.

     [EBUSY]            Resource busy.  Used if necessary exclusive access cannot be obtained.  For example,
                        returned by <b>create</b> <b>-ov</b> when the image is attached.

     EACCES vs. EPERM
                        EACCES and EPERM are subtly different.  The latter "operation not permitted" tends
                        to refer to an operation that cannot be performed, often due to an incorrect effec-<font color="#ffffff" class="whiteout">tive&nbsp;effective</font>
                        tive user ID.  On the other hand, "permission denied" tends to mean that a particu-<font color="#ffffff" class="whiteout">lar&nbsp;particular</font>
                        lar access mode prevented the operation.

<b>USING</b> <b>PERSISTENT</b> <b>SPARSE</b> <b>IMAGES</b>
     As of OS X 10.5, a more reliable, efficient, and scalable sparse format, UDSB (SPARSEBUNDLE), is recom-<font color="#ffffff" class="whiteout">mended&nbsp;recommended</font>
     mended for persistent sparse images as long as a backing bundle (directory) is acceptable.  SPARSE
     (USSP) images and shadow files were designed for intermediate use when creating other images (e.g.
     UDZO) when final image sizes are unknown.  As of OS X 10.3.2, partially-updated SPARSE images are prop-<font color="#ffffff" class="whiteout">erly&nbsp;properly</font>
     erly handled and are thus safe for persistent storage.  SPARSE images are not recommended for persis-<font color="#ffffff" class="whiteout">tent&nbsp;persistent</font>
     tent storage on versions of OS X earlier than 10.3.2 and should generally only be used when data sizes
     are truly unknown.  <b>resize</b> can resize an HFS+ filesystem and the image containing it.

     If more space is needed than is referenced by the hosted filesystem, <b>create</b> -stretch and <b>resize</b> can
     help to grow or shrink the filesystem in the image.  <b>compact</b> reclaims unused space in the image.
     Beware that sparse images can enhance the effects of any fragmentation in the filesystem.

     To prevent errors when a filesystem inside of a sparse image has more free space than the volume hold-<font color="#ffffff" class="whiteout">ing&nbsp;holding</font>
     ing the sparse image, HFS volumes inside sparse images will report an amount of free space slightly
     less than the amount of free space on the volume on which image resides.  The image filesystem cur-<font color="#ffffff" class="whiteout">rently&nbsp;currently</font>
     rently only behaves this way as a result of a direct <b>attach</b> action and will not behave this way if, for
     example, the filesystem is unmounted and remounted (e.g. with <b>unmount</b> and <b>mountvol</b>).

<b>NOTE</b> <b>ON</b> <b>DEV</b> <b>ENTRY</b> <b>ACCESS</b>
     Since any <u>/dev</u> entry can be treated as a raw disk image, it is worth noting which devices can be
     accessed when and how.  <u>/dev/rdisk</u> nodes are character-special devices, but are "raw" in the BSD sense
     and force block-aligned I/O.  They are closer to the physical disk than the buffer cache.  <u>/dev/disk</u>
     nodes, on the other hand, are buffered block-special devices and are used primarily by the kernel's
     filesystem code.

     It is not possible to read from a <u>/dev/disk</u> node while a filesystem is mounted from it, but anyone with
     read access to the appropriate <u>/dev/rdisk</u> node can use <b>hdiutil</b> verbs such as <b>fsid</b> on it.  The DiskIm-<font color="#ffffff" class="whiteout">ages&nbsp;DiskImages</font>
     ages framework will attempt to use <a href="authopen.1.html#//apple_ref/doc/man/1/authopen">authopen(1)</a> to open any device which it can't open (due to EACCES)
     for reading with <a href="../man2/open.2.html#//apple_ref/doc/man/2/open">open(2)</a>.  This may cause apparent hangs while trying to access <u>/dev</u> entries while
     logged in remotely (an authorization panel is waiting on console).

     Generally, the <u>/dev/disk</u> node is preferred for imaging devices (e.g.  <b>convert</b> or <b>create</b> <b>-srcfolder</b>
     operations), while <u>/dev/rdisk</u> is usable for the quick <b>pmap</b> or <b>fsid</b>.  In particular, converting the
     blocks of a mounted journaled filesystem to a read-only image will prevent the volume in the image from
     mounting (the journal will be permanently dirty).

<b>COMPATIBILITY</b>
     OS X 10.0 supported the disk images of Disk Copy 6 on Mac OS 9.  OS X 10.1 added sparse, encrypted, and
     zlib-compressed images.  These images will not be recognized on OS X 10.0 (or will attach read/write,
     possibly allowing for their destruction).  As the sparse, shadow, and encrypted formats have evolved,
     switches have been added to facilitate the creation of images that are compatible with older OS ver-<font color="#ffffff" class="whiteout">sions&nbsp;versions</font>
     sions (at the expense of the performance and reliability improvements offered by the format enhance-<font color="#ffffff" class="whiteout">ments).&nbsp;enhancements).</font>
     ments).  In particular, sparse images should not be expected to attach on versions of OS X older than
     that which created them.

     With OS X 10.2, the most common image formats went "in-kernel" (i.e. the DiskImages kernel extension
     served them without a helper process), image meta-data began being stored both as XML and in the embed-<font color="#ffffff" class="whiteout">ded&nbsp;embedded</font>
     ded resource fork, and the default Disk Copy.app "compressed" format became UDZO (breaking compatibil-<font color="#ffffff" class="whiteout">ity&nbsp;compatibility</font>
     ity with 10.0).  OS X 10.4 introduced bzip2 compression in the UDBZ format which provides smaller
     images (especially when combined with <b>makehybrid</b>) at the expense of backwards compatibility.

     In OS X 10.4.7, the resource forks previously embedded in UDIF images were abandoned entirely to avoid
     metadata length limitations imposed by resource fork structures.  As a result, UDIF images created on
     10.4.7 and later will not be recognized by either OS X 10.1 or OS X 10.0.  <b>flatten</b> can be used to cus-<font color="#ffffff" class="whiteout">tomize&nbsp;customize</font>
     tomize the type of metadata stored in the image.  OS X 10.5 introduced sparse bundle images which
     <b>compact</b> very efficiently.

<b>HISTORY</b>
     Disk images were first invented to electronically store and transmit representations of floppy disks
     for manufacturing replication.  These images of floppies are typically referred to as 'Disk Copy 4.2'
     images, in reference to the application that created these images and restored them to floppy disks.
     Disk Copy 4.2 images were block for block representations of a floppy disk, with no notion of compres-<font color="#ffffff" class="whiteout">sion.&nbsp;compression.</font>
     sion.  DART is a variant of the Disk Copy 4.2 format that supported compression of the floppy image.

     NDIF (New Disk Image Format) images were developed to replace the Disk Copy 4.2 and DART image formats
     and to support images larger than a floppy disk.  With NDIF and Disk Copy version 6, images could be
     "attached" as mass storage devices under Mac OS 9.  Apple Data Compression (ADC) -- which carefully
     optimizes for fast decompression -- was used to compress images that were typically created once and
     restored many times during manufacturing.

     UDIF (Universal Disk Image Format) device images picked up where NDIF left off, allowing images to rep-<font color="#ffffff" class="whiteout">resent&nbsp;represent</font>
     resent entire block devices and all the data therein: DDM, Apple partition scheme partition map, disk-<font color="#ffffff" class="whiteout">based&nbsp;diskbased</font>
     based drivers, etc.  For example, it can represent bootable CD's which can then be replicated from an
     image.  To be single-forked (vs. the dual-fork NDIF), it began storing its metadata in an embedded
     resource.  UDIF is the native image format for OS X.

     Raw disk images from other operating systems (e.g. .iso files) will be recognized as disk images and
     can be attached and mounted if OS X recognizes the filesystems.  They can also be burned with <b>hdiutil</b>
     <b>burn</b>.

<b>WHAT'S</b> <b>NEW</b>
     In OS X 10.3, most Disk Copy functionality moved to Disk Utility and a new background application
     DiskImageMounter handles attaching images.

     As of OS X 10.4, encrypted images (such as those used for FileVault) can be attached without a helper
     process and "image from folder" operations no longer require more disk space than the final image.
     Images containing exotic-to-CD filesystems (such as MS-DOS) can have their files burned with <b>burn</b>
     <b>-synthesize</b>.  Significant <b>hdiutil</b> changes in 10.4 include the addition of <b>-puppetstrings</b> to many verbs,
     <b>-anydevice</b> becoming the default for <b>burn</b>, and signal handlers so that hdiutil can try to clean up
     before quitting when canceled.  And in OS X 10.4.7, all read-only UDIFs (including the compressed
     types) began being handled by a helper process to free up resources in the kernel.

<b>SEE</b> <b>ALSO</b>
     <a href="authopen.1.html#//apple_ref/doc/man/1/authopen">authopen(1)</a>, <a href="../man8/hdid.8.html#//apple_ref/doc/man/8/hdid">hdid(8)</a>, diskutil, <!-- a -->ditto(8)<!-- /a -->, <a href="../man8/load_hdi.8.html#//apple_ref/doc/man/8/load_hdi">load_hdi(8)</a>, <a href="../man8/ioreg.8.html#//apple_ref/doc/man/8/ioreg">ioreg(8)</a>, <a href="drutil.1.html#//apple_ref/doc/man/1/drutil">drutil(1)</a>, <a href="../man8/ufs.util.8.html#//apple_ref/doc/man/8/ufs.util">ufs.util(8)</a>, <a href="../man8/msdos.util.8.html#//apple_ref/doc/man/8/msdos.util">msdos.util(8)</a>,
     <a href="../man8/hfs.util.8.html#//apple_ref/doc/man/8/hfs.util">hfs.util(8)</a>, <a href="../man8/diskarbitrationd.8.html#//apple_ref/doc/man/8/diskarbitrationd">diskarbitrationd(8)</a>, <u>/usr/sbin/disktool</u> (run with no arguments for usage),
     <u>/System/Library/CoreServices/DiskImageMounter.app</u>.

Mac OS X                          03 Aug 2007                         Mac OS X
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/hdiutil.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/hdiutil.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/hdiutil.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

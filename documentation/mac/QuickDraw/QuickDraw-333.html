<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>About Pictures (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING333></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-332.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-334.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-332.html"><B>Chapter 7 - Pictures</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING333-0></A>
<H1>About Pictures</H1>
 QuickDraw provides a simple set of routines for recording a collection of its drawing commands and then playing the collection back later. Such a collection of drawing commands (as well as its resulting image) is called a <I>picture</I>. A replayed collection of drawing commands results in the picture shown in <A HREF=#MARKER-9-11>Figure 7-1</A>.<A NAME=MARKER-2-10></A><P>
<A NAME=MARKER-9-11></A><B>Figure 7-1  A picture of a party hat</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/PICT-S-02.jpg"><BR>
 When you use the <CODE>OpenCPicture</CODE> function (or the <CODE>OpenPicture</CODE> function) to begin defining a picture, QuickDraw collects your subsequent drawing commands in a data structure of type <CODE>Picture</CODE>. You can define a picture by using any of the drawing routines described in this book--with the exception of the <CODE>CopyMask</CODE>, <CODE>CopyDeepMask</CODE>, <CODE>SeedFill</CODE>, <CODE>SeedCFill</CODE>, <CODE>CalcMask</CODE>, and <CODE>CalcCMask</CODE> routines.<P>
 By using the <CODE>DrawPicture</CODE> procedure, you can draw onscreen the picture defined by the instructions stored in the <CODE>Picture</CODE> record. Your application typically does not directly manipulate the information in this record. Instead, using a handle to a <CODE>Picture</CODE> record, your application passes this information to QuickDraw routines and Picture Utilities routines.<P>
<DL>
<DT><B>Note</B>
<DD>The <CODE>OpenPicture</CODE> function, which is similar to the <CODE>OpenCPicture</CODE> function, was created for earlier versions of system software. Because of the support for higher resolutions provided by the <CODE>OpenCPicture</CODE> function, you should use <CODE>OpenCPicture</CODE> instead of <CODE>OpenPicture</CODE> to create a picture.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING333-7></A>
<H2>Picture Formats</H2>
 Through QuickDraw's development, three different formats have evolved for the data contained in a <CODE>Picture</CODE> record. These formats are<P>
<UL>
<LI>The extended version 2 format, which is created by the <CODE>OpenCPicture</CODE> function on all Macintosh computers running System 7, including those supporting only basic QuickDraw. This format permits your application to specify resolutions for pictures in color or black and white. Generally, your application should use the <CODE>OpenCPicture</CODE> function and create pictures in the extended version 2 format.<A NAME=MARKER-2-12></A>
<LI>The version 2 picture format, which is created by the <CODE>OpenPicture</CODE> function on machines with Color QuickDraw when the current graphics port is a color graphics port. Pictures created in this format support color drawing operations at 72 dpi.<A NAME=MARKER-2-13></A>
<LI>The original format, the version 1 picture format, which is created by the <CODE>OpenPicture</CODE> function on machines without Color QuickDraw or whenever the current graphics port is a basic graphics port. Pictures created in this format support only black-and-white drawing operations at 72 dpi.<A NAME=MARKER-2-14></A><P>
</UL>
 The Pascal data structure for all picture formats is exactly the same. As shown in <BR><A HREF=#MARKER-9-15>Figure 7-2</A>, the <CODE>Picture</CODE> record begins with a <CODE>picSize</CODE> field and a <CODE>picFrame</CODE> field, followed by a variable amount of picture definition data.<P>
<B>Figure 7-2  <A NAME=MARKER-9-15></A>The <CODE>Picture</CODE> record</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/PICT-L-01.jpg"><BR>
 To maintain compatibility with the version 1 picture format, the <CODE>picSize</CODE> field was not changed for the version 2 or extended version 2 picture formats. The information in this field is useful only for version 1 pictures, which cannot exceed 32 KB in size. Version 2 and extended version 2 pictures can be much larger than the 32 KB limit imposed by the 2-byte <CODE>picSize</CODE> field. You should use the Memory Manager function <CODE>GetHandleSize</CODE> to determine the size of a picture in memory, the File Manager function <CODE>PBGetFInfo</CODE> to determine the size of a picture in a file of type <CODE>'PICT'</CODE>, and the Resource Manager function <CODE>MaxSizeResource</CODE> to determine the size of a picture in a resource of type <CODE>'PICT'</CODE>. (See <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>, <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I>, and <I>Inside Macintosh: <BR>More Macintosh Toolbox</I> for more information about these functions.)<P>
 The <CODE>picFrame</CODE> field contains the bounding rectangle for the picture. The <CODE>DrawPicture</CODE> procedure uses this rectangle to scale the picture when you draw it into a differently sized rectangle.<P>
 Compact drawing instructions and picture comments constitute the rest of this record.<P>
<A NAME=HEADING333-18></A>
<H2>Opcodes: Drawing Commands and Picture Comments</H2>
 <A NAME=MARKER-2-16></A>Following the <CODE>picSize</CODE> and <CODE>picFrame</CODE> fields, a <CODE>Picture</CODE> record contains data in the form of <B>opcodes</B>, which are values that the <CODE>DrawPicture</CODE> procedure uses to determine what object to draw or what mode to change for subsequent drawing. Your application generally should not read or write these opcodes directly but should instead use the QuickDraw routines described in this chapter for generating and processing the opcodes. (For your application's debugging purposes, these opcodes are listed in Appendix A at the back of this book.)<A NAME=MARKER-2-17></A><P>
 In addition to compact QuickDraw drawing commands, opcodes can also specify picture comments. Created with the <CODE>PicComment</CODE> procedure, a <B>picture comment</B> contains data or commands for special processing by output devices, such as PostScript printers. If your application requires capability beyond that provided by QuickDraw drawing routines, the <CODE>PicComment</CODE> procedure allows your application to pass data or commands directly to the output device. For example, picture comments enable highly sophisticated drawing applications that process opcodes directly to reconstruct drawing instructions--such as rotating text--not found in QuickDraw. Picture comments are usually stored in the definition of a picture or are included in the code an application sends to a printer driver.<A NAME=MARKER-2-18></A><P>
 Unless your application creates highly sophisticated graphics, you typically use QuickDraw commands when drawing to the screen and use picture comments to include special drawing commands for printers only. For example, your application can use picture comments to specify commands--for rotating text and graphics and for drawing dashed lines, fractional line widths, and smoothed polygons--that are supported by some printers but are not accessible through standard QuickDraw calls. These picture comments are described in detail in Appendix B, "Using Picture Comments for Printing," in this book.<A NAME=MARKER-2-19></A><A NAME=MARKER-2-529></A><A NAME=MARKER-2-21></A><A NAME=MARKER-9-564></A><P>
<A NAME=HEADING333-22></A>
<H2>Color Pictures in Basic Graphics Ports</H2>
 <A NAME=MARKER-2-23></A>You can use Color QuickDraw drawing commands to create a color picture on a computer supporting Color QuickDraw. If the user were to cut the picture and paste it into an application that draws into a basic graphics port, the picture would lose some detail, but should be sufficient for most purposes. This is how basic QuickDraw in System 7 draws an extended version 2 or version 2 picture into a basic graphics port:<P>
<UL>
<LI>QuickDraw maps foreground and background colors to those most closely approximated in basic QuickDraw's eight-color system. 
<LI>QuickDraw draws pixel patterns created with the <CODE>MakeRGBPat</CODE> procedure as bit patterns having approximately the same luminance as the pixel patterns.
<LI>QuickDraw replaces other color patterns with the bit pattern contained in the <CODE>pat1Data</CODE> field of the <CODE>PixPat</CODE> record. (The <CODE>pat1Data</CODE> field is initialized to 50 percent gray if the pattern is created with the <CODE>NewPixPat</CODE> function; this field is initialized from a <CODE>'ppat'</CODE> resource if the pattern is retrieved with the <CODE>GetPixPat</CODE> function.)
<LI>QuickDraw converts the pixel image to a bit image.
<LI>QuickDraw ignores the values set by the <CODE>HiliteColor</CODE> and <CODE>OpColor</CODE> procedures, as well as any changes made to the <CODE>chExtra</CODE> and <CODE>pnLocHFrac</CODE> fields of the original <CODE>CGrafPort</CODE> record.<A NAME=MARKER-2-24></A><P>
</UL>
<A NAME=HEADING333-29></A>
<H2>'PICT' Files, 'PICT' Resources, and the 'PICT' Scrap Format</H2>
 QuickDraw provides routines for creating and drawing pictures; to read pictures from and to write pictures to disk, you use File Manager and Resource Manager routines. To read pictures from and write pictures to the scrap, you use Scrap Manager routines.<P>
 Files consist of two forks: a data fork and a resource fork. A <B>data fork</B> is the part of a file that contains data accessed using the File Manager. This data usually corresponds to data entered by the user. A <B>resource fork</B> is the part of a file that contains the file's resources, which contain data accessed using the Resource Manager. This data usually corresponds to data--such as menu, icon, and control definitions--created by the application developer, but it may also include data created by the user while the application is running. <A NAME=MARKER-2-25></A><P>
 <A NAME=MARKER-8-6></A><A NAME=MARKER-8-9></A><A NAME=MARKER-8-15></A><A NAME=MARKER-2-560></A>A picture can be stored in the data fork of a file of type <CODE>'PICT'</CODE>. A picture can also be stored as a resource of type <CODE>'PICT'</CODE> in the resource fork of any file type. <P>
 Normally, an application sets the file type in the file's <CODE>FInfo</CODE> record when the application creates a new file; for example, the File Manager function <CODE>FSpCreate</CODE> takes a four-character file type--such as <CODE>'PICT'</CODE>--as a parameter. The data fork of a <CODE>'PICT'</CODE> file begins with a 512-byte header that applications can use for their own purposes. A <CODE>Picture</CODE> record follows this header. To read and write <CODE>'PICT'</CODE> files, your application should use File Manager routines.<P>
 You may find it useful to store pictures in the resource fork of your application or document file. For example, in response to the user choosing the About command in the Apple menu for your application, you might wish to display a window containing your company's logo. Or, if yours is a page-layout application, you might want to store all the images created by the user for a document as resources in the document file. <P>
 You can use high-level tools like the ResEdit resource editor, available from APDA, to create and store pictures as <CODE>'PICT'</CODE> resources for distribution with your files. To create <CODE>'PICT'</CODE> resources while your application is running, you should use Resource Manager routines. To retrieve a picture stored in a <CODE>'PICT'</CODE> resource, you can use the <CODE>GetPicture</CODE> function.<A NAME=MARKER-8-16></A><A NAME=MARKER-9-562></A><P>
 <A NAME=MARKER-2-36></A>For each application, the Scrap Manager maintains a storage area to hold the last data cut or copied by the user. The area that is available to your application for this purpose is called the <B>scrap.</B> The scrap can reside either in memory or on disk. All applications that support copy-and-paste operations read data from and write data to the scrap. The <CODE>'PICT'</CODE> scrap format is one of two standard scrap formats. (The other is <CODE>'TEXT'</CODE>.) To support copy-and-paste operations, your application should use Scrap Manager routines to read and write data in <CODE>'PICT'</CODE> scrap format.<A NAME=MARKER-2-38></A><P>
<A NAME=HEADING333-37></A>
<H2>The Picture Utilities</H2>
 <A NAME=MARKER-2-44></A>In addition to the QuickDraw routines for creating and drawing pictures, system software provides a group of routines called the <B>Picture Utilities</B> for examining the contents of pictures. You typically use the Picture Utilities before displaying a picture.<P>
 The Picture Utilities allow you to gather color, comment, font, resolution, and additional information about pictures. You might use the Picture Utilities, for example, to determine the 256 most-used colors in a picture, and then use the Palette Manager to make these colors available for the window in which your application needs to draw the picture. <P>
 You can also use the Picture Utilities to collect colors from pixel maps. You typically use this information in conjunction with the Palette Manager and the ColorSync Utilities to provide advanced color imaging features for your users. These features are described in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>.<P>
 The Picture Utilities also collect information from black-and-white pictures and bitmaps. The Picture Utilities are supported in System 7 even by computers running only basic QuickDraw. However, when collecting color information on a computer running only basic QuickDraw, the Picture Utilities return <CODE>NIL</CODE> instead of handles to <CODE>Palette</CODE> and <CODE>ColorTable</CODE> records. <B><A NAME=MARKER-2-45></A></B><P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DT><A HREF="QuickDraw-333.html#HEADING333-7">Picture Formats</A>
<DD>
<DT><A HREF="QuickDraw-333.html#HEADING333-18">Opcodes: Drawing Commands and Picture Comments</A>
<DD>
<DT><A HREF="QuickDraw-333.html#HEADING333-22">Color Pictures in Basic Graphics Ports</A>
<DD>
<DT><A HREF="QuickDraw-333.html#HEADING333-29">'PICT' Files, 'PICT' Resources, and the 'PICT' Scrap Format</A>
<DD>
<DT><A HREF="QuickDraw-333.html#HEADING333-37">The Picture Utilities</A>
<DD>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-332.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-334.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

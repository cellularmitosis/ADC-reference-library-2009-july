<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><!--Includes revisions to code listings--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note DV03: Boot Blocks</title><meta name="keywords" content="Mac OS 8 Boot Blocks system heap video pages"><meta name="Description" content="Technical Note DV03: Warning: The format and functionalityof the Boot Blocks will change in the future; dependenceon this information may cause your program to fail on futurehardware or with future System software. This Technical Notedescribes two previously undocumented features of the BootBlocks, how to change the system heap size, and how to allocatesecondary sound and video pages at boot time.">                                                                              <meta name="categories" content="Devices"><meta name="week-posted" content="Feb 23, 1987 - Mar 6, 1987"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002393" title="Boot Blocks"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/HardwareDrivers/idxMassStorageDevices-date.html" target="_blank">Hardware & Drivers > Storage</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note DV03</div>
<div id="pageheadsub">Boot Blocks</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                   <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc --><p id="menutext"><a href="#Section1">Changing System Heap Size</a><BR><BR><a href="#Section2">Secondary Sound and Video Pages</a><BR><BR><a href="#references">References</a><BR><BR>					<A HREF="#downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>		<td width=300 valign="top" align=left>	<!-- begin_intro_text --><P id = "introtext">There are two undocumented features of the Boot Blocks. This note will describehow they currently work.</p><p id = Introtext>The first two sectors of a bootable Macintosh disk are used to storeinformation on how to start up the computer. The blocks contain various parameters that the system uses to startup such as the name of the system file, the name of the Finder, the first application to run at boot time, the number of events to allow, etc.</p><BR><CENTER><TABLE BORDER=0 WIDTH=275><TR><td bgcolor="#E6E6E6" align=left><P id = "introtext"><B>Warning:</B><BR>The format and functionality of the Boot Blocks will change inthe future; dependence on this information may cause your program to fail onfuture hardware or with future System software.</P></TD></TR></TABLE></CENTER><BR><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [March 1987]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><a name="Section1"></a><h2>Changing System Heap Size</h2><p>The boot blocks dictate what size the system heap will be after booting. Anycommon sector editing program will allow you to change the data in the bootblocks. Changing the system heap size is accomplished by changing twoparameters in the boot blocks: the long word value at location <code>$86</code> inBlock 0 indicates the size of the system heap; the word value at location<code>$6</code> is the version number of the boot blocks. Changing the versionnumber to be greater than <code>$14</code> (<code>$15</code> is recommended) tells theROM to use the value at <code>$86</code> for the system heap size, otherwise thevalue at <code>$86</code> is ignored. The <code>$86</code> location only applies tocomputers with more than 128K of RAM.</p><P><A HREF="#top">Back to top</A></P><a name="Section2"></a><h2>Secondary Sound and Video Pages</h2><p>Another occasionally useful feature of the boot blocks is the ability tospecify that the secondary sound and video pages be allocated at boot time.This is done before a debugger is loaded, so the debugger will load below thealternate screen. This is useful for debugging software that uses the alternatevideo page, like page-flipping demos or games. To allocate the second video andsound buffers, change the two bytes starting at location <code>$8</code> in theboot blocks. Change the value (normally 0) to a negative number (<code>$FFFF</code>) to allocate both video and sound buffers. Change the value to a positive number (<code>$0001</code>) to allocate only the secondary sound buffer.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Warning:</B><BR>MacsBug may not work properly if you allocate additional pages for sound and video.</P></TD></TR></TABLE></CENTER><BR><P><A HREF="#top">Back to top</A></P><a name="references"></a><h2>References</h2><P>The Segment Loader</p><P><A HREF="#top">Back to top</A></P>         <a name="downloads"></a>         <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center>                                    <img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (46K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/dv_03.pdf">Download</A></P>               </TD>            </TR>         </TABLE>         <BR>                  <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/dv/dv_03.html%3Fid%3DDTS10002393-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/dv/dv_03.html%3Fid%3DDTS10002393-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/dv/dv_03.html%3Fid%3DDTS10002393-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>CFNetwork Framework Release Notes: CFNetwork Framework Release Notes for Mac OS X v10.5</title>
	<meta name="Generator" content="Gutenberg"/>
	<meta name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta name = "Copyright" content="Copyright 2009 AppleInc. All Rights Reserved."/>
	<meta name="IndexTitle" content="CFNetwork Framework Release Notes for Mac OS X v10.5"/>
	<meta name="xcode-display" content="render"/>
	<meta id="RESOURCES" content="../../../documentation/Resources" />
	<link rel="stylesheet" type="text/css" href="../../../documentation/Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/pedia.js"></script>
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000990" title="CFNetwork Framework Release Notes for Mac OS X v10.5"></a>
        <a name="top"></a>
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../index.html#//apple_ref/doc/uid/TP30000872-TP30000429" target="_top">Networking</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
                
        
        <a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_8" title="CFNetwork Framework Release Notes for Mac OS X v10.5"></a><h1>CFNetwork Framework Release Notes for Mac OS X v10.5</h1><p>CFNetwork is a framework which provides C APIs for common Internet protocols such as HTTP, FTP, and others.  These APIs are designed with portability, performance, and consistency in mind, and are available to Cocoa and Carbon applications.  CFNetwork is part of the CoreServices umbrella framework.  Simply linking with CoreServices will make the CFNetwork framework available for use.</p><p>This document describes the changes in CFNetwork since Mac OS X v10.4, Tiger. Note that you may be able to find more information on many of these changes in Apple's developer documentation.
</p>
<!-- This template is being used for both PDF and HTML. -->
<!-- TopicBook.pm currently relies on the element name bmini_toc. -->

    <h4>Contents:</h4>
    
    <p class="blockquote">

        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000990-DontLinkElementID_1" target="_top">CFError</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000990-DontLinkElementID_2" target="_top">Changes in CFNetworkErrors.h for Mac OS X v10.5</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000990-DontLinkElementID_3" target="_top">New API available for Mac OS X v10.5</a>
                
            <br/>
            
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_1" title="CFError"></a><h2>CFError</h2><p>CFError is a new CFType introduced in CoreFoundation for reporting errors; see the <em><a href="../../CoreFoundation/CoreFoundation.html#//apple_ref/doc/uid/TP40000994" target="_top">CoreFoundation Framework Release Notes</a></em> for more details on CFError.  In Leopard, CFNetwork has adopted CFError. As such, CFNetwork provides its own error domains, error codes and user info entries in a new header file named CFNetworkErrors.h  These new domains and error codes are listed below.  Do reference the header file CFNetworkErrors.h for the most up to date information.

</p><a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_2" title="Changes in CFNetworkErrors.h for Mac OS X v10.5"></a><h2>Changes in CFNetworkErrors.h for Mac OS X v10.5</h2><dl class="termdef">	<dt>Error domains:</dt><dd><p><code>const CFStringRef kCFErrorDomainCFNetwork;</code></p></dd><dt>Error keys and codes that can be obtained from the CFError's userInfo dictionary:</dt><dd><p>When an error of kCFHostErrorUnknown is returned, this key's value is set to a CFNumber containing the raw error value returned by getaddrinfo()</p><p><code>const CFStringRef kCFGetAddrInfoFailureKey;</code></p></dd><dt>When a SOCKS failure has occurred, this key's value is set to a CFString containing the status value returned by the SOCKS server.</dt><dd><p><code>const CFStringRef kCFSOCKSStatusCodeKey;</code></p></dd><dt>When an error of kCFSOCKSErrorUnsupportedServerVersion is returned, this key's value is set to a CFString containing the version number requested by the server.</dt><dd><p><code>const CFStringRef kCFSOCKSVersionKey;</code></p></dd><dt>When an error of kCFSOCKS5ErrorUnsupportedNegotiationMethod is returned, this key's value is set to a CFString containing the negotiation method requested by the server.</dt><dd><p><code>const CFStringRef kCFSOCKSNegotiationMethodKey;</code></p></dd><dt>When an error of kCFNetServicesErrorDNSServiceFailure is returned, this key's value is set to a CFNumber containing the value returned from DNS; interret it using the values dns_sd.h</dt><dd><p>const CFStringRef kCFDNSServiceFailureKey;</p></dd><dt>When an error of kCFFTPErrorUnexpectedStatusCode is returned, this key's value is set to a CFString containing the status code returned by the server.</dt><dd><p><code>const CFStringRef kCFFTPStatusCodeKey;</code></p></dd><dt>When an error of kCFFTPErrorUnexpectedStatusCode is returned, this key's value is set to a CFString containing the status code returned by the server.</dt><dd><p><code>const CFStringRef kCFFTPStatusCodeKey;</code></p></dd></dl><p>Please see <span class="content_text"><a href="../../../referencelibrary/CoreFoundation/index.html#//apple_ref/doc/uid/TP30000943-TP30000421" target="_top">Reference Library > Core Foundation</a></span> for more details on the CFError type.</p><a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_3" title="New API available for Mac OS X v10.5"></a><h2>New API available for Mac OS X v10.5</h2><a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_4" title="CFNetServices.h"></a><h3>CFNetServices.h</h3><p><code>SInt32 CFNetServiceGetPortNumber(CFNetServiceRef theService);</code></p><p>Query a Network Service for its port number. The function parameter, "theService", is the Network Service instance to be queried and it must be non-NULL. It returns an SInt32 containing the port number in host byte order.  On error, it returns -1 if the entity's port is not known (has not been resolved)
</p><a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_5" title="CFProxySupport.h"></a><h3>CFProxySupport.h</h3><p><code>CFArrayRef CFNetworkCopyProxiesForURL(CFURLRef url, CFDictionaryRef proxySettings);</code></p><p>Given an URL and a proxy dictionary, determines the ordered list of proxies that should be used to download the given URL.  The parameter, "url", specifies which CFURLRef to find proxy information for.  The "proxySettings" parameter is a dictionary describing the available proxy settings; the dictionary's format should match that described in and returned by SystemConfiguration.framework.  This function returns an array of dictionaries; each dictionary describes a single proxy.  </p><p></p><p><code>CFArrayRef CFNetworkCopyProxiesForAutoConfigurationScript(CFStringRef proxyAutoConfigurationScript, CFURLRef targetURL);</code></p><p>Thus function executes the script given in "proxyAutoConfigurationScript", using "targetURL" as input. It will return an array of proxies as returned by the script.</p><p></p><div class="codesample"><table><tr><td scope="row"><pre>CFRunLoopSourceRefCFNetworkExecuteProxyAutoConfigurationURL(CFURLRef proxyAutoConfigURL,<span></span></pre></td></tr><tr><td scope="row"><pre>                                         CFURLRef targetURL,<span></span></pre></td></tr><tr><td scope="row"><pre>CFProxyAutoConfigurationResultCallback cb,<span></span></pre></td></tr><tr><td scope="row"><pre>                                         CFStreamClientContext *clientContext);<span></span></pre></td></tr></table></div><p></p><p>Asynchronously downloads the autoconfiguration script from the given URL, then runs that script using "targetURL" as input.  Once completed, the callback "cb" is called via the run loop, passing the proxy array returned by the script.  Note that the caller must schedule the returned run loop source on a running run loop in order to receive the callback.</p><p>Proxy Type Keys - see CFProxySupport.h for more details</p><div class="codesample"><table><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeKey;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeNone;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeHTTP;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeHTTPS;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeSOCKS;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeFTP;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kCFProxyTypeAutoConfigurationURL;<span></span></pre></td></tr></table></div><p>Key for the proxy's hostname; value is a CFString.  Note that this may be an IPv4 or IPv6 dotted-IP string.</p><p><code>const CFStringRef kCFProxyHostNameKey;</code></p><p></p><p>Key for the proxy's port number; value is a CFNumber specifying the port on which to contact the proxy.</p><p><code>const CFStringRef kCFProxyPortNumberKey;</code></p><p></p><p>Key for the proxy's PAC file location; this key is only present if the proxy's type is    kCFProxyTypeAutoConfigurationURL.  Value is a CFURL specifying the location of a proxy auto-configuration file.</p><p><code>const CFStringRef kCFProxyAutoConfigurationURLKey;</code></p><p></p><p>Key for the username to be used with the proxy; value is a CFString.  Note that this key will only be present if the username could be extracted from the information passed in.  No external credential stores (like the Keychain) are consulted.</p><p><code>const CFStringRef kCFProxyUsernameKey;</code></p><p></p><p>Key for the password to be used with the proxy; value is a CFString.  Note that this key will only be present if the username could be extracted from the information passed in.  No external credential stores (like the Keychain) are consulted.</p><p><code>const CFStringRef kCFProxyPasswordKey;</code></p><a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_6" title="CFHTTPStream.h"></a><h3>CFHTTPStream.h</h3><p>Stream property key, for copy operations. The value is the CFHTTPMessage transmitted by the stream, after all modifications (such as for authentication, connection policy, or redirection) have been made.</p><p><code>const CFStringRef kCFStreamPropertyHTTPFinalRequest;</code></p><a name="//apple_ref/doc/uid/TP40000990-DontLinkElementID_7" title="CFHTTPMessage.h"></a><h3>CFHTTPMessage.h</h3><p>These two strings represent authentication methods that are supported in CFNetwork.</p><p><code>const CFStringRef kCFHTTPAuthenticationSchemeNTLM;</code></p><p><code>const CFStringRef kCFHTTPAuthenticationSchemeNegotiate;</code></p>

        <br/><br/> 
        
        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/releasenotes/Networking/RN-CFNetwork/index.html%3Fid%3DTP40000990-5.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/releasenotes/Networking/RN-CFNetwork/index.html%3Fid%3DTP40000990-5.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/releasenotes/Networking/RN-CFNetwork/index.html%3Fid%3DTP40000990-5.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
</body>
</html>
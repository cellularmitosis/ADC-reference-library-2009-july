<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Reading Resources Into Memory (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING49></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-48.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-50.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING49-0></A>
<H3><A NAME=MARKER-9-284></A>Reading Resources Into Memory</H3>
 <A NAME=MARKER-2-285></A><A NAME=MARKER-2-286></A>The routines described in this section allow your application to read resource data into memory. The <CODE>GetResource</CODE> and <CODE>Get1Resource</CODE> functions get a resource specified by a resource type and a resource ID. The <CODE>GetNamedResource</CODE> and <CODE>Get1NamedResource</CODE> functions get a resource specified by name. The <CODE>RGetResource</CODE> function searches the ROM-resident resources as well as the open resource forks. <P>
 The <CODE>SetResLoad</CODE> procedure enables and disables automatic loading of resource data into memory for routines that return handles to resources, and the <CODE>LoadResource</CODE> procedure reads resource data into memory for a purged resource or after you've called <CODE>SetResLoad</CODE> with the <CODE>load</CODE> parameter set to <CODE>FALSE</CODE>.<P>
 When your application requests a resource, the Resource Manager normally looks in the current resource file's resource map in memory. If it can't find an entry for the specified resource, the Resource Manager searches the resource maps for each open resource fork in the reverse order that the resource forks were opened. If it can't find an entry for the specified resource in any of these resource maps, the Resource Manager searches your application's resource map. If it can't find an entry for the specified resource in <BR>your application's resource map, the Resource Manager searches the resource map for the System file.<P>
 The Resource Manager determines whether or not to load the specified resource into memory according to the entry for that resource in the resource map. If the resource's resource map entry contains a valid handle, the Resource Manager returns that handle. If the value of the handle is <CODE>NIL</CODE>, the Resource Manager reads the resource data into memory.<P>
 Before reading the resource data into memory, the Resource Manager calls the Memory Manager to allocate a relocatable block for the resource data. The Memory Manager allocates the block, assigns a master pointer to the block, and returns to the Resource Manager a pointer to the master pointer. The Resource Manager then installs this handle in the resource map and also returns a handle to the resource. <P>
 If the resource's resource map entry contains an empty handle (a handle whose master pointer is set to NIL) and the value of the system global variable <CODE>ResLoad</CODE> is <CODE>TRUE</CODE>, the Resource Manager routines that get resources reallocate the resource's handle and read the resource data from disk back into memory.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>In certain situations, a Resource Manager routine can return an empty handle (a handle whose master pointer is set to <CODE>NIL</CODE>). For instance, if you've called <CODE>SetResLoad</CODE> with the <CODE>load</CODE> parameter set to <CODE>FALSE</CODE> and the resource data isn't already in memory, and then you call the <CODE>GetResource</CODE> function (or any of the other Resource Manager routines that get a resource), the Resource Manager routine returns an empty handle (a handle whose master pointer is set to <CODE>NIL</CODE>). This can also happen if you read resource data for a purgeable resource into memory and then call <CODE>SetResLoad</CODE> with the <CODE>load</CODE> parameter set to <CODE>FALSE</CODE>. If the resource data is later purged, when you call <CODE>GetResource</CODE> (or other routines that get a resource), the Resource Manager returns an empty handle. You should test for an empty handle in these situations. To make the handle a valid handle to resource data in memory, you can call the <CODE>LoadResource</CODE> procedure.<EM></EM>   <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="MoreToolbox-50.html#HEADING50-0">GetResource</A>
<DD>
<DT><A HREF="MoreToolbox-51.html#HEADING51-0">Get1Resource</A>
<DD>
<DT><A HREF="MoreToolbox-52.html#HEADING52-0">GetNamedResource</A>
<DD>
<DT><A HREF="MoreToolbox-53.html#HEADING53-0">Get1NamedResource</A>
<DD>
<DT><A HREF="MoreToolbox-54.html#HEADING54-0">RGetResource</A>
<DD>
<DT><A HREF="MoreToolbox-55.html#HEADING55-0">SetResLoad</A>
<DD>
<DT><A HREF="MoreToolbox-56.html#HEADING56-0">LoadResource</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-48.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-50.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<html><head><title>Mac OS X
 Manual Page For winbindd(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/winbindd" title="Mac OS X
 Manual Page for winbindd(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/winbindd"; name=winbindd(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
WINBINDD(8)                                                                                      WINBINDD(8)



<b>NAME</b>
       winbindd - Name Service Switch daemon for resolving names from NT servers

<b>SYNOPSIS</b>
       winbindd [-F] [-S] [-i] [-Y] [-d &lt;debug level&gt;] [-s &lt;smb config file&gt;] [-n]

<b>DESCRIPTION</b>
       This program is part of the <a href="../man7/samba.7.html#//apple_ref/doc/man/7/samba"><b>samba</b>(7)</a> suite.

       winbindd  is  a daemon that provides a number of services to the Name Service Switch capability found
       in most modern C libraries, to arbitary applications via PAM and ntlm_auth and to Samba itself.

       Even if winbind is not used for nsswitch, it still provides a service  to  smbd,  ntlm_auth  and  the
       pam_winbind.so  PAM  module, by managing connections to domain controllers. In this configuraiton the
       idmap uid and idmap gid parameters are not required. (This is known as `netlogon proxy only mode'.)

       The Name Service Switch allows user and system information to be obtained  from  different  databases
       services  such  as  NIS or DNS. The exact behaviour can be configured throught the <u>/etc/nsswitch.conf</u>
       file. Users and groups are allocated as they are resolved to a range of user and group ids  specified
       by the administrator of the Samba system.

       The service provided by winbindd is called `winbind' and can be used to resolve user and group infor-<font color="#ffffff" class="whiteout">mation&nbsp;information</font>
       mation from a Windows NT server. The service can also provide authentication services via an  associ-<font color="#ffffff" class="whiteout">ated&nbsp;associated</font>
       ated PAM module.

       The  <u>pam</u><b>_</b><u>winbind</u> module supports the <u>auth</u>, <u>account</u> and <u>password</u> module-types. It should be noted that
       the <u>account</u> module simply performs a getpwnam() to verify that the system can obtain a  uid  for  the
       user,  as  the  domain controller has already performed access control. If the <u>libnss</u><b>_</b><u>winbind</u> library
       has been correctly installed, or an alternate source of names configured, this should always succeed.

       The following nsswitch databases are implemented by the winbindd service:

       hosts
          This feature is only available on IRIX. User information traditionally stored in the <a href="../man5/hosts.5.html#//apple_ref/doc/man/5/hosts"><u>hosts(5)</u></a><u></u> file
          and used by <a href="../man3/gethostbyname.3.html#//apple_ref/doc/man/3/gethostbyname">gethostbyname(3)</a> functions. Names are resolved through the WINS server  or  by  broad-<font color="#ffffff" class="whiteout">cast.&nbsp;broadcast.</font>
          cast.

       passwd
          User information traditionally stored in the <a href="../man5/passwd.5.html#//apple_ref/doc/man/5/passwd"><u>passwd(5)</u></a><u></u> file and used by <a href="../man3/getpwent.3.html#//apple_ref/doc/man/3/getpwent">getpwent(3)</a> functions.

       group
          Group information traditionally stored in the <a href="../man5/group.5.html#//apple_ref/doc/man/5/group"><u>group(5)</u></a><u></u> file and used by <a href="../man3/getgrent.3.html#//apple_ref/doc/man/3/getgrent">getgrent(3)</a> functions.

       For  example,  the  following simple configuration in the <u>/etc/nsswitch.conf</u> file can be used to ini-<font color="#ffffff" class="whiteout">tially&nbsp;initially</font>
       tially resolve user and group information from <u>/etc/passwd</u> and <u>/etc/group</u> and then from  the  Windows
       NT server.




       passwd:         files winbind
       group:          files winbind
       ## only available on IRIX; Linux users should us libnss_wins.so
       hosts:          files dns winbind



       The  following  simple  configuration in the <u>/etc/nsswitch.conf</u> file can be used to initially resolve
       hostnames from <u>/etc/hosts</u> and then from the WINS server.


       hosts:         files wins


<b>OPTIONS</b>
       -F
          If specified, this parameter causes the main winbindd process to not daemonize,  i.e.  double-fork
          and  disassociate  with  the terminal. Child processes are still created as normal to service each
          connection request, but the main process does not exit. This operation mode is suitable  for  run-<font color="#ffffff" class="whiteout">ning&nbsp;running</font>
          ning  winbindd  under  process supervisors such as supervise and svscan from Daniel J. Bernstein's
          daemontools package, or the AIX process monitor.

       -S
          If specified, this parameter causes winbindd to log to standard output rather than a file.

       -V
          Prints the program version number.

       -s &lt;configuration file&gt;
          The file specified contains the configuration details required by the server. The  information  in
          this  file  includes  server-specific  information  such  as what printcap file to use, as well as
          descriptions of all the services that the server is to provide. See <u>smb.conf</u> for more information.
          The default configuration file name is determined at compile time.

       -d|--debuglevel=level
          <u>level</u> is an integer from 0 to 10. The default value if this parameter is not specified is zero.

          The higher this value, the more detail will be logged to the log files about the activities of the
          server. At level 0, only critical errors and serious warnings will be logged. Level 1 is a reason-<font color="#ffffff" class="whiteout">able&nbsp;reasonable</font>
          able  level  for  day-to-day running - it generates a small amount of information about operations
          carried out.

          Levels above 1 will generate considerable amounts of log data, and should only be used when inves-<font color="#ffffff" class="whiteout">tigating&nbsp;investigating</font>
          tigating  a  problem.  Levels  above  3  are designed for use only by developers and generate HUGE
          amounts of log data, most of which is extremely cryptic.

          Note that specifying this parameter here will override the

          parameter in the <u>smb.conf</u> file.

       -l|--logfile=logdirectory
          Base directory name for log/debug files. The extension <b>".progname"</b> will be appended (e.g. log.smb-<font color="#ffffff" class="whiteout">client,&nbsp;log.smbclient,</font>
          client, log.smbd, etc...). The log file is never removed by the client.

       -h|--help
          Print a summary of command line options.

       -i
          Tells winbindd to not become a daemon and detach from the current terminal. This option is used by
          developers when interactive debugging of winbindd is required.  winbindd  also  logs  to  standard
          output, as if the -S parameter had been given.

       -n
          Disable  caching. This means winbindd will always have to wait for a response from the domain con-<font color="#ffffff" class="whiteout">troller&nbsp;controller</font>
          troller before it can respond to a client and this thus makes things slower. The results will how-<font color="#ffffff" class="whiteout">ever&nbsp;however</font>
          ever  be more accurate, since results from the cache might not be up-to-date. This might also tem-<font color="#ffffff" class="whiteout">porarily&nbsp;temporarily</font>
          porarily hang winbindd if the DC doesn't respond.

       -Y
          Single daemon mode. This means winbindd will run as a single process (the  mode  of  operation  in
          Samba  2.2).  Winbindd's  default  behavior  is  to launch a child process that is responsible for
          updating expired cache entries.

<b>NAME</b> <b>AND</b> <b>ID</b> <b>RESOLUTION</b>
       Users and groups on a Windows NT server are assigned a security id (SID)  which  is  globally  unique
       when the user or group is created. To convert the Windows NT user or group into a unix user or group,
       a mapping between SIDs and unix user and group ids is required. This is one of the jobs that winbindd
       performs.

       As  winbindd  users  and  groups  are resolved from a server, user and group ids are allocated from a
       specified range. This is done on a first come, first served basis, although all  existing  users  and
       groups will be mapped as soon as a client performs a user or group enumeration command. The allocated
       unix ids are stored in a database and will be remembered.

       WARNING: The SID to unix id database is the only location where  the  user  and  group  mappings  are
       stored  by winbindd. If this store is deleted or corrupted, there is no way for winbindd to determine
       which user and group ids correspond to Windows NT user and group rids.

       See the

       or the old

       parameters in <u>smb.conf</u> for options for sharing this database, such as via LDAP.

<b>CONFIGURATION</b>
       Configuration of the winbindd daemon is done through  configuration  parameters  in  the  <a href="../man5/smb.conf.5.html#//apple_ref/doc/man/5/smb.conf"><b>smb.conf</b>(5)</a>
       file. All parameters should be specified in the [global] section of smb.conf.

          winbind separator

          idmap uid

          idmap gid

          idmap backend

          winbind cache time

          winbind enum users

          winbind enum groups

          template homedir

          template shell

          winbind use default domain

           winbind:  rpc only Setting this parameter forces winbindd to use RPC instead of LDAP to retrieve
          information from Domain Controllers.

<b>EXAMPLE</b> <b>SETUP</b>
       To setup winbindd for user and group lookups plus authentication from a domain controller  use  some-<font color="#ffffff" class="whiteout">thing&nbsp;something</font>
       thing like the following setup. This was tested on an early Red Hat Linux box.

       In <u>/etc/nsswitch.conf</u> put the following:




       passwd: files winbind
       group:  files winbind



       In <u>/etc/pam.d/*</u> replace the
        <u>auth</u> lines with something like this:




       auth  required    /lib/security/pam_securetty.so
       auth  required   /lib/security/pam_nologin.so
       auth  sufficient  /lib/security/pam_winbind.so
       auth  required    /lib/security/pam_unix.so                   use_first_pass shadow nullok



       <b>Note</b>
       The  PAM module pam_unix has recently replaced the module pam_pwdb. Some Linux systems use the module
       pam_unix2 in place of pam_unix.

       Note in particular the use of the <u>sufficient</u> keyword and the <u>use</u><b>_</b><u>first</u><b>_</b><u>pass</u> keyword.

       Now replace the account lines with this:

       account required /lib/security/pam_winbind.so

       The next step is to join the domain. To do that use the net program like this:

       net join -S PDC -U Administrator

       The username after the <u>-U</u> can be any Domain user that has administrator privileges  on  the  machine.
       Substitute the name or IP of your PDC for "PDC".

       Next  copy <u>libnss</u><b>_</b><u>winbind.so</u> to <u>/lib</u> and <u>pam</u><b>_</b><u>winbind.so</u> to <u>/lib/security</u>. A symbolic link needs to be
       made from <u>/lib/libnss</u><b>_</b><u>winbind.so</u> to <u>/lib/libnss</u><b>_</b><u>winbind.so.2</u>. If you are using an  older  version  of
       glibc then the target of the link should be <u>/lib/libnss</u><b>_</b><u>winbind.so.1</u>.

       Finally, setup a <a href="../man5/smb.conf.5.html#//apple_ref/doc/man/5/smb.conf"><b>smb.conf</b>(5)</a> containing directives like the following:




       [global]
            winbind separator = +
               winbind cache time = 10
               template shell = /bin/bash
               template homedir = /home/%D/%U
               idmap uid = 10000-20000
               idmap gid = 10000-20000
               workgroup = DOMAIN
               security = domain
               password server = *



       Now  start winbindd and you should find that your user and group database is expanded to include your
       NT users and groups, and that you can login to your unix box as a domain user, using the  DOMAIN+user
       syntax  for  the username. You may wish to use the commands getent passwd and getent group to confirm
       the correct operation of winbindd.

<b>NOTES</b>
       The following notes are useful when configuring and running winbindd:

       <a href="nmbd.8.html#//apple_ref/doc/man/8/nmbd"><b>nmbd</b>(8)</a> must be running on the local machine for winbindd to work.

       PAM is really easy to misconfigure. Make sure you know what you are doing when modifying PAM configu-<font color="#ffffff" class="whiteout">ration&nbsp;configuration</font>
       ration files. It is possible to set up PAM such that you can no longer log into your system.

       If  more than one UNIX machine is running winbindd, then in general the user and groups ids allocated
       by winbindd will not be the same. The user and group ids will only be valid for  the  local  machine,
       unless a shared

       is configured.

       If  the  the  Windows  NT SID to UNIX user and group id mapping file is damaged or destroyed then the
       mappings will be lost.

<b>SIGNALS</b>
       The following signals can be used to manipulate the winbindd daemon.

       SIGHUP
          Reload the <a href="../man5/smb.conf.5.html#//apple_ref/doc/man/5/smb.conf"><b>smb.conf</b>(5)</a> file and apply any parameter changes to the running  version  of  winbindd.
          This  signal  also clears any cached user and group information. The list of other domains trusted
          by winbindd is also reloaded.

       SIGUSR2
          The SIGUSR2 signal will cause winbindd to write status information to the winbind log file.

          Log files are stored in the filename specified by the log file parameter.

<b>FILES</b>
       <!-- a --><u>/etc/nsswitch.conf(5)</u><!-- /a --><u></u>
          Name service switch configuration file.

       /tmp/.winbindd/pipe
          The UNIX pipe over which clients communicate with the winbindd program. For security reasons,  the
          winbind  client  will  only  attempt  to connect to the winbindd daemon if both the <u>/tmp/.winbindd</u>
          directory and <u>/tmp/.winbindd/pipe</u> file are owned by root.

       $LOCKDIR/winbindd_privileged/pipe
          The UNIX pipe over which 'privileged' clients communicate with the winbindd program. For  security
          reasons,  access  to  some  winbindd  functions  - like those needed by the ntlm_auth utility - is
          restricted. By default, only users in the 'root' group will get this access, however the  adminis-<font color="#ffffff" class="whiteout">trator&nbsp;administrator</font>
          trator  may  change  the  group permissions on $LOCKDIR/winbindd_privileged to allow programs like
          'squid' to use ntlm_auth. Note that the winbind client will only attempt to connect  to  the  win-<font color="#ffffff" class="whiteout">bindd&nbsp;winbindd</font>
          bindd  daemon  if  both  the  <u>$LOCKDIR/winbindd</u><b>_</b><u>privileged</u>  directory and <u>$LOCKDIR/winbindd</u><b>_</b><u>privi</u>-<font color="#ffffff" class="whiteout">leged/pipe&nbsp;$LOCKDIR/winbindd_privileged/pipe</font>
          <u>leged/pipe</u> file are owned by root.

       /lib/libnss_winbind.so.X
          Implementation of name service switch library.

       $LOCKDIR/winbindd_idmap.tdb
          Storage for the Windows NT rid to UNIX user/group id mapping. The lock directory is specified when
          Samba  is  initially  compiled  using  the  <u>--with-lockdir</u>  option.  This  directory is by default
          <u>/usr/local/samba/var/locks</u> .

       $LOCKDIR/winbindd_cache.tdb
          Storage for cached user and group information.

<b>VERSION</b>
       This man page is correct for version 3.0 of the Samba suite.

<b>SEE</b> <b>ALSO</b>
       <!-- a --><u>nsswitch.conf(5)</u><!-- /a --><u></u>, <a href="../man7/samba.7.html#//apple_ref/doc/man/7/samba"><b>samba</b>(7)</a>, <a href="../man1/wbinfo.1.html#//apple_ref/doc/man/1/wbinfo"><b>wbinfo</b>(1)</a>, <!-- a --><b>ntlm_auth</b>(8)<!-- /a -->, <a href="../man5/smb.conf.5.html#//apple_ref/doc/man/5/smb.conf"><b>smb.conf</b>(5)</a>, <!-- a --><b>pam_winbind</b>(8)<!-- /a -->

<b>AUTHOR</b>
       The original Samba software and related utilities were created  by  Andrew  Tridgell.  Samba  is  now
       developed  by  the Samba Team as an Open Source project similar to the way the Linux kernel is devel-<font color="#ffffff" class="whiteout">oped.&nbsp;developed.</font>
       oped.

       wbinfo and winbindd were written by Tim Potter.

       The conversion to DocBook for Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML  4.2
       for Samba 3.0 was done by Alexander Bokovoy.




                                                                                                 WINBINDD(8)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/winbindd.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/winbindd.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/winbindd.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="GoLive CyberStudio 3">		<title>WOXMLDecoder (Java) </title>	</head>	<body bgcolor="white">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path -->		<a href="../XMLTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <a name="WOContext"></a><br>		<h1><font color="#000066"><a name="//apple_ref/java/cl/WOXMLDecoder"></a>WOXMLDecoder</font></h1>		<p><br>		<blockquote>			<b>Inherits from: </b>Object</blockquote>		<blockquote>			<b>Implements: </b>NSKeyValueCoding</blockquote>		<blockquote>			<b>Package: </b>com.webobjects.appserver.xml</blockquote>		<p>		<hr size="4">		<a name="DAFBHJBF"></a><br>		<h2>Class Description</h2>		<p>		<hr alt="">		<p>Use this class to construct (&quot;decode&quot;) an object from XML data. Decoding can take place either with or without a mapping model. The mapping model provides greater control over the decoding process and is typically used when you are encoding and decoding XML that is destined for, or originates from, an external source. When the WOXMLCoder and WOXMLDecoder are used as an archiving mechanism, the mapping model is usually not necessary. For more information on the mapping model, see the &quot;The Format of the Mapping Model&quot; (page 4) in the framework introduction.</p>		<p><br>		<a name="CHBEDHDE"></a>		<h2>Decoding XML Without a Mapping Model</h2>		<p>On its own, without a mapping model, <a href="#WOContext">WOXMLDecoder</a> is able to decode any object as long as the object and all of its children either implement the <a href="#WOContext">WOXMLDecoder</a> interface or are an instance of String, Number (or a subclass, provided that the subclass doesn't add instance variables), NSArray, NSDictionary, NSDate, NSData, or EOEnterpriseObject (or a subclass, providing that all instance variables are either attributes or relationships). To construct an object from XML data, invoke one of the <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a> methods. </p>		<p>Objects that implement the WOXMLCoding interface must also implement a single-argument constructor that takes a <a href="#WOContext">WOXMLDecoder</a> object as the single argument if they are to be decoded. Within this constructor you decode your object's instance variables using <a href="#WOContext">WOXMLDecoder</a>'s various <b>decode...ForKey</b> methods.</p>		<p>The following simple &quot;Person&quot; class implements both the single-argument constructor needed to decode objects of this class and the WOXMLCoding interface.</p>		<pre><blockquote>import com.webobjects.appserver.xml.*;import com.webobjects.foundation.*;import java.lang.*;import java.net.*;import java.math.*;public class Person extends Object implements WOXMLCoding {    String name;    boolean married;    int children;    public Person() {        name = &quot;John Smith&quot;;        married = true;        children = 2;    }    public void encodeWithWOXMLCoder(WOXMLCoder coder) {        coder.encodeObjectForKey(name, &quot;Name&quot;);        coder.encodeBooleanForKey(married, &quot;MaritalStatus&quot;);        coder.encodeIntForKey(children, &quot;NumberOfChildren&quot;);   }    // constructor required for decoding    public Person(WOXMLDecoder decoder) {        name = (String)decoder.decodeObjectForKey(&quot;Name&quot;);        married = decoder.decodeBooleanForKey(&quot;MaritalStatus&quot;);        children = decoder.decodeIntForKey(&quot;NumberOfChildren&quot;);    }}</blockquote></pre>		<p><br>		<p>See the XMLArchiving example (accessible through the WebObjects Info Center under Examples &gt; WebObjects &gt; Java &gt; XMLArchiving) for a more complete example.</p>		<p><br>		<a name="DAFGBIBJ"></a>		<h2>Decoding XML With a Mapping Model</h2>		<p>The mapping decoder gives you much greater control over the decoding process, since it operates under the direction of an XML-format mapping model that you create. This mapping model allows you to specify how XML elements and attributes are to be mapped to objects and object attributes (the mapping is performed using key-value coding). Because of the added power and flexibility the mapping model provides, the mapping decoder is particularly well-suited to decode XML that wasn't generated by the <a href="#WOContext">WOXMLDecoder</a>.</p>		<p>Suppose you had the following XML:</p>		<pre><blockquote>&lt;command quantity=&quot;10&quot;&gt;    &lt;customer&gt;&lt;name&gt;Ringle&lt;/name&gt;&lt;/customer&gt;    &lt;fullMovie name=&quot;Alien&quot;&gt;        &lt;date&gt;1979-10-25 00:00:00 -0700&lt;/date&gt;        &lt;cat&gt;Horror&lt;/cat&gt;        &lt;role name=&quot;Brett&quot;&gt;&lt;/role&gt;        &lt;role name=&quot;Kane&quot;&gt;&lt;/role&gt;        &lt;role name=&quot;Dallas&quot;&gt;&lt;/role&gt;        &lt;role name=&quot;Parker&quot;&gt;&lt;/role&gt;        &lt;role name=&quot;Lambert&quot;&gt;&lt;/role&gt;        &lt;role name=&quot;Ash&quot;&gt;&lt;/role&gt;        &lt;role name=&quot;Ripley&quot;&gt;&lt;/role&gt;    &lt;/fullMovie&gt;&lt;/command&gt;</blockquote></pre>		<p><br>		<p>Futher suppose that you wanted to decode the above XML into an object of the following class:</p>		<pre><blockquote>public class Command extends NSObject {    public EOGenericRecord movie;    public NSMutableDictionary customer;    public int qty;}</blockquote></pre>		<p><br>		<p>The WOXMLDecoder will do the job for you given the following mapping model:</p>		<pre><blockquote>&lt;model&gt;    &lt;entity name=&quot;Command&quot; xmlTag=&quot;command&quot;&gt;        &lt;property name=&quot;qty&quot; xmlTag=&quot;quantity&quot; attribute=&quot;YES&quot;/&gt;        &lt;property name=&quot;movie&quot; xmlTag=&quot;movie&quot;/&gt;        &lt;property name=&quot;customer&quot; xmlTag=&quot;customer&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;MyMovie&quot; xmlTag=&quot;movie&quot;&gt;        &lt;property name=&quot;title&quot; xmlTag=&quot;name&quot; attribute=&quot;YES&quot;/&gt;        &lt;property name=&quot;dateReleased&quot; xmlTag=&quot;date&quot;&gt;        &lt;property name=&quot;roles&quot; xmlTag=&quot;role&quot;&gt;        &lt;property name=&quot;category&quot; xmlTag=&quot;cat&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;com.webobjects.eocontrol.EOGenericRecord&quot; xmlTag=&quot;role&quot;&gt;        &lt;property name=&quot;roleName&quot; xmlTag=&quot;name&quot; attribute=&quot;YES&quot;/&gt;    &lt;/entity&gt;&lt;/model&gt;</blockquote></pre>		<p><br>		<p>The above is a simple example; see the RelatedLinks example (accessible through the WebObjects Info Center under Examples &gt; WebObjects &gt; Java &gt; RelatedLinks) for a more complete example illustrating the use of the WOXMLDecoder with a mapping model.</p>		<p><br>		<br>		<br>		<h2>Interfaces Implemented</h2>		<p>		<hr alt="">		<blockquote>			NSKeyValueCoding <code>takeValueForKey</code> <code>valueForKey</code> </blockquote>		<p><br>		<br>		<h2>Method Types</h2>		<p>		<hr alt="">		<blockquote>			Creating a WOXMLDecoder <a href="#//apple_ref/java/clm/WOXMLDecoder/decoder">decoder</a> <a href="#//apple_ref/java/clm/WOXMLDecoder/decoderWithMapping">decoderWithMapping</a> Decoding XML <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a> Reconstructing an object's contents without a mapping model <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeBooleanForKey">decodeBooleanForKey</a> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeDoubleForKey">decodeDoubleForKey</a> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeFloatForKey">decodeFloatForKey</a> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a> <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeObjectForKey">decodeObjectForKey</a> Working with the XML parser <a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a> <a href="#//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a> <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></blockquote>		<p><br>		<br>		<h2>Constructors</h2>		<p>		<hr alt="">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/WOXMLDecoder"></a>WOXMLDecoder</h3>		<p><code>protected WOXMLDecoder()</code></p>		<p>Description forthcoming. 		<hr width="25%" align="left">		<br>		<br>		<h2>Static Methods</h2>		<p>		<hr alt="">		<a name="DAFDCACF"></a><br>		<h3><a name="//apple_ref/java/clm/WOXMLDecoder/decoder"></a>decoder</h3>		<p><code>public static WOXMLDecoder <b>decoder</b>()</code></p>		<p>Creates and returns a new <a href="#WOContext">WOXMLDecoder</a> object.</p>		<p>		<hr width="25%" align="left">		<a name="DAFBCIDB"></a><br>		<h3><a name="//apple_ref/java/clm/WOXMLDecoder/decoderWithMapping"></a>decoderWithMapping</h3>		<p><code>public static WOXMLDecoder <b>decoderWithMapping</b>(String <em>mappingURL</em>)</code></p>		<p>Creates and returns a new <a href="#WOContext">WOXMLDecoder</a> object that decodes XML based upon the mapping model specified by <em>mappingURL</em>. For more information, see <a href="#DAFGBIBJ">&quot;Decoding XML With a Mapping Model&quot; (page 19)</a>.</p>		<p><br>		<table border="0" bgcolor="#e6e6e6">			<tr>				<td scope="row"><b>Note: </b>Windows NT uses backslashes where other systems use forward slashes. When prepending the &quot;file:&quot; URL prefix to a path such as is returned by WOResourceManager's <code>pathForResourceNamed</code> method, on Windows NT the prefix must be &quot;file:\\&quot; while on all other platforms the prefix must be &quot;file://&quot;. See the RelatedLinks example for one way to select the proper prefix based upon the underlying system.</td>			</tr>		</table><br>		<hr width="25%" align="left">		<br>		<br>		<h2>Instance Methods</h2>		<p>		<hr alt="">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/addObjectToCache"></a>addObjectToCache</h3>		<p><code>protected void addObjectToCache(_private._DecodingNode childNode, Object anObject)</code></p>		<p>For internal use only. 		<hr width="25%" align="left">		<a name="DAFCFEHI"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeBooleanForKey"></a>decodeBooleanForKey</h3>		<p><code>public boolean <b>decodeBooleanForKey</b>(String <em>key</em>)</code></p>		<p>Invoke this method from within in your single-argument constructor to set a boolean instance variable to the value of the key element within the XML being decoded. For example, to extract the marital status from the following XML:</p>		<pre><blockquote>&lt;element type=&quot;Person&quot; objectID=&quot;4&quot;&gt;    &lt;Name type=&quot;java.lang.String&quot; objectID=&quot;5&quot;&gt;John Smith&lt;/Name&gt;    &lt;MaritalStatus type=&quot;boolean&quot;&gt;True&lt;/MaritalStatus&gt;    &lt;NumberOfChildren type=&quot;int&quot;&gt;2&lt;/NumberOfChildren&gt;&lt;/element&gt;</blockquote></pre>		<p><br>		<p>You could use something similar to the following:</p>		<pre><blockquote>married = decoder.decodeBooleanForKey(&quot;MaritalStatus&quot;);</blockquote></pre>		<p><br>		<hr width="25%" align="left">		<a name="DAFFFFAE"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeDoubleForKey"></a>decodeDoubleForKey</h3>		<p><code>public double <b>decodeDoubleForKey</b>(String <em>key</em>)</code></p>		<p>Invoke this method from within in your single-argument constructor to set an instance variable of type double to the value of the key element within the XML being decoded.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a></p>		<p>		<hr width="25%" align="left">		<a name="DAFGCADJ"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeFloatForKey"></a>decodeFloatForKey</h3>		<p><code>public float <b>decodeFloatForKey</b>(String <em>key</em>)</code></p>		<p>Invoke this method from within in your single-argument constructor to set an instance variable of type int to the value of the key element within the XML being decoded.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey">decodeIntForKey</a></p>		<p>		<hr width="25%" align="left">		<a name="DAFGDGDE"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeIntForKey"></a>decodeIntForKey</h3>		<p><code>public int <b>decodeIntForKey</b>(String <em>key</em>)</code></p>		<p>Invoke this method from within in your single-argument constructor to set an instance variable of type int to the value of the key element within the XML being decoded. For example, to extract the number of children from the following XML:</p>		<pre><blockquote>&lt;element type=&quot;Person&quot; objectID=&quot;4&quot;&gt;    &lt;Name type=&quot;java.lang.String&quot; objectID=&quot;5&quot;&gt;John Smith&lt;/Name&gt;    &lt;MaritalStatus type=&quot;boolean&quot;&gt;True&lt;/MaritalStatus&gt;    &lt;NumberOfChildren type=&quot;int&quot;&gt;2&lt;/NumberOfChildren&gt;&lt;/element&gt;</blockquote></pre>		<p><br>		<p>You could use something similar to the following:</p>		<pre><blockquote>children = decoder.decodeIntForKey(&quot;NumberOfChildren&quot;);</blockquote></pre>		<p><br>		<hr width="25%" align="left">		<a name="DAFJCCCB"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeObjectForKey"></a>decodeObjectForKey</h3>		<p><code>public Object <b>decodeObjectForKey</b>(String <em>key</em>)</code></p>		<p>Invoke this method from within in your single-argument constructor to set an instance variable to a newly constructed object whose class and content depends upon the value of the key element within the XML being decoded. The object being decoded must meet the same criteria outlined in <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a>; if not, or if an error arises during the construction of the object, <b>decodeObjectForKey</b> throws a WOXMLException.</p>		<p>		<hr width="25%" align="left">		<a name="DAFIIEJA"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/decodeRootObject"></a>decodeRootObject</h3>		<p><code>public synchronized Object <b>decodeRootObject</b>(NSData <em>data</em>)</code></p>		<p><code>public synchronized Object <b>decodeRootObject</b>( org.xml.sax.InputSource <em>inputSource</em>)</code></p>		<p><code>public synchronized Object <b>decodeRootObject</b>(String <em>XMLfileURL</em>) </code></p>		<p>Decodes the indicated XML and constructs a corresponding object. <b>decodeRootObject</b> accepts XML either in an NSData object, in a file, or through an InputSource. If the XML resides within a file, <em>XMLfileURL</em> should be a URLthat identifies the file containing the XML. If the XML resides within a String object, use a StringReader object to supply an InputSource, like this:</p>		<pre><blockquote>stringReader = new StringReader(xmlString);is = new InputSource(stringReader);// invoke setEncoding (on the input source) if the XML contains multibyte charactersdecodedObject = (NSMutableArray)myDecoder.decodeRootObject(is);</blockquote></pre>		<p><br>		<p>In the above example, <code>xmlString</code> is a String object that contains the XML for an encoded NSMutableArray object.</p>		<p>Each object encoded within the XML must have a <tt>type</tt> attribute that indicates the object's class. Each encoded object must be one of the following:</p>		<ul>			<li>an instance of String 			<li>an instance of NSArray 			<li>an instance of NSDictionary 			<li>an instance of NSDate) 			<li>an instance of Number (or a subclass, providing that the subclass doesn't add instance variables) 			<li>an instance of NSData 			<li>an object that implements the WOXMLCoding interface 			<li>an instance of EOEnterpriseObject (or a subclass, providing that all instance variables are either attributes or relationships) 		</ul>		<p>Objects that implement the <a href="#WOContext">WOXMLDecoder</a> interface must also implement a special constructor; see <a href="#CHBEDHDE">&quot;Decoding XML Without a Mapping Model&quot; (page 18)</a> for more information and an example.</p>		<p>If the parser is unable to parse the supplied XML, <b>decodeRootObject</b> throws a WOXMLException that encloses either a SAXException or an IOException.</p>		<p>		<hr width="25%" align="left">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/getChildNodeType"></a>getChildNodeType</h3>		<p><code>protected String <b>getChildNodeType</b>(_private._DecodingNode <em>childNode</em>)</code></p>		<p>For internal use only. 		<hr width="25%" align="left">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/handler"></a>handler</h3>		<p><code>protected _private._DecodingHandler <b>handler</b>()</code></p>		<p>For internal use only. 		<hr width="25%" align="left">		<a name="DAFIAEGD"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/parser"></a>parser</h3>		<p><code>public org.xml.sax.Parser <b>parser</b>()</code></p>		<p>Returns the XML parser (instantiating one based upon the parser class name, if necessary). This method throws a ClassNotFoundException if the parser class cannot be located, and an InstantiationException or IllegalAccessException if the parser cannot be created. The default parser is the SAX parser (com.ibm.xml.parsers.SAXParser).</p>		<p>This method is invoked by <a href="#//apple_ref/java/instm/WOXMLDecoder/decodeRootObject">decodeRootObject</a>.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a>, <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></p>		<p>		<hr width="25%" align="left">		<a name="DAFFBEHE"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/parserClassName"></a>parserClassName</h3>		<p><code>public String <b>parserClassName</b>()</code></p>		<p>Returns the name of the XML parser's class. By default, this is &quot;com.ibm.xml.parsers.SAXParser&quot;.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a>, <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a></p>		<p>		<hr width="25%" align="left">		<a name="DAFJHFCH"></a><br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/setParserClassName"></a>setParserClassName</h3>		<p><code>public void <b>setParserClassName</b>(String <em>className</em>)</code></p>		<p>Sets <em>className</em> as the name of the class to be instantiated and used as the XML parser. The default parser class name is &quot;com.ibm.xml.parsers.SAXParser&quot;. This method must be invoked before the parser is instantiated (by the <a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a> method); once the parser has been instantiated, <a href="#//apple_ref/java/instm/WOXMLDecoder/setParserClassName">setParserClassName</a> has no effect. 		<p><b>See Also: </b><a href="#//apple_ref/java/instm/WOXMLDecoder/parser">parser</a>, <a href="#//apple_ref/java/instm/WOXMLDecoder/parserClassName">parserClassName</a></p>		<p>		<hr width="25%" align="left">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/takeValueForKey"></a>takeValueForKey</h3>		<p><code>public void <b>takeValueForKey</b>( Object, String)</code></p>		<p>Description forthcoming. 		<hr width="25%" align="left">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/toString"></a>toString</h3>		<p><code>public String <b>toString</b>()</code></p>		<p>Returns a String description of the receiver suitable for debugging purposes. 		<hr width="25%" align="left">		<br>		<h3><a name="//apple_ref/java/instm/WOXMLDecoder/valueForKey"></a>valueForKey</h3>		<p><code>public Object <b>valueForKey</b>(String <em>aKey</em>)</code></p>		<p>Description forthcoming. 		<hr width="25%" align="left">		<br>		<p>&copy; 2001 Apple Computer, Inc. (Last Published April 15, 2001)</p>		<p><br>		<a href="../XMLTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <!-- start of footer -->		<!--#include virtual="/includes/framesetfooter" -->		<!-- end of footer -->	</body></html>
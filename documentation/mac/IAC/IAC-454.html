<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PPCInform(IM:IC)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING454></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="IAC-453.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-455.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="IAC-2.html"><B>Interapplication Communication</B></A> / <BR><DD><A HREF="IAC-423.html"><B>Chapter 11 - Program-to-Program Communications Toolbox</B></A> / <A HREF="IAC-434.html"><B>PPC Toolbox Reference</B></A><BR><DL><DD><A HREF="IAC-439.html"><B>PPC Toolbox Routines</B></A> / <A HREF="IAC-453.html"><B>Receiving, Accepting, and Rejecting a Session</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING454-0></A>
<H3>PPCInform</H3>
 As long as a port has been opened, you can call the <CODE>PPCInform</CODE> function at any time. You can have any number of outstanding <CODE>PPCInform</CODE> functions.<P>
<PRE>
FUNCTION PPCInform (pb: PPCInformPBPtr; async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>pb</CODE>
<DD> A pointer to a <CODE>PPCInform</CODE> parameter block.
<DT><CODE>async</CODE>
<DD> A value that specifies whether the function is to be executed asynchronously (<CODE>TRUE</CODE>) or synchronously (<CODE>FALSE</CODE>). You should execute the <CODE>PPCInform</CODE> function asynchronously. 
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>PPCCompProcPtr<TD>Address of a completion routine<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>Result code<TR>
<TD>--><TD>portRefNum<TD>PPCPortRefNum<TD>Port reference number of this session<TR>
<TD><--<TD>sessRefNum<TD>PPCSessRefNum<TD>Session reference number of this session<TR>
<TD><--<TD>serviceType<TD>PPCServiceType<TD>Service type of this session<TR>
<TD>--><TD>autoAccept<TD>Boolean<TD>If <CODE>TRUE</CODE>, session is accepted automatically<TR>
<TD>--><TD>portName<TD>PPCPortPtr<TD>Pointer to <CODE>PPCPortRec</CODE>, may be <CODE>NIL</CODE><TR>
<TD>--><TD>locationName<TD>LocationNamePtr<TD>Pointer to <CODE>LocationNameRec</CODE>, may be <CODE>NIL</CODE><TR>
<TD>&nbsp;<TD>userName<TD>StringPtr<TD>Pointer to <CODE>Str32</CODE>, may be <CODE>NIL</CODE><TR>
<TD><--<TD>userData<TD>LongInt<TD>Application-specific data<TR>
<TD><--<TD>requestType<TD>PPCSessionOrigin<TD>Network or local request</TABLE>
</B><P>
<A NAME=HEADING454-6></A>
<H5>DESCRIPTION</H5>
 If your application calls the <CODE>PPCInform</CODE> function asynchronously, you must specify in the <CODE>ioCompletion</CODE> field either the address of a completion routine or <CODE>NIL</CODE>. If you set <CODE>ioCompletion</CODE> to <CODE>NIL</CODE>, you should poll the <CODE>ioResult</CODE> field of the PPC parameter block (from your application's main event loop) to determine whether the PPC Toolbox has completed the requested operation. A value in the <CODE>ioResult</CODE> field other than 1 indicates that the call is complete. Note that it is unsafe to poll the <CODE>ioResult</CODE> field at interrupt time since the PPC Toolbox may be in the process of completing a call. See <A HREF=IAC-428.html#MARKER-9-46>"PPC Toolbox Calling Conventions" beginning on page 11-14</A> for detailed information.<P>
 If you call the <CODE>PPCInform</CODE> function asynchronously, you must not change any of the fields in the parameter block until the call completes. The port name, location name, user name, and buffer pointed to by the record of type <CODE>PPCInformPBRec</CODE> are owned by the PPC Toolbox until the call completes. These objects must not be deallocated or moved in memory while the call is in progress. <P>
 You provide the PPC port identifier in the <CODE>portRefNum</CODE> field. A <CODE>PPCOpen</CODE> function returns the port identifier. The <CODE>sessRefNum</CODE> field returns a session identifier.<P>
 The <CODE>serviceType</CODE> field indicates the service type. For system software version 7.0, this field always returns the <CODE>ppcServiceRealTime</CODE> constant.<A NAME=MARKER-2-252></A><P>
 If you set the <CODE>autoAccept</CODE> field to <CODE>TRUE</CODE>, session requests are automatically accepted as they are received. When the <CODE>PPCInform</CODE> function completes execution with a <CODE>noErr</CODE> result code and you set the <CODE>autoAccept</CODE> field to <CODE>FALSE</CODE>, you need to accept or reject the session.<P>
<DL>
<DT><B>WARNING</B>
<DD>If the <CODE>PPCInform</CODE> function (with the <CODE>autoAccept</CODE> parameter set to <CODE>FALSE</CODE>) returns a <CODE>noErr</CODE> result code, you must call either the <CODE>PPCAccept</CODE> function or the <CODE>PPCReject</CODE> function. The computer trying to initiate a session using the <CODE>StartSecureSession</CODE> function or the <CODE>PPCStart</CODE> function waits (hangs) until the session attempt is either accepted or rejected, or until an error occurs.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 The <CODE>portName</CODE> field must contain <CODE>NIL</CODE> or a pointer to a PPC port record. If the <CODE>portName</CODE> field contains <CODE>NIL</CODE>, then the name of the PPC port that initiated the session is not returned. If the <CODE>portName</CODE> field points to a PPC port record, then the PPC port record is filled with the name of the PPC port that initiated the session when the <CODE>PPCInform</CODE> function completes.<P>
 The <CODE>locationName</CODE> field must contain <CODE>NIL</CODE> or a pointer to a location name record. If the <CODE>locationName</CODE> field contains <CODE>NIL</CODE>, then the location of the PPC port that initiated the session is not returned. If the <CODE>locationName</CODE> field points to a location name record, then the location name record is filled with the location of the PPC port that initiated the session when the <CODE>PPCInform</CODE> function completes. If the <CODE>locationKindSelector</CODE> field of the location name record returned is <CODE>ppcNoLocation</CODE>, then the location is the local machine. If the <CODE>locationKindSelector</CODE> field of the location name record returned is <CODE>ppcNBPLocation</CODE>, then the location is a remote machine designated by the location name record's <CODE>nbpEntity</CODE> field.<P>
 The <CODE>userName</CODE> field must contain <CODE>NIL</CODE> or a pointer to a 32-byte character string. If the <CODE>userName</CODE> field contains <CODE>NIL</CODE>, then the user name string is not returned. If the <CODE>userName</CODE> field points to a 32-byte character string, then the 32-byte character string is filled with the name of the user making the session request (if authenticated) when the <CODE>PPCInform</CODE> function completes.<P>
 When the <CODE>PPCInform</CODE> function completes, the <CODE>userData</CODE> field contains the user data provided by the application making the session request. This field is transparent to the PPC Toolbox. The application can send any data in this field.<P>
 When the <CODE>PPCInform</CODE> function completes, the <CODE>requestType</CODE> field contains either <CODE>ppcRemoteOrigin</CODE> or <CODE>ppcLocalOrigin</CODE>, depending on whether the session request is initiated by a computer across the network or by a port on the same computer.<P>
<A NAME=HEADING454-18></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>PPCInform</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_PPC<TD>$0003</TABLE>
<P>
 The registers on entry and exit for this routine are
<TABLE BORDER="0" CELLPADDING=3><TH colspan=2>Registers on entry<TR>
<TD>A0<TD>Pointer to a parameter block<TR>
<TD>D0<TD>Selector code</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING454-21></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>notInitErr<TD>-900<TD>PPC Toolbox has not been initialized yet<TR>
<TD>noPortErr<TD>-903<TD>Unable to open port or bad port reference number<TR>
<TD>noGlobalsErr<TD>-904<TD>System unable to allocate memory, critical error<TR>
<TD>portClosedErr<TD>-916<TD>The port was closed</TABLE>
</H5>
<A NAME=HEADING454-22></A>
<H5>SEE ALSO</H5>
 For an example of the use of the <CODE>PPCInform</CODE> function, see <A HREF=IAC-430.html#MARKER-9-132>Listing 11-8 on page 11-36</A>. <A NAME=MARKER-9-60></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="IAC-453.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-455.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="IAC-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

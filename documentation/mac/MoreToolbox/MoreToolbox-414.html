<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Writing a Translation Extension (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING414></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-413.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-415.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-402.html"><B>Chapter 7 - Translation Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING414-0></A>
<H1><A NAME=MARKER-9-124></A>Writing a Translation Extension</H1>
 <A NAME=MARKER-2-222></A>A translation extension is a component that works with Macintosh Easy Open to provide data recognition and translation capabilities. Because a translation extension is a component, it must be able to respond to the required request codes sent by the Component Manager. In addition, a translation extension can<P>
<UL>
<LI>communicate its translation capability to Macintosh Easy Open
<LI>identify the formats of specific documents and scraps
<LI>translate documents and scraps<P>
</UL>
 Translation extensions can identify and translate files, scraps, or both. You specify whether a translation extension handles files or scraps by setting bits in the component flags field in the component resource (see <A HREF=MoreToolbox-415.html#MARKER-9-137>"Creating a Translation Extension" beginning on page 7-19</A> for details).<A NAME=MARKER-2-126></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>The information in this section describes how to write translation extensions. If you simply want to make your application compatible with Macintosh Easy Open, see <A HREF=MoreToolbox-408.html#MARKER-9-59>"Using the Translation Manager" beginning on page 7-10</A>. If your application needs to determine dynamically which file types it can open, see <A HREF=MoreToolbox-420.html#MARKER-9-182>"Writing Application Translation Extensions" beginning on page 7-35</A>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Macintosh Easy Open and the Translation Manager specify file and scrap formats using the <CODE>FileType</CODE> and <CODE>ScrapType</CODE> data types:<P>
<PRE>
TYPE
   FileType                = OSType;   {file types}
   ScrapType               = ResType;  {scrap types}
</PRE>
 The <CODE>ScrapType</CODE> data type describes the format of data in memory. In general, the scrap types used by Macintosh Easy Open are identical to scrap types used by the Scrap Manager. There is, however, one notable exception. Macintosh Easy Open defines a new scrap type, <CODE>'stxt'</CODE>, to describe styled text. A scrap having format <CODE>'stxt'</CODE> is formed by appending the text (as contained in a scrap of format <CODE>'TEXT'</CODE>) to the style information (as contained in a scrap of format <CODE>'styl'</CODE>). This is necessary to have a single scrap to pass to your scrap translation extension.<A NAME=MARKER-2-127></A><A NAME=MARKER-2-128></A><A NAME=MARKER-2-129></A><A NAME=MARKER-2-130></A><A NAME=MARKER-2-131></A><P>
 <A NAME=MARKER-2-132></A>The <CODE>FileType</CODE> data type describes the format of a file. Often, but not always, the format of a file's data can be identified by inspecting the file's type, as maintained in the hierarchical file system catalog file (hereafter called the file's <B>catalog type<A NAME=MARKER-9-180></A></B>). For purposes of translation, however, it is sometimes necessary to use a more specific identification. For example, some developer might revise an application but retain the existing file type for documents the application creates. This could cause problems for translation extensions, which might be able to translate a specific version of the application's data format but not later ones. Similarly, some applications that create files on Macintosh computers (such as electronic mail programs or disk-mounting utilities) often use standard file types (such as <CODE>'TEXT'</CODE> or <CODE>'BINA'</CODE>) as the default new file type. Once again, your translation extension needs more information about the actual format of the data in the file before it can translate it to some other format.<P>
 To avoid problems with using a file's catalog type as the only indication of the file's data format, Macintosh Easy Open and the Translation Manager allow you to define a <B>translation file type<A NAME=MARKER-2-67></A>.</B> As just indicated, the catalog file type is often sufficient as the translation file type. However, Macintosh Easy Open always gives your translation extension the opportunity to inspect a particular file to see whether its catalog file type is in fact sufficient for translation purposes. If your extension can identify a more specific format, it should return that information to Macintosh Easy Open. (Ideally, application developers should assign catalog file types that can be used as translation file types.)<A NAME=MARKER-2-121></A><P>
 <A NAME=MARKER-9-136></A>The rest of this section describes how to create a file translation extension. You create a scrap translation extension in like fashion, substituting the scrap data types for the corresponding file data types.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="MoreToolbox-415.html#HEADING415-0">Creating a Translation Extension</A>
<DD>
<DT><A HREF="MoreToolbox-416.html#HEADING416-0">Dispatching to Translation Extension-Defined Routines</A>
<DD>
<DT><A HREF="MoreToolbox-417.html#HEADING417-0">Creating a Translation List</A>
<DD>
<DT><A HREF="MoreToolbox-418.html#HEADING418-0">Identifying Files</A>
<DD>
<DT><A HREF="MoreToolbox-419.html#HEADING419-0">Translating Files</A>
<DD>
<DT><A HREF="MoreToolbox-420.html#HEADING420-0">Writing Application Translation Extensions</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-413.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-415.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Secondary Interrupt Handlers</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.16b.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.18b.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.18d.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=4674"> </A><A NAME="40823"> </A>Secondary Interrupt Handlers</H1><P CLASS="T1.Text1"><A NAME="pgfId=4676"> </A><A NAME="marker=4675"> </A>Secondary interrupt handlers are the primary synchronization mechanism that a driver and its hardware interrupt handlers may use. Secondary interrupt handlers must conform to the interrupt execution environment rules, including absence of page faults, severe restrictions on using system services, and so on. For further information, see <A HREF="PCI_BOOK.141.html#10323" CLASS="XRef">Device Driver Execution Contexts</A>.</P><P CLASS="T1.Text1"><A NAME="pgfId=4680"> </A>The special characteristic of secondary interrupt handlers that makes them useful is that the operating system guarantees that at most one secondary handler is active at any time. This means that if you have a data structure that requires complex update operations and each of the operations uses secondary interrupt handlers to access or update the data structure, then all access to the data structure will be atomic even though hardware interrupts are enabled during the access.</P><P CLASS="T1.Text1"><A NAME="pgfId=4681"> </A>The DSL provides timers that can run secondary interrupt handlers when they expire. See <A HREF="PCI_BOOK.19b.html#14942" CLASS="XRef">Interrupt Timers</A>.</P><DIV><blockquote><p CLASS="NoteHead"><b><A NAME="pgfId=19657"> </A>Note</b></p><P CLASS="Note"><A NAME="pgfId=4685"> </A>Although interrupts are accepted during the execution of secondary interrupt handlers, no noninterrupt level execution can take place. This can lead to severely degraded system responsiveness. Use the secondary interrupt facility only when necessary. </P></blockquote><P CLASS="T1.Text1"><A NAME="pgfId=4689"> </A>Secondary interrupt handlers have the form shown in the next section.</P></DIV><DIV><blockquote><p CLASS="ImportantHead"><b><A NAME="pgfId=19659"> </A>IMPORTANT</b></p><P CLASS="I.Important"><A NAME="pgfId=4690"> </A>Secondary interrupts can't be used on the page fault path with Mac OS prior to Mac OS 8.5.  </P></blockquote></DIV><H2 CLASS="RoH.RoutineHeadingTOC"><A HREF="PCI_BOOK.18d.html#pgfId=4694" CLASS="Hypertext">SecondaryInterruptHandlerProc2</A></H2><H2 CLASS="H3.Heading3TOC"><A HREF="PCI_BOOK.18e.html#pgfId=4715" CLASS="Hypertext">Queuing Secondary Interrupt Handlers</A></H2><H2 CLASS="RoH.RoutineHeadingTOC"><A HREF="PCI_BOOK.18f.html#pgfId=4721" CLASS="Hypertext">QueueSecondaryInterruptHandler</A></H2><H2 CLASS="H3.Heading3TOC"><A HREF="PCI_BOOK.190.html#pgfId=4747" CLASS="Hypertext">Calling Secondary Interrupt Handlers</A></H2><H2 CLASS="RoH.RoutineHeadingTOC"><A HREF="PCI_BOOK.191.html#pgfId=4749" CLASS="Hypertext">CallSecondaryInterruptHandler2</A></H2><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.16b.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.18b.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.18d.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
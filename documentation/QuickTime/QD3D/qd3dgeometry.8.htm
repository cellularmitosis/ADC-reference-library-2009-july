<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Creating and Deleting Geometric Objects</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=3397"> </A>Creating and Deleting Geometric Objects</H1><P CLASS="T1.Text1"><A NAME="pgfId=3406"> </A><A NAME="marker=3398"> </A><A NAME="marker=3399"> </A>As you saw briefly in the chapter <A HREF="qd3dintroduction.htm" CLASS="XRef">&quot;Introduction to QuickDraw&nbsp;3D,&quot;</A> QuickDraw&nbsp;3D supports both immediate and retained modes of defining and rendering a model. Which mode you employ in any particular instance depends on the needs of your application. As suggested earlier, if much of the model remains unchanged from frame to frame, you should use retained mode imaging to create and draw the model. If, however, many parts of the model do change from frame to frame, you should use immediate mode imaging, creating and rendering a model on a shape-by-shape basis.</P><P CLASS="T1.Text1"><A NAME="pgfId=3411"> </A><A HREF="qd3dgeometry.8.htm#34947" CLASS="XRef">Listing&nbsp;5</A> illustrates how to create a retained box.<A NAME="marker=3410"> </A></P><P CLASS="L.Listing"><A NAME="pgfId=3413"> </A>Listing&nbsp;5<A NAME="34947"> </A>Creating a retained box</P><CODE CLASS="Cv.Code"><A NAME="pgfId=39386"> </A>TQ3GeometryObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBox;<BR>TQ3BoxData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBoxData;<BR><BR>Q3Point3D_Set(&amp;myBoxData.origin, 1.0, 1.0, 1.0);<BR>Q3Vector3D_Set(&amp;myBoxData.orientation, 0, 2.0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.minorAxis, 2.0, 0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.majorAxis, 0, 0, 2.0);<BR>myBox = Q3Box_New(&amp;myBoxData);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3418"> </A>Once the code in <A HREF="qd3dgeometry.8.htm#34947" CLASS="XRef">Listing&nbsp;5</A> has been executed, the variable <TT CLASS="cv">myBox</TT> contains a reference to the new box. You can then reuse or dispose of the <TT CLASS="cv">myBoxData</TT> structure, because all subsequent operations on the retained box are performed using <TT CLASS="cv">myBox</TT>. For example, to submit the box for drawing, picking, bounding, or writing, you can execute the following line of code inside a rendering, picking, bounding, or writing loop:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=39390"> </A>myStatus = Q3Object_Submit(myBox, myView);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3420"> </A>To dispose of the retained box, you can call the <TT CLASS="cv">Q3Object_Dispose</TT> function, as follows:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=39394"> </A>myStatus = Q3Object_Dispose(myBox);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3426"> </A><A HREF="qd3dgeometry.8.htm#19976" CLASS="XRef">Listing&nbsp;6</A> illustrates how to create an immediate box.<A NAME="marker=3425"> </A></P><P CLASS="L.Listing"><A NAME="pgfId=3428"> </A>Listing&nbsp;6<A NAME="19976"> </A>Creating an immediate box</P><CODE CLASS="Cv.Code"><A NAME="pgfId=39398"> </A>TQ3BoxData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBoxData;<BR><BR>Q3Point3D_Set(&amp;myBoxData.origin, 1.0, 1.0, 1.0);<BR>Q3Vector3D_Set(&amp;myBoxData.orientation, 0, 2.0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.minorAxis, 2.0, 0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.majorAxis, 0, 0, 2.0);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3433"> </A>As you can see, you do not have to call any QuickDraw&nbsp;3D routine to create an immediate box; instead, you simply define the box data in a structure of type <TT CLASS="cv">TQ3BoxData</TT>. To draw an immediate box, you call the <TT CLASS="cv">Q3Box_Submit</TT> function (inside a rendering loop), as follows:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=39402"> </A>myStatus = Q3Box_Submit(myBox, myView);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3435"> </A>Because you didn't create any retained entity, you do not need to dispose of the immediate box.<A NAME="marker=3436"> </A><A NAME="marker=3437"> </A></P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
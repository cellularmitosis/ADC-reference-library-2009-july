<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>PowerMac G4: Architecture</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Architecture"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000304" title="Architecture"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../../HardwareDrivers/index.html#//apple_ref/doc/uid/TP30000440-TP40003576" target="_top">Hardware &amp; Drivers</a> &gt; <a href="../../../../../HardwareDrivers/AppleHardware-date.html#//apple_ref/doc/uid/TP30000440-TP40003576-TP30000519" target="_top">Apple Hardware</a> &gt; <a href="../0Preface/jos_pref.html#//apple_ref/doc/uid/TP30000302-BCIEAFGH">PowerMac G4</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../1Introduction/jos_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../3Input-Output/jos_innout.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000304-TPXREF101" title="Architecture"></a><h1>Architecture</h1><p>This chapter describes the architecture of the PowerMac G4 computer. It includes information about the major components on the logic boards: the microprocessor, the other main ICs, and the buses that connect them to each other and to the I/O interfaces. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF102">Block Diagram and Buses</a>
				
			<br/>
			
        
			
			
				<a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF103">Processor Module</a>
				
			<br/>
			
        
			
			
				<a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF107">U2 Bridge and Memory Controller</a>
				
			<br/>
			
        
			
			
				<a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-BAJEEHBJ">PCI USB Controller</a>
				
			<br/>
			
        
			
			
				<a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF115">KeyLargo I/O Controller</a>
				
			<br/>
			
        
			
			
				<a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF125">Graphics Cards</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000304-TPXREF102" title="Block Diagram and Buses"></a><h2>Block Diagram and Buses</h2><p><span class="content_text"><a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF127">Figure 2-1</a></span> is a simplified block diagram of the PowerMac G4 computer. The diagram shows the main ICs and the buses that connect them together.<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_37"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_38"></a></p><p>The architecture of the PowerMac G4 computer is based on the PowerPC G4 microprocessor and two custom ICs: the U2 memory controller and bus bridge and the KeyLargo I/O controller. </p><br/><div><a name="//apple_ref/doc/uid/TP30000304-TPXREF127" title="Figure 2-1Simplified block diagram  "></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>Simplified block diagram  </p><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_39"></a><img src = "../art/jos01.gif" alt = "Simplified block diagram" width="458" height="576"></div><br/><p>The PowerMac G4 computer has the following data buses, not counting the processor’s dedicated interface to the backside cache. </p><ul class="ul"><li class="li"><p>Processor bus: 133/167 MHz, 64-bit bus connecting the processor module to the U2 IC<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_40"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_41"></a></p></li><li class="li"><p>Memory bus: 133/167 MHz, 64-bit bus connecting the main DDR SDRAM memory to the U2 IC<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_42"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_43"></a></p></li><li class="li"><p>AGP-4x bus: 66 MHz, 32-bit bus connecting the AGP graphics card to the U2 IC<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_44"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_45"></a></p></li><li class="li"><p>PCI bus: 33 MHz, 64-bit bus supports the KeyLargo I/O controller, the boot ROM, the PCI slots, the U2 IC, and the USB controller<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_46"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_47"></a></p></li><li class="li"><p>Ultra ATA/100 and ATA/66 buses: supports internal hard drive connectors</p></li><li class="li"><p>EIDE bus: Multiword DMA Mode 2 on ATA port 0 provides 16.7 MB/s to internal CD and DVD drive connectors </p></li></ul><p>The remainder of this chapter describes the architecture of the processor module, the U2 memory controller and bridge IC, the KeyLargo I/O controller IC, and the USB controllers. </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF103" title="Processor Module"></a><h2>Processor Module</h2><p>The processor module is a separate logic board that, depending on the configuration, contains one or two PowerPC G4 microprocessors and their external memory caches. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_48"></a></p><p>The processor module is connected to the main logic board by a 300-pin connector. To achieve the required level of performance, the signal lines that connect the processor module and the main logic board are carefully matched in length, loading, and impedance. </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF104" title="PowerPC G4 Microprocessor"></a><h3>PowerPC G4 Microprocessor</h3><p>The PowerPC G4 microprocessors used in the PowerMac G4 computer have many powerful features, including a pipelined system bus called MaxBus. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_49"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_50"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_51"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_52"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_53"></a></p><p>The PowerPC G4 used in the PowerMac G4 computer has the following features:</p><ul class="spaceabove"><li class="li"><p>32-bit PowerPC implementation </p></li><li class="li"><p>superscalar PowerPC core </p></li><li class="li"><p>Velocity Engine (AltiVec technology): 128-bit-wide vector execution unit </p></li><li class="li"><p>high bandwidth MaxBus with 36 address bits and 64 data bits</p></li><li class="li"><p>fully symmetric multiprocessing capability </p></li><li class="li"><p>dual 32 KB instruction and data caches (level 1)</p></li><li class="li"><p>built-in 256 KB backside L2 cache</p></li><li class="li"><p>support for up to 2 MB backside L3 cache </p></li><li class="li"><p>on-chip L3 tag storage </p></li></ul><p>For more information, see the reference at <span class="content_text"><a href="../aReferences/jos_refs.html#//apple_ref/doc/uid/TP30000307-TPXREF102">“PowerPC G4 Microprocessor.”</a></span> </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF105" title="Cache Memory"></a><h3>Cache Memory</h3><p>In addition to the 256 KB level 2 (L2) cache built into the PowerPC G4 microprocessor, the processor module also has an external level 3 (L3) cache for each microprocessor. The L3 cache consists of 1 or 2 MB of double data rate (DDR) SDRAM. The clock frequency and clock ratio for the L3 cache are shown below.</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p></p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Clock Frequency (MHz)</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Clock Ratio</p></th></tr><tr><td  scope="row"><p>1 GHz uP</p></td><td ><p>250</p></td><td ><p>4:1</p></td></tr><tr><td  scope="row"><p>1.25 GHz uP</p></td><td ><p>250</p></td><td ><p>5:1 </p></td></tr><tr><td  scope="row"><p>1.42 GHz uP</p></td><td ><p>236</p></td><td ><p>6:1</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000304-TPXREF107" title="U2 Bridge and Memory Controller"></a><h2>U2 Bridge and Memory Controller</h2><p>The U2 custom IC is at the heart of the PowerMac G4 computer. It provides the bridging functionality between the processors, the memory system, the PCI-based I/O system, the AGP slot, and the FireWire and Ethernet interfaces. It also provides the Ultra ATA/100 disk drive interface. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_54"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_55"></a></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF108" title="Processor Bus"></a><h3>Processor Bus</h3><p>The processor bus is a 133 or 167 MHz bus connecting the processor module to the U2 IC. The bus has 64-bit wide data and 32-bit wide addresses. The bus uses MaxBus protocols, supported by the U2 IC. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_56"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_57"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_58"></a></p><p>The MaxBus protocol includes enhancements that improve bus efficiency and throughput over the 60x bus. The enhancements include </p><ul class="spaceabove"><li class="li"><p>out-of-order completion </p></li><li class="li"><p>address bus streaming</p></li><li class="li"><p>intervention</p></li></ul><p>Out-of-order completion allows the memory controller to optimize the data bus efficiency by transferring whichever data is ready, rather than having to pass data across the bus in the order the transactions were posted on the bus. This means that a fast DDR SDRAM read can pass a slow PCI read, potentially enabling the processor to do more before it has to wait on the PCI data. </p><p>Address-bus streaming allows a single master on the bus to issue multiple address transactions back-to-back. This means that a single master can post addresses at the rate of one every two clocks, rather than one every three clocks, as it is in the 60x bus protocol.</p><p>Intervention is a cache-coherency optimization that improves performance for dual-processor systems. If one processor modifies some data, that data first gets stored only in that processor’s cache. If the other processor then wants that data, it needs to get the new modified values. In previous systems, the first processor must write the modified data to memory and then the second processor can read the correct values from memory. With intervention, the first processor sends the data directly to the second processor, reducing latency by a factor of ten or more. </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF109" title="Main Memory Bus"></a><h3>Main Memory Bus</h3><p><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_59"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_60"></a>For the 1 GHz PowerMac G4 computer, the main memory bus connects the main memory to the U2 IC via a 133 MHz, 64-bit data bus. For the 1.25 GHz or 1.42 GHz configurations, the main memory bus connects the main memory to the U2 IC via a 167 MHz, 64-bit data bus. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_61"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_62"></a>For the 1 GHz computer, the minimum speed DDR is 2x133 MHz, which is DDR 266 (PC2100). <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_63"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_64"></a>For the 1.25 GHz and 1.42 GHz computers, the minimum speed DDR is 2x167 MHz, which is DDR 333 (PC2700).</p><p>Main memory is provided by up to four 133 MHz DDR 266 or 167 MHz DDR 333 DIMMs using double data rate SDRAM devices. Supported DIMM sizes are 256 and 512 MB (also is 128 MB- and 1GB-capable). The memory slots accept four 512-MB DIMMs (also is capable of 2-1GB) for a maximum memory size of 2 GB. For more information about memory DIMMs, see <span class="content_text"><a href="../4Expansion/jos_expan.html#//apple_ref/doc/uid/TP30000306-TPXREF102">“RAM Expansion.”</a></span></p><p>The address bus is connected to all four DIMM slots, so the total number of address bus loads to the controller IC can vary from one to eight. The data bus is connected through four switches, one for each DIMM slot. Only one switch is selected at a time, so the data bus presents either one or two loads, depending on whether the selected DIMM has one or two banks.  The data switches have no drive capability; they are either low or high impedance, depending on whether they are selected or not.</p><a name="//apple_ref/doc/uid/TP30000304-TPXREF129" title="Ultra ATA/100 Interface"></a><h3>Ultra ATA/100 Interface</h3><p>The U2 IC implements a single Ultra ATA/100 hard disk interface and can accommodate one or two internal hard drives.<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_65"></a> For information about the drive bays, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF118">“Hard Disk Drives.”</a></span> </p><p>The KeyLargo IC provides DB-DMA (descriptor-based direct memory access) support for the Ultra ATA/66 interface. </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF110" title="Accelerated Graphics Port Bus"></a><h3>Accelerated Graphics Port Bus</h3><p>The accelerated graphics port (AGP) bus is a 66 MHz, 32-bit bus connecting the AGP card to the U2 IC. Data is transmitted at both edges of the clock and appears at a rate 4x the clock. The bus is an AGP-4x bus supporting peak transfers of 512 MB/s. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_66"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_67"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_68"></a></p><p>The AGP bus is a superset of the PCI bus, with the addition of separate address lines so it does not multiplex address and data when running in AGP mode. Having a separate address bus allows the AGP bus to pipeline addresses, thereby improving performance. </p><p>To further improve the performance of the AGP bus, the U2 IC supports a graphics address remapping table (GART). Because the virtual memory system organizes main memory as randomly distributed 4 KB pages, DMA transactions for more than 4 KB of data must perform scatter-gather operations. To avoid this necessity for AGP transactions, the GART is used by the AGP bridge in the U2 to translate a linear address space for AGP transactions into physical addresses in main memory. </p><p>For more information on the graphics cards installed in the AGP slot, refer to <span class="content_text"><a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF125">“Graphics Cards.”</a></span></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;The AGP bus is 1.5 V only and is not backward compatible. Older AGP cards will not work in the PowerMac G4 computer.</p></div><a name="//apple_ref/doc/uid/TP30000304-TPXREF111" title="PCI Bus"></a><h3>PCI Bus</h3><p>The 33-MHz, 64-bit PCI bus connects the U2 IC to the boot ROM, the KeyLargo I/O controller, the PCI slots, and the USB controllers. The U2 IC used in the PowerMac G4 computer supports the PCI write combining feature. This feature allows sequential write transactions involving the Memory Write or Memory Write and Invalidate commands to be combined into a single PCI transaction. The memory write transactions being combined must be sequential, ascending, and non-overlapping PCI addresses. Placing an eieio or sync command between the write commands prevents any write combining. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_69"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_70"></a></p><p>For more information on the PCI bus, refer to <span class="content_text"><a href="../4Expansion/jos_expan.html#//apple_ref/doc/uid/TP30000306-TPXREF108">“PCI Expansion Slots .”</a></span></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF122" title="Wireless LAN Module "></a><h3>Wireless LAN Module </h3><p>The optional AirPort Extreme wireless LAN module connects via the PCI interface. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_71"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_72"></a></p><p>The AirPort Extreme Card wireless LAN module contains a media access controller (MAC), a digital signal processor (DSP), and a radio-frequency (RF) section. The module has a connector for the cable to the antennas, which are built into the computer’s case. </p><p>The AirPort Extreme Card is based on the IEEE draft specification of the 802.11g standard. The card transmits and receives data at up to 54 Mbps and is compatible with 802.11b-standard 11 Mbps systems and older 802.11b-standard systems. For information about its operation, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-BCIIIHHE">“AirPort Extreme Card (Optional).”</a></span> </p><p>The optional fully-integrated Bluetooth connectivity comes off the USB bus, see <span class="content_text"><a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-TPXREF118">“USB Interface ”</a></span> and <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF182">“Bluetooth Technology (Optional).”</a></span></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF121" title="Modem Slot Support "></a><h3>Modem Slot Support </h3><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_73"></a><p>The KeyLargo IC has a traditional Macintosh serial port and a USB port, however, modem support is via the USB controller rather than KeyLargo (see <span class="content_text"><a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-BAJEEHBJ">“PCI USB Controller.”</a></span> </p><p>The KeyLargo IC provides DB-DMA (descriptor-based direct memory access) support for the modem slot interface. </p><p>The internal hardware modem is a separate module that contains a modem controller IC, a data pump, and the interface to the telephone line (DAA). For more information about the modem, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF121">“Internal Modem.”</a></span> </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF112" title="Boot ROM"></a><h3>Boot ROM</h3><p>The boot ROM consists of 1 MB of on-board flash EPROM. The boot ROM includes the hardware-specific code and tables needed to start up the computer using Open Firmware, to load an operating system, and to provide common hardware access services. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_74"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_75"></a></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF113" title="Ethernet Controller "></a><h3>Ethernet Controller </h3><p>The U2 IC includes an Ethernet media access controller (MAC). As a separate I/O channel on the U2 IC, it can operate at its full capacity without degrading the performance of other peripheral devices. The U2 IC provides DMA support for the Ethernet interface.<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_76"></a></p><p>The MAC implements the link layer. It is connected to a PHY interface IC that provides 10-BaseT, 100-BaseT, or 1000-BaseT operation over a standard twisted-pair interface. The Ethernet port is auto-sensing and self-configuring to allow use of either a cross-over or straight-through cable. The operating speed of the link is automatically negotiated by the PHY and the bridge or router to which the Ethernet port is connected. For information about the port, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF111">“Ethernet Port .”</a></span> </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF114" title="FireWire Controllers"></a><h3>FireWire Controllers</h3><p>The U2 IC includes an IEEE 1394b FireWire 800 controller with a maximum data rate of 800 Mbps (100 MBps). The IC is backwards-compatible with 1394a and FireWire 400. The U2 IC provides DMA (direct memory access) support for the FireWire interface.<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_77"></a></p><p>The controller in the U2 IC implements the FireWire link layer. A physical layer IC, called a PHY, implements the electrical signaling protocol of the FireWire interface and provides the electrical signals to the ports. For more information, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF106">“FireWire Ports.”</a></span> </p><a name="//apple_ref/doc/uid/TP30000304-BAJEEHBJ" title="PCI USB Controller"></a><h2>PCI USB Controller</h2><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_78"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_79"></a><p>The PowerMac G4 CPU uses a PCI USB controller ASIC with two Open Host Controller Interface (OHCI) functions. One controller has three ports supporting the USB signal pair on the internal AGP slot, internal Bluetooth (build-to-order option), and a 12 Mbps rear panel USB port. The second controller has two ports supporting the internal USB modem and a 12 Mbps rear panel USB port.</p><p>The USB ports comply with the Universal Serial Bus Specification 1.1 Final Draft Revision. The USB register set complies with the Open Host Controller Interface (OHCI) specification. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_80"></a>For more information, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF102">“USB Ports.”</a></span></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF115" title="KeyLargo I/O Controller"></a><h2>KeyLargo I/O Controller</h2><p>The KeyLargo custom IC is the third major component of the architecture. It provides all the I/O functions except Ethernet, FireWire, and USB functions. The KeyLargo IC provides an Ultra ATA/66 (ATA-66 UDMA Mode 4 and Multiword DMA Mode 4), an EIDE interface, and support for the sound IC. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_81"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_82"></a></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF116" title="DMA Support"></a><h3>DMA Support</h3><p>The KeyLargo IC provides DB-DMA (descriptor-based direct memory access) support for the following I/O channels: <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_83"></a></p><ul class="spaceabove"><li class="li"><p>Ultra ATA/66 </p></li><li class="li"><p>EIDE interface</p></li><li class="li"><p>Communication slot interface</p></li><li class="li"><p>IIS channel to the sound subsystem</p></li></ul><p>The DB-DMA system provides a scatter-gather process based on memory-resident data structures that describe the data transfers. The DMA engine is enhanced to allow bursting of data files for improved performance. </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF117" title="Interrupt Support"></a><h3>Interrupt Support</h3><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_84"></a><p>The interrupt controller for the PowerMac G4 system is an MPIC cell in the KeyLargo IC. In addition to accepting all the KeyLargo internal interrupt sources, the MPIC controller accepts external interrupts from dedicated interrupt pins and serial interrupts from the U2 serial interrupt stream. The signals from the U2 IC are synchronized to the operation of the MPIC circuitry, so there is no additional interrupt latency on the U2 interrupts. </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF118" title="USB Interface "></a><h3>USB Interface </h3><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_85"></a><p>The KeyLargo IC has two independent USB root hubs, which are not connected in the PowerMac G4. Application code that was targeted to these ports in previous models of the PowerMac G4 will not work in this version.</p><p>The USB interface is via the PCI USB controller; see <span class="content_text"><a href="jos_archi.html#//apple_ref/doc/uid/TP30000304-BAJEEHBJ">“PCI USB Controller.”</a></span></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF119" title="Ultra ATA/66 Interface"></a><h3>Ultra ATA/66 Interface</h3><p>The KeyLargo IC implements a single Ultra ATA/66 hard disk interface. This interface can accommodate one or two internal hard drives.<a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_86"></a> The KeyLargo IC provides DB-DMA (descriptor-based direct memory access) support for the Ultra ATA/66 interface.</p><p>For information about the drive bays, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF118">“Hard Disk Drives.”</a></span> </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF120" title="Enhanced IDE Interface "></a><h3>Enhanced IDE Interface </h3><p>In the PowerMac G4 computer, the KeyLargo IC provides an enhanced IDE (EIDE) interface. The EIDE interface supports the removable media drives mounted behind the front panel, an optical drive, and second optical drive. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_87"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_88"></a></p><p>For information about specific drives, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF113">“Optical Drives.”</a></span> </p><p>The KeyLargo IC provides DB-DMA (descriptor-based direct memory access) support for the EIDE interface.</p><a name="//apple_ref/doc/uid/TP30000304-TPXREF123" title="Sound Circuitry "></a><h3>Sound Circuitry </h3><p>The sound circuitry, called Snapper, is connected to the KeyLargo IC by a standard IIS (inter-IC sound) bus. The KeyLargo IC provides DB-DMA (descriptor-based direct memory access) support for the IIS port. <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_89"></a></p><p>The core of the Snapper circuitry is an IC that performs digital audio processing and codec functions. The digital audio processing functions include output equalization, dynamic range compression, and volume control. The equalization and dynamic range control functions are set to fixed values to equalize a set of Apple Pro Speakers and the internal speakers. Those functions are bypassed for signals sent to the audio output jacks. </p><p>The codec functions include one stereo input pair and three stereo output pairs.</p><p>Stereo signals from the audio input jack are routed to an analog line input buffer that drives the internal A/D converter. </p><p>Digital audio data from the KeyLargo IC drives the internal D/A converter. Analog audio signals from the D/A converter are routed to the headphone jack, the line output jack, and an audio power amplifier. </p><p>The audio power amplifier drives the internal speaker, the Apple Pro Speakers, and front headphone. When Apple Pro Speakers are connected to the external speaker jack or headphones are installed, the internal speaker is muted. </p><p>For a description of the features of the sound system, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF134">“Sound System .”</a></span> </p><a name="//apple_ref/doc/uid/TP30000304-TPXREF124" title="Power Controller"></a><h3>Power Controller</h3><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_90"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_91"></a><p>The power management controller in the PowerMac G4 computer is a microcontroller called the PMU99. It supports new modes of power management that provide significantly lower power consumption than previous systems. For more information, see <span class="content_text"><a href="../1Introduction/jos_intro.html#//apple_ref/doc/uid/TP30000303-TPXREF110">“Power-Saving Modes.”</a></span> <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_92"></a></p><a name="//apple_ref/doc/uid/TP30000304-TPXREF125" title="Graphics Cards"></a><h2>Graphics Cards</h2><p>The PowerMac G4 computer comes with a graphics card installed in the 4x-AGP slot. The graphics cards are available, as shown below: <a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_93"></a><a name="//apple_ref/doc/uid/TP30000304-DontLinkElementID_94"></a></p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Graphics IC</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Video RAM</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Connectors</p></th></tr><tr><td  scope="row"><p>NVidia GeForce4 MX</p></td><td ><p>64 MB DDR </p></td><td ><p>ADC and DVI</p></td></tr><tr><td  scope="row"><p>NVidia GeForce4 Titanium (build-to-order)</p></td><td ><p>128 MB DDR </p></td><td ><p>ADC and DVI</p></td></tr><tr><td  scope="row"><p>ATI Radeon 9000 Pro</p></td><td ><p>64 MB DDR</p></td><td ><p>ADC and DVI</p></td></tr><tr><td  scope="row"><p>ATI Radeon 9700 Pro (build-to-order)</p></td><td ><p>128 MB DDR</p></td><td ><p>ADC and DVI</p></td></tr></table></div><p>All graphics cards support dual displays in either extended desktop or video mirroring mode, and support digital resolutions up to 1920x1200 pixels and analog resolutions up to 1600x1200 pixels. </p><p>The NVidia GeForce4 Titanium card and ATI Radeon 9700 Pro card are available as build-to-order options.</p><p>The display memory on the AGP card is separate from the main memory. The display memory consists of 64 or 128 MB of DDR devices configured to make a 128-bit data bus. The display memory cannot be expanded by the user. </p><p>The digital flat-panel display can have pixel depths of 8, 16, or 32 for a display up to 1920 by 1200 pixels. </p><p>An analog monitor can be connected to the DVI connector by means of a DVI to VGA adapter cable. The analog monitor display can have pixel depths of 8, 16, or 32 bpp for all displays up to 2048 by 1536 pixels at a refresh rate of 75 Hz.</p><p>For more information about the features of the graphics cards and the monitors they support, see <span class="content_text"><a href="../3Input-Output/jos_innout.html#//apple_ref/doc/uid/TP30000305-TPXREF137">“Video Monitor Ports.”</a></span> </p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../1Introduction/jos_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../3Input-Output/jos_innout.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-02-20<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Hardware/Developer_Notes/Macintosh_CPUs-G4/PowerMacG4/2Architecture/jos_archi.html%3Fid%3DTP40000928-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Hardware/Developer_Notes/Macintosh_CPUs-G4/PowerMacG4/2Architecture/jos_archi.html%3Fid%3DTP40000928-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Hardware/Developer_Notes/Macintosh_CPUs-G4/PowerMacG4/2Architecture/jos_archi.html%3Fid%3DTP40000928-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
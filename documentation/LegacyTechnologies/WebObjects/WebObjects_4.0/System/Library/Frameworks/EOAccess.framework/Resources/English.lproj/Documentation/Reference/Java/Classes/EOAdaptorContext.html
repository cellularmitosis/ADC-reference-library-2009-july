<html><head>
<script language="JavaScript" src="../../../../../../../../../../frametest.js"></script>
<title>EOAdaptorContext</title></head>
<body bgcolor=#ffffff>

<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header -->

<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="../frameset.html" target="_top">EOAccess Reference</a>
</font>
<br><br>
<!--end of path -->

<!-- start of navigation -->
<a href="More/SubclassingEOAdaptorChnnl.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="More/EOAdaptorContext_more.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<!-- end of navigation -->


<hr><br>
 
<h1><a name="//apple_ref/java/cl/EOAdaptorContext">EOAdaptorContext</a>
 <BR>
</h1>
<p><B>Inherits From:</B><BR>  
NSObject 

<p><B>Inherits From:</B><BR>  
com.apple.yellow.webobjects

<p><a name="5287">
<hr width=50% align=left>
<h2>Class Description </h2>
</a>EOAdaptorContext is an abstract class that defines transaction handling in Enterprise Objects Framework applications. You typically don't interact with EOAdaptorContext API directly; rather, a concrete adaptor context subclass inherits from EOAdaptorContext and overrides many of its methods, which are invoked automatically by the Enterprise Objects Framework. If you're not creating a concrete adaptor context subclass, there aren't very many methods you need to use, and you'll rarely invoke them directly.<p>
The EOAdaptorContext class has the following principal attributes:<p>
<ul><li>Array of adaptor channels
<li>Delegate
<li>Adaptor
</ul>Other framework classes create EOAdaptorContext objects automatically. This is typically done with EOAdaptor's <a href="EOAdaptor.html#4068">createAdaptorContext</a> method, which creates an adaptor context and assigns its adaptor.<p>
The following table lists the most commonly-used EOAdaptorContext methods:<p>
<Table Border="3">
<caption></caption>
<tr><td scope="row"><a href="EOAdaptorContext.html#557">beginTransaction</a>
</td><td>Begins a transaction in the database server.
</td></tr>
<tr><td scope="row"><a href="EOAdaptorContext.html#575">commitTransaction</a>
</td><td>Commits the last transaction begun.
</td></tr>
<tr><td scope="row"><a href="EOAdaptorContext.html#3954">rollbackTransaction</a>
</td><td>Rolls back the last transaction begun.
</td></tr>
<tr><td scope="row"><a href="EOAdaptorContext.html#620">setDebugEnabled</a>
</td><td>Enables debugging in all the adaptor context's channels.
</td></tr>

</Table>

<Table>
<tr><td>
</Table>
<p>
For more information, see <a href="More/EOAdaptorContext_more.html">"EOAdaptorContext"</a>.<p>
<a name="523">
<hr width=50% align=left>
<h2>Method Types </h2>
</a><dl><dt>Constructors
<dl><dt><a href="EOAdaptorContext.html#8472">EOAdaptorContext</a>
</dl><dt>Accessing the adaptor
<dl><dt><a href="EOAdaptorContext.html#3406">adaptor</a>
</dl><dt>Creating adaptor channels
<dl><dt><a href="EOAdaptorContext.html#3902">createAdaptorChannel</a>
<dt><a href="EOAdaptorContext.html#571">channels</a>
</dl><dt>Checking connection status
<dl><dt><a href="EOAdaptorContext.html#598">hasOpenChannels</a>
<dt><a href="EOAdaptorContext.html#594">hasBusyChannels</a>
</dl><dt>Controlling transactions
<dl><dt><a href="EOAdaptorContext.html#557">beginTransaction</a>
<dt><a href="EOAdaptorContext.html#575">commitTransaction</a>
<dt><a href="EOAdaptorContext.html#3954">rollbackTransaction</a>
<dt><a href="EOAdaptorContext.html#628">transactionDidBegin</a>
<dt><a href="EOAdaptorContext.html#631">transactionDidCommit</a>
<dt><a href="EOAdaptorContext.html#634">transactionDidRollback</a>
<dt><a href="EOAdaptorContext.html#567">canNestTransactions</a>
<dt><a href="EOAdaptorContext.html#637">transactionNestingLevel</a>
</dl><dt>Debugging
<dl><dt><a href="EOAdaptorContext.html#548">setDebugEnabledDefault</a>
<dt><a href="EOAdaptorContext.html#545">debugEnabledDefault</a>
<dt><a href="EOAdaptorContext.html#620">setDebugEnabled</a>
<dt><a href="EOAdaptorContext.html#607">isDebugEnabled</a>
</dl><dt>Accessing the delegate
<dl><dt><a href="EOAdaptorContext.html#3072">delegate</a>
<dt><a href="EOAdaptorContext.html#624">setDelegate</a>
</dl></dl><a name="8470">
<hr width=50% align=left>
<h2>Constructors </h2>
</a><a name="8472">
<hr width=25% align=left>
<h3> EOAdaptorContext</h3>
</a>public <code>EOAdaptorContext</code>()<p>
public <code>EOAdaptorContext</code>(EOAdaptor <em>anAdaptor</em>)<p>
Returns a new EOAdaptorContext. You never invoke either of the constructors directly. You must use the Adaptor method <a href="EOAdaptor.html#4068"><code>createAdaptorContext</code></a> to create a new adaptor context.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#3406"><code>adaptor</code></a>
<p><h1>
 <BR>
</h1>
<p><a name="545">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/clm/EOAdaptorContext/debugEnabledDefault">debugEnabledDefault</a></h3>
</a>public static boolean <code>debugEnabledDefaul</code>t()<p>
Returns <code>true</code> if new adaptor context instances have debugging enabled by default, <code>false</code> otherwise. By default, adaptor contexts have debugging enabled if the user default EOAdaptorDebugEnabled is <code>true</code>. (For more information on user defaults, see the NSUserDefaults class specification in the <em>Foundation Framework Reference</em>.) You can override the user default using the class method <code><a href="EOAdaptorContext.html#548">setDebugEnabledDefault</a></code>, or you can set debugging behavior for a specific instance with the instance method <a href="EOAdaptorContext.html#620"><code>setDebugEnabled</code></a>.<p>
<a name="548">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/clm/EOAdaptorContext/setDebugEnabledDefault">setDebugEnabledDefault</a></h3>
</a>public static void <code>setDebugEnabledDefault</code>(boolean <em>flag</em>)<p>
Sets default debugging behavior for new instances of EOAdaptorContext. If <em>flag</em> is <code>true</code>, debugging is enabled for new instances. If <em>flag</em> is <code>false</code>, debugging is disabled. Use the instance method <code><a href="EOAdaptorContext.html#620">setDebugEnabled</a></code> to enable debugging for a specific adaptor context.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#545"><code>debugEnabledDefault</code></a>, <a href="EOAdaptorContext.html#607"><code>isDebugEnabled</code></a>
<p><a name="3393">
<hr width=50% align=left>
<h2>Instance Methods </h2>
</a><a name="3406">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/adaptor">adaptor</a></h3>
</a>public EOAdaptor <code>adaptor</code>()<p>
Returns the receiver's EOAdaptor.<p>
<a name="557">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a></h3>
</a>public abstract void <code>beginTransaction</code>()<p>
Implemented by subclasses to attempt to begin a new transaction, nested within the current one if nested transactions are supported. Each successful invocation of <code>beginTransaction</code> must be paired with an invocation of either <code>commitTransaction</code> or <code>rollbackTransaction</code> to end the transaction.<p>
The Enterprise Objects Framework automatically wraps database operations in transactions, so you don't have to begin and end transactions explicitly. In fact, letting the framework manage transactions is sometimes more efficient. You typically use <code>beginTransaction</code> only to execute more than one database operation in the same transaction scope.<p>
This method invokes the delegate method <a href="../Protocols/EOAdaptorContextDelegate.html#664"><code>adaptorContextShouldBegin</code></a> before beginning the transaction. If the transaction is begun successfully, the method sends <code>this</code> a <code><a href="EOAdaptorContext.html#628">transactionDidBegin</a></code> message and invokes the delegate method <code><a href="../Protocols/EOAdaptorContextDelegate.html#4091">adaptorContextDidBegin</a></code>. Throws an exception if the attempt is unsuccessful. Some possible reasons for failure are:<p>
<ul><li>A connection to the database hasn't been established.
<li>Nested transactions aren't supported, and a transaction is already in progress.
<li>A fetch is in progress.
<li>The delegate refuses<code>.</code>
<li>The database server fails to begin a transaction.
</ul>An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#567"><code>canNestTransactions</code></a>, <a href="EOAdaptorContext.html#637"><code>transactionNestingLevel</code></a>
<p><a name="567">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/canNestTransactions">canNestTransactions</a></h3>
</a>public abstract boolean <code>canNestTransaction</code>s()<p>
Implemented by subclasses to return <code>true</code> if the database server and the adaptor context can nest transactions, <code>false</code> otherwise. An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#637"><code>transactionNestingLevel</code></a>
<p><a name="571">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/channels">channels</a></h3>
</a>public NSArray <code>channels</code>()<p>
Returns an array of channels created by the receiver.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#3902"><code>createAdaptorChannel</code></a>
<p><a name="575">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a></h3>
</a>public abstract void <code>commitTransaction</code>()<p>
Implemented by subclasses to attempt to commit the last transaction begun. Invokes the delegate method <a href="../Protocols/EOAdaptorContextDelegate.html#667"><code>adaptorContextShouldCommit</code></a> before committing the transaction. If the transaction is committed successfully, the method sends <code>this</code> a <code><a href="EOAdaptorContext.html#631">transactionDidCommit</a></code> message and invokes the delegate method <code><a href="../Protocols/EOAdaptorContextDelegate.html#658">adaptorContextDidCommit</a></code>. Throws an exception if the attempt is unsuccessful. Some possible reasons for failure are:<p>
<ul><li>A transaction is not in progress.
<li>Fetches are in progress.
<li>The delegate refuses.
<li>The database server fails to commit.
</ul>An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#557"><code>beginTransaction</code></a>, <a href="EOAdaptorContext.html#3954"><code>rollbackTransaction</code></a>, <a href="EOAdaptorContext.html#594"><code>hasBusyChannels</code></a>
<p><a name="3902">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/createAdaptorChannel">createAdaptorChannel</a></h3>
</a>public abstract EOAdaptorChannel <code>createAdaptorChannel</code>()<p>
Implemented by subclasses to create and return a new AdaptorChannel, or <code>null</code> if a new channel cannot be created. Sets the new channel's <a href="EOAdaptorChannel.html#4685"><code>adaptorContext</code></a> to <code>this</code>. A newly created adaptor context has no channels. Specific adaptors have different limits on the maximum number of channels a context can have, and <a href="EOAdaptorContext.html#3902"><code>createAdaptorChannel</code></a> fails if a newly created channel would exceed the limits.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#571"><code>channels</code></a>
<p><a name="3072">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/delegate">delegate</a></h3>
</a>public java.lang.Object <code>delegate</code>()<p>
Returns the receiver's delegate, or <code>null</code> if the receiver doesn't have a delegate.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#624"><code>setDelegate</code></a>
<p><a name="594">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/hasBusyChannels">hasBusyChannels</a></h3>
</a>public boolean <code>hasBusyChannels</code>()<p>
Returns <code>true</code> if any of the receiver's channels have outstanding operations (that is, have a fetch in progress), <code>false</code> otherwise.<p>
<B>See also: </B>  
<a href="EOAdaptorChannel.html#1042"><code>isFetchInProgress</code></a> (EOAdaptorChannel)
<p><a name="598">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/hasOpenChannels">hasOpenChannels</a></h3>
</a>public boolean <code>hasOpenChannels</code>()<p>
Returns <code>true</code> if any of the receiver's channels are open, <code>false</code> otherwise.<p>
<B>See also: </B>  
<a href="EOAdaptorChannel.html#1062"><code>openChannel</code></a> (EOAdaptorChannel), <a href="EOAdaptorChannel.html#1051"><code>isOpen</code></a> (EOAdaptorChannel)
<p><a name="607">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/isDebugEnabled">isDebugEnabled</a></h3>
</a>public boolean <code>isDebugEnabled</code>()<p>
Returns <code>true</code> if debugging is enabled in the receiver, <code>false</code> otherwise.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#620"><code>setDebugEnabled</code></a>, <a href="EOAdaptorContext.html#545"><code>debugEnabledDefault</code></a>, <a href="EOAdaptorContext.html#548"><code>setDebugEnabledDefault</code></a>
<p><a name="3954">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a></h3>
</a>public abstract void <code>rollbackTransaction</code>()<p>
Implemented by subclasses to attempt to roll back the last transaction begun. Invokes the delegate method <a href="../Protocols/EOAdaptorContextDelegate.html#670"><code>adaptorContextShouldRollback</code></a> before rolling back the transaction. If the transaction is begun successfully, the method sends <code>this</code> a <code><a href="EOAdaptorContext.html#634">transactionDidRollback</a></code> message and invokes the delegate method <code><a href="../Protocols/EOAdaptorContextDelegate.html#661">adaptorContextDidRollback</a></code>. Throws an exception if the attempt is unsuccessful. Some possible reasons for failure are:<p>
<ul><li>A transaction is not in progress.
<li>Fetches are in progress.
<li>The delegate refuses.
<li>The database server fails to rollback.
</ul>An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#557"><code>beginTransaction</code></a>, <a href="EOAdaptorContext.html#575"><code>commitTransaction</code></a>
<p><a name="620">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/setDebugEnabled">setDebugEnabled</a></h3>
</a>public void <code>setDebugEnabled</code>(boolean <em>flag</em>)<p>
Enables debugging in the receiver and all its channels. If <em>flag</em> is <code>true</code>, enables debugging; otherwise, disables debugging.<p>
<B>See also: </B>  
<a href="EOAdaptorChannel.html#1102"><code>setDebugEnabled</code></a> (EOAdaptorChannel), <a href="EOAdaptorContext.html#607"><code>isDebugEnabled</code></a>, <a href="EOAdaptorContext.html#548"><code>setDebugEnabledDefault</code></a>, <a href="EOAdaptorContext.html#571"><code>channels</code></a>
<p><a name="624">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/setDelegate">setDelegate</a></h3>
</a>public void <code>setDelegate</code>(java.lang.Object <em>delegate</em>)<p>
Sets the receiver's delegate and the delegate of all the receiver's channels to <em>delegate</em>, or removes their delegates if <em>delegate</em> is <code>null</code>.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#3072"><code>delegate</code></a>, <a href="EOAdaptorContext.html#571"><code>channels</code></a>
<p><a name="628">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/transactionDidBegin">transactionDidBegin</a></h3>
</a>public void <code>transactionDidBegin</code>()<p>
Informs the adaptor context that a transaction has begun in the database server, so the receiver can update its state to reflect this fact and send an EOAdaptorContextBeginTransactionNotification. This method is invoked from <a href="EOAdaptorContext.html#557"><code>beginTransaction</code></a> after a transaction has successfully been started. It is also invoked when the Enterprise Objects Framework implicitly begins a transaction.<p>
You don't need to invoke this method unless you are implementing a concrete adaptor. Your concrete adaptor should invoke this method from within your adaptor context's implementation of <code><a href="EOAdaptorContext.html#557">beginTransaction</a></code> method and anywhere else it begins a transaction-either implicitly or explicitly. For example, an adaptor channel's implementation of <code><a href="EOAdaptorChannel.html#1009">evaluateExpression</a></code> should check to see if a transaction is in progress. If no transaction is in progress, it can start one explicitly by invoking <a href="EOAdaptorContext.html#557"><code>beginTransaction</code></a>. Alternatively, it can start an implicit transaction by invoking <a href="EOAdaptorContext.html#628"><code>transactionDidBegin</code></a>.<p>
A subclass of EOAdaptorContext doesn't need to override this method. A subclass that does override it must incorporate the superclass's version through a message to <code>super</code>.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#631"><code>transactionDidCommit</code></a>, <a href="EOAdaptorContext.html#634"><code>transactionDidRollback</code></a>
<p><a name="631">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/transactionDidCommit">transactionDidCommit</a></h3>
</a>public void <code>transactionDidCommit</code>()<code></code><p>
Informs the adaptor context that a transaction has committed in the database server, so the receiver can update its state to reflect this fact and send an EOAdaptorContextCommitTransactionNotification. This method is invoked from <a href="EOAdaptorContext.html#575"><code>commitTransaction</code></a> after a transaction has successfully committed.<p>
You don't need to invoke this method unless you are implementing a concrete adaptor. Your concrete adaptor should invoke this method from within your adaptor context's implementation of <code><a href="EOAdaptorContext.html#575">commitTransaction</a></code> method and anywhere else it commits a transaction-either implicitly or explicitly.<p>
A subclass of EOAdaptorContext doesn't need to override this method. A subclass that does override it must incorporate the superclass's version through a message to <code>super</code>.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#628"><code>transactionDidBegin</code></a>, <a href="EOAdaptorContext.html#634"><code>transactionDidRollback</code></a>
<p><a name="634">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/transactionDidRollback">transactionDidRollback</a></h3>
</a>public void <code>transactionDidRollback</code>()<code></code><p>
Informs the receiver that a transaction has rolled back in the database server, so the adaptor context can update its state to reflect this fact and send an EOAdaptorContextRollbackTransactionNotification. This method is invoked from <a href="EOAdaptorContext.html#3954"><code>rollbackTransaction</code></a> after a transaction has successfully been rolled back.<p>
You don't need to invoke this method unless you are implementing a concrete adaptor. Your concrete adaptor should invoke this method from within your adaptor context's implementation of <code><a href="EOAdaptorContext.html#3954">rollbackTransaction</a></code> method and anywhere else it rolls back a transaction-either implicitly or explicitly.<p>
A subclass of EOAdaptorContext doesn't need to override this method. A subclass that does override it must incorporate the superclass's version through a message to <code>super</code>.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#628"><code>transactionDidBegin</code></a>, <a href="EOAdaptorContext.html#631"><code>transactionDidCommit</code></a>
<p><a name="637">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EOAdaptorContext/transactionNestingLevel">transactionNestingLevel</a></h3>
</a>public int <code>transactionNestingLevel</code>()<code></code><p>
Returns the number of transactions in progress. If the database server and the adaptor support nested transactions, this number may be greater than 1.<p>
<B>See also: </B>  
<a href="EOAdaptorContext.html#567"><code>canNestTransactions</code></a>
<p><HR WIDTH=50% ALIGN=LEFT>
<h1>Notifications</h1>  


<a name="642">
<hr width=25% align=left>
<h3> <a name="//apple_ref/c/data/AdaptorContextBeginTransactionNotification">AdaptorContextBeginTransactionNotification</a></h3>
</a>public static final java.lang.String <code>AdaptorContextBeginTransactionNotification</code><p>
Sent from <a href="EOAdaptorContext.html#628"><code>transactionDidBegin</code></a> to tell observers that a transaction has begun.<p>
<a name="646">
<hr width=25% align=left>
<h3> <a name="//apple_ref/c/data/AdaptorContextCommitTransactionNotification">AdaptorContextCommitTransactionNotification</a></h3>
</a>public static final java.lang.String <code>AdaptorContextCommitTransactionNotification</code><p>
Sent from <a href="EOAdaptorContext.html#631"><code>transactionDidCommit</code></a> to tell observers that a transaction has been committed.<p>
<a name="650">
<hr width=25% align=left>
<h3> <a name="//apple_ref/c/data/AdaptorContextRollbackTransactionNotification">AdaptorContextRollbackTransactionNotification</a></h3>
</a>public static final java.lang.String <code>AdaptorContextRollbackTransactionNotification</code><p>
Sent from <a href="EOAdaptorContext.html#634"><code>transactionDidRollback</code></a> to tell observers that a transaction has been rolled back.<p>
<p>

<hr><br>
<a href="More/SubclassingEOAdaptorChnnl.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="More/EOAdaptorContext_more.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<hr><br>
 


<i>Copyright &#169; 1998, Apple Computer, Inc.   All rights
reserved.</i>

<!-- Last updated: 09/15/98 18:04:14 -->

</body>
</html>

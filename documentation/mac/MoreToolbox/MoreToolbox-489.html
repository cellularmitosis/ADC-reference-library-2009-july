<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Routines (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING489></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-488.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-490.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-483.html"><B>Chapter 9 - Desktop Manager</B></A> / <A HREF="MoreToolbox-486.html"><B>Desktop Manager Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING489-0></A>
<H2><A NAME=MARKER-9-96></A><A NAME=MARKER-21-97></A>Routines</H2>
 This section describes the low-level routines for using the desktop database.<A NAME=MARKER-2-98></A><P>
 All low-level routines exchange parameters with your application through a parameter block. When calling a low-level routine, you pass a pointer to the parameter block. See the chapter "File Manager" in <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I> for a description of the standard fields in a parameter block.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>Clear all fields (other than input fields) in the parameter block that you pass to Desktop Manager routines.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Three Desktop Manager functions--namely, <CODE>PBDTGetPath</CODE>, <CODE>PBDTOpenInform</CODE>, and <CODE>PBDTCloseDown</CODE>--run synchronously only. All other Desktop Manager routines can run either asynchronously or synchronously. There are three versions of each of these routines. The first version takes two parameters: a pointer to the parameter block, and a Boolean value that determines whether the routine is run asynchronously (<CODE>TRUE</CODE>) or synchronously (<CODE>FALSE</CODE>). Here, for example, is the first version of a routine that retrieves the user's comment stored for a file or a directory:<P>
<PRE>
FUNCTION PBDTGetComment (paramBlock: DTPBPtr; 
                         async: Boolean): OSErr;
</PRE>
 The second version does not take a second parameter; instead, it adds the suffix "Async" to the name of the routine.<P>
<PRE>
FUNCTION PBDTGetCommentAsync (paramBlock: DTPBPtr): OSErr;
</PRE>
 Similarly, the third version of the routine does not take a second parameter; instead, it adds the suffix "Sync" to the name of the routine.<P>
<PRE>
FUNCTION PBDTGetCommentSync (paramBlock: DTPBPtr): OSErr;
</PRE>
 All routines in this section are documented using the first version only. Note, however, that the second and third versions of these routines do not use the glue code that the first versions use and are therefore more efficient.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>All of the Desktop Manager routines may move or purge memory blocks in the application heap or for some other reason should not be called from within an interrupt. Your application should not call Desktop Manager routines at interrupt time.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Because you cannot use the Desktop Manager functions on a disk that does not have a desktop database, call <CODE>PBHGetVolParms</CODE> to verify that the target disk has a desktop database before calling any of the Desktop Manager functions. (For a description of the <CODE>PBHGetVolParms</CODE> function and the <CODE>bHasDesktopMgr</CODE> bit that you should check, see the chapter "File Manager" in <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I>.)<P>
<DL>
<DT><B>WARNING</B>
<DD>Although routines that set information in and get information from the desktop database are described in this section, you should never use these routines to change, add to, or remove any information from the desktop database. Manipulating the desktop database is likely to wreak havoc on your users' systems.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
<DT><B>Assembly-Language Note</B>
<DD>You can invoke each of the Desktop Manager routines with a macro that has the same name as the routine, preceded by an underscore. These macros, however, aren't really trap macros. Instead, they expand to invoke the trap macro <CODE>_HFSDispatch</CODE>. The File Manager determines which routine to execute from the routine selector, an integer placed in register D0. The routine selectors appear in <A HREF=MoreToolbox-511.html#MARKER-9-143>"Assembly-Language Summary" beginning on page 9-34</A>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="MoreToolbox-490.html#HEADING490-0">Locating, Opening, and Closing the Desktop Database</A>
<DD>
<DT><A HREF="MoreToolbox-494.html#HEADING494-0">Reading the Desktop Database</A>
<DD>
<DT><A HREF="MoreToolbox-499.html#HEADING499-0">Adding to the Desktop Database</A>
<DD>
<DT><A HREF="MoreToolbox-503.html#HEADING503-0">Deleting Entries From the Desktop Database</A>
<DD>
<DT><A HREF="MoreToolbox-506.html#HEADING506-0">Manipulating the Desktop Database Itself </A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-488.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-490.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>About Sockets and Socket Listeners(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING181></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-180.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-182.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-179.html"><B>Chapter 7 - Datagram Delivery Protocol (DDP)</B></A> / <A HREF="Networking-180.html"><B>About DDP</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING181-0></A>
<H2>About Sockets and Socket Listeners</H2>
 Every application that uses DDP to transfer data must send or receive that data through a socket. The use of sockets allows DDP to determine for which application a packet <BR>is intended. Each node supports up to 254 sockets, and each <A NAME=MARKER-2-91></A>socket is identified by an 8-bit number that combines with the network number and the node ID to form the internet <A NAME=MARKER-2-45></A><A NAME=MARKER-2-2></A>socket address of the application. When an application or process calls DDP to open a socket, DDP associates the number of that socket with the application, making the application distinct from other applications on the same node. An application <BR>that is associated with a specific socket through DDP is the client of that socket, or a <A NAME=MARKER-2-33></A><B>socket client.</B> <P>
 The use of sockets allows multiple processes or applications that run on a single node connected to AppleTalk to be open at the same time. In <A HREF=#MARKER-9-23>Figure 7-1</A>, a printer server client application and a file server client application are open on the same node at the same time. Each application is associated with a unique socket, and packets for that applica-<BR>tion are addressed to that socket number. <P>
<B>Figure 7-1  <A NAME=MARKER-9-23></A>Two applications running on the same node, each with its own socket</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DDP-L-02.jpg"><P>
 Applications exchange data with each other through their sockets. A socket client can send and receive datagrams only through its associated socket. Moreover, every socket-client application that uses DDP directly to transfer data must have associated with it a socket listener that receives datagrams addressed to the socket on behalf of <BR>that socket's client application. <P>
 A s<A NAME=MARKER-2-35></A>ocket listener is a process that you provide as part of your client application. You must write your socket listener in assembly language and adhere to specific requirements in regard to the use of registers and the routines that you call to receive packets. Beyond meeting these AppleTalk requirements, your socket listener can perform any other functions that your socket-client application requires. See <A HREF=Networking-189.html#MARKER-9-101>"A Sample Socket Listener" beginning on page 7-20</A> for more details. <P>
 When you call DDP to open a socket, you provide a pointer to your socket listener for that socket. DDP maintains a <A NAME=MARKER-2-68></A><B>socket table</B> that includes an entry for every open socket and its socket listener. When the .MPP driver receives a packet, it does not read and process the packet. Instead, it reads the socket number portion of the internet socket address and then checks the socket table to determine if that socket is open. If so, the .MPP driver calls the socket listener associated with the socket to handle reception of <BR>the packet for the client application. <A NAME=MARKER-2-132></A>The use of socket listeners helps to maximize throughput between DDP and the link-access protocol layer by eliminating unnecessary buffer copying.<P>
 <A HREF=#MARKER-9-29>Figure 7-2</A> shows a socket-client application that calls DDP to send data to another socket. The socket-client application includes code that comprises its socket listener. When DDP receives a packet addressed to this socket, it checks the socket table for the entry that contains the socket number and the address of the socket listener belonging to the application that owns the socket; then DDP calls the socket listener to receive the packet for the<A NAME=MARKER-2-143></A> application.<A NAME=MARKER-2-34></A><P>
<B>Figure 7-2  <A NAME=MARKER-9-29></A>Sending and receiving data using DDP</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DDP-L-03.jpg"><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-180.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-182.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

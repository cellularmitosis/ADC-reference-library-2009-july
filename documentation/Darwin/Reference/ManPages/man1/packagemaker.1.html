<html><head><title>Mac OS X Developer Tools
 Manual Page For packagemaker(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/packagemaker" title="Mac OS X Developer Tools
 Manual Page for packagemaker(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/packagemaker"; name=packagemaker(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
packagemaker(1)           BSD General Commands Manual          packagemaker(1)

<b>NAME</b>
     <b>packagemaker</b>, <b>PackageMaker</b> -- Installation-package creation tool

<b>SYNOPSIS</b>
     <b>packagemaker</b> <b>--root</b> <u>root-path</u> [options]

     <b>packagemaker</b> <b>--doc</b> <u>pmdoc-path</u> [options]

     <b>packagemaker</b> <b>--watch</b> [options]

     <b>packagemaker</b> <b>-build</b> <b>--f</b> <u>root-path</u> [old-pkg-options]

     <b>packagemaker</b> <b>-build</b> <b>-mi</b> | <b>-mc</b> | <b>-ms</b> <u>packages-path</u> [old-mpkg-options]

     <b>packagemaker</b> <b>--sign</b> <u>flat-pkg-or-distribution-path</u> <b>--certificate</b> <u>certificate-name</u>
                  [--out <u>destination-path</u>]

     <b>packagemaker</b> <b>-help</b>

<b>DESCRIPTION</b>
     <b>packagemaker</b> allows you to package files in a way that makes it easy for end users to install them on
     their computers.

     The <b>packagemaker</b> tool provides five pieces of functionality:

     1. Build a PackageMaker document (.pmdoc) using the --doc flag

     2. Build a package or flat package from a root using the --root flag

     3. Build a snapshot package based on filesystem changes using the --watch flag

     4. Sign a flat package, flat metapackage or distribution file using the --sign flag

     5. A backwards-compatibility mode for building packages and metapackages using the old -build flag
     The sections below describe each of these types of functionality.

<b>BUILDING</b> <b>USING</b> <b>--root</b> <b>OR</b> <b>--doc</b>
     If a PackageMaker document (.pmdoc) file is provided via the --doc flag, <b>packagemaker</b> will build what-<font color="#ffffff" class="whiteout">ever&nbsp;whatever</font>
     ever is specified in that document. If the document specifies a package, you can also use any of the
     options described below to override certain settings in the document.

     Alternatively, you can provide a directory to <b>packagemaker</b> using the --root flag and <b>packagemaker</b> will
     construct a package from that root. In this case, an identifier must be provided with the --id flag or
     specified in the info file provided by the --info flag. You may use the other options described below
     to customize the package.

     Options:

     <b>--root,</b> <b>-r</b> <u>root-path</u>
              A path to a directory to package. Either this or the --doc flag must be specified.

     <b>--doc,</b> <b>-d</b> <u>pmdoc-path</u>
              A path to a .pmdoc file built using the PackageMaker GUI. Either this or the --root flag must
              be specified.

     <b>--id,</b> <b>-i</b> <u>package-identifier</u>
              A package identifier, which should be unique for this package. For example, com.apple.package-<font color="#ffffff" class="whiteout">maker.&nbsp;com.apple.packagemaker.</font>
              maker. If --root is specified, either this or the --info flag must be specified.

     <b>--info,</b> <b>-f</b> <u>info-path</u>
              A path to an Info.plist file for a bundle package or a PackageInfo file for a flat package. If
              --root is specified, either this or the --id flag must be specified. If specified along with
              --doc, the provided info file will be merged with the file generated by <b>packagemaker</b>

     [--out, -o <u>destination-path</u>]
              If specified, the build result will be output to destination-path. If not specified, the build
              result will be output into the present working directory with a name derived from the input
              file.

     [--version, -n <u>version</u>]
              The version number that will be given to your package. If not specified, will default to "1".
              Will override the version specified in a pmdoc for a package. However, if the pmdoc specifies
              a metapackage or distribution, this flag will have no effect.

     [--title, -t <u>title</u>]
              The title that will be given to your package. If not specified, the title will be derived from
              the root path (for 10.3 or 10.4 target) or from the package file name (for 10.5 target). If
              specified, a distribution will be created. Will override the title specified in a pmdoc.

     [--resources, -e <u>resources-path</u>]
              A path to a directory of resources to be copied into the package. The directory should be
              structured as you want it to be in the package. For example, localized resources should be in
              the appropriate lproj directory and all resources should have the appropriate names. See the
              Installer documentation for more information. If specified along with --doc, the resources
              will be merged with any specified in the document.

     [--scripts, -s <u>scripts-path</u>]
              A path to a directory of scripts to be copied into the package. The directory should be struc-<font color="#ffffff" class="whiteout">tured&nbsp;structured</font>
              tured as you want it to be in the package. For example, scripts should have appropriate names.
              See the Installer documentation for more information. If specified along with --doc, the
              scripts will be merged with any specified in the document.

     [--certificate, -c <u>certificate-name</u>]
              The name of a certificate with which to sign the flat package or flat metapackage. The name
              should match that of a certificate in your keychain that is valid for signing. Please note
              that if <b>packagemaker</b> requires permission to use the certificate, using this option will cause
              the standard GUI permission dialog to appear.

     [--filter, -x <u>regular-expression</u>]
              Adds a file filter. Any files in the root matching the provided regular expression will be not
              be included in the package. This flag can be specified multiple times. If specified along with
              --doc, the filters will be appended to any specified in the document.

     [--target, -g <u>10.5</u> | <u>10.4</u> | <u>10.3</u>]
              Specifies the minimum target operating system version. Defaults to 10.3. For 10.5, flat pack-<font color="#ffffff" class="whiteout">ages&nbsp;packages</font>
              ages and metapackages will be built; for 10.4, bundle packages and distributions will be
              built; and for 10.3, bundle packages and metapackages will be built.

     [--domain, -h <u>system</u> | <u>home</u> | <u>anywhere</u>]
              Adds an install domain. This flag can be specified multiple times. Prior to Mac OS X v10.5,
              the Installer will default to the 'anywhere' domain. You can use the --root-volume-only flag
              to achieve the same effect as the system domain. If specified along with --doc, will override
              to domain settings of the document.

     [--no-recommend, -m]
              If specified, <b>packagemaker</b> will not apply recommended permissions to package contents.

     [--discard-forks, -k]
              If specified, <b>packagemaker</b> will not preserve resource forks when building packages.

     [--root-volume-only, -b]
              If specified, install will only be allowed on the root volume.

     [--verbose, -v]
              Provide detailed status information during construction.

<b>SIGNING</b> <b>PACKAGES</b> <b>USING</b> <b>--sign</b>
     Existing flat packages, flat metapackages or distributions (.dist) can be signed using the --sign flag.
     Please note that if <b>packagemaker</b> requires permission to use the certificate, the standard system per-<font color="#ffffff" class="whiteout">mission&nbsp;permission</font>
     mission GUI dialog will appear.

     Options:

     <b>--sign</b> <u>flat-pkg-or-distribution-path</u>
              The path to a flat package, flat metapackage or distribution file (.dist).

     <b>--certificate,</b> <b>-c</b> <u>certificate-name</u>
              The name of a certificate with which to sign the flat package or flat metapackage. The name
              should match that of a certificate in your keychain that is valid for signing.

     [--out, -o destination-path]
              If specified, the signed version of the input will be output to destination-path. If not spec-<font color="#ffffff" class="whiteout">ified,&nbsp;specified,</font>
              ified, the signed version will replace the input.

<b>SNAPSHOT</b> <b>PACKAGES</b> <b>USING</b> <b>THE</b> <b>--watch</b> <b>FLAG</b>
     If the --watch flag is specified, <b>packagemaker</b> will monitor filesystem changes until it receives the
     SIGUSR1 signal. It will then construct a package of all files that were created/modified while it was
     watching. All of the flags described above for --root and --doc are applied to the package, with the
     exception of --root and --doc themselves.

<b>BUILDING</b> <b>IN</b> <b>BACKWARDS-COMPATIBILITY</b> <b>MODE</b>
     In addition to the interface described above, <b>packagemaker</b> supports the old CLI for backwards compati-<font color="#ffffff" class="whiteout">bility.&nbsp;compatibility.</font>
     bility. It can be used to build packages or metapackages using the following options:

     <b>-build</b>   Create an installation package or metapackage. Must be specified to trigger backwards-compati-<font color="#ffffff" class="whiteout">bility&nbsp;backwards-compatibility</font>
              bility mode.

     <b>-proj</b>    A path to a pmproj document.  <b>packagemaker</b> will import and build the document. This will cause
              the -f, -i, -r, and -d flags to be ignored.

     <b>-p</b>       The path, including the package name and extension (.pkg or .mpkg) where the package is cre-<font color="#ffffff" class="whiteout">ated.&nbsp;created.</font>
              ated.

     <b>-f</b>       Directory containing the contents of the package. Not applicable when building a metapackage.

     <b>-b</b>       Directory used to temporarily copy and modify the root if splitting resource forks (sugges-<font color="#ffffff" class="whiteout">tion:&nbsp;(suggestion:</font>
              tion: /tmp). Not applicable when building a metapackage.

     <b>-s</b>       Split files with resource forks (Installer will reassemble them).  Overrides default behavior
              that discards resource forks. Not applicable when building a metapackage.

     <b>-ds</b>      Filter .DS_Store files out of the creation process. Not applicable when building a metapack-<font color="#ffffff" class="whiteout">age.&nbsp;metapackage.</font>
              age.

     <b>-v</b>       Verbose output during archiving.

     <b>-u</b>       Create uncompressed archive. Not applicable when building a metapackage.

     <b>-r</b>       Directory containing installation resources, such as scripts and Read Me files.

     <b>-i</b>       Path to property list file (.plist) that is copied to the package's Contents directory as
              Info.plist. It will be modified to contain the package's installed size (IFPkgFlagInstalled-<font color="#ffffff" class="whiteout">Size)&nbsp;(IFPkgFlagInstalledSize)</font>
              Size) and other package flags as necessary. This option must be specified and the Info.plist
              must contain a CFBundleIdentifier key. This CFBundleIdentifier should uniquely identify your
              package.

     <b>-d</b>       Path to property list file (.plist) that is copied to the package's Resources directory as
              Description.plist. If this option is unspecified, a skeletal Description.plist is generated
              for the package. You should add the title and description entries to the Description.plist
              file after creating the package.

     <b>-mi</b>      Path to directory of packages/metapackages to be included in the metapackage. The packages
              will be stored within the created metapackage.

     <b>-ms</b>      Path to directory of packages/metapackages to be included in the metapackage. The packages
              will not be stored within the created metapackage, rather, they should be on the same level as
              the .mpkg file.

     <b>-mc</b>      Path to directory of packages/metapackages to be included in the metapackage. The packages
              will not be stored within the created metapackage, rather, they should remain at the location
              specified.

<b>THE</b> <b>PACKAGE</b> <b>FORMAT</b>
     An installation package contains everything the Installer application needs to install a group of files
     (the package's payload), which can include application bundles, documentation files, scripts, and so
     on. In general, a package contains the following:

     A bill of materials file:
              A binary file that describes the contents of the package.

     An information property list:
              An XML file that contains the information about the package, such as default location and ver-<font color="#ffffff" class="whiteout">sion.&nbsp;version.</font>
              sion.

     An archive file:
              The set of files to be installed, also known as the payload. With <b>packagemaker</b>, this archive
              is always compressed.

     Resources directory:
              This directory contains files Installer uses during an installation but doesn't install on the
              target computer. They include Read Me files, license-agreement files, and scripts.

     A metapackage is a file that includes a list of packages (and possibly other metapackages) and any
     additional information needed to install them. The actual packages can be stored in the metapackage, on
     the same level as the metapackage, or at a custom location. In general, a metapackage contains the fol-<font color="#ffffff" class="whiteout">lowing:&nbsp;following:</font>
     lowing:

     An information property list:
              An XML file that contains the information about the metapackage, such as version and package
              list.

     Packages directory:
              Contains any packages stored within the metapackage.

     Resources directory:
              This directory contains files Installer uses during an installation but doesn't install on the
              target computer. They include Read Me files, license-agreement files, and scripts.

     A distribution is similar to a metapackage, except that it contains a distribution.dist file, which
     contains XML and JavaScript which specify the UI for the Install. In general, a distribution contains
     the following:

     An distribution script:
              An XML file specifying the UI for the install. May also contain JavaScript.

     Packages directory:
              Contains any packages stored within the distribution.

     Resources directory:
              This directory contains files Installer uses during an installation but doesn't install on the
              target computer. They include Read Me files, license-agreement files, and scripts.

     See &lt;<a href="../../../../../documentation/DeveloperTools/Conceptual/SoftwareDistribution/"><b>http://developer.apple.com/documentation/DeveloperTools/Conceptual/SoftwareDistribution/</b></a><b></b> as well
     as the help integrated into PackageMaker for information on the keys of the property-list files as well
     as a detailed explanation of package creation, format, and use.

     Scripts can be included in your packages/metapackages to test certain conditions before installation or
     when you need to perform special tasks as the installation takes place.

     Scripts can be run before and after the package's payload is installed. There are two types of scripts:
     environment-test scripts and installation scripts.

     These are the environment-test scripts you can define for an installation:

     <u>InstallationCheck</u>
              Installer runs this script to determine whether the installation should proceed.

     <u>VolumeCheck</u>
              Installer runs this script to determine whether a particular volume can receive the package's
              payload.

     If the environment-test scripts allow the installation to proceed, Installer performs the installation
     scripts and the installs the payload in the following order:

     <u>preflight</u>
     <u>preinstall</u>    or <u>preupgrade</u>
     Payload installation
     <u>postinstall</u>   or <u>postupgrade</u>
     <u>postflight</u>

<b>EXAMPLES</b>
     Building a root with an identifier:
           packagemaker --root /tmp/MyGreatApp.dst --id com.example.MyGreatApp --out /tmp/MyGreatApp.pkg
     Building a flat package with an existing PackageInfo file:
           packagemaker --root /tmp/MyGreatApp.dst --info /tmp/MyPackageInfo --target 10.5 --out
           /tmp/MyGreatApp.pkg
     Building a package from a pmdoc, overriding the version and title:
           packagemaker --doc /tmp/MyGreatDoc.pmdoc --version 2.0 --title 'My Great App v2'
     Filtering files named "foo" from your package:
           packagemaker --root /tmp/MyGreatApp.dst --id com.example.MyGreatApp --filter '/foo$'
     Creating Cool_App.pkg with existing Info.plist and Description.plist files:
           packagemaker -build -p /Volumes/Packages/Cool_App/Cool_App.pkg -f
           /Volumes/Packages/Cool_App/Package_contents -i /Volumes/Packages/Cool_App/Info.plist -d
           /Volumes/Packages/Cool_App/Description.plist

<b>SEE</b> <b>ALSO</b>
     <a href="../man8/installer.8.html#//apple_ref/doc/man/8/installer">installer(8)</a>, <a href="../../../../../documentation/DeveloperTools/Conceptual/SoftwareDistribution/"><u>http://developer.apple.com/documentation/DeveloperTools/Conceptual/SoftwareDistribution/</u></b></a><b>

Mac OS X                       October 16, 2006                       Mac OS X
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/packagemaker.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/packagemaker.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/packagemaker.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head><title>Mac OS X Server
 Manual Page For slapconfig(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/slapconfig" title="Mac OS X Server
 Manual Page for slapconfig(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/slapconfig"; name=slapconfig(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with Mac&nbsp;OS&nbsp;X&nbsp;Server.  It is
not available on standard Mac OS X (client) installations.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
slapconfig(8)             BSD System Manager's Manual            slapconfig(8)

<b>NAME</b>
     <b>slapconfig</b> -- tool to configure slapd and related daemons

<b>SYNOPSIS</b>
     <b>slapconfig</b> command [command-options] [<b>-q</b>]

<b>DESCRIPTION</b>
     <b>slapconfig</b> is a utility for configuring slapd, slurpd, and the Directory Services search policy. It
     must be run by root.

<b>USAGE</b>
     <b>-q</b>                    suppress prompts.

   <b>Queries</b>
     <b>-defaultsuffix</b>        Returns the default suffix which is based on the machine's DNS name, or hostname
                           if DNS is not available.

     <b>-getauthmechanisms</b>    Returns a list of authentication methods, their current  states, and whether or
                           not the method requires a recoverable password to be stored.

     <b>-getclientconfig</b>      Returns whether this machine is an LDAP client, not a client, or advanced.

     <b>-getldapconfig</b>        Returns the LDAP server settings.

     <b>-getmacosxodpolicy</b>    Returns a property list containing the directory binding settings.

     <b>-getmasterconfig</b>      Returns the list of replicas and replication interval.

     <b>-getpasswordserveraddress</b>
                           Returns the IP address of the default password server.

     <b>-getreplicaconfig</b>     Returns the master address and last update date.

     <b>-getstyle</b>             Returns whether configuration is master, replica, client, or standalone.

     <b>-help</b>                 Print usage information.

     <b>-ver</b>                  Displays version information.

   <b>Setup</b>
     <b>-addreplica</b> &lt;replica-address&gt;
     Adds a replica to the slapd configuration file.

     <b>-changeip</b> &lt;old-ip&gt; &lt;new-ip&gt; [&lt;old-host&gt; &lt;new-host&gt;]
     Updates configuration records and files to contain the new host information.  It does not change the IP
     address in Network preferences.

     <b>-createldapmasterandadmin</b> [--allow_local_realm] &lt;new-admin&gt; &lt;new-fullname&gt; &lt;new-uid&gt; [&lt;search base
     suffix&gt; [&lt;realm&gt;]]
     Creates a new master LDAP server. Copies the root account to the new master domain. Creates a new
     directory node administrator.

     <b>-createreplica</b> &lt;master IP or name&gt; &lt;admin user&gt;
     Create a new replica from an existing LDAP master.

     <b>-destroyldapserver</b>
     Turns off the LDAP server and deletes its database.

     <b>-kerberize</b> [-f] [--allow_local_realm] &lt;admin&gt; [&lt;realm&gt;]
     Ensures a Kerberos principal for each user in the directory, creating one if necessary. Pass in -f to
     force kerberization of a server.

     <b>-promotereplica</b> <b>-&lt;</b>admin-user&gt;
     Converts an existing replica into a master using the current database.

     <b>-removereplica</b> <b>-&lt;</b>replica-address&gt;
     Removes a replica from the slapd configuration file.

     <b>-setclient</b>
     Sets NetInfo to use DHCP binding, enables LDAP directory binding with DHCP (Option 95), and sets the
     search policy to Automatic.

     <b>-setldapconfig</b> [<b>-database</b> &lt;<u>database</u> <u>path&gt;</u>] [<b>-maxresults</b> &lt;<u>maximum</u> <u>search</u> <u>results&gt;</u>] [<b>-searchtimeout</b>
     <u>timeout</u>] [<b>-ssl</b> <u>on|off</u>] [<b>-sslcert</b> &lt;<u>path</u> <u>to</u> <u>cert&gt;</u>] [<b>-sslkey</b> &lt;<u>path</u> <u>to</u> <u>key&gt;</u>] [<b>-sslcacert</b> &lt;<u>path</u> <u>to</u> <u>CA</u> <u>cert&gt;</u>]
     [<b>-ssldomain</b> &lt;domain name&gt; | <b>-sslpassphrase</b>]
     Applies the specified settings and restarts slapd. Settings not specified are unchanged.

     <b>-setstandalone</b>
     Configures the machine to only use the local directory.

     <b>-setldapdhcp</b>
     Enables binding to an LDAP server using DHCP option 95.

     <b>-setldapstatic</b> &lt;IP-or-name&gt; [port [SSL|NoSSL [search base]]]
     Configures to use the specified LDAP server. Requires server based mappings.

     <b>-setldapnetinfodhcp</b>
     Enables binding to LDAP and NetInfo using DHCP.

     <b>-setmacosxodpolicy</b> [<b>-binding</b> [disabled|enabled|required]] [<b>-cleartext</b> [blocked|allowed]] [<b>-encrypt</b>
     [yes|no]] [<b>-sign</b> [yes|no]] [<b>-clientcaching</b> [yes|no]] [<b>-man-in-middle</b> [blocked|allowed]]
     Sets directory binding options.

     <b>-startldapserver</b>      Configures launchd to run slapd.

     <b>-startreplicator</b>      Configures launchd to run slurpd.

     <b>-stopldapserver</b>       Configures launchd not to run slapd and slurpd.

     <b>-updateaddresses</b>      Merges new interfaces into the list of LDAP replicas.

   <b>Password</b> <b>Server</b>
     <b>-pwsrekey</b> <u>keysize</u>     Divorces the password server from a replicated system and issues a new RSA key.
                           Users in the local and LDAP directories are migrated to the new key. Valid key
                           sizes are 1024, 2048, and 3072. There is a performance penalty when using large
                           keys.

     <b>-setauthmechanisms</b> <u>mech</u> [on|off] [<u>mech</u> [on|off] ...]
                           Sets the states of authentication methods.

     <b>-settopasswordserver</b> <u>user</u> <u>directory-administrator</u> [user-password [admin-password]]
                           Converts a user account to have an Open Directory authentication type. A new
                           password server slot and kerberos principal are created. If the user was previ-<font color="#ffffff" class="whiteout">ously&nbsp;previously</font>
                           ously an Open Directory user, the old slot and principal are deleted and
                           replaced.

     <b>-startpasswordserver</b>  Sets up a launchd plist file and starts the password server.

     <b>-startpasswordserver</b>  Sets the launchd plist file to be disabled and stops the password server.

     <b>-stripsyncdates</b>       Removes the last synchronization dates and transaction ID values from the pass-<font color="#ffffff" class="whiteout">word&nbsp;password</font>
                           word server's replication list, causing all records to replicate.

   <b>Runtime</b>
     <b>-enableslapdlog</b>       Turns on the LDAP server logging to /var/log/slapd.log.

     <b>-replicatenow</b>         Initiates replication sessions for LDAP and Password Server.

   <b>Backup</b> <b>and</b> <b>Restore</b>
     <b>-backupdb</b> &lt;<u>archive-path&gt;</u>
     Creates an archive containing the LDAP, Password Server and Kerberos databases.

     <b>-restoredb</b> &lt;<u>archive-path&gt;</u>
     Restores a directory to the backed-up state.

     <b>-mergedb</b> [<b>-f</b>] &lt;<u>archive-path&gt;</u>
     Merges a backup archive into an existing directory system. By default, if the Kerberos realm in the ar-<font color="#ffffff" class="whiteout">chive&nbsp;archive</font>
     chive does not exist on the server, the merge command aborts. The [-f] option can be used to force the
     merge without the Kerberos principals. To create new Kerberos principals in the server's realm, use the
     "slapconfig -kerberize" command. The [-f] option can be used to force kerberization, if the OD master
     is bound to another realm. If the Password Server can supply a plain text password for an account, it
     will restore the password, otherwise the user is required to change the password at the next login. A
     Kerberos principal is created for the user when the password is changed, or when the administrator sets
     it. Although it is not possible to determine whether or not all accounts have recoverable passwords,
     the current behavior can be determined by using "slapconfig -getauthmechanisms" and checking the status
     of the "WEBDAV-DIGEST" and "APOP" mechanisms. If either one is enabled, then the Password Server stores
     recoverable passwords. Otherwise, it does not.

<b>ENVIRONMENT</b>
     The environment variable SSOUtilDebugLevel can be set to change the verbosity of the log.  Valid values
     are [0-9]. The default value is 1.

<b>FILES</b>
     /usr/sbin/slapconfig

<b>SEE</b> <b>ALSO</b>
     <!-- a -->DirectoryService(1)<!-- /a -->, <a href="slapd.8.html#//apple_ref/doc/man/8/slapd">slapd(8)</a>, <a href="slurpd.8.html#//apple_ref/doc/man/8/slurpd">slurpd(8)</a>

MacOSX                           April 2, 2008                          MacOSX
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/slapconfig.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/slapconfig.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/slapconfig.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

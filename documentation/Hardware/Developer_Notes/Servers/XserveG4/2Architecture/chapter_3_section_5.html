<html>
    <head>
        <META NAME = "Generator" CONTENT="XML_Publisher">
        <META http-equiv="content-type" CONTENT="text/html;charset=iso-8859-1">
        <META NAME = "Copyright" CONTENT="Copyright 2003 Apple Computer, Inc. All Rights Reserved.">
        <TITLE>Xserve: KeyLargo I/O Controller</TITLE>
        <base target="content">
        
    </head>
    
    <BODY bgcolor="#ffffff">
        <a name="top"></a>
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        
        <!-- start of path -->
<font face="Geneva,Helvetica,Arial" size="1"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <a href="../../../../Hardware.html" target="_top">Hardware</a> &gt; <a href="../0Preface/chapter_1_section_1.html#//apple_ref/doc/uid/TP30000322">Xserve</a> &gt; <a href="chapter_3_section_1.html#//apple_ref/doc/uid/TP30000324">Architecture</a></font><br><br>
<!-- end of path -->
        
        <!-- insert Show/Hide frames -->
        <script type="text/javascript" language="JavaScript"><!--
        function loadFrames(){
            if (top == self || (parent.frames[1].name != doc))
                top.location.href = 'index.html?' + location.href;
        }
            
        if (self != top) {
            // loaded in frames
            document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
        }
        else {
            // not loaded frames
            document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
        }
        //--></script>
        <!-- end Show/Hide frames -->
        
        <a href="chapter_3_section_4.html" target="_self"><img src="../images/previous.gif" border="0" alt="Previous"></a>&nbsp;
        <a href="chapter_3_section_6.html" target="_self"><img src="../images/next.gif" border="0" alt="Next"></a>
        
        <hr>
        
        <a name="//apple_ref/doc/uid/TP30000324-TPXREF115" title="KeyLargo I/O Controller"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF115" title="KeyLargo I/O Controller"></a>
<a name="TPXREF115" title="KeyLargo I/O Controller"></a>
<br><h2><font face="Lucida Grande,Helvetica,Arial">KeyLargo I/O Controller</font></h2>
<p>The KeyLargo custom IC, the third major component of the Xserve
architecture, is connected to the main PCI bus through a dedicated
PCI-to-PCI bridge. It provides all the I/O functions except Ethernet
and FireWire. The KeyLargo IC provides two USB root hubs, a UATA
interface, and support for the LED display. </p>




    <h4><font face="Lucida Grande,Helvetica,Arial">This section covers:</font></h4>
    
    <blockquote>
        
            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF116">DMA Support</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF117">Interrupt Support</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF118">USB Interface</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF130">Serial Interface</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF120">Ultra ATA Interface</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF124">Power Controller</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF131">System Monitor IC</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF132">System Activity Lights</a>
            
        <br>

            <a href="chapter_3_section_5.html#//apple_ref/doc/uid/TP30000324/TPXREF133">Device Identification</a>
            
        <br>

    </blockquote>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF116"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF116"></a>
<a name="TPXREF116"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">DMA Support</font></h3>
<p>The KeyLargo IC provides DB-DMA (descriptor-based direct memory
access) support for the UATA interface and the LED matrix display.
The DB DMA system provides a scatter-gather process based on memory-resident
data structures that describe the data transfers. The DMA engine
is enhanced to allow bursting of data files for improved performance.</p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF117"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF117"></a>
<a name="TPXREF117"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">Interrupt Support</font></h3>
<p>The interrupt controller for the Xserve system is an MPIC
cell in the KeyLargo IC. In addition to accepting all the KeyLargo
internal interrupt sources, the MPIC controller accepts external
interrupts from dedicated interrupt pins and serial interrupts from
the U2 serial interrupt stream. The signals from the U2 IC are synchronized
to the operation of the MPIC circuitry, so there is no additional
interrupt latency on the U2 interrupts. </p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF118"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF118"></a>
<a name="TPXREF118"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">USB Interface</font></h3>
<p>The KeyLargo IC implements two independent USB root hubs,
each of which is connected to one of the ports on the back panel
of the computer. The use of two independent hubs allows both USB
ports to support high data rate devices at the same time with no degradation
of their performance. If a user connects a high-speed device to
one port and another high-speed device to the other, both devices
can operate at their full data rates. </p>
<p>The two external USB connectors support USB devices with data
transfer rates of 1.5 Mbps or 12 Mbps. For more information, see <a href="../3Input-Output/chapter_4_section_2.html#//apple_ref/doc/uid/TP30000325/TPXREF102">&#8220;USB Ports&#8221;</a>. </p>
<p>The USB ports comply with the Universal Serial Bus Specification
1.1 Final Draft Revision. The USB register set complies with the
Open Host Controller Interface (OHCI) specification. </p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF130"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF130"></a>
<a name="TPXREF130"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">Serial Interface</font></h3>
<p>The KeyLargo IC implements an RS-232-compatible serial port
for use with a terminal. See see <a href="../3Input-Output/chapter_4_section_5.html#//apple_ref/doc/uid/TP30000325/TPXREF164">&#8220;Serial Port&#8221;</a>. You
can use the RI input on the serial port connector to wake the Xserve
system from sleep mode.</p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF120"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF120"></a>
<a name="TPXREF120"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">Ultra ATA Interface </font></h3>
<p>In the slot load Xserve, the KeyLargo IC provides an ultra
ATA (UATA) interface. The UATA interface supports the CD-ROM drive
or optional Combo drive mounted on the front panel. </p>
<p>For information about the optical drive, see <a href="../3Input-Output/chapter_4_section_6.html#//apple_ref/doc/uid/TP30000325/TPXREF113">&#8220;CD-ROM Drive&#8221;</a> or <a href="../3Input-Output/chapter_4_section_6.html#//apple_ref/doc/uid/TP30000325/TPXREF115">&#8220;Combo (DVD-ROM/CD-RW) Drive (Optional)&#8221;</a>. </p>
<p>The KeyLargo IC provides DB-DMA (descriptor-based direct memory
access) support for the UATA interface.</p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF124"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF124"></a>
<a name="TPXREF124"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">Power Controller</font></h3>
<p>The power management controller in Xserve is a microcontroller
called the PMU99. It supports several modes of power management
that provide significantly lower power consumption than previous
systems. </p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF131"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF131"></a>
<a name="TPXREF131"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">System Monitor IC</font></h3>
<p>The Xserve hardware contains an IC that monitors system voltages
and the operation of both fans in the Xserve enclosure. Voltages
monitored include 5 V main, 12 V main, 3.3 V trickle, 2.5 V sleep,
logic Vcore and processor Vcore. The system monitor IC also contains a
built-in temperature sensor that measures the hardware&#8217;s ambient
temperature to a resolution of 1 degree C; a second sensor on the
processor card measures local processor temperature. Software can
access the system monitor IC through the second U2 IIC bus at port
address 0x5A.</p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF132"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF132"></a>
<a name="TPXREF132"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">System Activity Lights</font></h3>
<p>Two rows of eight lights indicate system activity. In a server
with a single processor, the rows of system activity lights operate
together; in a dual-processor server, the rows of lights operate
independently to show each processor&#8217;s activity. In that case,
CPU 0 is shown by the top row, CPU 1 by the bottom.</p>
<a name="//apple_ref/doc/uid/TP30000324-TPXREF133"></a>
<a name="//apple_ref/doc/uid/TP30000324/TPXREF133"></a>
<a name="TPXREF133"></a>
<br><h3><font face="Lucida Grande,Helvetica,Arial">Device Identification</font></h3>
<p>Each Xserve boot ROM contains a unique device serial number.
However, because the boot ROM is a flash EPROM device, it is possible
to overwrite the serial number and lose it irrecoverably. As an
alternative, software that needs to identify an individual Xserve computer
can access the <tt>local-mac-address</tt> property
of its Ethernet node, which is set by Open Firmware at boot time.
You can read this property using a tool such as IORegistry Explorer.</p>

        <br><br> 
        <!-- insert Show/Hide frames -->
        <script type="text/javascript" language="JavaScript"><!--
        function loadFrames(){
            if (top == self || (parent.frames[1].name != doc))
                top.location.href = 'index.html?' + location.href;
        }
            
        if (self != top) {
            // loaded in frames
            document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
        }
        else {
            // not loaded frames
            document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
        }
        //--></script>
        <!-- end Show/Hide frames -->
        <a href="chapter_3_section_4.html" target="_self"><img src="../images/previous.gif" border="0" alt="Previous"></a>&nbsp;
        <a href="chapter_3_section_6.html" target="_self"><img src="../images/next.gif" border="0" alt="Next"></a>

        <br><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2003 Apple Computer, Inc. (Last Updated April 22, 2003)</font>

        
        <!-- start of footer -->
        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
    </BODY>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>NSTextInputClient Protocol Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="NSTextInputClient Protocol Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40007873-RH2" title="NSTextInputClient"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Cocoa/index.html#//apple_ref/doc/uid/TP30001281-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../../../reference/Cocoa/idxEventsOtherInput-date.html#//apple_ref/doc/uid/TP30001281-TP30000416-TP30000447" target="_top">Events &amp; Other Input</a> &gt; <a href="../index.html" target="_top">NSTextInputClient Protocol Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/History.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/occ/intf/NSTextInputClient" title="NSTextInputClient"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-BCIGHAHG" title="NSTextInputClient"></a><h1>NSTextInputClient Protocol Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span class="noWrap">Adopted by</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTextView" target="_top">NSTextView</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px">/System/Library/Frameworks/<a href="../../ApplicationKit/ObjC_classic/index.html#//apple_ref/doc/uid/20001093" target="_top">AppKit.framework</a></div></td></tr><tr><td scope="row"><strong>Availability</strong></td><td><div style="margin-bottom:1px"><div>Available in Mac OS X v10.5 and later.</div></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">NSTextInputClient.h</span><br/></div></td></tr></table></div><br/>

<a name="//apple_ref/doc/uid/TP40007873-RH2-414" title="Overview"></a><h2>Overview</h2>

<p class="spaceabove">The <code>NSTextInputClient</code> protocol defines the methods that Cocoa text views must implement in order to interact properly with the text input management system. To create another text view class, you can either subclass <code>NSTextView</code> (and not <code>NSText</code>, for historical reasons), or subclass <code>NSView</code> and implement the <code>NSTextInputClient</code> protocol</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_17" title="Important:"></a><p><strong>Important:</strong>&nbsp;Methods specific to the <code>NSTextInputClient</code> protocol are intended for dealing with text input and generally are not suitable for other purposes.</p><p></p></div>




<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_9" title="Tasks"></a><h2>Tasks</h2>
<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_10" title="Handling Marked Text"></a>
		<h3 class="tasks">Handling Marked Text</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/hasMarkedText">&#8211;&#xA0;hasMarkedText</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a Boolean value indicating whether the receiver has marked text.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/markedRange">&#8211;&#xA0;markedRange</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the range of the marked text.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/selectedRange">&#8211;&#xA0;selectedRange</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the range of selected text. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/setMarkedText:selectedRange:replacementRange:">&#8211;&#xA0;setMarkedText:selectedRange:replacementRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Replaces a specified range in the receiver’s text storage with the given string and sets the selection.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/unmarkText">&#8211;&#xA0;unmarkText</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Unmarks the marked text.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/validAttributesForMarkedText">&#8211;&#xA0;validAttributesForMarkedText</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns an array of attribute names recognized by the receiver.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_11" title="Storing Text"></a>
		<h3 class="tasks">Storing Text</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/attributedSubstringForProposedRange:actualRange:">&#8211;&#xA0;attributedSubstringForProposedRange:actualRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns an attributed string derived from the given range in the receiver&#8217;s text storage.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/insertText:replacementRange:">&#8211;&#xA0;insertText:replacementRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Inserts the given string into the receiver, replacing the specified content.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_12" title="Getting Character Coordinates"></a>
		<h3 class="tasks">Getting Character Coordinates</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/characterIndexForPoint:">&#8211;&#xA0;characterIndexForPoint:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the index of the character whose bounding rectangle includes the given point.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/firstRectForCharacterRange:actualRange:">&#8211;&#xA0;firstRectForCharacterRange:actualRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the first logical boundary rectangle for characters in the given range.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_13" title="Binding Keystrokes"></a>
		<h3 class="tasks">Binding Keystrokes</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/doCommandBySelector:">&#8211;&#xA0;doCommandBySelector:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Invokes the action specified by the given selector.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_14" title="Optional Methods"></a>
		<h3 class="tasks">Optional Methods</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/attributedString">&#8211;&#xA0;attributedString</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns an attributed string representing the receiver&#8217;s text storage. (optional)'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/fractionOfDistanceThroughGlyphForPoint:">&#8211;&#xA0;fractionOfDistanceThroughGlyphForPoint:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the fraction of the distance from the left side of the character to the right side that a given point lies. (optional)'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/baselineDeltaForCharacterAtIndex:">&#8211;&#xA0;baselineDeltaForCharacterAtIndex:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the baseline position of a given character relative to the origin of rectangle returned by <code>firstRectForCharacterRange:actualRange:</code>. (optional)'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/windowLevel">&#8211;&#xA0;windowLevel</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the window level of the receiver. (optional)'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_15" title="Instance Methods"></a><h2>Instance Methods</h2><a name="//apple_ref/occ/intfm/NSTextInputClient/attributedString" title="attributedString"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_5" title="attributedString"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_18"></a><h3 class="verytight">attributedString</h3><p class="spaceabove">Returns an attributed string representing the receiver's text storage. (optional)</p><p class="spaceabovemethod">- (<a href="../../Foundation/Classes/NSAttributedString_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSAttributedString" target="_top">NSAttributedString</a> *)attributedString</p><h5 class="tight">Return Value</h5><p>The attributed string of the receiver’s text storage.</p><h5 class="tight">Discussion</h5><p>Implementation of this method is optional. A class adopting the <code>NSTextInputClient</code> protocol can implement this interface if it can be done efficiently to enable callers of this interface to access arbitrary portions of the receiver's content more efficiently.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/attributedSubstringForProposedRange:actualRange:" title="attributedSubstringForProposedRange:actualRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_2" title="attributedSubstringForProposedRange:actualRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_19"></a><h3 class="verytight">attributedSubstringForProposedRange:actualRange:</h3><p class="spaceabove">Returns an attributed string derived from the given range in the receiver's text storage.</p><p class="spaceabovemethod">- (<a href="../../Foundation/Classes/NSAttributedString_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSAttributedString" target="_top">NSAttributedString</a> *)attributedSubstringForProposedRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)<em>aRange</em>
actualRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRangePointer" target="_top">NSRangePointer</a>)<em>actualRange</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aRange</em></dt><dd><p>The range in the text storage from which to create the returned string.</p></dd><dt><em>actualRange</em></dt><dd><p>The actual range of the returned string if it was adjusted, for example, to a grapheme cluster boundary or for performance or other reasons. <code>NULL</code> if range was not adjusted.</p></dd></dl><h5 class="tight">Return Value</h5><p>The string created from the given range. May return <code>nil</code>.</p><h5 class="tight">Discussion</h5><p>An implementation of this method should be prepared for <em>aRange</em> to be out of bounds. For example, the InkWell text input service can ask for the contents of the text input client that extends beyond the document’s range. In this case, you should return the intersection of the document’s range and <em>aRange</em>. If the location of <em>aRange</em> is completely outside of the document’s range, return <code>nil</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/baselineDeltaForCharacterAtIndex:" title="baselineDeltaForCharacterAtIndex:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_7" title="baselineDeltaForCharacterAtIndex:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_20"></a><h3 class="verytight">baselineDeltaForCharacterAtIndex:</h3><p class="spaceabove">Returns the baseline position of a given character relative to the origin of rectangle returned by <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/firstRectForCharacterRange:actualRange:">firstRectForCharacterRange:actualRange:</a></code>. (optional)</p><p class="spaceabovemethod">- (<!--a  -->CGFloat<!--/a-->)baselineDeltaForCharacterAtIndex:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSUInteger" target="_top">NSUInteger</a>)<em>anIndex</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>anIndex</em></dt><dd><p>Index of the character whose baseline is tested.</p></dd></dl><h5 class="tight">Return Value</h5><p>The vertical distance, in points, between the baseline of the character at <em>anIndex</em> and the rectangle origin.</p><h5 class="tight">Discussion</h5><p>Implementation of this method is optional. This information allows the caller to determine finer-grained character positioning within the text storage of the text view adopting <code>NSTextInputClient</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/characterIndexForPoint:" title="characterIndexForPoint:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_3" title="characterIndexForPoint:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_21"></a><h3 class="verytight">characterIndexForPoint:</h3><p class="spaceabove">Returns the index of the character whose bounding rectangle includes the given point.</p><p class="spaceabovemethod">- (<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSUInteger" target="_top">NSUInteger</a>)characterIndexForPoint:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSPoint" target="_top">NSPoint</a>)<em>aPoint</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aPoint</em></dt><dd><p>The point to test, in screen coordinates.</p></dd></dl><h5 class="tight">Return Value</h5><p>The character index, measured from the start of the receiver’s text storage, of the character containing the given point. Returns <code>NSNotFound</code> if the cursor is not within a character’s bounding rectangle.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/doCommandBySelector:" title="doCommandBySelector:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_4" title="doCommandBySelector:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_22"></a><h3 class="verytight">doCommandBySelector:</h3><p class="spaceabove">Invokes the action specified by the given selector.</p><p class="spaceabovemethod">- (void)doCommandBySelector:(SEL)<em>aSelector</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aSelector</em></dt><dd><p>The selector to invoke.</p></dd></dl><h5 class="tight">Discussion</h5><p>If <em>aSelector</em> cannot be invoked, then <code>doCommandBySelector:</code> should not pass this message up the responder chain. <code>NSResponder</code> also implements this method, and it does forward uninvokable commands up the responder chain, but a text view should not. A text view implementing the <code>NSTextInputClient</code> protocol inherits from <code>NSView</code>, which inherits from <code>NSResponder</code>, so your implementation of this method will override the one in <code>NSResponder</code>. It should not call <code>super</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="../../ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/interpretKeyEvents:" target="_top">&#8211;&#xA0;interpretKeyEvents:</a></code> (NSResponder)</li><li class="availability">  <code><a href="../../ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/doCommandBySelector:" target="_top">&#8211;&#xA0;doCommandBySelector:</a></code> (NSResponder)</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/firstRectForCharacterRange:actualRange:" title="firstRectForCharacterRange:actualRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-SW6" title="firstRectForCharacterRange:actualRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_23"></a><h3 class="verytight">firstRectForCharacterRange:actualRange:</h3><p class="spaceabove">Returns the first logical boundary rectangle for characters in the given range.</p><p class="spaceabovemethod">- (<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRect" target="_top">NSRect</a>)firstRectForCharacterRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)<em>aRange</em>
actualRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRangePointer" target="_top">NSRangePointer</a>)<em>actualRange</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aRange</em></dt><dd><p>The character range whose boundary rectangle is returned.</p></dd><dt><em>actualRange</em></dt><dd><p>If non-<code>NULL</code>, contains the character range corresponding to the returned area if it was adjusted, for example, to a grapheme cluster boundary or characters in the first line fragment.</p></dd></dl><h5 class="tight">Return Value</h5><p>The boundary rectangle for the given range of characters, in screen coordinates. The rectangle’s  <code>size</code> value can be negative if the text flows to the left.</p><h5 class="tight">Discussion</h5><p>If <em>aRange</em> spans multiple lines of text in the text view, the rectangle returned is the one surrounding the characters in the first line. In that case <em>actualRange</em> contains the range covered by the first rect, so you can query all line fragments by invoking this method repeatedly. If the length of <em>aRange</em> is 0 (as it would be if there is nothing selected at the insertion point), the rectangle coincides with the insertion point, and its width is 0.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/fractionOfDistanceThroughGlyphForPoint:" title="fractionOfDistanceThroughGlyphForPoint:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_6" title="fractionOfDistanceThroughGlyphForPoint:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_24"></a><h3 class="verytight">fractionOfDistanceThroughGlyphForPoint:</h3><p class="spaceabove">Returns the fraction of the distance from the left side of the character to the right side that a given point lies. (optional)</p><p class="spaceabovemethod">- (<!--a  -->CGFloat<!--/a-->)fractionOfDistanceThroughGlyphForPoint:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSPoint" target="_top">NSPoint</a>)<em>aPoint</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aPoint</em></dt><dd><p>The point to test.</p></dd></dl><h5 class="tight">Return Value</h5><p>The fraction of the distance <em>aPoint</em> is through the glyph in which it lies. May be 0 or 1 if <em>aPoint</em> is not within the bounding rectangle of a glyph (0 if the point is to the left or above the glyph; 1 if it's to the right or below).</p><h5 class="tight">Discussion</h5><p>Implementation of this method is optional. This allows caller to perform precise selection handling.</p><p>For purposes such as dragging out a selection or placing the insertion point, a partial percentage less than or equal to 0.5 indicates that <em>aPoint</em> should be considered as falling before the glyph; a partial percentage greater than 0.5 indicates that it should be considered as falling after the glyph. If the nearest glyph doesn’t lie under <em>aPoint</em> at all (for example, if <em>aPoint</em> is beyond the beginning or end of a line), this ratio is 0 or 1.</p><p>For example, if the glyph stream contains the glyphs “A” and “b”, with the width of “A” being 13 points, and <em>aPoint</em> is 8 points from the left side of “A”, then the fraction of the distance is 8/13, or 0.615. In this case, the <em>aPoint</em> should be considered as falling between “A” and “b” for purposes such as dragging out a selection or placing the insertion point.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/hasMarkedText" title="hasMarkedText"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-SW2" title="hasMarkedText"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_25"></a><h3 class="verytight">hasMarkedText</h3><p class="spaceabove">Returns a Boolean value indicating whether the receiver has marked text.</p><p class="spaceabovemethod">- (BOOL)hasMarkedText</p><h5 class="tight">Return Value</h5><p><code>YES</code> if the receiver has marked text; otherwise <code>NO</code>.</p><h5 class="tight">Discussion</h5><p>The text view itself may call this method to determine whether there currently is marked text. <code>NSTextView</code>, for example, disables the Edit > Copy menu item when this method returns <code>YES</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/markedRange">&#8211;&#xA0;markedRange</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/insertText:replacementRange:" title="insertText:replacementRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-tryLock" title="insertText:replacementRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_26"></a><h3 class="verytight">insertText:replacementRange:</h3>
<p class="spaceabove">Inserts the given string into the receiver, replacing the specified content.</p><p class="spaceabovemethod">- (void)insertText:(id)<em>aString</em>
replacementRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)<em>replacementRange</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aString</em></dt><dd><p>The text to insert, either an <code>NSString</code> or <code>NSAttributedString</code> instance.</p></dd><dt><em>replacementRange</em></dt><dd><p>The range of content to replace in the receiver’s text storage.</p></dd></dl><h5 class="tight">Discussion</h5><p>This method is the entry point for inserting text typed by the user and is generally not suitable for other purposes. Programmatic modification of the text is best done by operating on the text storage directly. Because this method pertains to the actions of the user, the text view must be editable for the insertion to work.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/markedRange" title="markedRange"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-SW1" title="markedRange"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_27"></a><h3 class="verytight">markedRange</h3><p class="spaceabove">Returns the range of the marked text.</p><p class="spaceabovemethod">- (<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)markedRange</p><h5 class="tight">Return Value</h5><p>The range of marked text or <code>{NSNotFound, 0}</code> if there is no marked range.</p><h5 class="tight">Discussion</h5><p>The returned range measures from the start of the receiver’s text storage. The return value’s <code>location</code> is <code>NSNotFound</code> and its <code>length</code> is 0 if and only if <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/hasMarkedText">hasMarkedText</a></code> returns <code>NO</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/hasMarkedText">&#8211;&#xA0;hasMarkedText</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/setMarkedText:selectedRange:replacementRange:">&#8211;&#xA0;setMarkedText:selectedRange:replacementRange:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/unmarkText">&#8211;&#xA0;unmarkText</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/selectedRange" title="selectedRange"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-SW5" title="selectedRange"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_28"></a><h3 class="verytight">selectedRange</h3><p class="spaceabove">Returns the range of selected text. </p><p class="spaceabovemethod">- (<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)selectedRange</p><h5 class="tight">Return Value</h5><p>The range of selected text or <code>{NSNotFound, 0}</code> if there is no selection.</p><h5 class="tight">Discussion</h5><p>The returned range measures from the start of the receiver’s text storage, that is, from 0 to the document length.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/setMarkedText:selectedRange:replacementRange:">&#8211;&#xA0;setMarkedText:selectedRange:replacementRange:</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/setMarkedText:selectedRange:replacementRange:" title="setMarkedText:selectedRange:replacementRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-SW3" title="setMarkedText:selectedRange:replacementRange:"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_29"></a><h3 class="verytight">setMarkedText:selectedRange:replacementRange:</h3><p class="spaceabove">Replaces a specified range in the receiver’s text storage with the given string and sets the selection.</p><p class="spaceabovemethod">- (void)setMarkedText:(id)<em>aString</em>
selectedRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)<em>selectedRange</em>
replacementRange:(<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSRange" target="_top">NSRange</a>)<em>replacementRange</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aString</em></dt><dd><p>The string to insert. Can be either an <code>NSString</code> or <code>NSAttributedString</code> instance.</p></dd><dt><em>selectedRange</em></dt><dd><p>The range to set as the selection, computed from the beginning of the inserted string.</p></dd><dt><em>replacementRange</em></dt><dd><p>The range to replace, computed from the beginning of the marked text.</p></dd></dl><h5 class="tight">Discussion</h5><p>If there is no marked text, the current selection is replaced. If there is no selection, the string is inserted at the insertion point. </p><p>When <em>aString</em> is an <code>NSString</code> object, the receiver is expected to render the marked text with distinguishing appearance (for example, <code>NSTextView</code> renders with <code><a href="../../ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTextView/markedTextAttributes" target="_top">markedTextAttributes</a></code>).</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/selectedRange">&#8211;&#xA0;selectedRange</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/unmarkText">&#8211;&#xA0;unmarkText</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/unmarkText" title="unmarkText"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-SW4" title="unmarkText"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_30"></a><h3 class="verytight">unmarkText</h3><p class="spaceabove">Unmarks the marked text.</p><p class="spaceabovemethod">- (void)unmarkText</p><h5 class="tight">Discussion</h5><p>The receiver removes any marking from pending input text and disposes of the marked text as it wishes. The text view should accept the marked text as if it had been inserted normally. If there is no marked text, the invocation of this method has no effect.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/selectedRange">&#8211;&#xA0;selectedRange</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/intfm/NSTextInputClient/setMarkedText:selectedRange:replacementRange:">&#8211;&#xA0;setMarkedText:selectedRange:replacementRange:</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/validAttributesForMarkedText" title="validAttributesForMarkedText"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_1" title="validAttributesForMarkedText"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_31"></a><h3 class="verytight">validAttributesForMarkedText</h3><p class="spaceabove">Returns an array of attribute names recognized by the receiver.</p><p class="spaceabovemethod">- (<a href="../../Foundation/Classes/NSArray_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSArray" target="_top">NSArray</a>*)validAttributesForMarkedText</p><h5 class="tight">Return Value</h5><p>An array of <code>NSString</code> objects representing names for the supported attributes.</p><h5 class="tight">Discussion</h5><p>Returns an empty array if no attributes are supported. See <em><a href="../../ApplicationKit/Classes/NSAttributedString_AppKitAdditions/index.html#//apple_ref/doc/uid/TP40004007" target="_top">NSAttributedString Application Kit Additions Reference</a></em> for the set of string constants representing standard attributes.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code><a name="//apple_ref/occ/intfm/NSTextInputClient/windowLevel" title="windowLevel"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_8" title="windowLevel"></a><a name="//apple_ref/doc/uid/TP40007873-RH2-DontLinkElementID_32"></a><h3 class="verytight">windowLevel</h3><p class="spaceabove">Returns the window level of the receiver. (optional)</p><p class="spaceabovemethod">- (<a href="../../Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSInteger" target="_top">NSInteger</a>)windowLevel</p><h5 class="tight">Return Value</h5><p>The window level of the receiver.</p><h5 class="tight">Discussion</h5><p>Implementation of this method is optional. A class adopting <code>NSTextInputClient</code> can implement this interface to specify its window level if it is higher than <code>NSFloatingWindowLevel</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSTextInputClient.h</code>


        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/History.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Reference/NSTextInputClient_Protocol/Reference/Reference.html%3Fid%3DTP40007873-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Reference/NSTextInputClient_Protocol/Reference/Reference.html%3Fid%3DTP40007873-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Reference/NSTextInputClient_Protocol/Reference/Reference.html%3Fid%3DTP40007873-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PostHighLevelEvent(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING65></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-64.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-66.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A> / <A HREF="Toolbox-43.html"><B>Event Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-49.html"><B>Event Manager Routines</B></A> / <A HREF="Toolbox-64.html"><B>Sending Events</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING65-0></A>
<H3>PostHighLevelEvent</H3>
 <A NAME=MARKER-11-427></A><A NAME=MARKER-2-330></A>You can use the <CODE>PostHighLevelEvent</CODE> function to send a high-level event to <BR>another application.<A NAME=MARKER-2-329></A> <P>
<PRE>
FUNCTION PostHighLevelEvent (theEvent: EventRecord;
                              receiverID: Ptr; msgRefcon: LongInt;
                              msgBuff: Ptr; msgLen: LongInt;
                              postingOptions: LongInt): OSErr;
</PRE>
<DL>
<DT><CODE>theEvent</CODE>
<DD> The event to send. Your application should fill out the <CODE>what</CODE>, <CODE>message</CODE>, and <CODE>where</CODE> fields of the event record. Specify the <CODE>kHighLevelEvent</CODE> constant in the <CODE>what</CODE> field, the event class of the high-level event in the <CODE>message</CODE> field, and the event ID in the <CODE>where</CODE> field. You do not need to fill out the <CODE>when</CODE> or <CODE>modifiers</CODE> fields; the Event Manager automatically assigns the appropriate values to these fields when you send the message.
<DT><CODE>receiverID</CODE>
<DD> The recipient of the high-level event. When sending an event to another application on the local computer, you can specify the recipient of the event by session reference number, process serial number, signature, or port name and location name. When sending an event to an application on a remote computer, you can specify the recipient only by the session reference number or by the port name and location name.
<DT>
<DD> To specify a port name and location name, provide the address of a target ID record in the <CODE>receiverID</CODE> parameter. To specify a process serial number, provide its address in the <CODE>receiverID</CODE> parameter. To specify a session reference number, or signature, provide the data (cast to the <CODE>Ptr</CODE> data type) in the <CODE>receiverID</CODE> parameter.
<DT><CODE>msgRefcon</CODE>
<DD> A unique number that identifies the communication associated with this event. Your application can set this field to any value it chooses. If you are replying to a high-level event, you should use the same value in the <CODE>msgRefcon</CODE> parameter as specified in the high-level event that originated the request.
<DT><CODE>msgBuff</CODE>
<DD> A pointer to a data buffer that contains any additional data for the event.
<DT><CODE>msgLen</CODE>
<DD> The size (in bytes) of the data buffer pointed to by the <CODE>msgBuff</CODE> parameter.
<DT><CODE>postingOptions</CODE>
<DD> Options associated with the <CODE>receiverID</CODE> parameter and delivery options associated with the event. You can specify one or more delivery options to indicate whether you want the other application to receive the event at the next opportunity and to indicate whether you want acknowledgment that the event was received by the other application. You use the options associated with the <CODE>receiverID</CODE> parameter to indicate how you are specifying the recipient of the event--whether by port name and location name in a target ID record, by session reference number, by process serial number, or by signature.
<DT>
<DD> You can use a combination of these constants in the <CODE>postingOptions</CODE> parameter:
</DL>
<PRE>
            CONST                   
            nAttnMsg 
               = $00000001; {give this message priority}
            nReturnReceipt 
               = $00000200; {return receipt requested}
            receiverIDisTargetID 
               = $00005000; {ID is port name and location name}
            receiverIDisSessionID
               = $00006000; {ID is PPC session reference number}
            receiverIDisSignature
               = $00007000; {ID is creator signature}
            receiverIDisPSN   
               = $00008000; {ID is process serial number}
</PRE>
<A NAME=HEADING65-12></A>
<H5>DESCRIPTION</H5>
 The <CODE>PostHighLevelEvent</CODE> function posts the high-level event to the specified process. <P>
 If the application to which you are sending a high-level event terminates, you receive <BR>the result code <CODE>sessionClosedErr</CODE> the next time your application calls <CODE>PostHighLevelEvent</CODE> to send another high-level event to the terminated application. If you do not care about any state information about that session, you can just resend your event. Otherwise, you must restart another session and resend your event. <P>
 If your application is running in the background and posts a high-level event that requires the network authentication dialog box to be displayed, <CODE>PostHighLevelEvent</CODE> returns the <CODE>noUserInteractionAllowed</CODE> result code, does not display the network authentication dialog box, and does not send the event. If your application receives the <CODE>noUserInteractionAllowed</CODE> result code, you can use the Notification Manager to inform the user that your application needs attention. When the user brings your application to the foreground, you can repost the event. If the reposting is successful, your application can continue to post high-level events without further user interaction. Note that <CODE>PostHighLevelEvent</CODE> can return <CODE>noUserInteractionAllowed</CODE> only on the first posting of a high-level event to a remote target. <P>
<A NAME=HEADING65-16></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>PostHighLevelEvent</CODE> function may move or purge memory. You should not call this function from within an interrupt, such as in a completion routine or VBL task.<P>
<A NAME=HEADING65-18></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>PostHighLevelEvent</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro <TH>Selector <TR>
<TD>_OSDispatch<TD>$0034 </TABLE>
<P>
<A NAME=HEADING65-20></A>
<H5>SEE ALSO</H5>
 For details on how to send Apple events to other applications using the <CODE>AESend</CODE> function, see <I><A HREF="../IAC/IAC-2.html">Inside Macintosh: Interapplication Communication</A></I>.<P>
<A NAME=HEADING65-22></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>connectionInvalid<TD>-609<TD>Connection is invalid<TR>
<TD>noUserInteractionAllowed<TD>-610<TD>Cannot interact directly with user<TR>
<TD>sessionClosedErr<TD>-917<TD>Session closed <A NAME=MARKER-2-1></A></TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-64.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-66.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

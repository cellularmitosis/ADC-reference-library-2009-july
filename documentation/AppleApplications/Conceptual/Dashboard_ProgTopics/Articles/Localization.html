<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Dashboard Programming Topics: Localizing Widgets</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Localizing Widgets"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40003047" title="Localizing Widgets"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../Dashboard-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP40001366" target="_top">Dashboard</a> &gt; <a href="../index.html" target="_top">Dashboard Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../DragAndDrop.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AccessKeys.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40003047-SW2" title="Localizing Widgets"></a><hr /><H1>Localizing Widgets</H1><p>Localizing your widget provides a more comfortable and pleasant experience for foreign language speakers. If your widget is used in areas where languages other than English are spoken, you should localize it.</p><p>There are two sides to localizing your widget:</p><ul class="ul"><li class="li"><p>What Dashboard does for you</p></li><li class="li"><p>What you need to provide Dashboard</p></li></ul><p>In addition to localizing your content, this chapter covers how to localize your widget’s name in the Finder and the widget bar.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_106" title="Note"></a><p><strong>Note:</strong>&nbsp;The <em><a href="../../../../../samplecode/HelloWelt/index.html#//apple_ref/doc/uid/DTS10003696" target="_top">Hello Welt</a></em> example provides sample code that shows how to localize a widget.</p><img src = "../Art/hello_welt.gif" alt = "The Hello Welt Widget" width="237" height="133"></p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Localization.html#//apple_ref/doc/uid/TP40003047-DontLinkElementID_41">Language Projects</a>
				
			<br/>
			
        
			
			
				<a href="Localization.html#//apple_ref/doc/uid/TP40003047-DontLinkElementID_42">What Dashboard Does for You</a>
				
			<br/>
			
        
			
			
				<a href="Localization.html#//apple_ref/doc/uid/TP40003047-DontLinkElementID_43">What You Need to Provide Dashboard</a>
				
			<br/>
			
        
			
			
				<a href="Localization.html#//apple_ref/doc/uid/TP40003047-DontLinkElementID_44">Localized Strings Example</a>
				
			<br/>
			
        
			
			
				<a href="Localization.html#//apple_ref/doc/uid/TP40003047-DontLinkElementID_45">Localized Widget Names</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_41" title="Language Projects"></a><h2>Language Projects</h2><p>Before talking about localizing a Dashboard widget, you should be familiar with how Mac OS X handles localization. For most applications on Mac OS X, localized resources such as images, strings, and nib files exist within the application’s bundle in <code>Contents/Resources/</code>. Each language gets its own directory, named after the language whose resources it holds. The names and location within the bundle are strict, as Mac OS X is expecting them to be there if a localization is requested. These folders are called <em>language project directories</em> and always end in the extension <code>.lproj</code>.</p><p>When an application is launched, the executable asks Mac OS X for certain localized resources. When this happens, Mac OS X looks for a language project within the application’s bundle that corresponds with the first entry in the language precedence list, as set in System Preferences. If no language project for the preferred language is found, Mac OS X looks for a language project corresponding to the next language in the precedence list, and so on. Note that this process is mostly automatic, in that the application doesn’t do any of the actual searching for language projects; it simply requests resources and Mac OS X provides them.</p><p>More on changing language and local preferences can be found in <span class="content_text"><!--a target="_top" -->Language and Local Preferences<!--/a--></span>.</p><a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_42" title="What Dashboard Does for You"></a><h2>What Dashboard Does for You</h2><p>Widgets running within Dashboard use a similar process as Mac OS X applications when trying to load resources. Any time a resource load occurs in your code, Dashboard first looks for it within the language project directories in the Widget bundle. If Dashboard finds the resource within that language project directory, it provides it back to the widget. If not, searches through the rest of the language project directories, based on the precedence set in System Preferences. Finally, if the resource is not found in any language projects, Dashboard looks relative to the root level of the bundle.</p><p>Dashboard will look for localized resources in the following contexts:</p><ul class="ul"><li class="li"><p>Any time the <code>@import</code> directive is used</p></li><li class="li"><p>Any time the <code>src</code> attribute is used, including (but not limited to):</p></li><li class="li"><ul class="nested"><li class="nested li"><p><code>&lt;script src='myLogic.js' /></code></p></li><li class="nested li"><p><code>&lt;img src="myImage.png"></code></p></li></ul></li><li class="li"><p>Any other resource load targeted within your widget bundle</p></li></ul><p>This is an additional reason behind recommending that you split your markup, logic, and design into separate files, as discussed in <em><!--a target="_top" -->Dashboard Programming Guide<!--/a--></em>.</p><a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_43" title="What You Need to Provide Dashboard"></a><h2>What You Need to Provide Dashboard</h2><p>When localizing your widget, provide Dashboard with localized versions of your resources. These include, but are not limited to, any strings that your widgets displays, images that change based on a language or region, and language-specific layouts. If you import a style sheet into your widget instead of including it in your HTML file, you’ll be able to provide localized style sheets as well.</p><p>Each language you localize your widget into needs its own language project directory. In it you place all of the localized resources for that language. Each language project directory needs to be located at the root level of your widget. <span class="content_text"><a href="Localization.html#//apple_ref/doc/uid/TP40003047-SW1">Table 16</a></span> lists of common languages and their corresponding language project directory names:</p><a name="//apple_ref/doc/uid/TP40003047-SW1" title="Table 16Common languages and corresponding language project names"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 16&nbsp;&nbsp;</strong>Common languages and corresponding language project names</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Language</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Language project directory name</p></th></tr><tr><td  scope="row"><p>Chinese (Simplified)</p></td><td ><p><code>zh-Hans.lproj</code></p></td></tr><tr><td  scope="row"><p>Chinese (Traditional)</p></td><td ><p><code>zh-Hant.lproj</code></p></td></tr><tr><td  scope="row"><p>Danish</p></td><td ><p><code>da.lproj</code></p></td></tr><tr><td  scope="row"><p>Dutch</p></td><td ><p><code>nl.lproj</code></p></td></tr><tr><td  scope="row"><p>English</p></td><td ><p><code>en.lproj</code></p></td></tr><tr><td  scope="row"><p>Finnish</p></td><td ><p><code>fi.lproj</code></p></td></tr><tr><td  scope="row"><p>French</p></td><td ><p><code>fr.lproj</code></p></td></tr><tr><td  scope="row"><p>German</p></td><td ><p><code>de.lproj</code></p></td></tr><tr><td  scope="row"><p>Italian</p></td><td ><p><code>it.lproj</code></p></td></tr><tr><td  scope="row"><p>Japanese</p></td><td ><p><code>ja.lproj</code></p></td></tr><tr><td  scope="row"><p>Korean</p></td><td ><p><code>ko.lproj</code></p></td></tr><tr><td  scope="row"><p>Norwegian</p></td><td ><p><code>nb.lproj</code></p></td></tr><tr><td  scope="row"><p>Portuguese</p></td><td ><p><code>pt.lproj</code></p></td></tr><tr><td  scope="row"><p>Swedish</p></td><td ><p><code>sv.lproj</code></p></td></tr><tr><td  scope="row"><p>Spanish</p></td><td ><p><code>es.lproj</code></p></td></tr></table></div><p>Note that these are just some of the possible localizations available. Mac OS X and Dashboard support many more languages and locals. <span class="content_text"><a href="../../../../MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html#//apple_ref/doc/uid/20002144" target="_top">Language Designations</a></span> discusses language project directory naming conventions used for localizing applications on Mac OS X. </p><a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_44" title="Localized Strings Example"></a><h2>Localized Strings Example</h2><p>An example for widget localization is to have all of your widget’s strings localized. In each localized strings file, you provide an array of strings whose index is a variable common to all of the localized string files. You then include that file in your HTML file, and when you need a string, you simply retrieve it from the array.</p><p>The first step to implementing this scheme is to have a uniformly named file containing the strings inside of properly named language project directories. For example, having a file named <code>LocalizedStrings.js</code> inside each of your language project directories. The file looks like this for the German localization:</p><div class="codesample"><table><tr><td scope="row"><pre>var localizedStrings = new Array;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>localizedStrings['Hello, World!'] = 'Hallo, Welt!';<span></span></pre></td></tr><tr><td scope="row"><pre>localizedStrings['Default'] = 'German';<span></span></pre></td></tr></table></div><p>Notice that the index into the <code>localizedStrings</code> array is a string. This is useful when combined with an accessor method that tries to retrieve the localized string:</p><div class="codesample"><table><tr><td scope="row"><pre>function getLocalizedString (key)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    try {<span></span></pre></td></tr><tr><td scope="row"><pre>        var ret = localizedStrings[key];<span></span></pre></td></tr><tr><td scope="row"><pre>        if (ret === undefined)<span></span></pre></td></tr><tr><td scope="row"><pre>            ret = key;<span></span></pre></td></tr><tr><td scope="row"><pre>        return ret;<span></span></pre></td></tr><tr><td scope="row"><pre>    } catch (ex) {}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return key;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The advantages to this are twofold: first, the index for a string is memorable, and secondly, if the string retrieval fails, the key string is returned. This way, you are assured that some string will always be returned, no matter the circumstances. This is especially valuable when you are testing your widget in Safari.</p><p>Finally, you’ll need to use the localized string in your widget. This code ties together all of these previous concepts and inserts the string into your widget:</p><div class="codesample"><table><tr><td scope="row"><pre>function setup()<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    document.getElementById('helloText').innerText = getLocalizedString('Hello, World!');<span></span></pre></td></tr><tr><td scope="row"><pre>    document.getElementById('language').innerText = getLocalizedString('Default');<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Since the proper localized strings file is already loaded, this will fetch the localized equivalent of "Hello, World!" in the <code>localizedStrings</code> array and placing it in your layout.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_107" title="Note"></a><p><strong>Note:</strong>&nbsp;The “HelloWelt" sample code also includes localized style sheets in each language project directory. This allows the design of the widget to vary based on the language. Remember to take varying string lengths into account when localizing your widget.</p></div><a name="//apple_ref/doc/uid/TP40003047-DontLinkElementID_45" title="Localized Widget Names"></a><h2>Localized Widget Names</h2><p>In addition to localizing the content of your widget, you should localize your widget’s name. The name is displayed in the Finder and the widget bar and is pulled from your <code>Info.plist</code> information property list file and localized <code>InfoPlist.strings</code> files.</p><p>In your Info.plist, you need to specify the key <code>CFBundleDisplayName</code> and provide a corresponding value:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>CFBundleDisplayName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>Hello World&lt;/string><span></span></pre></td></tr></table></div><p>This value is a default value that’s used if no localized string can be found. It also needs to be the name of your widget on disk, without the <code>.wdgt</code> file extension. Inside of each language project directory in your widget, place a file named <code>InfoPlist.strings</code> and in it provide the proper localized name using this format:</p><div class="codesample"><table><tr><td scope="row"><pre>CFBundleDisplayName = "Hallo Welt";<span></span></pre></td></tr></table></div><p>For a more in-depth look at using <code>CFBundleDisplayName</code>, read <em><a href="../../../../MacOSX/Conceptual/BPRuntimeConfig/index.html#//apple_ref/doc/uid/10000170i" target="_top">Runtime Configuration Guidelines</a></em>.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../DragAndDrop.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AccessKeys.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Conceptual/Dashboard_ProgTopics/Articles/Localization.html%3Fid%3DTP40002837-2.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Conceptual/Dashboard_ProgTopics/Articles/Localization.html%3Fid%3DTP40002837-2.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Conceptual/Dashboard_ProgTopics/Articles/Localization.html%3Fid%3DTP40002837-2.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

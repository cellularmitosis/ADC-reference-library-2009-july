<html><head><title>Mac OS X
 Manual Page For snmpusm(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/snmpusm" title="Mac OS X
 Manual Page for snmpusm(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/snmpusm"; name=snmpusm(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
SNMPUSM(1)                                        Net-SNMP                                        SNMPUSM(1)



<b>NAME</b>
       snmpusm - creates and maintains SNMPv3 users on a network entity

<b>SYNOPSIS</b>
       <b>snmpusm</b> [COMMON OPTIONS] <b>create</b> USER [CLONEFROM-USER]
       <b>snmpusm</b> [COMMON OPTIONS] <b>delete</b> USER
       <b>snmpusm</b> [COMMON OPTIONS] <b>cloneFrom</b> USER CLONEFROM-USER
       <b>snmpusm</b> [COMMON OPTIONS] [-Ca] [-Cx] <b>passwd</b> OLD-PASSPHRASE NEW-PASSPHRASE [USER]
       <b>snmpusm</b> [COMMON OPTIONS] &lt;-Ca | -Cx&gt; -Ck <b>passwd</b> OLD-KEY-OR-PASSPHRASE NEW-KEY-OR-PASSPHRASE [USER]
       <b>snmpusm</b> [COMMON OPTIONS] [-Ca] [-Cx] <b>changekey</b> [USER]


<b>DESCRIPTION</b>
       <b>snmpusm</b>  is  an  SNMP  application that can be used to do simple maintenance on the users known to an
       SNMP agent, by manipulating the agent's User-based Security Module (USM) table.  The user needs write
       access to the usmUserTable MIB table.  This tool can be used to create, delete, clone, and change the
       passphrase of users configured on a running SNMP agent.


<b>OPTIONS</b>
       Common options for all <b>snmpusm</b> commands:

       <b>-CE</b> <u>ENGINE-ID</u>
              Set usmUserEngineID to be used as part of the index of the usmUserTable.  Default  is  to  use
              the contextEngineID (set via -E or probed) as the usmUserEngineID.

       <b>-Cp</b> <u>STRING</u>
              Set the usmUserPublic value of the (new) user to the specified STRING.

       Options for the <b>passwd</b> and <b>changekey</b> commands:

       <b>-Ca</b>    Change the authentication key.

       <b>-Cx</b>    Change the privacy key.

       <b>-Ck</b>    Allows  to  use localized key (must start with 0x) instead of passphrase.  When this option is
              used, either the -Ca or -Cx option (but not both) must also be used.


<b>CREATING</b> <b>USERS</b>
       An unauthenticated SNMPv3 user can be created using the command

              <b>snmpusm</b> [OPTIONS] create USER

       This constructs an (inactive) entry in the usmUserTable, with no authentication or privacy  settings.
       In  principle,  this user should be useable for 'noAuthNoPriv' requests, but in practise the Net-SNMP
       agent will not allow such an entry to be made active.


       In order to activate this entry, it is necessary to "clone" an existing user, using the command

              <b>snmpusm</b> [OPTIONS] cloneFrom USER CLONEFROM-USER

       The USER entry then inherits the same authentication and privacy settings (including pass phrases) as
       the CLONEFROM user.


       These two steps can be combined into one, by using the command

              <b>snmpusm</b> [OPTIONS] create USER CLONEFROM-USER


       The  two  forms of the <b>create</b> sub-command require that the user being created does not already exist.
       The <b>cloneFrom</b> sub-command requires that the user being cloned to <u>does</u> already exist.


       Cloning is the only way to specify which authentication and privacy protocols  to  use  for  a  given
       user,  and  it  is  only possible to do this once.  Subsequent attempts to reclone onto the same user
       will appear to succeed, but will be silently ignored.  This (somewhat unexpected) behaviour  is  man-<font color="#ffffff" class="whiteout">dated&nbsp;mandated</font>
       dated by the SNMPv3 USM specifications (RFC 3414).  To change the authentication and privacy settings
       for a given user, it is necessary to delete and recreate the user entry.  This is <u>not</u>  necessary  for
       simply  changing the pass phrases (see below).  This means that the agent must be initialized with at
       least one user for each combination of authentication and privacy protocols.  See  the  <a href="../man5/snmpd.conf.5.html#//apple_ref/doc/man/5/snmpd.conf"><u>snmpd.conf(5)</u></a><u></u>
       manual page for details of the <b>createUser</b> configuration directive.


<b>DELETING</b> <b>USERS</b>
       A user can be deleted from the usmUserTable using the command

              <b>snmpusm</b> [OPTIONS] delete USER


<b>CHANGING</b> <b>PASS</b> <b>PHRASES</b>
       User profiles contain private keys that are never transmitted over the wire in clear text (regardless
       of whether the administration requests are encrypted or not).  To change the secret key for  a  user,
       it is necessary to specify the user's old passphrase as well as the new one.  This uses the command

              <b>snmpusm</b> [OPTIONS] [-Ca] [-Cx] passwd OLD-PASSPHRASE NEW-PASSPHRASE [USER]


       After  cloning  a new user entry from the appropriate template, you should immediately change the new
       user's passphrase.


       If USER is not specified, this command will change the passphrase of the (SNMPv3)  user  issuing  the
       command.   If  the -Ca or -Cx options are specified, then only the authentication or privacy keys are
       changed.  If these options are not specified, then both  the  authentication  and  privacy  keys  are
       changed.


              <b>snmpusm</b> [OPTIONS] [-Ca] [-Cx] changekey [USER]


       This  command  changes  the  key  in  a perfect-forward-secrecy compliant way through a diffie-helman
       exchange.  The remote agent must support the SNMP-USM-DH-OBJECTS-MIB for this command to  work.   The
       resulting keys are printed to the console and may be then set in future command invocations using the
       --defAuthLocalizedKey  and  --defPrivLocalizedKey  options  or  in  your  snmp.conf  file  using  the
       defAuthLocalizedKey and defPrivLocalizedKey keywords.


       Note  that  since  these  keys  are randomly generated based on a diffie helman exchange, they are no
       longer derived from a more easily typed password.  They are, however, much more secure.


       To change from a localized key back to a password, the following variant of the <b>passwd</b> sub-command is
       used:


              <b>snmpusm</b> [OPTIONS] &lt;-Ca | -Cx&gt; -Ck passwd OLD-KEY-OR-PASSPHRASE NEW-KEY-OR-PASSPHRASE [USER]


       Either  the  -Ca  or  the -Cx option must be specified.  The OLD-KEY-OR-PASSPHRASE and/or NEW-KEY-OR-<font color="#ffffff" class="whiteout">PASSPHRASE&nbsp;NEW-KEY-ORPASSPHRASE</font>
       PASSPHRASE arguments can either be a passphrase or a  localized  key  starting  with  "0x",  e.g.  as
       printed out by the <b>changekey</b> sub-command.


<b>EXAMPLES</b>
       Let's  assume  for  our  examples  that  the  following VACM and USM configurations lines were in the
       snmpd.conf file for a Net-SNMP agent.  These lines set up a default user called  "initial"  with  the
       authentication passphrase "setup_passphrase" so that we can perform the initial setup of an agent:

              # VACM configuration entries
              rwuser initial
              # lets add the new user we'll create too:
              rwuser wes
              # USM configuration entries
              createUser initial MD5 setup_passphrase DES

       Note: the "initial" user's setup should be removed after creating a real user that you grant adminis-<font color="#ffffff" class="whiteout">trative&nbsp;administrative</font>
       trative privileges to (like the user "wes" we'll be creating in this example.

       Note: passphrases must be 8 characters <u>minimum</u> in length.

   <b>Create</b> <b>a</b> <b>new</b> <b>user</b>
       snmpusm -v3 -u initial -n "" -l authNoPriv -a MD5 -A setup_passphrase localhost create wes initial

              Creates a new user, here named "wes" using the user "initial" to do it.  "wes" is cloned  from
              "initial" in the process, so he inherits that user's passphrase ("setup_passphrase").

   <b>Change</b> <b>the</b> <b>user's</b> <b>passphrase</b>
       snmpusm  -v 3 -u wes -n "" -l authNoPriv -a MD5 -A setup_passphrase localhost passwd setup_passphrase
       new_passphrase

              After creating the user "wes" with the same passphrase as  the  "initial"  user,  we  need  to
              change  his  passphrase  for him.  The above command changes it from "setup_passphrase", which
              was inherited from the initial user, to "new_passphrase".

   <b>Test</b> <b>the</b> <b>new</b> <b>user</b>
       snmpget -v 3 -u wes -n "" -l authNoPriv -a MD5 -A new_passphrase localhost sysUpTime.0

              If the above commands were successful, this command should have properly performed an  authen-<font color="#ffffff" class="whiteout">ticated&nbsp;authenticated</font>
              ticated SNMPv3 GET request to the agent.

       Now,  go  remove  the  vacm "group" snmpd.conf entry for the "initial" user and you have a valid user
       'wes' that you can use for future transactions instead of initial.


<b>WARNING</b>
       Manipulating the usmUserTable using this command can <u>only</u> be done using SNMPv3.   This  command  will
       not work with the community-based versions, even if they have write access to the table.


<b>SEE</b> <b>ALSO</b>
       <a href="../man5/snmpd.conf.5.html#//apple_ref/doc/man/5/snmpd.conf">snmpd.conf(5)</a>, <a href="../man5/snmp.conf.5.html#//apple_ref/doc/man/5/snmp.conf">snmp.conf(5)</a>, RFC 3414



4th Berkeley Distribution                        22 Oct 2005                                      SNMPUSM(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/snmpusm.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/snmpusm.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/snmpusm.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

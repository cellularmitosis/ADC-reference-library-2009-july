<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>DoVBLTask (IM: Pr)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING99></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Processes-98.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-100.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="Processes-2.html"><B>Processes</B></A><BR><DD><A HREF="Processes-74.html"><B>Chapter 4 - Vertical Retrace Manager</B></A> / <A HREF="Processes-87.html"><B>Vertical Retrace Manager Reference</B></A><BR><DL><DD><A HREF="Processes-90.html"><B>Vertical Retrace Manager Routines</B></A> / <A HREF="Processes-97.html"><B>Utility Routines</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING99-0></A>
<H3><A NAME=MARKER-11-166></A>DoVBLTask<A NAME=MARKER-2-31></A></H3>
 Slot interrupt handlers for video cards should call the <CODE>DoVBLTask</CODE> function to handle the execution of VBL tasks.<P>
<PRE>
FUNCTION DoVBLTask (theSlot: Integer): OSErr;
</PRE>
<DL>
<DT><CODE>theSlot</CODE>
<DD> Slot number corresponding to the vertical retrace queue whose tasks are to be executed.
</DL>
<A NAME=HEADING99-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>DoVBLTask</CODE> function decrements the <CODE>vblCount</CODE> field of each task in the vertical retrace queue corresponding to the <CODE>theSlot</CODE> parameter (except for tasks whose <CODE>vblCount</CODE> field already contains the value 0). The function executes a task if decrementing the <CODE>vblCount</CODE> field for a task record results in a value of 0.<P>
 If <CODE>theSlot</CODE> designates the slot of the primary video device, the position of the cursor is also updated.<P>
 Slot interrupt handlers for video cards need to call this function to execute any tasks in the queue for that slot. You can also call this function if you need to simulate vertical retrace interrupts.<P>
<A NAME=HEADING99-8></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The registers on entry and exit for <CODE>DoVBLTask</CODE> are
<TABLE BORDER="0" CELLPADDING=3><TH colspan=2>Registers on entry<TR>
<TD>D0<TD>Slot number</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
 To reduce overhead at interrupt time, instead of executing the <CODE>_DoVBLTask</CODE> trap, you can load the jump vector <CODE>jDoVBLTask</CODE> into an address register and execute a <CODE>JSR</CODE> instruction using that register.<A NAME=MARKER-2-168></A><P>
<A NAME=HEADING99-11></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>slotNumErr<TD>-360<TD>Invalid slot number<A NAME=MARKER-2-15></A></TABLE>
</H5>
</BLOCKQUOTE><P>
<HR>
<center>
<A HREF="Processes-98.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-100.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Processes-3.html">&copy; Apple Computer, Inc.</A><br>17 JUN 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

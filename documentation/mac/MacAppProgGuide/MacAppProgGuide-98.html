<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Overview (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING98></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-97.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-99.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-78.html"><B>Part 2 - Working With MacApp</B></A><BR><DD><A HREF="MacAppProgGuide-97.html"><B>Chapter 16 - Working With Documents</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING98-0></A>
<H1>Overview</H1>
 MacApp provides document classes to store data in memory, to work with views to display that data, to work with files to store data on disk, and to work with the Standard Mail Package to send documents as electronic mail. The class hierarchy for MacApp's document classes is shown in <A HREF=MacAppProgGuide-58.html#MARKER-9-24>Figure 7-1 on page 164</A>.<P>
 If your application doesn't need to save its data to disk, you can define a subclass of <CODE>TDocument</CODE>. If it does, you use the <CODE>TFileBasedDocument</CODE> class instead. <CODE>TFileBasedDocument</CODE> has methods for reading and writing data, which you override to work with your application's specific data.<P>
 The <CODE>TEditionDocument</CODE> class is a subclass of <CODE>TFileBasedDocument</CODE> that adds Edition Manager support for publishing and subscribing.<P>
 The <CODE>TMailableDocument</CODE> class is a subclass of <CODE>TFileBasedDocument</CODE> that adds support for turning documents into electronic mail.<P>
 The DemoText sample application defines an additional document class, <CODE>TTEDocument</CODE>, a subclass of <CODE>TMailableDocument</CODE>. The <CODE>TTEDocument</CODE> class implements many text-editing features and also demonstrates how to add custom mailer features to a document using MacApp's PowerTalk support.<P>
 <A HREF=#MARKER-9-21>Figure 16-1</A> shows some of the classes and methods you use to work with file-based documents.<P>
<A NAME=HEADING98-7></A>
<H2><A NAME=MARKER-2-20></A>Creating and Initializing a Document</H2>
 This section describes some of the methods MacApp uses to create and initialize a document. Documents are usually created by the application object's <CODE>OpenNew</CODE> method. <CODE>OpenNew</CODE> calls the application object's <CODE>DoMakeDocument</CODE> method to create a new document object. Your application class overrides <CODE>DoMakeDocument</CODE> to create and initialize the type of document your application uses.<P>
 Your application can set the command number passed to <CODE>DoMakeDocument</CODE> by overriding the <CODE>TApplication::KindOfDocument</CODE> method, then create different kinds of documents based on the command number. For more information, see <A HREF=MacAppProgGuide-60.html#MARKER-9-49>"Kinds of Documents," beginning on page 169</A>.<P>
<B>Figure 16-1  <A NAME=MARKER-9-21></A>Classes and methods used to work with file-based documents<A NAME=MARKER-2-22></A></B><P>
<P>
 The <CODE>OpenNew</CODE> method calls these methods of the document object returned by <CODE>DoMakeDocument</CODE>:<P>
<UL>
<LI><CODE>DoInitialState</CODE>
<LI><CODE>DoMakeViews</CODE>
<LI><CODE>UntitledName</CODE>
<LI><CODE>SetTitle</CODE>
<LI><CODE>DoPostMakeViews</CODE><P>
</UL>
 These methods are introduced in <A HREF=MacAppProgGuide-60.html#MARKER-9-42>"Document Operations," beginning on page 168</A>. The following sections add additional information.<P>
<A NAME=HEADING98-19></A>
<H3>The DoInitialState Method</H3>
 The default implementation of <A NAME=MARKER-2-23></A><CODE>DoInitialState</CODE> in <CODE>TDocument</CODE> does nothing. If your document needs to perform any special initialization after its constructor and its <CODE>I<I>YourDocument</I></CODE> method have been called, you can override <CODE>DoInitialState</CODE>. <P>
 The <CODE>TIconDocument</CODE> class in the IconEdit sample application overrides the <CODE>DoInitialState</CODE> method to get an initial icon for the document to display.<P>
<A NAME=HEADING98-22></A>
<H3><A NAME=MARKER-9-24></A>The DoMakeViews Method</H3>
 MacApp doesn't know about your document's internal format, so you override the <CODE>DoMakeViews</CODE> method to create views and display the document's data. For more information, see <A HREF=MacAppProgGuide-60.html#MARKER-9-76>"Creating Views for a Document," beginning on page 174</A>.<P>
<A NAME=HEADING98-24></A>
<H3><A NAME=MARKER-9-25></A>The UntitledName and SetTitle Methods</H3>
 MacApp calls the <A NAME=MARKER-2-26></A><CODE>UntitledName</CODE> and <A NAME=MARKER-2-27></A><CODE>SetTitle</CODE> methods of the document object to retrieve the title of the document's window. The default operation of these methods is to set the window title for a new document to "Untitled-n", where "n" is a number equal to 1 plus the number of the last untitled document.<P>
 The view resource for a window contains triple angle brackets (&lt;&lt;&lt;&gt;&gt;&gt;) that can be used to specify the window's title. MacApp's default action is to substitute "Untitled-n" for the brackets. You can replace the angle brackets with a title for the window, so that every window created from that resource will have the same name. Or you can place a title in front of or behind the brackets to add something to the default title. For example, if you place the word "Spreadsheet " (note that this title contains a trailing blank) in front of the brackets, the title of the document is set to "Spreadsheet Untitled-1" for the first new document created, "Spreadsheet Untitled-2" for the second, and so on.<P>
<A NAME=HEADING98-27></A>
<H3>The DoPostMakeViews Method</H3>
 The <A NAME=MARKER-2-28></A><CODE>DoPostMakeViews</CODE> method gives your application a chance to do any special view-related setup at a time when you know all view objects for the document have been created and initialized. For example, your document view may contain a field that you cannot easily initialize in a view template resource, so you initialize it in <CODE>DoPostMakeViews</CODE> instead.<A NAME=MARKER-2-29></A><A NAME=MARKER-2-30></A><P>
<A NAME=HEADING98-29></A>
<H2><A NAME=MARKER-9-31></A>Saving a Document's Print Information</H2>
 Each document created by your application can have separate Page Setup print information associated with it. MacApp uses the document's <A NAME=MARKER-2-32></A><CODE>fSavePrintInfo</CODE> field to determine whether to save the document's print information when writing the document (and whether to read the information when reading the document). By default, the value of this variable is set to <CODE>TRUE</CODE> in the constructor for <CODE>TFileBasedDocument</CODE>.<P>
 If your document has a resource fork, the print information is stored in the resource fork; otherwise, it is stored in the data fork. MacApp writes the print information only if it determines that the information has changed--there is no need to save the information unless it differs from the default for a new document.<P>
 If you <I>do not</I> want to save separate page setup information for each document, you set <CODE>fSavePrintInfo</CODE> to <CODE>FALSE</CODE> in your document's initialization method (<CODE>I<I>YourDocument</I></CODE>), <I>after</I> calling <CODE>IFileBasedDocument</CODE>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-97.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-99.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<html><head><title>Mac OS X Developer Tools
 Manual Page For bsdmake(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/bsdmake" title="Mac OS X Developer Tools
 Manual Page for bsdmake(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/bsdmake"; name=bsdmake(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
BSDMAKE(1)                BSD General Commands Manual               BSDMAKE(1)

<b>NAME</b>
     <b>bsdmake</b> -- maintain program dependencies

<b>SYNOPSIS</b>
     <b>bsdmake</b> [<b>-ABPSXeiknqrstv</b>] [<b>-C</b> <u>directory</u>] [<b>-D</b> <u>variable</u>] [<b>-d</b> <u>flags</u>] [<b>-E</b> <u>variable</u>] [<b>-f</b> <u>makefile</u>]
             [<b>-I</b> <u>directory</u>] [<b>-j</b> <u>max</u><b>_</b><u>jobs</u>] [<b>-m</b> <u>directory</u>] [<b>-V</b> <u>variable</u>] [<b>-x</b> <u>warning</u><b>_</b><u>options</u>] [<u>variable</u>=<u>value</u>]
             [<u>target</u> <u>...</u>]

<b>DESCRIPTION</b>
     The <b>bsdmake</b> utility is a program designed to simplify the maintenance of other programs.  Its input is
     a list of specifications describing dependency relationships between the generation of files and pro-<font color="#ffffff" class="whiteout">grams.&nbsp;programs.</font>
     grams.

     First of all, the initial list of specifications will be read from the system makefile, <u>sys.mk</u>, unless
     inhibited with the <b>-r</b> option.  The standard <u>sys.mk</u> as shipped with FreeBSD also handles <!-- a -->make.conf(5)<!-- /a -->,
     the default path to which can be altered via the <b>bsdmake</b> variable <b>__</b><u>MAKE</u><b>_</b><u>CONF</u>.

     Then the first of <u>BSDmakefile</u>, <u>makefile</u>, and <u>Makefile</u> that can be found in the current directory,
     object directory (see <u>.OBJDIR</u>), or search path (see the <b>-I</b> option) will be read for the main list of
     dependency specifications.  A different makefile or list of them can be supplied via the <b>-f</b> <!-- a -->option(s)<!-- /a -->.
     Finally, if the file <u>.depend</u> can be found in any of the aforesaid locations, it will also be read (see
     <a href="mkdep.1.html#//apple_ref/doc/man/1/mkdep">mkdep(1)</a>).

     When <b>bsdmake</b> searches for a makefile, its name takes precedence over its location.  For instance,
     <u>BSDmakefile</u> in the object directory will be favored over <u>Makefile</u> in the current directory.

     The options are as follows:

     <b>-A</b>      Make archive errors non-fatal, causing <b>bsdmake</b> to just skip the remainder or all of the archive
             and continue after printing a message.

     <b>-B</b>      Try to be backwards compatible by executing a single shell per command and by executing the
             commands to make the sources of a dependency line in sequence.  This is turned on by default
             unless <b>-j</b> is used.

     <b>-C</b> <u>directory</u>
             Change to <u>directory</u> before reading the makefiles or doing anything else.  If multiple <b>-C</b>
             options are specified, each is interpreted relative to the previous one: <b>-C</b> <u>/</u> <b>-C</b> <u>etc</u> is equiva-<font color="#ffffff" class="whiteout">lent&nbsp;equivalent</font>
             lent to <b>-C</b> <u>/etc</u>.

     <b>-D</b> <u>variable</u>
             Define <u>variable</u> to be 1, in the global context.

     <b>-d</b> <u>flags</u>
             Turn on debugging, and specify which portions of <b>bsdmake</b> are to print debugging information.
             Argument <u>flags</u> is one or more of the following:

             <u>A</u>       Print all possible debugging information; equivalent to specifying all of the debugging
                     flags.

             <u>a</u>       Print debugging information about archive searching and caching.

             <u>c</u>       Print debugging information about conditional evaluation.

             <u>d</u>       Print debugging information about directory searching and caching.

             <u>f</u>       Print debugging information about the execution of for loops.

             <u>g1</u>      Print the input graph before making anything.

             <u>g2</u>      Print the input graph after making everything, or before exiting on error.

             <u>j</u>       Print debugging information about running multiple shells.

             <u>l</u>       Print commands in Makefiles regardless of whether or not they are prefixed by @ or
                     other "quiet" flags.  Also known as "loud" behavior.

             <u>m</u>       Print debugging information about making targets, including modification dates.

             <u>s</u>       Print debugging information about suffix-transformation rules.

             <u>t</u>       Print debugging information about target list maintenance.

             <u>v</u>       Print debugging information about variable assignment.

     <b>-E</b> <u>variable</u>
             Specify a variable whose environment value (if any) will override macro assignments within
             makefiles.

     <b>-e</b>      Specify that environment values override macro assignments within makefiles for all variables.

     <b>-f</b> <u>makefile</u>
             Specify a makefile to read instead of the default one.  If <u>makefile</u> is not an absolute path-<font color="#ffffff" class="whiteout">name,&nbsp;pathname,</font>
             name, <b>bsdmake</b> will search for it as described above.  In case <u>makefile</u> is `<b>-</b>', standard input
             is read.  Multiple <b>-f</b> options can be supplied, and the makefiles will be read in that order.

     <b>-I</b> <u>directory</u>
             Specify a directory in which to search for makefiles and included makefiles.  Multiple <b>-I</b>
             options can be specified to form a search path.  The system makefile directory (or directories,
             see the <b>-m</b> option) is automatically appended at the tail of this path.

     <b>-i</b>      Ignore non-zero exit of shell commands in the makefile.  Equivalent to specifying `<b>-</b>' before
             each command line in the makefile.

     <b>-j</b> <u>max</u><b>_</b><u>jobs</u>
             Specify the maximum number of jobs that <b>bsdmake</b> may have running at any one time.  Turns com-<font color="#ffffff" class="whiteout">patibility&nbsp;compatibility</font>
             patibility mode off, unless the <u>B</u> flag is also specified.

     <b>-k</b>      Continue processing after errors are encountered, but only on those targets that do not depend
             on the target whose creation caused the error.

     <b>-m</b> <u>directory</u>
             Specify a directory in which to search for the system makefile and makefiles included via the
             &lt;...&gt; style.  Multiple <b>-m</b> options can be specified to form a search path.  This path will over-<font color="#ffffff" class="whiteout">ride&nbsp;override</font>
             ride the default system include path, <u>/usr/share/mk</u>.  The system include path will always be
             appended to the search path used for "..."-style inclusions and makefile searches (see the <b>-I</b>
             option).

     <b>-n</b>      Display the commands that would have been executed, but do not actually execute them.

     <b>-P</b>      Collate the output of a given job and display it only when the job finishes, instead of mixing
             the output of parallel jobs together.  This option has no effect unless <b>-j</b> is used too.

     <b>-q</b>      Do not execute any commands, but exit 0 if the specified targets are up-to-date and 1, other-<font color="#ffffff" class="whiteout">wise.&nbsp;otherwise.</font>
             wise.

     <b>-r</b>      Do not process the system makefile.

     <b>-S</b>      Stop processing when an error is encountered.  Default behaviour.  This is needed to negate the
             <b>-k</b> option during recursive builds.

     <b>-s</b>      Do not echo any commands as they are executed.  Equivalent to specifying `<b>@</b>' before each com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
             mand line in the makefile.

     <b>-t</b>      Rather than re-building a target as specified in the makefile, create it or update its modifi-<font color="#ffffff" class="whiteout">cation&nbsp;modification</font>
             cation time to make it appear up-to-date.

     <b>-V</b> <u>variable</u>
             Print <b>bsdmake</b>'s idea of the value of <u>variable</u>, in the global context.  Do not build any tar-<font color="#ffffff" class="whiteout">gets.&nbsp;targets.</font>
             gets.  Multiple instances of this option may be specified; the variables will be printed one
             per line, with a blank line for each null or undefined variable.

     <b>-v</b>      Be extra verbose.  For multi-job makes, this will cause file banners to be generated.

     <b>-X</b>      When using the <b>-V</b> option to print the values of variables, do not recursively expand the val-<font color="#ffffff" class="whiteout">ues.&nbsp;values.</font>
             ues.

     <u>variable</u>=<u>value</u>
             Set the value of the variable <u>variable</u> to <u>value</u>.

     <b>-x</b> <u>warning</u><b>_</b><u>options</u>
             Specify extended warning options.  This option may be specified several times.  A
             <u>warning</u><b>_</b><u>option</u> can be prefixed with ``no'' in which case the warning is switched off.  The cur-<font color="#ffffff" class="whiteout">rently&nbsp;currently</font>
             rently available options are:

             dirsyntax
                     Warn if anything except blanks and comments follows an <b>.endif</b> or <b>.else</b> directive.

             See also the <b>.WARN</b> special target.

     There are seven different types of lines in a makefile: file dependency specifications, shell commands,
     variable assignments, include statements, conditional directives, for loops, and comments.

     In general, lines may be continued from one line to the next by ending them with a backslash (`\').
     The trailing newline character and initial whitespace on the following line are compressed into a sin-<font color="#ffffff" class="whiteout">gle&nbsp;single</font>
     gle space.

<b>FILE</b> <b>DEPENDENCY</b> <b>SPECIFICATIONS</b>
     Dependency lines consist of one or more targets, an operator, and zero or more sources.  This creates a
     relationship where the targets ``depend'' on the sources and are usually created from them.  The exact
     relationship between the target and the source is determined by the operator that separates them.  The
     three operators are as follows:

     <b>:</b>     A target is considered out-of-date if its modification time is less than those of any of its
           sources.  Sources for a target accumulate over dependency lines when this operator is used.  The
           target is removed if <b>bsdmake</b> is interrupted.

     <b>!</b>     Targets are always re-created, but not until all sources have been examined and re-created as
           necessary.  Sources for a target accumulate over dependency lines when this operator is used.
           The target is removed if <b>bsdmake</b> is interrupted.

     <b>::</b>    If no sources are specified, the target is always re-created.  Otherwise, a target is considered
           out-of-date if any of its sources has been modified more recently than the target.  Sources for a
           target do not accumulate over dependency lines when this operator is used.  The target will not
           be removed if <b>bsdmake</b> is interrupted.

     Targets and sources may contain the shell wildcard expressions `?', `*', `[]' and `{}'.  The expres-<font color="#ffffff" class="whiteout">sions&nbsp;expressions</font>
     sions `?', `*' and `[]' may only be used as part of the final component of the target or source, and
     must be used to describe existing files.  The expression `{}' need not necessarily be used to describe
     existing files.  Expansion is in directory order, not alphabetically as done in the shell.

<b>SHELL</b> <b>COMMANDS</b>
     Each target may have associated with it a series of shell commands, normally used to create the target.
     Each of the commands in this script <u>must</u> be preceded by a tab.  While any target may appear on a depen-<font color="#ffffff" class="whiteout">dency&nbsp;dependency</font>
     dency line, only one of these dependencies may be followed by a creation script, unless the `<b>::</b>' opera-<font color="#ffffff" class="whiteout">tor&nbsp;operator</font>
     tor is used.

     If the first characters of the command line are `<b>@</b>', `<b>-</b>', and/or `<b>+</b>', the command is treated specially.
     A `<b>@</b>' causes the command not to be echoed before it is executed.  A `<b>-</b>' causes any non-zero exit status
     of the command line to be ignored.  A `<b>+</b>' causes the command to be executed even if <b>-n</b> is specified on
     the command line.

<b>VARIABLE</b> <b>ASSIGNMENTS</b>
     Variables in <b>bsdmake</b> are much like variables in the shell, and, by tradition, consist of all upper-case
     letters.  The five operators that can be used to assign values to variables are as follows:

     <b>=</b>       Assign the value to the variable.  Any previous value is overridden.

     <b>+=</b>      Append the value to the current value of the variable.

     <b>?=</b>      Assign the value to the variable if it is not already defined.

     <b>:=</b>      Assign with expansion, i.e., expand the value before assigning it to the variable.  Normally,
             expansion is not done until the variable is referenced.

     <b>!=</b>      Expand the value and pass it to the shell for execution and assign the result to the variable.
             Any newlines in the result are replaced with spaces.

     Any whitespace before the assigned <u>value</u> is removed; if the value is being appended, a single space is
     inserted between the previous contents of the variable and the appended value.

     Variables are expanded by surrounding the variable name with either curly braces (`{}') or parentheses
     (`()') and preceding it with a dollar sign (`$').  If the variable name contains only a single letter,
     the surrounding braces or parentheses are not required.  This shorter form is not recommended.

     Variable substitution occurs at two distinct times, depending on where the variable is being used.
     Variables in dependency lines are expanded as the line is read.  Variables in shell commands are
     expanded when the shell command is executed.

     The four different classes of variables (in order of increasing precedence) are:

     Environment variables
             Variables defined as part of <b>bsdmake</b>'s environment.

     Global variables
             Variables defined in the makefile or in included makefiles.

     Command line variables
             Variables defined as part of the command line and variables obtained from the MAKEFLAGS envi-<font color="#ffffff" class="whiteout">ronment&nbsp;environment</font>
             ronment variable or the <b>.MAKEFLAGS</b> target.

     Local variables
             Variables that are defined specific to a certain target.  The seven local variables are as fol-<font color="#ffffff" class="whiteout">lows:&nbsp;follows:</font>
             lows:

             <u>.ALLSRC</u>   The list of all sources for this target; also known as `<u>&gt;</u>'.

             <u>.ARCHIVE</u>  The name of the archive file; also known as `<u>!</u>'.

             <u>.IMPSRC</u>   The name/path of the source from which the target is to be transformed (the
                       ``implied'' source); also known as `<u>&lt;</u>'.

             <u>.MEMBER</u>   The name of the archive member; also known as `<u>%</u>'.

             <u>.OODATE</u>   The list of sources for this target that were deemed out-of-date; also known as `<u>?</u>'.

             <u>.PREFIX</u>   The file prefix of the file, containing only the file portion, no suffix or preceding
                       directory components; also known as `<u>*</u>'.

             <u>.TARGET</u>   The name of the target; also known as `<u>@</u>'.

             The shorter forms `<u>@</u>', `<u>!</u>', `<u>&lt;</u>', `<u>%</u>', `<u>?</u>', `<u>&gt;</u>', and `<u>*</u>' are permitted for backward compatibil-<font color="#ffffff" class="whiteout">ity&nbsp;compatibility</font>
             ity and are not recommended.  The six variables `<u>@F</u>', `<u>@D</u>', `<u>&lt;F</u>', `<u>&lt;D</u>', `<u>*F</u>', and `<u>*D</u>' are per-
             mitted for compatibility with AT&amp;T System V UNIX makefiles and are not recommended.

             Four of the local variables may be used in sources on dependency lines because they expand to
             the proper value for each target on the line.  These variables are <u>.TARGET</u>, <u>.PREFIX</u>, <u>.ARCHIVE</u>,
             and <u>.MEMBER</u>.

     In addition, <b>bsdmake</b> sets or knows about the following internal variables or environment variables:

     <u>$</u>               A single dollar sign `$', i.e. `$$' expands to a single dollar sign.

     <u>MAKE</u>            The name that <b>bsdmake</b> was executed with (<u>argv</u>[0]).

     <u>.CURDIR</u>         A path to the directory where <b>bsdmake</b> was executed.  The <b>bsdmake</b> utility sets <u>.CURDIR</u>
                     to the canonical path given by <a href="../man3/getcwd.3.html#//apple_ref/doc/man/3/getcwd">getcwd(3)</a>.

     <u>.OBJDIR</u>         A path to the directory where the targets are built.  At startup, <b>bsdmake</b> searches for
                     an alternate directory to place target files.  It will attempt to change into this spe-<font color="#ffffff" class="whiteout">cial&nbsp;special</font>
                     cial directory and will search this directory for makefiles not found in the current
                     directory.  The following directories are tried in order:

                     1.   ${MAKEOBJDIRPREFIX}/`pwd`
                     2.   ${MAKEOBJDIR}
                     3.   obj.${MACHINE}
                     4.   obj
                     5.   /usr/obj/`pwd`

                     The first directory that <b>bsdmake</b> successfully changes into is used.  If either
                     MAKEOBJDIRPREFIX or MAKEOBJDIR is set in the environment but <b>bsdmake</b> is unable to
                     change into the corresponding directory, then the current directory is used without
                     checking the remainder of the list.  If they are undefined and <b>bsdmake</b> is unable to
                     change into any of the remaining three directories, then the current directory is used.
                     Note, that MAKEOBJDIRPREFIX and MAKEOBJDIR must be environment variables and should not
                     be set on <b>bsdmake</b>'s command line.

                     The <b>bsdmake</b> utility sets <u>.OBJDIR</u> to the canonical path given by <a href="../man3/getcwd.3.html#//apple_ref/doc/man/3/getcwd">getcwd(3)</a>.

     <u>.MAKEFILE</u><b>_</b><u>LIST</u>  As <b>bsdmake</b> reads various makefiles, including the default files and any obtained from
                     the command line and <b>.include</b> and <b>.sinclude</b> directives, their names will be automati-<font color="#ffffff" class="whiteout">cally&nbsp;automatically</font>
                     cally appended to the <u>.MAKEFILE</u><b>_</b><u>LIST</u> variable.  They are added right before <b>bsdmake</b>
                     begins to parse them, so that the name of the current makefile is the last word in this
                     variable.

     <u>.MAKEFLAGS</u>      The environment variable MAKEFLAGS may contain anything that may be specified on
                     <b>bsdmake</b>'s command line.  Its contents are stored in <b>bsdmake</b>'s <u>.MAKEFLAGS</u> variable.  All
                     options and variable assignments specified on <b>bsdmake</b>'s command line are appended to
                     the <u>.MAKEFLAGS</u> variable which is then entered into the environment as MAKEFLAGS for all
                     programs which <b>bsdmake</b> executes.  By modifying the contents of the <u>.MAKEFLAGS</u> variable,
                     makefile can alter the contents of the <u>MAKEFLAGS</u> environment variable made available
                     for all programs which <b>bsdmake</b> executes; compare with the <b>.MAKEFLAGS</b> special target
                     below.

                     When passing macro definitions and flag arguments in the MAKEFLAGS environment vari-<font color="#ffffff" class="whiteout">able,&nbsp;variable,</font>
                     able, space and tab characters are quoted by preceding them with a backslash.  When
                     reading the MAKEFLAGS variable from the environment, all sequences of a backslash and
                     one of space or tab are replaced just with their second character without causing a
                     word break.  Any other occurrences of a backslash are retained.  Groups of unquoted
                     space, tab and newline characters cause word breaking.

     <u>MFLAGS</u>          This variable is provided for backward compatibility and contains all the options from
                     the MAKEFLAGS environment variable plus any options specified on <b>bsdmake</b>'s command
                     line.

     <u>.TARGETS</u>        List of targets <b>bsdmake</b> is currently building.

     <u>.INCLUDES</u>       See <b>.INCLUDES</b> special target.

     <u>.LIBS</u>           See <b>.LIBS</b> special target.

     <u>MACHINE</u>         Name of the machine architecture <b>bsdmake</b> is running on, obtained from the MACHINE envi-<font color="#ffffff" class="whiteout">ronment&nbsp;environment</font>
                     ronment variable, or through <a href="../man3/uname.3.html#//apple_ref/doc/man/3/uname">uname(3)</a> if not defined.

     <u>MACHINE</u><b>_</b><u>ARCH</u>    Name of the machine architecture <b>bsdmake</b> was compiled for, defined at compilation time.

     <u>VPATH</u>           Makefiles may assign a colon-delimited list of directories to <u>VPATH</u>.  These directories
                     will be searched for source files by <b>bsdmake</b> after it has finished parsing all input
                     makefiles.

     Variable expansion may be modified to select or modify each word of the variable (where a ``word'' is
     whitespace-delimited sequence of characters).  The general format of a variable expansion is as fol-<font color="#ffffff" class="whiteout">lows:&nbsp;follows:</font>
     lows:

           {variable[:modifier[:...]]}

     Each modifier begins with a colon and one of the following special characters.  The colon may be
     escaped with a backslash (`\').

     <b>C</b>/<u>pattern</u>/<u>replacement</u>/[<b>1g</b>]
                 Modify each word of the value, substituting every match of the extended regular expression
                 <u>pattern</u> (see <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format">re_format(7)</a>) with the <a href="ed.1.html#//apple_ref/doc/man/1/ed">ed(1)</a>-style <u>replacement</u> string.  Normally, the first
                 occurrence of the pattern in each word of the value is changed.  The `1' modifier causes
                 the substitution to apply to at most one word; the `g' modifier causes the substitution to
                 apply to as many instances of the search pattern as occur in the word or words it is found
                 in.  Note that `1' and `g' are orthogonal; the former specifies whether multiple words are
                 potentially affected, the latter whether multiple substitutions can potentially occur
                 within each affected word.

     <b>E</b>           Replaces each word in the variable with its suffix.

     <b>H</b>           Replaces each word in the variable with everything but the last component.

     <b>L</b>           Converts variable to lower-case letters.

     <b>M</b><u>pattern</u>    Select only those words that match the rest of the modifier.  The standard shell wildcard
                 characters (`*', `?', and `[]') may be used.  The wildcard characters may be escaped with a
                 backslash (`\').

     <b>N</b><u>pattern</u>    This is identical to <b>M</b>, but selects all words which do not match the rest of the modifier.

     <b>O</b>           Order every word in the variable alphabetically.

     <b>Q</b>           Quotes every shell meta-character in the variable, so that it can be passed safely through
                 recursive invocations of <b>bsdmake</b>.

     <b>R</b>           Replaces each word in the variable with everything but its suffix.

     <b>S</b>/<u>old</u><b>_</b><u>string</u>/<u>new</u><b>_</b><u>string</u>/[<b>g</b>]
                 Modify the first occurrence of <u>old</u><b>_</b><u>string</u> in each word of the variable's value, replacing
                 it with <u>new</u><b>_</b><u>string</u>.  If a `g' is appended to the last slash of the pattern, all occurrences
                 in each word are replaced.  If <u>old</u><b>_</b><u>string</u> begins with a caret (`^'), <u>old</u><b>_</b><u>string</u> is anchored
                 at the beginning of each word.  If <u>old</u><b>_</b><u>string</u> ends with a dollar sign (`$'), it is anchored
                 at the end of each word.  Inside <u>new</u><b>_</b><u>string</u>, an ampersand (`&amp;') is replaced by <u>old</u><b>_</b><u>string</u>.
                 Any character may be used as a delimiter for the parts of the modifier string.  The anchor-<font color="#ffffff" class="whiteout">ing,&nbsp;anchoring,</font>
                 ing, ampersand, and delimiter characters may be escaped with a backslash (`\').

                 Variable expansion occurs in the normal fashion inside both <u>old</u><b>_</b><u>string</u> and <u>new</u><b>_</b><u>string</u> with
                 the single exception that a backslash is used to prevent the expansion of a dollar sign
                 (`$'), not a preceding dollar sign as is usual.

     <u>old</u><b>_</b><u>string=new</u><b>_</b><u>string</u>
                 This is the AT&amp;T System V UNIX style variable substitution.  It must be the last modifier
                 specified.  If <u>old</u><b>_</b><u>string</u> or <u>new</u><b>_</b><u>string</u> do not contain the pattern matching character <u>%</u>
                 then it is assumed that they are anchored at the end of each word, so only suffixes or
                 entire words may be replaced.  Otherwise <u>%</u> is the substring of <u>old</u><b>_</b><u>string</u> to be replaced in
                 <u>new</u><b>_</b><u>string</u>

     <b>T</b>           Replaces each word in the variable with its last component.

     <b>U</b>           Converts variable to upper-case letters.

     <b>u</b>           Remove adjacent duplicate words (like <a href="uniq.1.html#//apple_ref/doc/man/1/uniq">uniq(1)</a>).

<b>DIRECTIVES,</b> <b>CONDITIONALS,</b> <b>AND</b> <b>FOR</b> <b>LOOPS</b>
     Directives, conditionals, and for loops reminiscent of the C programming language are provided in
     <b>bsdmake</b>.  All such structures are identified by a line beginning with a single dot (`.') character.
     The following directives are supported:

     <b>.include</b> <u>&lt;file&gt;</u>

     <b>.include</b> <u>"file"</u>
             Include the specified makefile.  Variables between the angle brackets or double quotes are
             expanded to form the file name.  If angle brackets are used, the included makefile is expected
             to be in the system makefile directory.  If double quotes are used, the including makefile's
             directory and any directories specified using the <b>-I</b> option are searched before the system
             makefile directory.

     <b>.sinclude</b> <u>&lt;file&gt;</u>

     <b>.sinclude</b> <u>"file"</u>
             Like <b>.include</b>, but silently ignored if the file cannot be found and opened.

     <b>.undef</b> <u>variable</u>
             Un-define the specified global variable.  Only global variables may be un-defined.

     <b>.error</b> <u>message</u>
             Terminate processing of the makefile immediately.  The filename of the makefile, the line on
             which the error was encountered and the specified message are printed to the standard error
             output and <b>bsdmake</b> terminates with exit code 1.  Variables in the message are expanded.

     <b>.warning</b> <u>message</u>
             Emit a warning message.  The filename of the makefile, the line on which the warning was
             encountered, and the specified message are printed to the standard error output.  Variables in
             the message are expanded.

     Conditionals are used to determine which parts of the Makefile to process.  They are used similarly to
     the conditionals supported by the C pre-processor.  The following conditionals are supported:

     <b>.if</b> [!]<u>expression</u> [<u>operator</u> <u>expression</u> <u>...</u>]
             Test the value of an expression.

     <b>.ifdef</b> [!]<u>variable</u> [<u>operator</u> <u>variable</u> <u>...</u>]
             Test the value of a variable.

     <b>.ifndef</b> [!]<u>variable</u> [<u>operator</u> <u>variable</u> <u>...</u>]
             Test the value of a variable.

     <b>.ifmake</b> [!]<u>target</u> [<u>operator</u> <u>target</u> <u>...</u>]
             Test the target being built.

     <b>.ifnmake</b> [!]<u>target</u> [<u>operator</u> <u>target</u> <u>...</u>]
             Test the target being built.

     <b>.else</b>   Reverse the sense of the last conditional.

     <b>.elif</b> [!]<u>expression</u> [<u>operator</u> <u>expression</u> <u>...</u>]
             A combination of <b>.else</b> followed by <b>.if</b>.

     <b>.elifdef</b> [!]<u>variable</u> [<u>operator</u> <u>variable</u> <u>...</u>]
             A combination of <b>.else</b> followed by <b>.ifdef</b>.

     <b>.elifndef</b> [!]<u>variable</u> [<u>operator</u> <u>variable</u> <u>...</u>]
             A combination of <b>.else</b> followed by <b>.ifndef</b>.

     <b>.elifmake</b> [!]<u>target</u> [<u>operator</u> <u>target</u> <u>...</u>]
             A combination of <b>.else</b> followed by <b>.ifmake</b>.

     <b>.elifnmake</b> [!]<u>target</u> [<u>operator</u> <u>target</u> <u>...</u>]
             A combination of <b>.else</b> followed by <b>.ifnmake</b>.

     <b>.endif</b>  End the body of the conditional.

     The <u>operator</u> may be any one of the following:

     <b>||</b>     logical OR

     <b>&amp;&amp;</b>     Logical AND; of higher precedence than `<b>||</b>'.

     As in C, <b>bsdmake</b> will only evaluate a conditional as far as is necessary to determine its value.
     Parentheses may be used to change the order of evaluation.  The boolean operator `<b>!</b>' may be used to
     logically negate an entire conditional.  It is of higher precedence than `<b>&amp;&amp;</b>'.

     The value of <u>expression</u> may be any of the following:

     <b>defined</b>     Takes a variable name as an argument and evaluates to true if the variable has been
                 defined.

     <b>make</b>        Takes a target name as an argument and evaluates to true if the target was specified as
                 part of <b>bsdmake</b>'s command line or was declared the default target (either implicitly or
                 explicitly, see <u>.MAIN</u>) before the line containing the conditional.

     <b>empty</b>       Takes a variable, with possible modifiers, and evaluates to true if the expansion of the
                 variable would result in an empty string.

     <b>exists</b>      Takes a file name as an argument and evaluates to true if the file exists.  The file is
                 searched for on the system search path (see <u>.PATH</u>).

     <b>target</b>      Takes a target name as an argument and evaluates to true if the target has been defined.

     An <u>expression</u> may also be an arithmetic or string comparison, with the left-hand side being a variable
     expansion.  Variable expansion is performed on both sides of the comparison, after which the integral
     values are compared.  A value is interpreted as hexadecimal if it is preceded by 0x, otherwise it is
     decimal; octal numbers are not supported.  The standard C relational operators are all supported.  If
     after variable expansion, either the left or right hand side of a `<b>==</b>' or `<b>!=</b>' operator is not an inte-<font color="#ffffff" class="whiteout">gral&nbsp;integral</font>
     gral value, then string comparison is performed between the expanded variables.  If no relational oper-<font color="#ffffff" class="whiteout">ator&nbsp;operator</font>
     ator is given, it is assumed that the expanded variable is being compared against 0.

     When <b>bsdmake</b> is evaluating one of these conditional expressions, and it encounters a word it does not
     recognize, either the ``make'' or ``defined'' expression is applied to it, depending on the form of the
     conditional.  If the form is <b>.if</b>, <b>.ifdef</b> or <b>.ifndef</b>, the ``defined'' expression is applied.  Similarly,
     if the form is <b>.ifmake</b> or <b>.ifnmake</b>, the ``make'' expression is applied.

     If the conditional evaluates to true the parsing of the makefile continues as before.  If it evaluates
     to false, the following lines are skipped.  In both cases this continues until a <b>.else</b> or <b>.endif</b> is
     found.

     For loops are typically used to apply a set of rules to a list of files.  The syntax of a for loop is:

     <b>.for</b> <u>variable</u> <b>in</b> <u>expression</u>
     &lt;make-rules&gt;
     <b>.endfor</b>

     After the for <u>expression</u> is evaluated, it is split into words.  The iteration <u>variable</u> is successively
     set to each word, and substituted in the <b>make-rules</b> inside the body of the for loop.

<b>COMMENTS</b>
     Comments begin with a hash (`#') character, anywhere but in a shell command line, and continue to the
     end of the line.

<b>SPECIAL</b> <b>SOURCES</b>
     <b>.IGNORE</b>     Ignore any errors from the commands associated with this target, exactly as if they all
                 were preceded by a dash (`-').

     <b>.MAKE</b>       Execute the commands associated with this target even if the <b>-n</b> or <b>-t</b> options were speci-<font color="#ffffff" class="whiteout">fied.&nbsp;specified.</font>
                 fied.  Normally used to mark recursive <b>bsdmake</b>'s.

     <b>.NOTMAIN</b>    Normally <b>bsdmake</b> selects the first target it encounters as the default target to be built
                 if no target was specified.  This source prevents this target from being selected.

     <b>.OPTIONAL</b>   If a target is marked with this attribute and <b>bsdmake</b> cannot figure out how to create it,
                 it will ignore this fact and assume the file is not needed or already exists.

     <b>.PRECIOUS</b>   When <b>bsdmake</b> is interrupted, it removes any partially made targets.  This source prevents
                 the target from being removed.

     <b>.SILENT</b>     Do not echo any of the commands associated with this target, exactly as if they all were
                 preceded by an at sign (`@').

     <b>.USE</b>        Turn the target into <b>bsdmake</b>'s version of a macro.  When the target is used as a source for
                 another target, the other target acquires the commands, sources, and attributes (except for
                 <b>.USE</b>) of the source.  If the target already has commands, the <b>.USE</b> target's commands are
                 appended to them.

     <b>.WAIT</b>       If special <b>.WAIT</b> source is appears in a dependency line, the sources that precede it are
                 made before the sources that succeed it in the line.  Loops are not being detected and tar-<font color="#ffffff" class="whiteout">gets&nbsp;targets</font>
                 gets that form loops will be silently ignored.

<b>SPECIAL</b> <b>TARGETS</b>
     Special targets may not be included with other targets, i.e., they must be the only target specified.

     <b>.BEGIN</b>      Any command lines attached to this target are executed before anything else is done.

     <b>.DEFAULT</b>    This is sort of a <b>.USE</b> rule for any target (that was used only as a source) that <b>bsdmake</b>
                 cannot figure out any other way to create.  Only the shell script is used.  The <b>.IMPSRC</b>
                 variable of a target that inherits <b>.DEFAULT</b>'s commands is set to the target's own name.

     <b>.END</b>        Any command lines attached to this target are executed after everything else is done.

     <b>.IGNORE</b>     Mark each of the sources with the <b>.IGNORE</b> attribute.  If no sources are specified, this is
                 the equivalent of specifying the <b>-i</b> option.

     <b>.INCLUDES</b>   A list of suffixes that indicate files that can be included in a source file.  The suffix
                 must have already been declared with <b>.SUFFIXES</b>; any suffix so declared will have the direc-<font color="#ffffff" class="whiteout">tories&nbsp;directories</font>
                 tories on its search path (see <b>.PATH</b>) placed in the <u>.INCLUDES</u> special variable, each pre-<font color="#ffffff" class="whiteout">ceded&nbsp;preceded</font>
                 ceded by a <b>-I</b> flag.

     <b>.INTERRUPT</b>  If <b>bsdmake</b> is interrupted, the commands for this target will be executed.

     <b>.LIBS</b>       This does for libraries what <b>.INCLUDES</b> does for include files, except that the flag used is
                 <b>-L</b>.

     <b>.MAIN</b>       If no target is specified when <b>bsdmake</b> is invoked, this target will be built.  This is
                 always set, either explicitly, or implicitly when <b>bsdmake</b> selects the default target, to
                 give the user a way to refer to the default target on the command line.

     <b>.MAKEFLAGS</b>  This target provides a way to specify flags for <b>bsdmake</b> when the makefile is used.  The
                 flags are as if typed to the shell, though the <b>-f</b> option will have no effect.  Flags
                 (except for <b>-f</b>) and variable assignments specified as the source for this target are also
                 appended to the <u>.MAKEFLAGS</u> internal variable.  Please note the difference between this tar-<font color="#ffffff" class="whiteout">get&nbsp;target</font>
                 get and the <u>.MAKEFLAGS</u> internal variable: specifying an option or variable assignment as
                 the source for this target will affect <u>both</u> the current makefile and all processes that
                 <b>bsdmake</b> executes.

     <b>.MFLAGS</b>     Same as above, for backward compatibility.

     <b>.NOTPARALLEL</b>
                 Disable parallel mode.

     <b>.NO_PARALLEL</b>
                 Same as above, for compatibility with other <b>pmake</b> variants.

     <b>.ORDER</b>      The named targets are made in sequence.

     <b>.PATH</b>       The sources are directories which are to be searched for files not found in the current
                 directory.  If no sources are specified, any previously specified directories are deleted.
                 Where possible, use of <b>.PATH</b> is preferred over use of the <u>VPATH</u> variable.

     <b>.PATH</b><u>suffix</u>
                 The sources are directories which are to be searched for suffixed files not found in the
                 current directory.  The <b>bsdmake</b> utility first searches the suffixed search path, before
                 reverting to the default path if the file is not found there.  This form is required for
                 <b>.LIBS</b> and <b>.INCLUDES</b> to work.

     <b>.PHONY</b>      Apply the <b>.PHONY</b> attribute to any specified sources.  Targets with this attribute are
                 always considered to be out of date.

     <b>.PRECIOUS</b>   Apply the <b>.PRECIOUS</b> attribute to any specified sources.  If no sources are specified, the
                 <b>.PRECIOUS</b> attribute is applied to every target in the file.

     <b>.SHELL</b>      Select another shell.  The sources of this target have the format <u>key</u>=<u>value</u>.  The <u>key</u> is
                 one of:

                 <u>path</u>       Specify the path to the new shell.

                 <u>name</u>       Specify the name of the new shell.  This may be either one of the three builtin
                            shells (see below) or any other name.

                 <u>quiet</u>      Specify the shell command to turn echoing off.

                 <u>echo</u>       Specify the shell command to turn echoing on.

                 <u>filter</u>     Usually shells print the echo off command before turning echoing off.  This is
                            the exact string that will be printed by the shell and is used to filter the
                            shell output to remove the echo off command.

                 <u>echoFlag</u>   The shell option that turns echoing on.

                 <u>errFlag</u>    The shell option to turn on error checking.  If error checking is on, the shell
                            should exit if a command returns a non-zero status.

                 <u>hasErrCtl</u>  True if the shell has error control.

                 <u>check</u>      If <u>hasErrCtl</u> is true then this is the shell command to turn error checking on.
                            If <u>hasErrCtl</u> is false then this is a command template to echo commands for which
                            error checking is disabled.  The template must contain a `%s'.

                 <u>ignore</u>     If <u>hasErrCtl</u> is true, this is the shell command to turn error checking off.  If
                            <u>hasErrCtl</u> is false, this is a command template to execute a command so that
                            errors are ignored.  The template must contain a `%s'.

                 <u>meta</u>       This is a string of meta characters of the shell.

                 <u>builtins</u>   This is a string holding all the shell's builtin commands separated by blanks.
                            The <u>meta</u> and <u>builtins</u> strings are used in compat mode.  When a command line con-<font color="#ffffff" class="whiteout">tains&nbsp;contains</font>
                            tains neither a meta character nor starts with a shell builtin, it is executed
                            directly without invoking a shell.  When one of these strings (or both) is empty
                            all commands are executed through a shell.

                 <u>unsetenv</u>   If true, remove the ENV environment variable before executing any command.  This
                            is useful for the Korn-shell (<b>ksh</b>).

                 Values that are strings must be surrounded by double quotes.  Boolean values are specified
                 as `T' or `Y' (in either case) to mean true.  Any other value is taken to mean false.

                 There are several uses of the <b>.SHELL</b> target:

                 <b></b><b><u>oo</u></b>   Selecting one of the builtin shells.  This is done by just specifying the name of the
                     shell with the <u>name</u> keyword.  It is also possible to modify the parameters of the
                     builtin shell by just specifying other keywords (except for <u>path</u>).

                 <b></b><b><u>oo</u></b>   Using another executable for one of the builtin shells.  This is done by specifying the
                     path to the executable with the <u>path</u> keyword.  If the last component is the same as the
                     name of the builtin shell, no name needs to be specified; if it is different, the name
                     must be given:

                           .SHELL: path="/usr/local/bin/sh"

                     selects the builtin shell ``sh'' but will execute it from <u>/usr/local/bin/sh</u>.  Like in
                     the previous case, it is possible to modify parameters of the builtin shell by just
                     specifying them.

                 <b></b><b><u>oo</u></b>   Using an entirely different shell.  This is done by specifying all keywords.

                 The builtin shells are ``sh'', ``csh'' and ``ksh''.  Because FreeBSD has no <b>ksh</b> in <u>/bin</u>, it
                 is unwise to specify <u>name</u>="ksh" without also specifying a path.

     <b>.SILENT</b>     Apply the <b>.SILENT</b> attribute to any specified sources.  If no sources are specified, the
                 <b>.SILENT</b> attribute is applied to every command in the file.

     <b>.SUFFIXES</b>   Each source specifies a suffix to <b>bsdmake</b>.  If no sources are specified, any previous spec-<font color="#ffffff" class="whiteout">ified&nbsp;specified</font>
                 ified suffices are deleted.

     <b>.WARN</b>       Each source specifies a warning flag as previously described for the <b>-x</b> command line
                 option.  Warning flags specified on the command line take precedence over flags specified
                 in the makefile.  Also, command line warning flags are pushed to sub-makes through the
                 MAKEFLAGS environment variables so that a warning flag specified on the command line will
                 influence all sub-makes.  Several flags can be specified on a single <b>.WARN</b> target by seper-<font color="#ffffff" class="whiteout">ating&nbsp;seperating</font>
                 ating them with blanks.

<b>ENVIRONMENT</b>
     The <b>bsdmake</b> utility uses the following environment variables, if they exist: MACHINE, MAKE, MAKEFLAGS,
     MAKEOBJDIR, and MAKEOBJDIRPREFIX.

<b>FILES</b>
     .depend                     list of dependencies
     Makefile                    list of dependencies
     makefile                    list of dependencies
     obj                         object directory
     sys.mk                      system makefile
     /usr/share/mk               default system makefile directory
     /usr/obj                    default MAKEOBJDIRPREFIX directory.
     /etc/make.conf              default path to <!-- a -->make.conf(5)<!-- /a -->

<b>EXAMPLES</b>
     List all included makefiles in order visited:

           make -V .MAKEFILE_LIST | tr \  \\n

<b>COMPATIBILITY</b>
     Older versions of <b>bsdmake</b> used MAKE instead of MAKEFLAGS.  This was removed for POSIX compatibility.
     The internal variable <u>MAKE</u> is set to the same value as <u>.MAKE</u>; support for this may be removed in the
     future.

     Most of the more esoteric features of <b>bsdmake</b> should probably be avoided for greater compatibility.

<b>SEE</b> <b>ALSO</b>
     <a href="mkdep.1.html#//apple_ref/doc/man/1/mkdep">mkdep(1)</a>, <!-- a -->make.conf(5)<!-- /a -->

<b>HISTORY</b>
     A <b>bsdmake</b> command appeared in PWB UNIX.

<b>BUGS</b>
     The determination of <u>.OBJDIR</u> is contorted to the point of absurdity.

     In the presence of several <b>.MAIN</b> special targets, <b>bsdmake</b> silently ignores all but the first.

     <u>.TARGETS</u> is not set to the default target when <b>bsdmake</b> is invoked without a target name and no <b>.MAIN</b>
     special target exists.

     The evaluation of <u>expression</u> in a test is very simple-minded.  Currently, the only form that works is
     `.if ${VAR} op something' For instance, you should write tests as `.if ${VAR} == string' not the other
     way around, which would give you an error.

     For loops are expanded before tests, so a fragment such as:

           .for ARCH in ${SHARED_ARCHS}
           .if ${ARCH} == ${MACHINE}
                ...
           .endif
           .endfor

     will not work, and should be rewritten as:

           .for ARCH in ${SHARED_ARCHS}
           .if ${MACHINE} == ${ARCH}
                ...
           .endif
           .endfor

     The parsing code is broken with respect to handling a semicolon after a colon, so a fragment like this
     will fail:

           HDRS=   foo.h bar.h

           all:
           .for h in ${HDRS:S;^;${.CURDIR}/;}
                ...
           .endfor

     A trailing backslash in a variable value defined on the command line causes the delimiting space in the
     MAKEFLAGS environment variable to be preceeded by that backslash.  That causes a submake to not treat
     that space as a word delimiter.  Fixing this requires a larger rewrite of the code handling command
     line macros and assignments to <u>.MAKEFLAGS</u>.

BSD                            October 14, 2005                            BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/bsdmake.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/bsdmake.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/bsdmake.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="GenPrimaryKeys.css">
<TITLE> </TITLE></HEAD>
<BODY BGCOLOR="#ffffff">

<!--start of banner -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of banner -->
<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="TopicsTOC.html" target="_top">WebObjects Programming Topics</a>
</font>
<br><br>
<!--end of path -->


<H1 CLASS="TopictTitleTOC">
Generating Primary Key Values
</H1>
<DIV>
<H2 CLASS="Synopsis">
<A NAME="pgfId=606101">
 </A>
Synopsis<DIV>
<IMG SRC="GenPrimaryKeys-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606102">
 </A>
Describes how the primary key is generated for a new object in EOF. It also explains the various ways the user can generate a primary key.</P>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606103">
 </A>
Description<DIV>
<IMG SRC="GenPrimaryKeys-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606104">
 </A>
Primary keys are used in a database to identify a row in a table. Each key is generated on the client side before its corresponding row is inserted into the database. </P>
<P CLASS="Body">
<A NAME="pgfId=606105">
 </A>
There are several ways to generate the primary key, some of which are outlined below.</P>
<DIV>
<H4 CLASS="Heading2">
<A NAME="pgfId=606106">
 </A>
Class Property of an EnterpriseObject</H4>
<P CLASS="Body">
<A NAME="pgfId=606108">
 </A>
The primary key can be generated by the user in the Enterprise Object (EO) when it is created. EOModeller allows the primary key to be made a class property and hence, an instance variable of the Enterprise Object. The user has the responsibility of creating a unique primary key each time a new EO is instantiated.</P>
</DIV>
<DIV>
<H4 CLASS="Heading2">
<A NAME="pgfId=606109">
 </A>
Adaptor-Generated Primary Key</H4>
<P CLASS="Body">
<A NAME="pgfId=606111">
 </A>
In EOF's default primary key mechanism, the EOAdaptorChannel generates the primary keys. It collaborates with the database server to maintain a linear sequence of nonrepeating primary keys per entity. The primary key attribute must not be a class property. If the type of the primary key attribute is a 12-byte NSData, EOF generates unique primary keys without going to the database.</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="pgfId=606112">
 </A>
Advantages</H6>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606113">
 </A>
&#183;		Easy-to-use; the user does not have to bother with primary key generation.</P>
</UL>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="pgfId=606114">
 </A>
Disadvantages</H6>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=607096">
 </A>
&#183;		Server-specific.</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606116">
 </A>
&#183;	Requires server setup using EOModeler's SQL generation.</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606117">
 </A>
&#183;	Requires a round-trip to the database at run time for each new key.</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606118">
 </A>
&#183;	Cannot generate a compound primary key.</P>
</UL>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Heading2">
<A NAME="pgfId=606120">
 </A>
Delegate of the Database Context</H4>
<P CLASS="Body">
<A NAME="pgfId=606122">
 </A>
Before using the adaptor's default primary key generation, the EODatabaseContext's delegate is given a chance to generate the primary key. This method is used only if it satisfies the following conditions</P>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606123">
 </A>
&#183;	The database context has a delegate.</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606124">
 </A>
&#183;	The delegate implements <EM CLASS="Code">
databaseContextNewPrimaryKeyForObject</EM>
.</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606125">
 </A>
&#183;	The method returns a non-null value.</P>
</UL>
</DIV>
<DIV>
<H4 CLASS="Heading2">
<A NAME="pgfId=606127">
 </A>
Custom Stored Procedure</H4>
<P CLASS="Body">
<A NAME="pgfId=606129">
 </A>
The user can create a stored procedure for the generation of the primary keys and add it to model. The stored procedure is set as the primary key stored procedure for the entity.</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="pgfId=606130">
 </A>
Advantages</H6>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606131">
 </A>
&#183;		Useful if non-EOF applications share the database.</P>
</UL>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="pgfId=606132">
 </A>
Disadvantages</H6>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606133">
 </A>
&#183;		Requires a round trip to the server for each primary key.</P>
</UL>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Heading2">
<A NAME="pgfId=606135">
 </A>
Propagation of Primary Keys</H4>
<P CLASS="Body">
<A NAME="pgfId=606137">
 </A>
The EOModeler allows the user to set the &quot;Propagate Primary Key&quot; in the advanced relationship inspector. When the user creates an object within an entity, that entity's primary key is used as the primary key for the new object.</P>
<P CLASS="Body">
<A NAME="pgfId=606138">
 </A>
For example, a column in table A can be the primary key for table A, as well as the foreign key to a table B. </P>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606139">
 </A>
See Also<DIV>
<IMG SRC="GenPrimaryKeys-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606140">
 </A>
&#183;	EOTemporaryGlobalID</P>
<P CLASS="Bulleted">
<A NAME="pgfId=613398">
 </A>
&#183;	EOUtilities</P>
<P CLASS="Bulleted">
<A NAME="pgfId=613399">
 </A>
&#183;	Accessing Non-Class Property Values</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606141">
 </A>
Questions<DIV>
<IMG SRC="GenPrimaryKeys-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606142">
 </A>
&#183;		How do I generate primary key using stored procedures?</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606143">
 </A>
&#183;		How do I generate primary key using the delegate of the database context?</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606144">
 </A>
&#183;		How do I generate primary key using class properties?</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606145">
 </A>
&#183;		How do I propagate primary keys?</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606146">
 </A>
&#183;		How do I generate primary key using the default primary key generation mechanism?</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606147">
 </A>
&#183;		How do I generate a primary key at the adaptor layer without a database transaction? </P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606148">
 </A>
Keywords<DIV>
<IMG SRC="GenPrimaryKeys-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606149">
 </A>
&#183;	Primary keys</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606150">
 </A>
&#183;	Propagate Primary keys</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606152">
 </A>
Revision History<DIV>
<IMG SRC="GenPrimaryKeys-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606153">
 </A>
22 July, 1998. Seejo Pylappan. First Draft.<BR>
19 November, 1998. Clif Liu. Second Draft.</P>
<DIV>
<pre></pre></DIV>
<A NAME="pgfId=602450">
 </A>
</DIV>


<!--start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->

</body>
</HTML>

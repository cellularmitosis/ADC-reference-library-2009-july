<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A GXPD30: LaserWriter GX CustomDialogs Sample</title><meta name="keywords" content="Mac OS 7 QuickDraw GX LaserWriter Custom Dialogs sample problems"><meta name="Description" content="Technical Q&amp;A GXPD30: NOTE: QuickDraw GX printer driversand GX printing extensions will not be supported in Mac OS8.0 or in future Mac OS releases. Q&amp;A shows how to repairquirks in the SDK Custom Dialogs sample driver that causesthe page size to default to the fifth paper size and to alwaysdefault to having the PrintToFile checkbox checked. Q&amp;A alsoexplains how QuickDraw GX determines default values in pagesizes and the PrintToFile checkbox."><meta name="categories" content="QuickDraw GX"><meta name="week-posted" content="Jul 31, 1995 - Aug 4, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001245" title="LaserWriter GX CustomDialogs Sample"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxPrinting-date.html">Printing</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Printing/index.html" target="_blank">Reference Library > Printing</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A GXPD30</div>
<div id="pageheadsub">LaserWriter GX CustomDialogs Sample</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->						<!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><TABLE BORDER="0"><TR>	<td bgcolor="#e6e6e6" align=left>		<B>Important for all Apple Printing and Graphics Developers: </B><p id=p4>		The information in this Technical Q &amp; A is still relevant up to and including		<A HREF="../../technotes/tn/tn1090.html" target="_blank">Mac OS 7.6</A>		with QuickDraw GX 1.1.5. Beginning with the release of Mac OS 8.0,		however, Apple plans to deliver a system which incorporates QuickDraw GX		graphics and typography <B>only</B>. QuickDraw GX printer drivers and GX printing		extensions will <B>not</B> be supported in Mac OS 8.0 or in future Mac OS releases. Apple's		goal is to simplify the user experience of printing by unifying the Macintosh		graphic and printing architectures and standardizing on the classic Printing		Manager. </P>				For details on Apple's official announcement, refer to 		<A HREF="../../technotes/gxchange.html" target="_blank">		&lt;/dev/technotes/gxchange.html&gt;</A>	</TD></TR></TABLE><BR><p id = p2>Q:  I used the SDK Custom Dialogs sample driver as the basis for the compatibilitypart of our GX PostScript driver, and I added an Options dialog to it for ourprinter-specific features. I have two problems with it when using applicationsthat aren't GX-aware:</p><ol type="1" start="1">	<li>For non-GX-aware applications, the page size always is defaults to the fifth paper size. As a result, whichever paper type is the fifth one listed in the resource file that has the <code>'ptyp'</code>s in it becomes the default paper size in the GX compatibility driver. This is, of course, reflected in the Page Setup dialog.</li>	<li>The driver always defaults to having the "Print To File" checkbox on.</li></ol><p id=p4>What can I do about these problems?</p><p id=p4>A:  Both of these quirks in the sample driver that you describe (improper defaultpaper type and the "Print to File" check box defaulting to on) can be fixed bymodifying the <code>'PREC'</code> 0 resource in the driver.</p><p id=p4>When an old-style-printing application calls <code>PrintDefault()</code> to request thedefault old-style print record from the current printer driver, the drivergives it the contents of the <code>'PREC'</code> 0 resource. Then, when the applicationcalls <code>PrJobDialog</code> or <code>PrStlDialog()</code>, it passes in that print record. In itsoverrides, the GX printer driver interprets the contents of theold-style-printrecord in order to set up the states of the button, checkboxes,etc. in the old-style dialogs.</p><p id=p4>To determine which paper type radio button to select in the old-style page-setupdialog, QuickDraw GX compares the page rect of the old-style-printrecord to therects of all the paper types in the driver (or paper-type extensions, such as"3-Hole Punch"), and tries to find the best match. Because of the way that theold-style-printrecord in the <code>CustomDialogs</code> sample is defined, that best matchturns out to be the fifth paper type in your list. So, to fix this quirk, allyou have to do is change the bounds setting in the <code>'PREC'</code> 0 resource so that itmatches the bounds of the US Letter paper type in the driver.</p><p id=p4>To determine the state of the "Print to disk" checkbox, the driver looks at the<code>UIOffset</code> bit of the old-style-printrecord. (One might not think to look at thisbit, but old-style-printrecords are limited to 120 bytes, and there was nobetter place for this driver to store this information.) Because the <code>'PREC'</code> 0resource in this driver has this bit set, the checkbox defaults to on. So, tofix this quirk, all you have to do is set this bit off.</p></td></tr></table></center><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Aug 01 1995]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/gxpd/gxpd30.html%3Fid%3DDTS10001245-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/gxpd/gxpd30.html%3Fid%3DDTS10001245-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/gxpd/gxpd30.html%3Fid%3DDTS10001245-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE>Extending Shapes and Sets</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=15715"> </A>Extending Shapes and Sets</H1><P CLASS="T1.Text1"><A NAME="pgfId=15716"> </A>The QuickDraw&nbsp;3D <A NAME="marker=17712"> </A>shape and <A NAME="marker=17713"> </A>set routines are discussed in <A HREF="qd3dintroduction.1c.htm#29831" CLASS="XRef">&quot;Managing Shapes&quot;</A>.</P><P CLASS="T1.Text1"><A NAME="pgfId=15819"> </A>The <TT CLASS="cv">Q3Shape_GetSet</TT> and <TT CLASS="cv">Q3ShapeSetSet</TT> calls are implemented via the element type <TT CLASS="cv">kQ3ElementTypeSet</TT>:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=21473"> </A>typedef long&nbsp;&nbsp;&nbsp;&nbsp;TQ3ElementType;<BR></CODE><CODE CLASS="Cv.Code"><A NAME="pgfId=21479"> </A>#define kQ3ElementTypeNone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0<BR>#define kQ3ElementTypeUnknown&nbsp;&nbsp;&nbsp;32<BR>#define kQ3ElementTypeSet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;33<BR>#define kQ3ElementTypeName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;34<BR>#define kQ3ElementTypeURL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;35<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=15905"> </A>The expression <TT CLASS="cv">Q3Shape_GetSet(s,&amp;o)</TT> is eqivalent to </P><P CLASS="T1.Text1"><A NAME="pgfId=15839"> </A><TT CLASS="cv">Q3Shape_GetElement(s, kQ3ElementTypeSet, &amp;o)</TT></P><P CLASS="T1.Text1"><A NAME="pgfId=15841"> </A>The expression <TT CLASS="cv">Q3Shape_SetSet(s,o)</TT>  is eqivalent to </P><P CLASS="T1.Text1"><A NAME="pgfId=15842"> </A><TT CLASS="cv">Q3Shape_SetElement(s, kQ3ElementTypeSet, &amp;o)</TT></P><P CLASS="T1.Text1"><A NAME="pgfId=15779"> </A>It is important to note that a <TT CLASS="cv">Q3Shape_</TT>...<TT CLASS="cv">Element</TT>... call does not create a set on a shape and then add the element to it. The data is attached directly to the shape. Therefore, it is possible for an element to exist on a shape without a set existing on it as well.</P><P CLASS="T1.Text1"><A NAME="pgfId=15783"> </A> In your application, if you attach an element to a shape in this way:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=21485"> </A>set = Q3Set_New();<BR>Q3Set_AddElement(set, ElemType, &amp;data);<BR>Q3Shape_SetSet(shape, set); <BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=15882"> </A>You should retrieve it in the same manner:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=21490"> </A>Q3Shape_GetSet(shape, &amp;set);<BR>if (Q3Set_Contains(set, ElemType) == kQ3True) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Set_Get(set, ElemType, &amp;data);<BR>} <BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=15794"> </A>Similarly, if you attach data to a shape with the call</P><CODE CLASS="Cv.Code"><A NAME="pgfId=21495"> </A>Q3Shape_AddElement(shape, ElemType, &amp;data); <BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=15796"> </A>You should retrieve it in the same manner: </P><CODE CLASS="Cv.Code"><A NAME="pgfId=21499"> </A>if (Q3Shape_ContainsElement(<BR>&nbsp;&nbsp;&nbsp;&nbsp;set, ElemType) == kQ3True) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Shape_GetElement(set, ElemType, &amp;data);<BR>} <BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=15802"> </A>When attempting to find a particular element on a shape, you should first check with <TT CLASS="cv">Q3Shape_GetNextElementType</TT> or <TT CLASS="cv">Q3Shape_GetElement</TT>. Then you should call</P><P CLASS="T1.Text1"><A NAME="pgfId=15923"> </A><TT CLASS="cv">Q3Shape_GetSet(s, &amp;set)</TT> or</P><P CLASS="T1.Text1"><A NAME="pgfId=15924"> </A><TT CLASS="cv">Q3Shape_GetElement(s, kQ3ElementTypeSet, &amp;set))</TT>. </P><P CLASS="T1.Text1"><A NAME="pgfId=15925"> </A>Finally, you should call <TT CLASS="cv">Q3Shape_GetElement(set, ...)</TT>. </P><P CLASS="T1.Text1"><A NAME="pgfId=15773"> </A>In terms of implementation, <TT CLASS="cv">Q3Shape_SetSet</TT> and <TT CLASS="cv">Q3Shape_GetSet</TT> should be used only for sets of information that are shared among multiple shapes.  <TT CLASS="cv">Q3Shape_AddElement</TT>, <TT CLASS="cv">Q3Shape_GetElement</TT>, and similar calls should be used only for elements that are unique to a particular shape.</P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<html><head><title>Mac OS X
 Manual Page For getopt_long(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/getopt_long" title="Mac OS X
 Manual Page for getopt_long(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/getopt_long"; name=getopt_long(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
GETOPT_LONG(3)           BSD Library Functions Manual           GETOPT_LONG(3)

<b>NAME</b>
     <b>getopt_long</b>, <b>getopt_long_only</b> -- get long options from command line argument list

<b>LIBRARY</b>
     Standard C Library (libc, -lc)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;getopt.h&gt;</b>

     <u>extern</u> <u>char</u> <u>*optarg</u>;
     <u>extern</u> <u>int</u> <u>optind</u>;
     <u>extern</u> <u>int</u> <u>optopt</u>;
     <u>extern</u> <u>int</u> <u>opterr</u>;
     <u>extern</u> <u>int</u> <u>optreset</u>;

     <u>int</u>
     <b>getopt_long</b>(<u>int</u> <u>argc</u>, <u>char</u> <u>*</u> <u>const</u> <u>*argv</u>, <u>const</u> <u>char</u> <u>*optstring</u>, <u>const</u> <u>struct</u> <u>option</u> <u>*longopts</u>,
         <u>int</u> <u>*longindex</u>);

     <u>int</u>
     <b>getopt_long_only</b>(<u>int</u> <u>argc</u>, <u>char</u> <u>*</u> <u>const</u> <u>*argv</u>, <u>const</u> <u>char</u> <u>*optstring</u>, <u>const</u> <u>struct</u> <u>option</u> <u>*longopts</u>,
         <u>int</u> <u>*longindex</u>);

<b>DESCRIPTION</b>
     The <b>getopt_long</b>() function is similar to <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a> but it accepts options in two forms: words and char-<font color="#ffffff" class="whiteout">acters.&nbsp;characters.</font>
     acters.  The <b>getopt_long</b>() function provides a superset of the functionality of <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>.  The
     <b>getopt_long</b>() function can be used in two ways.  In the first way, every long option understood by the
     program has a corresponding short option, and the option structure is only used to translate from long
     options to short options.  When used in this fashion, <b>getopt_long</b>() behaves identically to <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>.
     This is a good way to add long option processing to an existing program with the minimum of rewriting.

     In the second mechanism, a long option sets a flag in the <u>option</u> structure passed, or will store a
     pointer to the command line argument in the <u>option</u> structure passed to it for options that take argu-<font color="#ffffff" class="whiteout">ments.&nbsp;arguments.</font>
     ments.  Additionally, the long option's argument may be specified as a single argument with an equal
     sign, e.g.,

           myprogram --myoption=somevalue

     When a long option is processed, the call to <b>getopt_long</b>() will return 0.  For this reason, long option
     processing without shortcuts is not backwards compatible with <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>.

     It is possible to combine these methods, providing for long options processing with short option equiv-<font color="#ffffff" class="whiteout">alents&nbsp;equivalents</font>
     alents for some options.  Less frequently used options would be processed as long options only.

     The <b>getopt_long</b>() call requires a structure to be initialized describing the long options.  The struc-<font color="#ffffff" class="whiteout">ture&nbsp;structure</font>
     ture is:

           struct option {
                   char *name;
                   int has_arg;
                   int *flag;
                   int val;
           };

     The <u>name</u> field should contain the option name without the leading double dash.

     The <u>has</u><b>_</b><u>arg</u> field should be one of:

           no_argument        no argument to the option is expect
           required_argument  an argument to the option is required
           optional_argument  an argument to the option may be presented.

     If <u>flag</u> is not NULL, then the integer pointed to by it will be set to the value in the <u>val</u> field.  If
     the <u>flag</u> field is NULL, then the <u>val</u> field will be returned.  Setting <u>flag</u> to NULL and setting <u>val</u> to
     the corresponding short option will make this function act just like <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>.

     If the <u>longindex</u> field is not NULL, then the integer pointed to by it will be set to the index of the
     long option relative to <u>longopts</u>.

     The last element of the <u>longopts</u> array has to be filled with zeroes.

     The <b>getopt_long_only</b>() function behaves identically to <b>getopt_long</b>() with the exception that long
     options may start with `-' in addition to `--'.  If an option starting with `-' does not match a long
     option but does match a single-character option, the single-character option is returned.

<b>RETURN</b> <b>VALUES</b>
     If the <u>flag</u> field in struct option is NULL, <b>getopt_long</b>() and <b>getopt_long_only</b>() return the value spec-<font color="#ffffff" class="whiteout">ified&nbsp;specified</font>
     ified in the <u>val</u> field, which is usually just the corresponding short option.  If <u>flag</u> is not NULL,
     these functions return 0 and store <u>val</u> in the location pointed to by <u>flag</u>.  These functions return `:'
     if there was a missing option argument, `?' if the user specified an unknown or ambiguous option, and
     -1 when the argument list has been exhausted.

<b>EXAMPLES</b>
     int bflag, ch, fd;
     int daggerset;

     /* options descriptor */
     static struct option longopts[] = {
             { "buffy",      no_argument,            NULL,           'b' },
             { "fluoride",   required_argument,      NULL,           'f' },
             { "daggerset",  no_argument,            &amp;daggerset,     1 },
             { NULL,         0,                      NULL,           0 }
     };

     bflag = 0;
     while ((ch = getopt_long(argc, argv, "bf:", longopts, NULL)) != -1)
             switch (ch) {
             case 'b':
                     bflag = 1;
                     break;
             case 'f':
                     if ((fd = open(optarg, O_RDONLY, 0)) == -1)
                             err(1, "unable to open %s", optarg);
                     break;
             case 0:
                     if (daggerset) {
                             fprintf(stderr,"Buffy will use her dagger to "
                                 "apply fluoride to dracula's teeth\n");
                     }
                     break;
             default:
                     usage();
     }
     argc -= optind;
     argv += optind;

<b>IMPLEMENTATION</b> <b>DIFFERENCES</b>
     This section describes differences to the GNU implementation found in glibc-2.1.3:

     <b></b><b><u>oo</u></b>   Setting of <u>optopt</u> for long options with <u>flag</u> != NULL:

         GNU  sets <u>optopt</u> to <u>val</u>.

         BSD  sets <u>optopt</u> to 0 (since <u>val</u> would never be returned).

     <b></b><b><u>oo</u></b>   Setting of <u>optarg</u> for long options without an argument that are invoked via `-W' (`W;' in option
         string):

         GNU  sets <u>optarg</u> to the option name (the argument of `-W').

         BSD  sets <u>optarg</u> to NULL (the argument of the long option).

     <b></b><b><u>oo</u></b>   Handling of `-W' with an argument that is not (a prefix to) a known long option (`W;' in option
         string):

         GNU  returns `-W' with <u>optarg</u> set to the unknown option.

         BSD  treats this as an error (unknown option) and returns `?' with <u>optopt</u> set to 0 and <u>optarg</u> set
              to NULL (as GNU's man page documents).

     <b></b><b><u>oo</u></b>   BSD does not permute the argument vector at the same points in the calling sequence as GNU does.
         The aspects normally used by the caller (ordering after -1 is returned, value of <u>optind</u> relative to
         current positions) are the same, though.  (We do fewer variable swaps.)

<b>ENVIRONMENT</b>
     POSIXLY_CORRECT  If set, option processing stops when the first non-option is found and a leading `-'
                      or `+' in the <u>optstring</u> is ignored.

<b>SEE</b> <b>ALSO</b>
     <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>

<b>HISTORY</b>
     The <b>getopt_long</b>() and <b>getopt_long_only</b>() functions first appeared in GNU libiberty.  The first BSD
     implementation of <b>getopt_long</b>() appeared in NetBSD 1.5, the first BSD implementation of
     <b>getopt_long_only</b>() in OpenBSD 3.3.  FreeBSD first included <b>getopt_long</b>() in FreeBSD 5.0,
     <b>getopt_long_only</b>() in FreeBSD 5.2.

<b>BUGS</b>
     The <u>argv</u> argument is not really const as its elements may be permuted (unless POSIXLY_CORRECT is set).

     The implementation can completely replace <a href="getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>, but right now we are using separate code.

BSD                              April 1, 2000                             BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/getopt_long.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/getopt_long.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/getopt_long.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SCSI Bus Inquiry Parameter Block(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING164></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-163.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-165.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-151.html"><B>Chapter 4 - SCSI Manager 4.3</B></A> / <A HREF="Devices-156.html"><B>SCSI Manager 4.3 Reference</B></A><BR><DL><DD><A HREF="Devices-157.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING164-0></A>
<H3><A NAME=MARKER-9-120></A>SCSI Bus Inquiry Parameter Block</H3>
 <A NAME=MARKER-2-121></A>You use the SCSI bus inquiry parameter block with the <CODE>SCSIBusInquiry</CODE> function to get information about a bus. The SCSI bus inquiry parameter block is defined by the <CODE>SCSIBusInquiryPB</CODE> data type.<P>
<PRE>
struct SCSIBusInquiryPB
{
   SCSIPBHdr
   UInt16   scsiEngineCount;
   UInt16   scsiMaxTransferType;
   UInt32   scsiDataTypes;
   UInt16   scsiIOpbSize;
   UInt16   scsiMaxIOpbSize;
   UInt32   scsiFeatureFlags;
   UInt8    scsiVersionNumber;
   UInt8    scsiHBAInquiry;
   UInt8    scsiTargetModeFlags;
   UInt8    scsiScanFlags;
   UInt32   scsiSIMPrivatesPtr;
   UInt32   scsiSIMPrivatesSize;
   UInt32   scsiAsyncFlags;
   UInt8    scsiHiBusID;
   UInt8    scsiInitiatorID;
   UInt16   scsiBIReserved0;
   UInt32   scsiBIReserved1;
   UInt32   scsiFlagsSupported;
   UInt16   scsiIOFlagsSupported;
   UInt16   scsiWeirdStuff;
   UInt16   scsiMaxTarget;
   UInt16   scsiMaxLUN;
   SInt8    scsiSIMVendor[16];
   SInt8    scsiHBAVendor[16];
   SInt8    scsiControllerFamily[16];
   SInt8    scsiControllerType[16];
   SInt8    scsiXPTversion[4];
   SInt8    scsiSIMversion[4];
   SInt8    scsiHBAversion[4];
   UInt8    scsiHBAslotType;
   UInt8    scsiHBAslotNumber;
   UInt16   scsiSIMsRsrcID;
   UInt16   scsiBIReserved3;
   UInt16   scsiAdditionalLength;
};
typedef struct SCSIBusInquiryPB SCSIBusInquiryPB;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>SCSIPBHdr</CODE>
<DD> A macro that includes the SCSI Manager parameter block header, described on <A HREF=Devices-162.html#MARKER-9-74>page 4-21</A>.
<DT><CODE><A NAME=MARKER-2-34></A>scsiEngineCount</CODE>
<DD> The number of engines on the HBA. This value is 0 for a built-in SCSI bus. See the CAM specification for information about HBA engines.
<DT><CODE><A NAME=MARKER-2-123></A>scsiMaxTransferType</CODE>
<DD> The number of data transfer types available on the HBA.
<DT><CODE><A NAME=MARKER-9-107></A>scsiDataTypes</CODE>
<DD> A bit mask describing the data types supported by the SIM/HBA. Bits 3 through 15 and bit 31 are reserved by Apple Computer, Inc. Bits 16 through 30 are available for use by SIM developers. The following bits are currently defined. These types correspond to the <CODE>scsiDataType</CODE> field of the SCSI I/O parameter block.
</DL>
<PRE>
enum {
	scsiBusDataBuffer							= 0x00000001,
	scsiBusDataTIB							= 0x00000002,
	scsiBusDataSG							= 0x00000004,
	/* bits 3 to 15 are reserved by Apple */
	/* bits 16 to 30 are available for 3rd parties */
	scsiBusDataReserved							= 0x80000000			
};
</PRE>
<DL>
<DT><CODE><A NAME=MARKER-2-125></A>scsiIOpbSize</CODE>
<DD> The minimum size of a SCSI I/O parameter block for this SIM.
<DT><CODE><A NAME=MARKER-2-126></A>scsiMaxIOpbSize</CODE>
<DD> The minimum size of a SCSI I/O parameter block for all currently registered SIMs. That is, the largest registered <CODE>scsiIOpbSize.</CODE>
<DT><CODE><A NAME=MARKER-2-127></A>scsiFeatureFlags</CODE>
<DD> These flags describe various physical characteristics of the SCSI bus.
<TABLE BORDER="0" CELLPADDING=3><TD>&nbsp;<TD><CODE>scsiBusInternal</CODE> <BR>The bus is at least partly internal to the computer.<TR>
<TD>&nbsp;<TD><CODE>scsiBusExternal</CODE> <BR>The bus extends outside of the computer.<TR>
<TD>&nbsp;<TD><CODE>scsiBusInternalExternal<BR></CODE>The bus is both internal and external.<TR>
<TD>&nbsp;<TD><CODE>scsiBusInternalExternalUnknown<BR></CODE>The internal/external state of the bus is unknown.<TR>
<TD>&nbsp;<TD><CODE>scsiBusCacheCoherentDMA<BR></CODE>DMA is cache coherent.<TR>
<TD>&nbsp;<TD><CODE>scsiBusOldCallCapable<BR></CODE>The SIM supports the original SCSI Manager interface.<TR>
<TD>&nbsp;<TD><CODE>scsiBusDifferential<BR></CODE>The bus uses a differential SCSI interface. <TR>
<TD>&nbsp;<TD><CODE>scsiBusFastSCSI<BR></CODE>The bus supports SCSI-2 fast data transfers.<TR>
<TD>&nbsp;<TD><CODE>scsiBusDMAavailable<BR></CODE>DMA is available.</TABLE>

<DT><CODE><A NAME=MARKER-2-128></A>scsiVersionNumber</CODE>
<DD> The version number of the SIM/HBA.
<DT><CODE><A NAME=MARKER-2-129></A>scsiHBAInquiry</CODE>
<DD> Flags describing the capabilities of the bus.
<TABLE BORDER="0" CELLPADDING=3><TD>&nbsp;<TD><CODE>scsiBusMDP</CODE>  Supports the <CODE>MODIFY DATA POINTER</CODE> message.<TR>
<TD>&nbsp;<TD><CODE>scsiBusWide32</CODE>  Supports 32-bit wide transfers.<TR>
<TD>&nbsp;<TD><CODE>scsiBusWide16</CODE>  Supports 16-bit wide transfers.<TR>
<TD>&nbsp;<TD><CODE>scsiBusSDTR</CODE>  Supports synchronous transfers.<TR>
<TD>&nbsp;<TD><CODE>scsiBusLinkedCDB<BR></CODE> Supports linked commands.<TR>
<TD>&nbsp;<TD><CODE>scsiBusTagQ</CODE>  Supports tagged queuing.<TR>
<TD>&nbsp;<TD><CODE>scsiBusSoftReset<BR></CODE> Supports soft reset.</TABLE>

<DT><CODE><A NAME=MARKER-2-130></A>scsiTargetModeFlags</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-131></A>scsiScanFlags</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-132></A>scsiSIMPrivatesPtr</CODE>
<DD> A pointer to the SIM's private<DFN> storage.</DFN>
<DT><CODE><A NAME=MARKER-2-133></A>scsiSIMPrivatesSize</CODE>
<DD> The size of the SIM's private storage, in bytes.
<DT><CODE><A NAME=MARKER-2-134></A>scsiAsyncFlags</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-135></A>scsiHiBusID</CODE>
<DD> The highest bus number currently registered with the XPT. If no buses are registered, this field contains 0xFF (the ID of the XPT).
<DT><CODE><A NAME=MARKER-2-136></A>scsiInitiatorID</CODE>
<DD> The SCSI ID of the HBA. This value is 7 for a built-in SCSI bus.
<DT><CODE><A NAME=MARKER-2-137></A>scsiFlagsSupported</CODE>
<DD> A bit mask that defines which <CODE>scsiFlags</CODE> bits are supported.
<DT><CODE><A NAME=MARKER-2-138></A>scsiIOFlagsSupported</CODE>
<DD> A bit mask that defines which <CODE>scsiIOFlags</CODE> bits are supported.
<DT><CODE><A NAME=MARKER-2-139></A>scsiWeirdStuff</CODE>
<DD> Flags that identify unusual aspects of a SIM's operation. 
<TABLE BORDER="0" CELLPADDING=3><TD>&nbsp;<TD><CODE>scsiOddDisconnectUnsafeRead1<BR></CODE>Indicates that a disconnect or other phase change on a odd byte boundary during a read operation will result in inaccurate residual counts or data loss. If your device can disconnect on odd bytes, use polled transfers instead of blind. <TR>
<TD>&nbsp;<TD><CODE>scsiOddDisconnectUnsafeWrite1<BR></CODE>Indicates that a disconnect or other phase change on a odd byte boundary during a write operation will result in inaccurate residual counts or data loss. If your device can disconnect on odd bytes, use polled transfers instead of blind.<TR>
<TD>&nbsp;<TD><CODE>scsiBusErrorsUnsafe<BR></CODE>Indicates that a delay of more than 16 microseconds or a phase change during a blind transfer on a non-handshaked boundary may cause a system crash. <BR>If you cannot predict where delays or disconnects will occur, use polled transfers.<TR>
<TD>&nbsp;<TD><CODE>scsiRequiresHandshake<BR></CODE>Indicates that a delay of more than 16 microseconds or a phase change during a blind transfer on a <BR>non-handshaked boundary may result in inaccurate residual counts or data loss. If you cannot predict where delays or disconnects will occur, use polled transfers.<TR>
<TD>&nbsp;<TD><CODE>scsiTargetDrivenSDTRSafe<BR></CODE>Indicates that the SIM supports target-initiated synchronous data transfer negotiation. If your device supports this feature and this bit is not set, you must set the <CODE>scsiDisableSelectWAtn</CODE> flag in the <CODE>scsiIOFlags</CODE> field.</TABLE>

<DT><CODE><A NAME=MARKER-2-140></A>scsiMaxTarget</CODE>
<DD> The highest SCSI ID value supported by the HBA.
<DT><CODE><A NAME=MARKER-2-141></A>scsiMaxLUN</CODE>
<DD> The highest logical unit number supported by the HBA.
<DT><CODE><A NAME=MARKER-2-142></A>scsiSIMVendor[16]</CODE>
<DD> An ASCII text string that identifies the SIM vendor. This field returns <CODE>'Apple Computer'</CODE> for a built-in SCSI bus.
<DT><CODE><A NAME=MARKER-2-143></A>scsiHBAVendor[16]</CODE>
<DD> An ASCII text string that identifies the HBA vendor. This field returns <CODE>'Apple Computer'</CODE> for a built-in SCSI bus.
<DT><CODE><A NAME=MARKER-2-144></A>scsiControllerFamily[16]</CODE>
<DD> An optional ASCII text string that identifies the family of parts to which the SCSI controller chip belongs. This information is provided at the discretion of the HBA vendor.
<DT><CODE><A NAME=MARKER-2-145></A>scsiControllerType[16]</CODE>
<DD> An optional ASCII text string that identifies the specific type of SCSI controller chip. This information is provided at the discretion of the HBA vendor.
<DT><CODE><A NAME=MARKER-2-146></A>scsiXPTversion[4]</CODE>
<DD> An ASCII text string that identifies the version number of the XPT. You should use the other fields of this parameter block to check for specific features, rather than relying on this value.
<DT><CODE><A NAME=MARKER-2-147></A>scsiSIMversion[4]</CODE>
<DD> An ASCII text string that identifies the version number of the SIM. You should use the other fields of this parameter block to check for specific features, rather than relying on this value.
<DT><CODE><A NAME=MARKER-2-148></A>scsiHBAversion[4]</CODE>
<DD> An ASCII text string that identifies the version number of the HBA. You should use the other fields of this parameter block to check for specific features, rather than relying on this value.
<DT><CODE><A NAME=MARKER-2-149></A>scsiHBAslotType</CODE>
<DD> The slot type, if any, used by this HBA. You specify the type using one of the following constants: 
<TABLE BORDER="0" CELLPADDING=3><TD>&nbsp;<TD><CODE>scsiMotherboardBus<BR></CODE>A built-in SCSI bus.<TR>
<TD>&nbsp;<TD><CODE>scsiNuBus</CODE> A NuBus slot.<TR>
<TD>&nbsp;<TD><CODE>scsiPDSBus</CODE> A processor-direct slot.</TABLE>

<DT><CODE><A NAME=MARKER-2-150></A>scsiHBAslotNumber</CODE>
<DD> The slot number for the SIM. Device drivers should copy this value into the <CODE>dCtlSlot</CODE> field of the device control entry. This value is 0 for a built-in SCSI bus.
<DT><CODE><A NAME=MARKER-2-151></A>scsiSIMsRsrcID</CODE>
<DD> The sResource ID for the SIM. Device drivers should copy this value into the <CODE>dCtlSlotID</CODE> field of the device control entry. This value is 0 for a built-in SCSI bus.
<DT><CODE><A NAME=MARKER-2-152></A>scsiAdditionalLength</CODE>
<DD> The additional size of this parameter block, in bytes. If this structure includes extra fields to return additional information, this field contains the number of additional bytes.<A NAME=MARKER-2-153></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-163.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-165.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Disposing of Apple Event Data Structures(IM:IC)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING124></A>


<!-- Top of Header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- Bottom of Header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="IAC-123.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-125.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="IAC-2.html"><B>Interapplication Communication</B></A> / <BR><DD><A HREF="IAC-115.html"><B>Chapter 4 - Responding to Apple Events</B></A> / <A HREF="IAC-116.html"><B>Handling Apple Events</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING124-0></A>
<H2><A NAME=MARKER-9-385></A><A NAME=MARKER-21-386></A>Disposing of Apple Event Data Structures</H2>
 <A NAME=MARKER-9-86></A><A NAME=MARKER-9-117></A><A NAME=MARKER-2-21></A><A NAME=MARKER-2-59></A><A NAME=MARKER-2-60></A><A NAME=MARKER-2-342></A><A NAME=MARKER-21-206></A>Whenever a client application uses Apple Event Manager functions to create a descriptor record, descriptor list, or Apple event record, the Apple Event Manager allocates memory for these data structures in the client's application heap. Likewise, when a server application extracts a descriptor record from an Apple event by using Apple Event Manager functions, the Apple Event Manager creates a copy of the descriptor record, including the data to which its handle refers, in the server's application heap.<P>
 Whenever you finish using a descriptor record or descriptor list that you have created or extracted from an Apple event, you should dispose of the descriptor record--and thereby deallocate the memory it uses--by calling the <CODE>AEDisposeDesc</CODE> function. If the descriptor record you pass to <CODE>AEDisposeDesc</CODE> (such as an Apple event record or an AE record) includes other nested descriptor records, one call to <CODE>AEDisposeDesc</CODE> will dispose of them all. <P>
 When a client application adds a descriptor record to an Apple event (for example, when it creates a descriptor record by calling <CODE>AECreateDesc</CODE> and then puts a copy of it into a parameter of an Apple event by calling <CODE>AEPutParamDesc</CODE>), it is still responsible for disposing of the original descriptor record. After a client application has finished using both the Apple event specified in the <CODE>AESend</CODE> function and the reply Apple event, it should dispose of their descriptor records by calling <CODE>AEDisposeDesc</CODE>. The client application should dispose of them even if <CODE>AESend</CODE> returns a nonzero result code. <P>
 The Apple event that a server application's handler receives is a copy of the original event created by the client application. When a server application's handler returns to <CODE>AEProcessAppleEvent</CODE>, the Apple Event Manager disposes of the server's copy (in the server's application heap) of both the Apple event and the reply event. The server application is responsible for disposing of any descriptor records created while extracting data from the Apple event or adding data to the reply event.<P>
 In general, outputs from Apple Event Manager functions are your application's responsibility. Once you finish using them, you should use <CODE>AEDisposeDesc</CODE> to dispose of any Apple event data structures created or returned by these functions:
<TABLE BORDER="0" CELLPADDING=3><TD>AECoerceDesc<TD>AEDuplicateDesc<TR>
<TD>AECoercePtr<TD>AEGetAttributeDesc<TR>
<TD>AECreateAppleEvent<TD>AEGetKeyDesc<TR>
<TD>AECreateDesc<TD>AEGetNthDesc<TR>
<TD>AECreateList<TD>AEGetParamDesc</TABLE>
<P>
 If you attempt to dispose of descriptor records returned by successful calls to these functions without using <CODE>AEDisposeDesc</CODE>, your application may not be compatible with future versions of the Apple Event Manager. However, if any of these functions return a nonzero result code, they return a null descriptor record, which does not need to be disposed of. <P>
 Outputs from functions, such as <CODE>AEGetKeyPtr</CODE>, that use a buffer rather than a descriptor record to return data do not require the use of <CODE>AEDisposeDesc</CODE>. It is therefore preferable to use these functions for any data that is not identified by a handle. <P>
 Some of the functions described in the chapter "Resolving and Creating Object Specifier Records" in this book also create descriptor records. If you set the <CODE>disposeInputs</CODE> parameter to <CODE>FALSE</CODE> for any of the following functions, you should dispose of any Apple event data structures that they create or return:
<TABLE BORDER="0" CELLPADDING=3><TD>CreateCompDescriptor<TD>CreateObjSpecifier<TR>
<TD>CreateLogicalDescriptor<TD>CreateRangeDescriptor </TABLE>
<P>
 Your application is also responsible for disposing of some of the tokens it creates in the process of resolving an object specifier record. For information about token disposal, see <A HREF=IAC-245.html#MARKER-9-178>"Defining Tokens" on page 6-39</A><A NAME=MARKER-2-394></A><A NAME=MARKER-2-395></A><A NAME=MARKER-2-187></A><A NAME=MARKER-2-397></A><A NAME=MARKER-2-57></A>.<A NAME=MARKER-2-153></A> <A NAME=MARKER-2-400></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="IAC-123.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-125.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="IAC-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

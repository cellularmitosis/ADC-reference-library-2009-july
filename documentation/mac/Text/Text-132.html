<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Carets and Highlighting(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING132></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-131.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-133.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-126.html"><B>Chapter 3 - QuickDraw Text</B></A> / <A HREF="Text-127.html"><B>About QuickDraw Text</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING132-0></A>
<H2><A NAME=MARKER-9-53></A>Carets and Highlighting</H2>
 <A NAME=MARKER-9-1></A>Highlighting a selection range and marking the <A NAME=MARKER-2-2></A>insertion point with a caret both involve converting offsets of characters in a text buffer to pixel locations on a display screen. This task is prerequisite to both drawing a caret and highlighting text. See the chapter "Introduction to Text on the Macintosh" in this book for a discussion of the conventions underlying the relationship of a character at a byte offset to a caret position for unidirectional text and text at a direction boundary.<P>
 When the text is unidirectional, performing these tasks is uncomplicated because storage order and display order are the same. For unidirectional text, a <A NAME=MARKER-2-4></A>caret position always falls between the corresponding glyphs of these characters--on the leading edge of one and the trailing edge of the other. When the text is bidirectional, it can contain characters that occur on direction boundaries; although the characters are stored contiguously in memory, the leading edge of one character's glyph does not constitute the trailing edge of the other in display order. Consequently, two physically separate caret positions exist on the display screen, one associated with each glyph.<P>
 There are a number of situations in which you need to know a caret position, and they fall within two categories: drawing a caret to mark the insertion point, and using a caret position to denote an endpoint for highlighting a text selection. For a discussion of marking an insertion point with either a single caret or a dual caret, and caret movement with arrow keys, see the chapter "Introduction to Text on the Macintosh."<P>
 You need to know the caret positions marking the endpoints of a text selection to highlight it when the user selects either a word or a range of text, and for other features that the application supports, such as a search operation. Generally, you know the byte offsets of the characters that begin and end a selection range for tasks such as search operations. However, when the user clicks in or selects a range of text to be highlighted, usually you first need to convert the pixel locations marking the cursor locations to the corresponding characters' byte offsets in memory, and then convert the characters' byte offsets to caret positions.To encompass all of the characters within the text segment to be highlighted, you use caret positions that mark endpoints which include the beginning and ending characters of the text.<P>
 On a black-and-white screen, highlighting a selection is simple; white pixels turn black and vice versa. In a color environment, the inversion of multibit pixel values usually yields many different colors, which is unsuitable for highlighting text. To highlight text rendered in color, QuickDraw lets you specify a highlight value that it uses instead of the current graphics ports background color. Generally the user sets the highlighting color, but your application can change the color. When you use highlight mode, all pixel values of the current background color are replaced with the value of the highlighting color.<A NAME=MARKER-2-289></A><A NAME=MARKER-2-389></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-131.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-133.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

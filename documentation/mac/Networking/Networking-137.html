<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>dspStatus(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING137></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-136.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-138.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-98.html"><B>Chapter 5 - AppleTalk Data Stream Protocol (ADSP) </B></A> / <A HREF="Networking-115.html"><B>ADSP Reference</B></A><BR><DL><DD><A HREF="Networking-122.html"><B>Routines</B></A> / <A HREF="Networking-136.html"><B>Maintaining an ADSP Connection and Using It to Exchange Data</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING137-0></A>
<H3>dspStatus <A NAME=MARKER-2-412></A></H3>
 <A NAME=MARKER-2-413></A>The <CODE>dspStatus</CODE> routine returns the number of bytes waiting to be read and sent and the amount of space available in the send and receive queues. You use the <CODE>PBControl</CODE> function to call the <CODE>dspStatus</CODE> routine. See <A HREF=Networking-122.html#MARKER-9-273>"Routines" on page 5-43</A> for a description of the <CODE>PBControl</CODE> function.<P>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The function result. <TR>
<TD>--><TD>ioCRefNum<TD>Integer<TD>The driver reference number.<TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>dspStatus</CODE> for this function.<TR>
<TD>--><TD>ccbRefNum<TD>Integer<TD>The CCB reference number.<TR>
<TD><--<TD>statusCCB<TD>TPCCB<TD>A pointer to the CCB.<TR>
<TD><--<TD>sendQPending<TD>Integer<TD>Bytes waiting to be sent or acknowledged.<TR>
<TD><--<TD>sendQFree<TD>Integer<TD>Available send queue in bytes.<TR>
<TD><--<TD>recvQPending<TD>Integer<TD>Bytes waiting to be read from queue.<TR>
<TD><--<TD>recvQFree<TD>Integer<TD>Available receive queue in bytes. </TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE>csCode</CODE>
<DD> The routine selector, always <CODE>dspStatus</CODE> for this routine.
<DT><CODE>ccbRefNum</CODE>
<DD> The connection control block (CCB) reference number that the <CODE>dspInit</CODE> routine returned.
<DT><CODE>statusCCB</CODE> 
<DD> A pointer to the CCB of the connection specified by the <CODE>ccbRefNum</CODE> parameter value. <A NAME=MARKER-2-414></A>
<DT>s<CODE>endQPending</CODE> 
<DD> The number of bytes of data that are in the send queue waiting to be sent, including 1 byte for each logical end-of-message (EOM) indicator in the send queue. (ADSP counts 1 byte for each EOM, even though no actual data corresponds to the EOM indicator.) The send queue contains all data that has been sent to ADSP for transmission and that has not yet been acknowledged. Some of the data in the send queue might have already been transmitted, but ADSP retains it in the send queue until the remote connection end acknowledges its receipt in case the data has to be retransmitted. 
<DT><CODE>sendQFree</CODE> 
<DD> The number of bytes available in the send queue for additional data. <A NAME=MARKER-2-415></A><A NAME=MARKER-2-416></A>
<DT><CODE>recvQPending</CODE> 
<DD> The number of bytes in the receive queue, including 1 byte for each EOM if the EOM bit is set in an ADSP packet header. The receive queue contains all of the data that has been received by the connection end but not yet read by the connection end's client. 
<DT><CODE>recvQFree</CODE> 
<DD> The number of bytes available in the receive queue for <BR>additional data.<A NAME=MARKER-2-417></A><A NAME=MARKER-2-418></A>
</DL>
<A NAME=HEADING137-10></A>
<H5>DESCRIPTION</H5>
 The <CODE>dspStatus</CODE> routine provides information about an open connection. In addition to returning the number of bytes waiting to be read and sent and the space available in the send and receive queues, this routine also returns a pointer to the CCB, which contains information about the state of the connection end and about connection events received by the connection end. For more information about the CCB, see <A HREF=Networking-109.html#MARKER-9-146>"Creating and Using a Connection Control Block" on page 5-12</A> and <A HREF=Networking-117.html#MARKER-9-232>"The ADSP Connection Control Block Record" beginning on page 5-35</A>. <A NAME=MARKER-2-242></A><P>
<A NAME=HEADING137-12></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>dspStatus</CODE> routine from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>dspStatus</CODE> in the <CODE>csCode</CODE> field of the parameter block.<A NAME=MARKER-2-420></A> <P>
<A NAME=HEADING137-14></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>errRefNum<TD>-1280<TD>Bad connection reference number</TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-136.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-138.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

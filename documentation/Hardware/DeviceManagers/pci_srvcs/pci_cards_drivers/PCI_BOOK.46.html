<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Open Firmware Driver Support</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.40.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.45.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.47.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3445"> </A><A NAME="10627"> </A>Open Firmware Driver Support</H1><P CLASS="T1.Text1"><A NAME="pgfId=3450"> </A>As explained in <A HREF="PCI_BOOK.3d.html#22733" CLASS="XRef">Startup Firmware</A>, <A NAME="marker=3449"> </A>Open Firmware drivers are stored as FCode in expansion ROMs and copied into system RAM during the Open Firmware startup process. When the startup firmware in the Power Macintosh ROM opens an Open Firmware driver, it acquires a handle to the driver code so it can communicate directly with it. The Power Macintosh firmware provides three kinds of memory for the driver to use:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3451"> </A>The device tree stores properties and routines that are intrinsic to the driver; these permanent attributes are always available to the driver and other code.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3452"> </A>Each node of the device tree has its own static variables, available to drivers, which are preserved throughout the Open Firmware startup process.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3453"> </A>Memory for buffers and other driver requirements is allocated each time a driver is opened and is maintained until the driver is closed.</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=3454"> </A>Open Firmware drivers are expected to perform their work (such as drawing characters on a screen) without operating-system support. However, the startup firmware in some Power Macintosh ROMs may contain hardware-specific <A NAME="marker=3455"> </A>support packages that Open Firmware drivers can use for common tasks. The supported packages are located in the node <TT CLASS="cv">/packages</TT>. The Macintosh Open Firmware does not provide interrupt service routines (ISR) for handling hardware <A NAME="marker=3456"> </A>interrupts; Open Firmware drivers must detect external events by polling devices.</P><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.40.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.45.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.47.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Instruments User Guide: Built-in Instruments</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Built-in Instruments"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004652-CH6" title="Built-in Instruments"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../Performance-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000901" target="_top">Performance</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652-CH1-SW1">Instruments User Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../CreatingaCustomInstrument/CreatingaCustomInstrument.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40004652-CH6-SW1" title="Built-in Instruments"></a><h1>Built-in Instruments</h1><p>A number of instruments come built into the Instruments application. Each instrument has its own configuration options and way of displaying information, appropriate to the type of data that instrument collects. The built-in instruments are grouped into a handful of categories, based on the type of information that the instrument gathers. The following sections describe the built-in instruments in greater detail. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW2">Core Data</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW8">File System</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW14">Garbage Collection</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW17">Graphics</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW19">Input/Output</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW21">Master Tracks</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW23">Memory</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW27">System</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW36">Threads/Locks</a>
				
			<br/>
			
        
			
			
				<a href="Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW38">User Interface</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40004652-CH6-SW2" title="Core Data"></a><h2>Core Data</h2><p>The following instruments gather data related to events in Core Data applications. You can use the information returned by these instruments to assess the performance implications of various events and to identify potential courses of action to correct issues.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW3" title="Core Data Saves"></a><h3>Core Data Saves</h3><p>The Core Data Saves instrument records save operations in Core Data applications. This instrument can operate on a single process or on all processes currently running on the system. It records data only for those processes that use Core Data. This instrument uses DTrace in its implementation and can be exported to a DTrace script. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The method that initiated the save operation (including the stack trace information) </p></li><li class="li"><p>The duration of the save operation (specified in microseconds) </p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Save duration</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW4" title="Core Data Fetches"></a><h3>Core Data Fetches</h3><p>The Core Data Fetches instrument records data store fetch operations in Core Data applications. This instrument can operate on a single process or on all processes currently running on the system. It records data only for those processes that use Core Data. This instrument uses DTrace in its implementation and can be exported to a DTrace script. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the entity that was fetched </p></li><li class="li"><p>The caller of the function (including the stack trace information) </p></li><li class="li"><p>The fetch count for that entity</p></li><li class="li"><p>The duration of the fetch operation (specified in microseconds)</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Fetch count</p></li><li class="li"><p>Fetch duration</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW5" title="Core Data Faults"></a><h3>Core Data Faults</h3><p>The Core Data Faults instrument records fault events that occur during the lazy initialization of an <code>NSManagedObject</code> or its to-many relationship. This instrument can operate on a single process or on all processes currently running on the system. It records data only for those processes that use Core Data. This instrument uses DTrace in its implementation and can be exported to a DTrace script. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the object that caused the fault </p></li><li class="li"><p>The name of the method that triggered the fault (including the stack trace information) </p></li><li class="li"><p>The execution duration for the fault handler (specified in microseconds)</p></li><li class="li"><p>The relationship fault source</p></li><li class="li"><p>The relationship name</p></li><li class="li"><p>The relationship fault duration (specified in microseconds)</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Fault duration</p></li><li class="li"><p>Relationship fault duration</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW6" title="Core Data Cache Misses"></a><h3>Core Data Cache Misses</h3><p>The Core Data Cache Misses instrument records fault events that result in cache misses. This instrument can operate on a single process or on all processes currently running on the system. It records data only for those processes that use Core Data. This instrument uses DTrace in its implementation and can be exported to a DTrace script. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004652-CH6-SW7" title="Note"></a><p><strong>Note:</strong>&nbsp;This instrument provides a subset of the behavior offered by the Core Data Faults instrument but is more useful for analyzing your application’s overall performance. </p></div><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the object that caused the cache miss </p></li><li class="li"><p>The name of the method that triggered the cache miss (including the stack trace information) </p></li><li class="li"><p>The execution duration for the fault handler  (specified in microseconds)</p></li><li class="li"><p>The relationship cache miss source</p></li><li class="li"><p>The relationship name</p></li><li class="li"><p>The relationship cache miss duration (specified in microseconds)</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Cache miss duration</p></li><li class="li"><p>Relationship cache miss duration</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW8" title="File System"></a><h2>File System</h2><p>The instruments in this section analyze file system information and activity, such as read and write operations, permissions, and so forth.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW9" title="File Locks"></a><h3>File Locks</h3><p>The File Locks instrument records advisory file-locking operations that use the <code>flock</code> function call. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the function</p></li><li class="li"><p>The caller of the function (including the executable name and stack trace information) </p></li><li class="li"><p>The path to the file being locked </p></li><li class="li"><p>The operation type, which is an integer value corresponding to one of the following values (or a combination of values): </p><ul class="nested"><li class="nested li"><p>1 - shared lock</p></li><li class="nested li"><p>2 - exclusive lock</p></li><li class="nested li"><p>4 - don’t block when locking</p></li><li class="nested li"><p>8 - unlock</p></li></ul></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Timestamp</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW10" title="File Attributes"></a><h3>File Attributes</h3><p>The File Attributes instrument records changes to ownership and access permissions for files in the file system. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. This instrument captures information about calls to each of the following functions:</p><ul class="spaceabove"><li class="li"><p>Changes to file permission bits of a file made by the <code>chmod</code> and <code>fchmod</code> functions</p></li><li class="li"><p>Changes to the file owner and group of a file made by the <code>chown</code> and <code>fchown</code> functions</p></li></ul><p>For each function call, this instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the function</p></li><li class="li"><p>The caller of the function (including the executable name and stack trace information) </p></li><li class="li"><p>The path to the file on which the executable performed the operation</p></li><li class="li"><p>The file descriptor of the file that was modified</p></li><li class="li"><p>The mode flags, which indicate the permissions being applied to the file (This value is captured only for calls to <code>chmod</code> of <code>fchmod</code>.)</p></li><li class="li"><p>The user ID of the new file owner (This value is captured only for calls to <code>chown</code> of <code>fchown</code>.)</p></li><li class="li"><p>The group ID of the new group (This value is captured only for calls to <code>chown</code> of <code>fchown</code>.)</p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/TP40004652-CH6-SW11" title="Note"></a><p><strong>Note:</strong>&nbsp;For information about how to interpret the mode flags, see the <code><a href="../../../../Darwin/Reference/ManPages/man1/chmod.1.html#//apple_ref/doc/man/1/chmod" target="_top">chmod</a></code> man page.</p></div><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>File descriptor</p></li><li class="li"><p>Mode </p></li><li class="li"><p>User ID </p></li><li class="li"><p>Group ID </p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW12" title="File Activity"></a><h3>File Activity</h3><p>The File Activity instrument lets you monitor file system access. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. This instrument captures information about calls to each of the following functions:</p><ul class="spaceabove"><li class="li"><p>Open or create a file for reading or writing (<code>open</code>)</p></li><li class="li"><p>Delete a descriptor from the per-process reference table(<code>close</code>)</p></li><li class="li"><p>Get information about a file (<code>fstat</code>)</p></li></ul><p>For each function call, this instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the function</p></li><li class="li"><p>The caller of the function (including the executable name and stack trace information) </p></li><li class="li"><p>The path to the file on which the executable performed the operation</p></li><li class="li"><p>The file descriptor of the file</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>File descriptor</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW13" title="Directory I/O"></a><h3>Directory I/O</h3><p>The Directory I/O instrument records directory operations, such as moving directories, creating symbolic links, and so forth. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. This instrument captures information about calls to each of the following functions:</p><ul class="spaceabove"><li class="li"><p><code>delete</code> - delete files and directories</p></li><li class="li"><p><code>link</code> - create a hard or symbolic link </p></li><li class="li"><p><code>mkdir</code> - create a directory</p></li><li class="li"><p><code>mount</code> - mount a file system</p></li><li class="li"><p><code>rename</code> - change the name of a file or directory</p></li><li class="li"><p><code>rmdir</code> - remove a directory</p></li><li class="li"><p><code>symlink</code> - create a symbolic link</p></li><li class="li"><p><code>unlink</code> - remove a link </p></li><li class="li"><p><code>unmount</code> - dismount a file system</p></li></ul><p>For each function call, this instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the function</p></li><li class="li"><p>The caller of the function (including the executable name and stack trace information) </p></li><li class="li"><p>The path to the file or directory on which the executable performed the operation</p></li><li class="li"><p>The new file or directory name (where appropriate) </p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW14" title="Garbage Collection"></a><h2>Garbage Collection</h2><p>The instruments in this section collect information on memory reclaimed by the garbage collector. To use these instruments, the program must be built for garbage collection and must be run with garbage collection enabled. See <em><a href="../../../../Cocoa/Conceptual/GarbageCollection/index.html#//apple_ref/doc/uid/TP40002431" target="_top">Garbage Collection Programming Guide</a></em> for information about writing and building a program for garbage collection.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW15" title="GC Total"></a><h3>GC Total</h3><p>The GC Total instrument tracks the total number of objects and bytes allocated and reclaimed by the garbage collector. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. It records data only for those processes that have garbage collection enabled. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The function that initiated the reclamation of objects (including the stack trace information) </p></li><li class="li"><p>The number of objects reclaimed by the garbage collector</p></li><li class="li"><p>The total number of bytes reclaimed by the garbage collector</p></li><li class="li"><p>The total number of allocated bytes still in use</p></li><li class="li"><p>The total number of bytes, both reclaimed and in use</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Objects reclaimed </p></li><li class="li"><p>Bytes reclaimed </p></li><li class="li"><p>Bytes in use</p></li><li class="li"><p>Total bytes</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW16" title="Garbage Collection"></a><h3>Garbage Collection</h3><p>The Garbage Collection instrument measures the reclaim data of the Garbage Collector’s scavenge phase. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. It records data only for those processes that have garbage collection enabled. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The function that initiated the reclamation of objects (including the stack trace information) </p></li><li class="li"><p>The zone in which the memory is allocated</p></li><li class="li"><p>Whether the event is generational (1 for yes, 0 for no)</p></li><li class="li"><p>The number of objects reclaimed by the garbage collector</p></li><li class="li"><p>The number of bytes reclaimed by the garbage collector</p></li><li class="li"><p>The duration of the scavenge event (specified in microseconds)</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Zone </p></li><li class="li"><p>Is generational (the generational collector finds older objects no longer in use that are missed by the non-generational collector, but takes longer to run and is therefore run less frequently) </p></li><li class="li"><p>Objects reclaimed </p></li><li class="li"><p>Bytes reclaimed </p></li><li class="li"><p>Duration</p></li></ul><p>For entries in the Detail pane, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW17" title="Graphics"></a><h2>Graphics</h2><p>The following instruments gather graphics-related data.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW18" title="OpenGL Driver"></a><h3>OpenGL Driver</h3><p>The OpenGL Driver instrument samples OpenGL statistics. This instrument can operate on a single process or on all processes currently running on the system. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>Buffer swap count</p></li><li class="li"><p>Client GLWait time</p></li><li class="li"><p>Command2 DBytes per sample</p></li><li class="li"><p>Context2 DCount</p></li><li class="li"><p>Context GLCount</p></li><li class="li"><p>Free Context Buffer2 DWait time</p></li><li class="li"><p>Gart size bytes</p></li><li class="li"><p>Surface count</p></li><li class="li"><p>Texture count</p></li><li class="li"><p>Vram free bytes</p></li><li class="li"><p>and much more...</p></li></ul><p>To see the full list of captured data, install the instrument and open the Extended Detail pane.</p><p>The Track pane indicates when the data was gathered. The Extended Detail pane shows the statistics at each sample point.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW19" title="Input/Output"></a><h2>Input/Output</h2><p>The following instruments gather data related to I/O operations.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW20" title="Reads/Writes"></a><h3>Reads/Writes</h3><p>The Reads/Writes instrument records reads from and writes to files. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. It gathers information about each call to read and write functions, including <code>read</code>, <code>write</code>, <code>pread</code>, and <code>pwrite</code>. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the function</p></li><li class="li"><p>The caller of the function (including the executable name and stack trace information) </p></li><li class="li"><p>The path to the file on which the executable performed the operation</p></li><li class="li"><p>The file descriptor of the file that was modified</p></li><li class="li"><p>The number of bytes read or written</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>File descriptor</p></li><li class="li"><p>Bytes</p></li></ul><p>For any of these calls, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW21" title="Master Tracks"></a><h2>Master Tracks</h2><p>The Master Tracks section contains the User Interface recorder, which lets you record and play back a series of user actions in an application.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW22" title="User Interface"></a><h3>User Interface</h3><p>The User Interface instrument can launch an application or attach to a process and record your interaction with the user interface. You can then play back this recording as many times as you want, and run any other instruments you choose as you do so. You can use this instrument to create repeatable tests of the user interface as part of your quality assurance program and to capture errors that occur only sporadically. The use of the User Interface instrument is described in detail in <span class="content_text"><a href="../WorkingWithaMasterTrack/WorkingWithaMasterTrack.html#//apple_ref/doc/uid/TP40004652-CH8-SW1">“Working with a User Interface Track.”</a></span></p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW23" title="Memory"></a><h2>Memory</h2><p>The instruments in this section track memory use.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW24" title="Shared Memory"></a><h3>Shared Memory</h3><p>The Shared Memory instrument records the opening and unlinking of shared memory. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script. It gathers information about each shared memory access, including <code>shm_open</code> and <code>shm_unlink</code>.</p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The name of the function</p></li><li class="li"><p>The caller of the function (including the executable name and stack trace information) </p></li><li class="li"><p>The name of the shared memory region</p></li><li class="li"><p>The flags used to open the shared memory region (see the <code><a href="../../../../Darwin/Reference/ManPages/man2/shm_open.2.html#//apple_ref/doc/man/2/shm_open" target="_top">shm_open</a></code> man page) </p></li><li class="li"><p>The mode flags, indicating the access permissions for the region (see the <code><a href="../../../../Darwin/Reference/ManPages/man2/chmod.2.html#//apple_ref/doc/man/2/chmod" target="_top">chmod</a></code> man page)</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Flags </p></li><li class="li"><p><code>mode_t</code></p></li></ul><p>For any of these calls, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW25" title="ObjectAlloc"></a><h3>ObjectAlloc</h3><p>The ObjectAlloc instrument tracks memory allocation for an application. This instrument requires that you launch a single process so that it can gather data from the start of the process. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>Category - typically a Core Foundation object, an Objective-C class, or a raw block of memory.</p></li><li class="li"><p>Net Bytes - the number of bytes of this type currently allocated but not yet released. </p></li><li class="li"><p># Net - the number of objects or memory blocks of this type currently allocated but not yet released. </p></li><li class="li"><p>Overall Bytes - the total number of bytes of this type that have been allocated, including those that have been released.</p></li><li class="li"><p># Overall - the total number of objects or memory blocks of this type that have been allocated, including those that have been released. </p></li><li class="li"><p># Allocations (Net / Overall) - A histogram of the current and total counts. The bars are normally shades of blue. They are colored shades of yellow when the ratio between the total number of objects and the peak, or the ratio between the peak and the current number, is 1/3 or less.  The bars are shades of red when the ratio is 1/10 or less.  </p></li></ul><p>Although the ratios displayed aren't necessarily bad (often, they're normal over the long run of an application), Instruments colors them to point out allocation patterns that may deserve a further look. If you see categories where the color is red or yellow, you might try to eliminate unnecessary temporary allocations of the given type in your application. Similarly, you might simply try to eliminate the high-water mark in the number of objects.</p><p>The data table in the details pane contains a Graph column, which contains a checkbox for each row in the table. When the checkbox for a given category is enabled, the instrument displays the graph for that particular category type in the Track pane. Instruments automatically assigns a color to each graphed category. </p><p>When you mouse over category names in the details pane, a more Info button appears next to the category name. Clicking this button displays detailed information about the objects in that category, including the following attributes:</p><ul class="spaceabove"><li class="li"><p>The address of the block.</p></li><li class="li"><p>The function call or class that generated the allocation event. For example, you can see which method in a class retained an object. </p></li><li class="li"><p>The creation time of the object.</p></li><li class="li"><p>The library responsible for creating the object. </p></li></ul><p>For any of these events, you can open the Extended Detail pane to see the stack trace for each object allocation, including the type of allocation and the time at which the event occurred.</p><p>For specific instances of an object (or memory block), you can click the more info button in the Object Address column to see the allocation events associated with that object. For each allocation event, this instrument displays the following information: </p><ul class="spaceabove"><li class="li"><p>The category of the object (its type)</p></li><li class="li"><p>The event type.</p></li><li class="li"><p>The timestamp for each event.</p></li><li class="li"><p>The address of the block</p></li><li class="li"><p>The size of the block</p></li><li class="li"><p>The library responsible for allocating the block. </p></li><li class="li"><p>The function that caused the allocation event. </p></li></ul><p>For any allocation event, you can open the Extended Detail pane to see the stack trace, as well as any available event information and the time at which the event occurred.</p><p>To further filter information in the Detail pane, you can configure the Allocation Lifespan options. These options let you filter the allocation events based on the following criteria: </p><ul class="spaceabove"><li class="li"><p>All Objects Created - display all objects, regardless of whether they have been deallocated.</p></li><li class="li"><p>Created &amp; Still Living - display only objects that existed in memory when you stopped recording data..</p></li></ul><p>The inspector for the ObjectAlloc instrument lets you configure the way the instrument tracks information. From the inspector, you can set the following options:</p><ul class="spaceabove"><li class="li"><p>Record reference counts. Use this option to track the reference count of each object. </p></li><li class="li"><p>Discard unrecorded data on stop. Use this option to discard any data that has been gathered but not yet processed by the ObjectAlloc instrument. </p></li></ul><p>For additional information about the ObjectAlloc instrument, see <span class="content_text"><a href="../ViewingandAnalyzingData/ViewingandAnalyzingData.html#//apple_ref/doc/uid/TP40004652-CH5-SW23">“Analyzing Data with the ObjectAlloc Instrument.”</a></span> </p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW26" title="Leaks"></a><h3>Leaks</h3><p>The Leaks instrument examines a process’s heap for leaked memory. You can use this instrument together with the ObjectAlloc instrument to get memory address histories. This instrument requires that you launch a single process so that it can gather data from the start of the process. </p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The number of leaks</p></li><li class="li"><p>The size of each leak</p></li><li class="li"><p>Address of the leaked block</p></li><li class="li"><p>Type of the leaked object</p></li></ul><p>Each view mode in the Detail pane shows the leak data in a slightly different way. In table mode, this instrument shows the individual leaks along with the percentage that each individual leak contributes to the total amount of leaked memory discovered. In outline mode, the data is reorganized so that you can see how much memory is leaked from within a given symbol. For entries in either mode, the Extended Detail pane displays a heavy stack trace showing from where the leak originated. </p><p>For additional information about the Leaks instrument, see <span class="content_text"><a href="../ViewingandAnalyzingData/ViewingandAnalyzingData.html#//apple_ref/doc/uid/TP40004652-CH5-SW22">“Looking for Memory Leaks.”</a></span> </p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW27" title="System"></a><h2>System</h2><p>The instruments in this section gather data about system activity and resources.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW28" title="Spin Monitor"></a><h3>Spin Monitor</h3><p>The Spin Monitor instrument automatically samples any applications that become unresponsive on the system. An application becomes unresponsive when it does not retrieve events from the window server for 3 or more seconds. Applications that are unresponsive during this time may actually be doing useful work or they may be hung. You can use the sample information generated by this instrument to adjust your code so as to ensure your application keeps processing events in a timely manner. This instrument can operate on a single process or on all processes currently running on the system. </p><p>During sampling, this instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>The time at which sampling began</p></li><li class="li"><p>The sampling duration</p></li><li class="li"><p>Stack trace information (including the library and caller information)</p></li><li class="li"><p>The maximum stack depth encountered during sampling</p></li><li class="li"><p>The function encountered most frequently during sampling (the hot frame)</p></li></ul><p>Each view mode in the Detail pane shows the sample data in a slightly different way. Both table and outline mode start by showing you the sessions during which a given application was sampled. Each session corresponds to a period of time where the application was deemed unresponsive and you can expand a given session to see what the application was during this time. In table mode, the instrument shows data about the functions that occurred most often during sampling. In outline mode, the instrument shows the number of samples that were gathered during each session. You can also show the running time for the samples that were gathered using the Sample Perspective options. </p><p>The inspector for this instrument lets you set the sample rate at which to gather samples. By default, this instrument gathers a sample once every 10 milliseconds. </p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW29" title="Sampler"></a><h3>Sampler</h3><p>The Sampler instrument stops a program at prescribed intervals and records the stack trace information for each of the program’s threads.   You can use this information to determine where execution time is being spent in your program and improve your code to reduce running time.  Unlike many instruments, Sampler does not require DTrace probes in order to function. This instrument operates on a single process. </p><p>The Sampler instrument records the following types of data for each sample:</p><ul class="spaceabove"><li class="li"><p>The function being executed</p></li><li class="li"><p>The stack trace for each of the program’s threads</p></li><li class="li"><p>The time the sample was taken</p></li></ul><p>The Sampler instrument lets you view this information in different ways. In table mode, you can view the samples in the order they were gathered, which shows the execution order of your code. In outline mode, Sampler provides a tree view of your program’s call stack and shows the number of samples that occurred in each function in that call stack.  </p><p>In studying the performance of a running program you should compare the impact of a function to the cost of executing that function. If your program spends a lot of time in a low-impact function, this instrument can show you that behavior. You can then use the sample data to find out why your program is spending its time there and who is calling the function, which can lead you to fixing your code so that the function is called less frequently. </p><p>To display a detailed call stack for a function, you can disclose items in the outline mode or select a function and open the Extended Detail pane. In outline mode, you can expand the entire call stack below a given entry by pressing the Option key and clicking the disclosure triangle for the entry.</p><p>The Track pane displays the stack depth at each sample time by default. This view is useful for identifying patterns of what is going on in your code. Because it is unlikely that two different execution paths will result in the same pattern of stack depths, when you see repeated structures in the graph, it is likely that the same code is being executed repetitively. If this code also takes a long time to execute, it is a good target for optimization. </p><p>For additional information about the Sampler instrument, see <span class="content_text"><a href="../ViewingandAnalyzingData/ViewingandAnalyzingData.html#//apple_ref/doc/uid/TP40004652-CH5-SW24">“Analyzing Data with the Sampler Instrument.”</a></span> </p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW30" title="Process"></a><h3>Process</h3><p>The Process instrument records processes forked by another process. This instrument can operate on a single process or on all processes currently running on the system. This instrument uses DTrace in its implementation and can be exported to a DTrace script.</p><p>This instrument captures the following information:</p><ul class="spaceabove"><li class="li"><p>Execute a process (<code>execve</code>)</p></li><li class="li"><p>Process exit (<code>exit</code>)</p></li></ul><p>The Process instrument returns information about each call made to these functions, including:</p><ul class="spaceabove"><li class="li"><p>The name of the function  (<code>execve</code> or <code>exit</code>)</p></li><li class="li"><p>The caller of the function (including the executable name, path, and stack trace information) </p></li><li class="li"><p>The process ID</p></li><li class="li"><p>The exit status of the process</p></li></ul><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>Process ID</p></li><li class="li"><p>Exit status</p></li></ul><p>For any of these calls, you can open the Extended Detail pane to see the stack trace for that call, as well as any available probe information and the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW31" title="Network Activity Monitor "></a><h3>Network Activity Monitor </h3><p>The Network Activity Monitor instrument records network traffic through the computer. This instrument can operate on a single process or on all processes currently running on the system. </p><p>The Track pane is set to display the following network-related data by default, but you can configure it to display other types of data as well. By default, it displays the following information: </p><ul class="spaceabove"><li class="li"><p>The number of bytes sent each second</p></li><li class="li"><p>The number of bytes received each second</p></li><li class="li"><p>The number of packets sent each second</p></li><li class="li"><p>The number of packets received each second</p></li></ul><a name="//apple_ref/doc/uid/TP40004652-CH6-SW32" title="Memory Monitor"></a><h3>Memory Monitor</h3><p>The Memory Monitor instrument records the amount of real and virtual memory used by processes. This instrument can operate on a single process or on all processes currently running on the system. </p><p>The Track pane is set to display the following memory-related data by default, but you can configure it to display other types of data as well. By default, it displays the following information: </p><ul class="spaceabove"><li class="li"><p>The number of virtual memory page ins</p></li><li class="li"><p>The number of virtual memory page outs</p></li><li class="li"><p>The total amount of virtual memory space in use</p></li><li class="li"><p>The total amount of free physical memory</p></li><li class="li"><p>The total amount of used physical memory</p></li></ul><a name="//apple_ref/doc/uid/TP40004652-CH6-SW33" title="Disk Monitor "></a><h3>Disk Monitor </h3><p>The Disk Monitor instrument records disk read and write operations. This instrument can operate on a single process or on all processes currently running on the system. </p><p>The Track pane is set to display the following disk-related data by default, but you can configure it to display other types of data as well. By default, it displays the following information: </p><ul class="spaceabove"><li class="li"><p>The number of bytes per second written to disk</p></li><li class="li"><p>The number of bytes per second read from disk</p></li><li class="li"><p>The number of write operations processed per second</p></li><li class="li"><p>The number of read operations processed per second</p></li></ul><a name="//apple_ref/doc/uid/TP40004652-CH6-SW34" title="CPU Monitor"></a><h3>CPU Monitor</h3><p>The CPU Monitor instrument records the load on the system. This instrument can operate on a single process or on all processes currently running on the system. </p><p>The Track pane is set to display the following load values by default, but you can configure it to display other types of data as well. By default, it displays the following information: </p><ul class="spaceabove"><li class="li"><p>The amount of load generated by the system</p></li><li class="li"><p>The amount of load generated by the user</p></li><li class="li"><p>The total load on the system</p></li></ul><a name="//apple_ref/doc/uid/TP40004652-CH6-SW35" title="Activity Monitor"></a><h3>Activity Monitor</h3><p>The Activity Monitor instrument records the load on the system measured against the virtual memory size. This instrument can operate on a single process or on all processes currently running on the system. </p><p>The Track pane is set to display the following load values by default, but you can configure it to display other types of data as well. By default, it displays the following information: </p><ul class="spaceabove"><li class="li"><p>The total amount of virtual memory space in use</p></li><li class="li"><p>The amount of load generated by the system</p></li><li class="li"><p>The amount of load generated by the user</p></li><li class="li"><p>The total load on the system</p></li></ul><a name="//apple_ref/doc/uid/TP40004652-CH6-SW36" title="Threads/Locks"></a><h2>Threads/Locks</h2><p>The following instruments gather thread-related data.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW37" title="Java Thread"></a><h3>Java Thread</h3><p>The Java Thread instrument records the initialization and destruction of Java threads. It displays:</p><ul class="spaceabove"><li class="li"><p>The time each measurement was taken</p></li><li class="li"><p>Total threads</p></li></ul><p>You can specify the colors to use when charting the running, waiting, and blocked threads. </p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW38" title="User Interface"></a><h2>User Interface</h2><p>The following instruments gather data for application-level events.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW39" title="Cocoa Events"></a><h3>Cocoa Events</h3><p>The Cocoa Events instrument records events sent through the <code>sendEvent:</code> method of the <code>NSApplication</code> class. This is the main method for dispatching events to a Cocoa application. You can use this instrument to correlate application events with other application behavior, such as memory and CPU usage. This instrument operates on a single process. This instrument uses DTrace in its implementation and can be exported to a DTrace script.</p><p>This instrument captures the type of event that was sent (both as an <code>NSEventType</code> code and spelled out). </p><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>The event kind</p></li></ul><p>For any of these calls, you can open the Extended Detail pane to see the stack trace for that call, as well as the time at which the event occurred.</p><a name="//apple_ref/doc/uid/TP40004652-CH6-SW40" title="Carbon Events"></a><h3>Carbon Events</h3><p>The Carbon Events instrument records events returned by the <code>WaitNextEvent</code> function in the Carbon Event Manager. You can use this instrument to correlate application events with other application behavior, such as memory and CPU usage. This instrument operates on a single process. This instrument uses DTrace in its implementation and can be exported to a DTrace script.</p><p>This instrument captures the type of event that was sent. </p><p>The Track pane can be set to display any of the following data: </p><ul class="spaceabove"><li class="li"><p>Stack depth</p></li><li class="li"><p>Thread ID</p></li><li class="li"><p>The event kind</p></li></ul><p>For any of these calls, you can open the Extended Detail pane to see the stack trace for that call, as well as the time at which the event occurred.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../CreatingaCustomInstrument/CreatingaCustomInstrument.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Built-InInstruments/Built-InInstruments.html%3Fid%3DTP40004652-1.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Built-InInstruments/Built-InInstruments.html%3Fid%3DTP40004652-1.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Built-InInstruments/Built-InInstruments.html%3Fid%3DTP40004652-1.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
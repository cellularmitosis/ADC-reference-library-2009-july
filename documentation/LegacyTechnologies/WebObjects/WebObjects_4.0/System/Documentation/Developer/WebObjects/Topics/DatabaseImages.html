<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="DatabaseImages.css">
<TITLE> </TITLE></HEAD>
<BODY BGCOLOR="#ffffff">

<!--start of banner -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of banner -->
<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="TopicsTOC.html" target="_top">WebObjects Programming Topics</a>
</font>
<br><br>
<!--end of path -->


<H1 CLASS="TopictTitleTOC">
Displaying Images Stored in a Database
</H1>
<DIV>
<H2 CLASS="Synopsis">
<A NAME="pgfId=606101">
 </A>
Synopsis<DIV>
<IMG SRC="DatabaseImages-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=609729">
 </A>
Describes how to display images stored in a database.</P>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606103">
 </A>
Discussion<DIV>
<IMG SRC="DatabaseImages-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=609721">
 </A>
It is often useful to serve images from the database through the Web application server instead of storing copies of the images in the Web server's document directory. WebObjects 4.0 adds enhancements to WOImage and WOActiveImage to ease this process.</P>
<P CLASS="Body">
<A NAME="pgfId=606104">
 </A>
In the EOModel for the Movies example database, the <EM CLASS="Code">
TalentPhoto</EM>
 class has a <EM CLASS="Code">
photo</EM>
 attribute that stores an NSData representing the photograph image of an actor or director. You can use recent enhancements to the WOImage component to display the image of the actor in an application. This example uses the new &quot;data&quot; and &quot;mimeType&quot; bindings to accomplish this.</P>
<P CLASS="Body">
<A NAME="pgfId=606106">
 </A>
The following steps illustrate how to add database-stored images to an application. The example uses the Movies EOModel and a Wizard-generated application. To prepare the example, perform the following steps:</P>
<OL>
<P CLASS="Numbered1">
<A NAME="pgfId=606107">
 </A>
1.		Start ProjectBuilder.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606108">
 </A>
2.		Create a new &quot;WebObjects Application&quot; project, selecting &quot;Wizard&quot; for assistance and &quot;Java&quot; as the primary language.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606109">
 </A>
3.		Choose the &quot;existing model&quot; option and select the Movies.eomodel file.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606110">
 </A>
4.		Select the &quot;Talent&quot; Entity.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606111">
 </A>
5.		Choose &quot;Selected Record&quot; and &quot;Paginated&quot; for the layout.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606112">
 </A>
6.		Include the &quot;firstName&quot; and &quot;lastName&quot; attributes to display, and the &quot;lastName&quot; for the hyperlink.</P>
</OL>
<P CLASS="Body">
<A NAME="pgfId=606113">
 </A>
To add the image, perform the following steps:</P>
<OL>
<P CLASS="Numbered1">
<A NAME="pgfId=606114">
 </A>
1.		Open the Main.wo component in WebObjectsBuilder.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606115">
 </A>
2.		Add a WOImage component to the WOForm (available from the Dynamic elements toolbar or from the &quot;Elements-&gt;WebObjects&quot; menu).</P>
<P CLASS="Numbered">
<A NAME="pgfId=615206">
 </A>
3.		In the inspector for the WOImage, add two attributes, one labeled &quot;data&quot; and the other labeled &quot;mimeType.&quot; </P>
<P CLASS="Numbered">
<A NAME="pgfId=615210">
 </A>
4.		Create the following bindings:</P>
<P CLASS="NumberedCont">
<A NAME="pgfId=606122">
 </A>
In the data field, enter 		<EM CLASS="Code">
talentDisplayGroup.selectedObject.photo.photo.</EM>
</P>
<P CLASS="NumberedCont">
<A NAME="pgfId=606123">
 </A>
For mimeType		, select &quot;image/gif&quot;.</P>
<P CLASS="Numbered">
<A NAME="pgfId=606124">
 </A>
5.		Build and run the example. When you select a talent that has an image in the database, the WOImage should display it.</P>
</OL>
<P CLASS="Body">
<A NAME="pgfId=606125">
 </A>
In this example, the data in the database is assumed to be a GIF image. If different image types are stored, you could create an accessory on the class that either stores the type, or determines it on-the-fly and returns the appropriate MIME type.</P>
<P CLASS="Body">
<A NAME="pgfId=606127">
 </A>
It is also possible to serve images created on-the-fly by the application. Bind the &quot;data&quot; attribute to a method returning the dynamically generated image. An example of this use is the CreatePlots example in the Developer/Examples/WebObjects/WebScript folder.</P>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606128">
 </A>
See Also<DIV>
<IMG SRC="DatabaseImages-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606129">
 </A>
&#183;	File Upload</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606130">
 </A>
&#183;	CreatePlots Example Application</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606131">
 </A>
&#183;	Documentation on WOImage and WOActiveImage Dynamic Elements</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606132">
 </A>
Questions<DIV>
<IMG SRC="DatabaseImages-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606133">
 </A>
&#183;		How do I display an image in my application when the image is in the database?</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606134">
 </A>
Keywords<DIV>
<IMG SRC="DatabaseImages-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606135">
 </A>
&#183;	WOImage</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606136">
 </A>
&#183;	WOActiveImage</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606137">
 </A>
&#183;	Components</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606138">
 </A>
&#183;	Database Images</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606139">
 </A>
&#183;	Dynamic Images</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606140">
 </A>
Revision History<DIV>
<IMG SRC="DatabaseImages-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606141">
 </A>
22 July, 1998. Timothy Joransen. First Draft.</P>
<P CLASS="Body">
19 November, 1998. Clif Liu. Second Draft.</P>
</DIV>


<!--start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->

</body>
</HTML>

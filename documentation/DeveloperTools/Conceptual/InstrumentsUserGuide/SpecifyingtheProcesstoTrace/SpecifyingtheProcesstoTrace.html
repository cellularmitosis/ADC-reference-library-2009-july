<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Instruments User Guide: Recording Trace Data</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Recording Trace Data"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004652-CH12" title="Recording Trace Data"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../Performance-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000901" target="_top">Performance</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652-CH1-SW1">Instruments User Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../WorkingWithInstruments/WorkingWithInstruments.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../WorkingWithaMasterTrack/WorkingWithaMasterTrack.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40004652-CH12-SW6" title="Recording Trace Data"></a><h1>Recording Trace Data</h1><p>After you decide which instruments you want to use to gather data, the next step is to choose the process you want to trace and begin recording data. How you select a process is dependent on the instruments in your trace document. Some instruments allow tracing of all system processes, others require you to record data for a single process. Some instruments even expect you to launch the process from Instruments so that they can gather data from the beginning of its execution.</p><p>Instruments provides several options for initiating a trace that make it easier to integrate Instruments into your development cycle. In this chapter, you learn how to select a process for your trace document and begin recording data using the available options in Instruments.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="SpecifyingtheProcesstoTrace.html#//apple_ref/doc/uid/TP40004652-CH12-SW7">Choosing Which Process to Trace</a>
				
			<br/>
			
        
			
			
				<a href="SpecifyingtheProcesstoTrace.html#//apple_ref/doc/uid/TP40004652-CH12-SW8">Recording Trace Data</a>
				
			<br/>
			
        
			
			
				<a href="SpecifyingtheProcesstoTrace.html#//apple_ref/doc/uid/TP40004652-CH12-SW16">Launching Instruments Using Quick Start Keys</a>
				
			<br/>
			
        
			
			
				<a href="SpecifyingtheProcesstoTrace.html#//apple_ref/doc/uid/TP40004652-CH12-SW10">Running in Mini Mode</a>
				
			<br/>
			
        
			
			
				<a href="SpecifyingtheProcesstoTrace.html#//apple_ref/doc/uid/TP40004652-CH12-SW18">Running Instruments from Xcode</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40004652-CH12-SW7" title="Choosing Which Process to Trace"></a><h2>Choosing Which Process to Trace</h2><p>Before you can start collecting data, you must tell Instruments which process you want to trace. You do this by designating a target process (or processes) using the  the Default Target menu in the Instruments toolbar. This menu provides the following options: </p><ul class="ul"><li class="li"><p><strong>All Processes</strong>. Configures your document to trace all processes on the system.</p></li><li class="li"><p><strong>Attach to Process</strong>. Configures your document to trace an already running process. </p></li><li class="li"><p><strong>Launch Executable</strong>. Configures your document to launch and trace a process. (If the process is already running, Instruments launches a new copy and traces it.)</p></li><li class="li"><p><strong>Instrument Specific</strong>. Select this item to assign different trace targets to individual instruments.</p></li></ul><p>The following sections describe each of these options in more detail.</p><a name="//apple_ref/doc/uid/TP40004652-CH12-SW11" title="Tracing All Processes"></a><h3>Tracing All Processes</h3><p>Some instruments are capable of collecting data for all processes currently running on the computer. You can use this ability to profile a type of event or activity across the entire system. For example, you can use the Disk Activity instrument to trace all read and write operations that occur on your computer over a particular time period. To trace all running processes, choose All Processes from the Default Target menu.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004652-CH12-SW12" title="Note"></a><p><strong>Note:</strong>&nbsp;The All Processes item is available only if all instruments in the Instruments pane support it.   </p></div><a name="//apple_ref/doc/uid/TP40004652-CH12-SW13" title="Attaching to an Existing Process"></a><h3>Attaching to an Existing Process</h3><p>If the process you want to trace is already running on the computer, most instruments can attach to that process and start collecting data. To trace an existing process, choose Attach to Process from the Default Target menu and select the process to trace, as shown in <span class="content_text">Figure 3-1</span>. </p><br/><div><a name="//apple_ref/doc/uid/TP40004652-CH12-SW2" title="Figure 3-1Tracing an existing process"></a><p><strong>Figure 3-1&nbsp;&nbsp;</strong>Tracing an existing process</p><img src = "../Art/trace_existing.jpg" alt = "Tracing an existing process" ></div><br/><a name="//apple_ref/doc/uid/TP40004652-CH12-SW5" title="Launching an Executable from Instruments"></a><h3>Launching an Executable from Instruments</h3><p>If the process that you want to trace is not already running on the computer, or if you want to control the conditions under which that process is launched,  choose Launch Executable from the Default Target menu. Instruments remembers any recently launched processes and adds them to the Launch Executable menu for quick access. If the process you want to launch is not in that menu, select Choose Executable to display the panel shown in <span class="content_text">Figure 3-2</span> </p><br/><div><a name="//apple_ref/doc/uid/TP40004652-CH12-SW9" title="Figure 3-2Choosing an executable to launch"></a><p><strong>Figure 3-2&nbsp;&nbsp;</strong>Choosing an executable to launch</p><img src = "../Art/choose_executable.jpg" alt = "Choosing an executable to launch" ></div><br/><p>The Choose Executable panel not only lets you select the program to launch but it also lets you specify how to launch the selected program. <span class="content_text">Table 3-1</span> lists the additional controls in this panel and explains how you use them. </p><a name="//apple_ref/doc/uid/TP40004652-CH12-SW3" title="Table 3-1Options for launching an executable "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 3-1&nbsp;&nbsp;</strong>Options for launching an executable </caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Control</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>Environment Variable</p></td><td ><p>Identifies environment variables you want to set before running the process. You might use this option if your program has debugging options that are enabled using an environment variable. Use the plus (+) and minus (-) buttons to add or remove environment variables. </p></td></tr><tr><td  scope="row"><p>Arguments</p></td><td ><p>Use this field to specify any launch arguments for the application. The arguments you specify are the same ones you would use from the command line when launching the application there. </p></td></tr><tr><td  scope="row"><p>Apply to All Instruments</p></td><td ><p>Sets the specified application as the target for all instruments in the trace document. This option is enabled by default. Disabling it lets you assign different targets to different instruments in your trace document. You might use this feature when you have two copies of the same instrument or when you want to trace the behavior of two processes running side by side. </p></td></tr><tr><td  scope="row"><p>Traverse Packages</p></td><td ><p>Displays bundles (such as applications and plug-ins) as a navigable directory structure. Use this feature if the executable you want to run is inside a bundle. </p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004652-CH12-SW14" title="Specifying a Different Target for Each Instrument"></a><h3>Specifying a Different Target for Each Instrument</h3><p>When you choose All Processes, Attach to Process, or Launch Executable from the Default Target menu, Instruments sets the default target for all instruments to the program you choose. There are occasions, however, when you might want to set a different target for each instrument. You might want to sample two different programs at the same time, for example, using the Sampler instrument. If you have some instruments that are capable of tracing all processes, you might want them to do just that while single-process instruments sample just one process.</p><p>To assign trace targets on a per-instrument basis, do the following:</p><ol class="ol"><li class="li"><p>In the Default Target menu, select the Instrument Specific option.</p></li><li class="li"><p>Select one of your instruments.</p></li><li class="li"><p>Open the instrument inspector by clicking its information icon.</p></li><li class="li"><p>In the inspector window, use the pop-up menu in the Target section to set the target for the instrument, as shown in <span class="content_text">Figure 3-3</span>. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40004652-CH12-SW1" title="Figure 3-3Choosing per-instrument trace targets"></a><p><strong>Figure 3-3&nbsp;&nbsp;</strong>Choosing per-instrument trace targets</p><img src = "../Art/instrument_specific_targets.jpg" alt = "Choosing per-instrument trace targets" ></div></li><li class="li"><p>Repeat steps 2 through 4 for each of your other instruments. </p></li></ol><a name="//apple_ref/doc/uid/TP40004652-CH12-SW8" title="Recording Trace Data"></a><h2>Recording Trace Data</h2><p>After you’ve selected a process to trace, you are ready to start collecting data. Click the Record button (or choose File > Record Trace) to begin gathering the trace data. When you click Record, Instruments launches the specified executable or attaches to the specified processes and starts gathering data. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004652-CH12-SW15" title="Note"></a><p><strong>Note:</strong>&nbsp;When you click the Record button, Instruments may display one or more authentication panels. Many instruments require you to authenticate as an administrative user before the will record any data. Instruments is a powerful tool that enables you to see into running applications, and as such, it should be used only by authorized users. </p></div><p>When recording begins, the instruments start collecting data. Instruments displays the collected data in the track and Detail panes immediately. The Time control in the Instruments toolbar also shows you how much time has elapsed since you began recording. To stop collecting data, click the Stop button or choose File > Stop Trace. </p><p>During recording, if you want your program to continue running, but do not want Instruments to gather data, press the Pause button in your trace document. Instruments stops gathering data temporarily but does not stop the current recording run. Pressing the Resume button causes Instruments to continue gathering data at the current recording time. Thus, pausing and resuming leaves a data gap in the Track pane. </p><a name="//apple_ref/doc/uid/TP40004652-CH12-SW16" title="Launching Instruments Using Quick Start Keys"></a><h2>Launching Instruments Using Quick Start Keys</h2><p>Quick Start keys are global key combinations that let you launch the Instruments application and begin collecting trace data immediately using a specific document template. You can use this feature if you are running an application and see something—such as a bug or unresponsive behavior—that you want to capture right away. You can associate different key combinations with different Instruments templates to capture different types of behavior. </p><p>To assign a Quick Start key combination, open the Instruments preferences and navigate to the Quick Start pane. This pane displays the list of Instruments templates that you can assign to key combinations. All templates start without a key combination. To assign one, find the row containing the desired template and double-click its Key column to create an editable cell. While the cell is in edit mode, press the key combination you want to use. For example, to assign the key combination Command-Option-1, press the Command, Option, and number 1 key all at the same time. </p><p>To remove a key combination from a template, select a row and press Delete.  </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004652-CH12-SW17" title="Note"></a><p><strong>Note:</strong>&nbsp;Quick Start key combinations should use at least two key modifiers (Command, Option, Control, Shift). You should avoid choosing key combinations that are commonly used by other applications.  </p></div><p>To gather data for an application using a Quick Start Key, do the following:</p><ol class="ol"><li class="li"><p>Place the cursor over a window belonging to the application you want to trace.</p></li><li class="li"><p>Press the appropriate key combination to begin tracing.</p></li><li class="li"><p>Exercise the application. </p></li><li class="li"><p>When you want to stop tracing, you have two options:</p><ul class="ul"><li class="li"><p>Place the cursor over one of the application’s windows and press the key combination again.</p></li><li class="li"><p>Find the trace document that was opened and press the Stop button.</p></li></ul></li></ol><p>Because Quick Start Keys require you to move the cursor over one of the application’s windows, you can initiate multiple trace sessions for different applications using the same Quick Start Key without stopping any of the previous traces. You could also start different types of traces for the same application using different key combinations and have them all gathering data at the same time. </p><a name="//apple_ref/doc/uid/TP40004652-CH12-SW10" title="Running in Mini Mode"></a><h2>Running in Mini Mode</h2><p>Mini mode provides a way for you to minimize the visual footprint of the Instruments application while gathering your data. When you are gathering data from certain types of applications, particularly graphics-oriented applications, there may be times when you want to gather data while remaining focused on your own application. Mini  mode hides all open trace documents and in their place displays a small floating window that you can use to start and stop tracing. An added advantage of mini mode is that the Instruments application itself requires less drawing and therefore has less of an impact on system performance. </p><p><span class="content_text">Figure 3-4</span> shows the mini Instruments window with several trace documents open. Instruments shows only three trace documents at a time in Mini mode, but you can use the up and down arrows to find the document you want.  </p><br/><div><a name="//apple_ref/doc/uid/TP40004652-CH12-SW4" title="Figure 3-4The Mini Instruments window"></a><p><strong>Figure 3-4&nbsp;&nbsp;</strong>The Mini Instruments window</p><img src = "../Art/mini_instruments.jpg" alt = "The Mini Instruments window" ></div><br/><p>Clicking the record button next to a trace document begins recording data for that document. The document must already have its instrument and target process configured before tracing can begin. During tracing, Instruments displays the elapsed time since tracing began but displays no other instruments, controls, or data. </p><p>To enable Mini mode, click the Mini button in the toolbar of any open trace document. To disable Mini mode, click the close box in the mini Instruments window. You can also toggle between standard and mini modes by choosing choose View > Mini Instruments from the menus.</p><a name="//apple_ref/doc/uid/TP40004652-CH12-SW18" title="Running Instruments from Xcode"></a><h2>Running Instruments from Xcode</h2><p>During development, you can launch your programs in Instruments directly from the Xcode user interface. This integration lets you quickly launch Instruments and gather trace data in much the same way that you would launch your program and debug it using GDB.  </p><p>The Run > Start with Performance Tool menu in Xcode provides several options for launching your program using the available performance tools, including Instruments. When launching your program in Instruments, you tell Xcode which Instruments template you want to use by selecting the appropriate menu item. Xcode launches Instruments, creates a trace document using the specified template, sets the target to your program, and tells Instruments to launch your program and start recording. </p><p>In addition to the existing templates in the Start with Performance Tool menu, Xcode lets you add custom trace templates to this menu as well. For information on how to save a trace template and add it to this menu, see <span class="content_text"><a href="../SavingTraceTemplates/SavingTraceTemplates.html#//apple_ref/doc/uid/TP40004652-CH10-SW2">“Saving an Instruments Trace Template.”</a></span> </p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../WorkingWithInstruments/WorkingWithInstruments.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../WorkingWithaMasterTrack/WorkingWithaMasterTrack.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/SpecifyingtheProcesstoTrace/SpecifyingtheProcesstoTrace.html%3Fid%3DTP40004652-1.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/SpecifyingtheProcesstoTrace/SpecifyingtheProcesstoTrace.html%3Fid%3DTP40004652-1.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/SpecifyingtheProcesstoTrace/SpecifyingtheProcesstoTrace.html%3Fid%3DTP40004652-1.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TE530: TrueType Q&amp;As</title>                                       <meta name="categories" content="Text"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002841" title="TrueType Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxTextFonts-date.html">Text & Fonts</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/TextFonts/index.html" target="_blank">Reference Library > Text & Fonts</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TE530</div>
<div id="pageheadsub">TrueType Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic - questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Sep 01 1993]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Rotating large KanjiTalk characters on PostScript printers</h2><p>How can I rotate Japanese font text correctly on the LaserWriter? I'd tried torotate text using <code>PicComment(TextBegin/TextEnd)</code>, but in System 7.1 (KanjiTalk7)I couldn't rotate alphabets in Japanese font correctly. Is there any way toeither (1) work around the text rotation (using <code>TextBegin/TextEnd</code>) problemitself or (2) hide the unrotated text drawing between <code>RotateBegin</code> and <code>RotateEnd</code>from QuickDraw, such as "magic pen mode" (23) mentioned on page 20 of theMacintosh Technical Note <A HREF = "../qd/qd_11.html">"Picture Comments--The Real Deal"</a>?</p>___<P>The problem with KanjiTalk is that large TrueType characters aren't drawn asnormal text. If the font is deemed too big to send to the printer, because theprinter might not be able to image it, KanjiTalk images the characters in theMacintosh at device resolution and sends the bitmaps to the printer. Bitmapsaren't rotated between <code>TextBegin</code> and <code>TextEnd</code>, so those calls fail when tryingto rotate Kanji text.</p><p>You get duplicated text because there's no <code>TextMode</code>(23) to go along with<code>PenMode</code>(23), unfortunately.</p><p>You can work around this for printing by seeing whether you're printing to aPostScript printer (<code>wDev</code> == 3) and not supplying the QuickDraw representationonly in this case. Note that with the next LaserWriter driver (the Level 2driver currently on the Developer CD), that means the rotated text won't beincluded in EPS Previews (if you don't draw it, it's not included in thepreview), but the printout will be correct.</p><p>You may also, if you wish, draw the text to an off-screen pixel map at deviceresolution (using <code>PrGeneral</code>) and just use <code>CopyBits</code> to image it to bothPostScript and QuickDraw printers. This is a nice workaround as well, but ithas a definite disadvantage: the LaserWriter driver always reports theresolution of the printer as 300 dpi even if you're printing to an imagesetter.If your application is printing to a printer with higher resolution than 300dpi, your text will still be at only 300 dpi resolution. That may be anacceptable trade-off to you.</p><P><A HREF="#top">Back to top</A></p><h2>SetPreserveGlyph and font glyph preservation</h2><P>Date Written:  7/22/91</p><P>Last reviewed:  6/14/93</p><p>TrueType's <code>SetPreserveGlyph</code> call with <code>preserveGlyph</code> set to "true" works asyou'd expect for Times and Helvetica, but it has no effect on New York, Geneva,Monaco, or Chicago. Why does <code>SetPreserveGlyph</code> work this way?</p>___<P>Glyph preservation is a function of the font. It turns out that Times andHelvetica have glyphs that extend above the ascent line, thereby enabling<code>SetPreserveGlyph</code> to have an effect on a particular glyph. New York, Geneva,Monaco, and Chicago's characters all fit between the ascent and descent lines,and so do not need to be compressed to fit if <code>preserveGlyph</code> is true. A fontmust have glyphs extending above or below the ascent or descent lines for<code>SetPreserveGlyph</code> to have an effect.</p><P><A HREF="#top">Back to top</A></p><h2>RealFont and TrueType</h2><P>Date Written:  9/4/91</p><P>Last reviewed:  6/14/93</p><p>What's the story with RealFont and TrueType? I'm finding that, of the standardSystem 7 TrueType fonts, only Symbol and Courier get a TRUE result fromRealFont for 7-point.</p>___<P>You're correct in your observation of RealFont for the 7-point size of certainTrueType fonts. The explanation is hidden in TrueType Spec--The TrueType FontFormat Specification (APDA #M0825LL/A), page 227.</p><p>The font header table contains a <code>lowestRecPPEM</code> field, which indicates the"lowest recommended pixel number per em," or, in other words, the smallestreadable size in pixels. As it turns out, the Font Manager in its wisdom usesthis information for the value it returns from <code>RealFont</code>. Note that forhigher-resolution devices, a point size of 7 does not correspond to 7 pixels;but since the unit "point" is 1/72 inch and the screen resolution is(approximately) 72 dpi, the result corresponds to reality in this case.</p><p>The value for <code>lowestRecPPEM</code> can be arbitrarily set by the font designer. We allknow that small point sizes on low-resolution devices never look great, andeven less so for outline fonts. Courier and Symbol have <code>lowestRecPPEM</code> = 6,while the other outline fonts in the system have <code>lowestRecPPEM</code> = 9. Thisdoesn't mean that Courier and Symbol (TrueType) in 7-point size look betterthan Timesreg. or Helvetica under the same conditions. It means the fontdesigner had higher standards (or was in a different mood) when choosing<code>lowestRecPPEM</code> = 9.</p><P><A HREF="#top">Back to top</A></p><h2>SetOutlinePreferred affects only calling application</h2><P>Date Written:  3/9/92</P><P>Last reviewed:  6/14/93</p><p>Is the property that is managed by <code>SetOutlinePreferred</code> and <code>GetOutlinePreferred</code>kept on an application-by-application basis? In other words, will calling<code>SetOutlinePreferred</code> affect only my application? As the current value of<code>outlinePreferred</code> is saved in a PICT, will playing a PICT affect the playingapplication's current <code>outlinePreferred</code> setting? I assume that <code>outlinePreferred</code>is not an attribute of a <code>GrafPort</code>; is this true?</p>___<P>The <code>outlinePreferred</code> setting is stored as a low-memory global value for yourapplication. It is saved and restored during context switches, so it onlyeffects your application and no one else's.</p><p><code>DrawPicture</code> should not alter the state of the global for you. While <code>DrawPicture</code>internally may set or reset this value, it's supposed to put it back the way itfound it when it is done. So, playing a PICT will not affect the currentapplication's outline settings.</p><p>And no, <code>OutlinePreferred</code> is not part of a <code>grafport</code> (as mentioned above.)</p><P><A HREF="#top">Back to top</A></p><h2>QuickDraw doesn't draw ASCII 32 ($20) character</h2><P>Date Written:  3/18/92</P><P>Last reviewed:  6/14/93</p><p>My TrueType font has all 256 characters defined with a unique glyph. I've beenunable to draw the $20 (space) character. <code>DrawChar</code>, <code>DrawText</code>, <code>DrawString</code>, and<code>DrawJust</code> all ignore this character in the font and draw a blank character. Howcan I draw it?</p>___<P>Unfortunately, the problem with the space character not being drawn ishard-coded into the text-drawing routine in the core of QuickDraw. ASCII 32 isalways "optimized away," regardless of the font being used or of the particularcircumstances. The only workaround is to put the corresponding characterelsewhere in the ASCII character encoding (or, if this isn't possible, to usean additional font).</p><p>You're lucky that TrueType fonts always render the ASCII code 13 (carriagereturn) if it has a glyph in the font; for bitmapped fonts, if the characterdrawing happens with scaling, or with foreground/background colors differentfrom black/white, even the CHR(13) drawing is disabled.</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (40K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/te_530.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/te/te_530.html%3Fid%3DDTS10002841-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/te/te_530.html%3Fid%3DDTS10002841-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/te/te_530.html%3Fid%3DDTS10002841-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
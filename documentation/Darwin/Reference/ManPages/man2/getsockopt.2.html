<html><head><title>Mac OS X Developer Tools
 Manual Page For getsockopt(2)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/2/getsockopt" title="Mac OS X Developer Tools
 Manual Page for getsockopt(2)"><!-- headerDoc=man; indexgroup=Section 2; uid="//apple_ref/doc/man/2/getsockopt"; name=getsockopt(2) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
GETSOCKOPT(2)               BSD System Calls Manual              GETSOCKOPT(2)

<b>NAME</b>
     <b>getsockopt</b>, <b>setsockopt</b> -- get and set options on sockets

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/socket.h&gt;</b>

     <u>int</u>
     <b>getsockopt</b>(<u>int</u> <u>socket</u>, <u>int</u> <u>level</u>, <u>int</u> <u>option</u><b>_</b><u>name</u>, <u>void</u> <u>*restrict</u> <u>option</u><b>_</b><u>value</u>,
         <u>socklen</u><b>_</b><u>t</u> <u>*restrict</u> <u>option</u><b>_</b><u>len</u>);

     <u>int</u>
     <b>setsockopt</b>(<u>int</u> <u>socket</u>, <u>int</u> <u>level</u>, <u>int</u> <u>option</u><b>_</b><u>name</u>, <u>const</u> <u>void</u> <u>*option</u><b>_</b><u>value</u>, <u>socklen</u><b>_</b><u>t</u> <u>option</u><b>_</b><u>len</u>);

<b>DESCRIPTION</b>
     <b>Getsockopt</b>() and <b>setsockopt</b>() manipulate the <u>options</u> associated with a socket.  Options may exist at
     multiple protocol levels; they are always present at the uppermost ``socket'' level.

     When manipulating socket options the level at which the option resides and the name of the option must
     be specified.  To manipulate options at the socket level, <u>level</u> is specified as SOL_SOCKET.  To manipu-<font color="#ffffff" class="whiteout">late&nbsp;manipulate</font>
     late options at any other level the protocol number of the appropriate protocol controlling the option
     is supplied.  For example, to indicate that an option is to be interpreted by the TCP protocol, <u>level</u>
     should be set to the protocol number of TCP; see <a href="../man3/getprotoent.3.html#//apple_ref/doc/man/3/getprotoent">getprotoent(3)</a>.

     The parameters <u>option</u><b>_</b><u>value</u> and <u>option</u><b>_</b><u>len</u> are used to access option values for <b>setsockopt</b>().  For
     <b>getsockopt</b>() they identify a buffer in which the value for the requested <!-- a -->option(s)<!-- /a --> are to be returned.
     For <b>getsockopt</b>(), <u>option</u><b>_</b><u>len</u> is a value-result parameter, initially containing the size of the buffer
     pointed to by <u>option</u><b>_</b><u>value</u>, and modified on return to indicate the actual size of the value returned.
     If no option value is to be supplied or returned, <u>option</u><b>_</b><u>value</u> may be NULL.

     <u>option</u><b>_</b><u>name</u> and any specified options are passed uninterpreted to the appropriate protocol module for
     interpretation.  The include file &lt;<u>sys/socket.h&gt;</u> contains definitions for socket level options,
     described below.  Options at other protocol levels vary in format and name; consult the appropriate
     entries in section 4 of the manual.

     Most socket-level options utilize an <u>int</u> parameter for <u>option</u><b>_</b><u>value</u>.  For <b>setsockopt</b>(), the parameter
     should be non-zero to enable a boolean option, or zero if the option is to be disabled.  SO_LINGER uses
     a <u>struct</u> <u>linger</u> parameter, defined in &lt;<u>sys/socket.h&gt;</u>, which specifies the desired state of the option
     and the linger interval (see below).  SO_SNDTIMEO and SO_RCVTIMEO use a <u>struct</u> <u>timeval</u> parameter,
     defined in &lt;<u>sys/time.h&gt;</u>.

     The following options are recognized at the socket level.  Except as noted, each may be examined with
     <b>getsockopt</b>() and set with <b>setsockopt</b>().

           SO_DEBUG        enables recording of debugging information
           SO_REUSEADDR    enables local address reuse
           SO_REUSEPORT    enables duplicate address and port bindings
           SO_KEEPALIVE    enables keep connections alive
           SO_DONTROUTE    enables routing bypass for outgoing messages
           SO_LINGER       linger on close if data present
           SO_BROADCAST    enables permission to transmit broadcast messages
           SO_OOBINLINE    enables reception of out-of-band data in band
           SO_SNDBUF       set buffer size for output
           SO_RCVBUF       set buffer size for input
           SO_SNDLOWAT     set minimum count for output
           SO_RCVLOWAT     set minimum count for input
           SO_SNDTIMEO     set timeout value for output
           SO_RCVTIMEO     set timeout value for input
           SO_TYPE         get the type of the socket (get only)
           SO_ERROR        get and clear error on the socket (get only)
           SO_NOSIGPIPE    do not generate SIGPIPE, instead return EPIPE

     SO_DEBUG enables debugging in the underlying protocol modules.  SO_REUSEADDR indicates that the rules
     used in validating addresses supplied in a <a href="bind.2.html#//apple_ref/doc/man/2/bind">bind(2)</a> call should allow reuse of local addresses.
     SO_REUSEPORT allows completely duplicate bindings by multiple processes if they all set SO_REUSEPORT
     before binding the port.  This option permits multiple instances of a program to each receive UDP/IP
     multicast or broadcast datagrams destined for the bound port.  SO_KEEPALIVE enables the periodic trans-<font color="#ffffff" class="whiteout">mission&nbsp;transmission</font>
     mission of messages on a connected socket.  Should the connected party fail to respond to these mes-<font color="#ffffff" class="whiteout">sages,&nbsp;messages,</font>
     sages, the connection is considered broken and processes using the socket are notified via a SIGPIPE
     signal when attempting to send data.  SO_DONTROUTE indicates that outgoing messages should bypass the
     standard routing facilities.  Instead, messages are directed to the appropriate network interface
     according to the network portion of the destination address.

     SO_LINGER controls the action taken when unsent messages are queued on socket and a <a href="close.2.html#//apple_ref/doc/man/2/close">close(2)</a> is per-<font color="#ffffff" class="whiteout">formed.&nbsp;performed.</font>
     formed.  If the socket promises reliable delivery of data and SO_LINGER is set, the system will block
     the process on the close attempt until it is able to transmit the data or until it decides it is unable
     to deliver the information (a timeout period, termed the linger interval, is specified in the
     <b>setsockopt</b>() call when SO_LINGER is requested).  If SO_LINGER is disabled and a close is issued, the
     system will process the close in a manner that allows the process to continue as quickly as possible.

     The option SO_BROADCAST requests permission to send broadcast datagrams on the socket.  Broadcast was a
     privileged operation in earlier versions of the system.  With protocols that support out-of-band data,
     the SO_OOBINLINE option requests that out-of-band data be placed in the normal data input queue as
     received; it will then be accessible with recv or read calls without the MSG_OOB flag.  Some protocols
     always behave as if this option is set.  SO_SNDBUF and SO_RCVBUF are options to adjust the normal
     buffer sizes allocated for output and input buffers, respectively.  The buffer size may be increased
     for high-volume connections, or may be decreased to limit the possible backlog of incoming data.  The
     system places an absolute limit on these values.

     SO_SNDLOWAT is an option to set the minimum count for output operations.  Most output operations
     process all of the data supplied by the call, delivering data to the protocol for transmission and
     blocking as necessary for flow control.  Nonblocking output operations will process as much data as
     permitted (subject to flow control) without blocking, but will process no data if flow control does not
     allow the smaller of the low-water mark value or the entire request to be processed.  A <a href="select.2.html#//apple_ref/doc/man/2/select">select(2)</a> oper-<font color="#ffffff" class="whiteout">ation&nbsp;operation</font>
     ation testing the ability to write to a socket will return true only if the low-water mark amount could
     be processed.  The default value for SO_SNDLOWAT is set to a convenient size for network efficiency,
     often 1024.

     SO_RCVLOWAT is an option to set the minimum count for input operations.  In general, receive calls will
     block until any (non-zero) amount of data is received, then return with the smaller of the amount
     available or the amount requested.  The default value for SO_RCVLOWAT is 1.  If SO_RCVLOWAT is set to a
     larger value, blocking receive calls normally wait until they have received the smaller of the low-<font color="#ffffff" class="whiteout">water&nbsp;lowwater</font>
     water mark value or the requested amount.  Receive calls may still return less than the low-water mark
     if an error occurs, a signal is caught, or the type of data next in the receive queue is different than
     that returned.

     SO_SNDTIMEO is an option to set a timeout value for output operations.  It accepts a <u>struct</u> <u>timeval</u>
     parameter with the number of seconds and microseconds used to limit waits for output operations to com-<font color="#ffffff" class="whiteout">plete.&nbsp;complete.</font>
     plete.  If a send operation has blocked for this much time, it returns with a partial count or with the
     error EWOULDBLOCK if no data were sent.  In the current implementation, this timer is restarted each
     time additional data are delivered to the protocol, implying that the limit applies to output portions
     ranging in size from the low-water mark to the high-water mark for output.

     SO_RCVTIMEO is an option to set a timeout value for input operations.  It accepts a <u>struct</u> <u>timeval</u>
     parameter with the number of seconds and microseconds used to limit waits for input operations to com-<font color="#ffffff" class="whiteout">plete.&nbsp;complete.</font>
     plete.  In the current implementation, this timer is restarted each time additional data are received
     by the protocol, and thus the limit is in effect an inactivity timer.  If a receive operation has been
     blocked for this much time without receiving additional data, it returns with a short count or with the
     error EWOULDBLOCK if no data were received.  The struct timeval parameter must represent a positive
     time interval; otherwise, <b>setsockopt</b>() returns with the error EDOM.

     SO_NOSIGPIPE is an option that prevents SIGPIPE from being raised when a write fails on a socket to
     which there is no reader; instead, the write to the socket returns with the error EPIPE when there is
     no reader.

     Finally, SO_TYPE and SO_ERROR are options used only with <b>getsockopt</b>().  SO_TYPE returns the type of the
     socket, such as SOCK_STREAM; it is useful for servers that inherit sockets on startup.  SO_ERROR
     returns any pending error on the socket and clears the error status.  It may be used to check for asyn-<font color="#ffffff" class="whiteout">chronous&nbsp;asynchronous</font>
     chronous errors on connected datagram sockets or for other asynchronous errors.

<b>RETURN</b> <b>VALUES</b>
     Upon successful completion, the value 0 is returned; otherwise the value -1 is returned and the global
     variable <u>errno</u> is set to indicate the error.

<b>ERRORS</b>
     The <b>getsockopt</b>() and <b>setsockopt</b>() system calls will succeed unless:

     [EBADF]            The argument <u>socket</u> is not a valid file descriptor.

     [EFAULT]           The address pointed to by <u>option</u><b>_</b><u>value</u> is not in a valid part of the process address
                        space.  For <b>getsockopt</b>(), this error may also be returned if <u>option</u><b>_</b><u>len</u> is not in a
                        valid part of the process address space.

     [EINVAL]           The option is invalid at the level indicated.

     [ENOBUFS]          Insufficient memory buffers are available.

     [ENOPROTOOPT]      The option is unknown at the level indicated.

     [ENOTSOCK]         The argument <u>socket</u> is not a socket (e.g., a plain file).

     The <b>setsockopt</b>() system call will succeed unless:

     [EDOM]             The argument <u>option</u><b>_</b><u>value</u> is out of bounds.

     [EISCONN]          <u>socket</u> is already connected and a specified option cannot be set while this is the
                        case.

<b>LEGACY</b> <b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/types.h&gt;</b>
     <b>#include</b> <b>&lt;sys/socket.h&gt;</b>

     The include file &lt;<u>sys/types.h&gt;</u> is necessary.

<b>SEE</b> <b>ALSO</b>
     <a href="ioctl.2.html#//apple_ref/doc/man/2/ioctl">ioctl(2)</a>, <a href="socket.2.html#//apple_ref/doc/man/2/socket">socket(2)</a>, <a href="../man3/getprotoent.3.html#//apple_ref/doc/man/3/getprotoent">getprotoent(3)</a>, <a href="../man5/protocols.5.html#//apple_ref/doc/man/5/protocols">protocols(5)</a>

<b>BUGS</b>
     Several of the socket options should be handled at lower levels of the system.

<b>HISTORY</b>
     The <b>getsockopt</b>() system call appeared in 4.2BSD.

4.3-Reno Berkeley Distribution  April 19, 1994  4.3-Reno Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man2/getsockopt.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man2/getsockopt.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man2/getsockopt.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Sheet Programming Topics for Cocoa: Using Alert Sheets</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Alert Sheets"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001045" title="Using Alert Sheets"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../index.html" target="_top">Sheet Programming Topics for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/AlertBadging.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DisplayAlertHelp.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001045-BABFIBIA" title="Using Alert Sheets"></a><hr /><H1>Using Alert Sheets</H1><p>Alert sheets are used by almost every application. Cocoa makes it easy to create them. This task demonstrates how to quickly add an alert sheet to your application. See the <span class="content_text"><!--a target="_top" -->“Dialogs”<!--/a--></span> chapter of <em>Apple Human Interface Guidelines</em> for details on when a sheet should be used.</p><p>Cocoa gives you two ways to create and display alert sheets. You can use the Application Kit’s functional API for alert sheets, or you can use the methods of the NSAlert class. The latter approach is recommended for applications built for Mac OS X v10.3 and later; NSAlert not only brings the advantages of the object-oriented model, it introduces new features, such as the ability to display help related to the alert. This document explains both approaches.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001045-DontLinkElementID_6" title="Important:"></a><p><strong>Important:</strong>&nbsp;The NSAlert class is available in Mac OS X version 10.3 and later.</p><p></p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="UsingAlertSheets.html#//apple_ref/doc/uid/20001045-61749">Using the NSAlert Class</a>
				
			<br/>
			
        
			
			
				<a href="UsingAlertSheets.html#//apple_ref/doc/uid/20001045-61775-BCICGDAF">Using the Functional API</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001045-61749" title="Using the NSAlert Class"></a><h2>Using the NSAlert Class</h2><p>Using the NSAlert API to display an alert sheet involves three simple steps: creating and initializing an NSAlert instance, displaying the sheet, and interpreting and acting on the user’s choice.</p><ol class="ol"><li class="li"><p>Create the NSAlert object though the standard Objective-C <code>alloc</code>-and-<code>init</code> procedure. Then send the required NSAlert “setter” messages to initialize the alert. <span class="content_text"><a href="UsingAlertSheets.html#//apple_ref/doc/uid/20001045-62499-BCIFAAEJ">Listing 1</a></span> gives an example of this.</p><a name="//apple_ref/doc/uid/20001045-62499-BCIFAAEJ" title="Listing 1Creating and initializing the NSAlert object"></a><br/><br/><p class="codesample"><a name="//apple_ref/doc/uid/20001045-62499" title="Listing 1Creating and initializing the NSAlert object"></a><strong>Listing 1&nbsp;&nbsp;</strong>Creating and initializing the NSAlert object</p><div class="codesample"><table><tr><td scope="row"><pre>NSAlert *alert = [[[NSAlert alloc] init] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>[alert addButtonWithTitle:@"OK"];<span></span></pre></td></tr><tr><td scope="row"><pre>[alert addButtonWithTitle:@"Cancel"];<span></span></pre></td></tr><tr><td scope="row"><pre>[alert setMessageText:@"Delete the record?"];<span></span></pre></td></tr><tr><td scope="row"><pre>[alert setInformativeText:@"Deleted records cannot be restored."];<span></span></pre></td></tr><tr><td scope="row"><pre>[alert setAlertStyle:NSWarningAlertStyle];<span></span></pre></td></tr></table></div></li><li class="li"><p>Invoke the <code>beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:</code> method on the NSAlert object (<span class="content_text">Listing 2</span>). This displays the sheet attached to the specified window.</p><a name="//apple_ref/doc/uid/20001045-62676-BCIJIHGC" title="Listing 2Displaying the alert sheet"></a><br/><br/><p class="codesample"><a name="//apple_ref/doc/uid/20001045-62676" title="Listing 2Displaying the alert sheet"></a><strong>Listing 2&nbsp;&nbsp;</strong>Displaying the alert sheet</p><div class="codesample"><table><tr><td scope="row"><pre>[alert beginSheetModalForWindow:[searchField window] modalDelegate:self didEndSelector:@selector(alertDidEnd:returnCode:contextInfo:) contextInfo:nil];<span></span></pre></td></tr></table></div><p>The modal-delegate parameter must be an object that implements a method with the following signature:</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)alertDidEnd:(NSAlert *)alert returnCode:(int)returnCode<span></span></pre></td></tr><tr><td scope="row"><pre>    contextInfo:(void *)contextInfo;<span></span></pre></td></tr></table></div><p>The NSAlert object invokes this method when the user clicks a button on the alert sheet to indicate his or her choice (which consequently dismisses the sheet). The modal delegate is not the recipient of any other delegation messages; it is the delegate <em>only</em> for the current modal session. The context-info parameter is for any data you wish to pass to the modal delegate. Instead of autoreleasing the NSAlert object when you create it, you may release the object in this method, if you wish.</p></li><li class="li"><p>Implement the modal-delegate method to identify the user’s choice and proceed accordingly (<span class="content_text">Listing 3</span>).</p><a name="//apple_ref/doc/uid/20001045-62569-BCIJHHAA" title="Listing 3Interpreting the result in the modal delegate method"></a><br/><br/><p class="codesample"><a name="//apple_ref/doc/uid/20001045-62569" title="Listing 3Interpreting the result in the modal delegate method"></a><strong>Listing 3&nbsp;&nbsp;</strong>Interpreting the result in the modal delegate method</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)alertDidEnd:(NSAlert *)alert returnCode:(int)returnCode contextInfo:(void *)contextInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    if (returnCode == NSAlertFirstButtonReturn) {<span></span></pre></td></tr><tr><td scope="row"><pre>    [self deleteRecord:currentRec];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The return code is an <code>enum</code> constant identifying the button on the dialog that the user clicked. The first button added to the dialog (which, in left-to-right scripts, is the one closest to the right edge) is identified by <code><a href="../../../Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSAlertFirstButtonReturn" target="_top">NSAlertFirstButtonReturn</a></code>. The second button that is added appears just to the left of the first and is identified by <code><a href="../../../Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSAlertSecondButtonReturn" target="_top">NSAlertSecondButtonReturn</a></code> —and so forth for the third button.</p></li></ol><p>As a convenience for compatibility with the older functional API (see <span class="content_text"><a href="UsingAlertSheets.html#//apple_ref/doc/uid/20001045-61775">“Using the Functional API”</a></span>), you can create NSAlert objects with the class factory method <code>alertWithMessageText:defaultButton:alternateButton:otherButton:informativeTextWithFormat:</code>. This method allows you to retain the earlier constants used to identify the button clicked. Here is an example of how you might invoke this method (with the previous example in mind):</p><div class="codesample"><table><tr><td scope="row"><pre>NSAlert *alert = [NSAlert alertWithMessageText:@"Delete the record?"<span></span></pre></td></tr><tr><td scope="row"><pre>    defaultButton:@"OK" alternateButton:@"Cancel" otherButton:nil<span></span></pre></td></tr><tr><td scope="row"><pre>    informativeTextWithFormat:@"Deleted records cannot be restored."];<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001045-61775" title="Using the Functional API"></a><a name="//apple_ref/doc/uid/20001045-61775-BCICGDAF" title="Using the Functional API"></a><h2>Using the Functional API</h2><p>The application assumed for this example is a table of expense report entries similar to a spreadsheet. The <code>deleteSelectedRows:</code> method is sent when the user tries to delete selected rows in the expense report. <code>deleteSelectedRows:</code> asks the user’s permission to delete the rows by displaying an alert sheet using the <code>NSBeginAlertSheet</code> function.</p><p><code>NSBeginAlertSheet</code> has a fairly long list of parameters, but the function is not difficult to use. Here is a summary of the parameters:</p><dl class="termdef">	<dl class="content_text"><b><i class="mono">title</em></b><dd><p>The main text of the alert, which appears in the emphasized system font.</p></dd></dl><dl class="content_text"><b><i class="mono">defaultButton</em></b><dd><p>The label for the sheet’s default button; the button label should correspond to the action that will result from pressing the button–for example, “Save,” “Erase,” or “Delete”.</p></dd></dl><dl class="content_text"><b><i class="mono">alternateButton</em></b><dd><p>The label for the sheet’s alternate button. If you pass <code>nil</code>, only the <em>defaultButton</em> is displayed.</p></dd></dl><dl class="content_text"><b><i class="mono">otherButton</em></b><dd><p>The label for the sheet’s other button. If you pass <code>nil</code>, only the <em>defaultButton</em> and <em>alternateButton</em> are displayed.</p></dd></dl><dl class="content_text"><b><i class="mono">documentWindow</em></b><dd><p>A reference to the NSWindow the sheet is attached to.</p></dd></dl><dl class="content_text"><b><i class="mono">modalDelegate</em></b><dd><p>A reference to the object acting as the sheet’s delegate.</p></dd></dl><dl class="content_text"><b><i class="mono">didEndSelector</em></b><dd><p>A selector for a method implemented by <em>modalDelegate</em>. This method is sent when the modal session is ended, but before the sheet is dismissed. If you don’t need this capability, pass <code>NULL</code>.</p></dd></dl><dl class="content_text"><b><i class="mono">didDismissSelector</em></b><dd><p>A selector for a method implemented by <em>modalDelegate</em>. This method is sent after the sheet is dismissed in the event your application might need to perform additional processing. If you don’t need this capability, pass <code>NULL</code>.</p></dd></dl><dl class="content_text"><b><i class="mono">contextInfo</em></b><dd><p>Additional information you can define to pass to <em>modalDelegate</em> as a parameter of <em>didEndSelector</em> and <em>didDismissSelector</em>.</p></dd></dl><dl class="content_text"><b><i class="mono">message</em></b><dd><p>Optional additional text that appears in the sheet. The text appears in the small system font. This string can contain <code>printf</code>-style escape sequences.</p></dd></dl><dl class="content_text"><b><i class="mono">optionalParameters</em></b><dd><p>The <code>printf</code>-style parameters used to format <em>message</em>.</p></dd></dl></dl><p>So, the implementation of <code>deleteSelectedRows:</code> would simply look as shown in <span class="content_text">Listing 4</span>.</p><a name="//apple_ref/doc/uid/20001045-61928-BBCHFFCB" title="Listing 4The deleteSelectedRows: method implemented to present a sheet with two buttons"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001045-61928" title="Listing 4The deleteSelectedRows: method implemented to present a sheet with two buttons"></a><strong>Listing 4&nbsp;&nbsp;</strong>The deleteSelectedRows: method implemented to present a sheet with two buttons</p><div class="codesample"><table><tr><td scope="row"><pre>- (BOOL)deleteSelectedRows: (NSWindow *)sender<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSBeginAlertSheet(<span></span></pre></td></tr><tr><td scope="row"><pre>        @"Do you really want to delete the selected rows?",<span></span></pre></td></tr><tr><td scope="row"><pre>                                // sheet message<span></span></pre></td></tr><tr><td scope="row"><pre>        @"Delete",              // default button label<span></span></pre></td></tr><tr><td scope="row"><pre>        nil,                    // no third button<span></span></pre></td></tr><tr><td scope="row"><pre>        @"Cancel",              // other button label<span></span></pre></td></tr><tr><td scope="row"><pre>        sender,                 // window sheet is attached to<span></span></pre></td></tr><tr><td scope="row"><pre>        self,                   // we’ll be our own delegate<span></span></pre></td></tr><tr><td scope="row"><pre>        @selector(sheetDidEndShouldDelete:returnCode:contextInfo:),<span></span></pre></td></tr><tr><td scope="row"><pre>                                // did-end selector<span></span></pre></td></tr><tr><td scope="row"><pre>        NULL,                   // no need for did-dismiss selector<span></span></pre></td></tr><tr><td scope="row"><pre>        sender,                 // context info<span></span></pre></td></tr><tr><td scope="row"><pre>        @"There is no undo for this operation.");<span></span></pre></td></tr><tr><td scope="row"><pre>                                // additional text<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// We don’t know if the rows should be deleted until the user responds,<span></span></pre></td></tr><tr><td scope="row"><pre>// so don’t.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>When the user attempts to delete the selected expenses, the sheet shown in <span class="content_text">Figure 1</span> drops down from the window title bar.</p><br/><div><a name="//apple_ref/doc/uid/20001045-61894-BBCHDFDF" title="Figure 1Alert to confirm deletes"></a><p><a name="//apple_ref/doc/uid/20001045-61894" title="Figure 1Alert to confirm deletes"></a><strong>Figure 1&nbsp;&nbsp;</strong>Alert to confirm deletes</p><img src = "Art/simplesheet.gif" alt = "Alert to confirm deletes" width="407" height="134"></div><br/><p>The implementation of the did-end selector <code>sheetDidEndShouldDelete:returnCode:contextInfo:</code>, sent when the user clicks a button is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)sheetDidEndShouldDelete: (NSWindow *)sheet<span></span></pre></td></tr><tr><td scope="row"><pre>        returnCode: (int)returnCode<span></span></pre></td></tr><tr><td scope="row"><pre>        contextInfo: (void *)contextInfo<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (returnCode == NSAlertDefaultReturn)<span></span></pre></td></tr><tr><td scope="row"><pre>    // delete selected rows here<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>If the user clicks the Cancel button, the value of <em>returnCode</em> is <code><a href="../../../Reference/ApplicationKit/Classes/NSPanel_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSAlertOtherReturn" target="_top">NSAlertOtherReturn</a></code>. If a third button were provided, its return value would be <code><a href="../../../Reference/ApplicationKit/Classes/NSPanel_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSAlertAlternateReturn" target="_top">NSAlertAlternateReturn</a></code>.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/AlertBadging.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DisplayAlertHelp.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-09-05<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/Sheets/Tasks/UsingAlertSheets.html%3Fid%3D10000002i-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/Sheets/Tasks/UsingAlertSheets.html%3Fid%3D10000002i-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/Sheets/Tasks/UsingAlertSheets.html%3Fid%3D10000002i-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

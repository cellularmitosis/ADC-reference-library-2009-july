<html><head><title>Mac OS X
 Manual Page For ntp.conf(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/ntp.conf" title="Mac OS X
 Manual Page for ntp.conf(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/ntp.conf"; name=ntp.conf(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
NTP.CONF(5)                 BSD File Formats Manual                NTP.CONF(5)

<b>NAME</b>
     <b>ntp.conf</b> -- Network Time Protocol (NTP) daemon configuration file

<b>SYNOPSIS</b>
     <b>/etc/ntp.conf</b>

<b>DESCRIPTION</b>
     The <b>ntp.conf</b> configuration file is read at initial startup by the <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> daemon in order to specify
     the synchronization sources, modes and other related information.  Usually, it is installed in the <u>/etc</u>
     directory, but could be installed elsewhere (see the daemon's <b>-c</b> command line option).

     The file format is similar to other UNIX configuration files.  Comments begin with a `#' character and
     extend to the end of the line; blank lines are ignored.  Configuration commands consist of an initial
     keyword followed by a list of arguments, some of which may be optional, separated by whitespace.  Com-<font color="#ffffff" class="whiteout">mands&nbsp;Commands</font>
     mands may not be continued over multiple lines.  Arguments may be host names, host addresses written in
     numeric, dotted-quad form, integers, floating point numbers (when specifying times in seconds) and text
     strings.

     The rest of this page describes the configuration and control options.  The "Notes on Configuring NTP
     and Setting up a NTP Subnet" page (available as part of the HTML documentation provided in
     <u>/usr/share/doc/ntp</u>) contains an extended discussion of these options.  In addition to the discussion of
     general <u>Configuration</u> <u>Support</u>, there are sections describing the following supported functionality and
     the options used to control it:

           <b></b><b><u>oo</u></b>   <u>Authentication</u> <u>Support</u>

           <b></b><b><u>oo</u></b>   <u>Monitoring</u> <u>Support</u>

           <b></b><b><u>oo</u></b>   <u>Access</u> <u>Control</u> <u>Support</u>

           <b></b><b><u>oo</u></b>   <u>Reference</u> <u>Clock</u> <u>Support</u>

     Following these is a section describing <u>Miscellaneous</u> <u>Options</u>.  While there is a rich set of options
     available, the only required option is one or more <b>server</b>, <b>peer</b>, <b>broadcast</b> or <b>manycastclient</b> commands.

<b>Configuration</b> <b>Support</b>
     Following is a description of the configuration commands in NTPv4.  These commands have the same basic
     functions as in NTPv3 and in some cases new functions and new arguments.  There are two classes of com-<font color="#ffffff" class="whiteout">mands:&nbsp;commands:</font>
     mands: configuration commands that configure a persistent association with a remote server or peer or
     reference clock, and auxiliary commands that specify environmental variables that control various
     related operations.

   <b>Configuration</b> <b>Commands</b>
     The various modes are determined by the command keyword and the type of the required IP address.
     Addresses are classed by type as (s) a remote server or peer (IP class A, B and C), (b) the broadcast
     address of a local interface, (m) a multicast address (IP class D), or (r) a reference clock address
     (127.127.x.x).  Note that only those options applicable to each command are listed below.  Use of
     options not listed may not be caught as an error, but may result in some weird and even destructive
     behavior.

     <b>server</b> <u>address</u> [<b>key</b> <u>key</u> <u>|</u> <b>autokey</b>] [<b>burst</b>] [<b>iburst</b>] [<b>version</b> <u>version</u>] [<b>prefer</b>] [<b>minpoll</b> <u>minpoll</u>]
             [<b>maxpoll</b> <u>maxpoll</u>] [<b>noselect</b>] [<b>preempt</b>]

     <b>peer</b> <u>address</u> [<b>key</b> <u>key</u> <u>|</u> <b>autokey</b>] [<b>version</b> <u>version</u>] [<b>prefer</b>] [<b>minpoll</b> <u>minpoll</u>] [<b>maxpoll</b> <u>maxpoll</u>]
             [<b>noselect</b>]

     <b>broadcast</b> <u>address</u> [<b>key</b> <u>key</u> <u>|</u> <b>autokey</b>] [<b>version</b> <u>version</u>] [<b>prefer</b>] [<b>minpoll</b> <u>minpoll</u>] [<b>ttl</b> <u>ttl</u>]

     <b>manycastclient</b> <u>address</u> [<b>key</b> <u>key</u> <u>|</u> <b>autokey</b>] [<b>version</b> <u>version</u>] [<b>prefer</b>] [<b>minpoll</b> <u>minpoll</u>] [<b>maxpoll</b>
             <u>maxpoll</u>] [<b>ttl</b> <u>ttl</u>]

     These four commands specify the time server name or address to be used and the mode in which to oper-<font color="#ffffff" class="whiteout">ate.&nbsp;operate.</font>
     ate.  The <u>address</u> can be either a DNS name or an IP address in dotted-quad notation.  Additional infor-<font color="#ffffff" class="whiteout">mation&nbsp;information</font>
     mation on association behavior can be found in the "Association Management" page.

     <b>server</b>  For type s and r addresses, this command mobilizes a persistent client mode association with
             the specified remote server or local radio clock.  In this mode the local clock can synchro-<font color="#ffffff" class="whiteout">nized&nbsp;synchronized</font>
             nized to the remote server, but the remote server can never be synchronized to the local clock.
             This command should <u>not</u> be used for type b or m addresses.

     <b>peer</b>    For type s addresses (only), this command mobilizes a persistent symmetric-active mode associa-<font color="#ffffff" class="whiteout">tion&nbsp;association</font>
             tion with the specified remote peer.  In this mode the local clock can be synchronized to the
             remote peer or the remote peer can be synchronized to the local clock.  This is useful in a
             network of servers where, depending on various failure scenarios, either the local or remote
             peer may be the better source of time.  This command should NOT be used for type b, m or r
             addresses.

     <b>broadcast</b>
             For type b and m addresses (only), this command mobilizes a persistent broadcast mode associa-<font color="#ffffff" class="whiteout">tion.&nbsp;association.</font>
             tion.  Multiple commands can be used to specify multiple local broadcast interfaces (subnets)
             and/or multiple multicast groups.  Note that local broadcast messages go only to the interface
             associated with the subnet specified, but multicast messages go to all interfaces.

             In broadcast mode the local server sends periodic broadcast messages to a client population at
             the <u>address</u> specified, which is usually the broadcast address on (one of) the local <!-- a -->network(s)<!-- /a -->
             or a multicast address assigned to NTP.  The IANA has assigned the multicast group address
             224.0.1.1 exclusively to NTP, but other nonconflicting addresses can be used to contain the
             messages within administrative boundaries.  Ordinarily, this specification applies only to the
             local server operating as a sender; for operation as a broadcast client, see the
             <b>broadcastclient</b> or <b>multicastclient</b> commands below.

     <b>manycastclient</b>
             For type m addresses (only), this command mobilizes a manycast client mode association for the
             multicast address specified.  In this case a specific address must be supplied which matches
             the address used on the <b>manycastserver</b> command for the designated manycast servers.  The NTP
             multicast address 224.0.1.1 assigned by the IANA should NOT be used, unless specific means are
             taken to avoid spraying large areas of the Internet with these messages and causing a possibly
             massive implosion of replies at the sender.

             The <b>manycastserver</b> command specifies that the local server is to operate in client mode with
             the remote servers that are discovered as the result of broadcast/multicast messages.  The
             client broadcasts a request message to the group address associated with the specified <u>address</u>
             and specifically enabled servers respond to these messages.  The client selects the servers
             providing the best time and continues as with the <b>server</b> command.  The remaining servers are
             discarded as if never heard.

     Options:

     <b>autokey</b>
             All packets sent to and received from the server or peer are to include authentication fields
             encrypted using the autokey scheme described in <u>Authentication</u> <u>Support</u>.

     <b>burst</b>   when the server is reachable and at each poll interval, send a burst of eight packets instead
             of the usual one packet.  The spacing between the first and the second packets is about 16s to
             allow a modem call to complete, while the spacing between the remaining packets is about 2s.
             This is designed to improve timekeeping quality with the <b>server</b> command and s addresses.

     <b>iburst</b>  When the server is unreachable and at each poll interval, send a burst of eight packets instead
             of the usual one.  As long as the server is unreachable, the spacing between packets is about
             16s to allow a modem call to complete.  Once the server is reachable, the spacing between pack-<font color="#ffffff" class="whiteout">ets&nbsp;packets</font>
             ets is about 2s.  This is designed to speed the initial synchronization acquisition with the
             <b>server</b> command and s addresses and when <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> is started with the <b>-q</b> option.

     <b>key</b> <u>key</u>
             All packets sent to and received from the server or peer are to include authentication fields
             encrypted using the specified <u>key</u> identifier with values from 1 to 65534, inclusive.  The
             default is to include no encryption field.

     <b>minpoll</b> <u>minpoll</u>

     <b>maxpoll</b> <u>maxpoll</u>
             These options specify the minimum and maximum poll intervals for NTP messages, in seconds to
             the power of two.  The maximum poll interval defaults to 10 (1,024 s), but can be increased by
             the <b>maxpoll</b> option to an upper limit of 17 (36.4 h).  The minimum poll interval defaults to 6
             (64 s), but can be decreased by the <b>minpoll</b> option to a lower limit of 4 (16 s).

     <b>noselect</b>
             Marks the server as unused, except for display purposes. The server is discarded by the selec-<font color="#ffffff" class="whiteout">tion&nbsp;selection</font>
             tion algorithm. This option is valid only with the server and peer commands.

     <b>preempt</b>
             Specifies the association as preemptable rather than the default persistent. This option is
             valied only with the server command.

     <b>prefer</b>  Marks the server as preferred.  All other things being equal, this host will be chosen for syn-<font color="#ffffff" class="whiteout">chronization&nbsp;synchronization</font>
             chronization among a set of correctly operating hosts.

     <b>true</b>    Force the association to assume truechimer status; that is, always survive the selection and
             clustering algorithms. This option can be used with any association, but is most useful for
             reference clocks with large jitter on the serial port and precision pulse-per-second (PPS) sig-<font color="#ffffff" class="whiteout">nals.&nbsp;signals.</font>
             nals. Caution: this option defeats the algorithms designed to cast out falsetickers and can
             allow these sources to set the system clock. This option is valid only with the server and peer
             commands.  See the "Mitigation Rules and the prefer Keyword" page for further information.

     <b>ttl</b> <u>ttl</u>
             This option is used only with broadcast server and manycast client modes.  It specifies the
             time-to-live <b>ttl</b> to use on broadcast server and multicast server and the maximum <b>ttl</b> for the
             expanding ring search with manycast client packets.  Selection of the proper value, which
             defaults to 127, is something of a black art and should be coordinated with the network admin-<font color="#ffffff" class="whiteout">istrator.&nbsp;administrator.</font>
             istrator.

     <b>version</b> <u>version</u>
             Specifies the version number to be used for outgoing NTP packets.  Versions 1-4 are the
             choices, with version 4 the default.

   <b>Auxiliary</b> <b>Commands</b>
     <b>broadcastclient</b>
             This command enables reception of broadcast server messages to any local interface (type b)
             address.  Upon receiving a message for the first time, the broadcast client measures the nomi-<font color="#ffffff" class="whiteout">nal&nbsp;nominal</font>
             nal server propagation delay using a brief client/server exchange with the server, then enters
             the broadcast client mode, in which it synchronizes to succeeding broadcast messages.  Note
             that, in order to avoid accidental or malicious disruption in this mode, both the server and
             client should operate using symmetric-key or public-key authentication as described in
             <u>Authentication</u> <u>Support</u>.

     <b>manycastserver</b> <u>address</u> <u>...</u>
             This command enables reception of manycast client messages to the multicast group address(es)
             (type m) specified.  At least one address is required, but the NTP multicast address 224.0.1.1
             assigned by the IANA should NOT be used, unless specific means are taken to limit the span of
             the reply and avoid a possibly massive implosion at the original sender.  Note that, in order
             to avoid accidental or malicious disruption in this mode, both the server and client should
             operate using symmetric-key or public-key authentication as described in <u>Authentication</u>
             <u>Support</u>.

     <b>multicastclient</b> <u>address</u> <u>...</u>
             This command enables reception of multicast server messages to the multicast group address(es)
             (type m) specified.  Upon receiving a message for the first time, the multicast client measures
             the nominal server propagation delay using a brief client/server exchange with the server, then
             enters the broadcast client mode, in which it synchronizes to succeeding multicast messages.
             Note that, in order to avoid accidental or malicious disruption in this mode, both the server
             and client should operate using symmetric-key or public-key authentication as described in
             <u>Authentication</u> <u>Support</u>.

<b>Authentication</b> <b>Support</b>
     Authentication support allows the NTP client to verify that the server is in fact known and trusted and
     not an intruder intending accidentally or on purpose to masquerade as that server.  The NTPv3 specifi-<font color="#ffffff" class="whiteout">cation&nbsp;specification</font>
     cation RFC-1305 defines a scheme which provides cryptographic authentication of received NTP packets.
     Originally, this was done using the Data Encryption Standard (DES) algorithm operating in Cipher Block
     Chaining (CBC) mode, commonly called DES-CBC.  Subsequently, this was augmented by the RSA Message
     Digest 5 (MD5) algorithm using a private key, commonly called keyed-MD5.  Either algorithm computes a
     message digest, or one-way hash, which can be used to verify the server has the correct private key and
     key identifier.

     NTPv4 retains the NTPv3 schemes, properly described as symmetric-key cryptography and, in addition,
     provides a new Autokey scheme based on public-key cryptography.  Public-key cryptography is generally
     considered more secure than symmetric-key cryptography, since the security is based on a private value
     which is generated by each server and never revealed.  With Autokey all key distribution and management
     functions involve only public values, which considerably simplifies key distribution and storage.

     Authentication is configured separately for each association using the <b>key</b> or <b>autokey</b> subcommands on
     the <b>peer</b>, <b>server</b>, <b>broadcast</b> and <b>manycastclient</b> commands as described in <u>Configuration</u> <u>Options</u>.  The
     authentication options described below specify the suite of keys, select the key for each configured
     association and manage the configuration operations.

     The <b>auth</b> flag controls whether new associations or remote configuration commands require cryptographic
     authentication.  This flag can be set or reset by the <b>enable</b> and <b>disable</b> configuration commands and
     also by remote configuration commands sent by a <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> program running in another machine.  If this
     flag is enabled, which is the default case, new broadcast client and symmetric passive associations and
     remote configuration commands must be cryptographically authenticated using either symmetric-key or
     public-key schemes.  If this flag is disabled, these operations are effective even if not cryptographic
     authenticated.  It should be understood that operating in the latter mode invites a significant vulner-<font color="#ffffff" class="whiteout">ability&nbsp;vulnerability</font>
     ability where a rogue hacker can seriously disrupt client timekeeping.

     In networks with firewalls and large numbers of broadcast clients it may be acceptable to disable
     authentication, since that avoids key distribution and simplifies network maintenance.  However, when
     the configuration file contains host names, or when a server or client is configured remotely, host
     names are resolved using the DNS and a separate name resolution process.  In order to protect against
     bogus name server messages, name resolution messages are authenticated using an internally generated
     key which is normally invisible to the user.  However, if cryptographic support is disabled, the name
     resolution process will fail.  This can be avoided either by specifying IP addresses instead of host
     names, which is generally inadvisable, or by enabling the flag for name resolution and disabled it once
     the name resolution process is complete.

     An attractive alternative where multicast support is available is manycast mode, in which clients peri-<font color="#ffffff" class="whiteout">odically&nbsp;periodically</font>
     odically troll for servers.  Cryptographic authentication in this mode uses public-key schemes as
     described below.  The principle advantage of this manycast mode is that potential servers need not be
     configured in advance, since the client finds them during regular operation, and the configuration
     files for all clients can be identical.

     In addition to the default symmetric-key cryptographic support, support for public-key cryptography is
     available if the requisite <b>rsaref20</b> software distribution has been installed before building the dis-<font color="#ffffff" class="whiteout">tribution.&nbsp;distribution.</font>
     tribution.  Public-key cryptography provides secure authentication of servers without compromising
     accuracy and stability.  The security model and protocol schemes for both symmetric-key and public-key
     cryptography are described below.

   <b>Symmetric-Key</b> <b>Scheme</b>
     The original RFC-1305 specification allows any one of possibly 65,534 keys, each distinguished by a
     32-bit key identifier, to authenticate an association.  The servers and clients involved must agree on
     the key and key identifier to authenticate their messages.  Keys and related information are specified
     in a key file, usually called <u>ntp.keys</u>, which should be exchanged and stored using secure procedures
     beyond the scope of the NTP protocol itself.  Besides the keys used for ordinary NTP associations,
     additional keys can be used as passwords for the <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a> and <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> utility programs.

     When <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> is first started, it reads the key file specified in the <b>keys</b> command and installs the
     keys in the key cache.  However, the keys must be activated with the <b>trusted</b> command before use.  This
     allows, for instance, the installation of possibly several batches of keys and then activating or deac-<font color="#ffffff" class="whiteout">tivating&nbsp;deactivating</font>
     tivating each batch remotely using <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a>.  This also provides a revocation capability that can be
     used if a key becomes compromised.  The <b>requestkey</b> command selects the key used as the password for the
     <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> utility, while the <b>controlkey</b> command selects the key used as the password for the <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a>
     utility.

   <b>Public-Key</b> <b>Scheme</b>
     The original NTPv3 authentication scheme described in RFC-1305 continues to be supported; however, in
     NTPv4 an additional authentication scheme called Autokey is available.  It uses MD5 message digest, RSA
     public-key signature and Diffie-Hellman key agreement algorithms available from several sources, but
     not included in the NTPv4 software distribution.  In order to be effective, the <b>rsaref20</b> package must
     be installed as described in the <u>README.rsa</u> file.  Once installed, the configure and build process
     automatically detects it and compiles the routines required.

     The Autokey scheme has several modes of operation corresponding to the various NTP modes supported.
     RSA signatures with timestamps are used in all modes to verify the source of cryptographic values.  All
     modes use a special cookie which can be computed independently by the client and server.  In symmetric
     modes the cookie is constructed using the Diffie-Hellman key agreement algorithm.  In other modes the
     cookie is constructed from the IP addresses and a private value known only to the server.  All modes
     use in addition a variant of the S-KEY scheme, in which a pseudo-random key list is generated and used
     in reverse order.  These schemes are described along with an executive summary, current status, brief-<font color="#ffffff" class="whiteout">ing&nbsp;briefing</font>
     ing slides and reading list, in the "Autonomous Authentication" page.

     The cryptographic values used by the Autokey scheme are incorporated as a set of files generated by the
     <!-- a -->ntp-genkeys(8)<!-- /a --> program, including the symmetric private keys, public/private key pair, and the agree-<font color="#ffffff" class="whiteout">ment&nbsp;agreement</font>
     ment parameters.  See the <!-- a -->ntp.keys(5)<!-- /a --> page for a description of the formats of these files.  They con-<font color="#ffffff" class="whiteout">tain&nbsp;contain</font>
     tain cryptographic values generated by the algorithms of the <b>rsaref20</b> package and are in printable
     ASCII format.  All file names include the timestamp, in NTP seconds, following the default names given
     below.  Since the file data are derived from random values seeded by the system clock and the file name
     includes the timestamp, every generation produces a different file and different file name.

     The <u>ntp.keys</u> file contains the DES/MD5 private keys.  It must be distributed by secure means to other
     servers and clients sharing the same security compartment and made visible only to root.  While this
     file is not used with the Autokey scheme, it is needed to authenticate some remote configuration com-<font color="#ffffff" class="whiteout">mands&nbsp;commands</font>
     mands used by the <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a>, <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a> utilities.  The <u>ntpkey</u> file contains the RSA private key.  It is
     useful only to the machine that generated it and never shared with any other daemon or application pro-<font color="#ffffff" class="whiteout">gram,&nbsp;program,</font>
     gram, so must be made visible only to root.

     The <u>ntp</u><b>_</b><u>dh</u> file contains the agreement parameters, which are used only in symmetric (active and pas-<font color="#ffffff" class="whiteout">sive)&nbsp;passive)</font>
     sive) modes.  It is necessary that both peers beginning a symmetric-mode association share the same
     parameters, but it does not matter which <u>ntp</u><b>_</b><u>dh</u> file generates them.  If one of the peers contains the
     parameters, the other peer obtains them using the Autokey protocol.  If both peers contain the parame-<font color="#ffffff" class="whiteout">ters,&nbsp;parameters,</font>
     ters, the most recent copy is used by both peers.  If a peer does not have the parameters, they will be
     requested by all associations, either configured or not; but, none of the associations can proceed
     until one of them has received the parameters.  Once loaded, the parameters can be provided on request
     to other clients and servers.  The <u>ntp</u><b>_</b><u>dh</u> file can be also be distributed using insecure means, since
     the data are public values.

     The <u>ntpkey</u><b>_</b><u>host</u> file contains the RSA public key, where <u>host</u> is the name of the host.  Each host must
     have its own <u>ntpkey</u><b>_</b><u>host</u> file, which is normally provided to other hosts using the Autokey protocol.
     Each <b>server</b> or <b>peer</b> association requires the public key associated with the particular server or peer
     to be loaded either directly from a local file or indirectly from the server using the Autokey proto-<font color="#ffffff" class="whiteout">col.&nbsp;protocol.</font>
     col.  These files can be widely distributed and stored using insecure means, since the data are public
     values.

     The optional <u>ntpkey</u><b>_</b><u>certif</u><b>_</b><u>host</u> file contains the PKI certificate for the host.  This provides a bind-<font color="#ffffff" class="whiteout">ing&nbsp;binding</font>
     ing between the host hame and RSA public key.  In the current implementation the certificate is
     obtained by a client, if present, but the contents are ignored.

     Due to the widespread use of interface-specific naming, the host names used in configured and mobilized
     associations are determined by the UNIX <a href="../man3/gethostname.3.html#//apple_ref/doc/man/3/gethostname">gethostname(3)</a> library routine.  Both the <!-- a -->ntp-genkeys(8)<!-- /a --> pro-<font color="#ffffff" class="whiteout">gram&nbsp;program</font>
     gram and the Autokey protocol derive the name of the public key file using the name returned by this
     routine.  While every server and client is required to load their own public and private keys, the pub-<font color="#ffffff" class="whiteout">lic&nbsp;public</font>
     lic keys for each client or peer association can be obtained from the server or peer using the Autokey
     protocol.  Note however, that at the current stage of development the authenticity of the server or
     peer and the cryptographic binding of the server name, address and public key is not yet established by
     a certificate authority or web of trust.

   <b>Leapseconds</b> <b>Table</b>
     The NIST provides a table showing the epoch for all historic occasions of leap second insertion since
     1972.  The leapsecond table shows each epoch of insertion along with the offset of International Atomic
     Time (TAI) with respect to Coordinated Universal Time (UTC), as disseminated by NTP.  The table can be
     obtained directly from NIST national time servers using FTP as the ASCII file <u>pub/leap-seconds</u>.

     While not strictly a security function, the Autokey scheme provides means to securely retrieve the
     leapsecond table from a server or peer.  Servers load the leapsecond table directly from the file spec-<font color="#ffffff" class="whiteout">ified&nbsp;specified</font>
     ified in the <b>crypto</b> command, while clients can load the table indirectly from the servers using the
     Autokey protocol.  Once loaded, the table can be provided on request to other clients and servers.

   <b>Key</b> <b>Management</b>
     All key files are installed by default in <u>/usr/local/etc</u>, which is normally in a shared file system in
     NFS-mounted networks and avoids installing them in each machine separately.  The default can be over-<font color="#ffffff" class="whiteout">ridden&nbsp;overridden</font>
     ridden by the <b>keysdir</b> configuration command.  However, this is not a good place to install the private
     key file, since each machine needs its own file.  A suitable place to install it is in <u>/etc</u>, which is
     normally not in a shared file system.

     The recommended practice is to keep the timestamp extensions when installing a file and to install a
     link from the default name (without the timestamp extension) to the actual file.  This allows new file
     generations to be activated simply by changing the link.  However, <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> parses the link name when
     present to extract the extension value and sends it along with the public key and host name when
     requested.  This allows clients to verify that the file and generation time are always current.  How-<font color="#ffffff" class="whiteout">ever,&nbsp;However,</font>
     ever, the actual location of each file can be overridden by the <b>crypto</b> configuration command.

     All cryptographic keys and related parameters should be regenerated on a periodic and automatic basis,
     like once per month.  The <!-- a -->ntp-genkeys(8)<!-- /a --> program uses the same timestamp extension for all files gener-<font color="#ffffff" class="whiteout">ated&nbsp;generated</font>
     ated at one time, so each generation is distinct and can be readily recognized in monitoring data.
     While a public/private key pair must be generated by every server and client, the public keys and
     agreement parameters do not need to be explicitly copied to all machines in the same security compart-<font color="#ffffff" class="whiteout">ment,&nbsp;compartment,</font>
     ment, since they can be obtained automatically using the Autokey protocol.  However, it is necessary
     that all primary servers have the same agreement parameter file.  The recommended way to do this is for
     one of the primary servers to generate that file and then copy it to the other primary servers in the
     same compartment using the UNIX <!-- a -->rdist(1)<!-- /a --> command.  Future versions of the Autokey protocol are to con-<font color="#ffffff" class="whiteout">tain&nbsp;contain</font>
     tain provisions for an agreement protocol to do this automatically.

     Servers and clients can make a new generation in the following way.  All machines have loaded the old
     generation at startup and are operating normally.  At designated intervals, each machine generates a
     new public/private key pair and makes links from the default file names to the new file names.  The
     <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> is then restarted and loads the new generation, with result clients no longer can authenticate
     correctly.  The Autokey protocol is designed so that after a few minutes the clients time out and
     restart the protocol from the beginning, with result the new generation is loaded and operation contin-<font color="#ffffff" class="whiteout">ues&nbsp;continues</font>
     ues as before.  A similar procedure can be used for the agreement parameter file, but in this case pre-<font color="#ffffff" class="whiteout">cautions&nbsp;precautions</font>
     cautions must be take to be sure that all machines with this file have the same copy.

   <b>Authentication</b> <b>Commands</b>
     <b>autokey</b> [<u>logsec</u>]
             Specifies the interval between regenerations of the session key list used with the Autokey pro-<font color="#ffffff" class="whiteout">tocol.&nbsp;protocol.</font>
             tocol.  Note that the size of the key list for each association depends on this interval and
             the current poll interval.  The default value is 12 (4096 s or about 1.1 hours).  For poll
             intervals above the specified interval, a session key list with a single entry will be regener-<font color="#ffffff" class="whiteout">ated&nbsp;regenerated</font>
             ated for every message sent.

     <b>controlkey</b> <u>key</u>
             Specifies the key identifier to use with the <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a> utility, which uses the standard protocol
             defined in RFC-1305.  The <u>key</u> argument is the key identifier for a trusted key, where the value
             can be in the range 1 to 65534, inclusive.

     <b>crypto</b> [<b>flags</b> <u>flags</u>] [<b>privatekey</b> <u>file</u>] [<b>publickey</b> <u>file</u>] [<b>dhparms</b> <u>file</u>] [<b>leap</b> <u>file</u>]
             This command requires the NTP daemon build process be configured with the RSA library.  This
             command activates public-key cryptography and loads the required RSA private and public key
             files and the optional Diffie-Hellman agreement parameter file, if present.  If one or more
             files are left unspecified, the default names are used as described below.  Following are the
             subcommands:

             <b>privatekey</b> <u>file</u>
                     Specifies the location of the RSA private key file, which otherwise defaults to
                     <u>/usr/local/etc/ntpkey</u>.

             <b>publickey</b> <u>file</u>
                     Specifies the location of the RSA public key file, which otherwise defaults to
                     <u>/usr/local/etc/ntpkey</u><b>_</b><u>host</u>, where <u>host</u> is the name of the generating machine.

             <b>dhparms</b> <u>file</u>
                     Specifies the location of the Diffie-Hellman parameters file, which otherwise defaults
                     to <u>/usr/local/etc/ntpkey</u><b>_</b><u>dh</u>.

             <b>leap</b> <u>file</u>
                     Specifies the location of the leapsecond table file, which otherwise defaults to
                     <u>/usr/local/etc/ntpkey</u><b>_</b><u>leap</u>.

     <b>keys</b> <u>keyfile</u>
             Specifies the location of the DES/MD5 private key file containing the keys and key identifiers
             used by <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>, <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a> and <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> when operating in symmetric-key mode.

     <b>keysdir</b> <u>path</u>
             This command requires the NTP daemon build process be configured with the RSA library.  It
             specifies the default directory path for the private key file, agreement parameters file and
             one or more public key files.  The default when this command does not appear in the configura-<font color="#ffffff" class="whiteout">tion&nbsp;configuration</font>
             tion file is <u>/usr/local/etc</u>.

     <b>requestkey</b> <u>key</u>
             Specifies the key identifier to use with the <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> utility program, which uses a proprietary
             protocol specific to this implementation of <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>.  The <u>key</u> argument is a key identifier for
             the trusted key, where the value can be in the range 1 to 65534, inclusive.

     <b>revoke</b> <u>logsec</u>
             Specifies the interval between re-randomization of certain cryptographic values used by the
             Autokey scheme, as a power of 2 in seconds.  These values need to be updated frequently in
             order to deflect brute-force attacks on the algorithms of the scheme; however, updating some
             values is a relatively expensive operation.  The default interval is 16 (65,536 s or about 18
             hours).  For poll intervals above the specified interval, the values will be updated for every
             message sent.

     <b>trustedkey</b> <u>key</u> <u>...</u>
             Specifies the key identifiers which are trusted for the purposes of authenticating peers with
             symmetric-key cryptography, as well as keys used by the <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a> and <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> programs.  The
             authentication procedures require that both the local and remote servers share the same key and
             key identifier for this purpose, although different keys can be used with different servers.
             The <u>key</u> arguments are 32-bit unsigned integers with values from 1 to 65,534.

<b>Monitoring</b> <b>Support</b>
     <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> includes a comprehensive monitoring facility suitable for continuous, long term recording of
     server and client timekeeping performance.  See the <b>statistics</b> command below for a listing and example
     of each type of statistics currently supported.  Statistic files are managed using file generation sets
     and scripts in the <u>./scripts</u> directory of this distribution.  Using these facilities and UNIX <a href="../man8/cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a>
     jobs, the data can be automatically summarized and archived for retrospective analysis.

   <b>Monitoring</b> <b>Commands</b>
     <b>statistics</b> <u>name</u> <u>...</u>
             Enables writing of statistics records.  Currently, four kinds of <u>name</u> statistics are supported.

             <b>loopstats</b>
                     Enables recording of loop filter statistics information.  Each update of the local
                     clock outputs a line of the following form to the file generation set named loopstats:

                     50935 75440.031 0.000006019 13.778190 0.000351733 0.013380 6

                     The first two fields show the date (Modified Julian Day) and time (seconds and fraction
                     past UTC midnight).  The next five fields show time offset (seconds), frequency offset
                     (parts per million - PPM), RMS jitter (seconds), Allan deviation (PPM) and clock disci-<font color="#ffffff" class="whiteout">pline&nbsp;discipline</font>
                     pline time constant.

             <b>peerstats</b>
                     Enables recording of peer statistics information.  This includes statistics records of
                     all peers of a NTP server and of special signals, where present and configured.  Each
                     valid update appends a line of the following form to the current element of a file gen-<font color="#ffffff" class="whiteout">eration&nbsp;generation</font>
                     eration set named peerstats:

                     48773 10847.650 127.127.4.1 9714 -0.001605 0.00000 0.00142

                     The first two fields show the date (Modified Julian Day) and time (seconds and fraction
                     past UTC midnight).  The next two fields show the peer address in dotted-quad notation
                     and status, respectively.  The status field is encoded in hex in the format described
                     in Appendix A of the NTP specification RFC 1305.  The final three fields show the off-<font color="#ffffff" class="whiteout">set,&nbsp;offset,</font>
                     set, delay and RMS jitter, all in seconds.

             <b>clockstats</b>
                     Enables recording of clock driver statistics information.  Each update received from a
                     clock driver appends a line of the following form to the file generation set named
                     clockstats:

                     49213 525.624 127.127.4.1 93 226 00:08:29.606 D

                     The first two fields show the date (Modified Julian Day) and time (seconds and fraction
                     past UTC midnight).  The next field shows the clock address in dotted-quad notation.
                     The final field shows the last timecode received from the clock in decoded ASCII for-<font color="#ffffff" class="whiteout">mat,&nbsp;format,</font>
                     mat, where meaningful.  In some clock drivers a good deal of additional information can
                     be gathered and displayed as well.  See information specific to each clock for further
                     details.

             <b>rawstats</b>
                     Enables recording of raw-timestamp statistics information.  This includes statistics
                     records of all peers of a NTP server and of special signals, where present and config-<font color="#ffffff" class="whiteout">ured.&nbsp;configured.</font>
                     ured.  Each NTP message received from a peer or clock driver appends a line of the fol-<font color="#ffffff" class="whiteout">lowing&nbsp;following</font>
                     lowing form to the file generation set named rawstats:

                     50928 2132.543 128.4.1.1 128.4.1.20 3102453281.584327000 3102453281.58622800031 02453332.540806000 3102453332.541458000
                     The first two fields show the date (Modified Julian Day) and time (seconds and fraction
                     past UTC midnight).  The next two fields show the remote peer or clock address followed
                     by the local address in dotted-quad notation.  The final four fields show the origi-<font color="#ffffff" class="whiteout">nate,&nbsp;originate,</font>
                     nate, receive, transmit and final NTP timestamps in order.  The timestamp values are as
                     received and before processing by the various data smoothing and mitigation algorithms.

     <b>statsdir</b> <u>directory</u><b>_</b><u>path</u>
             Indicates the full path of a directory where statistics files should be created (see below).
             This keyword allows the (otherwise constant) <b>filegen</b> filename prefix to be modified for file
             generation sets, which is useful for handling statistics logs.

     <b>filegen</b> <u>name</u> [<b>file</b> <u>filename</u>] [<b>type</b> <u>typename</u>] [<b>link</b> <b>|</b> <b>nolink</b>] [<b>enable</b> <b>|</b> <b>disable</b>]
             Configures setting of generation file set <u>name</u>.  Generation file sets provide a means for han-<font color="#ffffff" class="whiteout">dling&nbsp;handling</font>
             dling files that are continuously growing during the lifetime of a server.  Server statistics
             are a typical example for such files.  Generation file sets provide access to a set of files
             used to store the actual data.  At any time at most one element of the set is being written to.
             The type given specifies when and how data will be directed to a new element of the set.  This
             way, information stored in elements of a file set that are currently unused are available for
             administrational operations without the risk of disturbing the operation of <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>.  (Most
             important: they can be removed to free space for new data produced.)  Note that this command
             can be sent from the <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> program running at a remote location.

             <u>name</u>    This is the type of the statistics records, as shown in the <b>statistics</b> command.

             <b>file</b> <u>filename</u>
                     This is the file name for the statistics records.  Filenames of set members are built
                     from three concatenated elements prefix, filename and suffix:

                     prefix  This is a constant filename path.  It is not subject to modifications via the
                             <b>filegen</b> option.  It is defined by the server, usually specified as a compile-<font color="#ffffff" class="whiteout">time&nbsp;compiletime</font>
                             time constant.  It may, however, be configurable for individual file generation
                             sets via other commands.  For example, the prefix used with <b>loopstats</b> and
                             <b>peerstats</b> generation can be configured using the <b>statsdir</b> option explained
                             above.

                     filename
                             This string is directly concatenated to the prefix mentioned above (no inter-<font color="#ffffff" class="whiteout">vening&nbsp;intervening</font>
                             vening `/' (slash)).  This can be modified using the <u>file</u> argument to the
                             <b>filegen</b> statement.  No `..' elements are allowed in this component to prevent
                             filenames referring to parts outside the file system hierarchy denoted by pre-<font color="#ffffff" class="whiteout">fix.&nbsp;prefix.</font>
                             fix.

                     suffix  This part is reflects individual elements of a file set.  It is generated
                             according to the type of a file set.

             <b>type</b> <u>typename</u>
                     A file generation set is characterized by its type.  The following types are supported:

                     none    The file set is actually a single plain file.

                     pid     One element of file set is used per incarnation of a <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> server.  This type
                             does not perform any changes to file set members during runtime, however it
                             provides an easy way of separating files belonging to different <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> server
                             incarnations.  The set member filename is built by appending a `.' (dot) to
                             concatenated prefix and filename strings, and appending the decimal representa-<font color="#ffffff" class="whiteout">tion&nbsp;representation</font>
                             tion of the process ID of the <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> server process.

                     day     One file generation set element is created per day.  A day is defined as the
                             period between 00:00 and 24:00 UTC.  The file set member suffix consists of a
                             `.' (dot) and a day specification in the form <u>YYYYMMdd</u>.  <u>YYYY</u> is a 4-digit year
                             number (e.g., 1992).  <u>MM</u> is a two digit month number.  <u>dd</u> is a two digit day
                             number.  Thus, all information written at 10 December 1992 would end up in a
                             file named <u>~prefix/filename/19921210</u>.

                     week    Any file set member contains data related to a certain week of a year.  The
                             term week is defined by computing day-of-year modulo 7.  Elements of such a
                             file generation set are distinguished by appending the following suffix to the
                             file set filename base: A dot, a 4-digit year number, the letter Ql W , and a
                             2-digit week number.  For example, information from January, 10th 1992 would
                             end up in a file with suffix <u>.1992W1</u>.

                     month   One generation file set element is generated per month.  The file name suffix
                             consists of a dot, a 4-digit year number, and a 2-digit month.

                     year    One generation file element is generated per year.  The filename suffix con-<font color="#ffffff" class="whiteout">sists&nbsp;consists</font>
                             sists of a dot and a 4 digit year number.

                     age     This type of file generation sets changes to a new element of the file set
                             every 24 hours of server operation.  The filename suffix consists of a dot, the
                             letter `a', and an 8-digit number.  This number is taken to be the number of
                             seconds the server is running at the start of the corresponding 24-hour period.
                             Information is only written to a file generation by specifying <b>enable</b>; output
                             is prevented by specifying <b>disable</b>.

             <b>link</b> <b>|</b> <b>nolink</b>
                     It is convenient to be able to access the current element of a file generation set by a
                     fixed name.  This feature is enabled by specifying <b>link</b> and disabled using <b>nolink</b>.  If
                     <b>link</b> is specified, a hard link from the current file set element to a file without suf-<font color="#ffffff" class="whiteout">fix&nbsp;suffix</font>
                     fix is created.  When there is already a file with this name and the number of links of
                     this file is one, it is renamed appending a dot, the letter `C', and the pid of the
                     <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> server process.  When the number of links is greater than one, the file is
                     unlinked.  This allows the current file to be accessed by a constant name.

             <b>enable</b> <b>|</b> <b>disable</b>
                     Enables or disables the recording function.

<b>Access</b> <b>Control</b> <b>Support</b>
     <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> implements a general purpose address-and-mask based restriction list.  The list is sorted by
     address and by mask, and the list is searched in this order for matches, with the last match found
     defining the restriction flags associated with the incoming packets.  The source address of incoming
     packets is used for the match, with the 32- bit address being and'ed with the mask associated with the
     restriction entry and then compared with the entry's address (which has also been and'ed with the mask)
     to look for a match.  Additional information and examples can be found in the "Notes on Configuring NTP
     and Setting up a NTP Subnet" page.

     The restriction facility was implemented in conformance with the access policies for the original
     NSFnet backbone time servers.  While this facility may be otherwise useful for keeping unwanted or bro-<font color="#ffffff" class="whiteout">ken&nbsp;broken</font>
     ken remote time servers from affecting your own, it should not be considered an alternative to the
     standard NTP authentication facility.  Source address based restrictions are easily circumvented by a
     determined cracker.

   <b>The</b> <b>Kiss-of-Death</b> <b>Packet</b>
     Ordinarily, packets denied service are simply dropped with no further action except incrementing sta-<font color="#ffffff" class="whiteout">tistics&nbsp;statistics</font>
     tistics counters.  Sometimes a more proactive response is needed, such as a server message that explic-<font color="#ffffff" class="whiteout">itly&nbsp;explicitly</font>
     itly requests the client to stop sending and leave a message for the system operator.  A special packet
     format has been created for this purpose called the kiss-of-death packet.  If the <b>kod</b> flag is set and
     either service is denied or the client limit is exceeded, the server returns the packet and sets the
     leap bits unsynchronized, stratum zero and the ASCII string "DENY" in the reference source identifier
     field.  If the <b>kod</b> flag is not set, the server simply drops the packet.

     A client or peer receiving a kiss-of-death packet performs a set of sanity checks to minimize security
     exposure.  If this is the first packet received from the server, the client assumes an access denied
     condition at the server.  It updates the stratum and reference identifier peer variables and sets the
     access denied (test 4) bit in the peer flash variable.  If this bit is set, the client sends no packets
     to the server.  If this is not the first packet, the client assumes a client limit condition at the
     server, but does not update the peer variables.  In either case, a message is sent to the system log.

   <b>Access</b> <b>Control</b> <b>Commands</b>
     <b>restrict</b> <b>numeric_address</b> [<b>mask</b> <u>numeric</u><b>_</b><u>mask</u>] [<u>flag</u> <u>...</u>]
             The <u>numeric</u><b>_</b><u>address</u> argument, expressed in dotted-quad form, is the address of a host or net-<font color="#ffffff" class="whiteout">work.&nbsp;network.</font>
             work.  The <b>mask</b>, also expressed in dotted-quad form, defaults to 255.255.255.255, meaning that
             the <u>numeric</u><b>_</b><u>address</u> is treated as the address of an individual host.  A default entry (address
             0.0.0.0, mask 0.0.0.0) is always included and, given the sort algorithm, is always the first
             entry in the list.  Note that, while <u>numeric</u><b>_</b><u>address</u> is normally given in dotted-quad format,
             the text string `default', with no mask option, may be used to indicate the default entry.  In
             the current implementation, <b>flag</b> always restricts access, i.e., an entry with no flags indi-<font color="#ffffff" class="whiteout">cates&nbsp;indicates</font>
             cates that free access to the server is to be given.  The flags are not orthogonal, in that
             more restrictive flags will often make less restrictive ones redundant.  The flags can gener-<font color="#ffffff" class="whiteout">ally&nbsp;generally</font>
             ally be classed into two categories, those which restrict time service and those which restrict
             informational queries and attempts to do run-time reconfiguration of the server.  One or more
             of the following flags may be specified:

             <b>kod</b>     If access is denied, send a kiss-of-death packet.

             <b>ignore</b>  Ignore all packets from hosts which match this entry.  If this flag is specified nei-<font color="#ffffff" class="whiteout">ther&nbsp;neither</font>
                     ther queries nor time server polls will be responded to.

             <b>noquery</b>
                     Ignore all NTP mode 6 and 7 packets (i.e., information queries and configuration
                     requests) from the source.  Time service is not affected.

             <b>nomodify</b>
                     Ignore all NTP mode 6 and 7 packets which attempt to modify the state of the server
                     (i.e., run time reconfiguration).  Queries which return information are permitted.

             <b>notrap</b>  Decline to provide mode 6 control message trap service to matching hosts.  The trap
                     service is a subsystem of the mode 6 control message protocol which is intended for use
                     by remote event logging programs.

             <b>lowpriotrap</b>
                     Declare traps set by matching hosts to be low priority.  The number of traps a server
                     can maintain is limited (the current limit is 3).  Traps are usually assigned on a
                     first come, first served basis, with later trap requestors being denied service.  This
                     flag modifies the assignment algorithm by allowing low priority traps to be overridden
                     by later requests for normal priority traps.

             <b>noserve</b>
                     Ignore NTP packets whose mode is other than 6 or 7.  In effect, time service is denied,
                     though queries may still be permitted.

             <b>nopeer</b>  Provide stateless time service to polling hosts, but do not allocate peer memory
                     resources to these hosts even if they otherwise might be considered useful as future
                     synchronization partners.

             <b>notrust</b>
                     Treat these hosts normally in other respects, but never use them as synchronization
                     sources.

             <b>limited</b>
                     These hosts are subject to limitation of number of clients from the same net.  Net in
                     this context refers to the IP notion of net (class A, class B, class C, etc.).  Only
                     the first <u>client</u><b>_</b><u>limit</u> hosts that have shown up at the server and that have been active
                     during the last <u>client</u><b>_</b><u>limit</u><b>_</b><u>period</u> seconds are accepted.  Requests from other clients
                     from the same net are rejected.  Only time request packets are taken into account.
                     Query packets sent by the <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a> and <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> programs are not subject to these lim-<font color="#ffffff" class="whiteout">its.&nbsp;limits.</font>
                     its.  A history of clients is kept using the monitoring capability of <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>.  Thus,
                     monitoring is always active as long as there is a restriction entry with the <b>limited</b>
                     flag.

             <b>ntpport</b>
                     This is actually a match algorithm modifier, rather than a restriction flag.  Its pres-<font color="#ffffff" class="whiteout">ence&nbsp;presence</font>
                     ence causes the restriction entry to be matched only if the source port in the packet
                     is the standard NTP UDP port (123).  Both <b>ntpport</b> and <b>non-ntpport</b> may be specified.
                     The <b>ntpport</b> is considered more specific and is sorted later in the list.

             <b>version</b>
                     Ignore these hosts if not the current NTP version.

             Default restriction list entries, with the flags <b>ignore</b>, <b>interface</b>, <b>ntpport</b>, for each of the
             local host's interface addresses are inserted into the table at startup to prevent the server
             from attempting to synchronize to its own time.  A default entry is also always present, though
             if it is otherwise unconfigured; no flags are associated with the default entry (i.e., every-<font color="#ffffff" class="whiteout">thing&nbsp;everything</font>
             thing besides your own NTP server is unrestricted).

     <b>clientlimit</b> <u>limit</u>
             Set the <u>client</u><b>_</b><u>limit</u> variable, which limits the number of simultaneous access-controlled
             clients.  The default value for this variable is 3.

     <b>clientperiod</b> <u>period</u>
             Set the <u>client</u><b>_</b><u>limit</u><b>_</b><u>period</u> variable, which specifies the number of seconds after which a
             client is considered inactive and thus no longer is counted for client limit restriction.  The
             default value for this variable is 3600 seconds.

<b>Reference</b> <b>Clock</b> <b>Support</b>
     The NTP Version 4 daemon supports some three dozen different radio, satellite and modem reference
     clocks plus a special pseudo-clock used for backup or when no other clock source is available.
     Detailed descriptions of individual device drivers and options can be found in the "Reference Clock
     Drivers" page (available as part of the HTML documentation provided in <u>/usr/share/doc/ntp</u>).  Additional
     information can be found in the pages linked there, including the "Debugging Hints for Reference Clock
     Drivers" and "How To Write a Reference Clock Driver" pages.  In addition, support for a PPS signal is
     available as described in the "Pulse-per-second (PPS) Signal Interfacing" page.  Many drivers support
     special line discipline/streams modules which can significantly improve the accuracy using the driver.
     These are described in the "Line Disciplines and Streams Drivers" page.

     A reference clock will generally (though not always) be a radio timecode receiver which is synchronized
     to a source of standard time such as the services offered by the NRC in Canada and NIST and USNO in the
     US.  The interface between the computer and the timecode receiver is device dependent, but is usually a
     serial port.  A device driver specific to each reference clock must be selected and compiled in the
     distribution; however, most common radio, satellite and modem clocks are included by default.  Note
     that an attempt to configure a reference clock when the driver has not been compiled or the hardware
     port has not been appropriately configured results in a scalding remark to the system log file, but is
     otherwise non hazardous.

     For the purposes of configuration, <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> treats reference clocks in a manner analogous to normal NTP
     peers as much as possible.  Reference clocks are identified by a syntactically correct but invalid IP
     address, in order to distinguish them from normal NTP peers.  Reference clock addresses are of the form
     127.127.<u>t</u>.<u>u</u>, where <u>t</u> is an integer denoting the clock type and <u>u</u> indicates the unit number in the range
     0-3.  While it may seem overkill, it is in fact sometimes useful to configure multiple reference clocks
     of the same type, in which case the unit numbers must be unique.

     The <b>server</b> command is used to configure a reference clock, where the <u>address</u> argument in that command
     is the clock address.  The <b>key</b>, <b>version</b> and <b>ttl</b> options are not used for reference clock support.  The
     <b>mode</b> option is added for reference clock support, as described below.  The <b>prefer</b> option can be useful
     to persuade the server to cherish a reference clock with somewhat more enthusiasm than other reference
     clocks or peers.  Further information on this option can be found in the "Mitigation Rules and the
     prefer Keyword" page.  The <b>minpoll</b> and <b>maxpoll</b> options have meaning only for selected clock drivers.
     See the individual clock driver document pages for additional information.

     The <b>fudge</b> command is used to provide additional information for individual clock drivers and normally
     follows immediately after the <b>server</b> command.  The <u>address</u> argument specifies the clock address.  The
     <b>refid</b> and <b>stratum</b> options can be used to override the defaults for the device.  There are two optional
     device-dependent time offsets and four flags that can be included in the <b>fudge</b> command as well.

     The stratum number of a reference clock is by default zero.  Since the <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> daemon adds one to the
     stratum of each peer, a primary server ordinarily displays an external stratum of one.  In order to
     provide engineered backups, it is often useful to specify the reference clock stratum as greater than
     zero.  The <b>stratum</b> option is used for this purpose.  Also, in cases involving both a reference clock
     and a pulse-per-second (PPS) discipline signal, it is useful to specify the reference clock identifier
     as other than the default, depending on the driver.  The <b>refid</b> option is used for this purpose.  Except
     where noted, these options apply to all clock drivers.

   <b>Reference</b> <b>Clock</b> <b>Commands</b>
     <b>server</b> 127.127.<u>t</u>.<u>u</u> [<b>prefer</b>] [<b>mode</b> <u>int</u>] [<b>minpoll</b> <u>int</u>] [<b>maxpoll</b> <u>int</u>]
             This command can be used to configure reference clocks in special ways.  The options are inter-<font color="#ffffff" class="whiteout">preted&nbsp;interpreted</font>
             preted as follows:

             <b>prefer</b>  Marks the reference clock as preferred.  All other things being equal, this host will
                     be chosen for synchronization among a set of correctly operating hosts.  See the
                     "Mitigation Rules and the prefer Keyword" page for further information.

             <b>mode</b> <u>int</u>
                     Specifies a mode number which is interpreted in a device-specific fashion.  For
                     instance, it selects a dialing protocol in the ACTS driver and a device subtype in the
                     parse drivers.

             <b>minpoll</b> <u>int</u>

             <b>maxpoll</b> <u>int</u>
                     These options specify the minimum and maximum polling interval for reference clock mes-<font color="#ffffff" class="whiteout">sages,&nbsp;messages,</font>
                     sages, in seconds to the power of two.  For most directly connected reference clocks,
                     both <b>minpoll</b> and <b>maxpoll</b> default to 6 (64 s).  For modem reference clocks, <b>minpoll</b>
                     defaults to 10 (17.1 m) and <b>maxpoll</b> defaults to 14 (4.5 h).  The allowable range is 4
                     (16 s) to 17 (36.4 h) inclusive.

     <b>fudge</b> 127.127.<u>t</u>.<u>u</u> [<b>time1</b> <u>sec</u>] [<b>time2</b> <u>sec</u>] [<b>stratum</b> <u>int</u>] [<b>refid</b> <u>string</u>] [<b>mode</b> <u>int</u>] [<b>flag1</b> <b>0</b> <b>|</b> <b>1</b>] [<b>flag2</b>
             <b>0</b> <b>|</b> <b>1</b>] [<b>flag3</b> <b>0</b> <b>|</b> <b>1</b>] [<b>flag4</b> <b>0</b> <b>|</b> <b>1</b>]
             This command can be used to configure reference clocks in special ways.  It must immediately
             follow the <b>server</b> command which configures the driver.  Note that the same capability is possi-<font color="#ffffff" class="whiteout">ble&nbsp;possible</font>
             ble at run time using the <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> program.  The options are interpreted as follows:

             <b>time1</b> <u>sec</u>
                     Specifies a constant to be added to the time offset produced by the driver, a fixed-<font color="#ffffff" class="whiteout">point&nbsp;fixedpoint</font>
                     point decimal number in seconds.  This is used as a calibration constant to adjust the
                     nominal time offset of a particular clock to agree with an external standard, such as a
                     precision PPS signal.  It also provides a way to correct a systematic error or bias due
                     to serial port or operating system latencies, different cable lengths or receiver
                     internal delay.  The specified offset is in addition to the propagation delay provided
                     by other means, such as internal DIPswitches.  Where a calibration for an individual
                     system and driver is available, an approximate correction is noted in the driver docu-<font color="#ffffff" class="whiteout">mentation&nbsp;documentation</font>
                     mentation pages.  Note: in order to facilitate calibration when more than one radio
                     clock or PPS signal is supported, a special calibration feature is available.  It takes
                     the form of an argument to the <b>enable</b> command described in <u>Miscellaneous</u> <u>Options</u> page
                     and operates as described in the "Reference Clock Drivers" page.

             <b>time2</b> <u>secs</u>
                     Specifies a fixed-point decimal number in seconds, which is interpreted in a driver-<font color="#ffffff" class="whiteout">dependent&nbsp;driverdependent</font>
                     dependent way.  See the descriptions of specific drivers in the "reference clock
                     drivers" page.

             <b>stratum</b> <u>int</u>
                     Specifies the stratum number assigned to the driver, an integer between 0 and 15.  This
                     number overrides the default stratum number ordinarily assigned by the driver itself,
                     usually zero.

             <b>refid</b> <u>string</u>
                     Specifies an ASCII string of from one to four characters which defines the reference
                     identifier used by the driver.  This string overrides the default identifier ordinarily
                     assigned by the driver itself.

             <b>mode</b> <u>int</u>
                     Specifies a mode number which is interpreted in a device-specific fashion.  For
                     instance, it selects a dialing protocol in the ACTS driver and a device subtype in the
                     parse drivers.

             <b>flag1</b> <b>0</b> <b>|</b> <b>1</b>

             <b>flag2</b> <b>0</b> <b>|</b> <b>1</b>

             <b>flag3</b> <b>0</b> <b>|</b> <b>1</b>

             <b>flag4</b> <b>0</b> <b>|</b> <b>1</b>
                     These four flags are used for customizing the clock driver.  The interpretation of
                     these values, and whether they are used at all, is a function of the particular clock
                     driver.  However, by convention <b>flag4</b> is used to enable recording monitoring data to
                     the <b>clockstats</b> file configured with the <b>filegen</b> command.  Further information on the
                     <b>filegen</b> command can be found in <u>Monitoring</u> <u>Options</u>.

<b>Miscellaneous</b> <b>Options</b>
     <b>broadcastdelay</b> <u>seconds</u>
             The broadcast and multicast modes require a special calibration to determine the network delay
             between the local and remote servers.  Ordinarily, this is done automatically by the initial
             protocol exchanges between the client and server.  In some cases, the calibration procedure may
             fail due to network or server access controls, for example.  This command specifies the default
             delay to be used under these circumstances.  Typically (for Ethernet), a number between 0.003
             and 0.007 seconds is appropriate.  The default when this command is not used is 0.004 seconds.

     <b>driftfile</b> <u>driftfile</u>
             This command specifies the name of the file used to record the frequency offset of the local
             clock oscillator.  If the file exists, it is read at startup in order to set the initial fre-<font color="#ffffff" class="whiteout">quency&nbsp;frequency</font>
             quency offset and then updated once per hour with the current frequency offset computed by the
             daemon.  If the file does not exist or this command is not given, the initial frequency offset
             is assumed zero.  In this case, it may take some hours for the frequency to stabilize and the
             residual timing errors to subside.

             The file format consists of a single line containing a single floating point number, which
             records the frequency offset measured in parts-per-million (PPM).  The file is updated by first
             writing the current drift value into a temporary file and then renaming this file to replace
             the old version.  This implies that <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> must have write permission for the directory the
             drift file is located in, and that file system links, symbolic or otherwise, should be avoided.

     <b>enable</b> [<b>auth</b> | <b>bclient</b> | <b>calibrate</b> | <b>kernel</b> | <b>monitor</b> | <b>ntp</b> | <b>stats</b>]

     <b>disable</b> [<b>auth</b> | <b>bclient</b> | <b>calibrate</b> | <b>kernel</b> | <b>monitor</b> | <b>ntp</b> | <b>stats</b>]
             Provides a way to enable or disable various server options.  Flags not mentioned are unaf-<font color="#ffffff" class="whiteout">fected.&nbsp;unaffected.</font>
             fected.  Note that all of these flags can be controlled remotely using the <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> utility
             program.

             <b>bclient</b>
                     When enabled, this is identical to the <b>broadcastclient</b> command.  The default for this
                     flag is <b>disable</b>.

             <b>calibrate</b>
                     Enables the calibration facility, which automatically adjusts the <b>time1</b> values for each
                     clock driver to display the same offset as the currently selected source or kernel dis-<font color="#ffffff" class="whiteout">cipline&nbsp;discipline</font>
                     cipline signal.  See the "Reference Clock Drivers" page for further information.  The
                     default for this flag is <b>disable</b>.

             <b>kernel</b>  Enables the precision-time kernel support for the <a href="../man2/adjtime.2.html#//apple_ref/doc/man/2/adjtime">adjtime(2)</a> system call, if imple-<font color="#ffffff" class="whiteout">mented.&nbsp;implemented.</font>
                     mented.  Ordinarily, support for this routine is detected automatically when the NTP
                     daemon is compiled, so it is not necessary for the user to worry about this flag.  It
                     is provided primarily so that this support can be disabled during kernel development.
                     The default for this flag is <b>enable</b>.

             <b>monitor</b>
                     Enables the monitoring facility.  See the <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a> program and the <b>monlist</b> command or
                     further information.  The default for this flag is <b>enable</b>.

             <b>ntp</b>     Enables the server to adjust its local clock by means of NTP.  If disabled, the local
                     clock free-runs at its intrinsic time and frequency offset.  This flag is useful in
                     case the local clock is controlled by some other device or protocol and NTP is used
                     only to provide synchronization to other clients.  In this case, the local clock driver
                     can be used to provide this function and also certain time variables for error esti-<font color="#ffffff" class="whiteout">mates&nbsp;estimates</font>
                     mates and leap-indicators.  See the "Reference Clock Drivers" page for further informa-<font color="#ffffff" class="whiteout">tion.&nbsp;information.</font>
                     tion.  The default for this flag is <b>enable</b>.

             <b>stats</b>   Enables the statistics facility.  See the "Monitoring Options" page for further infor-<font color="#ffffff" class="whiteout">mation.&nbsp;information.</font>
                     mation.  The default for this flag is <b>enable</b>.

     <b>logconfig</b> <u>configkeyword</u>
             This command controls the amount and type of output written to the system <a href="../man3/syslog.3.html#//apple_ref/doc/man/3/syslog">syslog(3)</a> facility or
             the alternate <b>logfile</b> log file.  By default, all output is turned on.  All <u>configkeyword</u> key-<font color="#ffffff" class="whiteout">words&nbsp;keywords</font>
             words can be prefixed with `=', `+' and `-', where `=' sets the <a href="../man3/syslog.3.html#//apple_ref/doc/man/3/syslog">syslog(3)</a> priority mask, `+'
             adds and `-' removes messages.  <a href="../man3/syslog.3.html#//apple_ref/doc/man/3/syslog">syslog(3)</a> messages can be controlled in four classes (<b>clock</b>,
             <b>peer</b>, <b>sys</b> and <b>sync</b>).  Within these classes four types of messages can be controlled.  Informa-<font color="#ffffff" class="whiteout">tional&nbsp;Informational</font>
             tional messages (<b>info</b>) control configuration information.  Event messages (<b>events</b>) control log-<font color="#ffffff" class="whiteout">ging&nbsp;logging</font>
             ging of events (reachability, synchronization, alarm conditions).  Statistical output is con-<font color="#ffffff" class="whiteout">trolled&nbsp;controlled</font>
             trolled with the <b>statistics</b> keyword.  The final message group is the status messages.  This
             describes mainly the synchronizations status.  Configuration keywords are formed by concatenat-<font color="#ffffff" class="whiteout">ing&nbsp;concatenating</font>
             ing the message class with the event class.  The <b>all</b> prefix can be used instead of a message
             class.  A message class may also be followed by the <b>all</b> keyword to enable/disable all messages
             of the respective message class.  Thus, a minimal log configuration could look like this:

             logconfig =syncstatus +sysevents

             This would just list the synchronizations state of <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> and the major system events.  For a
             simple reference server, the following minimum message configuration could be useful:

             logconfig =syncall +clockall

             This configuration will list all clock information and synchronization information.  All other
             events and messages about peers, system events and so on is suppressed.

     <b>logfile</b> <u>logfile</u>
             This command specifies the location of an alternate log file to be used instead of the default
             system <a href="../man3/syslog.3.html#//apple_ref/doc/man/3/syslog">syslog(3)</a> facility.

     <b>setvar</b> <u>variable</u> [<b>default</b>]
             This command adds an additional system variable.  These variables can be used to distribute
             additional information such as the access policy.  If the variable of the form <u>name=value</u> is
             followed by the <b>default</b> keyword, the variable will be listed as part of the default system
             variables <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">(ntpq(8)</a> <b>rv</b> command)).  These additional variables serve informational purposes only.
             They are not related to the protocol other that they can be listed.  The known protocol vari-<font color="#ffffff" class="whiteout">ables&nbsp;variables</font>
             ables will always override any variables defined via the <b>setvar</b> mechanism.  There are three
             special variables that contain the names of all variable of the same group.  The <u>sys</u><b>_</b><u>var</u><b>_</b><u>list</u>
             holds the names of all system variables.  The <u>peer</u><b>_</b><u>var</u><b>_</b><u>list</u> holds the names of all peer vari-<font color="#ffffff" class="whiteout">ables&nbsp;variables</font>
             ables and the <u>clock</u><b>_</b><u>var</u><b>_</b><u>list</u> holds the names of the reference clock variables.

     <b>tinker</b> [<b>step</b> <u>step</u> | <b>panic</b> <u>panic</u> | <b>dispersion</b> <u>dispersion</u> | <b>stepout</b> <u>stepout</u> | <b>minpoll</b> <u>minpoll</u> | <b>allan</b>
             <u>allan</u> | <b>huffpuff</b> <u>huffpuff</u>]
             This command can be used to alter several system variables in very exceptional circumstances.
             It should occur in the configuration file before any other configuration options.  The default
             values of these variables have been carefully optimized for a wide range of network speeds and
             reliability expectations.  In general, they interact in intricate ways that are hard to predict
             and some combinations can result in some very nasty behavior.  Very rarely is it necessary to
             change the default values; but, some folks can't resist twisting the knobs anyway and this com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
             mand is for them.  Emphasis added: twisters are on their own and can expect no help from the
             support group.

             All arguments are in floating point seconds or seconds per second.  The <u>minpoll</u> argument is an
             integer in seconds to the power of two.  The variables operate as follows:

             <b>step</b> <u>step</u>
                     The argument becomes the new value for the step threshold, normally 0.128 s.  If set to
                     zero, step adjustments will never occur.  In general, if the intent is only to avoid
                     step adjustments, the step threshold should be left alone and the <b>-x</b> command line
                     option be used instead.

             <b>panic</b> <u>panic</u>
                     The argument becomes the new value for the panic threshold, normally 1000 s.  If set to
                     zero, the panic sanity check is disabled and a clock offset of any value will be
                     accepted.

             <b>dispersion</b> <u>dispersion</u>
                     The argument becomes the new value for the dispersion increase rate, normally .000015.

             <b>stepout</b> <u>stepout</u>
                     The argument becomes the new value for the watchdog timeout, normally 900 s.

             <b>minpoll</b> <u>minpoll</u>
                     The argument becomes the new value for the minimum poll interval used when configuring
                     multicast client, manycast client and , symmetric passive mode association.  The value
                     defaults to 6 (64 s) and has a lower limit of 4 (16 s).

             <b>allan</b> <u>allan</u>
                     The argument becomes the new value for the minimum Allan intercept, which is a parame-<font color="#ffffff" class="whiteout">ter&nbsp;parameter</font>
                     ter of the PLL/FLL clock discipline algorithm.  The value defaults to 1024 s, which is
                     also the lower limit.

             <b>huffpuff</b> <u>huffpuff</u>
                     The argument becomes the new value for the experimental huff-n'-puff filter span, which
                     determines the most recent interval the algorithm will search for a minimum delay.  The
                     lower limit is 900 s (15 m), but a more reasonable value is 7200 (2 hours).  There is
                     no default, since the filter is not enabled unless this command is given.

     <b>trap</b> <u>host</u><b>_</b><u>address</u> [<b>port</b> <u>port</u><b>_</b><u>number</u>] [<b>interface</b> <u>interface</u><b>_</b><u>address</u>]
             This command configures a trap receiver at the given host address and port number for sending
             messages with the specified local interface address.  If the port number is unspecified, a
             value of 18447 is used.  If the interface address is not specified, the message is sent with a
             source address of the local interface the message is sent through.  Note that on a multihomed
             host the interface used may vary from time to time with routing changes.

             The trap receiver will generally log event messages and other information from the server in a
             log file.  While such monitor programs may also request their own trap dynamically, configuring
             a trap receiver will ensure that no messages are lost when the server is started.

<b>FILES</b>
     /etc/ntp.conf   the default name of the configuration file
     ntp.keys        private MD5 keys
     ntpkey          RSA private key
     ntpkey_<u>host</u>     RSA public key
     ntp_dh          Diffie-Hellman agreement parameters

<b>SEE</b> <b>ALSO</b>
     <a href="../man8/ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>, <a href="../man8/ntpdc.8.html#//apple_ref/doc/man/8/ntpdc">ntpdc(8)</a>, <a href="../man8/ntpq.8.html#//apple_ref/doc/man/8/ntpq">ntpq(8)</a>

     In addition to the manual pages provided, comprehensive documentation is available on the world wide
     web at <a href="http://www.ntp.org/">http://www.ntp.org/</a>  A snapshot of this documentation is available in HTML format in
     <u>/usr/share/doc/ntp</u>.

     David L. Mills, <u>Network</u> <u>Time</u> <u>Protocol</u> <u>(Version</u> <u>3)</u>, RFC1305.

<b>BUGS</b>
     The syntax checking is not picky; some combinations of ridiculous and even hilarious options and modes
     may not be detected.

     The <u>ntpkey</u><b>_</b><u>host</u> files are really digital certificates.  These should be obtained via secure directory
     services when they become universally available.

BSD                              June 8, 2006                              BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/ntp.conf.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/ntp.conf.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/ntp.conf.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

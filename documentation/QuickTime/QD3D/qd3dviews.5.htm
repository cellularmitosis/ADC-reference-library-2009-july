<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Rendering an Image</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=3120"> </A><A NAME="41773"> </A>Rendering an Image</H1><P CLASS="T1.Text1"><A NAME="pgfId=3122"> </A><A NAME="marker=3121"> </A>Once you have created and configured a view, you can use it to render an image of a model. To do so, you need to enter into the rendering state by calling the <TT CLASS="cv">Q3View_StartRendering</TT> function. Then you specify the model to be drawn and call <TT CLASS="cv">Q3View_EndRendering</TT>. Because the renderer might not have had sufficient memory to complete the rendering when you call <TT CLASS="cv">Q3View_EndRendering</TT>, you might need to respecify the model, to give the renderer another pass at the model's data. As a result, you almost always call <TT CLASS="cv">Q3View_StartRendering</TT> and <TT CLASS="cv">Q3View_EndRendering</TT> in a <B CLASS="bold">rendering loop,</B> shown in outline in <A HREF="qd3dviews.5.htm#17083" CLASS="XRef">Listing&nbsp;1</A>.</P><P CLASS="L.Listing"><A NAME="pgfId=3127"> </A>Listing&nbsp;1<A NAME="17083"> </A>Rendering a model</P><CODE CLASS="Cv.Code"><A NAME="pgfId=8741"> </A>Q3View_StartRendering(myView);<BR>do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;/*submit the model here*/<BR>} while (Q3View_EndRendering(myView) == <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQ3ViewStatusRetraverse);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3129"> </A>The <TT CLASS="cv">Q3View_EndRendering</TT> function returns a view status value that indicates the status of the rendering process. If <TT CLASS="cv">Q3View_EndRendering</TT> returns the value <TT CLASS="cv">kQ3ViewStatusRetraverse</TT>, you should reenter your rendering loop. If <TT CLASS="cv">Q3View_EndRendering</TT> returns <TT CLASS="cv">kQ3ViewStatusDone</TT>, <TT CLASS="cv">kQ3ViewStatusError</TT>, or <TT CLASS="cv">kQ3ViewStatusCancelled</TT>, you should exit the loop.</P><P CLASS="T1.Text1"><A NAME="pgfId=3134"> </A><A NAME="marker=3130"> </A>As you know, QuickDraw&nbsp;3D supports immediate mode, retained mode, and mixed mode rendering. You use a rendering loop for all these rendering modes, but they differ in how you create and draw the objects in a model. To use retained mode rendering, you let QuickDraw&nbsp;3D allocate memory to hold the data associated with a particular object or group of objects. For example, to render a box in retained mode, you must first create the box by calling the <TT CLASS="cv">Q3Box_New</TT> function. Then you draw the box by calling the <TT CLASS="cv">Q3Geometry_Submit</TT> function, as illustrated in <A HREF="qd3dviews.5.htm#23986" CLASS="XRef">Listing&nbsp;2</A>.<A NAME="marker=3141"> </A></P><P CLASS="L.Listing"><A NAME="pgfId=3143"> </A>Listing&nbsp;2<A NAME="23986"> </A>Creating and rendering a retained object</P><CODE CLASS="Cv.Code"><A NAME="pgfId=8745"> </A>TQ3BoxData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBoxData;<BR>TQ3GeometryObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBox;<BR><BR>Q3Point3D_Set(&amp;myBoxData.origin, 1.0, 1.0, 1.0);<BR>Q3Vector3D_Set(&amp;myBoxData.orientation, 0, 2.0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.minorAxis, 2.0, 0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.majorAxis, 0, 0, 2.0);<BR>myBox = Q3Box_New(&amp;myBoxData);<BR><BR>Q3View_StartRendering(myView);<BR>do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Geometry_Submit(myBox, myView);<BR>} while (Q3View_EndRendering(myView) == <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQ3ViewStatusRetraverse);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3145"> </A>In general, you use retained mode rendering when much of the model remains unchanged from frame to frame. For retained mode rendering, you can use the following routines inside a rendering loop:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=8749"> </A>Q3Style_Submit<BR>Q3Geometry_Submit<BR>Q3Transform_Submit<BR>Q3Group_Submit<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3148"> </A><A NAME="marker=8751"> </A>To use immediate mode rendering, you allocate memory for an object yourself and draw the object using an immediate mode drawing routine, as illustrated in <A HREF="qd3dviews.5.htm#32541" CLASS="XRef">Listing&nbsp;3</A>.<A NAME="marker=3152"> </A></P><P CLASS="L.Listing"><A NAME="pgfId=3154"> </A>Listing&nbsp;3<A NAME="32541"> </A>Creating and rendering an immediate object</P><CODE CLASS="Cv.Code"><A NAME="pgfId=8755"> </A>TQ3BoxData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBoxData;<BR><BR>Q3Point3D_Set(&amp;myBoxData.origin, 1.0, 1.0, 1.0);<BR>Q3Vector3D_Set(&amp;myBoxData.orientation, 0, 2.0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.minorAxis, 2.0, 0, 0);<BR>Q3Vector3D_Set(&amp;myBoxData.majorAxis, 0, 0, 2.0);<BR></CODE><CODE CLASS="Cv.Code"><A NAME="pgfId=8759"> </A>Q3View_StartRendering(myView);<BR>do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Box_Submit(myBoxData, myView);<BR>} while (Q3View_EndRendering(myView) == <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQ3ViewStatusRetraverse);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3156"> </A>In general, you use immediate mode when your application does not need to retain the geometric data for subsequent use.<A NAME="marker=3157"> </A><A NAME="marker=3158"> </A></P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
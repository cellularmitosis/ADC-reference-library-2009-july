<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=HTML">
<title>IOUSBInterfaceInterface192</title>
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/HardwareDrivers/index.html#//apple_ref/doc/uid/TP30001281-TP40003576" target="_top">Hardware & Drivers</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/iokit_fw" target="_top">I/O Kit Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOUSBInterfaceInterface192">IOUSBInterfaceInterface192</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<!-- a --><p>IOUSBInterfaceInterface190<!-- /a --></p>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOUSBLib.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>The object you use to access a USB device interface from user space, returned by the IOUSBFamily
version 1.9.2 and above.
<!-- end abstract --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The functions listed here include all of the functions defined for the IOUSBInterfaceInterface, 
IOUSBInterfaceInterface182, IOUSBInterfaceInterface183, IOUSBInterfaceInterface190, and some new 
functions that are available on Mac OS X version 10.2.3 and later.
<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a></tt></dt>
<dd><p>Allocates a buffer of type bufferType.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer" target="_top">LowLatencyDestroyBuffer</a></tt></dt>
<dd><p>Releases a buffer that was previously allocated using LowLatencyCreateBuffer().
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyReadIsochPipeAsync" target="_top">LowLatencyReadIsochPipeAsync</a></tt></dt>
<dd><p>Performs an asynchronous read on a isochronous pipe and updates the frame list at primary interrupt time.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyWriteIsochPipeAsync" target="_top">LowLatencyWriteIsochPipeAsync</a></tt></dt>
<dd><p>Performs an asynchronous write on an isochronous pipe and updates the frame list at primary interrupt time.
</p></dd>
</dl>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer;  indexgroup=USB ;   name=LowLatencyCreateBuffer --><a name="//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LowLatencyCreateBuffer">LowLatencyCreateBuffer</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Allocates a buffer of type bufferType.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LowLatencyCreateBuffer</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="type">*</span><span class="param">buffer</span>,
    <!-- a --><span class="type">IOByteCount</span><!-- /a --> <span class="param">size</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">bufferType</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to the IOUSBInterfaceInterface.</p></dd>
<dt><code>buffer</code></dt>
<dd><p>Pointer to a pointer that will receive the pointer to the buffer created by this call.</p></dd>
<dt><code>size</code></dt>
<dd><p>The size of the buffer to be created in bytes.</p></dd>
<dt><code>bufferType</code></dt>
<dd><p>Type of buffer: one of kUSBLowLatencyWriteBuffer, kUSBLowLatencyReadBuffer, 
or kUSBLowLatencyFrameListBuffer. See the documentation for USB.h.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if successful, kIOReturnNoDevice if there is no connection to an IOService, or
kIOReturnNotOpen if the interface is not open for exclusive access.  If the buffer can't be allocated, 
it will return kIOReturnNoMemory.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This function allocates a buffer of type bufferType. The buffer can then be used with 
the <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyReadIsochPipeAsync" target="_top">LowLatencyReadIsochPipeAsync</a>  or <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyWriteIsochPipeAsync" target="_top">LowLatencyWriteIsochPipeAsync</a>  calls.
</p>
<p>The LowLatencyReadIsochPipeAsync or LowLatencyWriteIsochPipeAsync calls 
require the clients to pre-allocate the data buffer and the frame list buffer parameters. This call 
is used to allocate those buffers. After the client is done using the buffers, they need to be 
released through the <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer" target="_top">LowLatencyDestroyBuffer</a>  call.
</p>
<p>If the buffer is to be used for reading data, the type passed in should be kUSBLowLatencyReadBuffer.
If the buffer is to be used for writing data, the type should be kUSBLowLatencyWriteBuffer. For
frame list data, the type should be kUSBLowLatencyFrameListBuffer.
</p>
<p>The client can create multiple data and frame list buffers, or it can allocate a large buffer and 
then use only a portion of the buffer in calls to <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyReadIsochPipeAsync" target="_top">LowLatencyReadIsochPipeAsync</a>  
or <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyWriteIsochPipeAsync" target="_top">LowLatencyWriteIsochPipeAsync</a> .
</p>
<p>The interface must be open for the pipe to exist.
<!-- end discussion -->
</p>
<p></p>
<dl>
<dt><i>Availability</i></dt>
<dd>This function is only available with IOUSBInterfaceInterface192 and above.
</dd>
</dl>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer;  indexgroup=USB ;   name=LowLatencyDestroyBuffer --><a name="//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LowLatencyDestroyBuffer">LowLatencyDestroyBuffer</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Releases a buffer that was previously allocated using LowLatencyCreateBuffer().
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LowLatencyDestroyBuffer</span><!-- /a -->) (
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buffer</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to the IOUSBInterfaceInterface.</p></dd>
<dt><code>buffer</code></dt>
<dd><p>Pointer to the buffer previously allocated using LowLatencyCreateBuffer().</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if successful, kIOReturnNoDevice if there is no connection to an IOService, or
kIOReturnNotOpen if the interface is not open for exclusive access.  If the buffer was not previously 
allocated using LowLatencyCreateBuffer() it will return kIOReturnBadArgument. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The interface must be open for the pipe to exist.
<!-- end discussion -->
</p>
<p></p>
<dl>
<dt><i>Availability</i></dt>
<dd>This function is only available with IOUSBInterfaceInterface192 and above.
</dd>
</dl>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyReadIsochPipeAsync;  indexgroup=USB ;   name=LowLatencyReadIsochPipeAsync --><a name="//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyReadIsochPipeAsync"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LowLatencyReadIsochPipeAsync">LowLatencyReadIsochPipeAsync</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Performs an asynchronous read on a isochronous pipe and updates the frame list at primary interrupt time.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LowLatencyReadIsochPipeAsync</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">UInt8</span><!-- /a --> <span class="param">pipeRef</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buf</span>,
    <!-- a --><span class="type">UInt64</span><!-- /a --> <span class="param">frameStart</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">numFrames</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">updateFrequency</span>,
    <a href="../../../USB_h/index.html#//apple_ref/c/tdef/IOUSBLowLatencyIsocFrame" target="_top" class="type"><span class="type">IOUSBLowLatencyIsocFrame</span></a> <span class="type">*</span><span class="param">frameList</span>, 
    <a href="../../../IOKitLib_h/index.html#//apple_ref/c/tdef/IOAsyncCallback1" target="_top" class="type"><span class="type">IOAsyncCallback1</span></a> <span class="param">callback</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">refcon</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to the IOUSBInterfaceInterface.</p></dd>
<dt><code>pipeRef</code></dt>
<dd><p>Index for the desired pipe (1 - <a href="../IOUSBInterfaceInterface/index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface/GetNumEndpoints" target="_top">GetNumEndpoints</a> ).</p></dd>
<dt><code>buf</code></dt>
<dd><p>Buffer to hold the data, previously allocated with a call to <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a> .
using a kUSBLowLatencyReadBuffer type.</p></dd>
<dt><code>frameStart</code></dt>
<dd><p>The bus frame number on which to start the read (obtained from GetBusFrameNumber).</p></dd>
<dt><code>numFrames</code></dt>
<dd><p>The number of frames for which to transfer data.</p></dd>
<dt><code>updateFrequency</code></dt>
<dd><p>Specifies how often, in milliseconds, the frame list data should be updated. Valid 
range is 0 - 8. If 0, it means that the framelist should be updated at the end of the transfer.</p></dd>
<dt><code>frameList</code></dt>
<dd><p>A pointer to an array of IOUSBLowLatencyIsocFrame structures describing the frames.</p></dd>
<dt><code>callback</code></dt>
<dd><p>An IOAsyncCallback1 method. A message addressed to this callback is posted to 
the Async port upon completion.</p></dd>
<dt><code>refCon</code></dt>
<dd><p>Arbitrary pointer which is passed as a parameter to the callback routine.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if successful, kIOReturnNoDevice if there is no connection to an IOService, or
kIOReturnNotOpen if the interface is not open for exclusive access.  Will return kIOUSBLowLatencyBufferNotPreviouslyAllocated 
or kIOUSBLowLatencyFrameListNotPreviouslyAllocated if the buffer or the frameList were 
not previously allocated using LowLatencyCreateBuffer().

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The LowLatencyReadIsochPipeAsync and LowLatencyWriteIsochPipeAsync 
calls are analogous to <a href="../IOUSBInterfaceInterface/index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface/ReadIsochPipeAsync" target="_top">ReadIsochPipeAsync</a>  and <a href="../IOUSBInterfaceInterface/index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface/WriteIsochPipeAsync" target="_top">WriteIsochPipeAsync</a> . They differ in that the frame
list data is updated at <em>primary interrupt time</em>. This means that the client can inspect the
frStatus and frActCount fields as soon as the transaction completes, without having to wait for the 
callback to happen (depending on the value of updateFrequency). The callback will still happen when 
all the frames have been received.
</p>
<p>The client can specify how often the USB stack should update the frame list data by specifying the 
updateFrequency: this value can range from 0 - 8. If the value is between 1 and 8, the 
frame list will be updated every updateFrequency milliseconds. If the value is 0, the 
frame list will only be updated once all the frames in the transfer have been received. For example,
consider a transfer with numFrames equal to 64. If the update frequency is 4, the frame 
list data will be updated every 4 milliseconds. If the update frequency is 0, the frame list will 
only be updated at the end of the transfer, after the 64 frames have been sent or received. The 
difference between using an update frequency of 0 and using the non-low latency isoch calls is that 
in the former case, the frame list will be updated at primary interrupt time, while in the latter, 
it will be updated at secondary interrupt time. Regardless of the value of updateFrequency, 
the frame list will <em>always</em> be updated on the last frame of a transfer.
</p>
<p>The rationale for adding this call is that because completion routines run on the USB Workloop, they 
can be scheduled to run a number of milliseconds after the USB transfer has finished. This latency 
is variable and depends on what other higher priority threads are running on the system. This latency 
presents a problem for applications, such as audio processing, that depend on receiving data, 
processing it, and sending it back out, and need to do this as fast as possible. Since applications 
that use isochronous data know when the data should be available, they can look at the frame list at 
the expected time and note the frActCount and frStatus (and frTimeStamp
if needed) and determine how many valid bytes are in their data buffer and whether there was an 
error. They can then access their data buffer and process the actual data.
</p>
<p>In order to update the frame list at primary interrupt time and to allow the client to see that 
update, the frame list buffer needs to be shared between the kernel and user space. The same thing 
applies to the data buffer. This is a difference between the low latency isoch calls and the regular 
isoch calls. The <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a>  call is used to pre-allocate the buffers. The 
client <em>must</em> use that call to allocate the data and the frame list buffers. The client can 
pass a portion of the buffer that was previously allocated. The USB stack will range-check the data 
and frame list buffers to make sure they are within the ranges of the buffers previously allocated. 
This allows the client, if it so desires, to allocate a large data buffer and pass portions of it to 
the read or write calls. The same applies to the frame list buffers. Of course, the client can also 
pre-allocate several data buffers and several frame list buffers and use those for each transfer. 
Once the transfer completes, the buffers can be reused in subsequent calls. When all transfers are 
finished, the client needs to call <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer" target="_top">LowLatencyDestroyBuffer</a>  for each buffer that was 
created with LowLatencyCreateBuffer.
</p>
<p>The interface must be open for the pipe to exist. The buf pointer and the frameList 
pointer need to be pre-allocated using <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a> . 
After using them, they should be freed using <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer" target="_top">LowLatencyDestroyBuffer</a>.
<!-- end discussion -->
</p>
<p></p>
<dl>
<dt><i>Availability</i></dt>
<dd>This function is only available with IOUSBInterfaceInterface192 and above.
</dd>
</dl>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyWriteIsochPipeAsync;  indexgroup=USB ;   name=LowLatencyWriteIsochPipeAsync --><a name="//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyWriteIsochPipeAsync"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LowLatencyWriteIsochPipeAsync">LowLatencyWriteIsochPipeAsync</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Performs an asynchronous write on an isochronous pipe and updates the frame list at primary interrupt time.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LowLatencyWriteIsochPipeAsync</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">UInt8</span><!-- /a --> <span class="param">pipeRef</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buf</span>,
    <!-- a --><span class="type">UInt64</span><!-- /a --> <span class="param">frameStart</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">numFrames</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">updateFrequency</span>,
    <a href="../../../USB_h/index.html#//apple_ref/c/tdef/IOUSBLowLatencyIsocFrame" target="_top" class="type"><span class="type">IOUSBLowLatencyIsocFrame</span></a> <span class="type">*</span><span class="param">frameList</span>, 
    <a href="../../../IOKitLib_h/index.html#//apple_ref/c/tdef/IOAsyncCallback1" target="_top" class="type"><span class="type">IOAsyncCallback1</span></a> <span class="param">callback</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">refcon</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to the IOUSBInterfaceInterface.</p></dd>
<dt><code>pipeRef</code></dt>
<dd><p>Index for the desired pipe (1 - <a href="../IOUSBInterfaceInterface/index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface/GetNumEndpoints" target="_top">GetNumEndpoints</a> ).</p></dd>
<dt><code>buf</code></dt>
<dd><p>Buffer to hold the data, previously allocated with <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a>  
using a kUSBLowLatencyWriteBuffer type.</p></dd>
<dt><code>frameStart</code></dt>
<dd><p>The bus frame number on which to start the write (obtained from GetBusFrameNumber).</p></dd>
<dt><code>numFrames</code></dt>
<dd><p>The number of frames for which to transfer data.</p></dd>
<dt><code>updateFrequency</code></dt>
<dd><p>Specifies how often, in milliseconds, should the frame list data be updated. Valid 
range is 0 - 8. If 0, it means that the framelist should be updated at the end of the transfer.</p></dd>
<dt><code>frameList</code></dt>
<dd><p>A pointer to an array of IOUSBLowLatencyIsocFrame structures describing the frames.</p></dd>
<dt><code>callback</code></dt>
<dd><p>An IOAsyncCallback1 method. A message addressed to this callback is posted to 
the Async port upon completion.</p></dd>
<dt><code>refCon</code></dt>
<dd><p>Arbitrary pointer which is passed as a parameter to the callback routine.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if successful, kIOReturnNoDevice if there is no connection to an IOService, or
kIOReturnNotOpen if the interface is not open for exclusive access.  Will return kIOUSBLowLatencyBufferNotPreviouslyAllocated 
or kIOUSBLowLatencyFrameListNotPreviouslyAllocated if the buffer or the frameList were 
not previously allocated using LowLatencyCreateBuffer().

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyReadIsochPipeAsync" target="_top">LowLatencyReadIsochPipeAsync</a>  and LowLatencyWriteIsochPipeAsync 
calls are analogous to <a href="../IOUSBInterfaceInterface/index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface/ReadIsochPipeAsync" target="_top">ReadIsochPipeAsync</a>  and <a href="../IOUSBInterfaceInterface/index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface/WriteIsochPipeAsync" target="_top">WriteIsochPipeAsync</a> . 
They differ in that the frame list data is updated at <em>primary interrupt time</em>. This means that 
the client can inspect the frStatus and frActCount fields as soon as the 
transaction completes, without having to wait for the callback to happen (depending on the value of 
updateFrequency). The callback will still happen when the all the frames have been received.
</p>
<p>The client can specify how often the USB stack should update the frame list data by specifying the 
updateFrequency: this value can range from 0 - 8. If the value is between 1 and 8, the 
frame list will be updated every updateFrequency milliseconds. If the value is 0, the 
frame list will only be updated once all the frames in the transfer have been received. For example, 
consider a transfer with numFrames equal to 64. If the update frequency is 4, the frame 
list data will be updated every 4 milliseconds. If the update frequency is 0, the frame list will 
only be updated at the end of the transfer, after the 64 frames have been sent or received. The 
difference between using an update frequency of 0 and using the non-low latency isoch calls is that 
in the former case, the frame list will be updated at primary interrupt time, while in the latter, 
it will be updated at secondary interrupt time. Regardless of the value of updateFrequency, 
the frame list will <em>always</em> be updated on the last frame of a transfer.
</p>
<p>The rationale for adding this call is that because completion routines run on the USB Workloop, 
they can be scheduled to run a number of milliseconds after the USB transfer has finished. This 
latency is variable and depends on what other higher priority threads are running on the system. 
This latency presents a problem for applications, such as audio processing, that depend on receiving 
data, processing it, and sending it back out, and need to do this as fast as possible. Since applications 
that use isochronous data know when the data should be available, they can look at the frame list at 
the expected time and note the frActCount and frStatus (and frTimeStamp 
if needed) and determine how many valid bytes are in their data buffer and whether there was an error. 
They can then access their data buffer and process the actual data.
</p>
<p>In order to update the frame list at primary interrupt time and to allow the client to see that 
update, the frame list buffer needs to be shared between the kernel and user space. The same thing 
applies to the data buffer. This is a difference between the low latency isoch calls and the regular 
isoch calls. The <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a>  call is used to pre-allocate the buffers. The 
<em>client</em> must use that call to allocate the data and the frame list buffers. The client can 
pass a portion of the buffer that was previously allocated. The USB stack will range-check the data 
and frame list buffers to make sure they are within the ranges of the buffers previously allocated. 
This allows the client, if it so desires, to allocate a large data buffer and pass portions of it to 
the read or write calls. The same applies to the frame list buffers. Of course, the client can also 
pre-allocate several data buffers and several frame list buffers and use those for each transfer. 
Once the transfer completes, the buffers can be reused in subsequent calls. When all transfers are 
finished, the client needs to call <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer" target="_top">LowLatencyDestroyBuffer</a>  for each buffer that was 
created with LowLatencyCreateBuffer.
</p>
<p>The interface must be open for the pipe to exist. The buf pointer and the frameList 
pointer need to be pre-allocated using <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyCreateBuffer" target="_top">LowLatencyCreateBuffer</a> . After using them, they 
should be freed using <a href="index.html#//apple_ref/doc/com/intfm/IOUSBInterfaceInterface192/LowLatencyDestroyBuffer" target="_top">LowLatencyDestroyBuffer</a>.
<!-- end discussion -->
</p>
<p></p>
<dl>
<dt><i>Availability</i></dt>
<dd>This function is only available with IOUSBInterfaceInterface192 and above.
</dd>
</dl>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/IOKit/IOUSBLib_h/Classes/IOUSBInterfaceInterface192/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/IOKit/IOUSBLib_h/Classes/IOUSBInterfaceInterface192/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/IOKit/IOUSBLib_h/Classes/IOUSBInterfaceInterface192/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&nbsp;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2009-02-23
</div>
<!-- headerDoc=cl; uid=//apple_ref/c/cl/IOUSBInterfaceInterface192; indexgroup=USB ; name=IOUSBInterfaceInterface192--><a name="//apple_ref/c/cl/IOUSBInterfaceInterface192"></a>
</body>
</html>

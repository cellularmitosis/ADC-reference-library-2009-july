<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Obtaining Information About Available Sound Features (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.14.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.14.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.16.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H3.Heading3"><A NAME="pgfId=3652"> </A><A NAME="33153"> </A>Obtaining Information About Available Sound Features<A NAME="marker=785"> </A><A NAME="marker=786"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=3671"> </A>You can use the <TT CLASS="cv">Gestalt</TT> function to obtain information about a number of hardware- and software-related sound features. For instance, you can use <TT CLASS="cv">Gestalt</TT> to determine whether a machine can produce stereophonic sounds and whether it can mix both left and right channels of sound on the internal speaker. Many applications don't need to call <TT CLASS="cv">Gestalt</TT> to get this kind of information if they rely on the Sound Manager's ability to produce reasonable sounding output on whatever audio hardware is available. Other applications, however, do need to use <TT CLASS="cv">Gestalt</TT> to get this information if they depend on specific hardware or software features that are not available on all Macintosh computers.</P><P CLASS="T1.Text1"><A NAME="pgfId=3673"> </A>To get sound-related information from <TT CLASS="cv">Gestalt</TT>, pass it the <TT CLASS="cv">gestaltSoundAttr</TT> selector.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=9763"> </A>CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltSoundAttr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'snd ';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sound attributes}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=2957"> </A>If <TT CLASS="cv">Gestalt</TT> returns successfully, it passes back to your application a 32-bit value that represents a bit pattern. The following constants define the bits currently set or cleared by <TT CLASS="cv">Gestalt</TT>:</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=9767"> </A>CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltStereoCapability&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in hw can play stereo sounds}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltStereoMixing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in hw mixes stereo to mono}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltSoundIOMgrPresent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sound input routines available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltBuiltInSoundInput&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in input hw available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltHasSoundInputDevice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 5;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sound input device available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltPlayAndRecord&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 6;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in hw can play while recording}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestalt16BitSoundIO &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 7;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in hw can handle 16-bit data}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltStereoInput &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in hw can record stereo sounds}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltLineLevelInput &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{built-in input hw needs line level}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltSndPlayDoubleBuffer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{play from disk routines available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestaltMultiChannels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 11;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{multiple channels of sound supported}<BR>&nbsp;&nbsp;&nbsp;&nbsp;gestalt16BitAudioSupport &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 12;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{16-bit audio data supported}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3186"> </A>If the bit <TT CLASS="cv">gestaltStereoCapability</TT> is <TT CLASS="cv">TRUE</TT>, the built-in hardware can play stereo sounds. The bit <TT CLASS="cv">gestaltStereoMixing</TT> indicates that the sound hardware of the machine mixes both left and right channels of stereo sound into a single audio signal for the internal speaker. <A target="doc" HREF="imsoundmgr.15.htm#23003" CLASS="XRef">Listing 1-19</A> demonstrates the use of the <TT CLASS="cv">Gestalt</TT> function to determine if a machine can play stereo sounds.</P><P CLASS="L.Listing"><A NAME="pgfId=2324"> </A>Listing&nbsp;19 <A NAME="23003"> </A>Determining if stereo capability is available</P><CODE CLASS="Cv.Code"><A NAME="pgfId=9771"> </A>FUNCTION MyHasStereo: Boolean;<BR>VAR<BR>&nbsp;&nbsp;&nbsp;&nbsp;myFeature:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr;<BR>BEGIN<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr := Gestalt(gestaltSoundAttr, myFeature);<BR>&nbsp;&nbsp;&nbsp;&nbsp;IF myErr = noErr THEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{test stereo capability bit}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyHasStereo := BTst(myFeature, gestaltStereoCapability)<BR>&nbsp;&nbsp;&nbsp;&nbsp;ELSE<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyHasStereo := FALSE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{no sound features available}<BR>END;<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=2092"> </A><A NAME="marker=9773"> </A>As shown in the chapter <A target="doc" HREF="imintrosound.htm" CLASS="XRef">&quot;Introduction to Sound on the Macintosh,&quot;</A> you can determine whether your application can record by testing the <TT CLASS="cv">gestaltHasSoundInputDevice</TT> bit. To determine whether a built-in sound input device is available, you can test the <TT CLASS="cv">gestaltBuiltInSoundInput</TT> bit. The <TT CLASS="cv">gestaltSoundIOMgrPresent</TT> bit indicates whether the sound input routines are available. Because the <TT CLASS="cv">gestaltHasSoundInputDevice</TT> bit is not set if the routines are not available, only sound input device drivers should need to use the <TT CLASS="cv">gestaltSoundIOMgrPresent</TT> bit.</P><P CLASS="T1.Text1"><A NAME="pgfId=4675"> </A>For a complete description of the response bits set by <TT CLASS="cv">Gestalt</TT>, see <A target="doc" HREF="imsoundmgr.39.htm#35591" CLASS="XRef">&quot;Gestalt Selector and Response Bits&quot;</A>.<A NAME="marker=787"> </A><A NAME="marker=788"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.14.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.14.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.16.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
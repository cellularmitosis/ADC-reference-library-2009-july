<HTML>		<HEAD>		<TITLE>					</TITLE>		</HEAD>	<BODY bgcolor="#ffffff"><!--start of banner --><!-- #include virtual="/techpubs/navbar" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>XML Reference</font><br><br><!--end of path --><a href="XMLTOC.html"><img src="../../../../../images/up.gif" border="0" alt="up"></a><br><h1><FONT COLOR="#000066">XML	</FONT></h1><br><blockquote><dl><dt><b>Package: </b></dt><dd>com.apple.webobjects.xml</dd></dl></blockquote><HR SIZE=4><br><h2>Introduction</h2><p>The XML framework consists of two main classes- <a href="Classes/WOXMLCoder.html#WOContext">WOXMLCoder</a> and  <a href="Classes/WOXMLDecoder.html#WOContext">WOXMLDecoder</a>-which can encode anddecode objects as XML. These classes can be used to archive andunarchive object data, or to parse and/or generate XML obtainedfrom or destined for an external source (such as the World WideWeb). When working with such "foreign" XML, you describe theXML elements and properties and their mapping to objects in an XML-format"mapping model" that you can create with either a text editoror an XML editor.</p><p>The mapping model provides greater control over the decodingprocess and is typically used when you are encoding and decodingXML that is destined for, or originates from, an external source.When the WOXMLCoder and WOXMLDecoder areused as an archiving mechanism, the mapping model is usually notnecessary. See  <a href="#BAAJGIAH">"The Format of the Mapping Model" </a> for more informationon the contents and structure of the mapping model.</p><p>When archiving and unarchiving custom objects using the WOXMLCoder and WOXMLDecoder withouta mapping model, your custom classes need to:</p><ul><li>implement the single method declared in the  <a href="Protocols/WOXMLCoding.html#WOContext">WOXMLCoding</a> interface(your implementation of this method is where you encode the customclass's instance variables)</li><li>implement the single-argument constructor described in the WOXMLDecoder classintroduction</li></ul><p>You don't need to do the above if the object you are archivingand unarchiving-as well as any encapsulated objects-are an instanceof String, Number (or a subclass, providing that the subclass doesn'tadd any new instance variables), NSArray, NSDictionary, NSDate,NSData, or EOEnterpriseObject (or a subclass, providing that allinstance variables are either attributes or relationships). Youalso don't need to implement the above if you are working witha mapping model.</p><p>Exceptions raised by the underlying SAX parser are, for simplicity'ssake, wrapped in a  <a href="Classes/WOXMLException.html#WOContext">WOXMLException</a> object, greatly reducingthe number of exceptions your code needs to catch.</p><br><a name = "BAAJGIAH"></a><h2>The Format of the MappingModel</h2><p>The mapping model is a text file-created manually with atext editor or an XML editor-that consists of one or more entity elements,each of which can enclose zero or more property elements,all enclosed within a single model element.</p><p>The following is a simple mapping model:</p><blockquote><pre>&lt;model&gt;    &lt;entity name="Command" xmlTag="command"&gt;        &lt;property name="qty" xmlTag="quantity" attribute="YES"/&gt;        &lt;property name="movie" xmlTag="movie"/&gt;        &lt;property name="customer" xmlTag="customer"/&gt;    &lt;/entity&gt;    &lt;entity name="MyMovie" xmlTag="movie"&gt;        &lt;property name="title" xmlTag="name" attribute="YES"/&gt;        &lt;property name="dateReleased" xmlTag="date"&gt;        &lt;property name="roles" xmlTag="role"&gt;        &lt;property name="category" xmlTag="cat"/&gt;    &lt;/entity&gt;    &lt;entity name="com.apple.yellow.foundation.EOGenericRecord" xmlTag="role"&gt;        &lt;property name="roleName" xmlTag="name" attribute="YES"/&gt;    &lt;/entity&gt;&lt;/model&gt;</pre></blockquote><br><p>When creating a mapping model, be aware that mappings mustbe unique for a given property when decoding (that is, you cannothave two mappings for the same property). The same applies for XML tagswhen encoding: you cannot have two mappings for the same XML tag.</p><br><h2>The "model" Tag</h2><p>The model tag has no attributes. </p><br><h2>The "entity" Tag</h2><p>The entity tag has two requiredattributes and a number of optional ones:</p><dl><dt>name=<em>property</em></dt><dd>(required) The name of the property on the key-valuecoding side (the name of the object, attribute, or dictionary keyto which the XML data is to be mapped).</dd></dl><dl><dt>xmlTag=<em>tag</em></dt><dd>(required) The XML tag.</dd></dl><dl><dt>unmappedTagsKey=<em>key</em></dt><dd>(optional) The name of the property on the key-valuecoding side to be used when, while parsing the XML for the entity,a tag is encountered for which there is no specified mapping inthe mapping model.</dd></dl><dl><dt>ignoreUnmappedTags=<code>"YES"| "NO"</code></dt><dd>(optional) "YES" causes a  <a href="Classes/WOXMLException.html#WOContext">WOXMLException</a> to be thrown if <code>unmappedTagsKey</code> isn'tspecified and, while parsing the XML for the entity, a tag is encounteredfor which there is no specified mapping in the mapping model. Notethat an exception isn't thrown if the object being decoded isan NSDictionary.</dd></dl><dl><dt>contentsKey=<em>key</em></dt><dd><p>(optional) The property name to be used for textenclosed by the XML element being parsed. For example, if the mappingmodel contained the following:</p><blockquote><pre>...&lt;entity name="com.apple.yellow.foundation.NSMutableDictionary" xmlTag="text"  contentsKey="contents"/&gt;...</pre></blockquote><br><p>And if the following was encountered while parsing XML:</p><blockquote><pre>&lt;text&gt;Hello, &lt;b&gt;World!&lt;/b&gt;&lt;/text&gt;</pre></blockquote><br><p>An NSMutableDictionary object would be created with a singlekey-value pair: the key "contents" would have as its value anarray containing two elements: the string "Hello, " and a dictionarywith a single key-value pair: the key "b" would have as itsvalue the string "World".</p></dd></dl><br><h2>The "property" Tag</h2><p>Within an entity element, youcan have zero or more property elements.The property tag also has two requiredattributes and a number that are optional:</p><dl><dt>name=<em>property</em></dt><dd>(required) The name of the property on the key-valuecoding side (the name of the object, attribute, or dictionary keyto which the XML data is to be mapped).</dd></dl><dl><dt>xmlTag=<em>tag</em></dt><dd>(required) The XML tag.</dd></dl><dl><dt>attribute=<code>"YES"| "NO"</code></dt><dd><p>(optional) Used during encoding, "YES" causesa given property "a" to be encoded like:</p><blockquote><pre>&lt;foo a="someValue"&gt; .. &lt;/foo&gt;</pre></blockquote><br><p>instead of:</p><blockquote><pre>&lt;foo&gt; &lt;a&gt;someValue&lt;/a&gt; .. &lt;/foo&gt;</pre></blockquote><br></dd></dl><dl><dt>forceList=<code>"YES"| "NO"</code></dt><dd><p>(optional) Used for decoding only. "YES" causesa single enclosed element to be decoded as an NSMutableArray witha single object of the appropriate type.</p><p>Decoding an XML structure like the following:</p><blockquote><pre>&lt;foo&gt;    &lt;a&gt;value1&lt;/a&gt;    &lt;a&gt;value2&lt;/a&gt;&lt;/foo&gt;</pre></blockquote><br><p>results in a key-value coding call with key <code>"foo"</code> andvalue an NSMutableArray containing the two "&lt;a&gt;" elements.When there is only a single enclosed element, as in this example:</p><blockquote><pre>&lt;foo&gt;    &lt;a&gt;some Value&lt;/a&gt;&lt;/foo&gt;</pre></blockquote><br><p>decoding will result in a key-value coding call with key <code>"foo"</code> andvalue an object of type "a". <code>forceList</code> altersthis default behavior, causing the value in this instance to bean NSMutableArray containing a single object of type "a".</p></dd></dl><dl><dt>codeBasedOn=<code>"TAG"</code></dt><dd>(optional) The WOXMLCoder normally uses the value ofthe property's name attribute asthe key during key-value coding. This is the desired behavior inmost situations since the name attributetypically indicates the name of an instance variable in a customclass. When working with NSDictionary objects, however, you mayinstead want to use the value of the xmlTag attributeas the key. To do this, specify codeBasedOn=<code>"TAG"</code> inthe property's list of attributes.</dd></dl><dl><dt>reportEmptyValues=<code>"YES"| "NO"</code></dt><dd>(optional) When an empty element is encountered whiledecoding XML (for instance, <code>&lt;myElement&gt;&lt;/myElement&gt;</code>),the  <a href="Classes/WOXMLDecoder.html#WOContext">WOXMLDecoder</a> normally creates an emptyNSDictionary object. Setting reportEmptyValues to"NO" prevents this empty object from being created.</dd></dl><dl><dt>outputTags=<code>"class"</code> | <code>"property"</code> | <code>"both"</code> | <code>"neither"</code></dt><dd><p>(optional) Used when encoding, this attributespecifies which XML tag specified in the mapping model should beoutput for the given property. "property", the default, specifies thatthe property's XML tag should be output. "class" specifiesthat the XML tag associated with the property's enclosing classshould be output instead. "both" indicates that both the propertyand the class tags should be output, and "neither" indicatesthat neither XML tag should be placed in the XML.</p><p>To illustrate the use of the outputTags attribute,the following mapping model could be used to produce HTML tags froman NSMutableDictionary object:</p><blockquote><pre>&lt;model&gt;    &lt;entity name="com.apple.yellow.foundation.NSMutableDictionary"  xmlTag="text"&gt;        &lt;property name="p" xmlTag="ignore" outputTags="neither"/&gt;    &lt;/entity&gt;    &lt;entity name="Paragraph"  xmlTag="p"&gt;        &lt;property name="text.contents" xmlTag="text"  outputTags="class"/&gt;    &lt;/entity&gt;    &lt;entity name="ItemList"  xmlTag="ul"&gt;        &lt;property name="contents" xmlTag="li" outputTags="both"/&gt;    &lt;/entity&gt;    &lt;entity name="Item"  xmlTag="item"&gt;        &lt;property name="contents" xmlTag="ignore" outputTags="class"/&gt;    &lt;/entity&gt;    &lt;entity name="LineBreak"  xmlTag="br"/&gt;    &lt;entity name="ExternalLink"  xmlTag="a"&gt;        &lt;property name="url" xmlTag="href" attribute="YES"/&gt;                &lt;property name="anchorText" xmlTag="ignore" outputTags="neither"/&gt;            &lt;/entity&gt;&lt;/model&gt;</pre></blockquote><br></dd></dl><br><a href="XMLTOC.html"><img src="../../../../../images/up.gif" border="0" alt="up"></a></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>FSpCreateResFile (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING37></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-36.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-38.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A> / <A HREF="MoreToolbox-36.html"><B>Creating an Empty Resource Fork</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING37-0></A>
<H3><A NAME=MARKER-9-226></A>FSpCreateResFile</H3>
 <A NAME=MARKER-11-227></A><A NAME=MARKER-2-228></A>You can use the <CODE>FSpCreateResFile</CODE> procedure to create an empty resource fork using a file system specification (<CODE>FSSpec</CODE>) record. <P>
<PRE>
PROCEDURE FSpCreateResFile (spec: FSSpec; 
                            creator, fileType: OSType;
                            scriptTag: ScriptCode);
</PRE>
<DL>
<DT><CODE>spec</CODE>
<DD> A file system specification record that indicates the name and location of the file whose resource fork is to be created.
<DT><CODE>creator</CODE>
<DD> The signature of the application creating the file.
<DT><CODE>fileType</CODE>
<DD> The file type of the new file.
<DT><CODE>scriptTag</CODE>
<DD> The script code of the script system in which the Finder and standard file dialog boxes display the file's name.
</DL>
<A NAME=HEADING37-7></A>
<H5>DESCRIPTION</H5>
 The <CODE>FSpCreateResFile</CODE> procedure creates an empty resource fork for a file with the specified type, creator, and script code in the location and with the name designated by the <CODE>spec</CODE> parameter. (An empty resource fork contains no resource data but does include a resource map.) <P>
 This procedure is available only in System 7 and later versions of system software. If <CODE>FSpCreateResFile</CODE> is not available to your application, you can use <CODE>HCreateResFile</CODE> or <CODE>CreateResFile</CODE>.<P>
 <A NAME=MARKER-2-249></A>The <CODE>spec</CODE> parameter is a file system specification record, which is the standard format in System 7 and later versions for identifying a file or directory. The file system specification record for files and directories is defined by the <CODE>FSSpec</CODE> data type. <P>
<PRE>
TYPE FSSpec = {file system specification}
   RECORD   
      vRefNum: Integer;    {volume reference number}
      parID:   LongInt;    {directory ID of parent directory}
      name:    Str63;      {filename or directory name}
   END;
</PRE>
 Certain File Manager routines--those that open a file's data fork--also take a file system specification record as a parameter. You can use the same <CODE>FSSpec</CODE> record in Resource Manager routines that create or open the file's resource fork. <P>
 The <CODE>creator</CODE> parameter of <CODE>FSpCreateResFile</CODE> contains the signature of the application that creates the file. Whenever your application creates a document, it assigns a creator and a file type to that document. Typically your application sets its signature as the document's creator.<P>
 The <CODE>fileType</CODE> parameter indicates the type of file. You can set the file type to a type especially defined for your application or one of the existing general types, such as '<CODE>TEXT</CODE>' for text (a stream of ASCII characters), or '<CODE>pref</CODE>' for a preferences file.<P>
<DL>
<DT><B>Note</B>
<DD>The file type should be as descriptive of the file's data format as possible. You should not use <CODE>'TEXT'</CODE> as a file type unless the document contains plain ASCII characters.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 The value of the <CODE>scriptTag</CODE> parameter is the script code of the script system in which the Finder and the Standard File Package dialog boxes display the name of the file. For example, to specify the Roman script system, specify the constant <CODE>smRoman</CODE> in the <CODE>scriptTag</CODE> parameter. <P>
 If the file specified by the file system specification record doesn't already exist (that is, if it has neither a data fork nor a resource fork), the <CODE>FSpCreateResFile</CODE> procedure creates a resource file--that is, a resource fork, including a resource map. In this case the file has a zero-length data fork. The <CODE>FSpCreateResFile</CODE> procedure also sets the creator, type, and script code fields of the file's catalog information record to the specified values. <P>
 If the file specified by the file system specification record already exists and includes a resource fork with a resource map, <CODE>FSpCreateResFile</CODE> does nothing. If the data fork of the file specified by the file system specification record already exists but the file has a zero-length resource fork, <CODE>FSpCreateResFile</CODE> creates an empty resource fork and resource map for the file; it also changes the creator, type, and script code fields of the catalog information record of the file to the specified values.<P>
 If your application uses Standard File Package routines, note that the <CODE>StandardPutFile</CODE> procedure returns a standard file reply record that contains a file system specification record in the <CODE>sfFile</CODE> field. <P>
 Before you can work with the newly created file's resource fork, you must use the <CODE>FSpOpenResFile</CODE> function to open it.<P>
<A NAME=HEADING37-21></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>FSpCreateResFile</CODE> procedure may move or purge memory blocks in the application heap. Your application should not call this procedure at interrupt time.<P>
<A NAME=HEADING37-23></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>dirFulErr<TD>-33<TD>Directory full<TR>
<TD>dskFulErr<TD>-34<TD>Disk full<TR>
<TD>nsvErr<TD>-35<TD>No such volume<TR>
<TD>ioErr<TD>-36<TD>I/O error<TR>
<TD>bdNamErr<TD>-37<TD>Bad filename or volume name (perhaps zero length)<TR>
<TD>tmfoErr<TD>-42<TD>Too many files open<TR>
<TD>wPrErr<TD>-44<TD>Disk is write-protected<TR>
<TD>fLckdErr<TD>-45<TD>File is locked</TABLE>
</H5>
<A NAME=HEADING37-24></A>
<H5>SEE ALSO</H5>
 To check for errors, call the <CODE>ResError</CODE> function as described on <A HREF=MoreToolbox-35.html#MARKER-9-220>page 1-47</A>. For information about using the <CODE>Gestalt</CODE> function to determine whether the <CODE>FSpCreateResFile</CODE> procedure is available, see <A HREF=MoreToolbox-16.html#MARKER-9-112>"Using the Resource Manager,"</A> beginning on <A HREF=MoreToolbox-16.html#MARKER-9-112>page 1-11</A>. For a discussion of the use of the <CODE>FSpCreateResFile</CODE> procedure, see <A HREF=MoreToolbox-20.html#MARKER-9-150>"Creating and Opening a Resource Fork" beginning on page 1-19</A>. For a description of the <CODE>FSpOpenResFile</CODE> function, see <A HREF=MoreToolbox-41.html#MARKER-9-246>page 1-54</A>. For information about the <CODE>StandardPutFile</CODE> procedure and standard file reply records, see <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I>. For more information on creators and file types, see the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>. <A NAME=MARKER-2-231></A><P>
<A NAME=HEADING37-26></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>FSpCreateResFile</CODE> procedure are 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_HighLevelFSDispatch<TD>$000E</TABLE>
<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-36.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-38.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

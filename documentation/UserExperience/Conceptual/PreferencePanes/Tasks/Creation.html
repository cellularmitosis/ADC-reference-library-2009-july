<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Preference Panes: Creating a Preference Pane Bundle</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating a Preference Pane Bundle"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000709" title="Creating a Preference Pane Bundle"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../Cocoa/index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../../Cocoa/UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../index.html" target="_top">Preference Panes</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="HelpMenu.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="Sample.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000709-BABFCABJ" title="Creating a Preference Pane Bundle"></a><hr /><H1>Creating a Preference Pane Bundle</H1>

<p>This section takes you through the steps to create and install a preference pane bundle for use by System Preferences. You need to perform these actions for every preference pane you create. It is assumed that you are already familiar with Project Builder and Interface Builder. For help using these development tools, see the Currency Converter tutorial for Cocoa.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/20000709-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;Beginning with Project Builder v1.1.1 (December 2001 Developer Tools), Project Builder has a Preference Pane template project. Selecting this template instead of the generic Cocoa Bundle in step 3 of <span class="content_text"><a href="Creation.html#//apple_ref/doc/uid/20000709-96846">“Create the Project”</a></span> renders most of the remaining directions in this section unnecessary. The project already contains a nib file and skeleton source files; you can immediately build and install the preference pane according to <span class="content_text"><a href="Creation.html#//apple_ref/doc/uid/20000709-100950">“Build and Install the Preference Pane.”</a></span> You should still read these directions and customize settings, such as the bundle identifier, where appropriate. Before moving onto the next section and constructing a user interface, though, you need to inform the nib file of your custom NSPreferencePane subclass by dragging the class’s header file to the nib file window in Interface Builder and setting the File’s Owner to your subclass.</p></div>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Creation.html#//apple_ref/doc/uid/20000709-CJBDGJFA">Create the Project</a>
				
			<br/>
			
        
			
			
				<a href="Creation.html#//apple_ref/doc/uid/20000709-96872">Create the Nib File</a>
				
			<br/>
			
        
			
			
				<a href="Creation.html#//apple_ref/doc/uid/20000709-101174">Create the Preference Pane Files</a>
				
			<br/>
			
        
			
			
				<a href="Creation.html#//apple_ref/doc/uid/20000709-101008">Update the Build Settings</a>
				
			<br/>
			
        
			
			
				<a href="Creation.html#//apple_ref/doc/uid/20000709-CJBFGIBD">Build and Install the Preference Pane</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20000709-96846" title="Create the Project"></a><a name="//apple_ref/doc/uid/20000709-CJBDGJFA" title="Create the Project"></a><h2>Create the Project</h2>
<p>This section describes how to create the preference pane project and add the Preference Panes framework.</p>
<ol class="ol"><li class="li"><p>Start Project Builder.</p></li>
<li class="li"><p>Choose New Project from the File menu.</p></li>
<li class="li"><p>Select the Cocoa Bundle project type and create the project.</p></li>
<li class="li"><p>Choose Add Frameworks from the Project menu. If the selection is not already there, go to the <code>/System/Library/Frameworks</code> directory. Select <code>PreferencePanes.framework</code>.</p></li></ol>
<a name="//apple_ref/doc/uid/20000709-96872" title="Create the Nib File"></a><h2>Create the Nib File</h2>
<p>This section describes how to create a simple preference pane nib file and add it to the preference pane project.</p>
<ol class="ol"><li class="li"><p>While Project Builder is still running with your project open, start Interface Builder.</p></li>
<li class="li"><p>Create an empty Cocoa nib.</p></li>
<li class="li"><p>Create a window and resize it to a suitable size. For System Preferences, the window should not be more than 595 pixels wide. As the window itself is not used by the preference pane, only its contents, you do not need to specify a window title nor localize the title.</p></li>
<li class="li"><p>Build the user interface in the window.</p></li>
<li class="li"><p>Return to Project Builder and locate the <code>NSPreferencePane.h</code> header file in <code>PreferencePanes.framework</code>. Drag the header file to the nib’s main window in Interface Builder.</p></li>
<li class="li"><p>In the Classes pane, select the NSPreferencePane class and create a subclass of it. Rename it to whatever you want. This is a global property within the preference application, so include a unique prefix in the name as described in <span class="content_text"><a href="Conflicts.html#//apple_ref/doc/uid/20000706-BAJIAGFD">“Preventing Name Conflicts.”</a></span></p></li>
<li class="li"><p>With the subclass selected, go to the Attributes pane of the Info window. Create any outlets or actions you need for the user interface.</p></li>
<li class="li"><p>In the Instances pane, select the File’s Owner object. In the Custom Class pane of the Info window, select your preference pane class.</p></li>
<li class="li"><p>Draw a connection (Control-drag) between the File’s Owner object and the window object. Connect the window to the <code>_window</code> outlet.</p></li>
<li class="li"><p>Connect the remaining outlets and actions needed for the user interface.</p></li>
<li class="li"><p>Save the nib file into the <code>English.lproj</code> directory of your project. When asked whether to add it to the project, click the Add button.</p></li></ol>
<a name="//apple_ref/doc/uid/20000709-101174" title="Create the Preference Pane Files"></a><h2>Create the Preference Pane Files</h2>
<p>This section describes how to create the initial source files and to insert the preference pane’s icon into the project.</p>
<ol class="ol"><li class="li"><p>In Interface Builder, with the nib file open, click the Classes tab and select your preference pane subclass.</p></li>
<li class="li"><p>Choose Create Files from the Classes menu. Save the files in your project folder and make sure the “Insert into targets” checkbox is checked.</p></li>
<li class="li"><p>In Project Builder, edit the header file of your preference pane subclass. After the line importing <code>Cocoa.h</code>, add the line</p><div class="codesample"><table><tr><td scope="row"><pre>#import &lt;PreferencePanes/NSPreferencePane.h><span></span></pre></td></tr></table></div></li>
<li class="li"><p>Add your preference pane icon to the project’s Resources folder.</p></li></ol>
<a name="//apple_ref/doc/uid/20000709-101008" title="Update the Build Settings"></a><h2>Update the Build Settings</h2>
<p>This section describes how to modify the default project settings to produce a custom preference pane bundle. This mostly involves assigning values to the necessary keys in the bundle’s information property list.</p>
<ol class="ol"><li class="li"><p>Choose Edit Active Target from the Project menu and go to the Bundle Settings pane.</p></li>
<li class="li"><p>Change the “Identifier” field to an appropriate unique value for the <code><!--a  -->CFBundleIdentifier<!--/a--></code> key. The value should be prefixed by the reverse domain name of your organization (see <span class="content_text"><a href="Conflicts.html#//apple_ref/doc/uid/20000706-BAJIAGFD">“Preventing Name Conflicts”</a></span>).</p></li>
<li class="li"><p>Change the “Principal class” field in the Cocoa-specific section to the name of your preference pane subclass. This is the <code><!--a  -->NSPrincipalClass<!--/a--></code> key.</p></li>
<li class="li"><p>Change the “Main nib file” field to the name of your nib file. Do not include the <code>.nib</code> extension. This is the <code><!--a  -->NSMainNibFile<!--/a--></code> key.</p></li>
<li class="li"><p>Enter Expert mode by clicking the Expert button at the top of the Bundle Settings window. Create a new key by clicking the New Sibling button. Rename the new key <code><!--a  -->NSPrefPaneIconFile<!--/a--></code> and set its value to the name of your icon file.</p></li>
<li class="li"><p>Go to the Build Settings pane, scroll to the bottom of the window, and change the <code>WRAPPER_EXTENSION</code> entry value to <code>prefPane</code>.</p></li>
<li class="li"><p>Select the <code>InfoPlist.strings</code> file in the project’s Resources folder. Update the <code><!--a  -->CFBundleName<!--/a--></code> value if it should be different from the project name. Alternatively, you can add an entry for <code><!--a  -->NSPrefPaneIconLabel<!--/a--></code>, if you need to split the name between two lines.</p></li></ol>
<a name="//apple_ref/doc/uid/20000709-100950" title="Build and Install the Preference Pane"></a><a name="//apple_ref/doc/uid/20000709-CJBFGIBD" title="Build and Install the Preference Pane"></a><h2>Build and Install the Preference Pane</h2>
<p>This section describes how to make the preference pane available to System Preferences.</p>
<ol class="ol"><li class="li"><p>Build the project.</p></li>
<li class="li"><p>In Finder, locate the <code>build</code> directory for the project. The default location is inside the project folder. The preference pane is in this folder.</p></li>
<li class="li"><p>Move the preference pane into one of the <code>PreferencePanes</code> family of folders listed in <span class="content_text"><a href="../Concepts/Anatomy.html#//apple_ref/doc/uid/20000705-97070">“Where Preference Panes Live.”</a></span> For testing, use the <code>PreferencePanes</code> folder in <code>~/Library</code>. You may need to create the <code>PreferencePanes</code> folder.</p></li></ol>
<p>When you run System Preferences you should now see your preference pane at the bottom of the window in the “Other” category.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="HelpMenu.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="Sample.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-10-03<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/UserExperience/Conceptual/PreferencePanes/Tasks/Creation.html%3Fid%3D10000110i-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/UserExperience/Conceptual/PreferencePanes/Tasks/Creation.html%3Fid%3D10000110i-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/UserExperience/Conceptual/PreferencePanes/Tasks/Creation.html%3Fid%3D10000110i-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

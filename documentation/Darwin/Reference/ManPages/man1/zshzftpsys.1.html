<html><head><title>Mac OS X
 Manual Page For zshzftpsys(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/zshzftpsys" title="Mac OS X
 Manual Page for zshzftpsys(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/zshzftpsys"; name=zshzftpsys(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
ZSHZFTPSYS(1)                                                                                  ZSHZFTPSYS(1)



<b>NAME</b>
       zshzftpsys - zftp function front-end

<b>DESCRIPTION</b>
       This  describes  the  set of shell functions supplied with the source distribution as an interface to
       the <b>zftp</b> builtin command, allowing you to perform FTP operations  from  the  shell  command  line  or
       within functions or scripts.  The interface is similar to a traditional FTP client (e.g. the <b>ftp</b> com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
       mand itself, see <a href="ftp.1.html#//apple_ref/doc/man/1/ftp"><u>ftp</u>(1)</a>), but as it is entirely done within the shell all  the  familiar  completion,
       editing and globbing features, and so on, are present, and macros are particularly simple to write as
       they are just ordinary shell functions.

       The prerequisite is that the <b>zftp</b> command, as described in <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a> , must be available  in  the
       version  of <b>zsh</b> installed at your site.  If the shell is configured to load new commands at run time,
       it probably is: typing `<b>zmodload</b> <b>zsh/zftp</b>' will make sure (if that runs silently, it has worked).  If
       this is not the case, it is possible <b>zftp</b> was linked into the shell anyway: to test this, type `<b>which</b>
       <b>zftp</b>' and if <b>zftp</b> is available you will get the message `<b>zftp:</b> <b>shell</b> <b>built-in</b> <b>command</b>'.

       Commands given directly with <b>zftp</b> builtin may be interspersed between the functions in this suite; in
       a  few cases, using <b>zftp</b> directly may cause some of the status information stored in shell parameters
       to become invalid.  Note in particular the description of the variables <b>$ZFTP_TMOUT</b>, <b>$ZFTP_PREFS</b>  and
       <b>$ZFTP_VERBOSE</b> for <b>zftp</b>.



<b>INSTALLATION</b>
       You  should  make sure all the functions from the <b>Functions/Zftp</b> directory of the source distribution
       are available; they all begin with the two letters `<b>zf</b>'.  They may already  have  been  installed  on
       your system; otherwise, you will need to find them and copy them.  The directory should appear as one
       of the elements of the <b>$fpath</b> array (this should already be the case if they were installed), and  at
       least  the  function  <b>zfinit</b> should be autoloaded; it will autoload the rest.  Finally, to initialize
       the use of the system you need to call the <b>zfinit</b> function.  The following code in your  <b>.zshrc</b>  will
       arrange for this; assume the functions are stored in the directory <b>~/myfns</b>:

              <b>fpath=(~/myfns</b> <b>$fpath)</b>
              <b>autoload</b> <b>-U</b> <b>zfinit</b>
              <b>zfinit</b>

       Note  that  <b>zfinit</b>  assumes  you  are  using  the <b>zmodload</b> method to load the <b>zftp</b> command.  If it is
       already built into the shell, change <b>zfinit</b> to <b>zfinit</b> <b>-n</b>.  It is helpful (though  not  essential)  if
       the  call  to <b>zfinit</b> appears after any code to initialize the new completion system, else unnecessary
       <b>compctl</b> commands will be given.


<b>FUNCTIONS</b>
       The sequence of operations in performing a file transfer is essentially the same as that in  a  stan-<font color="#ffffff" class="whiteout">dard&nbsp;standard</font>
       dard  FTP client.  Note that, due to a quirk of the shell's <b>getopts</b> builtin, for those functions that
       handle options you must use `<b>--</b>' rather than `<b>-</b>' to ensure the remaining arguments are treated liter-<font color="#ffffff" class="whiteout">ally&nbsp;literally</font>
       ally (a single `<b>-</b>' is treated as an argument).


   <b>Opening</b> <b>a</b> <b>connection</b>
       <b>zfparams</b> <b>[</b> <u>host</u> <b>[</b> <u>user</u> <b>[</b> <u>password</u> <b>...</b> <b>]</b> <b>]</b> <b>]</b>
              Set  or show the parameters for a future <b>zfopen</b> with no arguments.  If no arguments are given,
              the current parameters are displayed (the password will be shown as a line of asterisks).   If
              a  host is given, and either the <u>user</u> or <u>password</u> is not, they will be prompted for; also, any
              parameter given as `<b>?</b>' will be prompted for, and if the `<b>?</b>' is followed by a string, that will
              be  used  as  the prompt.  As <b>zfopen</b> calls <b>zfparams</b> to store the parameters, this usually need
              not be called directly.

              A single argument `<b>-</b>' will delete the stored parameters.  This will also cause the  memory  of
              the last directory (and so on) on the other host to be deleted.

       <b>zfopen</b> <b>[</b> <b>-1</b> <b>]</b> <b>[</b> <u>host</u> <b>[</b> <u>user</u> <b>[</b> <u>password</u> <b>[</b> <u>account</u> <b>]</b> <b>]</b> <b>]</b> <b>]</b>
              If  <u>host</u> is present, open a connection to that host under username <u>user</u> with password <u>password</u>
              (and, on the rare occasions when it is necessary, account <u>account</u>).  If a necessary  parameter
              is  missing or given as `<b>?</b>' it will be prompted for.  If <u>host</u> is not present, use a previously
              stored set of parameters.

              If the command was successful, and the terminal is compatible with <b>xterm</b> or is <b>sun-cmd</b>, a sum-<font color="#ffffff" class="whiteout">mary&nbsp;summary</font>
              mary  will appear in the title bar, giving the local <b>host:directory</b> and the remote <b>host:direc</b>-<font color="#ffffff" class="whiteout">tory;&nbsp;host:directory;</font>
              <b>tory</b>; this is handled by the function <b>zftp_chpwd</b>, described below.

              Normally, the <u>host</u>, <u>user</u> and <u>password</u> are internally recorded for later re-opening, either  by
              a  <b>zfopen</b>  with no arguments, or automatically (see below).  With the option `<b>-1</b>', no informa-<font color="#ffffff" class="whiteout">tion&nbsp;information</font>
              tion is stored.  Also, if an open command with arguments failed, the parameters  will  not  be
              retained (and any previous parameters will also be deleted).  A <b>zfopen</b> on its own, or a <b>zfopen</b>
              <b>-1</b>, never alters the stored parameters.

              Both <b>zfopen</b> and <b>zfanon</b> (but not <b>zfparams</b>) understand URLs of the  form  <a href="ftp://host/path..."><b>ftp://</b><u>host</u>/<u>path...</u></b></a><b>  as
              meaning  to connect to the <u>host</u>, then change directory to <u>path</u> (which must be a directory, not
              a file).  The `<a href="ftp://"><b>ftp://</b></b></a><b>' can be omitted; the trailing `<b>/</b>' is enough to  trigger  recognition  of
              the  <u>path</u>.   Note prefixes other than `<b>ftp:</b>' are not recognized, and that all characters after
              the first slash beyond <u>host</u> are significant in <u>path</u>.

       <b>zfanon</b> <b>[</b> <b>-1</b> <b>]</b> <u>host</u>
              Open a connection <u>host</u> for anonymous FTP.  The username used  is  `<b>anonymous</b>'.   The  password
              (which  will be reported the first time) is generated as <u>user</u><b>@</b><u>host</u>; this is then stored in the
              shell parameter <b>$EMAIL_ADDR</b> which can alternatively be set manually to a suitable string.


   <b>Directory</b> <b>management</b>
       <b>zfcd</b> <b>[</b> <u>dir</u> <b>]</b>
       <b>zfcd</b> <b></b>-
       <b>zfcd</b> <u>old</u> <u>new</u>
              Change the current directory on the remote server:  this is implemented to have  many  of  the
              features of the shell builtin <b>cd</b>.

              In  the  first  form  with <u>dir</u> present, change to the directory <u>dir</u>.  The command `<b>zfcd</b> <b>..</b>' is
              treated specially, so is guaranteed to work on non-UNIX servers (note this is  handled  inter-
              nally by <b>zftp</b>).  If <u>dir</u> is omitted, has the effect of `<b>zfcd</b> <b>~</b>'.

              The second form changes to the directory previously current.

              The  third  form attempts to change the current directory by replacing the first occurrence of
              the string <u>old</u> with the string <u>new</u> in the current directory.

              Note that in this command, and indeed anywhere a remote filename is expected, the string which
              on  the  local  host  corresponds to `<b>~</b>' is converted back to a `<b>~</b>' before being passed to the
              remote machine.  This is convenient because of the way expansion is performed on  the  command
              line  before  <b>zfcd</b>  receives a string.  For example, suppose the command is `<b>zfcd</b> <b>~/foo</b>'.  The
              shell will expand this to a full path such as `<b>zfcd</b> <b>/home/user2/pws/foo</b>'.  At this stage, <b>zfcd</b>
              recognises  the initial path as corresponding to `<b>~</b>' and will send the directory to the remote
              host as <b>~/foo</b>, so that the `<b>~</b>' will be expanded by the  server  to  the  correct  remote  host
              directory.  Other named directories of the form `<b>~name</b>' are not treated in this fashion.

       <b>zfhere</b> Change directory on the remote server to the one corresponding to the current local directory,
              with special handling of `<b>~</b>' as in <b>zfcd</b>.  For example,  if  the  current  local  directory  is
              <b>~/foo/bar</b>, then <b>zfhere</b> performs the effect of `<b>zfcd</b> <b>~/foo/bar</b>'.

       <b>zfdir</b> <b>[</b> <b>-rfd</b> <b>]</b> <b>[</b> <b>-</b> <b>]</b> <b>[</b> <u>dir-options</u> <b>]</b> <b>[</b> <u>dir</u> <b>]</b>
              Produce  a  long  directory listing.  The arguments <u>dir-options</u> and <u>dir</u> are passed directly to
              the server and their effect is implementation dependent, but specifying  a  particular  remote
              directory <u>dir</u> is usually possible.  The output is passed through a pager given by the environ-
              ment variable <b>$PAGER</b>, or `<b>more</b>' if that is not set.

              The directory is usually cached for re-use.  In fact, two caches are maintained.  One  is  for
              use  when there is no <u>dir-options</u> or <u>dir</u>, i.e. a full listing of the current remote directory;
              it is flushed when the current remote directory changes.  The other is kept for  repeated  use
              of  <b>zfdir</b>  with  the  same  arguments; for example, repeated use of `<b>zfdir</b> <b>/pub/gnu</b>' will only
              require the directory to be retrieved on the first call.  Alternatively,  this  cache  can  be
              re-viewed  with  the <b>-r</b> option.  As relative directories will confuse <b>zfdir</b>, the <b>-f</b> option can
              be used to force the cache to be flushed before the directory is listed.  The option  <b>-d</b>  will
              delete  both caches without showing a directory listing; it will also delete the cache of file
              names in the current remote directory, if any.

       <b>zfls</b> [ <u>ls-options</u> ] [ <u>dir</u> ]
              List files on the remote server.  With no arguments, this will produce a simple list  of  file
              names  for the current remote directory.  Any arguments are passed directly to the server.  No
              pager and no caching is used.


   <b>Status</b> <b>commands</b>
       <b>zftype</b> [ <u>type</u> ]
              With no arguments, show the type of data to be transferred, usually ASCII or binary.  With  an
              argument, change the type: the types `<b>A</b>' or `<b>ASCII</b>' for ASCII data and `<b>B</b>' or `<b>BINARY</b>', `<b>I</b>' or
              `<b>IMAGE</b>' for binary data are understood case-insensitively.

       <b>zfstat</b> [ -v ]
              Show the status of the current or last connection, as well as the status  of  some  of  <b>zftp</b>'s
              status  variables.   With  the  <b>-v</b>  option, a more verbose listing is produced by querying the
              server for its version of events, too.


   <b>Retrieving</b> <b>files</b>
       The commands for retrieving files all take at least two options. <b>-G</b> suppresses remote filename expan-
       sion  which  would  otherwise  be  performed (see below for a more detailed description of that).  <b>-t</b>
       attempts to set the modification time of the local file to that of the  remote  file:  this  requires
       version 5 of <b>perl</b>, see the description of the function <b>zfrtime</b> below for more information.

       <b>zfget</b> <b>[</b> <b>-Gtc</b> <b>]</b> <u>file1</u> <b>...</b>
              Retrieve  all the listed files <u>file1</u> ... one at a time from the remote server.  If a file con-
              tains a `<b>/</b>', the full name is passed to the remote server, but  the  file  is  stored  locally
              under the name given by the part after the final `<b>/</b>'.  The option <b>-c</b> (cat) forces all files to
              be sent as a single stream to standard output; in this case the <b>-t</b> option has no effect.

       <b>zfuget</b> <b>[</b> <b>-Gvst</b> <b>]</b> <u>file1</u> <b>...</b>
              As <b>zfget</b>, but only retrieve files where the version on the remote server is newer (has a later
              modification  time),  or where the local file does not exist.  If the remote file is older but
              the files have different sizes, or if the sizes are the same but the remote file is newer, the
              user  will  usually be queried.  With the option <b>-s</b>, the command runs silently and will always
              retrieve the file in either of those two cases.  With the option <b>-v</b>, the command  prints  more
              information about the files while it is working out whether or not to transfer them.

       <b>zfcget</b> <b>[</b> <b>-Gt</b> <b>]</b> <u>file1</u> <b>...</b>
              As  <b>zfget</b>,  but if any of the local files exists, and is shorter than the corresponding remote
              file, the command assumes that it is the result of a partially completed transfer and attempts
              to transfer the rest of the file.  This is useful on a poor connection which keeps failing.

              Note that this requires a commonly implemented, but non-standard, version of the FTP protocol,
              so is not guaranteed to work on all servers.

       <b>zfgcp</b> <b>[</b> <b>-Gt</b> <b>]</b> <u>remote-file</u> <u>local-file</u>
       <b>zfgcp</b> <b>[</b> <b>-Gt</b> <b>]</b> <u>rfile1</u> <b>...</b> <u>ldir</u>
              This retrieves files from the remote server with arguments behaving similarly to the  <b>cp</b>  com-
              mand.

              In the first form, copy <u>remote-file</u> from the server to the local file <u>local-file</u>.

              In the second form, copy all the remote files <u>rfile1</u> ... into the local directory <u>ldir</u> retain-
              ing the same basenames.  This assumes UNIX directory semantics.


   <b>Sending</b> <b>files</b>
       <b>zfput</b> <b>[</b> <b>-r</b> <b>]</b> <u>file1</u> <b>...</b>
              Send all the <u>file1</u> ... given separately to the remote server.  If a filename contains  a  `<b>/</b>',
              the  full  filename  is  used  locally to find the file, but only the basename is used for the
              remote file name.

              With the option <b>-r</b>, if any of the <u>files</u> are directories they are  sent  recursively  with  all
              their  subdirectories,  including  files  beginning  with  `<b>.</b>'.  This requires that the remote
              machine understand UNIX file semantics, since `<b>/</b>' is used as a directory separator.

       <b>zfuput</b> <b>[</b> <b>-vs</b> <b>]</b> <u>file1</u> <b>...</b>
              As <b>zfput</b>, but only send files which are newer than their local equivalents, or if  the  remote
              file  does  not  exist.   The  logic is the same as for <b>zfuget</b>, but reversed between local and
              remote files.

       <b>zfcput</b> <u>file1</u> <b>...</b>
              As <b>zfput</b>, but if any remote file already exists and is  shorter  than  the  local  equivalent,
              assume  it  is the result of an incomplete transfer and send the rest of the file to append to
              the existing part.  As the FTP append command is part of the standard set, this is in  princi-
              ple more likely to work than <b>zfcget</b>.

       <b>zfpcp</b> <u>local-file</u> <u>remote-file</u>
       <b>zfpcp</b> <u>lfile1</u> <b>...</b> <u>rdir</u>
              This sends files to the remote server with arguments behaving similarly to the <b>cp</b> command.

              With two arguments, copy <u>local-file</u> to the server as <u>remote-file</u>.

              With  more  than  two  arguments, copy all the local files <u>lfile1</u> ... into the existing remote
              directory <u>rdir</u> retaining the same basenames.  This assumes UNIX directory semantics.

              A problem arises if you attempt to use <b>zfpcp</b> <u>lfile1</u> <u>rdir</u>, i.e. the second form of copying  but
              with  two  arguments,  as  the  command  has no simple way of knowing if <u>rdir</u> corresponds to a
              directory or a filename.  It attempts to resolve this in various ways.   First,  if  the  <u>rdir</u>
              argument is `<b>.</b>' or `<b>..</b>' or ends in a slash, it is assumed to be a directory.  Secondly, if the
              operation of copying to a remote file in the first form failed, and the  remote  server  sends
              back  the  expected  failure  code 553 and a reply including the string `<b>Is</b> <b>a</b> <b>directory</b>', then
              <b>zfpcp</b> will retry using the second form.


   <b>Closing</b> <b>the</b> <b>connection</b>
       <b>zfclose</b>
              Close the connection.


   <b>Session</b> <b>management</b>
       <b>zfsession</b> [ <b>-lvod</b> ] [ <u>sessname</u> ]
              Allows you to manage multiple FTP sessions at once.  By default, connections take place  in  a
              session  called  `<b>default</b>'; by giving the command `<b>zfsession</b> <u>sessname</u>' you can change to a new
              or existing session with a name of your choice.  The new session remembers its own connection,
              as  well  as  associated  shell parameters, and also the host/user parameters set by <b>zfparams</b>.
              Hence you can have different sessions set up to connect to different hosts,  each  remembering
              the appropriate host, user and password.

              With  no  arguments,  <b>zfsession</b>  prints the name of the current session; with the option <b>-l</b> it
              lists all sessions which currently exist, and with the option <b>-v</b> it gives a verbose list show-
              ing  the  host  and  directory  for  each session, where the current session is marked with an
              asterisk.  With <b>-o</b>, it will switch to the most recent previous session.

              With <b>-d</b>, the given session (or else the current one) is removed; everything to do with  it  is
              completely  forgotten.   If it was the only session, a new session called `<b>default</b>' is created
              and made current.  It is safest not to delete sessions while background  commands  using  <b>zftp</b>
              are active.

       <b>zftransfer</b> <u>sess1</u><b>:</b><u>file1</u> <u>sess2</u><b>:</b><u>file2</u>
              Transfer files between two sessions; no local copy is made.  The file is read from the session
              <u>sess1</u> as <u>file1</u> and written to session <u>sess2</u> as file <u>file2</u>; <u>file1</u> and <u>file2</u> may be relative  to
              the  current  directories  of  the  session.  Either <u>sess1</u> or <u>sess2</u> may be omitted (though the
              colon should be retained if there is a possibility of a colon appearing in the file name)  and
              defaults  to  the current session; <u>file2</u> may be omitted or may end with a slash, in which case
              the basename of <u>file1</u> will be added.  The sessions <u>sess1</u> and <u>sess2</u> must be distinct.

              The operation is performed using pipes, so it is required that the connections still be  valid
              in  a subshell, which is not the case under versions of some operating systems, presumably due
              to a system bug.


   <b>Bookmarks</b>
       The two functions <b>zfmark</b> and <b>zfgoto</b> allow you to `bookmark' the  present  location  (host,  user  and
       directory) of the current FTP connection for later use.  The file to be used for storing and retriev-
       ing bookmarks is given by the parameter <b>$ZFTP_BMFILE</b>; if not set when one of  the  two  functions  is
       called,  it  will  be  set  to the file <b>.zfbkmarks</b> in the directory where your zsh startup files live
       (usually <b>~</b>).

       <b>zfmark</b> <b>[</b> <u>bookmark</u> <b>]</b>
              If given an argument, mark the current host, user and directory under the  name  <u>bookmark</u>  for
              later  use  by <b>zfgoto</b>.  If there is no connection open, use the values for the last connection
              immediately before it was closed; it is an error if there was  none.   Any  existing  bookmark
              under the same name will be silently replaced.

              If  not  given  an argument, list the existing bookmarks and the points to which they refer in
              the form <u>user</u><b>@</b><u>host</u><b>:</b><u>directory</u>; this is the format in which they are stored, and the file may be
              edited directly.

       <b>zfgoto</b> <b>[</b> <b>-n</b> <b>]</b> <u>bookmark</u>
              Return  to  the  location given by <u>bookmark</u>, as previously set by <b>zfmark</b>.  If the location has
              user `<b>ftp</b>' or `<b>anonymous</b>', open the connection with <b>zfanon</b>, so that no password  is  required.
              If the user and host parameters match those stored for the current session, if any, those will
              be used, and again no password is required.  Otherwise a password will be prompted for.

              With the option <b>-n</b>, the bookmark is taken to be a nickname stored by the <b>ncftp</b> program in  its
              bookmark  file,  which is assumed to be <b>~/.ncftp/bookmarks</b>.  The function works identically in
              other ways.  Note that there is no mechanism for adding or modifying <b>ncftp</b> bookmarks from  the
              zftp functions.


   <b>Other</b> <b>functions</b>
       Mostly,  these  functions will not be called directly (apart from <b>zfinit</b>), but are described here for
       completeness.  You may wish to alter <b>zftp_chpwd</b> and <b>zftp_progress</b>, in particular.

       <b>zfinit</b> <b>[</b> <b>-n</b> <b>]</b>
              As described above, this is used to initialize the zftp function system.  The <b>-n</b> option should
              be used if the zftp command is already built into the shell.

       <b>zfautocheck</b> <b>[</b> <b>-dn</b> <b>]</b>
              This  function  is  called  to  implement  automatic reopening behaviour, as described in more
              detail below.  The options must appear in the first argument; <b>-n</b>  prevents  the  command  from
              changing  to the old directory, while <b>-d</b> prevents it from setting the variable <b>do_close</b>, which
              it otherwise does as a flag for automatically closing the connection after  a  transfer.   The
              host  and  directory  for  the last session are stored in the variable <b>$zflastsession</b>, but the
              internal host/user/password parameters must also be correctly set.

       <b>zfcd_match</b> <u>prefix</u> <u>suffix</u>
              This performs matching for completion of remote directory names.   If  the  remote  server  is
              UNIX,  it will attempt to persuade the server to list the remote directory with subdirectories
              marked, which usually works but is not guaranteed.  On other hosts it simply calls <b>zfget_match</b>
              and  hence  completes  all  files, not just directories.  On some systems, directories may not
              even look like filenames.

       <b>zfget_match</b> <u>prefix</u> <u>suffix</u>
              This performs matching for completion of remote filenames.  It caches files  for  the  current
              directory  (only)  in the shell parameter <b>$zftp_fcache</b>.  It is in the form to be called by the
              <b>-K</b> option of <b>compctl</b>, but also works when called from a widget-style completion function  with
              <u>prefix</u> and <u>suffix</u> set appropriately.

       <b>zfrglob</b> <u>varname</u>
              Perform remote globbing, as describes in more detail below.  <u>varname</u> is the name of a variable
              containing the pattern to be expanded; if there were any matches, the same  variable  will  be
              set to the expanded set of filenames on return.

       <b>zfrtime</b> <u>lfile</u> <u>rfile</u> <b>[</b> <u>time</u> <b>]</b>
              Set  the  local file <u>lfile</u> to have the same modification time as the remote file <u>rfile</u>, or the
              explicit time <u>time</u> in FTP format <b>CCYYMMDDhhmmSS</b> for the GMT timezone.

              Currently this requires <b>perl</b> version 5 to perform the conversion from GMT to local time.  This
              is unfortunately difficult to do using shell code alone.

       <b>zftp_chpwd</b>
              This  function is called every time a connection is opened, or closed, or the remote directory
              changes.  This version alters the title bar of an <b>xterm</b>-compatible or <b>sun-cmd</b> terminal  emula-
              tor  to  reflect  the  local and remote hostnames and current directories.  It works best when
              combined with the function <b>chpwd</b>.  In particular, a function of the form

                     <b>chpwd()</b> <b>{</b>
                       <b>if</b> <b>[[</b> <b>-n</b> <b>$ZFTP_USER</b> <b>]];</b> <b>then</b>
                         <b>zftp_chpwd</b>
                       <b>else</b>
                         <b>#</b> <b>usual</b> <b>chpwd</b> <b>e.g</b> <b>put</b> <b>host:directory</b> <b>in</b> <b>title</b> <b>bar</b>
                       <b>fi</b>
                     <b>}</b>

              fits in well.

       <b>zftp_progress</b>
              This function shows the status of the transfer.  It will not write anything unless the  output
              is  going to a terminal; however, if you transfer files in the background, you should turn off
              progress reports by hand using `<b>zstyle</b> <b>':zftp:*'</b> <b>progress</b> <b>none</b>'.  Note also that if you  alter
              it,  any  output  <u>must</u>  be to standard error, as standard output may be a file being received.
              The form of the progress meter, or whether it is used at all, can be configured without alter-
              ing the function, as described in the next section.

       <b>zffcache</b>
              This  is  used  to  implement caching of files in the current directory for each session sepa-
              rately.  It is used by <b>zfget_match</b> and <b>zfrglob</b>.


<b>MISCELLANEOUS</b> <b>FEATURES</b>
   <b>Configuration</b>
       Various styles are available using the standard shell style mechanism,  described  in  <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>.
       Briefly, the command `<b>zstyle</b> <b>':zftp:*'</b> <u>style</u> <u>value</u> ...'.  defines the <u>style</u> to have value <u>value</u>; more
       than one value may be given, although that is not useful in the cases described here.   These  values
       will then be used throughout the zftp function system.  For more precise control, the first argument,
       which gives a context in which the style applies, can be modified to include a  particular  function,
       as  for  example  `<b>:zftp:zfget</b>': the style will then have the given value only in the <b>zfget</b> function.
       Values for the same style in different contexts may be set; the most specific function will be  used,
       where  strings  are held to be more specific than patterns, and longer patterns and shorter patterns.
       Note that only the top level function name, as called by the user, is used; calling  of  lower  level
       functions  is  transparent  to  the user.  Hence modifications to the title bar in <b>zftp_chpwd</b> use the
       contexts <b>:zftp:zfopen</b>, <b>:zftp:zfcd</b>, etc., depending where it was called from.   The  following  styles
       are understood:

       <b>progress</b>
              Controls  the  way that <b>zftp_progress</b> reports on the progress of a transfer.  If empty, unset,
              or `<b>none</b>', no progress report is made; if `<b>bar</b>' a growing bar of inverse video  is  shown;  if
              `<b>percent</b>'  (or any other string, though this may change in future), the percentage of the file
              transferred is shown.  The bar meter requires that the width of the terminal be available  via
              the  <b>$COLUMNS</b>  parameter  (normally this is set automatically).  If the size of the file being
              transferred is not available, <b>bar</b> and <b>percent</b> meters will simply  show  the  number  of  bytes
              transferred so far.

              When  <b>zfinit</b>  is  run, if this style is not defined for the context <b>:zftp:*</b>, it will be set to
              `bar'.

       <b>update</b> Specifies the minimum time interval between updates of the  progress  meter  in  seconds.   No
              update  is made unless new data has been received, so the actual time interval is limited only
              by <b>$ZFTP_TIMEOUT</b>.

              As described for <b>progress</b>, <b>zfinit</b> will force this to default to 1.

       <b>remote-glob</b>
              If set to `1', `yes' or `true', filename generation (globbing)  is  performed  on  the  remote
              machine instead of by zsh itself; see below.

       <b>titlebar</b>
              If  set to `1', `yes' or `true', <b>zftp_chpwd</b> will put the remote host and remote directory into
              the titlebar of terminal emulators such as xterm or sun-cmd that allow this.

              As described for <b>progress</b>, <b>zfinit</b> will force this to default to 1.

       <b>chpwd</b>  If set to `1' `yes' or `true', <b>zftp_chpwd</b> will call the function <b>chpwd</b> when  a  connection  is
              closed.   This  is  useful  if the remote host details were put into the terminal title bar by
              <b>zftp_chpwd</b> and your usual <b>chpwd</b> also modifies the title bar.

              When <b>zfinit</b> is run, it will determine whether <b>chpwd</b> exists and if so it will set  the  default
              value for the style to 1 if none exists already.

       Note that there is also an associative array <b>zfconfig</b> which contains values used by the function sys-
       tem.  This should not be modified or overwritten.


   <b>Remote</b> <b>globbing</b>
       The commands for retrieving files usually perform filename generation (globbing) on their  arguments;
       this  can  be turned off by passing the option <b>-G</b> to each of the commands.  Normally this operates by
       retrieving a complete list of files for the  directory  in  question,  then  matching  these  locally
       against the pattern supplied.  This has the advantage that the full range of zsh patterns (respecting
       the setting of the option <b>EXTENDED_GLOB</b>) can be used.  However, it means that the directory part of a
       filename  will  not be expanded and must be given exactly.  If the remote server does not support the
       UNIX directory semantics, directory handling is problematic and it is recommended that globbing  only
       be used within the current directory.  The list of files in the current directory, if retrieved, will
       be cached, so that subsequent globs in the same  directory  without  an  intervening  <b>zfcd</b>  are  much
       faster.

       If  the  <b>remote-glob</b>  style (see above) is set, globbing is instead performed on the remote host: the
       server is asked for a list of matching files.  This is highly dependent on how the server  is  imple-
       mented, though typically UNIX servers will provide support for basic glob patterns.  This may in some
       cases be faster, as it avoids retrieving the entire list of directory contents.


   <b>Automatic</b> <b>and</b> <b>temporary</b> <b>reopening</b>
       As described for the <b>zfopen</b> command, a subsequent <b>zfopen</b> with no parameters will reopen  the  connec-
       tion to the last host (this includes connections made with the <b>zfanon</b> command).  Opened in this fash-
       ion, the connection starts in the default remote directory and  will  remain  open  until  explicitly
       closed.

       Automatic  re-opening is also available.  If a connection is not currently open and a command requir-
       ing a connection is given, the last connection is implicitly reopened.  In this  case  the  directory
       which  was  current  when  the  connection was closed again becomes the current directory (unless, of
       course, the command given changes it).  Automatic reopening will also take place  if  the  connection
       was  close  by the remote server for whatever reason (e.g. a timeout).  It is not available if the <b>-1</b>
       option to <b>zfopen</b> or <b>zfanon</b> was used.

       Furthermore, if the command issued is a file transfer, the connection will be closed after the trans-
       fer  is  finished,  hence  providing a one-shot mode for transfers.  This does not apply to directory
       changing or listing commands; for example a <b>zfdir</b> may reopen a connection but  will  leave  it  open.
       Also,  automatic  closure will only ever happen in the same command as automatic opening, i.e a <b>zfdir</b>
       directly followed by a <b>zfget</b> will never close the connection automatically.

       Information about the previous connection is given by the <b>zfstat</b> function.  So, for example, if  that
       reports:

              <b>Session:</b>        <b>default</b>
              <b>Not</b> <b>connected.</b>
              <b>Last</b> <b>session:</b>   <b>ftp.bar.com:/pub/textfiles</b>

       then the command <b>zfget</b> <b>file.txt</b> will attempt to reopen a connection to <b>ftp.bar.com</b>, retrieve the file
       <b>/pub/textfiles/file.txt</b>, and immediately close the connection again.  On  the  other  hand,  <b>zfcd</b>  <b>..</b>
       will open the connection in the directory <b>/pub</b> and leave it open.

       Note that all the above is local to each session; if you return to a previous session, the connection
       for that session is the one which will be reopened.


   <b>Completion</b>
       Completion of local and remote files, directories, sessions and bookmarks is supported.   The  older,
       <b>compctl</b>-style  completion  is defined when <b>zfinit</b> is called; support for the new widget-based comple-
       tion system is provided in the function <b>Completion/Zsh/Command/_zftp</b>, which should be installed  with
       the other functions of the completion system and hence should automatically be available.



zsh 4.3.4                                      April 19, 2006                                  ZSHZFTPSYS(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/zshzftpsys.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/zshzftpsys.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/zshzftpsys.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>How the ColorSync Manager Selects a CMM</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING59></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACI-58.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACI-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACI-122.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACI-60.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACI-2.html"><B>Advanced Color Imaging on the Mac OS</B></A> / <BR><DD><A HREF="ACI-55.html"><B>Chapter 4 - Developing ColorSync-Supportive Applications</B></A> / <A HREF="ACI-56.html"><B>About ColorSync Application Development</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING59-0></A>
<H2><A NAME=MARKER-9-35></A>How the ColorSync Manager Selects a CMM</H2>
 A profile header contains a field called the <CODE>CMMType</CODE> field that specifies the preferred CMM for that profile. When the source and destination profiles specify different CMMs or when a specified CMM is unavailable or unable to provide a requested color-matching service, the ColorSync Manager follows a CMM selection algorithm or arbitration scheme to determine which CMM to use for color conversion and matching. Here is how the CMM selection algorithm works:<P>
<UL>
<LI>If the source and destination profiles specify the same CMM and that CMM component is available and able to perform the matching, then the specified CMM maps the colors directly from the color space of the source profile to the color space of the destination profile. This is the simplest scenario, and <A HREF=#MARKER-9-36>Figure 4-1</A> illustrates it.<P>
</UL>
<B>Figure 4-1  Color <A NAME=MARKER-9-36></A>matching when the source and destination profiles specify the same CMM</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-18.jpg">
<UL>
<LI>If the source and destination profiles specify different CMMs, then the ColorSync Manager follows these steps to choose the CMM:<P>

<B>1.</B> If the CMM specified by the destination profile is available, is able to perform the color matching using the two profiles, and is not the Apple-supplied default CMM, then the ColorSync Manager uses this CMM. <A HREF=#MARKER-9-37>Figure 4-2</A> shows this scenario.<P>
</UL>


<B>Figure 4-2  <A NAME=MARKER-9-37></A>Color matching using the destination profile's CMM</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-19.jpg">

<ul><B>2.</b> If the destination profile's preferred CMM is unavailable or unable to perform the color-matching request using the two profiles, then the ColorSync Manager looks for the CMM specified by the source profile. If the CMM specified by the source profile is available, is able to perform the color matching using the two profiles, and is not the Apple-supplied default CMM, the ColorSync Manager uses this CMM. <A HREF=#MARKER-9-38>Figure 4-3</A> shows this scenario.<P>
</ul>


<B>Figure 4-3  <A NAME=MARKER-9-38></A>Color matching using the source profile's CMM</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-20.jpg">
<ul><b>3.</b> If both the source-preferred CMM and the destination-preferred CMM are available, but neither is able to perform the match alone, the ColorSync Manager uses the source profile's CMM to convert the colors of the source image from the source profile's color space to an interchange color space using the XYZ color space profile as the destination profile. Next, the ColorSync Manager uses the preferred CMM specified by the destination profile to convert the colors now specified in the interchange color space to colors expressed in the color space of the destination profile using the XYZ color space profile as the source profile. The color conversion and matching work this way if both profiles specify the same interchange color space. <A HREF=#MARKER-9-39>Figure 4-4</A> shows this scenario. <P>
</ul>


<B>Figure 4-4  Color <A NAME=MARKER-9-39></A>matching through an XYZ interchange space using both CMMs</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-21.jpg">
<ul><b>4.</b> If both the source-preferred CMM and the destination-preferred CMM are available, but neither is able to perform the match alone and both profiles specify different interchange color spaces, the ColorSync Manager uses the source profile's CMM to convert the colors of the source image from the source profile's color space to its interchange color space using the appropriate color space profile as the destination profile. The example shown in <A HREF=#MARKER-9-40>Figure 4-5</A> uses the XYZ color space profile as the destination profile. Then the ColorSync Manager inserts a part into the process, itself converting colors from the source profile's interchange color space to the destination profile's interchange color space. Next, the ColorSync Manager uses the preferred CMM specified by the destination profile to convert the colors now specified in the destination profile's interchange color space to colors expressed in the destination profile's color space using the appropriate color space profile as the source profile. The example shown in <A HREF=#MARKER-9-40>Figure 4-5</A> uses the Lab color space profile as the source profile.<P>
</ul>



<B>Figure 4-5  <A NAME=MARKER-9-40></A>Matching using both CMMs and two interchange color spaces</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-17.jpg">
<UL>
<LI>If neither the source nor the destination profile's preferred CMM is available or able to perform the color conversion and matching, then the ColorSync Manager uses the Apple-supplied default CMM, which will always attempt to perform the match. <A HREF=#MARKER-9-41>Figure 4-6</A> shows this scenario.<P>
</UL>
<B>Figure 4-6  <A NAME=MARKER-9-41></A>Color matching using the Apple-supplied default CMM</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-23.jpg">
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACI-58.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACI-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACI-122.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACI-60.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACI-3.html">&copy; Apple Computer, Inc.</A><br>13 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

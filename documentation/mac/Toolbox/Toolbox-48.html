<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Event Queue(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING48></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-47.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-49.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A> / <A HREF="Toolbox-43.html"><B>Event Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-44.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING48-0></A>
<H3><A NAME=MARKER-9-356></A>The Event Queue</H3>
 <A NAME=MARKER-2-234></A>The event queue is a standard Macintosh Operating System queue that the Operating System Event Manager maintains. Only mouse-up, mouse-down, key-up, key-down, auto-key, and disk-inserted events are stored in the Operating System event queue. In most cases, your application should not access the event queue directly. Instead you usually use the <CODE>WaitNextEvent</CODE> function, which can retrieve events from this queue as well as from other sources.<A NAME=MARKER-2-5></A><A NAME=MARKER-2-4></A><P>
 <A NAME=MARKER-2-361></A>The event queue consists of a header followed by the actual entries in the queue. The event queue has the same header as all standard Macintosh Operating System queues. The <CODE>Qhdr</CODE> data type defines the queue header.<A NAME=MARKER-2-361></A><P>
<PRE>
TYPE  QHdr = 
      RECORD
         qFlags:  Integer;    {queue flags}
         qHead:   QElemPtr;   {first queue entry}
         qTail:   QElemPtr;   {last queue entry}
      END;
</PRE>
 <A NAME=MARKER-2-363></A>The <CODE>EvQEl</CODE> data type defines an entry in the Operating System event queue. <A NAME=MARKER-2-194></A><P>
<PRE>
TYPE  EvQEl = 
      RECORD
         qLink:         QElemPtr;   {next queue entry}
         qType:         Integer;    {queue type (ORD(evType))}
         evtQWhat:      Integer;    {event code}
         evtQMessage:   LongInt;    {event message}
         evtQWhen:      LongInt;    {ticks since startup}
         evtQWhere:     Point;      {mouse location}
         evtQModifiers: Integer;    {modifier flags}
      END;
</PRE>
 Each entry in the event queue begins with 4 bytes of flags followed by a pointer to the next queue entry. The flags are maintained by and internal to the Operating System Event Manager. The queue entries are linked by pointers, and the first field of the <CODE>EvQEl</CODE> data type, which represents the structure of a queue entry, begins with a pointer to the next queue entry. Thus you cannot directly access the flags using the <CODE>EvQEl</CODE> data type. <A NAME=MARKER-2-191></A> <A NAME=MARKER-2-2></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-47.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-49.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>MyLDEF (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING263></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-262.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-264.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-202.html"><B>Chapter 4 - List Manager</B></A> / <A HREF="MoreToolbox-220.html"><B>List Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-261.html"><B>Application-Defined Routines</B></A> / <A HREF="MoreToolbox-262.html"><B>List Definition Procedures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING263-0></A>
<H3>MyLDEF</H3>
 A list definition procedure has the following syntax:<A NAME=MARKER-2-395></A><P>
<PRE>
PROCEDURE MyLDEF (message: Integer; selected: Boolean; 
                  VAR cellRect: Rect; theCell: Cell; 
                  dataOffset: Integer; dataLen: Integer;
                  theList: ListHandle);
</PRE>
<DL>
<DT><CODE>message</CODE>
<DD> A value that identifies the operation to be performed. These constants specify the four types of messages:
</DL>
<PRE>
            CONST 
               lInitMsg    = 0;  {do any special initialization}
               lDrawMsg    = 1;  {draw the cell}
               lHiliteMsg  = 2;  {invert cell's highlight state}
               lCloseMsg   = 3;  {do any special disposal action}
</PRE>
<DL>
<DT><CODE>selected</CODE>
<DD> A Boolean value that indicates whether the cell specified by the <CODE>theCell</CODE> parameter should be highlighted. This parameter is defined only for the <CODE>lDrawMessage</CODE> and <CODE>lHiliteMsg</CODE> messages.
<DT><CODE>cellRect</CODE>
<DD> The rectangle (in local coordinates of the list's graphics port) that encloses the cell specified by the <CODE>theCell</CODE> parameter. Although this parameter is defined as a <CODE>VAR</CODE> parameter, your list definition procedure must not change the coordinates of the rectangle. This parameter is defined only for the <CODE>lDrawMessage</CODE> and <CODE>lHiliteMsg</CODE> messages.
<DT><CODE>theCell</CODE>
<DD> The coordinates of the cell to be drawn or highlighted. This parameter is defined only for the <CODE>lDrawMessage</CODE> and <CODE>lHiliteMsg</CODE> messages.
<DT><CODE>dataOffset</CODE>
<DD> The location of the cell data associated with the cell specified by the <CODE>theCell</CODE> parameter. The location is specified as an offset from the beginning of the relocatable block referenced by the <CODE>cells</CODE> field of the list record. This parameter is defined only for the <CODE>lDrawMessage</CODE> and <CODE>lHiliteMsg</CODE> messages.
<DT><CODE>dataLen</CODE>
<DD> The length in bytes of the cell data associated with the cell specified by the <CODE>theCell</CODE> parameter. This parameter is defined only for the <CODE>lDrawMessage</CODE> and <CODE>lHiliteMsg</CODE> messages.
<DT><CODE>theList</CODE>
<DD> The list for which a message is being sent. Your application can access the list's list record, or it can call List Manager routines to manipulate the list.
</DL>
<A NAME=HEADING263-11></A>
<H5>DESCRIPTION</H5>
 The List Manager calls your list definition procedure whenever an application using the procedure creates a new list with the <CODE>LNew</CODE> function, needs a cell to be drawn, needs a cell's highlighting state to be reversed, or has called the <CODE>LDispose</CODE> procedure to dispose of a list.<P>
 In response to the <CODE>lInitMsg</CODE> message, your list definition procedure should perform any special initialization needed for a list. For example, the procedure might set fields of the list record, such as the <CODE>cellSize</CODE> and <CODE>indent</CODE> fields, to appropriate values. Your list definition procedure does not necessarily need to do anything in response to the initialization message. If it does nothing, then memory is still allocated for the list, and fields of the list record are set to the same values as they would be set to if the default list definition procedure were being used. (For more information on those values, see <A HREF=MoreToolbox-208.html#MARKER-9-99>"About the List Manager" beginning on page 4-13</A>.)<A NAME=MARKER-2-355></A><P>
 Your list definition procedure should draw the cell specified by the <CODE>theCell</CODE> parameter after receiving an <CODE>lDrawMsg</CODE> message. The procedure must ensure that it does not draw anywhere but within the rectangle specified by the <CODE>cellRect</CODE> parameter. If the <CODE>selected</CODE> parameter is <CODE>TRUE</CODE>, then your list definition procedure should draw the cell in its highlighted state; otherwise, it should draw the cell without highlighting. When drawing, your list definition procedure should take care not to permanently change any characteristics of the drawing environment.<P>
 Your list definition procedure should respond to the <CODE>lHiliteMsg</CODE> message by reversing the selection status of the cell contained within the rectangle specified by the <CODE>cellRect</CODE> parameter. If a cell is highlighted, your list definition procedure should remove the highlighting; if a cell is not highlighted, your list definition procedure should highlight it.<P>
 The List Manager sends your list definition procedure an <CODE>lCloseMsg</CODE> message before it disposes of a list and its data. Your list definition procedure need only respond to this message if additional memory has been allocated for the list. For example, your list definition procedure might allocate a relocatable block in response to the <CODE>lInitMsg</CODE> message. In this case, your list definition procedure would need to dispose of this relocatable block in response to the <CODE>lCloseMsg</CODE> message. Or, if your list definition procedure defines cells simply to contain pointers or handles to data stored elsewhere in memory, it would need to dispose of that memory in response to the <CODE>lCloseMsg</CODE> message.<P>
<A NAME=HEADING263-17></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 You must compile a list definition procedure as a resource of type <CODE>'LDEF'</CODE> before it can be used by an application. <A NAME=MARKER-2-361></A><A NAME=MARKER-2-48></A><A NAME=MARKER-2-399></A><A NAME=MARKER-2-400></A><A NAME=MARKER-2-142></A><P>
 Because a list definition procedure is stored in a code resource, it cannot have its own global variables that it accesses through the A5 register. (Some development systems, however, may allow code resources to access global variables through some other register, such as A4. See your development system's documentation for more information.) If your list definition procedure needs access to global data, it might store a handle to such data in the <CODE>refCon</CODE> or <CODE>userHandle</CODE> fields of the list record; however, applications would not then be able to use these fields for their own purposes.<A NAME=MARKER-2-402></A><A NAME=MARKER-2-403></A><P>
<A NAME=HEADING263-20></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The entry point of a list definition procedure must be at the beginning.<A NAME=MARKER-2-353></A><P>
<A NAME=HEADING263-22></A>
<H5>SEE ALSO</H5>
 For an example of a list definition procedure, see <A HREF=MoreToolbox-219.html#MARKER-9-274>"Writing Your Own List Definition Procedure" beginning on page 4-49</A>.<A NAME=MARKER-2-405></A><A NAME=MARKER-2-406></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-262.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-264.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

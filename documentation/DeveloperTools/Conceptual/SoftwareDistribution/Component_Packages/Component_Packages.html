<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Delivery Guide: Packaging Product Components</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Packaging Product Components"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/10000145i-CH7" title="Packaging Product Components"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../FilesSoftwareInstallation-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000524" target="_top">Files &amp; Software Installation</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/10000145i-CH1-DontLinkElementID_69">Software Delivery Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Managed_Installs/Managed_Installs.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Managed_Install_Definition/Managed_Install_Definition.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/10000145i-CH7-SW1" title="Packaging Product Components"></a><h1>Packaging Product Components</h1><p>After breaking down a product into distinct components (such as applications, frameworks, fonts, documentation, and so on), you create an installation package for each of the product’s components. An <strong>installation package</strong> is a file package that contains one component and information about the package and its payload. See <span class="content_text"><a href="../Managed_Installs/Managed_Installs.html#//apple_ref/doc/uid/10000145i-CH6-SW9">“What Is a Package?”</a></span> for more information about packages.</p><p>The Installer application can open a package and place its payload on a user’s system. Installation packages whose payload is a component of a multicomponent product are known as <strong>component packages</strong>.</p><p>To create a component package, you perform the following tasks:</p><ol class="ol"><li class="li"><p>Categorize the component.</p></li><li class="li"><p>Create the component package project directory.</p></li><li class="li"><p>Add the component files to the project directory.</p></li><li class="li"><p>Add executables to the project directory if the component requires them.</p></li><li class="li"><p>Create the component package.</p></li><li class="li"><p>Test the component package.</p></li></ol><p>The following sections describe these tasks in detail.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Component_Packages.html#//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_1">Categorize the Component</a>
				
			<br/>
			
        
			
			
				<a href="Component_Packages.html#//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_2">Create the Component Package Project Directory</a>
				
			<br/>
			
        
			
			
				<a href="Component_Packages.html#//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_3">Add the Component Files to the Package Project Directory</a>
				
			<br/>
			
        
			
			
				<a href="Component_Packages.html#//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_4">Add Executable Files to the Package Project Directory</a>
				
			<br/>
			
        
			
			
				<a href="Component_Packages.html#//apple_ref/doc/uid/10000145i-CH7-SW6">Create the Component Package</a>
				
			<br/>
			
        
			
			
				<a href="Component_Packages.html#//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_5">Test the Component Package</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_1" title="Categorize the Component"></a><h2>Categorize the Component</h2><p>There are several types of product components available in Mac OS X. Some examples are application packages (file packages that contain an application’s executable code and resources), frameworks (directories that contain shared executable code and resources), font files, and plug-ins. Categorizing a component helps you determine the appropriate installation destination for it. <span class="content_text">Table 5-1</span> shows some component categories and corresponding installation destinations. See <em><a href="../../../../MacOSX/Conceptual/BPFileSystem/index.html#//apple_ref/doc/uid/10000185i" target="_top">File System Overview</a></em> for detailed information.</p><a name="//apple_ref/doc/uid/10000145i-CH7-SW2" title="Table 5-1Component types and installation destinations"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 5-1&nbsp;&nbsp;</strong>Component types and installation destinations</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Type</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Destination</p></th></tr><tr><td  scope="row"><p>Application</p></td><td ><p><code>/Applications</code></p></td></tr><tr><td  scope="row"><p>Framework</p></td><td ><p><code>/Library/Frameworks</code></p></td></tr><tr><td  scope="row"><p>Font</p></td><td ><p><code>/Library/Fonts</code></p></td></tr><tr><td  scope="row"><p>Documentation</p></td><td ><p><code>/Library/Documentation</code></p></td></tr><tr><td  scope="row"><p>Command-line tool</p></td><td ><p><code>/usr/local/bin</code></p></td></tr></table></div><p><span class="content_text">Table 5-2</span> shows the categorization of a multicomponent product.</p><a name="//apple_ref/doc/uid/10000145i-CH7-SW3" title="Table 5-2Categorization of the components of a multicomponent product, called Levon"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 5-2&nbsp;&nbsp;</strong>Categorization of the components of a multicomponent product, called Levon</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Component</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Component type</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Installation destination</p></th></tr><tr><td  scope="row"><p><code>Levon.app</code></p></td><td ><p>Application</p></td><td ><p><code>/Applications</code></p></td></tr><tr><td  scope="row"><p><code>Levon_User_Guide.pdf</code></p></td><td ><p>Documentation</p></td><td ><p><code>/Library/Documentation</code></p></td></tr><tr><td  scope="row"><p><code>SharedServices.framework</code></p></td><td ><p>Framework</p></td><td ><p><code>/Library/Frameworks</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_2" title="Create the Component Package Project Directory"></a><h2>Create the Component Package Project Directory</h2><p>The component package project directory stores the component’s files, the package project file, and other installation files. For easy identification, you should include the version number of the component in the name of the project directory. For example, <span class="content_text">Listing 5-1</span> shows the names of the project directories for the three components of the Levon product.</p><a name="//apple_ref/doc/uid/10000145i-CH7-SW4" title="Listing 5-1Component-package project directories for a multicomponent product"></a><p class="codesample"><strong>Listing 5-1&nbsp;&nbsp;</strong>Component-package project directories for a multicomponent product</p><div class="codesample"><table><tr><td scope="row"><pre>LevonApp-1.0.0/<span></span></pre></td></tr><tr><td scope="row"><pre>LevonDoc-1.0/<span></span></pre></td></tr><tr><td scope="row"><pre>SharedServicesFwk-1.0/<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_3" title="Add the Component Files to the Package Project Directory"></a><h2>Add the Component Files to the Package Project Directory</h2><p>Inside the package project directory, create a directory to hold the component files, as shown in the highlighted lines in <span class="content_text">Listing 5-2</span>.</p><a name="//apple_ref/doc/uid/10000145i-CH7-SW5" title="Listing 5-2Adding component files to component-package project directories"></a><p class="codesample"><strong>Listing 5-2&nbsp;&nbsp;</strong>Adding component files to component-package project directories</p><div class="codesample"><table><tr><td scope="row"><pre>LevonApp-1.0.0/<span></span></pre></td></tr><tr><td scope="row"><pre class="bold">   component/</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      Levon.app</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre>LevonDoc-1.0/<span></span></pre></td></tr><tr><td scope="row"><pre class="bold">   component/</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      Levon_User_Guide.pdf</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre>SharedServicesFwk-1.0/<span></span></pre></td></tr><tr><td scope="row"><pre class="bold">   component/</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      SharedServices.framework</pre><pre><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_4" title="Add Executable Files to the Package Project Directory"></a><h2>Add Executable Files to the Package Project Directory</h2><p>If your component requires tailored install operations or needs to specify system and volume requirements, add the <code>extras</code> directory to the package project directory containing the appropriate executables. <span class="content_text">Listing 5-3</span> highlights the <code>extras</code> directories in two package project directories.</p><a name="//apple_ref/doc/uid/10000145i-CH7-SW7" title="Listing 5-3Adding executables to component-package project directories"></a><p class="codesample"><strong>Listing 5-3&nbsp;&nbsp;</strong>Adding executables to component-package project directories</p><div class="codesample"><table><tr><td scope="row"><pre>LevonApp-1.0.0/<span></span></pre></td></tr><tr><td scope="row"><pre>   component/<span></span></pre></td></tr><tr><td scope="row"><pre>      Levon.app<span></span></pre></td></tr><tr><td scope="row"><pre class="bold">   extras/</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      InstallationCheck</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      VolumeCheck</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      preflight</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      postupgrade</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre>LevonDoc-1.0/<span></span></pre></td></tr><tr><td scope="row"><pre>   component/<span></span></pre></td></tr><tr><td scope="row"><pre>      Levon_User_Guide.pdf<span></span></pre></td></tr><tr><td scope="row"><pre>SharedServicesFwk-1.0/<span></span></pre></td></tr><tr><td scope="row"><pre>   component/<span></span></pre></td></tr><tr><td scope="row"><pre>      SharedServices.framework<span></span></pre></td></tr><tr><td scope="row"><pre class="bold">   extras/</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      InstallationCheck</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      VolumeCheck</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      preflight</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      postinstall</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">      postupgrade</pre><pre><span></span></pre></td></tr></table></div><p>See <span class="content_text"><a href="../Install_Operations/Install_Operations.html#//apple_ref/doc/uid/10000145i-CH14-SW1">“Specifying Install Operations”</a></span> and <span class="content_text"><a href="../Legacy_Requirements/Legacy_Requirements.html#//apple_ref/doc/uid/10000145i-CH13-SW1">“Specifying System and Volume Requirements in Pre-Tiger Systems”</a></span> for details on install operations and executable-based installation requirements.</p><a name="//apple_ref/doc/uid/10000145i-CH7-SW6" title="Create the Component Package"></a><h2>Create the Component Package</h2><p>After you have created the package project directory, you use PackageMaker (<code>/Developer/Applications/Utilities</code>) to create the component package project file.</p><p>To create a component package in PackageMaker:</p><ol class="ol"><li class="li"><p>Create a single package project.</p></li><li class="li"><p>Enter the package’s title and description.</p></li><li class="li"><p>Identify the directory that contains the component’s files (for example, the <code>component</code> directory in the package project directory).</p></li><li class="li"><p>Edit the component directory’s ownership and access permissions settings using the File Permissions editor.</p><p>The files that the Installer application places on the installation host have the ownership and access permissions specified in the component files in the package. Therefore, you must set up the owner and access permissions of component files appropriately before generating the installation package; otherwise, users may have difficulty manipulating those files after they are installed. In most cases, the owner should be <code>root</code> and the group <code>admin</code>. Use the permissions recommended in the File Permissions editor.</p><div class="notebox"><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_32" title="Overwriting directory access permissions"></a><p><strong>Overwriting directory access permissions:</strong>&nbsp;The Installer application assigns access permissions to directories that don’t exist on the installation volume but are part of a product’s structure. (These directories are specified in the component directory when you created the component package.) When a directory that’s part of the component hierarchy already exists on the installation volume, its permissions are modified only if the package specifies that directory permissions must be overwritten. Because modifying the permissions of existing directories in Mac OS X—especially standard directories in the local and system domain—may impair the normal operation of the installation host, you should not generally have packages overwrite directory permissions. However, components that use an internal hierarchy that doesn’t include Mac OS X standard directories may need to overwrite the access permissions of their internal directories to ensure a successful install.</p>To illustrate this situation, analyze the structure of the Nificky component directory, shown here.</p><div class="codesample"><table><tr><td scope="row"><pre>component/<span></span></pre></td></tr><tr><td scope="row"><pre>    Nificky/<span></span></pre></td></tr><tr><td scope="row"><pre>        Nificky.app<span></span></pre></td></tr><tr><td scope="row"><pre>        ReadMe.rtf<span></span></pre></td></tr></table></div>The installation destination for the Nificky application component is <code>/Applications</code>. Therefore, after the component is installed, the <code>Applications</code> directory on the installation volume contains the Nificky directory, which itself contains the <code>Nificky.app</code> file package and the <code>ReadMe.rtf</code> file. But, if <code>Applications/Nificky</code> already exists on the volume and its access permissions do not allow modification, the install fails. Specifying that the installation package for the Nificky application overwrite directory access permissions ensures that the Installer application modifies the permissions on <code>Applications/Nificky</code> to allow it to place files within the directory. The access permissions of the <code>Applications</code> directory are untouched.</p></div><div class="importantbox"><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_33" title="Important:"></a><p><strong>Important:</strong>&nbsp;Never include Mac OS X standard directories inside a component’s hierarchy. That is, do not reflect any standard part of the Mac OS X file system (in any of the file system domains) inside your component’s structure.</p><p></p></div></li><li class="li"><p>Set the installation destination for the component, and specify an appropriate authentication level and postinstallation process action, if needed.</p><div class="notebox"><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_34" title="Installing into the user&acirc;&#128;&#153;s home directory"></a><p><strong>Installing into the user’s home directory:</strong>&nbsp;One way to place files into a user’s home directory is to specify <code>/Users/Shared</code> as the installation destination and use an install operation to move the product files into the current user’s home directory (specified by the <code>$HOME</code> environment variable). See <span class="content_text"><a href="../Install_Operations/Install_Operations.html#//apple_ref/doc/uid/10000145i-CH14-SW1">“Specifying Install Operations”</a></span> for details.</p></div></li><li class="li"><p>Identify the subdirectory in the project directory that contains executable files that specify installation requirements or install operations, if needed.</p></li><li class="li"><p>Set the package identifier and version number.</p><p>A package’s identifier and version number help the Installer application determine the best way to update a product’s files during an install on a system on which the package has already been installed. You must set these two package properties for every package you create.</p><p>For applications and frameworks, use the bundle identifier (<code>CFBundleIdentifier</code>) specified in their <code>Info.plist</code> files as a starting point. For example, if the bundle ID of an application is <code>com.mycompany.Levon</code>, the package identifier should be <code>com.mycompany.Levon.pkg</code>. Keep in mind that the package identifier must be unique. (For detailed information on the <code>CFBundleIdentifier</code> and other <code>Info.plist</code> keys, see <em><a href="../../../../MacOSX/Conceptual/BPRuntimeConfig/index.html#//apple_ref/doc/uid/10000170i" target="_top">Runtime Configuration Guidelines</a></em>.)</p><div class="notebox"><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_35" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>Info.plist</code> file is located in the <code>Contents</code> directory of application and plug-in file packages (use the Finder Show Package Contents command to reveal the contents of file packages). In a framework, the <code>Info.plist</code> file is located in the Resources directory.</p></div><p>The package version for application, framework, and plug-in component packages should be the value for the <code>CFBundleShortVersionString</code> property of the component they contain. In framework component packages, use the value for the <code>CFBundleVersion</code> property. For other component types, choose an appropriate package identifier and package version number.</p><div class="importantbox"><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_36" title="Important:"></a><p><strong>Important:</strong>&nbsp;Installer does not use the identifier and version information specified in the <code>Info.plist</code> files of a package’s payload.</p><p></p></div></li></ol><p>After you’ve defined a package, use the PackageMaker Build command to generate the component package (<code>.pkg</code>) file. You can also save the package project file in the project directory for future use.</p><a name="//apple_ref/doc/uid/10000145i-CH7-DontLinkElementID_5" title="Test the Component Package"></a><h2>Test the Component Package</h2><p>Before adding a component package to a metapackage or a distribution package, it’s good practice to ensure that the package installs correctly on its own. You accomplish this task by opening the package in the Installer application and performing the installation process, confirming that the component files are installed correctly.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Managed_Installs/Managed_Installs.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Managed_Install_Definition/Managed_Install_Definition.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution/Component_Packages/Component_Packages.html%3Fid%3D10000145i-5.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution/Component_Packages/Component_Packages.html%3Fid%3D10000145i-5.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution/Component_Packages/Component_Packages.html%3Fid%3D10000145i-5.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
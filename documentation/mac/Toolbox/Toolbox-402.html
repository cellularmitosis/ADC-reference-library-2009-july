<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GetNewDialog(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING402></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-401.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-403.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-370.html"><B>Chapter 6 - Dialog Manager</B></A> / <A HREF="Toolbox-386.html"><B>Dialog Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-389.html"><B>Dialog Manager Routines</B></A> / <A HREF="Toolbox-401.html"><B>Creating and Disposing of Dialog Boxes</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING402-0></A>
<H3><A NAME=MARKER-9-438></A>GetNewDialog</H3>
 <A NAME=MARKER-11-439></A><A NAME=MARKER-2-440></A><A NAME=MARKER-2-441></A>To create a dialog box from a description in a dialog resource, use the <CODE>GetNewDialog</CODE> function.<P>
<PRE>
FUNCTION GetNewDialog (dialogID: Integer; dStorage: Ptr; 
                        behind: WindowPtr): DialogPtr;
</PRE>
<DL>
<DT><CODE>dialogID</CODE>
<DD> The resource ID of a dialog resource. If the dialog resource is missing, <BR>the Dialog Manager returns to your application without creating the dialog box.
<DT><CODE>dStorage</CODE>
<DD> A pointer to the memory for the dialog record. If you set this parameter to <CODE>NIL</CODE> for modal dialog boxes and movable modal dialog boxes, the Dialog Manager automatically allocates memory for them in your application heap. For a modeless dialog box, however, you should allocate your <BR>own memory as you would for a window--otherwise, your heap could become fragmented.
<DT><CODE>behind</CODE>
<DD> A pointer to the window behind which the dialog box is to be placed <BR>on the desktop. Always set this parameter to the window pointer <CODE>Pointer(-1)</CODE> to bring the dialog box in front of all other windows.
</DL>
<A NAME=HEADING402-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>GetNewDialog</CODE> function creates a dialog record from the information in the dialog resource and returns a pointer to it. You can use this pointer with Window Manager or QuickDraw routines to manipulate the dialog box. If the dialog resource specifies that the dialog box should be visible, the dialog box is displayed. If the dialog resource specifies that the dialog box should initially be invisible, use the Window Manager procedure <CODE>ShowWindow</CODE> to display the dialog box.<P>
 If you supply a dialog color table resource with the same resource ID as the dialog resource, <CODE>GetNewDialog</CODE> uses the <CODE>NewColorDialog</CODE> function and returns a pointer <BR>to a color graphics port. If no dialog color table resource is present, <CODE>GetNewDialog</CODE> <BR>uses <CODE>NewDialog</CODE> to return a pointer to a black-and-white graphics port, although <BR>system software draws the window frame using the system's default colors.<P>
 The <CODE>dStorage</CODE> and <CODE>behind</CODE> parameters of <CODE>GetNewDialog</CODE> have the same meaning as they do in the Window Manager function <CODE>GetNewWindow</CODE>. Always set the <CODE>behind</CODE> parameter to <CODE>Pointer(-1)</CODE> to bring the dialog box to the front.<P>
 The dialog resource contains the resource ID of the dialog box's item list resource. After calling the Resource Manager to read the item list resource into memory (if it's not already in memory), <CODE>GetNewDialog</CODE> makes a copy of the item list resource and uses that copy; thus you may have several dialog boxes with identical items.<P>
 If you provide a dialog color table resource, <CODE>GetNewDialog</CODE> copies it before passing it to the Window Manager routine <CODE>SetWinColor</CODE> unless the number-of-entries element of the dialog color table resource is set to -1, in which case the default window colors are used instead. The <CODE>GetNewDialog</CODE> function makes the copy so that the dialog color table resource can be purged without affecting the dialog box.<P>
<A NAME=HEADING402-12></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>GetNewDialog</CODE> function doesn't release the memory occupied by the resources. Therefore, your application should mark all resources used for a dialog box as purgeable.<P>
 If either the dialog resource or the item list resource can't be read, the function result is <CODE>NIL</CODE>; your application should test to ensure that <CODE>NIL</CODE> is not returned before performing any more operations with the dialog box or its items.<P>
 For modal dialog boxes, the Dialog Manager function <CODE>ModalDialog</CODE> traps all events. This prevents your event loop from receiving activate events for your windows. Thus, <BR>if one of your application's windows is active when you use <CODE>GetNewDialog</CODE> to create <BR>a modal dialog box, you must explicitly deactivate that window before displaying the modal dialog box.<P>
 If you ever need to display a dialog box while your application is running in the background or is otherwise invisible to the user, you should use the Notification Manager to post a notification to the user. The Notification Manager automatically displays an alert box containing whatever message you specify; you do not use the Dialog Manager to <BR>create the alert box yourself.<P>
 Note that the Notification Manager provides a one-way communications path from <BR>your application to the user. There is no provision for carrying information back from <BR>the user to your application while it is in the background (although it is possible for <BR>your application to determine if the notification was received). If you need to solicit information from the user, use the Notification Manager to inform the user to bring <BR>your application to the foreground, where the user can then respond to the dialog box that your application presents.<P>
 The <CODE>GetNewDialog</CODE> function uses either <CODE>NewDialog</CODE> or <CODE>NewColorDialog</CODE>, each of which generates an update event for the entire window contents. Thus, with the exception of controls, items aren't drawn immediately. The Dialog Manager calls the Control Manager to draw controls, and the Control Manager draws them immediately. So the controls won't be drawn twice, the Dialog Manager calls the Window Manager procedure <CODE>ValidRect</CODE> for the enclosing rectangle of each control. If you find that there is too great a lag between the drawing of controls and the drawing of other items, try making the dialog box initially invisible and then calling the Window Manager procedure <CODE>ShowWindow</CODE> to show it.<P>
<A NAME=HEADING402-19></A>
<H5>SEE ALSO</H5>
 See <A HREF=Toolbox-380.html#MARKER-9-111>"Creating Dialog Boxes" beginning on page 6-23</A> and <A HREF=Toolbox-384.html#MARKER-9-231>"Displaying Alert and Dialog Boxes" beginning on page 6-61</A> for discussions and examples of how to use <CODE>GetNewDialog</CODE>.<P>
 The <CODE>GetNewWindow</CODE> and <CODE>ShowWindow</CODE> procedures are described in the chapter "Window Manager" of this book. The Notification Manager is described in the <BR>chapter "Notification Manager" in <I>Inside Macintosh: Processes.</I><P>
 <A HREF=Toolbox-384.html#MARKER-9-257>"Adjusting Menus for Modal Dialog Boxes" beginning on page 6-68</A> and <A HREF=Toolbox-384.html#MARKER-9-280>"Adjusting Menus for Movable Modal and Modeless Dialog Boxes" on page 6-73</A> discuss menu adjustment when your application displays dialog boxes. See <A HREF=Toolbox-381.html#MARKER-9-162>"Titles for Buttons, Checkboxes, and Radio Buttons" beginning on page 6-37</A> and <A HREF=Toolbox-381.html#MARKER-9-171>"Text Strings for Static Text and Editable Text Items" beginning on page 6-40</A> for recommendations about messages and control titles in dialog boxes.<A NAME=MARKER-2-442></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-401.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-403.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html><head>
    <title>MIDIDriverInterface</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="generator" content="HeaderDoc" />
<link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style></head><body bgcolor="#ffffff">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/MusicAudio/index.html#//apple_ref/doc/uid/TP30001281-TP30000428" target="_top">Audio</a> <b>&gt;</b> <a href="../../../../../../../reference/MusicAudio/idxCoreAudio-date.html#//apple_ref/doc/uid/TP30001281-TP30000428-TP30000500" target="_top">Core Audio</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/CACoreMIDIServerRef" target="_top">Core MIDI Server Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>


<!-- end of header -->
<a name="top"></a>
<a name="//apple_ref/doc/class/MIDIDriverInterface" title="MIDIDriverInterface"></a>
<hr><table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h1><a name="MIDIDriverInterface">MIDIDriverInterface</a></h1>
</td></tr></table><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr><td scope="row"><b>Inherits from:</b></td><td><div style="margin-bottom:1px"><div class="content_text"><!-- a -->struct<!-- /a --></div></div></td></tr>
<tr><td scope="row"><b>Declared In:</b></td><td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">MIDIDriver.h</a></div></div></td></tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract -->		The COM-style interface to a MIDI driver.<!-- end abstract --></p>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->
This is the function table interface to a MIDI driver.  Both version 1 and 2 drivers use
this same table of function pointers (except as noted).
<br><br>
Drivers which support both the version 1 and version 2 interfaces can tell which version
of the server is running by checking to see whether kMIDIDriverInterface2ID or
kMIDIDriverInterfaceID is passed to the factory function.  If the version 1 interface is
requested, the driver should behave as if it is a version 1 driver.
<!-- end discussion --></p>
<hr><br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/Configure" target="doc">Configure</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/EnableSource" target="doc">EnableSource</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/FindDevices" target="doc">FindDevices</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/Flush" target="doc">Flush</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/Monitor" target="doc">Monitor</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/Send" target="doc">Send</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/Start" target="doc">Start</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/com/intfm/MIDIDriverInterface/Stop" target="doc">Stop</a></tt></dt>
<dd></dd>
</dl>
<hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/Configure;  name=Configure -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/Configure"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="Configure">Configure</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">Configure</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <a href="../../../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIDeviceRef" target="_top" class="type"><span class="type">MIDIDeviceRef</span></a> <span class="param">device</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->not currently used
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/EnableSource;  name=EnableSource -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/EnableSource"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="EnableSource">EnableSource</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">EnableSource</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <a href="../../../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIEndpointRef" target="_top" class="type"><span class="type">MIDIEndpointRef</span></a> <span class="param">src</span>,
    <!-- a --><span class="type">Boolean</span><!-- /a --> <span class="param">enabled</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->A client has opened or closed a connection, and now the server is telling the driver
that input from a particular source either does or does not have any listeners in
the system. The driver may use this information to decide whether to pass messages
from the source to the server, and it may even be able to tell the source hardware
not to generate incoming MIDI I/O for that source.
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/FindDevices;  name=FindDevices -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/FindDevices"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="FindDevices">FindDevices</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">FindDevices</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" target="_top" class="type"><span class="type">MIDIDeviceListRef</span></a> <span class="param">devList</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This is only called for version 1 drivers. The server is requesting that the driver
detect the devices which are present. For each device present, the driver should
create a MIDIDeviceRef with entities, using MIDIDeviceCreate and
MIDIDeviceAddEntity, and add the device to the supplied MIDIDeviceListRef, using
MIDIDeviceListAddDevice.
<br><br>
The driver should not retain any references to the created devices and entities.
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/Flush;  name=Flush -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/Flush"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="Flush">Flush</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">Flush</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <a href="../../../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIEndpointRef" target="_top" class="type"><span class="type">MIDIEndpointRef</span></a> <span class="param">dest</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="param">destRefCon1</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="param">destRefCon2</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Only for version 2 drivers (new for CoreMIDI 1.1).
<br><br>
Drivers which support schedule-ahead, when receiving this message, should unschedule
all pending output to the specified destination. If the destination is null, the
driver should unschedule all pending output to all destinations.
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/Monitor;  name=Monitor -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/Monitor"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="Monitor">Monitor</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">Monitor</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <a href="../../../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIEndpointRef" target="_top" class="type"><span class="type">MIDIEndpointRef</span></a> <span class="param">dest</span>,
    <span class="keyword">const</span> <a href="../../../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tag/MIDIPacketList" target="_top" class="type"><span class="type">MIDIPacketList</span></a> *<span class="param">pktlist</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Only for version 2 drivers (new for CoreMIDI 1.1).
<br><br>
Some specialized drivers (e.g. a MIDI monitor display) may wish to intercept and
look at all outgoing MIDI messages. After a driver calls
MIDIDriverEnableMonitoring(true) on itself, this function is called with the
outgoing MIDI packets for all destinations in the system. The Monitor function
cannot rely on the MIDI events arriving in order, due to MIDIServer's schedule-ahead
facilities.
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/Send;  name=Send -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/Send"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="Send">Send</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">Send</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <span class="keyword">const</span> <a href="../../../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tag/MIDIPacketList" target="_top" class="type"><span class="type">MIDIPacketList</span></a> *<span class="param">pktlist</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="param">destRefCon1</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="param">destRefCon2</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Send a MIDIPacketList to the destination endpoint whose refCons are being passed as
arguments.
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/Start;  name=Start -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/Start"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="Start">Start</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">Start</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>,
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" target="_top" class="type"><span class="type">MIDIDeviceListRef</span></a> <span class="param">devList</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->The server is telling the driver to begin MIDI I/O.
<br><br>
The provided device list contains the devices which were previously located by
FindDevices (in the case of a version 1 driver), or the devices which are owned by
this driver and are currently in the current MIDISetup (for version 2 drivers).
<br><br>
The provided devices may or may not still be present. A version 1 driver should
attempt to use as many of the devices as are actually present.
<br><br>
A version 2 driver may make calls such as MIDISetupAddDevice, MIDIDeviceAddEntity,
MIDIDeviceRemoveEntity to dynamically modify the system's current state. For devices
in the provided device list which are not present, the driver should set their
kMIDIPropertyOffline property to 1. A version 2 driver may also set up
notifications when the IORegistry changes, to detect connection and disconnection of
devices it wishes to control. At these times also, the driver may change the
devices' kMIDIPropertyOffline, and dynamically modify the system's current state to
reflect the devices which are present. When passing a CFRunLoopRef to IOKit for
notification purposes, the driver must use the server's main runloop, which is
obtained with CFRunLoopGetCurrent().
<br><br>
The driver will probably want to iterate through the destination endpoints and
assign their driver refCons, so as to identify multiple destinations when Send() is
called.
<br><br>
The provided device list remains owned by the system and can be assumed to contain
only devices owned by this driver. The driver may retain references to the devices
in this list and any it creates while running.
 <!-- end discussion --></p>
<p></p><hr><!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/MIDIDriverInterface/Stop;  name=Stop -->
<a name="//apple_ref/doc/com/intfm/MIDIDriverInterface/Stop"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="Stop">Stop</a></h3>
</td></tr></table><hr><p></p><pre><a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> ( *<!-- a --><span class="function">Stop</span><!-- /a -->)(
    <a href="../../CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" target="_top" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">self</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->The server is telling the driver to terminate MIDI I/O. All I/O operations that
were begun in Start, or as a result of a subsequent IOKit notification, should be
terminated.
 <!-- end discussion --></p>
<p></p><p><!-- start of footer -->

	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/CACoreMIDIServerRef/MIDIDriver/Classes/MIDIDriverInterface/CompositePage.html%3Fid%3DTP40002092-1.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/CACoreMIDIServerRef/MIDIDriver/Classes/MIDIDriverInterface/CompositePage.html%3Fid%3DTP40002092-1.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/CACoreMIDIServerRef/MIDIDriver/Classes/MIDIDriverInterface/CompositePage.html%3Fid%3DTP40002092-1.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>



<!-- end of footer -->
Last Updated: 2008-03-11
</p></body></html>

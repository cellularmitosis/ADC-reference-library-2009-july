<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Creating a View</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=5830"> </A><A NAME="11080"> </A>Creating a View</H1><P CLASS="T1.Text1"><A NAME="pgfId=3937"> </A><A NAME="marker=3936"> </A>A view is a collection of a model, a group of lights, a camera, a renderer, and a draw context. Now that you've defined functions that create all the requisite parts of a view (except the renderer), you can create a view, as illustrated in <A HREF="qd3dintroduction.10.htm#33785" CLASS="XRef">Listing&nbsp;9</A>. To do this, you create a new empty view object and then explicitly add the parts to it.</P><P CLASS="I.Important"><A NAME="pgfId=5800"> </A>To create an image in a window, a view must contain at least a camera, a renderer, and a draw context. </P><P CLASS="L.Listing"><A NAME="pgfId=3942"> </A>Listing&nbsp;9<A NAME="33785"> </A>Creating a view</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=11097"> </A>TQ3ViewObject MyNewView (WindowPtr theWindow)<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myStatus;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3ViewObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myView;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3DrawContextObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myDrawContext;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3RendererObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myRenderer;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3CameraObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myCamera;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3GroupObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myLights;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myView = Q3View_New();<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myView == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Create and set draw context.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContext = MyNewDrawContext(theWindow);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myDrawContext == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myStatus = Q3View_SetDrawContext(myView, myDrawContext);<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myDrawContext);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myStatus == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Create and set renderer.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myRenderer = Q3Renderer_NewFromType(kQ3RendererTypeInteractive);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myRenderer == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myStatus = Q3View_SetRenderer(myView, myRenderer);<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myRenderer);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myStatus == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Create and set camera.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myCamera = MyNewCamera();<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myCamera == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myStatus = Q3View_SetCamera(myView, myCamera);<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myCamera);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myStatus == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Create and set lights.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myLights = MyNewLights();<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myLights == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myStatus = Q3View_SetLightGroup(myView, myLights);<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myLights);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myStatus == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;return (myView);<BR></CODE><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=11103"> </A>bail:<BR>&nbsp;&nbsp;&nbsp;&nbsp;/*If any of the above failed, then don't return a view.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;return (NULL);<BR>}<BR></CODE><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of Sound Components (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING314></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-313.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-315.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-266.html"><B>Chapter 5 - Sound Components</B></A></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="../../../referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING314-0></A>
<H1>Summary of Sound Components</H1>
 This section provides a C summary for the constants, data types, and routines you can use to write a sound component. There are currently no Pascal interfaces available for writing sound components.<P>
<A NAME=HEADING314-2></A>
<H2>C Summary</H2>
<A NAME=HEADING314-3></A>
<H3>Constants</H3>
<PRE>
/*component types*/
#define kSoundComponentType      'sift'   /*utility component*/
#define kMixerType               'mixr'   /*mixer component*/
#define kSoundHardwareType       'sdev'   /*sound output device component*/
#define kSoundCompressor         'scom'   /*compression component*/
#define kSoundDecompressor       'sdec'   /*decompression component*/
#define kNoSoundComponentType    '****'   /*no type*/

/*subtypes for kSoundComponentType component type*/
#define kRate8SubType            'ratb'   /*8-bit rate converter*/
#define kRate16SubType           'ratw'   /*16-bit rate converter*/
#define kConverterSubType        'conv'   /*sample format converter*/
#define kSndSourceSubType        'sour'   /*generic source component*/

/*subtypes for kMixerType component type*/
#define kMixer8SubType           'mixb'   /*8-bit mixer*/
#define kMixer16SubType          'mixw'   /*16-bit mixer*/

/*subtypes for kSoundHardwareType component type*/
#define kClassicSubType          'clas'   /*Classic hardware*/
#define kASCSubType              'asc '   /*ASC device*/
#define kDSPSubType              'dsp '   /*DSP device*/

/*subtypes for kSoundCompressor and kSoundDecompressor component types*/
#define kMace3SubType            'MAC3'   /*MACE 3:1*/
#define kMace6SubType            'MAC6 '  /*MACE 6:1*/
#define kCDXA4SubType            'CDX4'   /*CD/XA 4:1*/
#define kCDXA2SubType            'CDX2'   /*CD/XA 2:1*/
#define kSoundComponentCodeType  'sift'   /*sound component code type*/

/*first selector that can be delegated up the chain*/
#define kDelegatedSoundComponentSelectors       0x0100

/*Component Manager selectors for routines*/
enum {
   /*the following calls cannot be delegated*/
   kSoundComponentInitOutputDeviceSelect     = 1,
   kSoundComponentSetSourceSelect,
   kSoundComponentGetSourceSelect,
   kSoundComponentGetSourceDataSelect,
   kSoundComponentSetOutputSelect,
   /*the following calls can be delegated*/
   kSoundComponentAddSourceSelect = kDelegatedSoundComponentSelectors + 1,
   kSoundComponentRemoveSourceSelect,
   kSoundComponentGetInfoSelect,
   kSoundComponentSetInfoSelect,
   kSoundComponentStartSourceSelect,
   kSoundComponentStopSourceSelect,
   kSoundComponentPauseSourceSelect,
   kSoundComponentPlaySourceBufferSelect
};

/*sound component information selectors*/
#define siChannelAvailable       'chav'   /*number of channels available*/
#define siCompressionAvailable   'cmav'   /*compression types available*/
#define siCompressionFactor      'cmfa'   /*current compression factor*/
#define siCompressionType        'comp'   /*current compression type*/
#define siHardwareMute           'hmut'   /*current hardware mute state*/
#define siHardwareVolume         'hvol'   /*current hardware volume*/
#define siHardwareVolumeSteps    'hstp'   /*number of hardware volume steps*/
#define siHeadphoneMute          'pmut'   /*current headphone mute state*/
#define siHeadphoneVolume        'pvol'   /*current headphone volume*/
#define siHeadphoneVolumeSteps   'hdst'   /*num. of headphone volume steps*/
#define siNumberChannels         'chan'   /*current number of channels*/
#define siQuality                'qual'   /*current quality*/
#define siRateMultiplier         'rmul'   /*current rate multiplier*/
#define siSampleRate             'srat'   /*current sample rate*/
#define siSampleRateAvailable    'srav'   /*sample rates available*/
#define siSampleSize             'ssiz'   /*current sample size*/
#define siSampleSizeAvailable    'ssav'   /*sample sizes available*/
#define siSpeakerMute            'smut'   /*current speaker mute*/
#define siSpeakerVolume          'svol'   /*current speaker volume*/
#define siVolume                 'volu'   /*current volume setting*/

/*audio data format types*/
#define kOffsetBinary            'raw '
#define kTwosComplement          'twos'
#define kMACE3Compression        'MAC3'
#define kMACE6Compression        'MAC6'

/*sound component features flags*/
#define k8BitRawIn               (1 &lt;&lt; 0)    /*data flags*/
#define k8BitTwosIn              (1 &lt;&lt; 1)
#define k16BitIn                 (1 &lt;&lt; 2)
#define kStereoIn                (1 &lt;&lt; 3)
#define k8BitRawOut              (1 &lt;&lt; 8)
#define k8BitTwosOut             (1 &lt;&lt; 9)
#define k16BitOut                (1 &lt;&lt; 10)
#define kStereoOut               (1 &lt;&lt; 11)

#define kReverse                 (1 &lt;&lt; 16)   /*action flags*/
#define kRateConvert             (1 &lt;&lt; 17)
#define kCreateSoundSource       (1 &lt;&lt; 18)

#define kHighQuality             (1 &lt;&lt; 22)   /*performance flags*/
#define kRealTime                (1 &lt;&lt; 23)

/*action flags for SoundComponentPlaySourceBuffer*/
#define kSourcePaused            (1 &lt;&lt; 0)
#define kPassThrough             (1 &lt;&lt; 16)
#define kNoSoundComponentChain   (1 &lt;&lt; 17)

/*flags for OpenMixerSoundComponent*/
#define kNoMixing                (1 &lt;&lt; 0)    /*don't mix sources*/
#define kNoSampleRateConversion  (1 &lt;&lt; 1)    /*don't convert sample rate*/
#define kNoSampleSizeConversion  (1 &lt;&lt; 2)    /*don't convert sample size*/
#define kNoSampleFormatConversion            \
                                 (1 &lt;&lt; 3)    /*don't convert sample format*/
#define kNoChannelConversion     (1 &lt;&lt; 4)    /*don't convert stereo/mono*/
#define kNoDecompression         (1 &lt;&lt; 5)    /*don't decompress*/
#define kNoVolumeConversion      (1 &lt;&lt; 6)    /*don't apply volume*/
#define kNoRealtimeProcessing    (1 &lt;&lt; 7)    /*don't run at interrupt time*/

/*quality flags*/
#define kBestQuality             (1 &lt;&lt; 0)    /*use interp. in rate conv.*/

/*volume specifications*/
#define kSilenceByte             0x80
#define kSilenceLong             0x80808080
#define kFullVolume              0x0100
</PRE>
<A NAME=HEADING314-19></A>
<H3>Data Types</H3>
<A NAME=HEADING314-20></A>
<H4>Unsigned Fixed-Point Numbers</H4>
<PRE>
typedef unsigned long UnsignedFixed;   /*unsigned fixed-point number*/
</PRE>
<A NAME=HEADING314-22></A>
<H4>Sound Component Data Record</H4>
<PRE>
typedef struct {
   long           flags;               /*sound component flags*/
   OSType         format;              /*data format*/
   short          numChannels;         /*number of channels in data*/
   short          sampleSize;          /*size of a sample*/
   UnsignedFixed  sampleRate;          /*sample rate*/
   long           sampleCount;         /*number of samples in buffer*/
   Byte           *buffer;             /*location of data*/
   long           reserved;            /*reserved*/
} SoundComponentData, *SoundComponentDataPtr;
</PRE>
<A NAME=HEADING314-24></A>
<H4>Sound Parameter Block</H4>
<PRE>
typedef pascal Boolean (*SoundParamProcPtr)(SoundParamBlockPtr *pb);
struct SoundParamBlock {
   long                 recordSize;    /*size of this record in bytes*/
   SoundComponentData   desc;          /*description of sound buffer*/
   Fixed                rateMultiplier;/*rate multiplier*/
   short                leftVolume;    /*volume on left channel*/
   short                rightVolume;   /*volume on right channel*/
   long                 quality;       /*quality*/
   ComponentInstance    filter;        /*filter*/
   SoundParamProcPtr    moreRtn;       /*routine to call to get more data*/
   SoundParamProcPtr    completionRtn; /*buffer complete routine*/
   long                 refCon;        /*user refcon*/
   short                result;        /*result*/
};
typedef struct SoundParamBlock SoundParamBlock;
typedef SoundParamBlock *SoundParamBlockPtr;
</PRE>
<A NAME=HEADING314-27></A>
<H4>Sound Source</H4>
<PRE>
typedef struct privateSoundSource *SoundSource;
</PRE>
<A NAME=HEADING314-29></A>
<H4>Sound Information List</H4>
<PRE>
typedef struct {
   short          count;
   Handle         handle;
} SoundInfoList, *SoundInfoListPtr;
</PRE>
<A NAME=HEADING314-31></A>
<H4>Compression Information Record</H4>
<PRE>
typedef struct {
   long           recordSize;
   OSType         format;
   short          compressionID;
   short          samplesPerPacket;
   short          bytesPerPacket;
   short          bytesPerFrame;
   short          bytesPerSample;
   short          futureUse1;
} CompressionInfo, *CompressionInfoPtr, **CompressionInfoHandle;
</PRE>
<A NAME=HEADING314-33></A>
<H3>Sound Manager Utilities</H3>
<A NAME=HEADING314-34></A>
<H4>Opening and Closing the Apple Mixer Component</H4>
<PRE>
pascal OSErr OpenMixerSoundComponent
		(<CODE>SoundComponentData</CODE>Ptr outputDescription, 
		long outputFlags, 
		ComponentInstance *mixerComponent);
pascal OSErr CloseMixerSoundComponent
		(ComponentInstance ci);
</PRE>
<A NAME=HEADING314-39></A>
<H4>Saving and Restoring Sound Component Preferences</H4>
<PRE>
pascal OSErr SetSoundPreference
		(OSType type, Str255 name, Handle settings);
pascal OSErr GetSoundPreference
		(OSType type, Str255 name, Handle settings);
</PRE>
<A NAME=HEADING314-44></A>
<H3>Sound Component-Defined Routines</H3>
<A NAME=HEADING314-45></A>
<H4>Managing Sound Components</H4>
<PRE>
pascal ComponentResult SoundComponentInitOutputDevice
		<CODE>(ComponentInstance ti, long actions);</CODE>
pascal ComponentResult SoundComponentSetSource
		<CODE>(ComponentInstance ti, SoundSource sourceID,
		ComponentInstance source);</CODE>
pascal ComponentResult SoundComponentGetSource
		<CODE>(ComponentInstance ti, SoundSource sourceID,
		ComponentInstance *source);</CODE>
pascal ComponentResult SoundComponentGetSourceData
		<CODE>(ComponentInstance ti, 
		SoundComponentDataPtr *sourceData);</CODE>
pascal ComponentResult SoundComponentSetOutput
		(ComponentInstance ti, 
		SoundComponentDataPtr requested, SoundComponentDataPtr *actual)<CODE>;</CODE>
</PRE>
<A NAME=HEADING314-56></A>
<H4>Creating and Removing Audio Sources</H4>
<PRE>
pascal ComponentResult SoundComponentAddSource
		<CODE>(ComponentInstance ti, SoundSource *sourceID);</CODE>
pascal ComponentResult SoundComponentRemoveSource
		<CODE>(ComponentInstance ti, SoundSource sourceID);</CODE>
</PRE>
<A NAME=HEADING314-61></A>
<H4>Getting and Setting Sound Component Information</H4>
<PRE>
pascal ComponentResult SoundComponentGetInfo
		<CODE>(ComponentInstance ti, SoundSource sourceID,
		OSType selector, void *infoPtr);</CODE>
pascal ComponentResult SoundComponentSetInfo
		<CODE>(ComponentInstance ti, SoundSource sourceID,
		OSType selector, void *infoPtr);</CODE>
</PRE>
<A NAME=HEADING314-66></A>
<H4>Managing Source Data</H4>
<PRE>
pascal ComponentResult SoundComponentStartSource
		<CODE>(ComponentInstance ti, short count, 
		SoundSource *sources);</CODE>
pascal ComponentResult SoundComponentStopSource
		<CODE>(ComponentInstance ti, short count, 
		SoundSource *sources);</CODE>
pascal ComponentResult SoundComponentPauseSource
		<CODE>(ComponentInstance ti, short count, 
		SoundSource *sources);</CODE>
pascal ComponentResult SoundComponentPlaySourceBuffer
		<CODE>(ComponentInstance ti, SoundSource sourceID, SoundParamBlockPtr pb, long actions);</CODE>
</PRE>
<A NAME=HEADING314-75></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING314-76></A>
<H3>Data Structures</H3>
<A NAME=HEADING314-77></A>
<H4>Sound Component Data Record
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>flags<TD>long<TD>sound component flags<TR>
<TD>4<TD>format<TD>long<TD>data format<TR>
<TD>8<TD>numChannels<TD>word<TD>number of channels in data<TR>
<TD>10<TD>sampleSize<TD>word<TD>size of a sample<TR>
<TD>12<TD>sampleRate<TD>long<TD>sample rate (Fixed)<TR>
<TD>16<TD>sampleCount<TD>long<TD>number of samples in buffer<TR>
<TD>20<TD>buffer<TD>long<TD>location of data<TR>
<TD>24<TD>reserved<TD>long<TD>reserved</TABLE>
</H4>
<A NAME=HEADING314-78></A>
<H4>Sound Parameter Block
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>recordSize<TD>long<TD>size of this record in bytes<TR>
<TD>4<TD>desc<TD>28 bytes<TD>description of sound buffer<TR>
<TD>32<TD>rateMultiplier<TD>long<TD>rate multiplier (Fixed)<TR>
<TD>36<TD>leftVolume<TD>word<TD>volume on left channel<TR>
<TD>38<TD>rightVolume<TD>word<TD>volume on right channel<TR>
<TD>40<TD>quality<TD>long<TD>quality<TR>
<TD>44<TD>filter<TD>long<TD>filter<TR>
<TD>48<TD>moreRtn<TD>long<TD>routine to call to get more data<TR>
<TD>52<TD>completionRtn<TD>long<TD>buffer complete routine<TR>
<TD>56<TD>refCon<TD>long<TD>user refcon<TR>
<TD>60<TD>result<TD>word<TD>result</TABLE>
</H4>
<A NAME=HEADING314-79></A>
<H4>Sound Information List
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>count<TD>word<TD>number of data items in the handle<TR>
<TD>2<TD>handle<TD>long<TD>handle to list of data items</TABLE>
</H4>
<A NAME=HEADING314-80></A>
<H4>Compression Information Record
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>recordSize<TD>long<TD>the size of this record<TR>
<TD>4<TD>format<TD>4 bytes<TD>compression format<TR>
<TD>8<TD>compressionID<TD>word<TD>compression ID<TR>
<TD>10<TD>samplesPerPacket<TD>word<TD>the number of samples per packet<TR>
<TD>12<TD>bytesPerPacket<TD>word<TD>the number of bytes per packet<TR>
<TD>14<TD>bytesPerFrame<TD>word<TD>the number of bytes per frame<TR>
<TD>16<TD>bytesPerSample<TD>word<TD>the number of bytes per sample<TR>
<TD>18<TD>futureUse1<TD>word<TD>reserved</TABLE>
</H4>
</BLOCKQUOTE><P>
</DL>
</DL>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-313.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-315.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

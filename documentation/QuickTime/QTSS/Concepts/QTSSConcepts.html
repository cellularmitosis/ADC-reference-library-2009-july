<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Streaming Server Modules Programming Guide: Concepts</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Concepts"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000245" title="Concepts"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../Streaming-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000577" target="_top">Streaming</a> &gt; <a href="../Preface/Preface.html#//apple_ref/doc/uid/TP30001143-CH204-DontLinkElementID_27">QuickTime Streaming Server Modules Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Preface/Preface.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Tasks/QTSSTasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_3" title="Concepts"></a><h1><a name="//apple_ref/doc/uid/TP30000245-TPXREF101" title="Concepts"></a>Concepts</h1>
<p>This manual describes version 4.0 of the programming
interface for creating QuickTime Streaming Server (QTSS) modules.
This version of the programming interface is compatible with QuickTime
Streaming Server version 5.</p>
<p>QTSS is an open-source, standards-based streaming server that
runs on Windows NT and Windows 2000 and several UNIX implementations,
including Mac OS X, Linux, FreeBSD, and the Solaris operating system.
To use the programming interface for the QuickTime Streaming Server,
you should be familiar with the following Internet Engineering Task Force
(IETF) protocols that the server implements:</p>
<ul class="ul"><li class="li"><p>Real Time Streaming Protocol (RTSP)</p></li>
<li class="li"><p>Real Time Transport Protocol (RTP)</p></li>
<li class="li"><p>Real Time Transport Control Protocol (RTCP)</p></li>
<li class="li"><p>Session Description Protocol (SDP)</p></li></ul>
<p>This manual describes how to use the QTSS programming interface
to develop QTSS modules for the QuickTime Streaming Server. Using
the programming interface described in this manual allows your application
to take advantage of the server&#8217;s scalability and protocol implementation
in a way that will be compatible with future versions of the QuickTime
Streaming Server. Most of the core features of the QuickTime Streaming
Server are implemented as modules, so support for modules has been
designed into the core of the server.</p>
<p>You can use the programming interface to develop QTSS modules
that supplement the features of the QuickTime Streaming server.
For example, you could write a module that</p>
<ul class="ul"><li class="li"><p>acts as an RTSP proxy, which would be useful
for streaming clients located behind a firewall</p></li>
<li class="li"><p>supports virtual hosting, allowing a single server to serve
multiple domains from multiple document roots.</p></li>
<li class="li"><p>logs statistical information for particular RTSP and client
sessions</p></li>
<li class="li"><p>supports additional ways of storing content, such as storing
movies in databases</p></li>
<li class="li"><p>configures users&#8217; QuickTime Streaming Server preferences</p></li>
<li class="li"><p>monitors and reports statistical information in real time</p></li>
<li class="li"><p>tracks pay-per-view accounting information</p></li></ul>

<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJFCHJA">Server Architecture</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-TPXREF104">Requirements for Modules</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJHFAFG">Overview of QuickTime Streaming Server Operations</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJCDJIG">Runtime Environment for QTSS Modules</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-TPXREF108">Naming Conventions</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJJAIED">Module Roles</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJEJGJE">QTSS Objects</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJJCBDJ">QTSS Streams</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-BAJEJIBC">QTSS Services</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-TPXREF132">Automatic Broadcasting</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-TPXREF137">Stream Caching</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-TPXREF141">Reliable UDP</a>
				
			<br/>
			
        
			
			
				<a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-TPXREF143">Tunneling RTSP and RTP Over HTTP</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000245-277315" title="Server Architecture"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFCHJA" title="Server Architecture"></a><h2>Server Architecture</h2>
<p>The Streaming Server consists of one parent process that forks
a child process, which is the core server. The parent process waits
for the child process to exit. If the child process exits with an
error, the parent process forks a new child process. </p>
<p>The core server acts as an interface between network clients,
which use RTP and RTSP to send requests and receive responses, and
server modules, which process requests and send packets to the client.
The core server does its work by creating four types of threads:</p>
<ul class="ul"><li class="li"><p>the server&#8217;s own Main thread. The Main thread
checks to see if the server needs to shut down, log status information,
or print statistics.</p></li>
<li class="li"><p>the Idle Task thread. The Idle Task thread manages a queue
of tasks that occur periodically. There are two types of task queues:
timeout tasks and socket tasks.</p></li>
<li class="li"><p>the Event thread. The Event thread listens for socket events
such as a received RTSP request or RTP packet and forwards them
to a Task thread.</p></li>
<li class="li"><p>one or more Task threads. Tasks threads receive RTSP and RTP
requests from the Event thread. Tasks threads foward requests to
the appropriate server module for processing and send packets to
the client. By default, the core server creates one Task thread
per processor. </p></li></ul>
<p><span class="content_text">Figure 1-1</span> summarizes the relationship between clients,
the core server&#8217;s threads, and server modules.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-277519" title="Figure 1-1Server architecture"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHHHHG" title="Figure 1-1Server architecture"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Server architecture</p>
<img src = "../art/qtss14.gif" alt = "" width="353" height="287"></div><br/>
<p>Because the server is largely asynchronous, there needs to
be a communication mechanism for events. For instance, when a socket
used for an RTSP connection gets data, something has to be notified
so that data can be processed. The Task object is a generalized mechanism
for performing this communication.</p>
<p>Each Task object has two major methods: Signal and Run. Signal
is called by the server to send an event to a Task object. Run is
called to give time to the Task for processing the event.</p>
<p>The goal of each Task object is to implement server functionality
using small non-blocking time slices. Run is a pure virtual function
that is called when a Task object has events to process. Inside
the Run function, the Task object can call GetEvents to receive
and automatically dequeue all its current and previously signaled
events. The Run function is never re-entered: if a Task object calls
GetEvents in its Run function, and is then signaled before the Run
function completes, the Run function will be called again for the
new event only after exiting the function. In fact, the Task&#8217;s
Run function will be called repeatedly until the all the Task object&#8217;s
events have been cleared with GetEvents.</p>
<p>This core concept of event-triggered tasks is integrated into
almost every Streaming Server subsystem. For example, a Task object
can be associated with a Socket object. If the Socket gets an event
(through a select() notification or through the Mac OS X Event Queue,
the corresponding Task object will be signaled. In this case, the
body of the Run function will contain the code for processing whatever
event was received on that Socket.</p>
<p> Task objects make it possible for the Streaming Server use
a singlethread to run all connections, which is the Streaming Server&#8217;s
default configuration on a single processor system.</p>
<a name="//apple_ref/doc/uid/TP30000245-280537" title="Modules"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHJIID" title="Modules"></a><h3>Modules</h3>
<p>The Streaming Server uses modules to respond to requests and
complete tasks. There are three types of modules:</p>
<a name="//apple_ref/doc/uid/TP30000245-280551" title="Content-Managing Modules"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHAHCD" title="Content-Managing Modules"></a><h4>Content-Managing Modules</h4>
<p>The content-managing modules manage RTSP requests and responses
related to media sources, such as a file or a broadcast. Each module
is responsible for interpreting the client&#8217;s request, reading
and parsing their supported files or network source, and responding
with RTSP and RTP. In some cases, such as the mp3 streaming module,
the module uses HTTP.</p>
<p>The content-managing modules are QTSSFileModule, QTSSReflectorModule, QTSSRelayModule,
and QTSSMP3StreamingModule.</p>
<a name="//apple_ref/doc/uid/TP30000245-280730" title="Server-Support Modules"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCIECA" title="Server-Support Modules"></a><h4>Server-Support Modules</h4>
<p>The server-support modules perform server data gathering and
logging functions. The server-support modules are QTSSErrorLogModule,
QTSSAccessLogModule, QTSSWebStatsModule, QTSSWebDebugModule, QTSSAdminModule,
and QTSSPOSIXFileSystemModule.</p>
<a name="//apple_ref/doc/uid/TP30000245-280896" title="Access Control Modules"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGEFEA" title="Access Control Modules"></a><h4>Access Control Modules</h4>
<p>The access control modules provide authentication and authorization
functions as well as URL path manipulation.</p>
<p>The access control modules are QTSSAccessModule, QTSSHomeDirectoryModule, QTSSHttpFileModule,
and QTSSSpamDefenseModule.</p>
<a name="//apple_ref/doc/uid/TP30000245-281011" title="Protocols"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCEBEC" title="Protocols"></a><h3>Protocols</h3>
<p>The Streaming Server supports the following protocols:</p>
<ul class="spaceabove"><li class="li"><p>RTSP over TCP. The Real Time Streaming Protocol
(RTSP) is a client-server multimedia presentation control protocol
designed to provide efficient delivery of streamed multimedia over
IP networks. RTSP provides a basis for negotiating unicast and multicast
transport protocols, such as RTP, and negotiates codecs in a file
format independent way. It works well for large audiences as well
as single-viewer media-on-demand. RFC 2326 defines the IETF standard
for RTSP. </p></li>
<li class="li"><p>RTP over UDP. The Realtime Transport Protocol (RTP) is a packet
format for multimedia data streams. RTP is used by many standard
protocols, such as RTSP for streaming applications and SDP for multicast
applications. It provides the data delivery format for RTSP and
SDP. RFC 1889 defines the IETF proposed standard for RTP.</p></li>
<li class="li"><p>RTP over Apple&#8217;s Reliable UDP. If an RTP client requests
it, the server sends RTP packets using Reliable UDP. Reliable UDP
is a set of quality of service enhancements, such as congestion
control tuning improvements, retransmit, and thinning server algorithms,
that improve the ability to present a good quality RTP stream to
RTP clients even in the presence of packet loss and network congestion.
For more information, see <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-178042">“Reliable UDP.”</a></span></p></li>
<li class="li"><p>RTSP/RTP in HTTP (tunneled). Firewalls often prevent users
on private IP networks from receiving QuickTime presentations. On
private networks, an HTTP proxy server is often configured to provide
users with indirect access to the Internet. To reach such clients,
QuickTime 4.1 supports the placement of RTSP and RTP data in HTTP
requests and replies, allowing viewers behind firewalls to access
QuickTime presentations through HTTP proxy servers. For more information,
see <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-181489">“Tunneling RTSP and RTP Over HTTP.”</a></span></p></li>
<li class="li"><p>RTP over RTSP (RTP over TCP). Certain firewall designs and
other circumstances may require a server to use alternative means
to send data to clients. RFC 2326 allows RTSP packets destined for
the same control end point to be packed into a single lower-layer protocol
data unint (PDU), encapsulated into a TCP stream, or interleaved
with RTP and RTCP packets. Interleaving complicates client and server
operation and imposes additional overhead and should only be used
if RTSP is carried over TCP. RTP packets are encapsulated by an
ASCII dollar sign ($), followed by a one-byte channel identifier (defined
in the transport header using the interleaved parameter), followed
by the length of the encapsulated binary data as a binary, two-byte
integer in network byte order. The stream data follows immediately,
without a CRLF, but including the upper-layer protocol headers.
Each $ block contains exactly one RTP packet. When the transport
is RTP, RTCP messages are also interleaved by the server over the
TCP connection. By default, RTCP packets are sent on the first available
channel higher than the RTP channel. The client may request RTCP
packets on another channel explicitly. This is done by specifying
two channels in the interleaved parameter of the transport header.
RTCP is used for synchronization when two or more streams are interleaved. Also,
this provides a convenient way to tunnel RTP/RTCP packets through
the TCP control connection when required by the network configuration
and transfer them onto UDP when possible.</p></li></ul>
<p>In addition, the following modules implement HTTP:</p>
<ul class="spaceabove"><li class="li"><p>QTSSAdminModule</p></li>
<li class="li"><p>QTSSMP3StreamingModule</p></li>
<li class="li"><p>QTSSWebStatsModule</p></li>
<li class="li"><p>QTSSHTTPStreamingModule</p></li>
<li class="li"><p>QTSSRefMovieModule</p></li>
<li class="li"><p>QTSSWebStats</p></li>
<li class="li"><p>QTSSWebDebugModule</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-283177" title="Data"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJHBFB" title="Data"></a><h3>Data</h3>
<p>When a module needs access to a request&#8217;s RTSP header, it
gains access to the request through a request  object defined by
the QTSS.h API header file.  For example, the RTSPRequestInterface
class implements the API dictionary elements accessible by the API.
 Objects whose name ends with &#8220;Interface&#8221;, such as RTSPRequestInterface, RTSPSessionInterface,
and QTSServerInterface, implement the module&#8217;s API.</p>
<p>The following interface classes are significant:</p>
<ul class="spaceabove"><li class="li"><p>QTSServerInterface &#8212; This is the internal data
storage object tagged as the QTSS_ServerObject in the API. Each
of the QTSS_ServerAttributes  in the API is declared and implemented
in this base class.</p></li>
<li class="li"><p>RTSPSessionInterace &#8212; This is the internal data storage
object tagged as the qtssRTSPSessionObjectType in the API. Each
of the QTSS_RTSPSessionAttributes  in the API is declared and implemented
in this base class.</p></li>
<li class="li"><p>RTPSessionInterface &#8212; This is the internal data storage
object tagged as the QTSS_ClientSessionObject in the API. Each of
the QTSS_ClientSessionAttributes  in the API is declared and implemented
in this base class.</p></li>
<li class="li"><p>RTSPRequestInterface &#8212; This is the internal data storage
object tagged as the QTSS_RTSPRequestObject in the API. Each of
the QTSS_RTSPRequestAttributes  in the API is declared and implemented
in this base class.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-283238" title="Classes"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFBAAE" title="Classes"></a><h3>Classes</h3>
<p><span class="content_text">Figure 1-2</span> shows how the objects in the server reference
each other. </p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-287340" title="Figure 1-2Server object data model"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHHFAD" title="Figure 1-2Server object data model"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>Server object data model</p>
<img src = "../art/qtss15.gif" alt = "" width="290" height="194"></div><br/>
<p>The server object has a a dictionary of preferences. The server
owns a list of modules each with a dictionary for their preferences.
The server owns a list of RTP client sessions, each of which can
have an RTSP session and one or more RTP media streams. It is possible
to use the API to walk all of the server&#8217;s the live sessions and
streams.</p>
<ul class="spaceabove"><li class="li"><p>QTServer is the core server object, some of which
is accessible through the API and the QTSServerInterface base class.</p></li>
<li class="li"><p>Dictionary is a data storage base class that implements key
and value access to object data.  This base class is inherited by
all server objects defined by the API.</p></li>
<li class="li"><p>Module is a class for managing modules.  Each module instance
is responsible for loading, initializing, and executing a static
or dynamic API module.</p></li>
<li class="li"><p>RTSP and RTP sessions. Reads and writes are managed by the
sessions through a stream object.  The RTSP session calls each of
the modules in their registered  RTSP role fromthe session&#8217;s RTSPSession::Run
method.  The API module roles that are called are <code>QTSS_RTSPFilter_Role</code>, <code>QTSS_RTSPRoute_Role</code>, <code>QTSS_RTSPAuthenticate_Role</code>, <code>QTSS_RTSPAuthorize_Role</code>, <code>QTSS_RTSPPreProcessor_Role</code>, <code>QTSS_RTSPRequest_Role</code>, <code>QTSS_RTSPPostProcessor_Role</code>,
and <code>QTSS_RTSPSessionClosingRole</code>.
The RTSP session also calls modules in their <code>QTSS_RTSPIncomingData_Role</code>.
The RTP session handles the following role calls as well as data
reads and writes: <code>QTSS_RTPSendPackets_Role</code>, <code>QTSS_RTCPProcess_Role</code>,
and <code>QTSS_ClientSessionClosing_Role</code>.
For more information about roles, see <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-133104">“Module Roles.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-284169" title="Applications and Tools"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFFAEB" title="Applications and Tools"></a><h3>Applications and Tools</h3>
<p>The Streaming Server comes with the following applications
and tools:</p>
<ul class="spaceabove"><li class="li"><p>PlayListBroadcaster</p></li>
<li class="li"><p>MP3Broadcaster</p></li>
<li class="li"><p>StreamingProxy</p></li>
<li class="li"><p>QTFileTools (POSIX and Mac OS X only; not maintained) </p></li>
<li class="li"><p>WebAdmin</p></li>
<li class="li"><p><code>qtpasswd</code></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-284216" title="PlayListBroadcaster"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHFGHD" title="PlayListBroadcaster"></a><h4>PlayListBroadcaster</h4>
<p>PlaylistBroadcaster broadcasts QuickTime, MPEG4, and 3GPP
streaming files to a streaming server, such as QuickTime Streaming
Server, which then reflects the media to clients. This lets you
create a virtual radio station or TV broadcast that appears to users
as a live broadcast of the media.</p>
<a name="//apple_ref/doc/uid/TP30000245-284230" title="MP3Broadcaster"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBIDEB" title="MP3Broadcaster"></a><h4>MP3Broadcaster</h4>
<p>The MP3Broadcaster application broadcasts an MP3 file as if
it were a live broadcast.</p>
<a name="//apple_ref/doc/uid/TP30000245-284244" title="StreamingProxy"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJEDAD" title="StreamingProxy"></a><h4>StreamingProxy</h4>
<p>POSIX and Mac OS X only.</p>
<a name="//apple_ref/doc/uid/TP30000245-284258" title="QTFileTools"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJJDJB" title="QTFileTools"></a><h4>QTFileTools</h4>
<p>QTFileTools are movie-inspection utilities that use the QTFile
library. The utillities are:</p>
<ul class="spaceabove"><li class="li"><p>QTBroadcaster. This utility requires a target
IP address, a source movie having one or more hint track IDs, and
an initial port. Every packet referenced by the hint track(s) is broadcast
to the specified IP address.</p></li>
<li class="li"><p>QTFileInfo. This utility requires a source movie. It displays
the movie&#8217;s name, creation date, and modification date. If the
track is a hint track, the utility also displays the total RTP bytes
and packets, the average bit rate and packet size, and the total
header percentage of the stream.</p></li>
<li class="li"><p>QTFileTest. This utility requires a source movie. It parses
the Movie Header Atom and displays a trace of the output.</p></li>
<li class="li"><p>QTRTPGent. This utility requires a source movie having a hint
track ID. It displays the number of packets in each hint track sample
and writes the RTP packets to a file named <code>track.cache</code>.</p></li>
<li class="li"><p>QTRTPFileTest. This utility requires a source movie having
a hint track ID. It displays the RTP header (TransmitTime, Cookie,
SeqNum, and TimeStamp) for each packet.</p></li>
<li class="li"><p>QTSampleLister. This utility requires a source movie and a
track ID. It displays the track media sample number, media time,
data offset, and sample size for each sample in the track.</p></li>
<li class="li"><p>QTSDPGen. This utility requires a list of one or more source
movies. It displays the SDP information for all of the hinted tracks
in each movie. Use the <code>-f</code> option
to save the SDP information to the file <em>moviename</em><code>.sdp</code> in
the same directory as the source movie.</p></li>
<li class="li"><p>QTTrackInfo. This utility requires a source movie, a sample
table atom type (<code>stco</code>, <code>stsc</code>, <code>stsz</code>,
or <code>stts</code>) and a track
ID. It displays the information in the sample table atom of the specified
track.</p></li></ul>
<p>The following example displays the chunk offset sample table
in track 3:</p>
<div class="codesample"><table><tr><td scope="row"><pre>./QTTrackInfo -T stco /movies/mystery/.mov 3<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-284366" title="WebAdmin"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGIHGJ" title="WebAdmin"></a><h4>WebAdmin</h4>
<p>WebAdmin is a Perl-based web server. Connect a browser to
it, and you can administer the server.</p>
<a name="//apple_ref/doc/uid/TP30000245-284380" title="qtpasswd"></a><a name="//apple_ref/doc/uid/TP30000245-BAJIGHHD" title="qtpasswd"></a><h4>qtpasswd</h4>
<p>The <code>qtpasswd</code> application
generates password files for access control.</p>
<a name="//apple_ref/doc/uid/TP30000245-283286" title="Source Organization"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFACJE" title="Source Organization"></a><h3>Source Organization</h3>
<p>The Streaming Server source code is written entirely in C++
and pervasively uses object-oriented concepts such as inheritance
and polymorphism. Almost exclusively, there is one C++ class per
.h / .cpp file pair, and those file names match the class name.The
Streaming Server source is organized as follows:</p>
<ul class="spaceabove"><li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283385">“Server.tproj”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283418">“CommonUtilitiesLib”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283456">“QTFileLib”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283470">“APICommonCode”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283484">“APIModules”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-286632">“RTSPClientLib”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-286644">“RTCPUtilitiesLib”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283526">“APIStubLib”</a></span></p></li>
<li class="li"><p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-283540">“HTTPUtilitiesLib”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-283385" title="Server.tproj"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEABHD" title="Server.tproj"></a><h4>Server.tproj</h4>
<p>This directory contains the core server code, which can be
divided into three subsystems: </p>
<ul class="spaceabove"><li class="li"><p>Server core. Classes in this subsystem are prefixed
by QTSS. QTSServer handles startup and shutdown. QTSServerInterface
stores server globals and compiles server statistics. QTSSPrefs
is a data store for server preferences. QTSSModule, QTSSModuleInterface, and
QTSSCallbacks are classes whose sole purpose is to support the QTSS
module API.</p></li>
<li class="li"><p>RTSP subsystem. These classes handle the parsing and processing
of RTSP requests, and implement the RTSP part of the QTSS module
API. Several of the classes correspond directly to elements of the
QTSS API (for instance, RTSPRequestInterface is a QTSS_RTSPRequestObject).
There is one RTSP session object per RTSP TCP connection. The RTSPSession
object is a Task object that processes RTSP related events.</p></li>
<li class="li"><p>RTP subsystem. These classes handle the sending of media data.
The RTPSession object contains the data associated with each RTSP
session ID. Each RTPSession is a Task object that can be scheduled
to send RTP packets. The RTPStream object represents a single RTP
stream. Any number of RTPStream objects can be associated with a
single RTPSession. These two objects implement the RTP specific
parts of the QTSS module API.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-283418" title="CommonUtilitiesLib"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFBEFD" title="CommonUtilitiesLib"></a><h4>CommonUtilitiesLib</h4>
<p>This directory contains a toolkit of thread management, data
structure, networking, and text parsing utilities. Darwin Streaming
Server and associated tools use these classes to reduce repeated
code by abstracting similar or identical tasks, to simplify higher
level code through encapsulation, and to separate out platform-specific
code. Here is a short description of the classes in the CommonUtilitiesLib
directory:</p>
<ul class="spaceabove"><li class="li"><p>OS Classes. These classes provide platform-specific
code abstractions for timing, condition variables, mutexes, and
threads. The classes are OS, OSCond, OSMutex, OSThread, and OSFileSource.
The data structures are OSQueue, OSHashTable, OSHeap, and OSRef.</p></li>
<li class="li"><p>Sockets. These classes provide platform-specific code abstractions
for TCP and UDP networking. Socket classes are generally asynchronous
(or non-blocking), and can send events to Task objects. The classes
are EventContext, Socket, UDPSocket, UDPDemuxer, UDPSocketPool,
TCPSocket, and TCPListenerSocket.</p></li>
<li class="li"><p>Parsing Utilities. These classes parse and format text. The
classes are StringParser, StringFormatter, StrPtrLen, and StringTranslator.</p></li>
<li class="li"><p>Tasks: These classes implement the server&#8217;s asynchronous
event mechanism.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-283456" title="QTFileLib"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBDBEF" title="QTFileLib"></a><h4>QTFileLib</h4>
<p>A major feature of the Streaming Server is its ability to
serve hinted QuickTime movie files over RTSP and RTP. This directory
contains source code for the QTFile library, which contains all
of the code for parsing hinted QuickTime files. The server&#8217;s RTPFileModule calls
the QTFile library to retrieve packets and meta-data from hinted
QuickTime files. The QTFile library parses the following movie file
types: .mov, .mp4 (a modification of .mov), and .3gpp (a modification
of .mov).</p>
<a name="//apple_ref/doc/uid/TP30000245-283470" title="APICommonCode"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFJIGB" title="APICommonCode"></a><h4>APICommonCode</h4>
<p>This directory contains source code for API-related classes,
such as moduletils, or common module functions, such as log file
management.</p>
<a name="//apple_ref/doc/uid/TP30000245-283484" title="APIModules"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBJFBA" title="APIModules"></a><h4>APIModules</h4>
<p>This directory contains a directory for each Streaming Server
module.</p>
<a name="//apple_ref/doc/uid/TP30000245-286632" title="RTSPClientLib"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCFCGD" title="RTSPClientLib"></a><h4>RTSPClientLib</h4>
<p>This directory contains source code that implements the server&#8217;s
RTSP client, which can be used to connect to the server using any
of the supported protocols.</p>
<a name="//apple_ref/doc/uid/TP30000245-286644" title="RTCPUtilitiesLib"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBDJBJ" title="RTCPUtilitiesLib"></a><h4>RTCPUtilitiesLib</h4>
<p>This directory contains source code for parsing RTCP requests.</p>
<a name="//apple_ref/doc/uid/TP30000245-283526" title="APIStubLib"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHEJGJ" title="APIStubLib"></a><h4>APIStubLib</h4>
<p>This directory contains API definition and support files.</p>
<a name="//apple_ref/doc/uid/TP30000245-283540" title="HTTPUtilitiesLib"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDFAAI" title="HTTPUtilitiesLib"></a><h4>HTTPUtilitiesLib</h4>
<p>This directory contains source code for parsing HTTP requests.</p>
<a name="//apple_ref/doc/uid/TP30000245-304411" title="Server Preference Naming"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEGBDJ" title="Server Preference Naming"></a><h3>Server Preference Naming</h3>
<p>The file <code>QTSS,h</code> defines
server preferences. Each server preference defined in <code>QTSS.h</code> has
a name, such as <code>qtssPrefsEnableMonitorStatsFile</code>,
a numeric ID, such as 57, and a string constant, such as <code>enable_monitor_stats_file</code>. </p>
<p>To get the current setting of server preferences, the server
reads the file <code>StreamingServer.xml</code> when
it starts up or when signaled to reread that file. In the <code>StreamingServer.xml</code> file,
string constant names are used to refer to preferences.</p>
<p>The modules that come with the server use the built-in preference
file support provided by the API to generate preferences and a unique
ID if the preference is not already defined in the module&#8217;s preference
object. The check and creation of preferences  is usually done in <code>QTSS_Initialize_Role</code> but
the code to generate the preference and an ID from the string name
for the preference is also run in <code>QTSS_RereadPrefs_Role</code>.
The modules that come with the server use the <code>QTSSModuleUtils</code> object
to encapsulate API calls such as <code>QTSS_AddInstanceAttribute</code> and <code>QTSS_GetAttrInfoByName</code>. </p>
<p>Module developers who want to use theserver&#8217;s built-in preference
storage support should use the utility method <code>QTSSModuleUtils::GetAttribute</code> or
examine and call the QTSS API callbacks used by <code>QTSSModuleUtils::GetAttribute</code>.
 The implementation and header file for <code>QTSSModuleUtils</code> can
be found in the <code>APICommonCode</code> directory.</p>
<a name="//apple_ref/doc/uid/TP30000245-278054" title="Requirements for Modules"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF104" title="Requirements for Modules"></a><h2>Requirements for Modules</h2>
<p>Every QTSS module must implement two routines:</p>
<ul class="ul"><li class="li"><p>a main routine, which the server calls when it
starts up to initialize the QTSS stub library with your module</p></li>
<li class="li"><p>a dispatch routine, which the server uses when it calls the
module for a specific purpose</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-123557" title="Main Routine"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCIBID" title="Main Routine"></a><h3>Main Routine</h3>
<p>Every QTSS modules must provide a main routine. The server
calls the main routine as the server starts up and uses it to initialize
the QTSS stub library so the server can invoke your module later.</p>
<p>For modules that are compiled into the server, the address
of the module's main routine must be passed to the server's module
initialization routine, as described in the section &#8220;Compiling
a QTSS Module into the Server&#8221;.</p>
<p>The body of the main routine must be written like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>QTSS_Error MyModule_Main(void* inPrivateArgs)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>     return _stublibrary_main(inPrivateArgs, MyModuleDispatch);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>where MyModuleDispatch is the name of the module&#8217;s dispatch
routine, which is described in the following section, <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-123571">“Dispatch Routine.”</a></span></p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_4" title="Important:"></a><p><strong>Important:</strong>&nbsp;

For code fragment modules, the main routine must be
named <code>MyModule_Main</code> where <code>MyModule</code> is the
name of the file that contains the module.</p><p></p></div>
<a name="//apple_ref/doc/uid/TP30000245-123571" title="Dispatch Routine"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEDBFD" title="Dispatch Routine"></a><h3>Dispatch Routine</h3>
<p>Every QTSS module must provide a dispatch routine. The server
calls the dispatch routine when it invokes a module for a specific
task, passing to the dispatch routine the name of the task and a
task-specific parameter block. (The programming interface uses the
term &#8220;role&#8221; to describe specific tasks. For information about
roles, see <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-133104">“Module Roles.”</a></span>)</p>
<p>The dispatch routine must have the following prototype:</p>
<div class="codesample"><table><tr><td scope="row"><pre>void MyModuleDispatch(QTSS_Role inRole, QTSS_RoleParamPtr inParams);<span></span></pre></td></tr></table></div>
<p>where MyModuleDispatch is the name specified as the name of
the dispatch routine by the module&#8217;s main routine, <code>inRole</code> is
the name of the role for which the module is being called, and <code>inParams</code> is
a structure containing values of interest to the module.</p>
<a name="//apple_ref/doc/uid/TP30000245-133092" title="Overview of QuickTime Streaming Server Operations "></a><a name="//apple_ref/doc/uid/TP30000245-BAJHFAFG" title="Overview of QuickTime Streaming Server Operations "></a><h2>Overview of QuickTime Streaming Server
Operations </h2>
<p>The QuickTime Streaming Server works with modules to process
requests from clients by invoking modules in a particular role.
Each role is designed to perform a particular task. This section
describes how the server works with roles when it starts up and
shuts down and how the server works with roles when it processes
client requests.</p>
<a name="//apple_ref/doc/uid/TP30000245-123575" title="Server Startup and Shutdown"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF105" title="Server Startup and Shutdown"></a><h3>Server Startup and Shutdown</h3>
<p>Figure 2-1 shows how the server works with the Register, Initialize,
and Shutdown roles when the server starts up and shuts down. </p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-132980" title="Figure 1-3QuickTime Streaming Server startup and shutdown"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF130" title="Figure 1-3QuickTime Streaming Server startup and shutdown"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>QuickTime Streaming Server startup
and shutdown</p><img src = "../art/qtss01.gif" alt = "" width="460" height="315"></div><br/>
<p>When the server starts up, it first loads modules that are
not compiled into the server (dynamic modules) and then loads modules
that are compiled into the server (static modules). If you are writing
a module that replaces existing server functionality, compile it
as a dynamic module so that it is loaded first.</p>
<p>Then the server invokes each QTSS module in the Register role,
which is a role that every module must support. In the Register
role, the module calls <code>QTSS_AddRole</code> to
specify the other roles that the module supports.</p>
<p>Next, the server invokes the Initialize role for each module
that has registered for that role. The Initialize role performs
any initialization tasks that the module requires, such as allocating
memory and initializing global data structures.</p>
<p>At shutdown, the server invokes the Shutdown role for each
module that has registered for that role. When handling the Shutdown
role, the module should perform cleanup tasks and free global data
structures.</p>
<a name="//apple_ref/doc/uid/TP30000245-350664" title="RTSP Request Processing"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF106" title="RTSP Request Processing"></a><h3>RTSP Request Processing</h3>
<p>After the server calls each module that has registered for
the Initialize role, the server is ready to receive requests from
the client. These requests are known as RTSP requests. A sample
RTSP request is shown in <span class="content_text">Figure 1-4</span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-350807" title="Figure 1-4Sample RTSP request"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEDCFJ" title="Figure 1-4Sample RTSP request"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>Sample RTSP request</p>
<img src = "../art/qtss02.gif" alt = "" width="329" height="64"></div><br/>
<p>When the server receives an RTSP request, it creates an RTSP
request object, which is a collection of attributes that describe
the request. At this point, the <code>qtssRTSPReqFullRequest</code> attribute
is the only attribute that has a value and that value consists of
the complete contents of the RTSP request.</p>
<p>Next, the server calls modules in specific roles according
to a predetermined sequence. That sequence is shown in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-132988">Figure 1-5</a></span>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;The order in
which the server calls any particular module for any particular
role is undetermined.</p></div>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-132988" title="Figure 1-5Summary of RTSP request processing"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCACGH" title="Figure 1-5Summary of RTSP request processing"></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>Summary of RTSP request processing</p>
<img src = "../art/qtss03.gif" alt = "" width="438" height="519"></div><br/>
<p>When processing an RTSP request, the first role that the server
calls is the RTSP Filter role. The server calls each module that
has registered for the RTSP Filter role and passes to it the RTSP
request object. Each module&#8217;s RTSP Filter role has the option
of changing the value of the <code>qtssRTSPReqFullRequest</code> attribute.
For example, an RTSP Filter role might change <code>/foo/foo.mov</code> to <code>/bar/bar.mov</code>,
thereby changing the folder that will be used to satisfy this request.</p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_6" title="Important:"></a><p><strong>Important:</strong>&nbsp;
Any module handling the RTSP Filter role that responds
to the client causes the server to skip other modules that have
registered for the RTSP Filter role, skip modules that have registered
for other RTSP roles, and immediately call the RTSP Postprocessor
role of the responding module. A response to a client is defined
as any data the module may send to the client.</p><p></p></div>
<p>When all RTSP Filter roles have been invoked, the server parses
the request. Parsing the request consists of filling in the remaining
attributes of the RTSP object and creating two sessions:</p>
<ul class="spaceabove"><li class="li"><p>an RTSP session, which is associated with this
particular request and closes when the client closes its RTSP connection
to the server</p></li>
<li class="li"><p>a client session, which is associated with the client connection
that originated the request and remains in place until the client&#8217;s
streaming presentation is complete</p></li></ul>
<p>After parsing the request, the server calls the RTSP Route
role for each module that has registered in that role and passes
the RTSP object. Each RTSP Route role has the option of using the
values of certain attributes to determine whether to change the
value of the <code>qtssRTSPReqRootDir</code> attribute,
thereby changing the folder that is used to process this request.
For example, if the language type is French, the module could change
the <code>qtssRTSPReqRootDir</code> attribute
to a folder that contains the French version of the requested file.</p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_7" title="Important:"></a><p><strong>Important:</strong>&nbsp;
Any module handling the RTSP Route role that responds
to the client causes the server to skip other modules that have
registered for the RTSP Route role, skip modules that have registered
for other RTSP roles, and immediately calls the RTSP Postprocessor
role of the responding module.</p><p></p></div>
<p>After all RTSP Route roles have been called, the server calls
the RTSP Preprocessor role for each module that has registered for
that role. The RTSP Preprocessor role typically uses the <code>qtssRTSPReqAbsoluteURL</code> attribute
to determine whether the request matches the type of request that
the module handles.</p>
<p>If the request matches, the RTSP Preprocessor role responds
to the request by calling <code>QTSS_Write</code> or <code>QTSS_WriteV</code> to
send data to the client. To send a standard response, the module
can call <code>QTSS_SendStandardRTSPResponse</code>,
or <code>QTSS_AppendRTSPHeader</code> and <code>QTSS_SendRTSPHeaders</code>.</p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_8" title="Important:"></a><p><strong>Important:</strong>&nbsp;
Any module handling the RTSP Preprocessor role that
responds to the client causes the server to skip other modules that
have registered for the RTSP Preprocessor role, skip modules that
have registered for other RTSP roles, and immediately calls the
RTSP Postprocessor role of the responding module.          </p><p></p></div>
<p>If no RTSP Preprocessor role responds to the RTSP request,
the server invokes the RTSP Request role of the module that successfully
registered for this role. (The first module that registers for the
RTSP Request role is the only module that can register for the RTSP Request
role.) The RTSP Request role is responsible for responding to all
RTSP Requests that are not handled by modules registered for the
RTSP Preprocessor role.</p>
<p>After the RTSP Request role processes the request, the server
calls modules that have registered for the RTSP Postprocessor role.
The RTSP Postprocessor role typically performs accounting tasks,
such as logging statistical information.</p>
<p>A module handling the RTSP Preprocessor or RTSP Request role
may generate the media data for a particular client session. To
generate media data, the module calls <code>QTSS_Play</code>, which
causes that module to be invoked in the RTP Send Packets role, as
shown in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-132992">Figure 1-6</a></span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-132992" title="Figure 1-6Summary of the RTSP Preprocessor and RTSP Request roles"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFGFJD" title="Figure 1-6Summary of the RTSP Preprocessor and RTSP Request roles"></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>Summary of the RTSP Preprocessor and
RTSP Request roles</p><img src = "../art/qtss04.gif" alt = "" width="280" height="304"></div><br/>
<p>The RTP Send Packets role calls <code>QTSS_Write</code> or <code>QTSS_WriteV</code> to
send data to the client over the RTP session. When the RTP Send
Packets role has sent some packets, it returns to the server and
specifies the time that is to elapse before the server calls the
module&#8217;s RTP Send Packets role again. This cycle repeats until
all of the packets for the media have been sent or until the client
requests that the client session be paused or torn down.</p>
<a name="//apple_ref/doc/uid/TP30000245-133096" title="Runtime Environment for QTSS Modules"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCDJIG" title="Runtime Environment for QTSS Modules"></a><h2>Runtime Environment for QTSS Modules</h2>
<p>QTSS modules can spawn threads, use mutexes, and are completely
free to use any operating system tools.</p>
<p>The QuickTime Streaming Server is fully multi-threaded, so
QTSS modules must be prepared to be preempted. Global data structures
and critical sections in code should be protected with mutexes.
Unless otherwise noted, assume that preemption can occur at any time.</p>
<p>The server usually runs all activity from very few threads
or possibly a single thread, which requires the server to use asynchronous
I/O whenever possible. (The actual behavior depends on the platform
and how the administrator configures the server.)</p>
<p>QTSS modules should adhere to the following rules:</p>
<ul class="ul"><li class="li"><p>Perform tasks and return control to the server
as quickly as possible. Returning quickly allows the server to load
balance among a large number of clients.</p></li>
<li class="li"><p>Be prepared for <code>QTSS_WouldBlock</code> errors
when performing stream I/O. The <code>QTSS_Write</code>, <code>QTSS_WriteV</code>,
and <code>QTSS_Read</code> callback
routines return <code>QTSS_WouldBlock</code> if
the requested I/O would block. For more information about streams,
see <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-379037">“QTSS Streams.”</a></span></p></li>
<li class="li"><p>Avoid using synchronous I/O wherever possible. An I/O operation
that blocks may affect streaming quality for other clients.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-123611" title="Server Time"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF107" title="Server Time"></a><h3>Server Time</h3>
<p>The QuickTime Streaming Server handles real-time delivery
of media, so many elements of QTSS module programming interface
are time values.</p>
<p>The server&#8217;s internal clock counts the number of milliseconds
that have elapsed since midnight, January 1st, 1970. The data type <code>QTSS_TimeVal</code> is
used to store the value of the server&#8217;s internal clock. To make
it easy to work with time values, every attribute, parameter, and
callback routine that deals with time specifies the time units explicitly.
For example, the <code>qtssRTPStrBufferDelayInSecs</code> attribute
specifies the client&#8217;s buffer size in seconds. Unless otherwise
noted, all time values are reported in milliseconds from the server&#8217;s
internal clock using a <code>QTSS_TimeVal</code> data
type.</p>
<p>To get the current value of the server&#8217;s clock, call <code>QTSS_Milliseconds</code> or
get the value of the <code>qtssSvrCurrentTimeMilliseconds</code> attribute
of the server object (<code>QTSS_ServerObject</code>).
To convert a time obtained from the server&#8217;s clock to the current
time, call <code>QTSS_MilliSecsTo1970Secs</code>.</p>
<a name="//apple_ref/doc/uid/TP30000245-133100" title="Naming Conventions"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF108" title="Naming Conventions"></a><h2>Naming Conventions</h2>
<p>The QTSS programming interface uses a naming convention for
the data types that it defines. The convention is to use the size
of the data type in the name. Here are the data types that the QTSS
programming interface uses:</p>
<ul class="ul"><li class="li"><p><code>Bool16</code> &#8212;
A 16-bit Boolean value</p></li>
<li class="li"><p><code>SInt64</code> &#8212; A signed
64-bit integer value</p></li>
<li class="li"><p><code>SInt32</code> &#8212; A signed
32-bit integer value</p></li>
<li class="li"><p><code>UInt16</code> &#8212; An unsigned
16-bit integer value</p></li>
<li class="li"><p><code>UInt32</code> &#8212; An unsigned
32-bit integer value</p></li></ul>
<p>Parameters for callback functions defined by the QTSS programming
interface follow these naming conventions:</p>
<ul class="ul"><li class="li"><p>Input parameters begin with <code>in</code>.</p></li>
<li class="li"><p>Output parameters begin with <code>out</code>.</p></li>
<li class="li"><p>Parameters that are used for both input and output begin with <code>io</code>.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-133104" title="Module Roles"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJAIED" title="Module Roles"></a><h2>Module Roles</h2>
<p>Roles provide modules with a well-defined state for performing
certain types of processing. A selector of type <code>QTSS_Role</code> defines
each role and represents the internal processing state of the server
and the number, accessibility, and validity of server data. Depending
on the role, the server may pass to the module one or more QTSS
objects. In general, the server uses objects to exchange information
with modules. For more information about QTSS objects, see <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375560">“QTSS Objects.”</a></span></p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-238597">Table 1-1</a></span> lists the roles that this version of the QuickTime
Streaming Server supports.</p><a name="//apple_ref/doc/uid/TP30000245-238597" title="Table 1-1Module roles "></a><a name="//apple_ref/doc/uid/TP30000245-BAJCBDHJ" title="Table 1-1Module roles "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Module roles </caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Constant</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Task</p></th>
</tr>


<tr>
<td  scope="row"><p>Register role</p></td>
<td ><p><code>QTSS_Register_Role</code></p></td>
<td ><p>Registers the roles the module supports.</p></td>
</tr>
<tr>
<td  scope="row"><p>Initialize role</p></td>
<td ><p><code>QTSS_Initialize_Role</code></p></td>
<td ><p>Performs tasks that initialize the module.</p></td>
</tr>
<tr>
<td  scope="row"><p>Shutdown role</p></td>
<td ><p><code>QTSS_Shutdown_Role</code></p></td>
<td ><p>Performs cleanup tasks.</p></td>
</tr>
<tr>
<td  scope="row"><p>Reread Preferences role</p></td>
<td ><p><code>QTSS_RereadPrefs_Role</code></p></td>
<td ><p>Rereads the modules&#8217;s preferences.</p></td>
</tr>
<tr>
<td  scope="row"><p>Error Log role</p></td>
<td ><p><code>QTSS_ErrorLog_Role</code></p></td>
<td ><p>Logs errors.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP Filter role</p></td>
<td ><p><code>QTSS_RTSPFilter_Role</code></p></td>
<td ><p>Makes changes to the contents of RTSP requests.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP Route role</p></td>
<td ><p><code>QTSS_RTSPRoute_Role</code></p></td>
<td ><p>Routes requests from the client to the appropriate folder.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP Preprocessor role</p></td>
<td ><p><code>QTSS_RTSPPreProcessor_Role</code></p></td>
<td ><p>Processes requests from the client before the server processes
them.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP Request role</p></td>
<td ><p><code>QTSS_RTSPRequest_Role</code></p></td>
<td ><p>Processes a request from the client if no other role
responds to the request.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP Postprocessor role</p></td>
<td ><p><code>QTSS_RTSPPostProcessor_Role</code></p></td>
<td ><p>Performs tasks, such as logging statistical information,
after a request has been responded to.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTP Send Packets role</p></td>
<td ><p><code>QTSS_RTPSendPackets_Role</code></p></td>
<td ><p>Sends packets.</p></td>
</tr>
<tr>
<td  scope="row"><p>Client Session Closing role</p></td>
<td ><p><code>QTSS_ClientSessionClosing_Role</code></p></td>
<td ><p>Performs tasks when a client session closes.</p></td>
</tr>
<tr>
<td  scope="row"><p>RTCP Process role</p></td>
<td ><p><code>QTSS_RTCPProcess_Role</code></p></td>
<td ><p>Processes RTCP receiver reports.</p></td>
</tr>
<tr>
<td  scope="row"><p>Open File Preprocess role</p></td>
<td ><p><code>QTSS_OpenFilePreProcess_Role</code></p></td>
<td ><p>Processes requests to open files.</p></td>
</tr>
<tr>
<td  scope="row"><p>Open File role</p></td>
<td ><p><code>QTSS_OpenFile_Role</code></p></td>
<td ><p>Processes requests to open files that are not handled
by the Open File Preprocess role.</p></td>
</tr>
<tr>
<td  scope="row"><p>Advise File role</p></td>
<td ><p><code>QTSS_AdviseFile_Role</code></p></td>
<td ><p><code>R</code>esponds when
a module (or the server) calls the <code>QTSS_Advise</code> callback
for a file object.</p></td>
</tr>
<tr>
<td  scope="row"><p>Read File role<code></code></p></td>
<td ><p><code>QTSS_ReadFile_Role</code></p></td>
<td ><p>Reads a file.</p></td>
</tr>
<tr>
<td  scope="row"><p>Request Event File role</p></td>
<td ><p><code>QTSS_RequestEventFile_Role</code></p></td>
<td ><p>Handles requests for notification of when a file becomes
available for reading.</p></td>
</tr>
<tr>
<td  scope="row"><p>Close File role<code></code></p></td>
<td ><p><code>QTSS_CloseFile_Role</code></p></td>
<td ><p>Closes a file that was previously opened.</p></td>
</tr>

</table></div>
<p>With the exception of the Register, Shutdown, and Reread Preferences
roles, when the server invokes a module for a role, the server passes
to the module a structure specific to that particular role. The
structure contains information that the modules uses in the execution
of that role or provides a way for the module to return information
to the server. </p>
<p>The RTSP roles have the option of responding to the client.
A response is defined as any data that a module sends to a client.
Modules can send data to the client in a variety of ways. They can,
for example, call <code>QTSS_Write</code> or <code>QTSS_WriteV</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_9" title="Note"></a><p><strong>Note:</strong>&nbsp;The order in
which modules are called for any particular role is undetermined.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-123624" title="Register Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF109" title="Register Role"></a><h3>Register Role</h3>
<p>Modules use the Register role to call <code>QTSS_AddRole</code> to
tell the server the roles they support.</p>
<p>Modules also use the Register role to call <code>QTSS_AddService</code> to
register services and to call <code>QTSS_AddStaticAttribute</code> to
add static attributes to QTSS object types. (QTSS objects are collections
of attributes, each having a value.)</p>
<p>The server calls a module&#8217;s Register role once at startup.
The Register role is always the first role that the server calls. </p>
<p>A module that returns any value other than <code>QTSS_NoErr</code> from
its Register role is not loaded into the server.</p>
<a name="//apple_ref/doc/uid/TP30000245-123628" title="Initialize Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF110" title="Initialize Role"></a><h3>Initialize Role</h3>
<p>The server calls the Initialize role of those modules that
have registered for this role after it calls the Register role for
all modules. Modules use the Initialize role to initialize global and
private data structures.</p>
<p>The server passes to each module&#8217;s Initialize role objects
that can be used to obtain the server&#8217;s global attributes, preferences,
and text error messages. The server also passes the error log stream
reference, which can be used to write to the error log. All of these
objects are globals, so they are valid for the duration of this
run of the server and may be accessed at any time.</p>
<p>When called in the Initialize role, the module receives a <code>QTSS_Initialize_Params</code> structure which
is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ServerObject   inServer;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_PrefsObject    inPrefs;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_TextMessagesObjectinMessages;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ErrorLogStream inErrorLogStream;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ModuleObject   inModule;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_Initialize_Params;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inServer</code></dt>
<dd><p>A <code>QTSS_ServerObject</code> object
containing the server&#8217;s global attributes and an attribute that
contains information about all of the modules in the running server.
For a description of each attribute, see the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-388531">“qtssServerObjectType.”</a></span></p></dd>
<dt><code>inPrefs</code></dt>
<dd><p>A <code>QTSS_PrefsObject</code> object
containing the server&#8217;s preferences. For a description of each
attribute, see the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-380262">“qtssPrefsObjectType.”</a></span></p></dd>
<dt><code>inMessages</code></dt>
<dd><p>A <code>QTSS_TextMessagesObject</code> object
that a module can use for providing localized text strings. See
the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-389200">&#8220;qtssTextMessageObjectType&#8221;</a></code>.</p></dd>
<dt><code>inErrorLogStream</code></dt>
<dd><p>A <code>QTSS_ErrorLogStream</code> stream
reference that a module can use to write to the server&#8217;s error
log. Writing to this stream causes the module to be invoked in its
Error Log role.</p></dd>
<dt><code>inModule</code></dt>
<dd><p>A <code>QTSS_ModuleObject</code> object
that a module can use to store information about itself, including
its name, version number, and a description of what the module does.
See the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376781">&#8220;qttsModuleObjectType&#8221;</a></code>.</p></dd></dl>
<p>A module that wants to be called in the Initialize role must
in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_Initialize_Role</code> as
the role. </p>
<p>A module that returns any value other than <code>QTSS_NoErr</code> from
its Initialize role is not loaded into the server.</p>
<a name="//apple_ref/doc/uid/TP30000245-123633" title="Shutdown Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF111" title="Shutdown Role"></a><h3>Shutdown Role</h3>
<p>The server calls the Shutdown role of those modules that have
registered for this role when the server is getting ready to shut
down.</p>
<p>The server calls a module&#8217;s Shutdown role without passing
any parameters.</p>
<p>The module uses its Shutdown role to delete all data structures
it has created and to perform any other cleanup task</p>
<p>A module that wants to be called in the Shutdown role must
in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_Shutdown_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<p>The server guarantees that the Shutdown role is the last time
that the module is called before the server shuts down.</p>
<a name="//apple_ref/doc/uid/TP30000245-123638" title="Reread Preferences Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF112" title="Reread Preferences Role"></a><h3>Reread Preferences Role</h3>
<p>The server calls the Reread Preferences role of those modules
that have registered for this role and rereads its own preferences
when the server receives a <code>SIGHUP</code> signal
or when a module calls the Reread Preferences service described
in the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-379578">“QTSS Services.”</a></span></p>
<p>When called in this role, the module should reread its preferences,
which may be stored in a file or in a QTSS object.</p>
<p>A module that wants to be called in the Reread Preferences
role must in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_RereadPrefs_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123643" title="Error Log Role"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDEBCB" title="Error Log Role"></a><h3>Error Log Role</h3>
<p>The server calls the Error Log role of those modules that
have registered for this role when an error occurs. The module should
process the error message by, for example, writing the message to
a log file.</p>
<p>When called in the Error Log role, the module receives a <code>QTSS_ErrorLog_Params</code> structure, which
is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ErrorVerbosity inVerbosity;<span></span></pre></td></tr><tr><td scope="row"><pre>    char * inBuffer;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_ErrorLog_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inVerbosity</code></dt>
<dd><p>Specifies the verbosity level of this error message.
Modules should use the <code>inFlags</code> parameter
of <code>QTSS_Write</code> to specify
the verbosity level. The following constants are defined:</p><p><code>qtssFatalVerbosity
= 0,
qtssWarningVerbosity = 1,
qtssMessageVerbosity = 2,
qtssAssertVerbosity = 3,
qtssDebugVerbosity = 4,</code></p></dd>
<dt><code>inBuffer</code></dt>
<dd><p>Points to a null-terminated string containing the error
message.</p></dd></dl>
<p>Writing an error message at the level <code>qtssFatalVerbosity</code> causes
the server to shut down immediately.</p>
<p>Writing to the error log cannot result in an <code>QTSS_WouldBlock</code> error.</p>
<p>A module that wants to be called in the Error Log role must
in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_ErrorLog_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123648" title="RTSP Roles"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF113" title="RTSP Roles"></a><h3>RTSP Roles</h3>
<p>When the server receives an RTSP request, it goes through
a series of steps to process the request and ensure that a response
is sent to the client. The steps consist of calling certain roles
in a predetermined order. This section describes each role in detail.
For an overview of roles and the sequence in which they are called,
see the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-133092">“Overview of QuickTime Streaming Server Operations.”</a></span></p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_10" title="Note"></a><p><strong>Note:</strong>&nbsp;All RTSP roles
have the option of responding directly to the client. When any RTSP
role responds to a client, the server immediately skips the RTSP
roles that it would normally call and calls the RTSP Postprocessor
role of the module that responded to the RTSP request.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-123660" title="RTSP Filter Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF114" title="RTSP Filter Role"></a><h4>RTSP Filter Role</h4>
<p>The server calls the RTSP Filter role of those modules that
have registered for the RTSP Filter role immediately upon receipt
of an RTSP request. Processing the Filter role gives the module
an opportunity to respond to the request or to change the RTSP request.</p>
<p>When called in the RTSP Filter role, the module receives a <code>QTSS_StandardRTSP_Params</code> structure,
which is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPSessionObject      inRTSPSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPRequestObject      inRTSPRequest;<span></span></pre></td></tr><tr><td scope="row"><pre>    char**                      outNewRequest;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_StandardRTSP_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inRTSPSession</code></dt>
<dd><p>The <code>QTSS_RTSPSessionObject </code>object
for this RTSP session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386439">“qtssRTSPSessionObjectType”</a></span> for
information about RTSP session object attributes.</p></dd>
<dt><code>inRTSPRequest</code> </dt>
<dd><p>The <code>QTSS_RTSPRequestObject </code>object
for this RTSP request. When called in the RTSP Filter role, only
the <code>qtssRTSPReqFullRequest</code> attribute
has a value. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385883">“qtssRTSPRequestObjectType”</a></span> for
information about RTSP request object attributes.</p></dd>
<dt>outNewRequest</dt>
<dd><p>A pointer to a location in memory.</p></dd></dl>
<p>The module calls <code>QTSS_GetValuePtr</code> to
get from the <code>qtssRTSPReqFullRequest</code> attribute
the complete RTSP request that caused the server to call this role.
The <code>qtssRTSPReqFullRequest</code> attribute
is a read-only attribute. To change the RTSP request, the module
should call <code>QTSS_New</code> to
allocate a buffer, write the modified request into that buffer,
and return a pointer to that buffer in the <code>outNewRequest</code> field
of the <code>QTSS_StandardRTSP_Params</code> structure. </p>
<p>While a module is handling the RTSP Filter role, the server
guarantees that the module will not be called for any other role
referencing the RTSP session represented by <code>inRTSPSession</code>.</p>
<p>If module handling the RTSP Filter role responds directly
to the client, the server next calls the responding module in the
RTSP Postprocessor role. For information about that role, see the
section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-123676">“RTSP Postprocessor Role.”</a></span></p>
<p>A module that wants to be called in the RTSP Filter role must
in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_RTSPFilter_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123664" title="RTSP Route Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF115" title="RTSP Route Role"></a><h4>RTSP Route Role</h4>
<p>The server calls the RTSP Route role after the server has
called all modules that have registered for the RTSP Filter role.
It is the responsibility of a module handling this role to set the
appropriate root directory for each RTSP request by changing the <code>qtssRTSPReqRootDir</code> attribute
for the request.</p>
<p>When called, an RTSP Route role receives a <code>QTSS_StandardRTSP_Params</code> structure,
which is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPSessionObject      inRTSPSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPRequestObject      inRTSPRequest;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPHeaderObject       inRTSPHeaders;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObject    inClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_StandardRTSP_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inRTSPSession</code></dt>
<dd><p>The <code>QTSS_RTSPSessionObject </code>object
for this RTSP session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386439">“qtssRTSPSessionObjectType”</a></span> for
information about RTSP session object attributes.</p></dd>
<dt><code>inRTSPRequest</code> </dt>
<dd><p>The <code>QTSS_RTSPRequestObject </code>object
for this RTSP request. In the Route role and all subsequent RTSP
roles, all of the attributes are filled in. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385883">“qtssRTSPRequestObjectType”</a></span> for
information about RTSP request object attributes.</p></dd>
<dt><code>inRTSPHeaders</code></dt>
<dd><p>The <code>QTSS_RTSPHeaderObject </code>object
for the RTSP headers. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382852">“qtssRTSPHeaderObjectType”</a></span> for
information about RTSP header object attributes.</p></dd>
<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject </code>object
for the client session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">“qtssClientSessionObjectType”</a></span> for
information about client session object attributes.</p></dd></dl>
<p>Before calling modules in the RTSP Route role, the server
parses the request. Parsing the request consists of filling in all
of the attributes of the <code>QTSS_RTSPSessionObject</code> and <code>QTSS_RTSPRequestObject</code> members
of the <code>QTSS_StandardRTSP_Params</code> structure.</p>
<p>A module processing the RTSP Route role has the option of
changing the <code>qtssRTSPReqRootDir</code> attribute
of the <code>QTSS_RTSPRequestObject</code> member
of the <code>QTSS_StandardRTSP_Params</code> structure.
Changing the <code>qtssRTSPReqRootDir</code> attribute
changes the root folder for this RTSP request.</p>
<p>While a module is handling the RTSP Route role, the server
guarantees that the module will not be called for any other role
referencing the RTSP session represented by inRTSPSession.</p>
<p>If a module that is processing the RTSP Route role responds
directly to the client, the server immediately skips the processing
of any other roles and calls the responding module&#8217;s RTSP Postprocessor
role. For information about that role, see the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-123676">“RTSP Postprocessor Role.”</a></span></p>
<p>A module that wants to be called in the RTSP Route role must
in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_RTSPRoute_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123668" title="RTSP Preprocessor Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF116" title="RTSP Preprocessor Role"></a><h4>RTSP Preprocessor Role</h4>
<p>The server calls the RTSP Preprocessor role after the server
has called all modules that have registered for the RTSP Route role.
If the module handles the type of RTSP request for which the module
is called, it is the responsibility of a module handling this role
to send a proper RTSP response to the client. </p>
<p>When called, an RTSP Preprocessor role receives a <code>QTSS_StandardRTSP_Params</code> structure, which
is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPSessionObject  inRTSPSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPRequestObject  inRTSPRequest;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPHeaderObject   inRTSPHeaders;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObjectinClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_StandardRTSP_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inRTSPSession</code></dt>
<dd><p>The <code>QTSS_RTSPSessionObject</code> object
for this RTSP session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386439">“qtssRTSPSessionObjectType”</a></span> for
information about RTSP session object attributes.</p></dd>
<dt><code>inRTSPRequest</code> </dt>
<dd><p>The <code>QTSS_RTSPRequestObject </code>object
for this RTSP request with a value for each attribute. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385883">“qtssRTSPRequestObjectType”</a></span> for information
about RTSP request object attributes.</p></dd>
<dt><code>inRTSPHeaders</code></dt>
<dd><p>The <code>QTSS_RTSPHeaderObject </code>object
for the RTSP headers. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382852">“qtssRTSPHeaderObjectType”</a></span> for
information about RTSP header object attributes.</p></dd>
<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject</code> object
for the client session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">“qtssClientSessionObjectType”</a></span> for
information about client session object attributes. </p></dd></dl>
<p>The RTSP Preprocessor role typically uses the <code>qtssRTSPReqFilePath</code> attribute
of the <code>inRTSPRequest</code> member
of the <code>QTSS_StandardRTSP_Params</code> structure
to determine whether the request matches the type of request that
the module handles. For example, a module may only handle URLs that
end in <code>.mov</code> or <code>.sdp</code>.</p>
<p>If the request matches, the module handling the RTSP Preprocessor
role responds to the request by calling <code>QTSS_SendStandardRTSPResponse</code>, <code>QTSS_Write</code>,
or <code>QTSS_WriteV</code>, or by calling <code>QTSS_AppendRTSPHeader</code>,
and <code>QTSS_SendRTSPHeaders</code>.
If this module is also responsible for generating RTP packets for
this client session, it should call <code><a href="../Reference/QTSSRef.html#//apple_ref/c/tdef/QTSS_AddRTPStream">QTSS_AddRTPStream</a></code> to
add streams to the client session, and <code>QTSS_Play</code>,
which causes the server to invoke the RTP Send Packets role of the
module whose RTSP Preprocessor role calls <code>QTSS_Play</code>.</p>
<p>While a module is handling the RTSP Preprocessor role, the
server guarantees that the module will not be called for any other
role referencing the RTSP session specified by <code>inRTSPSession</code> or
the client session specified by <code>inClientSession</code>.</p>
<p>A module that wants to be called in the RTSP Preprocessor
role must in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_RTSPPreProcessor_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123672" title="RTSP Request Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF117" title="RTSP Request Role"></a><h4>RTSP Request Role</h4>
<p>The server calls the RTSP Request role if no RTSP Preprocessor
role responds to an RTSP request. Only one module is called in the
RTSP Request role, and that is the first module to register for
the RTSP Request role when the server starts up.</p>
<p>When called, the RTSP Request role receives a <code>QTSS_StandardRTSP_Params</code> structure,
which is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPSessionObject      inRTSPSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPRequestObject      inRTSPRequest;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPHeaderObject       inRTSPHeaders;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObject    inClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_StandardRTSP_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inRTSPSession</code></dt>
<dd><p>The <code>QTSS_RTSPSessionObject </code>object
for this RTSP session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386439">“qtssRTSPSessionObjectType”</a></span> for
information about RTSP session object attributes.</p></dd>
<dt><code>inRTSPRequest</code> </dt>
<dd><p>The <code>QTSS_RTSPRequestObject </code>object
for this RTSP request with a value for each attribute. See the section<span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385883">“qtssRTSPRequestObjectType”</a></span> for information
about RTSP request object attributes.</p></dd>
<dt><code>inRTSPHeaders</code></dt>
<dd><p>The <code>QTSS_RTSPHeaderObject </code>object
for the RTSP headers. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382852">“qtssRTSPHeaderObjectType”</a></span> for
information about RTSP header object attributes.</p></dd>
<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject </code>object
for the client session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">“qtssClientSessionObjectType”</a></span> for
information about client session object attributes.</p></dd></dl>
<p>Like a module processing the RTSP Preprocessor role, a module
that processes the RTSP Request Role should use an attribute, such
as the <code>qtssRTSPReqFilePath</code> attribute
of the <code>inRTSPRequest </code> member
of the <code>QTSS_StandardRTSP_Params</code> structure,
to determine whether the request matches the type of request that
the module can handle.</p>
<p>A module handling the RTSP Request role should respond to
the request by</p>
<ul class="spaceabove"><li class="li"><p>Sending an RTSP response to the client by calling <code>QTSS_AppendRTSPHeader</code> and <code>QTSS_SendRTSPHeaders</code>,
by calling <code>QTSS_SendStandardRTSPResponse</code>,
or by calling <code>QTSS_Write </code>or <code>QTSS_WriteV</code>.</p></li>
<li class="li"><p>Preparing the <code>QTSS_ClientSessionObject</code> for
streaming by using the RTP callbacks, such as <code>QTSS_AddRTPStream </code>and <code>QTSS_Play</code>.
If <code>QTSS_Play</code> is called,
the server will invoke the calling module in the RTP Send Packets
role, at which time the module will be expected to generate RTP
packets to send to the client.</p></li></ul>
<p>A module that wants to be called in the RTSP Request role
must in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_RTSPRequest_Role</code> as
the role. The first module that successfully calls <code>QTSS_AddRole</code> and
specifies <code>QTSS_RTSPRequest_Role</code> as
the role is the only module that is called in the RTSP Request role.</p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123676" title="RTSP Postprocessor Role"></a><a name="//apple_ref/doc/uid/TP30000245-BAJIDIAI" title="RTSP Postprocessor Role"></a><h4>RTSP Postprocessor Role</h4>
<p>The server calls a module&#8217;s RTSP Postprocessor role whenever
the module responds to an RTSP request if that module has registered
for this role. </p>
<p>Modules can use the RTSP Postprocessor role to log statistical
information.</p>
<p>When called, the RTSP Postprocessor role receives a <code>QTSS_StandardRTSP_Params</code> structure, which
is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPSessionObject      inRTSPSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPRequestObject      inRTSPRequest;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTSPHeaderObject       inRTSPHeaders;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObject    inClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_StandardRTSP_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inRTSPSession</code></dt>
<dd><p>The <code>QTSS_RTSPSessionObject </code>object
for this RTSP session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386439">“qtssRTSPSessionObjectType”</a></span> for
information about RTSP session object attributes.</p></dd>
<dt><code>inRTSPRequest</code> </dt>
<dd><p>The <code>QTSS_RTSPRequestObject </code>object
for this RTSP request with a value for each attribute. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385883">“qtssRTSPRequestObjectType”</a></span> for information
about RTSP request object attributes.</p></dd>
<dt><code>inRTSPHeaders</code></dt>
<dd><p>The <code>QTSS_RTSPHeaderObject </code>object
for the RTSP headers. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382852">“qtssRTSPHeaderObjectType”</a></span> for
information about RTSP header object attributes.</p></dd>
<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject </code>object
for the client session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">“qtssClientSessionObjectType”</a></span> for
information about client session object attributes.</p></dd></dl>
<p>While a module is handling the RTSP Postprocessor role, the
server guarantees that the module will not be called for any role
referencing the RTSP session specified by inRTSPSession or the client
session specified by inClientSession.</p>
<p>A module that wants to be called in the RTSP Postprocessor
role must in its Register role call <code>QTSS_AddRole </code>and
specify <code>QTSS_RTSPPostProcessor_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123680" title="RTP Roles"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF118" title="RTP Roles"></a><h3>RTP Roles</h3>
<p>This section describes RTP roles, which are used to send data
to clients and to handle the closing of client sessions. </p>
<a name="//apple_ref/doc/uid/TP30000245-123685" title="RTP Send Packets Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF119" title="RTP Send Packets Role"></a><h4>RTP Send Packets Role</h4>
<p>The server calls a module&#8217;s RTP Send Packets role when the
module calls <code>QTSS_Play</code>.
It is the responsibility of the RTP Send Packets role to send media
data to the client and tell the server when the module&#8217;s RTP Send
Packets role should be called again.</p>
<p>When called, the RTP Send Packets role receives a <code>QTSS_RTPSendPackets_Params</code> structure, which
is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObject    inClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt64                      inCurrentTime;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_TimeVal                outNextPacketTime;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_RTPSendPackets_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject </code>object
for the client session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">“qtssClientSessionObjectType”</a></span> for
information about client session object attributes.</p></dd>
<dt><code>inCurrentTime</code></dt>
<dd><p>The current time in server time units. </p></dd>
<dt><code>outNextPacketTime</code></dt>
<dd><p>A time offset in milliseconds. Before returning from
this role, a module should set <code>outNextPacketTime</code> to
the amount of time that the server should allow to elapse before
calling the RTP Send Packets role again for this session.</p></dd></dl>
<p>The RTP Send Packets role is invoked whenever a module calls <code>QTSS_Play</code> for
that client session. The module calls <code>QTSS_Write </code>or <code>QTSS_WriteV</code> to
send data to the client.</p>
<p>While a module is handling the RTP Send Packets role, the
server guarantees that the module will not be called for any role
referencing the client session specified by <code>inClientSession</code>.</p>
<p>A module that wants to be called in the RTP Send Packets role
must in its Register role call <code>QTSS_AddRole</code> and
specify <code>QTSS_RTPSendPackets_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123690" title="Client Session Closing Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF120" title="Client Session Closing Role"></a><h4>Client Session Closing Role</h4>
<p>The server calls a module&#8217;s Client Session Closing role
to allow the module to process the closing of client sessions.</p>
<p>When called, the Client Session Closing role receives a <code>QTSS_ClientSessionClosing_Params</code> structure,
which is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientClosing          inReason;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObject    inClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_ClientSessionClosing_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inReason</code></dt>
<dd><p>The reason why the session is closing. The session may
be closing because the client sent an RTSP teardown (<code>qtssCliSesClosClientTeardown</code>),
because this session has timed out (<code>qtssCliSesClosTimeout</code>),
or because the client disconnected without issuing a teardown (<code>qtssCliSesClosClientDisconnect</code>).</p></dd>
<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject </code>object
for the client session that is closing.</p></dd></dl>
<p>The Client Session Closing role is called whenever the client
session specified by <code>inClientSession</code> is
about to be torn down.</p>
<p>While a module is handling the Client Session Closing role,
the server guarantees that the module will not be called for any
role referencing the client session specified by <code>inClientSession</code>.</p>
<p>A module that wants to be called in the Client Session Closing
role must in its Register role call <code>QTSS_AddRole </code>and
specify <code>QTSS_ClientSessionClosing_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-123694" title="RTCP Process Role"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF121" title="RTCP Process Role"></a><h3>RTCP Process Role</h3>
<p>The server calls a module&#8217;s RTCP Process role whenever it
receives an RTCP receiver report from a client.</p>
<p>RTCP receiver reports contain feedback from the client on
the quality of the stream. The feedback includes the percentage
of lost packets, the number of times the audio has run dry, and
frames per second. Many attributes in the <code>QTSS_RTPStreamObject</code> correlate
directly to fields in the receiver report.</p>
<p>When called, the RTP Process role receives a <code>QTSS_RTCPProcess_Params</code> structure,
which is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_RTPStreamObject        inRTPStream;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ClientSessionObject    inClientSession;<span></span></pre></td></tr><tr><td scope="row"><pre>    void*                       inRTCPPacketData;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32                      inRTCPPacketDataLen;<span></span></pre></td></tr><tr><td scope="row"><pre>} QTSS_RTCPProcess_Params;<span></span></pre></td></tr></table></div>
<dl class="termdef">	<dt><code>inRTPStream</code></dt>
<dd><p>The <code>QTSS_RTPStreamObject</code> object
for the RTP stream that this RTCP packet belongs to. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382242">“qtssRTPStreamObjectType”</a></span> for
information about RTP stream object attributes.</p></dd>
<dt><code>inClientSession</code></dt>
<dd><p>The <code>QTSS_ClientSessionObject </code>object
for the client session. See the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">“qtssClientSessionObjectType”</a></span> for
information about client session object attributes.</p></dd>
<dt><code>inRTCPPacketData</code></dt>
<dd><p>A pointer to a buffer containing the packets that are
to be processed. </p></dd>
<dt><code>inRTCPPacketDataLen</code></dt>
<dd><p>The length of valid data in the buffer pointed to by <code>inRTCPPacketData</code>.</p></dd></dl>
<p>A module handling the RTCP Process role typically monitors
the status of the connection. It might, for example, track the percentage
of packets lost for each connected client and update its counters.</p>
<p>While a module is handling the RTCP Process role, the server
guarantees that the module will not be called for any role referencing
the RTP stream specified by <code>inRTPStream</code>.</p>
<p>A module that wants to be called in the RTCP Process role
must in its Register role call <code>QTSS_AddRole </code>and
specify <code>QTSS_RTCPProcess_Role</code> as
the role. </p>
<p>Modules should always return <code>QTSS_NoErr</code> when
they finish handling this role.</p>
<a name="//apple_ref/doc/uid/TP30000245-375560" title="QTSS Objects"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEJGJE" title="QTSS Objects"></a><h2>QTSS Objects</h2>
<p>QTSS objects provide a way for modules and the server to exchange
data with each other. QTSS objects consist of attributes that are
used to store data. Every attribute has a name, an attribute ID,
a data type, and permissions for reading and writing the attribute&#8217;s
value. Built-in attributes are attributes that the server always
defines for an object type. For example, the <code>QTSS_RTSPRequestObject</code> object
has a built-in URL attribute that other modules can read to obtain
the URL associated with a particular RTSP request.</p>
<p>This section describes the attributes for each object type.
The object types are</p>
<ul class="ul"><li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375704">qtssAttrInfoObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375845">qtssClientSessionObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376358">qtssConnectedUserObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376607">qtssDynamicObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376625">qtssFileObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376781">qttsModuleObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-380262">qtssPrefsObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382242">qtssRTPStreamObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382852">qtssRTSPHeaderObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385883">qtssRTSPRequestObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386439">qtssRTSPSessionObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-388531">qtssServerObjectType</a></code></p></li>
<li class="li"><p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-389200">qtssTextMessageObjectType</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-375704" title="qtssAttrInfoObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF125" title="qtssAttrInfoObjectType"></a><h3>qtssAttrInfoObjectType</h3>
<p>An object of type <code>qtssAttrInfoObjectType</code> consists
of attributes whose values describe an attribute: the attribute&#8217;s
name, attribute ID, data type, and permissions for reading and writing
the attribute&#8217;s value. An attribute information object (<code>QTSS_AttrInfoObject</code>)
is an instance of this object type. There is one <code>QTSS_AttrInfoObject</code> for
every attribute.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375766">Table 1-2</a></span> lists the attributes for objects of type <code>qtssAttrInfoObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code>or <code>QTSS_GetValuePtr</code>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-375766" title="Table 1-2Attributes of objects of type qtssAttrInfoObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFHJDF" title="Table 1-2Attributes of objects of type qtssAttrInfoObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssAttrInfoObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssAttrID</code>
The attribute&#8217;s identifier.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_AttributeID</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssAttrDataType</code>
The attribute&#8217;s data type.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_AttrDataType</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssAttrName</code>
The attribute&#8217;s name.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssAttrPermissions</code>
Permissions for reading and writing the attribute&#8217;s value, and
whether getting the attribute&#8217;s value is preemptive safe.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_AttrPermission</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-375845" title="qtssClientSessionObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGJDEE" title="qtssClientSessionObjectType"></a><h3>qtssClientSessionObjectType</h3>
<p>An object of type <code>qtssClientSessionObjectType</code> consists
of attributes that describe a client session, where a client session
is defined as a single client streaming presentation. A client session
object (<code>QTSS_ClientSessionObject</code>)
is an instance of this object type. The attributes of a client session
object are valid for all roles that receive a value of type <code>QTSS_ClientSessionObject</code> in
the structure the server passes to them.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-375909">Table 1-3</a></span> lists the attributes for objects of type <code>qtssClientSessionObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code>or <code>QTSS_GetValuePtr</code>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-375909" title="Table 1-3Attributes of objects of type qtssClientSessionObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEAAJB" title="Table 1-3Attributes of objects of type qtssClientSessionObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-3&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssClientSessionObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssCliSesAdjustedPlayTimeInMsec
</code>The time in milliseconds at which the most
recent play was issued, adjusted forward to delay sending packets until
the play response is issued.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesCounterID</code>
A counter-based unique ID for the session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesCreateTimeInMsec</code>
The time in milliseconds that the session was created.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesCurrentBitRate</code>
The movie bit rate.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesFirstPlayTimeInMsec</code>
The time in milliseconds at which <code>QTSS_Play</code> was
first called.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesFullURL
</code>The full presentation URL for this session.
Same as the <code>qtssCliSesPresentationURL</code> attribute but
includes the
<code>rtsp://</code><em>domain_name</em> prefix.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesHostName</code>
The host name for this session. Also the <em>domain_name</em> <code>portion
of the qtssCliSesFullURL attribute</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesMovieAverageBitRate</code>
The average bits per second based on total RTP bits/movie duration.
The value is zero unless set by a module.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesMovieDurationInSecs
</code>Duration of the movie for this session in
seconds. The value is zero unless set by a module.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>Float64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesMovieSizeInBytes</code>
Movie size in bytes. The value is zero unless set by a module.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesPacketLossPercent</code>
Percentage of packets lost; for example, .5 = 50%</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesPlayTimeInMsec</code>
The time in milliseconds at which <code>QTSS_Play</code> was
most recently called.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesPresentationURL</code>
The presentation URL for this session. This URL is the &#8220;base&#8221;
URL for the session. RTSP requests to the presentation URL are assumed
to affect all streams of the session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesReqQueryString</code>
The query string from the request that created this client session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesRTPBytesSent</code>
The number of RTP bytes sent for this session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesRTPPacketsSent</code>
The number of RTP packets sent for this session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesState</code>
The state of this session. Possible values are <code>qtssPausedState</code> and <code>qtssPlayingState.</code></p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_RTPSessionState</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesStreamObjects</code>
Iterated attribute containing all RTP stream references (<code>QTSS_RTPStreamObject</code>)
belonging to this session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_RTPStreamObject</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliSesTimeConnectedinMsec</code>
Time in milliseconds that the client session has been connected.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>SInt64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPReqRealStatusCode</code>
The status from the most recent request. (Same as the <code>qtssRTSPReqRealStatusCode</code> session.)</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPReqRespMsg
</code>The error message sent to the client for the
most recent request if the response was an error.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPSessLocalAddrStr
</code>The local IP address for this RTSP connection
in dotted decimal format.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPSessLocalDNS</code>
The DNS name of the local IP address for this RTSP connection.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPSessRemoteAddrStr</code>
The IP address of the client in dotted decimal format.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPSesURLRealm</code>
The realm from the most recent request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliRTSPSesUserName</code>
The name of the user from the most recent request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssCliTeardownReason
</code>The teardown reason. If not requested by the
client, the reason for the disconnection must be set by the module
that calls <code>QTSS_Teardown</code>.</p></td>
<td ><p>Readable,
writable,
preemptive safe
</p></td>
<td ><p>QTSS_CliSesTeardownReason</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-376358" title="qtssConnectedUserObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-CJBFJJFF" title="qtssConnectedUserObjectType"></a><h3>qtssConnectedUserObjectType</h3>
<p>An object of type <code>qtssConnectedUserObjectType </code>consists
of attributes associated with a connected user, irrespective of
the transport. Users connecting to a QuickTime movie are already
represented by objects of type <code>qtssClientSessionObjectType</code>,
so this object is used for other connected users, such as those
requesting MP3 streams.</p>
<p>A connected user object (<code>QTSS_ConnectedUserObject</code>)
is an instance of this object type. A <code>QTSS_ConnectedUserObject</code> can
be created in any module. It can be added to the <code>qtssSvrConnectedUsers</code> attribute
of the <code>QTSS_ServerObject</code> (described
in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-388531">&#8220;qtssServerObjectType&#8221;</a></code>).</p>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376444">Table 2-4</a></code> lists the
attributes for objects of type <code>qtssConnectedUserObjectType</code><code>.</code></p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code><code>QTSS_GetValuePtr.</code></p></div>
<a name="//apple_ref/doc/uid/TP30000245-376444" title="Table 1-4Attributes of objects of type qtssConnectedUserObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-CJBBBCDA" title="Table 1-4Attributes of objects of type qtssConnectedUserObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-4&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssConnectedUserObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Types</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssConnectionBytesSent
</code>Number of RTP bytes sent so far for this session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionCreateATimeInMsec</code>
The time in milliseconds at which the session was created.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionCurrentBitRate
</code>Combined current bit rate in bits per second
of all of the streams for this session. This is not an average.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionHostName
</code>The host name of the connected client.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionMountPoint</code>
Presentation URL for this session. This URL is the &#8220;base&#8221; URL
for the session. RTSP requests to this URL are assumed to affect
all of the session&#8217;s streams.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionPacketLossPercent
</code>Combined current percent loss as a fraction;
for example, .5 = 50%. This is not an average.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionTimeConnectedInMsec
</code>Time in milliseconds the session has been connected.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionType</code>
The user&#8217;s connection type, such as &#8220;MP3&#8221;.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionSessLocalAddrStr
</code>Local IP address for this connection in dotted-decimal
format.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssConnectionSessRemoteAddrStr
</code>IP address of the client in dotted-decimal format.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-376607" title="qtssDynamicObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-CJBBBDHA" title="qtssDynamicObjectType"></a><h3>qtssDynamicObjectType</h3>
<p>An object of type <code>qtssDynamicObjectType</code> can
be used to create an object that doesn&#8217;t have any static attributes.</p>
<a name="//apple_ref/doc/uid/TP30000245-376625" title="qtssFileObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGJBCC" title="qtssFileObjectType"></a><h3>qtssFileObjectType</h3>
<p>An object of type <code>qtssFileObject</code> consists
of attributes that describe a file that has been opened. A file
object (<code>QTSS_FileObject</code>)
is an instance of this object type. These attributes are valid for
all roles that receive a <code>QTSS_FileObject</code> in
the structure the server passes to them.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376688">Table 1-5</a></span> lists the attributes for objects of type <code>qtssFileObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code>or <code>QTSS_GetValuePtr</code>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-376688" title="Table 1-5Attributes of objects of type qtssFileObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCCEEA" title="Table 1-5Attributes of objects of type qtssFileObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-5&nbsp;&nbsp;</strong>Attributes of objects of type qtss<code>FileObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssFlObjStream</code>
The stream reference for this file object.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_StreamRef</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssFlOjFileSysModuleName</code>
The name of the file system module that handles this file object</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssFlObjLength</code>
The length of the file in bytes.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssFlObjPosition
</code>The current position in bytes of the file&#8217;s file
pointer from the beginning of the file (byte zero).</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssFlObjModDate</code>
The date and time of the last time the file was modified.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-376781" title="qttsModuleObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFGHGG" title="qttsModuleObjectType"></a><h3>qttsModuleObjectType</h3>
<p>An object of type <code>qtssModuleObject</code> consists
of attributes that describe a particular QTSS module, including
its name, version number, a description of what the module does,
its preferences, and the roles the module is registered for. A module
object (<code>QTSS_ModuleObject</code>)
is an instance of this object type. These attributes are valid for
all roles that receive a <code>QTSS_ModuleObject</code> in
the structure the server passes to them.</p>
<p>For each module the server loads, the server creates a module
object and passes it to the module in the module&#8217;s Initialize
role. Modules can get information about other modules the server
has loaded by accessing the <code>qtssSvrModuleObject</code> attribute
of the <code>QTSS_ServerObject</code> object.</p>
<p>In addition to the attributes that store the module&#8217;s name,
version number and description, this object type has a module preferences
attribute, <code>qtssModPrefs</code>.
The <code>qtssModPrefs</code> attribute
itself is an object whose attributes store the module&#8217;s preferences
as instance attributes. All modifications to the <code>qtssModPrefs</code> attribute
are persistent between invocations of the server because the contents
of each module&#8217;s <code>qtssModPrefs</code> attribute
are written to the server&#8217;s configuration file, which is read
when the server starts up.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-376886">Table 1-6</a></span> lists the attributes for objects of type <code>qtssModuleObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;With the exception
of <code>qtssModDesc</code> and <code>qtssModVersion</code>,
these attributes are preemptive safe and can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString</code>,
or <code>QTSS_GetValuePtr</code>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-376886" title="Table 1-6Attributes of objects of type qtssModuleObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHAGCB" title="Table 1-6Attributes of objects of type qtssModuleObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-6&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssModuleObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssModAttributes
</code>An object that modules can use to store any
local attributes other than preferences.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>QTSS_Object</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssModDesc</code>
A description of what the module does.</p></td>
<td ><p>Readable,
writable
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssModName</code>
The module&#8217;s name.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssModPrefs
</code>An object whose attributes store the preferences
for this module.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_ModulePrefsObject</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssModRoles</code>
A list of all the roles for which this module is registered.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_Role</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssModVersion</code>
The module&#8217;s version number in the format 0x<em>MM</em>.<em>m</em>.<em>v</em>.<em>bbbb</em>,
where
<em>MM</em> = major version, <em>m</em> =
minor version,
<em>v</em> = very minor version, and <em>b</em> =
build number.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-377025" title="qtssModulePrefsObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCFJAI" title="qtssModulePrefsObjectType"></a><h3>qtssModulePrefsObjectType</h3>
<p>An object of type <code>QTSS_ModulePrefsObject</code> consists
of attributes that contain a module&#8217;s preferences. A module preferences
object <code>QTSS_ModulePrefsObject</code>)
is an instance of this object type.</p>
<p>Each module is reponsible for adding attributes to its module
preferences object and setting their values. The values of the preferences
in the module preferences object are persistent between invocations
of the server because the server writes the module preferences object
for each module to a configuration file that the server reads when
it is started.</p>
<a name="//apple_ref/doc/uid/TP30000245-377051" title="QTSSAccessLogModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHJIIB" title="QTSSAccessLogModule Preferences"></a><h4>QTSSAccessLogModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-377079">Table 1-7</a></span> lists the attributes for preferences of the module <code>QTSSAccessLogModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-377079" title="Table 1-7Attributes for preferences of the module QTSSAccessLogModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJIFCGJ" title="Table 1-7Attributes for preferences of the module QTSSAccessLogModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-7&nbsp;&nbsp;</strong>Attributes for preferences of the module <code>QTSSAccessLogModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>request_logging</code>
By default, the value of this attribute is <code>true</code>.<code></code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>request_logfile_size</code>
By default, the value of this attribute is 10240000.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>request_logfile_interval</code>
By default, the value of this attribute is 7.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>request_logfile_in_gmt</code>
Set to <code>true</code> to use Greenwich
Mean Time (GMT) instead of local time in access log file entries.
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>request_logfile_dir</code>
By default, the value of this attribute is <code>
/Library/QuickTimeStreaming/Logs/</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>request_logfile_name</code>
By default, the value of this attribute is <code>StreamingServer</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-377210" title="QTSSAccessModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCDDBI" title="QTSSAccessModule Preferences"></a><h4>QTSSAccessModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-377238">Table 1-8</a></span> lists the attributes for preferences of the module <code>QTSSAccessModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-377238" title="Table 1-8Attributes for preferences of the module QTSSAccessModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCEGEI" title="Table 1-8Attributes for preferences of the module QTSSAccessModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-8&nbsp;&nbsp;</strong>Attributes for preferences of the module <code>QTSSAccessModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>modAccess_groupsfilepath</code>
By default, the value of this attribute is <code>
/Library/QuickTimeStreaming/Config/qtgroups</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>modAccess_qtaccessfilename</code>
By default, the value of this attribute is <code>qtaccess</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>modAccess_usersfilepath</code>
By default, the value of this attribute is <code>
/Library/QuickTimeStreaming/Config/qtusers</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-377315" title="QTSSAdminModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDDHJC" title="QTSSAdminModule Preferences"></a><h4>QTSSAdminModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-377343">Table 1-9</a></span> lists the attributes for preferences of the module <code>QTSSAdminModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-377343" title="Table 1-9Attributes for preferences of the module QTSSAdminModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHDGAG" title="Table 1-9Attributes for preferences of the module QTSSAdminModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-9&nbsp;&nbsp;</strong>Attributes for preferences of the module <code>QTSSAdminModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>AdministratorGroup</code>
By default, the value of this attribute is <code>admin</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>Authenticate</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_remote_admin</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>IPAccessList</code>
Set to a list of IP addresses to allow remote admin access from
the specified IPs only. By default, the value of this attribute
is 127.0.0.*. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>LocalAccessOnly</code>
Set to <code>true</code> to allow
local admin server requests only. By default, the value of this
attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>RequestTimeIntervalMilli</code>
By default, the value of this attribute is 50. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-377470" title="QTSSFileModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHIJCH" title="QTSSFileModule Preferences"></a><h4>QTSSFileModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-377498">Table 1-10</a></span> lists the attributes for preferences of the module <code>QTSSFileModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-377498" title="Table 1-10Attributes for preferences of the module QTSSFileModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBACAG" title="Table 1-10Attributes for preferences of the module QTSSFileModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-10&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSFileModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>add_seconds_to_client_buffer_delay</code>
Adds the specified number of seconds to the normal buffer delay.
By default, the value of this attribute is 0.000000. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>admin_email</code>
By default, this attribute does not have a value. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>compatibility_adjust_sdp_media_bandwidth_percent</code>
Used to adjust the SDP media bandwidth percentage for compatibility
with certain players. By default, the value of this attribute is
100.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_movie_file_sdp</code>
Set to <code>true</code> to override
the movie&#8217;s built-in SDP information. By default, the value of
this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_player_compatibility</code>
Enables player compatibility with certain players. By default, the
value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_private_file_buffers</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_shared_file_buffers</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>flow_control_probe_interval</code>
By default, the value of this attribute is 10.<code></code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>max_allowed_speed</code>
By default, the value of this attribute is 4.000000.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>max_private_buffer_units_per_buffer</code>
By default, the value of this attribute is 8. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>max_shared_buffer_units_per_buffer</code>
By default, the value of this attribute is 8. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>num_private_buffer_units_per_buffer</code>
By default, the value of this attribute is 1. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>num_shared_buffer_increase_per_session</code>
By default, the value of this attribute is 2. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>num_shared_buffer_units_per_buffer</code>
By default, the value of this attribute is 0. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>private_buffer_unit_k_size</code>
Size of private file I/O buffers. By default, the value of this
attribute is 64. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>record_movie_file_sdp</code>
Set to <code>true</code> to cause
SDP information to be provided when the movie is played. By default,
the value of this attribute is <code>false</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>sdp_url</code>
By default, this attribute does not have a value. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>shared_buffer_unit_k_size</code>
Size of shared file I/O buffers. By default, the value of this attribute
is 64. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-377805" title="QTSSFlowControlModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDFHEE" title="QTSSFlowControlModule Preferences"></a><h4>QTSSFlowControlModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-377833">Table 1-11</a></span> lists the attributes for preferences of the module <code>QTSSFlowControlModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-377833" title="Table 1-11Attributes for preferences of the module QTSSFlowControlModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHEJEI" title="Table 1-11Attributes for preferences of the module QTSSFlowControlModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-11&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSFlowControlModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>flow_control_udp_thinning_module_enabled
</code>By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>loss_thick_tolerance</code>
By default, the value of this attribute is 5.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>loss_thin_tolerance</code>
By default, the value of this attribute is 30.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>num_losses_to_thick</code>
By default, the value of this attribute is 6. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>num_losses_to_thin</code>
By default, the value of this attribute is 3.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>num_worses_to_thin</code>
By default, the value of this attribute is 2<code>.</code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-377948" title="QTSSHomeDirectoryModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFGJAJ" title="QTSSHomeDirectoryModule Preferences"></a><h4>QTSSHomeDirectoryModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-377976">Table 1-12</a></span> lists the attributes for preferences of the module <code>QTSSHomeDirectoryModule</code>. These
preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-377976" title="Table 1-12Attributes for preferences of the module QTSSHomeDirectoryModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBHAJF" title="Table 1-12Attributes for preferences of the module QTSSHomeDirectoryModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-12&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSHomeDirectoryModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>enabled</code>
Enable or disable this module.
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>movies_directory</code>
By default, this attribute does not have a value.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>max_num_cons_per_home_directory</code>
Denies additional client connections greater than the value of this
attribute.
By default, the value of this attribute is 0.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>max_bandwidth_kbps_per_home_directory</code>
Denies additional client connections when the value of this attribute
is exceeded.
By default, the value of this attribute is 0.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-378059" title="QTSSMP3StreamingModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGJADC" title="QTSSMP3StreamingModule Preferences"></a><h4>QTSSMP3StreamingModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-378087">Table 1-13</a></span> lists the attributes for preferences of the module <code>QTSSMp3StreamingModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-378087" title="Table 1-13Attributes for preferences of the module QTSSMP3StreamingModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHIHEE" title="Table 1-13Attributes for preferences of the module QTSSMP3StreamingModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-13&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSMP3StreamingModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>mp3_request_logfile_name</code>
By default, the value of this attribute is <code>mp3_access</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_request_logfile_dir</code>
By default, the value of this attribute is <code>
/Library/QuickTimeStreaming/Logs</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_streaming_enabled</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_broadcast_password</code>
By default, the value of this attribute is <code>true</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_broadcast_password</code>
By default, this attribute has no value.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_broadcast_buffer_size</code>
By default, the value of this attribute is 8192 bytes.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_max_flow_control_time</code>
Length of the server-side MP3 buffer in milliseconds. By default,
the value of this attribute is 10. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_request_logging</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_request_logfile_size</code>
By default, the value of this attribute is 10240000.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_request_logfile_interval</code>
By default, the value of this attribute is 7.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>mp3_request_logtime_in_gmt</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-378288" title="QTSSReflectorModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJIDFB" title="QTSSReflectorModule Preferences"></a><h4>QTSSReflectorModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-378316">Table 1-14</a></span> lists the attributes for preferences of the module <code>QTSSReflectorModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-378316" title="Table 1-14Attributes for preferences of the module QTSSReflectorModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJBAGEJ" title="Table 1-14Attributes for preferences of the module QTSSReflectorModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-14&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSReflectorModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>allow_broadcasts</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>allow_duplicate_broadcasts</code>
Set to <code>true</code> to allow
the acceptance of setups on an existing broadcast stream. By default,
the value of this attribute is <code>false</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>allow_non_sdp_urls</code>
By default, the value of this attribute is <code>true</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>allow_announced_kill</code>
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>authenticate_local_broadcast</code>
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>broadcast_dir_list</code>
By default, this attribute has no value.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>compatibility_adjust_sdp_media_bandwidth_percent</code>
This attribute is provided for compatibility with 3GPP players.
By default, the value of this attribute is 50<code>.</code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>disable_rtp_play_info</code>
RTP play information is always enabled. Set this attribute to <code>true</code> to
disable RTP play information. By default, the value of this attribute
is <code>false</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>disable_overbuffering</code>
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_broadcast_announce</code>
Set to <code>true</code> to enable
broadcaster announce of an SDP file to the server. By default, the
value of this attribute is <code>true</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_broadcast_push</code>
Set to <code>true</code> to enable
broadcaster RTSP push to the server. By default, the value of this
attribute is <code>true</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_play_response_range_header</code>
This attribute is provided for compatibility with 3GPP players.
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enable_player_compatibility</code>
This attribute is provided for compatibility with 3GPP players.
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>enforce_static_sdp_port_range</code>
By default, the value of this attribute is <code>false</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>force_rtp_info_sequence_and_time</code>
This attribute is provided for compatibility with 3GPP players.
By default, the value of this attribute is <code>false</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>ip_allow_list</code>
By default, the value of this attribute is 127.0.0.*.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>kill_clients_when_broadcast_stops</code>
When set to <code>true</code>, clients
watching the stream of a broadcaster RTSP session that goes down
are also torn down. By default, the value of this attribute is <code></code><code>false</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>max_broadcast_announce_duration_secs</code>
Sets the maximum duration, in seconds, of announced SDPs. By default,
the value of this attribute is 0, which allows an infinite duration.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maximum_static_sdp_port</code>
By default, the value of this attribute is 65535. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>minimum_statid_sdp_port</code>
By default, the value of this attribute is 2000. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>redirect_broadcast_keyword</code>
By default, this attribute has no value.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>redirect_broadcasts_dir</code>
By default, this attribute has no value.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reflector_bucket_offset_delay_msc</code>
By default, the value of this attribute is 73.<code></code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reflector_buffer_size_sec</code>
By default, the value of this attribute is 10.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reflector_in_packet_receive_time</code>
By default, the value of this attribute is 60.<code></code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reflector_rtp_info_offset_msec</code>
An internal value for live player compatibility. By default, the
value of this attribute is 500.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reflector_use_in_packet_receive_time</code>
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>timeout_broadcaster_session_secs</code>
By default, the value of this attribute is 20.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>use_one_SSRC_per_stream</code>
By default, the value of this attribute is <code>true</code>. </p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-378845" title="QTSSRefMovieModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJECCAG" title="QTSSRefMovieModule Preferences"></a><h4>QTSSRefMovieModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-378873">Table 1-15</a></span> lists the attributes for preferences of the module <code>QTSSRefMovieModule</code>,
which allows web developers to put RTSP URLs in web pages. These
preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-378873" title="Table 1-15Attributes for preferences of the module QTSSRefMovieModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDHEJD" title="Table 1-15Attributes for preferences of the module QTSSRefMovieModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-15&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSRefMovieModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>refmovie_rtsp_port</code>
The port to use for RTSP request redirection. Technically, this
is not a protocol redirect. It is a media or content level redirect.
Works the same as if you had a text file on a Web server called <code>mymovie.mov</code> that contained
the RTSP URL with an rtsptext QuickTime tag. The tag and file name
extension would tell the QuickTime client to RTSP stream the file.
By default,the value of this attribute is 554.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>refmovie_xfer_enabled</code>
For QuickTime clients only, converts, for example, <code>http://hostname/mymovie.mov </code>to <code>
rtsp://hostname:554/mymovie.mov</code>. The server
creates a text-based ref movie as the HTTP response, which redirects
the client to the same movie on the server but as an RTSP request.
This conversion is useful for placing streaming movie references
on a web server. HTTP requests that do not specify a port go to
port 80. However, <code></code><code>http://hostname:554/mymovie.mov </code>also works.
By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-378948" title="QTSSRelayModule Preferences"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHJIGI" title="QTSSRelayModule Preferences"></a><h4>QTSSRelayModule Preferences</h4>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-378976">Table 1-16</a></span> lists the attributes for preferences of the module <code>QTSSRelayModule</code>.
These preferences are maintained in the <code>streamingserver.xml</code> file.</p>
<a name="//apple_ref/doc/uid/TP30000245-378976" title="Table 1-16Attributes for preferences of the module QTSSRelayModule"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGIBBC" title="Table 1-16Attributes for preferences of the module QTSSRelayModule"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-16&nbsp;&nbsp;</strong>Attributes for preferences of the
module <code>QTSSRelayModule</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>relay_prefs_file</code>
By default, the value of this attribute is
<code>/Library/QuickTimeStreaming/Config/relayconfig.xml</code>.<code></code></p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>relay_stats_url</code>
By default, this attribute has no value.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-380262" title="qtssPrefsObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF127" title="qtssPrefsObjectType"></a><h3>qtssPrefsObjectType</h3>
<p>An object of type <code>qtssPrefsObjectType</code> consists
of attributes that describe the server&#8217;s internal preference storage
system. A preference object (<code>QTSS_PrefsObject</code>)
is an instance of this object type. The attribute values for objects
of this type are stored in the server&#8217;s configuration file, <code>streamingserver.xml</code>.
For each server, there is a single instance of this object type. </p>
<p>In previous versions of the QTSS programming interface, module
preferences were stored in this object. Since version 4.0, module
preferences have been stored in each module&#8217;s <code>QTSS_ModuleObject </code>object<code>.</code></p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-380333">Table 1-17</a></span> lists the attributes for objects of type <code>qtssPrefsObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_16" title="Note"></a><p><strong>Note:</strong>&nbsp;None of these
attributes is preemptive safe, so they can must be read by calling <code>QTSS_GetValue</code> or
by locking the object, calling <code>QTSS_GetValuePtr</code>,
and unlocking the object.</p></div><a name="//apple_ref/doc/uid/TP30000245-380333" title="Table 1-17Attributes of objects of type qtssPrefsObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFGAGJ" title="Table 1-17Attributes of objects of type qtssPrefsObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-17&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssPrefsObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Name in streamingserver.xml</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssPrefsAckLoggingEnabled</code>
Enables detailed logging of UDP acknowledgement and retransmit packets.
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p><code>ack_logging_enabled</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAltTransportIPAddr</code>
If you want an IP address other than the server&#8217;s IP address appended
to the transport header, use this attribute to specify the alternate address.
By default, this attribute does not have a value.</p></td>
<td ><p><code>alt_transport_src
_ipaddr</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAlwaysThinDelayInMsec</code>
If a packet is as late in milliseconds as the value of this attribute,
the server starts to thin. This attribute is part of the server&#8217;s
thinning algorithm. By default, the value of this attribute is 750.</p></td>
<td ><p><code>always_thin_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAuthenticationScheme</code>
Set this attribute to the authentication scheme you want the server
to use. The currently supported values are <code>basic</code>, <code>digest</code>, and <code>none</code>.
By default, the value of this attribute is <code>digest</code>.</p></td>
<td ><p><code>authentication
_scheme</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAutoDeleteSPDFiles</code>
An attribute for a preference that is no longer supported. The attribute remains
for API compatibility.</p></td>
<td ><p><code>auto_delete_sdp_
files</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAutoRestart</code>
If <code>true</code>, the server automatically restarts
itself if it crashes. By default, the value of this attribute is <code>true.</code></p></td>
<td ><p><code>auto_restart</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAutoStart</code>
Obsolete and should always be set to <code>false</code>.</p></td>
<td ><p><code>auto_start</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsAvgBandwidthUpdate</code>
The interval in seconds between computations of the server&#8217;s average bandwidth.
By default, the value of this 60.</p></td>
<td ><p><code>average_bandwidth
_update</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsBreakOnAssert
</code>If <code>true</code>,
the server will stop and enter the debugger when an assert condition
is hit. By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p><code>break_on_assert</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsCloseLogsOnWrite</code>
If set to <code>true</code>, the server
closes log files after each write. By default, the value of this
attribute is <code>false</code>.</p></td>
<td ><p><code>force_logs_close_on_write</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsDefaultAuthorizationRealm
</code>Specifies the text to display as the login
entity &#8220;realm&#8221; by the client. By default, the value of this
attribute is <code>Streaming Server</code>.
If the value of this attribute is not set, <code>Streaming
Server</code> is displayed.</p></td>
<td ><p><code>default_authorization_realm</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsDeleteSPDFilesInterval</code>
The interval in seconds at which to check SDP files. Changes to
this attribute take effect at the end of the current interval. By
default, the value of this attribute is 10. The server maintains
an internal interval of 1.</p></td>
<td ><p><code>sdp_file_delete
_interval_seconds</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsDoReportHTTPConnectionAddress</code>
When behind a round-robin DNS, the client needs to be told the IP address
of the machine that is handling its request. This attribute tells
the server to report its IP address in the reply to the HTTP GET
request when tunneling RTSP through HTTP. By default, the value of
this attribute is <code>false.</code></p></td>
<td ><p><code>do_report_http_connection_ip_address</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsDropAllPacketsDelayInMsec</code>
If a packet is as late as the value of this attribute in milliseconds,
the server drops it. This attribute is part of the server&#8217;s thinning
algorithm. By default, the value of this attribute is 2500.</p></td>
<td ><p><code>drop_all_packets
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsDropVideoAllPacketsDelayInMsec</code>
If a video packet cannot be sent within the time in milliseconds specified
by this attribute, the server drops it. This atttribute is used
by the server&#8217;s thinning algorithm. By default, the value of this
attribute is 1750.</p></td>
<td ><p><code>drop_all_video
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsEnableMonitorStatsFile</code>
If set to <code>true</code>, the server
writes server statistics to the monitor file, which is read by an
external monitor application. By default, the value of this attribute
is <code>false</code>.</p></td>
<td ><p><code>enable_monitor
_stats_file</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsEnablePacketHeaderPrintfs</code>
If set to <code>true</code>, the server
prints the headers of outgoing RTP and RTCP packets on <code>stdout</code>.
The server must have been started with the <code>-d</code> command
line option. See the <code>qtssPrefsPacketHeaderPrintfOptions</code> attribute
for the available print options. By default, the value of this attribute
is <code>false</code><code></code>.</p></td>
<td ><p><code>enable_packet
_header_printfs</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsEnableRTSPDebugPrintfs</code>
When set to <code>true</code>, the
server prints on <code>stdout </code>incoming
RTSP requests and outgoing RTSP responses. The server must have
been started with the <code>-d</code> command
line option. By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p><code>RTSP_debug_printfs</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsEnableRTSPErrorMessage</code>
If set to <code>true</code>, the server
appends a content body string error message for reported RTSP errors.
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p><code>RTSP_error_message</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsEnableRTSPServerInfo</code>
If set to <code>true</code>, the server
adds server information to RTSP headers. The informatin includes
the server&#8217;s platform, version number, and build number. By default,
the value of this attribute is <code>true</code>.</p></td>
<td ><p><code>RTSP_server_info</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsLargeWindowSizeInK</code>
For Reliable UDP, the window size in K bytes used for high bitrate
movies. For clients that don&#8217;t specify a window size, the server
may use the value of this attribute. By default, the value of this
attribute is 64.</p></td>
<td ><p><code>large_window_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMaxAdvanceSendTimeTimeInSec</code>
The most number of seconds the server sends a packet ahead of time to
a client that supports overbuffing. By default, the value of this
attribute is 25.</p></td>
<td ><p><code>max_send_ahead_time</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMaximumBandwidth</code>
The maximum amount of bandwidth the server is allowed to serve in
K bits. If the server exceeds this value, it responds to new client
requests for additional streams with RTSP error 453, &#8220;Not Enough
Bandwidth.&#8221; A value of -1 means the amount of bandwidth the server
is allowed to serve is unlimited. By default, the value of this
attribute is 102400.</p></td>
<td ><p><code>maximum_bandwidth</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMaximumConnections</code>
The maximum number of concurrent RTP connections the server allows.
A value of -1 means that an unlimited number of connections are
allowed. By default, the value of this attribute is 1000.</p></td>
<td ><p><code>maximum_connections</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMaxRetransDelayInMsec</code>
For Reliable UDP, the maximum interval in milliseconds between when
a retransmit is supposed to be sent and when it is actually sent. Lower
values result in smoother but slower server performance. By default,
the value of this attribute is 500.</p></td>
<td ><p><code>max_retransmit
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMaxTCPBufferSizeInBytes</code>
The maximum size in bytes the TCP socket send buffer can be set
to. By default, the value of this attribute is 200000.</p></td>
<td ><p><code>max_tcp_buffer_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMediumWindowSizeInK</code>
For Reliable UDP, the window size in K bytes used for medium bitrate movies.
For clients that don&#8217;t specify a window size, the server may use the
value of this attribute. By default, the value of this attribute
is 48.</p></td>
<td ><p><code>medium_window_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMinTCPBufferSizeInBytes</code>
The minimum size in bytes the TCP socket send buffer can be set
to. By default, the value of this attribute is 8192.</p></td>
<td ><p><code>min_tcp_buffer_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsModuleFolder</code>
The path to the folder containing dynamic loadable server modules. For
Mac OS X, this attribute is set to 
<code>/Library/QuickTimeStreaming/Modules</code>s.
For Darwin platforms, this attribute is set to 
<code>/usr/local/sbin/StreamingServer/Modules</code>,
and for Win32 platforms, this attribute is set to <code>c:\Program Files\DarwinStreamingServer
\QTSSModules</code>.</p></td>
<td ><p><code>module_folder</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMovieFolder</code>
The path to the root movie folder. By default, the value of this
attribute is <code>
/Library/QuickTimeStreaming/Movies</code>.</p></td>
<td ><p><code>movie_folder</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMonitorStatsFileFileName</code>
Name of the monitor file. By default, the value of this attribute
is <code>server_status</code><code></code>.</p></td>
<td ><p><code>monitor_stats_file_name</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMonitorStatsFileIntervalSec</code>
Interval at which server writes server statistics in the monitor
file. By default, the value of this attribute is 10<code></code>.</p></td>
<td ><p><code>monitor_stats_file_interval_seconds</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsOverbufferRate</code>
The server uses this attribute to calculate the rate at which to overbuffer.
The value of this attribute is multiplied by the data rate. By default,
the value of this attribute is <code>2.0</code><code></code>.</p></td>
<td ><p><code>overbuffer_rate</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsPacketHeaderPrintfOptions</code>
Identifies which packet headers to print when <code>qtssPrefsEnabledPacketHeaderPrintfs </code>is <code>true</code>.
The options are semicolon (<code>;</code>)
delimited strings. By default, the value of this attribute is all
of the available options, <code>rtp;rr;sr;app;ack;</code><code></code>,
which means that headers of RTP packets (<code>rtp</code>), RTCP
receiver reports (<code>rr</code>),
RTCP sender reports (<code>sr</code>),
RTCP application packets (<code>app</code>),
and Reliable UDP RTP acknowledgement packets (<code>ack</code>)
are printed. </p></td>
<td ><p><code>packet_header
_printf_options</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsPIDFile</code>
Specifies the name of the file in which the server&#8217;s process ID
is written. By default, the value of this attribute is <code>
/var/run/QuickTimeStreamingServer.pid</code>.</p></td>
<td ><p><code>pid_file</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRealRTSPTimeout</code>
The amount of time in seconds the server actually waits before disconnecting
idle RTSP clients. This timer is reset each time the server receives
a new RTSP request from the client. A value of zero means that there
is no timeout. By default, the value of this attribute is 180.</p></td>
<td ><p><code>real_rtsp_timeout</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsReliableUDP</code>
If set to <code>true</code>, the server
the uses Reliable UDP transport if requested by the client. By default,
the value of this attribute is <code>true</code>.</p></td>
<td ><p><code>reliable_udp</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsReliableUDPDirs</code>
This attribute specifies the directories for which Reliable UDP
is to be used. The directories are interpreted as relative to the
Movies folder (<code>qtssPrefsMovieFolder</code>)
with a leading slash but no trailing slash. For example, <code>/reliable_udp_dir</code>.
By default, this attribute does not have a value.</p></td>
<td ><p><code>reliable_udp_dirs</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsReliableUDPPrintfs</code>
When set to <code>true</code>, the
server prints on <code>stdout</code> Reliable
UDP statistics when the client disconnects. The server must have
been started with the <code>-d</code> command
line option. The statistics include the URL, maximum congestion
window, minimum congestion window, maximim, minimum, and average
RTT, number of skipped frames, and the number of late packets dropped.
By default, the value of this attribute is <code>false</code>.</p></td>
<td ><p><code>reliable_udp
_printfs</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsReliableUDPSlowStart</code>
Set to <code>true</code> to enable
Reliable UDP slow start. Disabling UDP slow start may lead to an
initial burst of packet loss due to mis-estimate of the client's
available bandwidth. Enabling UDP slow start may lead to premature
reduction of the bit rate (known as &#8220;thinning&#8221;). By default, the
value of this attribute is <code></code><code>true</code>.</p></td>
<td ><p><code>reliable_udp_slow
_start</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRTCPPollIntervalInMsec</code>
A preference that is no longer used<code></code>. Polling
is no longer a feature of RTCP.</p></td>
<td ><p><code>rtcp_poll_interval</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRTCPSockRcvBufSizeInK</code>
Size of the receive socket buffer for UDP sockets used to receive
RTCP packets. The buffer needs to be big enough to absorb bursts
of RTCP acknowledgements. By default, the value of this attribute
is 768<code></code>.</p></td>
<td ><p><code>rtcp_rcv_buf_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRTPTimeout</code>
The amount of time in seconds the server will wait before disconnecting idle
RTP clients. This timer is reset each time the server receives an RTCP
status packet from a client. A value of zero means there is no timeout.
By default, the value of this attribute is 120.</p></td>
<td ><p><code>rtp_timeout</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRTSPIPAddr</code>
Specifies the IP address(es) in dotted-decimal format the server should
accept RTSP client connections on. This attribute is useful when
the machine has more than one IP address and you want to specify
which addresses the server should listen on. A value of 0 means the
server should accept connections on all IP addresses that are currently enabled
on the system. By default, the value of this attribute is 0. </p></td>
<td ><p><code>bind_ip_addr</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRTSPPorts</code>
Ports for accepting RTSP client connections. By default, ports 554, 7070,
8000, and 8001 are enabled. Add port 80 to this list if you are streaming
across the Internet and want clients behind firewalls to be able
to connect to the server.</p></td>
<td ><p><code>rtsp_port</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRTSPTimeout</code>
Amount of time in seconds the server tells clients it will wait
before disconnecting idle RTSP clients. By default, the value of
this attribute is 0.</p></td>
<td ><p><code>rtsp_timeout</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRunGroupName</code>
Run the server under the specified group name. By default, the value
of this attribute is <code>qtss.</code></p></td>
<td ><p><code>run_group_name</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRunNumThreads</code>
If value of this attribute is non-zero, the server will create the
specified number of threads for handling RTSP and RTP streams. Otherwise, the
server creates one thread per processor for handling RTSP and RTP
streams. By default, the value of this attribute is 0.</p></td>
<td ><p><code>run_num_threads</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsRunUserName
</code>Run the server under the specified user name.
By default, the value of this attribute is <code>qtss</code>.</p></td>
<td ><p><code>run_user_name</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsSafePlayDuration</code>
If the server finds it is serving more than its allowed maximum bandwidth
(using the average bandwidth computation), it will attempt to disconnect
the most recently connected clients until the average bandwidth
drops to acceptable levels. However, it will not disconnect clients
if they&#8217;ve been connected for longer than the time in seconds
specified by this attribute. If this value is set to zero, the server does
not disconnect clients. By default, the value of this attribute
is 600.</p></td>
<td ><p><code>safe_play_duration</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsSendInterval</code>
The minimum time in milliseconds the server will wait between sending packet
data to the client. By default, the value of this attribute is 50<code></code>.</p></td>
<td ><p><code>send_interval</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsSmallWindowSizeInK</code>
For Reliable UDP, the window size in K bytes used for low bitrate
movies. For clients that don&#8217;t specify a window size, the server
may use the value of this attribute. By default, the value of this
attribute is 24.</p></td>
<td ><p><code>small_window_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsSrcAddrInTransport</code>
If set to <code>true</code>, the server
adds its source address to its transport headers. This is necessary
on certain networks where the source address is not necessarily
known. By default, the value of this attribute is <code>false.</code></p></td>
<td ><p><code>append_source_addr_in_transport</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsStartQualityCheckIntervalInMsec</code>
The interval in milliseconds at which server checks thinning and
adjusts it if necessary. This attribute is part of the server&#8217;s
thinning algorithm. By default, the value of this attribute is 1000.</p></td>
<td ><p><code>quality_check
_interval</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p><code>UInt32</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsStartThickingDelayInMsec</code>
If a packet is this late in milliseconds, starting thicking. This
attribute is part of the server&#8217;s thinning algorithm. By default,
the value of this attribute is 250.</p></td>
<td ><p><code>start_thicking
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p><code>SInt32</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsStartThinningDelayInMsec</code>
If a packet is as late as the value of this attribute, start thinning.
By default, the value of this attribute is 0.</p></td>
<td ><p><code>start_thinning
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsTCPSecondsToBuffer</code>
When streaming over TCP, the size of the send buffer is scaled based
on the movie&#8217;s bitrate. Using the bitrate of the movie as a guide,
the server will set the TCP send buffer to fit this number of seconds
of data. By default, the value of this attribute is .5.</p></td>
<td ><p><code>tcp_seconds_to
_buffer</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsThickAllTheWayDelayInMsec</code>
If a packet is this late (negative means it is ahead of time), restore full
quality. This attribute is part of the server&#8217;s thinning algorithm.
By default, the value of this attribute is -2000<code></code>.</p></td>
<td ><p><code>thick_all_the_way
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsThinAllTheWayDelayInMsec</code>
If a packet is as late in milliseconds as the value of this attribute,
the server thins the stream as much as possible. This attribute
is part of the server&#8217;s thinning algorithm. By default, the value
of this attribute is 1500.</p></td>
<td ><p><code>thin_all_the_way
_delay</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p><code>SInt32</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsTotalBytesUpdate</code>
The interval in seconds between updates of the server&#8217;s total
bytes and current bandwidth statistics. By default, the value of
this attribute is 1.</p></td>
<td ><p><code>total_bytes_update</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsWindowSizeMaxThreshold</code>
The window size in bytes used to measure reliable UDP bandwidth.
If the bit rate is greater than <code>qtssPrefsWindowSizeMaxThreshold</code>, the
window size is set to <code>qtssPrefsLargeWindowSizeInK</code>.
If the bit rate is greater than <code>qtssPrefsWindowSizeThreshold</code> and and
less than or equal to <code>qtssPrefsWindowSizeMaxThreshold</code>, the
window is set to <code>qtssPrefsMediumWindowSizeInK</code>.
If the bit rate is less than or equal to <code>qtssPrefsWindSizeThreshold</code>,
the window size is set to <code>qtssPrefsSmallWindowSizeInK</code>.
By default, the value of this attribute is 1000.</p></td>
<td ><p><code>window_size_max
_threshold</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsWindowSizeThreshold</code>
For Reliable UDP, if the client doesn&#8217;t specify its window size,
the server uses the value of <code>qtssPrefsSmallWindowSizeInK</code> as
the window size if the bitrate is below the value of this attribute
measured in K bits/second. By default, the value of this attribute
is 200. </p></td>
<td ><p><code>window_size
_threshold</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p>This attribute is used for performance testing. When
set to <code>true</code>, this attribute
forces the server to maintain full bandwidth connections. By default,
the value of this attribute is <code>false</code>.</p></td>
<td ><p><code>disable_thinning</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p>This attribute is used for compatibility with certain
players. It contains a list of players that, for compatibility,
require RTP header informatin. By default, the list consists of <code>Nokia</code> and <code>Real</code>.</p></td>
<td ><p><code>player_requires_rtp_header_info</code></p></td>
<td ><p>Readable, writable, not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p>This attribute is used for compatibility with certain
players.</p></td>
<td ><p><code>player_requires_bandwidth_adjustment</code></p></td>
<td ><p>Readable, writable, not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td colspan="4"  scope="row"><p>The built-in error log module that loads
before all other modules uses the following seven attributes:</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsErrorLogDir
</code>Sets the path to the directory containing
the error log file. By default, the value of this attribute is
<code>/Library/QuickTimeStreaming/Logs</code>.</p></td>
<td ><p><code>error_logfile_dir</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsErrorLogEnabled</code>
Set to <code>true</code> to enable
error logging. By default, the value of this attribute is <code>true</code>.</p></td>
<td ><p><code>error_logging</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsErrorLogName
</code>Sets the name of the error log file. By default,
the value of this attribute is <code>Error</code>.</p></td>
<td ><p><code>error_log_name</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsErrorLogVerbosity</code>
Sets the verbosity level of messages the error logger logs. The
following values are meaningful:

0 = log fatal errors
1 = log fatal errors and warnings
2 = log fatal errors, warnings, and asserts
3 = log fatal errors, warnings, asserts, and debug messages

By default, the value of this attribute is 2.</p></td>
<td ><p><code>error_logfile
_verbosity</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsErrorRollInterval
</code>The interval in days between rolling the error
log file. By default, the value of this attribute is 0, which means
that the error log file is not rolled.</p></td>
<td ><p><code>error_logfile
_interval</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsMaxErrorLogSize</code>
The maximum size in bytes of the error log. A value of zero means
that the server does not impose a limit. By default, the value of
this attribute is 256000.</p></td>
<td ><p><code>error_logfile_size</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssPrefsScreenLogging</code>
If this attribute is set to <code>true</code> ,
every line in the error log is written to the terminal window. Note
that to see the error log, the server must be launched from the
command line in foreground mode by using the <code>-d</code> flag.
By default, the value of this attribute is <code>true.</code></p></td>
<td ><p><code>screen_logging</code></p></td>
<td ><p>Readable,
writable, not
preemptive
safe</p></td>
<td ><p>Bool16</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-382242" title="qtssRTPStreamObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGJDHC" title="qtssRTPStreamObjectType"></a><h3>qtssRTPStreamObjectType</h3>
<p>An object of type <code>qtssRTPStreamObjectType</code> consists
of attributes that describe a particular RTP stream whether it&#8217;s
an audio, video, or text stream. An RTP stream object (<code>QTSS_RTPStreamObject</code>)
is an instance of this object type and is created by calling <code>QTSS_AddRTPStream</code>.
An RTP stream object must be associated with a single client session object
(<code>QTSS_ClientSessionObject</code>).
A client session object may be associated with any number of RTP
stream objects. These attributes are valid for all roles that receive
a <code>QTSS_RTPStreamObject </code>in
the structure the server passes to them.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-382313">Table 1-18</a></span> lists the attributes for objects of type <code>qtssRTPStreamObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_17" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code>or <code>QTSS_GetValuePtr</code>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-382313" title="Table 1-18Attributes of objects of type qtssRTPStreamObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEFBGD" title="Table 1-18Attributes of objects of type qtssRTPStreamObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-18&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssRTPStreamObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssRTPStrBufferDelayInSecs
</code>Size of the client&#8217;s buffer. The server
sets this attribute to three seconds, but the module is responsible
for determining the buffer size and setting this attribute accordingly.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrFirstSeqNumber</code>
Sequence number of the first packet after the last PLAY request
was issued. If known, this attribute must be set by a module before
calling <code>QTSS_Play</code>. The server
uses this attribute to generate a proper RTSP PLAY response.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>SInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrFirstTimestamp</code>
RTP timestamp of the first RTP packet generated for this stream
after the last PLAY request was issued. If known, this attribute
must be set by a module before calling <code>QTSS_Play</code>.
The server uses this attribute to generate a proper RTSP PLAY response.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrNetworkMode</code>
Network mode for the RTP stream. Possible values are <code>qtssRTPNetworkModeDefault, qtssRTPNetworkModeMulticast, </code>and <code>qtssNetworkModeUnicast</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrPayloadName</code>
Name of the media for this stream. This attribute is empty unless
a module explicitly sets it.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrPayloadType
</code>Payload type of the media for this stream.
The value of this attribute is <code>qtssUnknownPayloadType</code> unless
a module sets it to <code>qtssVideoPayloadType</code> or <code>qtssAudioPayloadType</code>.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p><code>QTSS_RTPPayloadType</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrTrackID</code>
Unique ID that identifies each RTP stream.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrTimescale</code>
Timescale for the track. If known, this must be set before calling <code>QTSS_Play</code>.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrSSRC</code>
Synchronization source (SSRC) generated by the server. The SSRC
is guaranteed to be unique among all streams in the session. The
server includes the SSRC in all RTCP Sender Reports that the server
generates.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td colspan="3"  scope="row"><p>The values of the following attributes
come from the most recent RTCP packet received on a stream. If a
field in the most recent RTCP packet is blank, the server sets the
value of the corresponding attribute to zero.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrAudioDryCount</code>
Number of times the audio has run dry.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code></code><code>qtssRTPStrAvgBugDelayInMsec</code>
Average buffer delay in milliseconds.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrAvgLateMilliseconds</code>
Average in milliseconds of packets that the client received late.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrClientBufFill</code>
How full the client buffer is in tenths of a second.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrExpFrameRate</code>
The expected frame rate in frames per second.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrFractionLostPackets</code>
The fraction of packets that have been lost for this stream.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrFrameRate</code>
The current frame rate in frames per second.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrGettingBetter</code>
A non-zero value if the client reports that the stream is getting
better.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrGettingWorse</code>
A non-zero value if the client reports that the stream is getting
worse.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrIsTCP</code>
<code></code>If this RTP stream is
being sent over TCP, this attribute is <code>true</code>.
If this RTP stream is being sent over UDP, this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrJitter</code>
Cumulative jitter for this stream.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrNumEyes</code>
Number of clients connected to this stream.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code></code><code>qtssRTPStrNumEyesActive</code>
Number of clients playing this stream.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrNumEyesPaused</code>
Number of clients connected but currently paused.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrPercentPacketsLost</code>
Fixed percentage of lost packets for this stream.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrRecvBitRate</code>
Average bit rate received by the client in bits per second.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrStreamRef</code>
A <code>QTSS_StreamRef</code> used
for sending RTP or RTCP packets to the client. Use <code>QTSS_WriteFlags</code> to
specify whether each packet is an RTP or RTCP packet.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_StreamRef</p></td>
</tr>
<tr>
<td  scope="row"><p><code></code><code>qtssRTPStrTotalLostPackets</code>
The total number of packets that have been lost for this stream.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrTotPacketsRecv</code>
Total packets received by the client.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrTotPacketsDropped</code>
Total packets dropped by the client.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrTotPacketsLost</code>
Total packets lost.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPStrTransportType</code>
The transport type.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p><code>QTSS_RTPTransportType</code></p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-382852" title="qtssRTSPHeaderObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDGBAG" title="qtssRTSPHeaderObjectType"></a><h3>qtssRTSPHeaderObjectType</h3>
<p>An object of type <code>qtssRTSPHeaderObjectType</code> consists
of attributes containing all of the RTSP request headers associated
with an individual RTSP request. An RTSP header object (<code>QTSS_RTSPHeaderObject</code>)
is an instance of this object type.</p>
<p>The names of the attributes are the names of the RTSP headers
associated with that RTSP request. For example, the following RTSP
request has a Session header and a User-agent header:</p>
<div class="codesample"><table><tr><td scope="row"><pre>DESCRIBE /foo.mov RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 20fj02ijf<span></span></pre></td></tr><tr><td scope="row"><pre>User-agent: QTS/4.0.3<span></span></pre></td></tr></table></div>
<p>In this case, the value of the Session attribute is &#8220;20fj02ijf&#8221;
and the value of the User-agent attribute is &#8220;QTS/4.0.3&#8221;. Modules
can get the value of a given header by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code>or <code>QTSS_GetValuePtr</code>.</p>
<a name="//apple_ref/doc/uid/TP30000245-385883" title="qtssRTSPRequestObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJIFGAC" title="qtssRTSPRequestObjectType"></a><h3>qtssRTSPRequestObjectType</h3>
<p>An object of type <code>qtssRTSPRequestObjectType</code> consists
of attributes that describe a particular RTSP request. An RTSP request
object (<code>QTSS_RTSPRequestObject</code>)
is an instance of this object type and exists from the time the
server receives a complete RTSP request from a client until the
response is sent and the server moves on to the next request. An RTSP
request object must be associated with a single RTSP session object (<code>QTSS_RTSPSessionObject</code>)
for a given request made over a given connection.</p>
<p>With the exception of the RTSP Filter role, the value of each
attribute is available in all roles that receive an object of type <code>QTSS_RTSPRequestObject</code>.
When the RTSP Filter role receives an object of type <code>QTSS_RTSPRequestObject</code>,
the only attribute that has a value is the <code>qtssRTSPReqFullRequest</code> attribute.</p>
<p>Each text name is identical to its enumerated type name.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-385968">Table 1-19</a></span> lists the attributes for objects of type <code>qtssRTSPRequestObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_18" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString, </code>or <code>QTSS_GetValuePtr</code>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-385968" title="Table 1-19Attributes of type qtssRTSPRequestObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEGDFJ" title="Table 1-19Attributes of type qtssRTSPRequestObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-19&nbsp;&nbsp;</strong>Attributes of type <code>qtssRTSPRequestObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssRTSPReqAbsoluteURL
</code>The full URL starting with &#8220;rtsp://&#8221;.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqContentLen</code>
Content length of incoming RTSP request body.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqFileDigit
</code>If the URI ends with one or more digits, this
attribute points to those digits.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqFileName</code>
All characters after the last path separator in the file system
path.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqFilePath</code>
URI for this request, converted to a local file system path.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqFilePathTrunc</code>
Same as <code>qtssRTSPReqFilePath</code>,
but without the last element of the path. </p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqFullRequest</code>
The complete RTSP request as sent by the client. This attribute
is available in every role that receives an object of type <code>QTSS_RTSPRequestObject</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqIfModSinceDate
</code>If the RTSP request contains an If-Modified-Since
header, this attribute is the if-modified date converted to a value of
type <code>QTSS_TimeVal</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqLateTolerance</code>
Value of the late-tolerance field in the <code>x-RTP-Options</code> header,
or -1 if not present.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqMethod</code>
The RTSP method as a value of type <code>QTSS_RTSPMethod</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_RTSPMethod</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqMethodStr
</code>The RTSP method of this request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqNetworkMode</code>
Network mode for the request. Possible values are <code>qtssRTPNetworkModeDefault, </code><code>qtssRTPNetworkModeMulticast,
and </code><code></code><code>qtssRTPNetworkModeUnicast</code>.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqRealStatusCode</code>
Same as the <code>qtssRTSPReqStatusCode</code> attribute
but translated from a <code>QTSS_RTSPStatusCode</code> to
an actual RTSP status code.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqRespKeepAlive</code>
Set this attribute to <code>true</code> if
you want the server to keep the connection open after completion
of the request. Otherwise, set this attribute to <code>false</code> if
you want the server to terminate the connection upon completion
of the request.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqRespMsg</code>
The error message that is sent back to the client if the response
was an error. A module sending an RTSP error to the client should
set this attribute to be a text message that describes why the error occurred.
It is also useful to write this message to a log file. Once the
RTSP response has been sent, this attribute contains the response
message.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqRootDir
</code>The root directory for this request. The default
value for this attribute is the server's media folder path. Modules
can set this attribute from the RTSP Route role.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqSkipAuthorization</code>
Set by a module that wants this request to be allowed by all authorization
modules.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqSpeed
</code>Value of the speed header.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqStartTime
</code>The start time specified in the Range header
of the PLAY request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqStatusCode</code>
The current status code for the request as <code>QTSS_RTSPStatusCode</code>.
By default, the value is <code>qtssSuccessOK</code>.
If a module sets this attribute and calls <code>QTSS_SendRTSPHeaders</code>, the
status code in the header that the server generates contains the
value of this attribute.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>QTSS_RTSPStatusCode</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqStopTime</code>
The stop time specified in the Range header of the PLAY request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>Float64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqStreamRef</code>
A value of type <code>QTSS_StreamRef</code> for sending
data to the RTSP client. This stream reference, unlike the one provided as
an attribute in the <code>QTSS_RTSPSessionObject</code>,
never returns <code>QTSS_WouldBlock</code> in
response to a <code>QTSS_Write</code> or
a <code>QTSS_WriteV</code> call.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_StreamRef</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqTruncAbsoluteURL</code>
The URL without last element of the path.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqURI</code>
URI for this request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqURLRealm</code>
The authorization entity for the client to display in the following
string: &#8220;Please enter password for realm at server-name. The default
value of this attribute is &#8220;Streaming Server.&#8221;</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPReqUserName</code>
The decoded user name, if provided by the RTSP request.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-386439" title="qtssRTSPSessionObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJIFHEA" title="qtssRTSPSessionObjectType"></a><h3>qtssRTSPSessionObjectType</h3>
<p>An object of type <code>qtssRTSPSessionObjectType</code> consists
of attributes associated with an RTSP client-server connection.
An RTSP session object (<code>QTSS_RTSPSessionObject</code>)
is an instance of this object type and exists as long as the RTSP
client is connected to the server. These attributes are valid for
all roles that receive a <code>QTSS_RTSPSessionObject</code> in
the structure the server passes to them.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-386502">Table 1-20</a></span> lists the attributes for objects of type <code>qtssRTSPSessionObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_19" title="Note"></a><p><strong>Note:</strong>&nbsp;All of these
attributes are preemptive safe, so they can be read by calling <code>QTSS_GetValue</code>, <code>QTSS_GetValueAsString</code>,
or <code>QTSS_GetValuePtr</code>. </p></div>
<a name="//apple_ref/doc/uid/TP30000245-386502" title="Table 1-20Attributes of objects of type qtssRTSPSessionObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDIJFG" title="Table 1-20Attributes of objects of type qtssRTSPSessionObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-20&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssRTSPSessionObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssRTSPSesEventCntxt
</code>An event context for the RTCP connection to
the client. This attribute should primarily be used to wait for flow-controlled <code>EV_WR</code> event
when responding to a client.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_EventContextRef</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesID</code>
An ID that uniquely identifies each RTSP session since the server
started up.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesLocalAddr
</code>Local IP address for this RTSP session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesLocalAddrStr</code>
Local IP address for the RTSP session in dotted-decimal format.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesLocalDNS</code>
DNS name that corresponds to the local IP address for this RTSP
session.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesLocalPort</code>
Local port for the connection.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesRemoteAddr
</code>IP address of the client.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesRemoteAddrStr
</code>IP address of the client in dotted-decimal format. </p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesRemotePort</code>
Remote (client) port for the connection.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesStreamRef
</code>A <code>QTSS_StreamRef</code> used
for sending data to the RTSP client.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_RTSPSessionStream</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPSesType
</code>The RTSP session type. Possible values are <code>qtssRTSPSession</code>, <code>qtssRTSPHTTPSession</code> (an HTTP
tunneled RTSP session), and<code> qtssRTSPHTTPInputSession</code>.
Sessions of type <code>qtssRTSPHTTPInputSession </code>are usually
very short lived.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_RTSPSessionType</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-388531" title="qtssServerObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGCACJ" title="qtssServerObjectType"></a><h3>qtssServerObjectType</h3>
<p>An object of type <code>qtssServerObjectType</code> consists
of attributes that contain global server information, such as server
statistics. A server object (<code>QTSS_ServerObject</code> is
an instance of this object type.There is a single instance of this
object type for each server. These attributes are valid for all
roles that receive a <code>QTSS_ServerObject</code> in
the structure the server passes to them.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-388586">Table 1-21</a></span> lists the attributes for objects of type <code>qtssServerObjectType</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_20" title="Note"></a><p><strong>Note:</strong>&nbsp;Some of these
attributes are not preemptive safe, as noted in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-388586">Table 1-21</a></span>.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-388586" title="Table 1-21Attributes of objects of type qtssServerObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJHHCF" title="Table 1-21Attributes of objects of type qtssServerObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-21&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssServerObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssMP3SvrAvgBandwidth</code>
Average MP3 bandwidth in bits per second that the server is currently sending.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMP3SvrCurBandwidth</code>
MP3 bandwidth in bits per second that the server is currently sending.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMP3SvrCurConn</code>
Number of currently connected MP3 client sessions.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMP3SvrTotalBytes</code>
Total number of MP3 bytes sent since the server started up.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMP3TotalConn</code>
Total number of MP3 client sessions since the server started up.</p></td>
<td ><p>Readable,
writable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrAvgBandwidth</code>
Average bandwidth output by the server in bits per second.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrCurBandwidth</code>
Current bandwidth being output by the server in bits per second.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrCurConn</code>
The number of clients currently connected to the server.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrCurPackets</code>
Current packets per second being output by the server.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrNumUDPSockets</code>
Number of UDP sockets currently being used by the server.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrTotalBytes</code>
Total number of bytes output since the server started up.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrTotalConn</code>
Total number of clients that have connected to the server since
the server started up.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTPSvrTotalPackets</code>
Total number of bytes output since the server started up.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt64</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPCurrentSessionCount</code>
The number of clients that are currently connected over standard
RTSP.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssRTSPHTTPCurrentSessionCount</code>
The number of clients that are currently connected over RTSP/HTTP.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssServerAPIVersion</code>
The API version supported by this server. The format of this value
is 0x<em>MMMMmmmm</em>, where <em>M</em> is
the major version number and <em>m</em> is the minor version
number.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrDefaultIPAddrStr</code>
The default IP address of the server as a string.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrClientSessions
</code>An object containing all client sessions stored
as indexed <code>QTSS_ClientSessionObject </code>objects.</p></td>
<td ><p>Read</p></td>
<td ><p>QTSS_Object</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrConnectedUsers</code>
The number of connected clients. The QTSSMP3StreamingModule is the
only module that adds <code>QTSS_ConnectedUserObject</code> objects
to this attribute, but other modules can add <code>QTSS_ConnectedUserObject </code>objects
filled in with their own data.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>QTSS_ConnectedUserObject</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrCPULoadPercent</code>
The percentage of CPU time the server is currently using.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>Float32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrCurrentTimeMilliseconds</code>
The server&#8217;s current time in milliseconds. Getting the value of
this attribute is equivalent to calling <code>QTSS_Milliseconds</code>.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrDefaultDNSName</code>
The &#8220;default&#8221; DNS name of the server.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrDefaultIPAddr</code>
The &#8220;default&#8221; IP address of the server.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>UInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrGMTOffsetInHrs</code>
The time zone in which the server is running (offset from GMT in
hours).</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>SInt32</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrHandledMethods</code>
The methods that the server supports. Modules should append the
methods they support to this attribute in their <code>QTSS_Initialize_Role</code>.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>QTSS_RTSPMethod</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrIsOutOfDescriptors</code><code>
</code>If the server has run out of file descriptors,
this attribute is <code>true</code>; otherwise,
this attribute is <code>false</code>.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>Bool16</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrMessages
</code>An object containing the server's error messages.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_Object</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrModuleObjects
</code>A module object representing each module.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_ModuleObject</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrPreferences
</code>An object representing each of the server's
preferences.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_PrefsObject</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrRTSPPorts</code>
An indexed attribute containing all the ports the server is listening
on.</p></td>
<td ><p>Readable,
not preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrRTSPServerHeader</code>
The header that the server uses when responding to RTSP clients.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrServerBuildDate
</code>Date that the server was built.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrServerName</code>
The name of the server.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrServerVersion
</code>The version of the server.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrStartupTime</code>
The time at which the server started up.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>QTSS_TimeVal</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssSvrState
</code>The current state of the server. Possible values
are <code>qtssStartingUpState</code><code>, qtssRunningState, </code><code>qtssRefusingConnectionsState, </code><code>qtssFatalErrorState, </code> and <code>qtssShuttingDownState</code>, <code>qtssIdleState</code>.

Modules can set the server state. If a module sets the server state,
the server responds accordingly. Setting the server state to <code>qtssRefusingConnectionsState</code> causes the
server to refuse new connections.Setting the server state to <code>qtssFatalErrorState</code> or
to <code>qtssShuttingDownState</code> causes
the server to quit. The<code> qtssFatalErrorState </code>state indicates
that a fatal error has occurred but the server is not shutting down
yet.</p></td>
<td ><p>Readable,
writable,
not preemptive safe</p></td>
<td ><p>QTSS_ServerState</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-389200" title="qtssTextMessageObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF128" title="qtssTextMessageObjectType"></a><h3>qtssTextMessageObjectType</h3>
<p>An object of type <code>qtssTextMessageObjectType</code> consists
of attributes whose values are intended for display to the user
or that are returned to the client. A text message object (<code>QTSS_TextMessageObject</code>)
is an instance of this object type. To make localization easier,
the attribute values are text strings.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-389236">Table 1-22</a></span> lists the attributes for objects of type <code>qtssTextMessageObjectType</code>.</p>
<a name="//apple_ref/doc/uid/TP30000245-389236" title="Table 1-22Attributes of objects of type qtssTextMessageObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJDIGJD" title="Table 1-22Attributes of objects of type qtssTextMessageObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-22&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssTextMessageObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssListenPortAccessDenied</code>
</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssListenPortError</code>
</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssListenPortInUse</code></p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgAltDestNotAllowed</code>
Request specifies an alternative destination and the server is not
configured to support alternative destinations.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgBadBase64</code>
</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgBadFormat</code>
The server could not parse the request.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgBadModule</code>
The server tried to run an invalid module.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgBadRTSMethod</code>
Request specified an invalid RTS method.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgCannotCreatePIDFile</code>
The server could not create the process ID file. See the <code>qtssPrefsPIDFile</code><code></code> attribute
of the <code>qtssPrefsObjectType</code> described
in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-380333">Table 1-17</a></span>.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgCannotSetRunUser</code>
The server could not run under the user name specified by the <code>qtssPrefsRunUser</code><code></code> attribute
of the <code>qtssPrefsObjectType</code> described
in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-380333">Table 1-17</a></span>.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgCannotSetRunGroup</code>
The server could not run under the group name specified by the <code>qtssPrefsRunGroup</code><code></code> attribute
of the <code>qtssPrefsObjectType</code> described
in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-380333">Table 1-17</a></span>.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgCantSetupMulticast</code>
Server is not configured for multicast. </p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgCantWriteFile</code>
</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgColonAfterHeader</code>
Request&#8217;s header is not followed by a colon (<code>:</code>) character
.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgCouldntListen</code>
This text message is not used.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgDefaultRTSPAddrUnavail</code>
The IP address specified by the <code>qtssPrefsRTSPIPAddr</code> attribute
could not be found or failed in some way.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgFileNameTooLong</code>
Request contains a file name that is too long.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgInitFailed</code>
The server could not initialize itself.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoClientPortInTransport</code>
Request contains a transport header that does not specify the client&#8217;s
port number. </p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoEOLAfterHeader</code>
Request&#8217;s header is not terminated by an end of line character.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoMessage</code>
No message.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoModuleFolder</code>
The server could not find the module folder.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoModuleForRequest</code>
Request specifies a module the server does not have.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoRTSPInURL</code>
Request specifed a URL that does not support RTSP.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoRTSPVersion</code>
Request did not specify an RTSP version.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoPortsSucceeded</code></p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoSesIDOnDescribe</code>
The Describe section of the request&#8217;s header does not contain
a session ID. </p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p><code></code>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoSessionID</code>
Request does not contain a session ID.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNotConfiguredForIP</code>
The server is not configured for IP.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgNoURLInRequest
</code>Request did not contain a URL.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgOutOfPorts</code>
The server could not accept the request because it is out of ports.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgRefusingConnections</code>
The server is refusing connections.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgRegFailed</code>
A module failed to register.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgRequestTooLong</code>
Request is too long.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgRTCPPortMustBeOneBigger</code>
Request contains an RTCP port number that is not bigger than the
RTP port number by 1.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgRTPPortMustBeEven</code>
Request contains an RTP port number that is odd instead of even.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgSockBufSizesTooLarge</code></p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgTooManyClients</code>
The server has too many connections to accept this connection.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgTooMuchThroughput</code>
The server is consuming too much bandwidth to accept this request.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgSomePortsFailed</code></p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p><code></code>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgURLInBadFormat</code>
Request specifed a URL that is properly formatted.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p><code></code>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssMsgURLTooLong</code>
Request contains a URL that is longer than 256 bytes.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p><code></code>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssServerPrefMissing</code>
A required server preference is missing from the server&#8217;s configuration.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssServerPrefWrongType</code>
A required server preference is of the wrong type.</p></td>
<td ><p>Read only,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-390240" title="qtssUserProfileObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJDHDE" title="qtssUserProfileObjectType"></a><h3>qtssUserProfileObjectType</h3>
<p>An object of type <code>qtssUserProfileObjectType</code> consists
of attributes whose values describe a user&#8217;s profile.</p>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-390272">Table 1-23</a></span> lists the attributes for objects of type <code>qtssUserProfileObjectType</code>.</p>
<a name="//apple_ref/doc/uid/TP30000245-390272" title="Table 1-23Attributes of objects of type qtssUserProfileObjectType"></a><a name="//apple_ref/doc/uid/TP30000245-BAJICJGA" title="Table 1-23Attributes of objects of type qtssUserProfileObjectType"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-23&nbsp;&nbsp;</strong>Attributes of objects of type <code>qtssUserProfileObjectType</code></caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Attribute Name and Description</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Access</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data Type</p></th>
</tr>


<tr>
<td  scope="row"><p><code>qtssUserPassword
</code>The user&#8217;s password.</p></td>
<td ><p>Readable,
writable
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssUserGroups</code>
Groups of which the user is a member. This is a multi-valued attribute.
Each group name is a C strings padded with enough nulls to make
all of the group names the same length.</p></td>
<td ><p>Readable,
writable
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssUserName</code>
The user&#8217;s name.</p></td>
<td ><p>Readable,
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>
<tr>
<td  scope="row"><p><code>qtssUserRealm</code>
Authentication realm for this user.</p></td>
<td ><p>Readable,
writable
preemptive safe</p></td>
<td ><p>char</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-379037" title="QTSS Streams"></a><a name="//apple_ref/doc/uid/TP30000245-BAJJCBDJ" title="QTSS Streams"></a><h2>QTSS Streams</h2>
<p>The QTSS programming interface provides QTSS stream references
as a generalized stream abstraction. Streams can be used for reading
and writing data to many types of I/O sources, including, but not
limited to files, the error log, and sockets and for communicating
with the client via RTSP or RTP. In all RTSP roles, for example,
modules receive an object of type <code>QTSS_RTSPRequestObject</code> that
has a <code>qtssRTSPReqStreamRef</code> attribute. The
value of this attribute is of type <code>QTSS_StreamRef,</code> and
it can be used for sending RTSP response data to the client.</p>
<p>Unless otherwise noted, all streams are asynchronous. When
using the asynchronous QTSS file system callbacks, modules should
be prepared to receive the <code>QTSS_WouldBlock</code> result
code, subject to the restrictions and rules of each stream type
described in this section. The <code>QTSS_WouldBlock</code> error
is returned from a stream callback when completing the requested
operation would require the current thread to block. For instance, <code>QTSS_Write</code> on a
socket will return <code>QTSS_WouldBlock</code> if
the socket is currently subject to flow control. For information
on threading and asynchronous I/O, see the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-133096">“Runtime Environment for QTSS Modules.”</a></span></p>
<p>When a module receives the <code>QTSS_WouldBlock</code> result
code, modules should call the <code>QTSS_RequestEvent</code> callback
routine to request a notification from the server when the specified
stream becomes available for I/O. After calling <code>QTSS_RequestEvent</code>,
the module should return control immediately to the server. The
module will be re-invoked in the same role in the exact same state
when the specified stream is available for I/O.</p>
<p>All stream references are of type <code>QTSS_StreamRef</code>.
The QTSS programming interface uses following stream types:</p>
<dl class="termdef">	<dt><code>QTSS_ErrorLogStream</code></dt>
<dd><p>Used for writing binary data to the server&#8217;s error
log. There is a single instance of this stream type, which is passed
to each module in the Initialize role. When data is written to this
stream, modules that have registered for the Error Log role are
invoked. For information about this role, see the section <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-123643">“Error Log Role.”</a></span>
All operations on this stream type are synchronous.</p></dd>
<dt><code>QTSS_FileStream</code></dt>
<dd><p>Represents a file and is obtained by making the <code>QTSS_OpenFileStream</code> callback.
If the file stream is opened with the <code>qtssFileStreamAsync</code> flag, callers
should expect to receive a result code of <code>QTSS_WouldBlock</code> when
they call <code>QTSS_Read</code>, <code>QTSS_Write</code>,
and <code>QTSS_WriteV</code>.</p></dd>
<dt><code>QTSS_RTSPSessionStream</code></dt>
<dd><p>Used for reading data (<code>QTSS_Read</code>)
from an RTSP client and writing data (<code>QTSS_Write</code> or <code>QTSS_WriteV</code>)
to an RTSP client. The server may encounter flow control conditions,
so modules should be prepared to handle <code>QTSS_WouldBlock</code> result
codes when reading from or writing to this stream type. Calling <code>QTSS_Read</code> means
that you are reading the request body sent by the client to the
server. This stream reference is an attribute of the object <code>QTSS_RTSPSessionObject</code>.</p></dd>
<dt><code>QTSS_RTSPRequestStream</code></dt>
<dd><p>Used for reading data (<code>QTSS_Read</code>)
from an RTSP client and writing data (<code>QTSS_Write</code> or <code>QTSS_WriteV</code>)
to an RTSP client. This stream is identical to the <code>QTSS_RTSPSessionStream</code> stream
except that data written to streams of this type is buffered in
memory until a full RTSP response is constructed. Because the data
is buffered internally, modules do not receive <code>QTSS_WouldBlock</code> errors
when writing to streams of this type. Calling <code>QTSS_Read</code> <code>on
this type of stream</code> means that you are reading
the request body sent by the client to the server. Modules that
call <code>QTSS_Read to read this type of stream </code>should
be prepared to handle a result code of <code>QTSS_WouldBlock</code>.
This stream reference is an attribute of the object <code>QTSS_RTSPRequestObject</code>.</p></dd>
<dt><code>QTSS_RTPStreamStream</code></dt>
<dd><p>Used for writing data to an RTP client. When writing
to a stream of this type, a single write call corresponds to a single,
complete RTP packet, including headers. Currently, it is not possible
to use the <code>QTSS_RequestEvent</code> callback
to receive events for this stream, so if <code>QTSS_Write</code> or <code>QTSS_WriteV</code> returns <code>QTSS_WouldBlock</code>,
modules must poll periodically for the blocking condition to be
lifted. This stream reference is an attribute of the object <code>QTSS_RTPStreamObject</code>.</p></dd>
<dt><code>QTSS_SocketStream</code></dt>
<dd><p>Represents a socket. This stream type allows modules
to use the QTSS stream event mechanism (<code>QTSS_RequestEvent</code>)
for raw socket I/O. (In fact, the <code>QTSS_RequestEvent</code> callback
is the only stream callback available for this type of stream.)
Modules should read sockets asynchronously and should use the operating
system&#8217;s socket function to read from and write to sockets. When
those routines reach a blocking condition, the module can call <code>QTSS_RequestEvent</code> to
be notified when the blocking condition has cleared.</p></dd></dl>
<p><span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-379359">Table 1-24</a></span> uses an &#8220;X&#8221; to summarize the I/O-related callback
routines that are appropriate for each type of stream.</p><a name="//apple_ref/doc/uid/TP30000245-379359" title="Table 1-24Streams and appropriate callback routines"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFFDEJ" title="Table 1-24Streams and appropriate callback routines"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-24&nbsp;&nbsp;</strong>Streams and appropriate callback routines</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Stream Type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Read</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Seek</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Flush</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Advise</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Write</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>WriteV</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>RequestEvent</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>SignalStream</p></th>
</tr>


<tr>
<td  scope="row"><p>File
Stream</p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
</tr>
<tr>
<td  scope="row"><p>Error Log</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
</tr>
<tr>
<td  scope="row"><p>Socket
Stream</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p></p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP
Session
Stream</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
</tr>
<tr>
<td  scope="row"><p>RTSP
Request
Stream</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
</tr>
<tr>
<td  scope="row"><p>RTP
Stream</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p>X</p></td>
<td ><p>X</p></td>
<td ><p></p></td>
<td ><p></p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000245-379578" title="QTSS Services"></a><a name="//apple_ref/doc/uid/TP30000245-BAJEJIBC" title="QTSS Services"></a><h2>QTSS Services</h2>
<p>QTSS services are services the modules can access. The service
may be a built-in service provided by the server or an added service
provided by another module. An example of a service would be a logging
module that allows other modules to write messages to the error
log.</p>
<p>Modules use the callback routines described in the section <span class="content_text"><a href="../Reference/QTSSRef.html#//apple_ref/doc/uid/TP30000247-134008">“Service Callback Routines”</a></span> to register
and invoke services. Modules add and find services in a way that
is similar to the way in which they add and find attributes of an
object.</p>
<p>Every service has a name. To invoke a service, the calling
module must know the name of the service and resolve that name into
an ID.</p>
<p>Each service has its own specific parameter block format.
Modules that export services should carefully document the services
they export. Modules that call services should fail gracefully if
the service isn&#8217;t available or returns an error.</p>
<p>A module that implements a service calls <code>QTSS_AddService</code> in
its Register role to add the service to the server&#8217;s internal
database of services, as shown in the following code:</p>
<div class="codesample"><table><tr><td scope="row"><pre>void MyAddService()<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_Error theErr = QTSS_AddService(&quot;MyService&quot;, &amp;MyServiceFunction);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>The <code>MyServiceFunction</code> corresponds
to the name of a function that must be implemented in the same module.
Here is a stub implementation of the <code>MyServiceFunction</code>:</p>
<div class="codesample"><table><tr><td scope="row"><pre>QTSS_Error MyServiceFunction(MyServiceArgs* inArgs)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    // Each service function must take a single void* argument<span></span></pre></td></tr><tr><td scope="row"><pre>    // Implement the service here.<span></span></pre></td></tr><tr><td scope="row"><pre>    // Return a QTSS_Error.<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>To use a service, a module must get the service&#8217;s ID by
calling <code>QTSS_IDForService</code> and providing
the name of the service as a parameter. With the service&#8217;s ID,
the module calls <code>QTSS_DoService </code>to
cause the service to run, as shown in <span class="content_text"><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-145517">Listing 1-1</a></span>.</p>
<a name="//apple_ref/doc/uid/TP30000245-145517" title="Listing 1-1Starting a service"></a><a name="//apple_ref/doc/uid/TP30000245-BAJGCBDG" title="Listing 1-1Starting a service"></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Starting
a service</p>
<div class="codesample"><table><tr><td scope="row"><pre>void MyInvokeService()<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    // Service functions take a single void* parameter that corresponds<span></span></pre></td></tr><tr><td scope="row"><pre>    // to a parameter block specific to the service.<span></span></pre></td></tr><tr><td scope="row"><pre>    MyServiceParamBlock theParamBlock;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Initialize service-specific parameters in the parameter block.<span></span></pre></td></tr><tr><td scope="row"><pre>    theParamBlock.myArgument = xxx;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_ServiceID theServiceID = qtssIllegalServiceID;<span></span></pre></td></tr><tr><td scope="row"><pre>    // Get the service ID by providing the name of the service.<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSS_Error theErr = QTSS_IDForService(&#8216;MyService&#8217;, &amp;theServiceID);<span></span></pre></td></tr><tr><td scope="row"><pre>    if (theErr != QTSS_NoErr)<span></span></pre></td></tr><tr><td scope="row"><pre>        return; // The service isn&#8217;t available.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Run the service.<span></span></pre></td></tr><tr><td scope="row"><pre>    theErr = QTSS_DoService(theServiceID, &amp;theParamBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-124275" title="Built-in Services"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF129" title="Built-in Services"></a><h3>Built-in Services</h3>
<p>The QuickTime Streaming Server provides built-in services
that modules may invoke using the service routines. In this version
of the QTSS programming interface, there is one built-in service:</p>
<div class="codesample"><table><tr><td scope="row"><pre>#define QTSS_REREAD_PREFS_SERVICE &quot;RereadPreferences&quot;<span></span></pre></td></tr></table></div>
<p>Invoking the Reread Preferences service causes the server
to reread its preferences and invoke each module in the Reread Preferences
role, if they have registered for that role.</p>
<p>To invoke a built-in service, retrieve the service ID of the
service by calling <code>QTSS_IDForService</code>.
Then call <code>QTSS_DoService</code> to
run the service.</p>
<a name="//apple_ref/doc/uid/TP30000245-168819" title="Automatic Broadcasting"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF132" title="Automatic Broadcasting"></a><h2>Automatic Broadcasting</h2>
<p>The Streaming Server can accept RTSP ANNOUNCE requests from
QuickTime broadcasters. Support for ANNOUNCE requests and the ability
of the server to act as an RTSP client allow the server to initiate
new relay sessions. This section describes the two ways in which
an automatic broadcast can be initiated, how ANNOUNCE requests work with
SDP, and how the <code>qtaccess </code>and <code>qtusers</code> files
control automatic broadcasting.</p>
<a name="//apple_ref/doc/uid/TP30000245-168851" title="Automatic Broadcasting Scenarios"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF133" title="Automatic Broadcasting Scenarios"></a><h3>Automatic Broadcasting Scenarios</h3>
<p>QTSS supports two automatic broadcasting scenarios:</p>
<ul class="spaceabove"><li class="li"><p>Pull then push. To initiate automatic broadcast,
an RTSP client sends standard RTSP requests to request a stream
and the server then relays the stream to one or more other streaming
servers. This scenario is described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-168915">&#8220;Pull Then Push&#8221;</a></code>.</p></li>
<li class="li"><p>Listen then push. In this scenario, an automatic broadcast
is initiated when the streaming server receives an ANNOUNCE request.
This scenario is described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-171402">&#8220;Listen Then Push&#8221;</a></code>.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-168915" title="Pull Then Push"></a><a name="//apple_ref/doc/uid/TP30000245-CJBEAAIA" title="Pull Then Push"></a><h4>Pull Then Push</h4>
<p>The user can request a stream from a remote source by making
standard DESCRIBE/SETUP/PLAY requests and then relay it to one or
more destinations. This functionality can be useful when an organization
only wants one copy of an outside stream to consume bandwidth on
its Internet connection. The relay would sit just inside the corporate
network and push the stream to a reflector (possibly itself). <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-178012">Figure 2-7</a></code> provides
an example of the pull-then-push scenario.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-178012" title="Figure 1-7Pull-then-push automatic broadcasting"></a><a name="//apple_ref/doc/uid/TP30000245-CJBCGHCE" title="Figure 1-7Pull-then-push automatic broadcasting"></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>Pull-then-push automatic broadcasting</p>
<img src = "../art/qtss05.gif" alt = "" width="303" height="156"></div><br/>
<p>Using <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-178012">Figure 2-7</a></code> as a reference, the steps for the pull-then-push scenario
are as follows:</p>
<ol class="ol"><li class="li"><p>Streaming Server A (the relay client) sends standard
RTSP client DESCRIBE/SETUP/PLAY requests to a remote server, Streaming
Server B.</p></li>
<li class="li"><p>The relay &#8220;client&#8221; (Streaming Server A) that requested
the stream will begin receiving it and then send an ANNOUNCE to
all of the destinations listed in the relay configuration for that
particular incoming stream.</p></li></ol>
<a name="//apple_ref/doc/uid/TP30000245-171402" title="Listen Then Push"></a><a name="//apple_ref/doc/uid/TP30000245-CJBCHAIE" title="Listen Then Push"></a><h4>Listen Then Push</h4>
<p>The streaming server can be configured to send incoming streams
created by an ANNOUNCE request to one or more destination machines
automatically. This can be useful for setting up an automated broadcast
network. <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-181390">Figure 2-8</a></code> provides an example of the pull-then-push scenario.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-181390" title="Figure 1-8Listen-then-push automatic broadcasting"></a><a name="//apple_ref/doc/uid/TP30000245-CJBBBACI" title="Figure 1-8Listen-then-push automatic broadcasting"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>Listen-then-push automatic broadcasting</p>
<img src = "../art/qtss06.gif" alt = "" width="312" height="170"></div><br/>
<p>Using <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-181390">Figure 2-8</a></code> as a reference, the steps for the listen -then-push scenario
are as follows:</p>
<ul class="spaceabove"><li class="li"><p>A remote machine (a broadcaster or a relay) sends
an ANNOUNCE request to Streaming Server A. The streaming server
may accept or deny the request. If it accepts the request, the streaming
server checks its relay configuration to determined whether the
stream should be relayed.</p></li>
<li class="li"><p>If the stream should be relayed, the streaming server will
send standard RTSP client DESCRIBE/SETUP/PLAY request to itself.</p></li>
<li class="li"><p>The relay &#8220;client&#8221; (Streaming Server A) that requested
the stream will begin receiving it and then send an ANNOUCE to all
of the destinations listed in its relay configuration for that particular
incoming stream.</p></li></ul>
<p>By default, authentication is required for automatic broadcasts.
ANNOUNCE requests from broadcasters are filtered through the authentication
mechanism active in the server. To support broadcast authentication,
a new WRITE directive has been added to qtaccess file. The new directive
allows SDP files to be written to the <code>movies </code>folder.</p>
<a name="//apple_ref/doc/uid/TP30000245-172656" title="ANNOUNCE Requests and SDP"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF134" title="ANNOUNCE Requests and SDP"></a><h3>ANNOUNCE Requests and SDP</h3>
<p>The ANNOUNCE request contains the Session Description Protocol
(SDP) information for the broadcast. The ANNOUNCE request&#8217;s URI
value may contain path delimiters in order to provide name space
functionality.</p>
<p>When a broadcast is initiated by an ANNOUNCE request, the
SDP information is stored in an in-memory broadcast list. To terminate
a broadcast, the broadcaster sends to the server a TEARDOWN request,
which causes the server to close the broadcast session and discard
the SDP information. Similarly, dropped RTSP connections and broadcasters
that do no send RTCP sender reports to the server within a 90-second
window cause the server to close the broadcast session and discard
the SDP information.</p>
<p>To support multiple SDP references to the same broadcast for
announced UDP and TCP broadcasts, the port setting is zero in the
ANNOUNCE header. Here is an example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>m=audio 0 RTP/AVP<span></span></pre></td></tr></table></div>
<p>The a=x-urlmap tag is required to support sharing streams
between broadcasts (where one stream comes from one broadcaster
and another stream comes from another broadcaster). The a=x-urlmap
tag should appear in the SDP that references the source SDP. Here
is an example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>a=x-urlmap: someotherbroadcastURL/TrackID=1<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-238424" title="Access Control of Announced Broadcasts"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF135" title="Access Control of Announced Broadcasts"></a><h3>Access Control of Announced Broadcasts</h3>
<p>To control automatic broadcasting, two new user tags have
been defined in the qtaccess file. <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-238442">Table 2-25</a></code> lists the new tags.</p>
<a name="//apple_ref/doc/uid/TP30000245-238442" title="Table 1-25Access control user tags"></a><a name="//apple_ref/doc/uid/TP30000245-CJBEEJEH" title="Table 1-25Access control user tags"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-25&nbsp;&nbsp;</strong>Access control user tags</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tag</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Purpose</p></th>
</tr>


<tr>
<td  scope="row"><p><code>valid-user</code></p></td>
<td ><p>Specifies that the user can have access to the requested movie
if the client provides a name and password that match an entry in
the qtusers file. The tag is written as <code>require
valid-user</code>.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>any-user</code></p></td>
<td ><p>Specifies that any user can have access to the requested movie,
with no requirement that the user be defined in the <code>qtusers</code> file
or that the client provide a name and password that is checked.
The tag is written as <code>require any-user.</code></p></td>
</tr>

</table></div>
<p>By default, the <code>qtaccess</code> file
allows read access for all directives in the file. To allow announced
broadcasts, the <code>qtaccess</code> file
must contain a <code>Limit</code> directive
that allows writing.</p>
<p>The purpose of the <code>Limit</code> directive
is to restrict the effect of access controls to RTSP readers or
writers. The following example limits the <code>require</code> access
control so that only users defined in the <code>qtusers</code> file
can RTSP PLAY a broadcast to the server. All other normal client PLAY
requests are available to any user:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;Limit WRITE&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>require valid-user<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/Limit&gt;<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_21" title="Note"></a><p><strong>Note:</strong>&nbsp;The termination
of the Limit directive (<code>&lt;/Limit&gt;</code>)
must be placed on its own line.</p></div>
<p>The following example allows movie viewing by any user in
the <code>qtusers</code> file that
is in the <code>movie_watchers</code> group
and the user <code>john</code>. Broadcasters
must be in the <code>movie_broadcasters</code> group
to broadcast to this directory or its protected branches.</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;Limit READ&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>require group movie_watchers<span></span></pre></td></tr><tr><td scope="row"><pre>require user john<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/Limit&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;Limit WRITE&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>require group movie_broadcasters<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/Limit&gt;<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_22" title="Note"></a><p><strong>Note:</strong>&nbsp;Strings in the <code>qtaccess</code> file
are case-sensitive.</p></div>
<p>The following example has the same effect as the previous
example. It works because the default behavior is to limit access
to reading when no limit field is specified.</p>
<div class="codesample"><table><tr><td scope="row"><pre>require group movie_watchers<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;Limit WRITE&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>require group movie_broadcasters<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/Limit&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>require user john<span></span></pre></td></tr></table></div>
<p>The following example allows movie viewing and broadcasting
by any user in the <code>qtusers</code> file
that is in the <code>movie_watchers_and_broadcasters</code> group:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;Limit READ WRITE&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>require group movie_watchers_and_broadcasters<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/Limit&gt;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-220686" title="Broadcaster-to-Server Example"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF136" title="Broadcaster-to-Server Example"></a><h3>Broadcaster-to-Server Example</h3>
<p>This section shows a typical exchange between a client and
a server in order to initiate an announced broadcast. The following
example shows a UDP multicast. Announced broadcasts can also set
up requests with using unicast RTP/AVP/UDP streams as well as RTP/AVP/TCP
interleaved streams.  For more information, see RFC 2326.</p>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    ANNOUNCE rtsp://server.example.com/meeting RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 90<span></span></pre></td></tr><tr><td scope="row"><pre>    Content-Type: application/sdp<span></span></pre></td></tr><tr><td scope="row"><pre>    Content-Length: 121<span></span></pre></td></tr><tr><td scope="row"><pre>    v=0<span></span></pre></td></tr><tr><td scope="row"><pre>    o=camera1 3080117314 3080118787 IN IP4 195.27.192.36<span></span></pre></td></tr><tr><td scope="row"><pre>    s=IETF Meeting, Munich - 1<span></span></pre></td></tr><tr><td scope="row"><pre>    i=The thirty-ninth IETF meeting will be held in Munich, Germany<span></span></pre></td></tr><tr><td scope="row"><pre>    u=http://www.ietf.org/meetings/Munich.html<span></span></pre></td></tr><tr><td scope="row"><pre>    e=IETF Channel 1 &lt;ietf39-mbone@uni-koeln.de&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    p=IETF Channel 1 +49-172-2312 451<span></span></pre></td></tr><tr><td scope="row"><pre>    c=IN IP4 224.0.1.11/127<span></span></pre></td></tr><tr><td scope="row"><pre>    t=3080271600 3080703600<span></span></pre></td></tr><tr><td scope="row"><pre>    a=tool:sdr v2.4a6<span></span></pre></td></tr><tr><td scope="row"><pre>    a=type:test<span></span></pre></td></tr><tr><td scope="row"><pre>    m=audio 0 RTP/AVP 5<span></span></pre></td></tr><tr><td scope="row"><pre>    a=control:trackID=1<span></span></pre></td></tr><tr><td scope="row"><pre>    c=IN IP4 224.0.1.11/127<span></span></pre></td></tr><tr><td scope="row"><pre>    a=ptime:40<span></span></pre></td></tr><tr><td scope="row"><pre>    m=video 0 RTP/AVP 31<span></span></pre></td></tr><tr><td scope="row"><pre>    a=control:trackID=2<span></span></pre></td></tr><tr><td scope="row"><pre>    c=IN IP4 224.0.1.12/127<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 90<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    SETUP rtsp://server.example.com/meeting/trackID=1 RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 91<span></span></pre></td></tr><tr><td scope="row"><pre>    Transport: RTP/AVP;multicast;destination=224.0.1.11;<span></span></pre></td></tr><tr><td scope="row"><pre>    client_port=21010-21011;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 91<span></span></pre></td></tr><tr><td scope="row"><pre>    Session: 50887676<span></span></pre></td></tr><tr><td scope="row"><pre>    Transport: RTP/AVP;multicast;destination=224.0.1.11;<span></span></pre></td></tr><tr><td scope="row"><pre>    client_port=21010-21011;serverport=6000-6001;mode=receive;ttl=127<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    SETUP rtsp://server.example.com/meeting/trackID=2 RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 92<span></span></pre></td></tr><tr><td scope="row"><pre>    Session: 50887676<span></span></pre></td></tr><tr><td scope="row"><pre>    Transport: RTP/AVP;multicast;destination=224.0.1.12;<span></span></pre></td></tr><tr><td scope="row"><pre>    client_port =61010-61011;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 92<span></span></pre></td></tr><tr><td scope="row"><pre>    Transport: RTP/AVP;multicast;destination=224.0.1.12;<span></span></pre></td></tr><tr><td scope="row"><pre>    client_port =61010-61011;serverport=6002-6003;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    RECORD rtsp://server.example.com/meeting RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 93<span></span></pre></td></tr><tr><td scope="row"><pre>    Session: 50887676<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>    CSeq: 93<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-273403" title="Additional Trace Examples"></a><a name="//apple_ref/doc/uid/TP30000245-BAJHIEBG" title="Additional Trace Examples"></a><h3>Additional Trace Examples</h3>
<p>This section provides three traces. The first trace is from
the QuickTime Broadcaster, and it is sending MPEG 4 streams using
TCP.  The second trace is also from the QuickTime Broadcaster, but
it is using UDP. The third trace is from RFC 2326 (RTSP) showing
the ANNOUNCE and RECORD RTSP methods using UDP transport.</p>
<p>The broadcaster requests to notice are</p>
<ul class="spaceabove"><li class="li"><p>RTSP ANNOUNCE to send the SDP file to the server</p></li>
<li class="li"><p>RTSP SETUP to send a Transport header setting <code>mode=record</code>;
the direction of the stream is implicitly from the perspective of
the server</p></li>
<li class="li"><p>RTSP RECORD to start the broadcast</p></li></ul>
<p>The requests mirror the streaming client requests:</p>
<ul class="spaceabove"><li class="li"><p>RTSP DESCRIBE to receive the SDP file from the
server</p></li>
<li class="li"><p>RTSP SETUP to set up each stream</p></li>
<li class="li"><p>RTSP PLAY to start the streams</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-274876" title="Trace of QuickTime Broadcaster Using TCP"></a><a name="//apple_ref/doc/uid/TP30000245-BAJCDJFI" title="Trace of QuickTime Broadcaster Using TCP"></a><h4>Trace of QuickTime Broadcaster Using TCP</h4>
<p>Here is a trace of a QuickTime Broadcaster sending MPEG 4
streams using TCP. A TCP connection uses the same set of RTSP requests
with the standard specified transport of RTP/AVP/TCP and the port
identifier of <code>interleaved=</code> for
each stream. </p>
<p>For this example, authentication and authorization has been
disabled by a <code>qtaccess </code> file
to allow any user to annouce a broadcast. The broadcast file is
relative to the <code>movies</code> directory. If
an SDP file already exists for the URL, it is replaced. Clients
that are already connected to the URL are not updated with the new
SDP as doing so would require a new <code>DESCRIBE</code> from
the client, and there currently is no way to notify clients of the
SDP change.</p>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>ANNOUNCE rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 1\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/sdp\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Length: 790\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>c=IN IP4<span></span></pre></td></tr><tr><td scope="row"><pre>127.0.0.1\ra=x-qt-text-nam:test\ra=x-qt-text-cpy:apple\<span></span></pre></td></tr><tr><td scope="row"><pre>ra=x-qt-text-aut:john\<span></span></pre></td></tr><tr><td scope="row"><pre>ra=x-qt-text-inf:none\<span></span></pre></td></tr><tr><td scope="row"><pre>ra=mpeg4-iod:&quot;data:application/<span></span></pre></td></tr><tr><td scope="row"><pre>mpeg4-iod;base64,AoF/<span></span></pre></td></tr><tr><td scope="row"><pre>AE8BAQEBAQOBEgABQHRkYXRhOmFwcGxpY2F0aW9uL21wZWc0LW9kLWF1O2Jhc2U2NCxBVGdC<span></span></pre></td></tr><tr><td scope="row"><pre>R3dVZkF4Y0F5U1FBWlFRTklCRUFGM0FBQVBvQUFBRERVQVlCQkFFWkFwOERGUUJsQlFRTlFC<span></span></pre></td></tr><tr><td scope="row"><pre>VUFCOUFBQUQ2QUFBQStnQVlCQXc9PQQNAQUAAMgAAAAAAAAAAAYJAQAAAAAAAAAAA2EAAkA+<span></span></pre></td></tr><tr><td scope="row"><pre>ZGF0YTphcHBsaWNhdGlvbi9tcGVnNC1iaWZzLWF1O2Jhc2U2NCx3QkFTZ1RBcUJYSmhCSWhR<span></span></pre></td></tr><tr><td scope="row"><pre>UlFVL0FBPT0EEgINAAAUAAAAAAAAAAAFAwAAQAYJAQAAAAAAAAAA&quot;\ra=isma-<span></span></pre></td></tr><tr><td scope="row"><pre>compliance:1,1.0,1\rm=audio 0 RTP/AVP 96\ra=rtpmap:96<span></span></pre></td></tr><tr><td scope="row"><pre>X-QT/8000/1\ra=control:trackid=1\rm=video 0 RTP/AVP 97\ra=rtpmap:97<span></span></pre></td></tr><tr><td scope="row"><pre>MP4V-ES\ra=fmtp:97<span></span></pre></td></tr><tr><td scope="row"><pre>profile-level-id=1;config=000001B0F3000001B50EE040C0CF0000010000000120008440FA2850 20F0<span></span></pre></td></tr><tr><td scope="row"><pre>A31F\ra=mpeg4-esid:201\ra=cliprect:0,0,240,320\ra=control:trackid=2\r<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 1\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// The broadcaster is trying to determine if RECORD is supported. QTSS 4.0 used an  Apple<span></span></pre></td></tr><tr><td scope="row"><pre>// method of RECEIVE instead of the RECORD.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>OPTIONS rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 2\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 2\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, ANNOUNCE, SET_PARAMETER, RECORD\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// Here is the first setup with the transport defined from the client to the<span></span></pre></td></tr><tr><td scope="row"><pre>// server. The URL is the same as when a client performs a setup requesting<span></span></pre></td></tr><tr><td scope="row"><pre>// a stream. QTSS does not allow a SETUP on a stream that is already set up<span></span></pre></td></tr><tr><td scope="row"><pre>// and will return an error. This can happen in two ways.<span></span></pre></td></tr><tr><td scope="row"><pre>// 1) A broadcast software error that does not change the URL.<span></span></pre></td></tr><tr><td scope="row"><pre>// 2) A broadcast dies without performing a teardown. In this case, the<span></span></pre></td></tr><tr><td scope="row"><pre>// broadcast session has to timeout and die before another setup can occur.<span></span></pre></td></tr><tr><td scope="row"><pre>// The server uses a short timeout of 20 seconds for broadcast sessions. The<span></span></pre></td></tr><tr><td scope="row"><pre>// timeout is refreshed by any packet received from the broadcaster.<span></span></pre></td></tr><tr><td scope="row"><pre>SETUP rtsp://127.0.0.1/mystream.sdp/trackid=1 RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 3\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/AVP/TCP;unicast;mode=record;interleaved=0-1\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Accept-Language: en-US\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// The server responds with the interleaved values. If the values conflict,<span></span></pre></td></tr><tr><td scope="row"><pre>// the client will change them so each stream has a unique set of<span></span></pre></td></tr><tr><td scope="row"><pre>// interleaved IDs.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 3\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cache-Control: no-cache\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Date: Thu, 13 Feb 2003 21:34:27 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Expires: Thu, 13 Feb 2003 21:34:27 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/AVP/TCP;unicast;mode=record;interleaved=0-1\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SETUP rtsp://127.0.0.1/mystream.sdp/trackid=2 RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 4\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/AVP/TCP;unicast;mode=record;interleaved=2-3\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Accept-Language: en-US\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 4\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cache-Control: no-cache\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Date: Thu, 13 Feb 2003 21:34:27 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Expires: Thu, 13 Feb 2003 21:34:27 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/AVP/TCP;unicast;mode=record;interleaved=2-3\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// This is the equivalent to a client PLAY request. The broadcaster is now<span></span></pre></td></tr><tr><td scope="row"><pre>// starting the streams.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>RECORD rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 5\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// RTCPs will be sent back on the channels to show the number of watching<span></span></pre></td></tr><tr><td scope="row"><pre>// clients.<span></span></pre></td></tr><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 5\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>RTP-Info: url=trackid=1,url=trackid=2\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>PAUSE rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 6\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 6\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// A TEARDOWN stops the broadcast streams. It does not stop the clients or<span></span></pre></td></tr><tr><td scope="row"><pre>// their streams. By default, QTSS allows a restarted or different broadcaster<span></span></pre></td></tr><tr><td scope="row"><pre>// to send to the same URL and the clients will receive the new streams. This<span></span></pre></td></tr><tr><td scope="row"><pre>// can be both good and bad since the broadcaster can change the stream media<span></span></pre></td></tr><tr><td scope="row"><pre>// type on the clients. The streamingserver.xml file provides an attribute<span></span></pre></td></tr><tr><td scope="row"><pre>// that allows the server to force clients to disconnect if the broadcaster<span></span></pre></td></tr><tr><td scope="row"><pre>// disconnects. The broadcast receiver is recommended to have a way for an<span></span></pre></td></tr><tr><td scope="row"><pre>// administrator or the broadcaster to tear down sessions that have failed.<span></span></pre></td></tr><tr><td scope="row"><pre>// The server adds a 30 second timeout between SSRC values to prevent someone<span></span></pre></td></tr><tr><td scope="row"><pre>// from pirating a stream.  As long as a stream is playing with the initial<span></span></pre></td></tr><tr><td scope="row"><pre>// SSRC, another stream arriving on the same ports will not be reflected to<span></span></pre></td></tr><tr><td scope="row"><pre>// clients. Attempts to pirate a steam usually occur by accident when users<span></span></pre></td></tr><tr><td scope="row"><pre>// manually set their SDP ports.<span></span></pre></td></tr><tr><td scope="row"><pre>TEARDOWN rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 7\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>// The server removes the SDP file from the movies directory on teardown or<span></span></pre></td></tr><tr><td scope="row"><pre>// broadcaster timeout.<span></span></pre></td></tr><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 7\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 6664885458621367225\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Connection: Close\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-275447" title="Trace of UDP Broadcast with Negotiated Server Ports"></a><a name="//apple_ref/doc/uid/TP30000245-BAJECAED" title="Trace of UDP Broadcast with Negotiated Server Ports"></a><h4>Trace of UDP Broadcast with Negotiated
Server Ports</h4>
<p>The only significant addition to RFC 2326 is that when receiving
a broadcast over UDP, the QuickTime server uses SETUP with <code>mode=RECORD</code> to
generate and send back to the client a UDP port to use when the
SDP contains a port value of 0 for a given stream.  Otherwise, the
server uses the SDP-defined port to receive the streams. The server's
receive port is declared in the SETUP response transport header.
 The format looks exactly as if a client were performing a SETUP
request for a stream from the server and then receiving the port the
server is sending from.</p>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>ANNOUNCE rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 1\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/sdp\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Length: 790\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>c=IN IP4<span></span></pre></td></tr><tr><td scope="row"><pre>127.0.0.1\ra=x-qt-text-nam:test\ra=x-qt-text-cpy:apple\<span></span></pre></td></tr><tr><td scope="row"><pre>ra=x-qt-text-aut:john\<span></span></pre></td></tr><tr><td scope="row"><pre>ra=x-qt-text-inf:none\<span></span></pre></td></tr><tr><td scope="row"><pre>ra=mpeg4-iod:&quot;data:application/<span></span></pre></td></tr><tr><td scope="row"><pre>mpeg4-iod;base64,AoF/<span></span></pre></td></tr><tr><td scope="row"><pre>AE8BAQEBAQOBEgABQHRkYXRhOmFwcGxpY2F0aW9uL21wZWc0LW9kLWF1O2Jhc2U2NCxBVGdC<span></span></pre></td></tr><tr><td scope="row"><pre>R3dVZkF4Y0F5U1FBWlFRTklCRUFGM0FBQVBvQUFBRERVQVlCQkFFWkFwOERGUUJsQlFRTlFC<span></span></pre></td></tr><tr><td scope="row"><pre>VUFCOUFBQUQ2QUFBQStnQVlCQXc9PQQNAQUAAMgAAAAAAAAAAAYJAQAAAAAAAAAAA2EAAkA+<span></span></pre></td></tr><tr><td scope="row"><pre>ZGF0YTphcHBsaWNhdGlvbi9tcGVnNC1iaWZzLWF1O2Jhc2U2NCx3QkFTZ1RBcUJYSmhCSWhR<span></span></pre></td></tr><tr><td scope="row"><pre>UlFVL0FBPT0EEgINAAAUAAAAAAAAAAAFAwAAQAYJAQAAAAAAAAAA&quot;\ra=isma-<span></span></pre></td></tr><tr><td scope="row"><pre>compliance:1,1.0,1\rm=audio 0 RTP/AVP 96\ra=rtpmap:96<span></span></pre></td></tr><tr><td scope="row"><pre>X-QT/8000/1\ra=control:trackid=1\rm=video 0 RTP/AVP 97\ra=rtpmap:97<span></span></pre></td></tr><tr><td scope="row"><pre>MP4V-ES\ra=fmtp:97<span></span></pre></td></tr><tr><td scope="row"><pre>profile-level-id=1;config=000001B0F3000001B50EE040C0CF0000010000000120008440FA2850 20F0<span></span></pre></td></tr><tr><td scope="row"><pre>A31F\ra=mpeg4-esid:201\ra=cliprect:0,0,240,320\ra=control:trackid=2\r<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 1\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>OPTIONS rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 2\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 2\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, ANNOUNCE, SET_PARAMETER, RECORD\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SETUP rtsp://127.0.0.1/mystream.sdp/trackid=1 RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 3\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/AVP;unicast;client_port=6974-6975;mode=record\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Accept-Language: en-US\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 3\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cache-Control: no-cache\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 1549167172936112945\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Date: Thu, 13 Feb 2003 21:59:22 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Expires: Thu, 13 Feb 2003 21:59:22 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport:<span></span></pre></td></tr><tr><td scope="row"><pre>RTP/AVP;unicast;client_port=6974-6975;mode=record;source=127.0.0.1;<span></span></pre></td></tr><tr><td scope="row"><pre>server_port=6976-6977\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SETUP rtsp://127.0.0.1/mystream.sdp/trackid=2 RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 4\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/AVP;unicast;client_port=6972-6973;mode=record\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 1549167172936112945\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Accept-Language: en-US\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 4\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 1549167172936112945\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cache-Control: no-cache\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Date: Thu, 13 Feb 2003 21:59:22 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Expires: Thu, 13 Feb 2003 21:59:22 GMT\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Transport:<span></span></pre></td></tr><tr><td scope="row"><pre>RTP/AVP;unicast;client_port=6972-6973;mode=record;source=127.0.0.1;<span></span></pre></td></tr><tr><td scope="row"><pre>server_port=6978-6979\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RECORD rtsp://127.0.0.1/mystream.sdp RTSP/1.0\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 5\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 1549167172936112945\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=6.1;cpu=PPC;os=Mac 10.2.3)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/4.1.3.x (Build/425; Platform/MacOSX; Release/Development;)\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Cseq: 5\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 1549167172936112945\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>RTP-Info: url=trackid=1,url=trackid=2\r\n<span></span></pre></td></tr><tr><td scope="row"><pre>\r\n<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-276836" title="Trace of ANNOUNCE and RECORD Using UDP Transport"></a><a name="//apple_ref/doc/uid/TP30000245-BAJFAGIJ" title="Trace of ANNOUNCE and RECORD Using UDP Transport"></a><h4>Trace of ANNOUNCE and RECORD Using UDP
Transport</h4>
<p>The following trace example of ANNOUNCE and RECORD RTSP methods
using UDP transport is from RFC 2326. The conference participant
client asks the media server to record the audio and video portions
of a meeting. The client uses the ANNOUNCE method to provide meta-information
about the recorded session to the server.</p>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>ANNOUNCE rtsp://server.example.com/meeting RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 90<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/sdp<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Length: 121<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>v=0<span></span></pre></td></tr><tr><td scope="row"><pre>o=camera1 3080117314 3080118787 IN IP4 195.27.192.36<span></span></pre></td></tr><tr><td scope="row"><pre>s=IETF Meeting, Munich - 1<span></span></pre></td></tr><tr><td scope="row"><pre>i=The thirty-ninth IETF meeting will be held in Munich, Germany<span></span></pre></td></tr><tr><td scope="row"><pre>u=http://www.ietf.org/meetings/Munich.html<span></span></pre></td></tr><tr><td scope="row"><pre>e=IETF Channel 1 &lt;ietf39-mbone@uni-koeln.de&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>p=IETF Channel 1 +49-172-2312 451<span></span></pre></td></tr><tr><td scope="row"><pre>c=IN IP4 224.0.1.11/127<span></span></pre></td></tr><tr><td scope="row"><pre>t=3080271600 3080703600<span></span></pre></td></tr><tr><td scope="row"><pre>a=tool:sdr v2.4a6<span></span></pre></td></tr><tr><td scope="row"><pre>a=type:test<span></span></pre></td></tr><tr><td scope="row"><pre>m=audio 21010 RTP/AVP 5<span></span></pre></td></tr><tr><td scope="row"><pre>c=IN IP4 224.0.1.11/127<span></span></pre></td></tr><tr><td scope="row"><pre>a=ptime:40<span></span></pre></td></tr><tr><td scope="row"><pre>m=video 61010 RTP/AVP 31<span></span></pre></td></tr><tr><td scope="row"><pre>c=IN IP4 224.0.1.12/127<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 90<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SETUP rtsp://server.example.com/meeting/audiotrack RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 91<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP<span></span></pre></td></tr><tr><td scope="row"><pre>AVP;multicast;destination=224.0.1.11;port=21010-21011;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 91<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 50887676<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP<span></span></pre></td></tr><tr><td scope="row"><pre>AVP;multicast;destination=224.0.1.11;port=21010-21011;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SETUP rtsp://server.example.com/meeting/videotrack RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 92<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 50887676<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP/<span></span></pre></td></tr><tr><td scope="row"><pre>AVP;multicast;destination=224.0.1.12;port=61010-61011;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 92<span></span></pre></td></tr><tr><td scope="row"><pre>Transport: RTP<span></span></pre></td></tr><tr><td scope="row"><pre>AVP;multicast;destination=224.0.1.12;port=61010-61011;mode=record;ttl=127<span></span></pre></td></tr></table></div>
<p>Client to server:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RECORD rtsp://server.example.com/meeting RTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 93<span></span></pre></td></tr><tr><td scope="row"><pre>Session: 50887676<span></span></pre></td></tr><tr><td scope="row"><pre>Range: clock=19961110T1925-19961110T2015<span></span></pre></td></tr></table></div>
<p>Server to client:</p>
<div class="codesample"><table><tr><td scope="row"><pre>RTSP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 93<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-276963" title="Stream Caching"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF137" title="Stream Caching"></a><h2>Stream Caching</h2>
<p>This version of QTSS includes RTSP and RTP features that make
it as easy for a caching proxy server to capture and manage a pristine
copy of a media stream. Some of these features are elements of RTSP
that were not supported in previous versions of QTSS, and other
features are additions to RTSP and RTP. The features are</p>
<ul class="ul"><li class="li"><p><em>Speed RTSP header.</em> This
version of QTSS supports the speed header wherever possible. The
speed header allows a caching proxy server to request that a stream
be delivered faster than real time so that the caching proxy server
can move the stream into the cache as quickly as possible. This
header is described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-175329">&#8220;Speed RTSP Header&#8221;</a></code>.</p></li>
<li class="li"><p><em>x-Transport-Options RTSP header.</em> This
version of QTSS supports the non-standard RTSP header, <code>x-Transport-Options</code>.
Caching proxy servers can use this header to tell the streaming
server how late packets the streaming server can send packets and
have them still be useful to the caching proxy server. This header
is described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-176567">&#8220;x-Transport-Options Header&#8221;</a></code>.</p></li>
<li class="li"><p><em>RTP payload meta-information.</em> This version
of QTSS fully supports RTP payload meta-information (an IETF draft),
which includes information such as the packet transmission time,
unique packet number, and video frame type. Caching proxy servers
can use this information to provide the same quality of service
to clients as the originating server. This header is described in
the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-176758">&#8220;RTP Payload Meta-Information&#8221;</a></code>.</p></li>
<li class="li"><p><em>x-Packet-Range RTSP header.</em> This version
of QTSS supports the non-standard RTSP header, <code>x-Packet-Range</code>.
This header is similar to the <code>Range</code> RTSP
header but allows the client to specify a specific range of packets
instead of a range of time. A caching proxy server can use the <code>x-Packet-Range</code> header
to tell the originating server to selectively retransmit only those
packets that the caching proxy server needs in order to fill in holes
in its cached copy of the stream. This header is described in the
section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177892">&#8220;x-Packet-Range RTSP Header&#8221;</a></code>.</p></li></ul>
<p>The following sections describe each of these features.</p>
<a name="//apple_ref/doc/uid/TP30000245-175329" title="Speed RTSP Header"></a><a name="//apple_ref/doc/uid/TP30000245-CJBDCCIB" title="Speed RTSP Header"></a><h3>Speed RTSP Header</h3>
<p>Clients can send to the server the optional Speed RTSP header
to request that the server send data to the client at a particular
speed. The server must respond by echoing the Speed RTSP header
to the client. If the server does not echo the Speed RTSP header,
the client must assume that the server cannot accommodate the request
at this time. The server may modify the value of the Speed RTSP
header argument. If the server modifies the value of the argument,
the client must accept the modified value.</p>
<p>The value of the <code>Speed</code> RTSP
header argument is expressed as a decimal ratio. The following example
asks the server to send data twice as fast as normal:</p>
<div class="codesample"><table><tr><td scope="row"><pre>Speed: 2.0<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_23" title="Note"></a><p><strong>Note:</strong>&nbsp;An argument of
zero is invalid.</p></div>
<p>If the request also contains a Range argument, the new speed
value will take effect at the specified time.</p>
<p>This header is intended for use when preview of the presentation
at a higher or lower rate is necessary. Bandwidth for the session
may have been negotiated earlier (by means other than RTSP), and
therefore re-negotiation may be necessary.</p>
<p>When data is delivered over UDP, it is highly recommended
that means such as RTCP be used to track packet loss rates.</p>
<a name="//apple_ref/doc/uid/TP30000245-176567" title="x-Transport-Options Header"></a><a name="//apple_ref/doc/uid/TP30000245-CJBIGFIG" title="x-Transport-Options Header"></a><h3>x-Transport-Options Header</h3>
<p>The optional <code>x-Transport-Options</code> RTSP
header should be sent from a client (typically a caching proxy server)
to the server in an RTSP SETUP request and must echoed by the server.
If the server does not echo the <code>x-Transport-Options</code> header,
the client must assume that the server does not support this header.
The server may modify the value of the <code>x-Transport-Options</code> header
argument. If the server modifies the value of the argument, the
client must accept the modified value.</p>
<p>The body of this header contains one or more arguments delimited
by the semicolon character. For this version of QTSS, there is only
one argument, the late-tolerance argument.</p>
<p>The value of the <code>late-tolerance</code> argument
is a positive integer that represents the number of seconds late
that the server can send a media packet and still have it be useful
to the client. The server should use the value of the <code>late-tolerance</code> argument
as a guide for making a best-effort attempt to deliver all media
data so that the delivered data is no older than the late-tolerance
value.</p>
<p>Here is an example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>x-Transport-Options: late-tolerance=30<span></span></pre></td></tr></table></div>
<p>If this example were for a video stream, the server would
send all video frames that are less than 30 seconds old. The server
would drop frames that are more than 30 seconds old because they
are stale.</p>
<p>Caching proxy servers can use the <code>x-Transport-Options</code> header
to prevent the media server from dropping frames or lowering the
stream bit rate in the event it falls behind in sending media data.
If the caching proxy server knows the duration of the media, it
can prevent the server from dropping any frames by setting the <code>late-tolerance</code> argument
to the duration of the media, allowing the cache to receive a complete
copy of the media data.</p>
<p>For a live broadcast, a caching proxy server may want to do
extra buffering to improve quality for its clients. It could use
the <code>x-Transport-Options</code> header
to advertise the length of its buffer to the server.</p>
<a name="//apple_ref/doc/uid/TP30000245-176758" title="RTP Payload Meta-Information"></a><a name="//apple_ref/doc/uid/TP30000245-CJBJJFBB" title="RTP Payload Meta-Information"></a><h3>RTP Payload Meta-Information</h3>
<p>Certain RTP clients, such as caching proxy servers, require
per-packet meta information that goes beyond the sequence number
and timestamp already provided in the RTP header. For instance,
a caching proxy server may want to provide stream thinning to its clients
in case those clients are bandwidth constrained. If that stream
thinning is based on the type of video frame being sent by the originating
server, there is no payload-independent way for the caching proxy
server to determine the frame type.</p>
<p>The RTP payload meta-information solves this deficiency by
including information that RTP clients can use to provide the same
quality of service to clients as the originating server. The following
section, <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-221352">&#8220;RTP Data&#8221;</a></code>, describes the RTP data that the server delivers in
the RTP payload meta-information type.</p>
<a name="//apple_ref/doc/uid/TP30000245-221352" title="RTP Data"></a><a name="//apple_ref/doc/uid/TP30000245-CJBEHGBF" title="RTP Data"></a><h4>RTP Data</h4>
<p>The server uses the RTP payload meta-information type to provide
the following information to the RTP client:</p>
<ul class="spaceabove"><li class="li"><p>Transmission time, described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-176888">&#8220;Transmission Time&#8221;</a></code></p></li>
<li class="li"><p>Frame type, described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-176916">&#8220;Frame Type&#8221;</a></code></p></li>
<li class="li"><p>Packet number, described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-176993">&#8220;Packet Number&#8221;</a></code></p></li>
<li class="li"><p>Packet position, described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177015">&#8220;Packet Position&#8221;</a></code></p></li>
<li class="li"><p>Media data, described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177047">&#8220;Media Data&#8221;</a></code></p></li>
<li class="li"><p>Sequence number, described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177069">&#8220;Sequence Number&#8221;</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-176888" title="Transmission Time"></a><a name="//apple_ref/doc/uid/TP30000245-CJBFCHGJ" title="Transmission Time"></a><h5>Transmission Time</h5>
<p>The server sends the transmission time as a single four-octet
unsigned integer representing the recommended transmission time
of the RTP packet in milliseconds.</p>
<p>The transmission time is always offset from the start of the
media presentation. For example, if the SDP response for a URL includes
a range of 0-729.45 and the client makes a PLAY request with a range
of 100-729.45, the first RTP packet from the server should provide
a transmission time value of approximately 100,000. (It may not
be exactly 100,000 because the server is free to find a frame nearby
the requested time.) If the SDP for a URL does not contain a range,
the client can at least use these values as relative offsets.</p>
<a name="//apple_ref/doc/uid/TP30000245-176916" title="Frame Type"></a><a name="//apple_ref/doc/uid/TP30000245-CJBGCEJE" title="Frame Type"></a><h5>Frame Type</h5>
<p>The server sends the frame type as a single 16-bit unsigned
integer value for which several well-known values representing different
frame types are defined. The well-known values are as follows:</p>
<ul class="spaceabove"><li class="li"><p>0 represents an unknown frame type</p></li>
<li class="li"><p>1 represents a key frame</p></li>
<li class="li"><p>2 represents a b-frame</p></li>
<li class="li"><p>3 represents a p-frame</p></li></ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_24" title="Note"></a><p><strong>Note:</strong>&nbsp;The frame type
is valid for video RTP streams only.</p></div>
<a name="//apple_ref/doc/uid/TP30000245-176993" title="Packet Number"></a><a name="//apple_ref/doc/uid/TP30000245-CJBIEAJA" title="Packet Number"></a><h5>Packet Number</h5>
<p>The server sends the packet number as a single 64-bit unsigned
integer value. The value is the packet number offset from the absolute
start of the stream. For example, if the SDP response for a URL
includes a range of 0-729.45 and the client makes a PLAY request
with a range of 0-729.45, the packet number value of the first packet
will be 0 and will increment by 1 for each subsequent packet. If
there are 1000 packets between in the first 60 seconds of a stream
and a client makes a PLAY request of 60-729.45, the packet number
of the first packet will be 1001 and will increment by 1 for each
subsequent packet.</p>
<a name="//apple_ref/doc/uid/TP30000245-177015" title="Packet Position"></a><a name="//apple_ref/doc/uid/TP30000245-CJBHGCEB" title="Packet Position"></a><h5>Packet Position</h5>
<p>The server sends the packet position as a single 64-bit unsigned
integer value. The value is the byte offset of this packet from
the absolute start of the stream. For example, if the SDP response
for a URL includes a range of 0-729.45 and the client makes a PLAY
request with a range of 100-729.45, the packet position value of
the first video RTP packet will be the total number of bytes of
the video RTP packets between 0 and 100. Only the RTP packet payload
bytes are used to compute each packet position value.</p>
<p>The server cannot provide the packet position for live or
dynamic media. In general, if the media SDP has a range attribute,
the server can provide the packet position.</p>
<a name="//apple_ref/doc/uid/TP30000245-177047" title="Media Data"></a><a name="//apple_ref/doc/uid/TP30000245-CJBEGAFA" title="Media Data"></a><h5>Media Data</h5>
<p>The server sends media data for the underlying RTP protocol.</p>
<a name="//apple_ref/doc/uid/TP30000245-177069" title="Sequence Number"></a><a name="//apple_ref/doc/uid/TP30000245-CJBJAABD" title="Sequence Number"></a><h5>Sequence Number</h5>
<p>The server sends the RTP sequence number as a two-octet value.
The sequence number is useful for mapping RTP meta-information to
the underlying payload data that they refer to, if that data is
being sent out-of-band.</p>
<a name="//apple_ref/doc/uid/TP30000245-177091" title="Standard Format"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF138" title="Standard Format"></a><h4>Standard Format</h4>
<p>The RTP payload meta-information returned by the server consists
of a series of fields. Each field consists of a header and data.
When returned in standard format, the first bit of the header is
zero to indicate that the field is in standard format (that is,
not compressed).</p>
<p>The first bit is followed by the 15-bit Name subfield. The
Name subfield contains two ASCII alphanumeric characters that represent
one of the RTP data types listed in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-221352">&#8220;RTP Data&#8221;</a></code>. The first character
is seven bits long, so the value of the Name subfield must consist
of seven-bit ASCII characters.</p>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177274">Table 2-26</a></code> lists the
Name subfield values for each of the RTP data types.</p><a name="//apple_ref/doc/uid/TP30000245-177274" title="Table 1-26Defined Name subfield values"></a><a name="//apple_ref/doc/uid/TP30000245-CJBGFGBA" title="Table 1-26Defined Name subfield values"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-26&nbsp;&nbsp;</strong>Defined Name subfield values</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>RTP data type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Name subfield value</p></th>
</tr>


<tr>
<td  scope="row"><p>Transmission time</p></td>
<td ><p><code>tt</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Frame type</p></td>
<td ><p><code>ft</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Packet number</p></td>
<td ><p><code>pn</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Packet position</p></td>
<td ><p><code>pp</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Media</p></td>
<td ><p><code>md</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Sequence number</p></td>
<td ><p><code>sn</code></p></td>
</tr>

</table></div>
<p>The Name subfield is followed by a two-octet Length subfield
that contains the full length of the Data subfield.</p>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177357">Figure 2-9</a></code> shows the
format of the Name subfield in standard format.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-177357" title="Figure 1-9Standard RTP payload meta-information format"></a><a name="//apple_ref/doc/uid/TP30000245-CJBCIFCG" title="Figure 1-9Standard RTP payload meta-information format"></a><p><strong>Figure 1-9&nbsp;&nbsp;</strong>Standard RTP payload meta-information
format</p><img src = "../art/qtss07.gif" alt = "" width="323" height="143"></div><br/>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177398">Figure 2-10</a></code> shows the
format of the RTP data in standard format.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-177398" title="Figure 1-10RTP data in standard format"></a><a name="//apple_ref/doc/uid/TP30000245-CJBHAFBA" title="Figure 1-10RTP data in standard format"></a><p><strong>Figure 1-10&nbsp;&nbsp;</strong>RTP data in standard format</p>
<img src = "../art/qtss08.gif" alt = "" width="453" height="543"></div><br/>
<a name="//apple_ref/doc/uid/TP30000245-177432" title="Compressed Format"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF139" title="Compressed Format"></a><h4>Compressed Format</h4>
<p>When the server provides a field of RTP meta-information in
compressed format, the field consists of a header and data. The
first bit of the header is set to one to indicate that the rest of
the header is in compressed format.</p>
<p>The first bit is followed by a seven-bit ID subfield that
identifies the type of data in the Data subfield. The meaning of
the ID subfield is assigned by the server, as described in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177678">&#8220;x-RTP-Meta-Info RTSP Header Negotiation&#8221;</a></code>.</p>
<p>The ID subfield is followed by the one-octet Length subfield
that contains the full length of the Data subfield that follows
the Length subfield.</p>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177496">Figure 2-11</a></code> shows the
format of the ID subfield in compressed format.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-177496" title="Figure 1-11Compressed RTP payload meta-information format"></a><a name="//apple_ref/doc/uid/TP30000245-CJBHDAIF" title="Figure 1-11Compressed RTP payload meta-information format"></a><p><strong>Figure 1-11&nbsp;&nbsp;</strong>Compressed RTP payload meta-information
format</p><img src = "../art/qtss09.gif" alt = "" width="323" height="142"></div><br/>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177566">Figure 2-12</a></code> shows an
RTP payload meta-information packet when some fields are in compressed
format and some fields are in standard format.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-177566" title="Figure 1-12Mixed RTP payload meta-information format"></a><a name="//apple_ref/doc/uid/TP30000245-CJBFHHBA" title="Figure 1-12Mixed RTP payload meta-information format"></a><p><strong>Figure 1-12&nbsp;&nbsp;</strong>Mixed RTP payload meta-information
format</p><img src = "../art/qtss10.gif" alt = "" width="436" height="162"></div><br/>
<a name="//apple_ref/doc/uid/TP30000245-177596" title="Negotiation for Use of Compressed Format"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF140" title="Negotiation for Use of Compressed Format"></a><h4>Negotiation for Use of Compressed Format</h4>
<p>Use of the compressed format requires out-of-band negotiation
between client and server. During the negotiation process, the server
assigns a seven-bit ID for each RTP data type. Instead sending the
name of the RTP data type (for example, <code>ft</code>)
in the RTP payload, only the ID is sent.</p>
<p>Negotiation for using the compressed format can occur in two
ways:</p>
<ul class="spaceabove"><li class="li"><p>Through the x-RTP-Meta-Info RTSP header, described
in the section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177678">&#8220;x-RTP-Meta-Info RTSP Header Negotiation&#8221;</a></code></p></li>
<li class="li"><p>Through the SDP description of the data, described in the
section <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-177785">&#8220;Describing RTP-Meta-Info Payload in SDP&#8221;</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-177678" title="x-RTP-Meta-Info RTSP Header Negotiation"></a><a name="//apple_ref/doc/uid/TP30000245-CJBCEFID" title="x-RTP-Meta-Info RTSP Header Negotiation"></a><h5>x-RTP-Meta-Info RTSP Header Negotiation</h5>
<p>The client can negotiate compression with the server for any
payload by sending an x-RTP-Meta-Info RTSP header to the server
in a SETUP request. If the server does not echo the header in its
SETUP response, the client must assume that the server does not
support this header.</p>
<p>The client&#8217;s SETUP request specifies the RTP data types
the client wants to receive in the specified RTP stream. Here is
an example of a client request:</p>
<div class="codesample"><table><tr><td scope="row"><pre>x-RTP-Meta-Info: to;bi;bo<span></span></pre></td></tr></table></div>
<p>The server&#8217;s response lists the names of the RTP data that
the server will provide for that RTP stream. If the server supports
the compressed format, the response may also contain ID mappings
for some or all of the names. The server may return a subset of
the names if it doesn&#8217;t support all of the requested names, or
if some requested names don&#8217;t apply to the RTP stream specified
by the SETUP request. Here are two examples of a server response:</p>
<div class="codesample"><table><tr><td scope="row"><pre>x-RTP-Meta-Info: to=0;bi;bo=1<span></span></pre></td></tr><tr><td scope="row"><pre>x-RTP-Meta-Info: to;bi<span></span></pre></td></tr></table></div>
<p>In the first response, the server indicates that it will provide
bi data in standard format. The server will send to data in compressed
format and use an ID of 0 to indicate fields that contain to data.
The server will send bo data in compressed format and use an ID
of 1 to indicate fields that contain bo data. Because IDs are represented
by seven bits, an ID must be between 0 and 127.</p>
<p>In the second response, the server indicates that it will
provide to and bi data in standard format.</p>
<a name="//apple_ref/doc/uid/TP30000245-177785" title="Describing RTP-Meta-Info Payload in SDP"></a><a name="//apple_ref/doc/uid/TP30000245-CJBEJGHJ" title="Describing RTP-Meta-Info Payload in SDP"></a><h5>Describing RTP-Meta-Info Payload in SDP</h5>
<p>The originator of RTP-Meta-Info payload packets should describe
the contents of the payload as part of the SDP description of the
media. RTP-Meta-Info descriptions consist of two additional a= headers.</p>
<p>The <code>a=x-embedded-rtpmap</code> header
tells the client the payload type of the underlying RTP payload.</p>
<p>The <code>a=x-RTP-Meta-Info</code> header
tells the client the RTP data types the server will provide. Here
is an example of an SDP description of the RTP-Meta-Info payload:</p>
<div class="codesample"><table><tr><td scope="row"><pre>m=other 5084 RTP/AVP 96<span></span></pre></td></tr><tr><td scope="row"><pre>a=rtpmap:96 x-RTP-Meta-Info<span></span></pre></td></tr><tr><td scope="row"><pre>a=x-embedded-rtpmap:96 x-QT}<span></span></pre></td></tr><tr><td scope="row"><pre>a=x-RTP-Meta-Info: standard;to;bi;bo<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-177892" title="x-Packet-Range RTSP Header"></a><a name="//apple_ref/doc/uid/TP30000245-CJBBGBAE" title="x-Packet-Range RTSP Header"></a><h3>x-Packet-Range RTSP Header</h3>
<p>The x-Packet-Range RTSP header allows the client (typically
a caching proxy server) to specify a range of packets that the server
should retransmit, thereby allowing the client to fill in holes
in its cached copy of the stream. The client should send the x-Packet-Range RTSP
header in a PLAY request in place of the Range header. If the server
does not support this header, it sends the client a &#8220;501 Header
Not Implemented&#8221; response.</p>
<p>The body of this header contains a start and stop packet number
for this PLAY request. The specified packet numbers must be based
on the packet number RTP-Meta-Info field. For information on how
to request packet numbers as part of the RTP stream, see the RTP-Meta-Info
payload format IETF Draft.</p>
<p>The header format consists of two arguments delimited by the
semicolon character. The first argument must be the packet number
range, with the start and stop packet numbers separated by a hyphen
(-). The second argument must be the stream URL to which the specified
packets belong.</p>
<p>The following example requests packet numbers 4551 through
4689 for trackID3:</p>
<div class="codesample"><table><tr><td scope="row"><pre>x-Packet-Range: pn=4551-4689;url=trackID3<span></span></pre></td></tr></table></div>
<p>The stop packet number must be equal to or greater than the
start packet number. Otherwise, the server may return an error or
may not send any media data after the PLAY response.</p>
<a name="//apple_ref/doc/uid/TP30000245-178042" title="Reliable UDP"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF141" title="Reliable UDP"></a><h2>Reliable UDP</h2>
<p>Reliable UDP is a set of quality of service enhancements,
such as congestion control tuning improvements, retransmit, and
thinning server algorithms, that improve the ability to present
a good quality RTP stream to RTP clients even in the presence of
packet loss and network congestion. Reliable UDP&#8217;s congestion
control mechanisms allow streams to behave in a TCP-friendly fashion
without disturbing the real-time nature of the protocol. </p>
<p>To work well with TCP traffic on the Internet, Reliable UDP
uses retransmission and congestion control algorithms similar to
the algorithms used by TCP. Additionally, these algorithms are time-tested
to utilize available bandwidth optimally.</p>
<p>Relibable UDP features include</p>
<ul class="ul"><li class="li"><p>Client acknowledgment of packets sent by the
server to the client</p></li>
<li class="li"><p>Windowing and congestion control so the server does not exceed
the currently available bandwidth</p></li>
<li class="li"><p>Server retransmission to the client in the event of packet
loss</p></li>
<li class="li"><p>Faster than real-time streaming known as &#8220;overbuffering&#8221;</p></li></ul>
<p>Whether a client uses Reliable UDP is determined by the content
of the client&#8217;s RTSP SETUP request.</p>
<a name="//apple_ref/doc/uid/TP30000245-178144" title="Acknowledgment Packets"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF142" title="Acknowledgment Packets"></a><h3>Acknowledgment Packets</h3>
<p>When using Reliable UDP, the server expects to receive an
acknowledgment for each RTP packet it sends. If the server does
not receive an acknowledgment for a packet, it may retransmit the
packet. The client does not need to send an acknowledgment packet
for each RTP packet it receives. Instead, the client can coalesce
acknowledgments for several packets and send them to the server
in a single packet.</p>
<p>The Reliable UDP acknowledgment packet format is a type of
RTCP APP packet. After the standard RTCP APP packet headers, the
payload for an acknowledgment packet consists of an RTP sequence
number followed by a variable length bit mask. The sequence number identifies
the first RTP packet that the client is acknowledging. Each additional
RTP packet being acknowledged is represented by a bit set in the
bitmask. The bit mask is an offset from the specified sequence number,
where the high order bit of the first byte in the mask is one greater
than the sequence number, the second bit is two greater, and so
on. Bit masks must be sent in multiples of four octets. Setting
a bit to 0 in the mask simply means that the client does not wish
to acknowledge this sequence number right now and does not imply a
negative acknowledgment.</p>
<p><code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-178230">Figure 2-13</a></code> shows the
format of the Reliable UDP acknowledgment packet.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-178230" title="Figure 1-13Reliable UDP acknowledgment packet format"></a><a name="//apple_ref/doc/uid/TP30000245-CJBJFFBA" title="Figure 1-13Reliable UDP acknowledgment packet format"></a><p><strong>Figure 1-13&nbsp;&nbsp;</strong>Reliable UDP acknowledgment packet
format</p><img src = "../art/qtss11.gif" alt = "" width="323" height="148"></div><br/>
<a name="//apple_ref/doc/uid/TP30000245-210409" title="RTSP Negotiation"></a><a name="//apple_ref/doc/uid/TP30000245-CJBHBBII" title="RTSP Negotiation"></a><h3>RTSP Negotiation</h3>
<p>Whether to use Reliable UDP is negotiated out of band in RTSP.
If a client wants to use Reliable UDP, it should include an x-Retransmit
header in its RTSP SETUP request. The body of the header contains
the retransmit protocol name (<code>our-retransmit</code>)
followed by a list of arguments delimited by the semicolon character.</p>
<p>Currently, one argument can be passed from the client to the
server: the window argument. If included, the window argument tells
the Reliable UDP server the size of the client&#8217;s window in KBytes.</p>
<p>Here is an example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>x-Retransmit: our-retransmit;window=128<span></span></pre></td></tr></table></div>
<p>The server must echo the header and all parameters. If the
x-Retransmit header is not in the SETUP response, the client must
assume that Reliable UDP will not be used for this stream. If the
server changes the parameter values, the client must use the new
values.</p>
<a name="//apple_ref/doc/uid/TP30000245-181489" title="Tunneling RTSP and RTP Over HTTP"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF143" title="Tunneling RTSP and RTP Over HTTP"></a><h2>Tunneling RTSP and RTP Over HTTP</h2>
<p>Using standard RTSP/RTP, a single TCP connection can be used
to stream a QuickTime presentation to a user. Such a connection
is not sufficient to reach users on private IP networks behind firewalls
where HTTP proxy servers provide clients with indirect access to
the Internet. To reach such clients, QuickTime 4.1 supports the
placement of RTSP and RTP data in HTTP requests and replies. As
a result, viewers behind firewalls can access QuickTime presentations
through HTTP proxy servers.</p>
<p>The QuickTime HTTP transport is built from two separate HTTP
GET and POST method requests initiated by the client. The server
then binds the connections to form a virtual full-duplex connection.
The protocol that forms this type of connection is must meet the following
requirements:</p>
<ul class="ul"><li class="li"><p>Work with unmodified RTSP/RTP packets</p></li>
<li class="li"><p>Be acceptable to HTTP proxy servers</p></li>
<li class="li"><p>Indicate to proxy servers that requests and replies are not
to be cached</p></li>
<li class="li"><p>Work in an environment where the client originates all requests</p></li>
<li class="li"><p>Provide a way to uniquely identify request pairs so that they
can be bound together to form a full-duplex connection</p></li>
<li class="li"><p>Ensure that related requests connect to the same RTSP server
in spite of load-balancing algorithms such as round-robin DNS servers</p></li>
<li class="li"><p>Identify any request as one that will eventually tunnel an
RTSP conversation and RTP data</p></li></ul>
<p>The QuickTime HTTP transport exploits the capability of HTTP&#8217;s
GET and POST methods to carry an indefinite amount of data in their
reply and message body respectively. In the most simple case, the
client makes an HTTP GET request to the server to open the server-to-client
connection. Then the client makes a HTTP POST request to the server
to open the client-to-server connection. The resulting virtual full-duplex
connection (shown in <code><a href="QTSSConcepts.html#//apple_ref/doc/uid/TP30000245-181653">Figure 2-14</a></code>) makes it possible to send unmodified RTSP and RTP data
over the connection.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000245-181653" title="Figure 1-14Required connections for tunneling"></a><a name="//apple_ref/doc/uid/TP30000245-CJBEFCCD" title="Figure 1-14Required connections for tunneling"></a><p><strong>Figure 1-14&nbsp;&nbsp;</strong>Required connections for tunneling</p>
<img src = "../art/qtss13.gif" alt = "" width="285" height="95"></div><br/>
<a name="//apple_ref/doc/uid/TP30000245-182897" title="HTTP Client Request Requirements"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF144" title="HTTP Client Request Requirements"></a><h3>HTTP Client Request Requirements</h3>
<p>To work with the QuickTime HTTP transport, client HTTP requests
must</p>
<ul class="spaceabove"><li class="li"><p>Be made using HTTP version 1.0</p></li>
<li class="li"><p>Include in the header an <code>x-sessioncookie</code> directive
whose value is a globally unique identifier (GUID). The GUID makes
it possible for the server to unambiguously bind the two connections
by passing it as an opaque token to the C library <code>strcmp</code> function</p></li>
<li class="li"><p>In POST requests, the <code>application/x-rtsp-tunneled</code> MIME
type for both the <code>Content-Type</code> and <code>Accept</code> directives
must be specified; this MIME type reflects the data type that is
expected and delivered by the client and server</p></li>
<li class="li"><p>Direct POST requests to the specified IP address if a server&#8217;s
reply to an initial GET request includes the <code>x-server-ip-address</code> directive
and an IP address</p></li></ul>
<p>In addition to these requirements, client HTTP POST request
headers may include other directives in order to help HTTP proxy
servers handle RTSP streams optimally.</p>
<a name="//apple_ref/doc/uid/TP30000245-184309" title="Sample Client GET Request"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF145" title="Sample Client GET Request"></a><h4>Sample Client GET Request</h4>
<p>Here is an example of a client GET request:</p>
<div class="codesample"><table><tr><td scope="row"><pre>GET /sw.mov HTTP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=4.1;cpu=PPC;os=Mac8.6)<span></span></pre></td></tr><tr><td scope="row"><pre>x-sessioncookie: tD9hKgAAfB8ABCftAAAAAw<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-184364" title="Sample Client POST Request"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF146" title="Sample Client POST Request"></a><h4>Sample Client POST Request</h4>
<p>Here is an example of a client POST request:</p>
<div class="codesample"><table><tr><td scope="row"><pre>POST /sw.mov HTTP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=4.1;cpu=PPC;os=Mac8.6)<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/x-rtsp-tunnelled<span></span></pre></td></tr><tr><td scope="row"><pre>Pragma: no-cache<span></span></pre></td></tr><tr><td scope="row"><pre>Cache-Control: no-cache<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Length: 32767<span></span></pre></td></tr><tr><td scope="row"><pre>Expires: Sun, 9 Jan 1972 00:00:00 GMT<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_25" title="Note"></a><p><strong>Note:</strong>&nbsp;The server does
not respond to client POST requests. The client will continue to
send RTSP data as the message body of this POST request.</p></div>
<p>The sample client POST request includes three optional header
directives that are present to control the behavior of HTTP proxy
servers so that they handle RTSP streams optimally:</p>
<ul class="spaceabove"><li class="li"><p>The <code>Pragma: no-cache </code> directive
tells many HTTP 1.0 proxy servers not to cache the transaction.</p></li>
<li class="li"><p>The <code>Cache-Control: no-cache</code> directive
tells many HTTP 1.1 proxy servers not to cache the transaction.</p></li>
<li class="li"><p>The <code>Expires</code> directive
specifies an arbitrary time in the past. This directive is intended to
prevent proxy servers from caching the transaction.</p></li></ul>
<p>HTTP requires that all POST requests have a content-length
header. In the sample client POST request, the content length of
32767 is an arbitrary value. In practice, the actual value seems
to be ignored by proxy servers, so it is possible to send more than
this amount of data in the form of RTSP requests. The QuickTime
Server ignores the content-length header.</p>
<a name="//apple_ref/doc/uid/TP30000245-184575" title="HTTP Server Reply Requirements"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF147" title="HTTP Server Reply Requirements"></a><h3>HTTP Server Reply Requirements</h3>
<p>When the server receives an HTTP GET request from a client,
it must respond with a reply whose header specifies the <code>application/x-rtsp-tunneled</code> MIME
type for both the <code>Content-Type</code> and <code>Accept</code> directives.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000245-DontLinkElementID_26" title="Note"></a><p><strong>Note:</strong>&nbsp;The server must
reply to all client HTTP GET requests but never replies to client
HTTP POST requests.</p></div>
<p>Server reply headers may optionally include the <code>Cache-Control:
no-store</code> and <code>Pragma: no-cache</code> directives
to prevent HTTP proxy servers from caching the transaction. It is recommended
that implementations honor these headers if they are present.</p>
<p>Server clusters are often allocated connections by a round-robin
DNS or other load-balancing algorithm. To insure that client requests
are directed to the same server among potentially several servers
in a server farm, the server may optionally include the <code>x-server-ip-address</code> directive
followed by an IP address in dotted decimal format in the header
of its reply to a client&#8217;s initial GET request. When this directive
is present, the client must direct its POST request to the specified
IP address regardless of the IP address returned by a DNS lookup.</p>
<p>In the absence of an HTTP error, the server reply header contains
&#8220;200 OK&#8221;. An HTTP error in a server reply reflects the inability
of the server to form the virtual full-duplex connection; an HTTP
error does not imply an RTSP error. When an HTTP error occurs, the server
simply closes the connection.</p>
<a name="//apple_ref/doc/uid/TP30000245-185957" title="Sample Server Reply to a GET Request"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF148" title="Sample Server Reply to a GET Request"></a><h4>Sample Server Reply to a GET Request</h4>
<p>Here is an example of a server reply to a GET request:</p>
<div class="codesample"><table><tr><td scope="row"><pre>HTTP/1.0 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>Server: QTSS/2.0 [v101] MacOSX<span></span></pre></td></tr><tr><td scope="row"><pre>Connection: close<span></span></pre></td></tr><tr><td scope="row"><pre>Date: Thu, 19 Aug 1982 18:30:00 GMT<span></span></pre></td></tr><tr><td scope="row"><pre>Cache-Control: no-store<span></span></pre></td></tr><tr><td scope="row"><pre>Pragma: no-cache<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/x-rtsp-tunnelled<span></span></pre></td></tr></table></div>
<p>Including the following header directives in a reply is not
required but is recommended because the directives they tell proxy
servers to behave in a way that allows them to handle RTSP streams
optimally:</p>
<ul class="spaceabove"><li class="li"><p>The <code>Date </code>directive
specifies an arbitrary time in the past. This keeps proxy servers
from caching the transaction.</p></li>
<li class="li"><p>The <code>Cache-Control: no-cache</code> directive
tells many HTTP 1.1 proxy servers not to cache the transaction.</p></li>
<li class="li"><p>The <code> Pragma: no-cache</code> directive
tells many HTTP 1.0 proxy servers not to cache the transaction.</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000245-186124" title="RTSP Request Encoding"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF149" title="RTSP Request Encoding"></a><h3>RTSP Request Encoding</h3>
<p>RTSP requests made by the client on the POST connection must
be encoded using the base64 method. (See RFC 2045 &#8220;Internet Message
Bodies&#8221;, section 6.8, Base64 Content-Transfer-Encoding, and RFC
1421 &#8220;Privacy Enhancements for Electronic Mail,&#8221; section 4.3.2.4,
Printable Encoding.) The base64 encoding prevents HTTP proxy server from
determining that an embodied RTSP request is a malformed HTTP requests.</p>
<p>Here is a sample RTSP request before it is encoded:</p>
<div class="codesample"><table><tr><td scope="row"><pre>DESCRIBE rtsp://tuckru.apple.com/sw.movRTSP/1.0<span></span></pre></td></tr><tr><td scope="row"><pre>CSeq: 1<span></span></pre></td></tr><tr><td scope="row"><pre>Accept: application/sdp<span></span></pre></td></tr><tr><td scope="row"><pre>Bandwidth: 1500000<span></span></pre></td></tr><tr><td scope="row"><pre>Accept-Language: en-US<span></span></pre></td></tr><tr><td scope="row"><pre>User-Agent: QTS (qtver=4.1;cpu=PPC;os=Mac8.6)<span></span></pre></td></tr></table></div>
<p>Here is the same request after encoding:</p>
<div class="codesample"><table><tr><td scope="row"><pre>REVTQ1JJQkUgcnRzcDovL3R1Y2tydS5hcHBsZS5jb20vc3cubW92IFJUU1AvMS4w<span></span></pre></td></tr><tr><td scope="row"><pre>DQpDU2VxOiAxDQpBY2N1cHQ6IGFwcGxpY2F0aW9uL3NkcA0KQmFuZHdpZHRo0iAx<span></span></pre></td></tr><tr><td scope="row"><pre>NTAwMDAwDQpBY2N1cHQtTGFuZ3VhZ2U6IGVuLVVTDQpVc2VyLUFnZW50OiBRVFMg<span></span></pre></td></tr><tr><td scope="row"><pre>KHF0dmVyPTQuMTtjcHU9UFBDO29zPU1hYyA4LjYpDQoNCg==<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000245-211853" title="Connection Maintenance"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF150" title="Connection Maintenance"></a><h3>Connection Maintenance</h3>
<p>The client may close the POST connection at any time. Doing
so frees socket and memory resources at the server that might otherwise
be unused for a long time. In QuickTime HTTP streaming, the best
time to close the POST connection usually occurs after the PLAY request.</p>
<a name="//apple_ref/doc/uid/TP30000245-211830" title="Support For Other HTTP Features"></a><a name="//apple_ref/doc/uid/TP30000245-TPXREF151" title="Support For Other HTTP Features"></a><h3>Support For Other HTTP Features</h3>
<p>Support for HTTP features that are not documented here is
not required in order to implement the tunneling of QuickTime RTSP
and RTP over HTTP. The tunnel should mimic a normal TCP connection
as closely as possible without adding unnecessary features.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Preface/Preface.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Tasks/QTSSTasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-04-29<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/QTSS/Concepts/QTSSConcepts.html%3Fid%3DTP30001143-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/QTSS/Concepts/QTSSConcepts.html%3Fid%3DTP30001143-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/QTSS/Concepts/QTSSConcepts.html%3Fid%3DTP30001143-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<html><head><title>Mac OS X
 Manual Page For read_mib(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/read_mib" title="Mac OS X
 Manual Page for read_mib(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/read_mib"; name=read_mib(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MIB_API(3)                                        Net-SNMP                                        <!-- a -->MIB_API(3)<!-- /a -->



<b>NAME</b>
       init_mib,    add_mibdir,    init_mib_internals,    add_module_replacement,   read_module,   read_mib,
       read_all_mibs,     read_objid,     read_module_node,     get_module_node,      snmp_set_mib_warnings,
       snmp_set_save_descriptions,  shutdown_mib,  print_mib, print_variable, fprint_variable, snprint_vari-<font color="#ffffff" class="whiteout">able,&nbsp;snprint_variable,</font>
       able,  sprint_realloc_variable,  print_value,  fprint_value,   snprint_value,   sprint_realloc_value,
       print_objid, fprint_objid, snprint_objid, sprint_realloc_objid, print_description, fprint_description
       - mib_api functions

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;net-snmp/mib_api.h&gt;</b>

       <b>void</b> <b>init_mib(void);</b>
       <b>int</b> <b>add_mibdir(const</b> <b>char</b> <b>*</b><u>dirname</u><b>);</b>
       <b>int</b> <b>add_module_replacement(const</b> <b>char</b> <b>*</b><u>old</u><b>_</b><u>module</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>new</u><b>_</b><u>module</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>tag</u><b>,</b> <b>int</b> <u>len</u><b>);</b>
       <b>void</b> <b>init_mib_internals(void);</b>
       <b>struct</b> <b>tree</b> <b>*read_module(const</b> <b>char</b> <b>*</b><u>name</u><b>);</b>
       <b>struct</b> <b>tree</b> <b>*read_mib(const</b> <b>char</b> <b>*</b><u>filename</u><b>);</b>
       <b>struct</b> <b>tree</b> <b>*read_all_mibs(void);</b>

       <b>void</b> <b>shutdown_mib(void);</b>

       <b>void</b> <b>print_mib(FILE</b> <b>*</b><u>fp</u><b>);</b>

       <b>int</b> <b>read_objid(const</b> <b>char</b> <b>*</b><u>input</u><b>,</b> <b>oid</b> <b>*</b><u>output</u><b>,</b> <b>size_t</b> <b>*</b><u>out</u><b>_</b><u>len</u><b>);</b>
       <b>int</b> <b>get_module_node(const</b> <b>char</b> <b>*</b><u>name</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>module</u><b>,</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <b>*</b><u>objidlen</u><b>);</b>

       <b>void</b> <b>print_variable(const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>const</b> <b>netsnmp_variable_list</b> <b>*</b><u>variable</u><b>);</b>
       <b>void</b>  <b>fprint_variable(FILE</b> <b>*</b><u>fp</u><b>,</b> <b>const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>const</b> <b>netsnmp_variable_list</b> <b>*</b><u>vari</u>-<font color="#ffffff" class="whiteout">able);&nbsp;*variable);</font>
       <u>able</u><b>);</b>
       <b>int</b> <b>snprint_variable(char</b> <b>*</b><u>buf</u><b>,</b> <b>size_t</b> <u>len</u><b>,</b> <b>const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b>  <u>objidlen</u><b>,</b>  <b>const</b>  <b>netsnmp_vari</b>-<font color="#ffffff" class="whiteout">able_list&nbsp;netsnmp_variable_list</font>
       <b>able_list</b> <b>*</b><u>variable</u><b>);</b>
       <b>int</b>  <b>sprint_realloc_variable(u_char</b> <b>**</b><u>buf</u><b>,</b> <b>size_t</b> <b>*</b><u>buf</u><b>_</b><u>len</u><b>,</b> <b>size_t</b> <b>*</b><u>out</u><b>_</b><u>len</u><b>,</b> <b>int</b> <u>allow</u><b>_</b><u>realloc</u><b>,</b> <b>const</b>
       <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>const</b> <b>netsnmp_variable_list</b> <b>*</b><u>variable</u><b>);</b>

       <b>void</b> <b>print_value(oid</b> <b>*objid,</b> <b>size_t</b> <b>objidlen,</b> <b>const</b> <b>netsnmp_variable_list</b> <b>*variable)</b>
       <b>void</b> <b>fprint_value(FILE</b> <b>*</b><u>fp</u><b>,</b> <b>const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b>  <u>objidlen</u><b>,</b>  <b>const</b>  <b>netsnmp_variable_list</b>  <b>*</b><u>vari</u>-<font color="#ffffff" class="whiteout">able);&nbsp;*variable);</font>
       <u>able</u><b>);</b>
       <b>int</b>  <b>snprint_value(char</b>  <b>*</b><u>buf</u><b>,</b>  <b>size_t</b>  <u>len</u><b>,</b>  <b>const</b>  <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>const</b> <b>netsnmp_vari</b>-<font color="#ffffff" class="whiteout">able_list&nbsp;netsnmp_variable_list</font>
       <b>able_list</b> <b>*</b><u>variable</u><b>);</b>
       <b>int</b> <b>sprint_realloc_value(u_char</b> <b>**</b><u>buf</u><b>,</b> <b>size_t</b> <b>*</b><u>buf</u><b>_</b><u>len</u><b>,</b> <b>size_t</b> <b>*</b><u>out</u><b>_</b><u>len</u><b>,</b> <b>int</b> <u>allow</u><b>_</b><u>realloc</u><b>,</b> <b>const</b> <b>oid</b>
       <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>const</b> <b>netsnmp_variable_list</b> <b>*</b><u>variable</u><b>);</b>

       <b>void</b> <b>print_objid(const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>);</b>
       <b>void</b> <b>fprint_objid(FILE</b> <b>*</b><u>fp</u><b>,</b> <b>const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>);</b>
       <b>int</b> <b>snprint_objid(char</b> <b>*</b><u>buf</u><b>,</b> <b>size_t</b> <u>len</u><b>,</b> <b>const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>);</b>
       <b>int</b> <b>sprint_realloc_objid(u_char</b> <b>**</b><u>buf</u><b>,</b> <b>size_t</b> <b>*</b><u>buf</u><b>_</b><u>len</u><b>,</b> <b>size_t</b> <b>*</b><u>out</u><b>_</b><u>len</u><b>,</b> <b>int</b> <u>allow</u><b>_</b><u>realloc</u><b>,</b> <b>const</b> <b>oid</b>
       <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>);</b>

       <b>void</b> <b>print_description(oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>int</b> <u>width</u><b>);</b>
       <b>void</b> <b>fprint_description(FILE</b> <b>*</b><u>fp</u><b>,</b> <b>const</b> <b>oid</b> <b>*</b><u>objid</u><b>,</b> <b>size_t</b> <u>objidlen</u><b>,</b> <b>int</b> <u>width</u><b>);</b>

       <b>void</b> <b>snmp_set_mib_warnings(int</b> <u>level</u><b>);</b>
       <b>void</b> <b>snmp_set_save_descriptions(int</b> <u>save</u><b>);</b>


<b>DESCRIPTION</b>
       The functions dealing with MIB modules fall into four groups.  Those dealing with initialisation  and
       shutdown,  those that read in and parse MIB files, those that search the MIB tree, and various output
       routines.

   <b>Initialisation</b> <b>and</b> <b>Shutdown</b>
       <b>init_mib</b> is a convenience function that handles all calls to <b>add_mibdir</b>, <b>read_module</b> and <b>read_mib</b> for
       standard applications.  It should be called before any other routine that manipulates or accesses the
       MIB tree.  This routine sets up various internal structures, as well as reading in  the  default  MIB
       modules, as detailed below.

       <b>add_mibdir</b> is used to define the range of directory locations which are searched for files containing
       MIB modules (one module per file).  By default, this will be set to the directory <u>/usr/share/mibs</u> but
       this  can  be  overridden  by setting the environment variable <u>MIBDIRS</u> to a (colon-separated) list of
       directories to search.  Note that this does not actually load the MIB modules located in that  direc-<font color="#ffffff" class="whiteout">tory,&nbsp;directory,</font>
       tory,  but  is an initialisation step to make them available.  This function returns a count of files
       found in the directory, or a -1 if there is an error.

       <b>init_mib_internals</b> sets up the internal structures, preparatory to reading in MIB modules.  It should
       be  called  after all calls to <b>add_mibdir</b>, and before and calls to <b>read_module</b>.  This is called auto-<font color="#ffffff" class="whiteout">matically&nbsp;automatically</font>
       matically if <b>init_mib</b> is used.

       <b>shutdown_mib</b> will clear the information that was gathered by  <b>read_module</b>,  <b>add_mibdir</b>  and  <b>add_mod</b>-<font color="#ffffff" class="whiteout">ule_replacement.&nbsp;add_module_replacement.</font>
       <b>ule_replacement</b>.   It  is  strongly recommended that one does not invoke <b>shutdown_mib</b> while there are
       SNMP sessions being actively managed.

   <b>Reading</b> <b>and</b> <b>Parsing</b> <b>MIBs</b>
       <b>add_module_replacement</b> can be used to allow new MIB modules to obsolete older ones,  without  needing
       to  amend  the  imports  clauses  of  other  modules.  It takes the names of the old and new modules,
       together with an indication of which portions of the old module are affected.

              <b>tag</b>      <b>len</b>       <b>load</b> <b>the</b> <b>new</b> <b>module</b> <b>when:</b>
              NULL     0         always (the old module is a strict subset of the new)
              name     0         for the given tag only
              name     non-0     for any identifier with this prefix
       It can also be used to handle errors in the module identifiers used in MIB import  clauses  (such  as
       referring to <u>RFC1213</u> instead of <u>RFC1213-MIB</u>).

       <b>read_module</b>  locates and parses the module specified, together with any modules that it imports from,
       and adds the contents of these modules to the active MIB tree.  Note that <b>add_mibdir</b>  must  first  be
       called  to  add  the  directory containing the file with the module definition, if this is not in the
       standard path.
       By default, the following MIB modules will be loaded:  IP-MIB, IF-MIB, TCP-MIB, UDP-MIB,  SNMPv2-MIB,
       RFC1213-MIB,  UCD-SNMP-MIB.   This  can  be  overridden by setting the environment variable <u>MIBS</u> to a
       (colon-separated) list of modules to load.  If this variable starts with a plus character,  then  the
       specified  modules  are  added  to  the default list.  Otherwise only those modules listed are loaded
       (together with any others they import from).  If <u>MIBS</u> is set to <u>ALL</u>, <b>read_all_mibs</b> is called to  load
       all the MIB files found in all the specified <u>MIBDIRS</u>.

       <b>read_mib</b> parses the file specified, together with any modules that it imports from, and adds the con-<font color="#ffffff" class="whiteout">tents&nbsp;contents</font>
       tents to the active MIB tree.  Such a file can contain more then one  module,  though  care  must  be
       taken  that any imports occur earlier in the file, if they are not to be read from the installed mod-<font color="#ffffff" class="whiteout">ules.&nbsp;modules.</font>
       ules.  Note that the file specified does not need to be in any  of  the  directories  initialised  by
       <b>add_mibdir</b> (or the default setup), though any imported modules do.
       The  environment variable <u>MIBFILES</u> can be set to a (colon-separated) list of files containing MIBs to
       load.

       <b>read_objid</b> takes a string containing a textual version of an object identifier (in either numeric  or
       descriptor  form),  and  transforms  this  into  the  corresponding list of sub-identifiers.  This is
       returned in the <u>output</u> parameter, with the number of  sub-identifiers  returned  via  <u>out</u><b>_</b><u>len</u>.   When
       called, <u>out</u><b>_</b><u>len</u> must hold the maximum length of the <u>output</u> array.  This function returns a value of 1
       if it succeeds in parsing the string and 0 otherwise.

   <b>Searching</b> <b>the</b> <b>MIB</b> <b>Tree</b>
       <b>get_module_node</b> takes a descriptor and the name of a module, and returns the corresponding oid  list,
       in the same way as <b>read_objid</b> above.
       If  the module name is specified as "ANY", then this routine will assume that the descriptor given is
       unique within the tree, and will return the matching entry.  If this assumption is invalid, then  the
       behaviour as to which variable is returned is implementation dependent.

   <b>Output</b>
       <b>print_mib</b>  will  print  out  a  representation of the currently active MIB tree to the specified FILE
       pointer.

       <b>print_variable</b> will take an object identifier (as returned by <b>read_objid</b> or <b>get_module_node</b>)  and  an
       instance of such a variable, and prints to the standard output the textual form of the object identi-<font color="#ffffff" class="whiteout">fier&nbsp;identifier</font>
       fier together with the value of the variable.  <b>fprint_variable</b> does the same, but prints to the  FILE
       pointer specified by the initial parameter.
       <b>snprint_variable</b> prints the same information into the buffer pointed to by <u>buf</u> which is of length <u>len</u>
       and returns either the number of characters printed, or -1 if the buffer was not  large  enough.   In
       the latter case, <u>buf</u> will typically contained a truncated version of the information (but this behav-<font color="#ffffff" class="whiteout">iour&nbsp;behaviour</font>
       iour is not guaranteed).  This function replaces the obsolete function <b>sprint_variable</b>.
       <b>sprint_realloc_variable</b> is the low-level function used to implement all these functions.   It  prints
       to  a  specified  offset  in  a string buffer.  The <u>buf</u> parameter points to a pointer to that buffer;
       <u>buf</u><b>_</b><u>len</u> points to a variable holding the current size of that buffer, and <u>out</u><b>_</b><u>len</u> points to  a  vari-<font color="#ffffff" class="whiteout">able&nbsp;variable</font>
       able holding the offset to which to print.  <u>out</u><b>_</b><u>len</u> will be updated to hold the offset of the charac-<font color="#ffffff" class="whiteout">ter&nbsp;character</font>
       ter following the last one added to the buffer.  If <u>allow</u><b>_</b><u>realloc</u> is 1, the buffer  will  be  dynami-<font color="#ffffff" class="whiteout">cally&nbsp;dynamically</font>
       cally expanded, as necessary, to hold the output; the variables pointed to by <u>buf</u> and <u>buf</u><b>_</b><u>len</u> will be
       updated.  If <u>allow</u><b>_</b><u>realloc</u> is 0, the buffer will not be dynamically  expanded.   <b>sprint_realloc_vari</b>-<font color="#ffffff" class="whiteout">able&nbsp;sprint_realloc_variable</font>
       <b>able</b> returns 0 if <u>allow</u><b>_</b><u>realloc</u> is 1 and an attempt to allocate memory to expand the buffer fails, or
       if <u>allow</u><b>_</b><u>realloc</u> is 0 and the output wouldn't fit in the buffer.  Otherwise it returns 1.  When using
       this function you should be careful to call <a href="free.3.html#//apple_ref/doc/man/3/free"><b>free</b>(3)</a> on <u>*buf</u> when you have finished with it.

       <b>print_value</b>,  <b>fprint_value</b>,  <b>snprint_value</b>  and  <b>sprint_realloc_value</b>  do  the same as the equivalent
       <b>print_variable</b> routines, but only displaying the value of the  variable,  without  the  corresponding
       object identifier.

       <b>print_objid</b>, <b>fprint_objid</b>, <b>snprint_objid</b>, and <b>sprint_realloc_objid</b> take an object identifier (without
       an accompanying variable instance) and print out the textual representation.

       <b>print_description</b> and <b>fprint_description</b> take an object identifier (as  for  <b>print_objid</b>  above)  and
       print out the associated DESCRIPTION clause. The <u>width</u> argument gives the number of subidentifiers of
       an OID, e.g., .1.3.6 is composed of 3 subidentifiers.

       Note that there are no corresponding routines <b>snprint_description</b> or <b>sprint_realloc_description</b>.   By
       default  the  parser does not save descriptions since they may be huge.  In order to be able to print
       them, you must call <!-- a --><b>snmp_set_save_descriptions(1)</b><!-- /a --><b></b>.

       In general the parser is silent about what strangenesses it sees in the MIB files.  To  get  warnings
       reported, call <b>snmp_set_mib_warnings</b> with a <u>level</u> of 1 (or 2 for even more warnings).

<b>ENVIRONMENT</b> <b>VARIABLES</b>
       MIBDIRS   A   colon   separated   list   of   directories   to  search  for  MIB  modules.   Default:
                 /usr/share/snmp/mibs

       MIBFILES  A colon separated list of files to load.  Default: (none)

       MIBS      A colon separated  list  of  MIB  modules  to  load.   Default:  IP-MIB:IF-MIB:TCP-MIB:UDP-<font color="#ffffff" class="whiteout">MIB:SNMPv2-MIB:RFC1213-MIB:UCD-SNMP-MIB.&nbsp;IP-MIB:IF-MIB:TCP-MIB:UDPMIB:SNMPv2-MIB:RFC1213-MIB:UCD-SNMP-MIB.</font>
                 MIB:SNMPv2-MIB:RFC1213-MIB:UCD-SNMP-MIB.

<b>SEE</b> <b>ALSO</b>
       <a href="snmp_api.3.html#//apple_ref/doc/man/3/snmp_api"><b>snmp_api</b>(3)</a>



4.2 Berkeley Distribution                        06 Mar 2002                                      <!-- a -->MIB_API(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/read_mib.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/read_mib.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/read_mib.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

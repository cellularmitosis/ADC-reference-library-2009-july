<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Event Codes</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING100></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-99.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-101.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-97.html"><B>Chapter 21 - Providers Reference</B></A> / <A HREF="NetworkingWOT-98.html"><B>Constants and Data Types</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING100-0></A>
<H2><A NAME=MARKER-9-22></A>Event Codes</H2>
 Your application can include a notifier function that the provider calls to inform you that some provider event has occurred. The provider passes an event code for the function's <CODE>code</CODE> parameter. The event code specifies which provider event has occurred. The provider can also pass information using the <CODE>result</CODE> and <CODE>cookie</CODE> parameters to the notifier function. Normally, if the provider calls your notifier because an asynchronous function has completed, the <CODE>result</CODE> parameter contains the result code for the function and the <CODE>cookie</CODE> parameter contains additional information whose meaning varies with the function called. For example, if you call the <CODE>OTAsyncOpenEndpoint</CODE> function, the <CODE>cookie</CODE> parameter would contain the endpoint reference for the endpoint provider you just opened. <A NAME=MARKER-13-23></A><P>
 Most of the codes specified by the event codes enumeration are used by endpoint providers and relate to the use of endpoint functions. See <A HREF=NetworkingWOT-28.html#MARKER-9-98>"Handling Events for Endpoints"</A> for more information. <P>
 The constant names that the provider can use for the event code are given by the following enumeration:<P>
<PRE>
<A NAME=MARKER-0-95></A>enum {
   T_LISTEN                  = (OTEventCode)0x0001,
   T_CONNECT                 = (OTEventCode)0x0002,
   T_DATA                    = (OTEventCode)0x0004,
   T_EXDATA                  = (OTEventCode)0x0008,
   T_DISCONNECT              = (OTEventCode)0x0010,
   T_ERROR                   = (OTEventCode)0x0020,
   T_UDERR                   = (OTEventCode)0x0040,
   T_ORDREL                  = (OTEventCode)0x0080,
   T_GODATA                  = (OTEventCode)0x0100,
   T_GOEXDATA                = (OTEventCode)0x0200,
   T_REQUEST                 = (OTEventCode)0x0400,
   T_REPLY                   = (OTEventCode)0x0800,
   T_PASSCON                 = (OTEventCode)0x1000,
   T_RESET                   = (OTEventCode)0x2000,
   T_BINDCOMPLETE            = (OTEventCode)0x20000001,
   T_UNBINDCOMPLETE          = (OTEventCode)0x20000002,
   T_ACCEPTCOMPLETE          = (OTEventCode)0x20000003,
   T_REPLYCOMPLETE           = (OTEventCode)0x20000004,
   T_DISCONNECTCOMPLETE      = (OTEventCode)0x20000005,
   T_OPTMGMTCOMPLETE         = (OTEventCode)0x20000006,
   T_OPENCOMPLETE            = (OTEventCode)0x20000007,
   T_GETPROTADDRCOMPLETE     = (OTEventCode)0x20000008,
   T_RESOLVEADDRCOMPLETE     = (OTEventCode)0x20000009,
   T_GETINFOCOMPLETE         = (OTEventCode)0x2000000A,
   T_SYNCCOMPLETE            = (OTEventCode)0x2000000B,
   T_MEMORYRELEASED          = (OTEventCode)0x2000000C,
   T_REGNAMECOMPLETE         = (OTEventCode)0x2000000D,
   T_DELNAMECOMPLETE         = (OTEventCode)0x2000000E,
   T_LKUPNAMECOMPLETE        = (OTEventCode)0x2000000F,
   T_LKUPNAMERESULT          = (OTEventCode)0x20000010,
   kOTProviderIsDisconnected = (OTEventCode)0x23000001,
   kOTSyncIdleEvent
   kOTProviderIsReconnected  = (OTEventCode)0x23000002.
   kOTProviderWillClose      = (OTEventCode)0x24000001,
   kOTProviderIsClosed       = (OTEventCode)0x24000002,
};
</PRE>
<B>Constant descriptions</B><P>
<DL>
<DT><CODE><A NAME=MARKER-13-25></A>T_LISTEN</CODE>
<DD> A connection request has arrived. Call the <CODE>OTListen</CODE> function to read the request.
<DT><CODE>T_CONNECT</CODE>
<DD> The passive peer has accepted a connection that you requested using the <CODE>OTConnect</CODE> function. Call the <CODE>OTRcvConnect</CODE> function to retrieve any data or option information that the passive peer has specified when accepting the connection or to retrieve the address to which you are actually connected. The <CODE>cookie</CODE> parameter to the notifier function is the <CODE>sndCall</CODE> parameter that you specified when calling the <CODE>OTConnect</CODE> function. <A NAME=MARKER-13-26></A>
<DT><CODE>T_DATA</CODE>
<DD> Normal data has arrived. Depending on the type of service of the endpoint you are using, you can call the <CODE>OTRcvUData</CODE> function or the <CODE>OTRcv</CODE> function to read it. Continue reading data until the function returns with the <CODE>kOTNoDataErr</CODE> result; you will not get another indication that data has arrived until you have read all the data and got this error.
<DT><CODE>T_ERROR</CODE>
<DD> Obsolete.<A NAME=MARKER-13-27></A>
<DT><CODE>T_EXDATA</CODE>
<DD> Expedited data has arrived. Use the <CODE>OTRcv</CODE> function to read it. Continue reading data by calling the <CODE>OTRcv</CODE> function until the function returns with the <CODE>kOTNoDataErr</CODE> result; you will not get another indication that data has arrived until you have read all the data and got this error.<A NAME=MARKER-13-28></A>
<DT><CODE>T_DISCONNECT</CODE>
<DD> A connection has been torn down or rejected. Use the <CODE>OTRcvDisconnect</CODE> function to clear the event. 
<DT>
<DD> If the event is used to signify that a connection has been terminated, the <CODE>cookie </CODE>parameter to the notifier is <CODE>NULL</CODE>.<A NAME=MARKER-13-29></A>
<DT>
<DD> If the event indicates a rejected connection request, the <CODE>cookie</CODE> parameter to the notification routine is the same as the <CODE>sndCall</CODE> parameter that you passed to the <CODE>OTConnect</CODE> function<CODE>.</CODE>
<DT><CODE>T_UDERR </CODE>
<DD> The provider was not able to send the data you specified using the <CODE>OTSndUData</CODE> function even though the function returned successfully. You must call the <CODE>OTRcvUDErr</CODE> function to clear this event and determine why the function failed. <A NAME=MARKER-13-30></A>
<DT><CODE>T_ORDREL</CODE>
<DD> The remote client has called the <CODE>OTSndOrderlyDisconnect</CODE> function to initiate an orderly disconnect. You must call the <CODE>OTRcvOrderlyDisconnect</CODE> function to acknowledge receiving the event.<A NAME=MARKER-13-31></A>
<DT><CODE>T_GODATA</CODE>
<DD> Flow-control restrictions have been lifted. You can now send normal data.<A NAME=MARKER-13-32></A>
<DT><CODE>T_GOEXDATA</CODE>
<DD> Flow-control restrictions have been lifted. You can now send expedited data<CODE>.<A NAME=MARKER-13-33></A></CODE>
<DT><CODE>T_REQUEST</CODE>
<DD> A request has arrived. Depending on the type of service for the endpoint you are using, you can call the <CODE>OTRcvRequest</CODE> function or the <CODE>OTRcvURequest</CODE> function to receive it. You must continue to call the function until it returns with the <CODE>kOTNoDataErr</CODE> result. <CODE><A NAME=MARKER-13-34></A></CODE>
<DT><CODE>T_REPLY</CODE>
<DD> A response to a request has arrived. Depending on the type of service of the endpoint you are using, you can call the <CODE>OTRcvReply </CODE>function or <CODE>OTRcvUReply</CODE> function to receive it. You must continue to call the function until it returns with the <CODE>kOTNoDataErr </CODE>result.<CODE><A NAME=MARKER-13-35></A></CODE>
<DT><CODE>T_PASSCON </CODE>
<DD> When the <CODE>OTAccept</CODE> function completes, the endpoint provider passes this event to the endpoint receiving the connection (whether that endpoint is the same as or different from the endpoint that calls the <CODE>OTAccept</CODE> function). The <CODE>cookie</CODE> parameter contains the <CODE>resRef</CODE> parameter to the <CODE>OTAccept</CODE> function.<A NAME=MARKER-13-36></A>
<DT><CODE>T_RESET </CODE>
<DD> A connection-oriented endpoint has received a reset from the remote end and has flushed all unread and unsent data. This only occurs for some types of endpoints, and it generally leaves the endpoint in an unknown state.<A NAME=MARKER-13-37></A>
<DT><CODE>T_BINDCOMPLETE</CODE>
<DD> The <CODE>OTBind</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>retAddr</CODE> parameter of the bind call.
<DT><CODE>T_UNBINDCOMPLETE</CODE>
<DD> The <CODE>OTUnbind</CODE> function has completed. The <CODE>cookie</CODE> parameter is meaningless.<A NAME=MARKER-13-38></A>
<DT><CODE>T_ACCEPTCOMPLETE</CODE>
<DD> The <CODE>OTAccept</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>resRef</CODE> parameter to the <CODE>OTAccept</CODE> function. <A NAME=MARKER-13-39></A>
<DT><CODE>T_REPLYCOMPLETE</CODE>
<DD> The <CODE>OTSndUReply</CODE> or <CODE>OTSndReply</CODE> functions have completed. The <CODE>cookie</CODE> parameter contains the sequence number used in the <CODE>OTSndUReply</CODE> or <CODE>OTSndReply</CODE> call. <A NAME=MARKER-13-40></A>
<DT><CODE>T_DISCONNECTCOMPLETE</CODE>
<DD> The <CODE>OTSndDisconnect</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the call parameter of the <CODE>OTSndDisconnect</CODE> function.<A NAME=MARKER-13-41></A>
<DT><CODE>T_OPTMGMTCOMPLETE</CODE>
<DD> The <CODE>OTOptionManagement</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>ret</CODE> parameter that you passed to the function. <A NAME=MARKER-13-42></A>
<DT><CODE>T_OPENCOMPLETE</CODE>
<DD> An asynchronous call to open a provider has completed. The <CODE>cookie</CODE> parameter contains the provider reference.<A NAME=MARKER-13-1></A>
<DT><CODE>T_GETPROTADDRCOMPLETE </CODE>
<DD> The <CODE>OTGetProtAddress</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>peerAddr</CODE> parameter that you passed to the <CODE>OTGetProtocolAddress</CODE> function. If you passed <CODE>NULL</CODE> for that parameter, the cookie parameter contains the address passed in the <CODE>boundAddr</CODE> parameter.<A NAME=MARKER-13-44></A>
<DT><CODE>T_RESOLVEADDRCOMPLETE</CODE> 
<DD> The <CODE>OTResolveAddress</CODE> function has completed. The cookie parameter contains the <CODE>retAddr</CODE> parameter of the <CODE>OTResolveAddress</CODE> function.<A NAME=MARKER-13-45></A>
<DT><CODE>T_GETINFOCOMPLETE</CODE> 
<DD> The <CODE>OTGetEndpointInfo</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>info</CODE> parameter of the <CODE>OTGetEndpointInfo</CODE> function.<A NAME=MARKER-13-46></A>
<DT><CODE>T_SYNCCOMPLETE</CODE>
<DD> The <CODE>OTSync</CODE> function has completed. The <CODE>cookie</CODE> parameter is meaningless.<A NAME=MARKER-13-47></A>
<DT><CODE>T_MEMORYRELEASED</CODE>
<DD> <A NAME=MARKER-13-48></A>You are using an asynchronous endpoint that acknowledges sends and Open Transport is done using the buffers containing the data you are sending. If you called the <CODE>OTSnd</CODE> function, the <CODE>cookie</CODE> parameter contains the <CODE>buf</CODE> parameter. If you called the <CODE>OTSndUData</CODE> function, the <CODE>cookie</CODE> parameter contains the <CODE>udata</CODE> parameter. The <CODE>result</CODE> parameter contains the number of bytes that were sent. This might be less than the number you meant to send due to flow-control or memory restrictions.
<DT>
<DD> You should not wait for the <CODE>T_MEMORYRELEASED</CODE> event from a previous send operation to trigger more sends. The exact time this event occurs depends on how the underlying provider is implemented. It might hold on to memory until the next send occurs, or behave in some other way which causes it to delay releasing memory.
<DT>
<DD> Note that <CODE>T_MEMORYRELEASED</CODE> events can reenter your notifier. See <A HREF=NetworkingWOT-114.html#MARKER-9-102>"OTAckSends"</A> for more information.
<DT><CODE>T_REGNAMECOMPLETE</CODE>
<DD> The <CODE>OTRegisterName</CODE> function has completed. The <CODE>cookie</CODE> parameter is the <CODE>reply</CODE> parameter, unless it was <CODE>NULL</CODE>. In this case, it is the <CODE>req </CODE>parameter.<A NAME=MARKER-13-49></A>
<DT><CODE>T_DELNAMECOMPLETE</CODE> 
<DD> The <CODE>OTDeleteName</CODE> function or the <CODE>OTDeleteNameByID</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>name</CODE> parameter or the <CODE>nameId</CODE> parameter of the function, respectively. <A NAME=MARKER-13-50></A>
<DT><CODE>T_LKUPNAMECOMPLETE</CODE>
<DD> The <CODE>OTLookupName</CODE> function has completed. The <CODE>cookie</CODE> parameter contains the <CODE>reply</CODE> parameter of the <CODE>OTLookUpName</CODE> function.<A NAME=MARKER-13-51></A>
<DT><CODE>T_LKUPNAMERESULT</CODE>
<DD> An <CODE>OTLookupName</CODE> function has found a name and is returning it, but the lookup is not yet complete. The <CODE>cookie</CODE> parameter contains the <CODE>reply</CODE> parameter passed to the <CODE>OTLookupName</CODE> function.<A NAME=MARKER-13-52></A>
<DT><CODE>kOTSyncIdleEvent</CODE>
<DD> A synchronous call is waiting to complete. Call the function <CODE>YieldToAnyThread</CODE> from your notifier to allow other concurrent processes to obtain processing time. See <A HREF=NetworkingWOT-30.html#MARKER-9-22>"Using Synchronous Processing With Threads"</A> for more information.
<DT><CODE><A NAME=MARKER-13-53></A>kOTProviderIsDisconnected</CODE>
<DD> Your provider was bound with a <CODE>qlen</CODE> parameter value greater than 0 and it has been disconnected (is no longer listening). You receive this event after a port has accepted a request to temporarily yield ownership of a port to another provider, which causes this provider to be disconnected from the port in question. This currently only happens with serial ports, but could also happen with other connection-oriented drivers that have characteristics similar to serial ports. You get a <CODE>kOTProviderIsReconnected</CODE> message when the port reverts back to this provider's ownership again.
<DT><CODE><A NAME=MARKER-13-54></A>kOTProviderIsReconnected</CODE>
<DD> Your provider has been reconnected, that is, the cause for its disconnection has been relieved. 
<DT><CODE>kOTProviderWillClose</CODE>
<DD> When you return from the notifier function, Open Transport will close the provider whose reference is contained in the <CODE>cookie</CODE> parameter. The <CODE>result</CODE> parameter contains a result code specifying the reason why the provider had to close. For example, the user decided to switch links using the TCP/IP or AppleTalk control panel. The result codes that can be returned are in the range -3280 through -3285; these are documented in <A HREF=NetworkingWOT-479.html#MARKER-9-72>"Result Codes"</A>.<A NAME=MARKER-13-55></A>
<DT>
<DD> You can only get this event at system task time. Consequently, you are allowed to set the endpoint to synchronous mode (from within the notifier function) and call functions synchronously before you return from the notifier, at which point the provider is closed. After this, any calls other than <CODE>OTCloseProvider</CODE> will fail with a <CODE>kOTOutStateErr</CODE>.
<DT><CODE>kOTProviderIsClosed</CODE>
<DD> The provider has closed. The reason for being closed can be found in the <CODE>OTResult</CODE> value passed to your notifier.  The reasons typically are <CODE>kOTPortHasDiedErr</CODE>, <CODE>kOTPortWasEjectedErr</CODE>, or <CODE>kOTPortLostConnectionErr</CODE>.  At this point, any calls other than <CODE>OTCloseProvider</CODE> will fail with a <CODE>kOTOutStateErr</CODE>. <A NAME=MARKER-13-54></A><A NAME=MARKER-13-57></A><A NAME=MARKER-13-58></A>
</DL>
</BLOCKQUOTE><HR>
<center>
<A HREF="NetworkingWOT-99.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-101.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

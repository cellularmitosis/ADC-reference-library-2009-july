<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Message Header Structure  (GameSprockets)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" ="A" NAME="HEADING250"></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GameSprockets-249.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-251.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GameSprockets-2.html"><B>Apple Game Sprockets Guide</B></A> / <BR><DD><A HREF="GameSprockets-229.html"><B>Chapter 4 - NetSprocket</B></A> / <A HREF="GameSprockets-232.html"><B>NetSprocket Reference</B></A><BR><DL><DD><A HREF="GameSprockets-240.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING250-0"></A>
<H3>Message Header Structure </H3>
 The most important structure in NetSprocket is the abstract message type. It is comprised of the <CODE>NSpMessageHeader</CODE> itself and is followed by custom data. The <A NAME="MARKER-2-86"></A>message header structure contains information about the nature of the message being delivered. The message header structure is defined by the NSpMessageHeader data type.<P>
 The fields of the message header are used by NetSprocket to deliver your message to the specified recipients. Before you send a network message, you should fill in the <CODE>what</CODE>, <CODE>to</CODE>, and <CODE>messageLen</CODE> parameters. NetSprocket will set the remaining parameters.<P>
<PRE>
typedef struct NSpMessageHeader {
   UInt32                     version;
   SInt32                     what;
   NSpPlayerID                from;
   NSpPlayerID                to;
   UInt32                     id;
   UInt32                     when;
   UInt32                     messageLen;
} NSpMessageHeader;
</PRE>
<B>Field descriptions</B><P>
<DL>
<DT>version
<DD>  Private version information for NetSprocket. Do not modify or rely upon any data in this field.
<DT>what
<DD>  A constant describing the network message type. You should set this field with the constants defined in NetSprocket or a network message type that you have defined in your application.
<DT>from
<DD>  A read-only parameter, which NetSprocket sets to the player ID of the sender.
<DT>to
<DD>  The ID of the intended recipient. Set this value to the ID of the intended player, the group ID of the intended group of recipients, <CODE>kNSpAllPlayers</CODE> to send it to every player in the game, or <CODE>kNSpServerOnly</CODE> to send it to the server.
<DT>id
<DD>  This is a read-only parameter. The NetSprocket library will assign a unique ID to each message emanating from a given player. Thus, the <CODE>from</CODE> and <CODE>id</CODE> parameters make up a unique message identifier. This allows you to identify duplicate messages.
<DT>when
<DD>  This is a read-only parameter. NetSprocket will place a time stamp in milliseconds here when the message is sent from its originator. When you receive a message, you can compare this field against the value returned by the <CODE>NSpGetCurrentTimeStamp</CODE> function to find out how long ago the message was sent. This value is only a relative value and is accurate only to about 30 to 60 milliseconds.
<DT>messageLen
<DD>  Set this field to the size of your entire message structure (as specified in the <CODE>sizeof</CODE> parameter), including the header and any data that follows the header.
<DT><B>Note</B>
<DD>Apple reserves all messages that have a negative value (anything with the high bit set to 1). You can define your own custom message types (for example, keyboard state, voice transmission, or game map).<EM></EM>  <IMG ALIGN="BOTTOM" SRC="graphics/triangle.gif">
</DL>

</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="GameSprockets-249.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-251.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="GameSprockets-3.html">&copy; Apple Computer, Inc.</A><BR>2 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

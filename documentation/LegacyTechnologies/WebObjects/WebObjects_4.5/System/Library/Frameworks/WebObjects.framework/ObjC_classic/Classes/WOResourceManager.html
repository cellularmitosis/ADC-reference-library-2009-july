<HTML>		<HEAD>		<TITLE>			WOResourceManager		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!-- #include virtual="/techpubs/navbar" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>WebObjects Reference</font><br><br><!--end of path --><a href="../WebObjectsTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <a name = "WOResourceManager"><BR><h1><FONT COLOR=\"#000066\"><a name="//apple_ref/occ/cl/WOResourceManager">WOResourceManager</a></FONT></h1><br></a><blockquote><b>Inheritsfrom: </b> NSObject</blockquote><blockquote><b>Conforms to: </b> NSObject<BR>(NSObject)</blockquote><blockquote><b>Declared in: </b> WebObjects/WOResourceManager.h<BR></blockquote><br><br><HR SIZE=4><br><h2>Class Description</h2><hr><p>WOResourceManager manages an application's resources. Itdefines methods that retrieve resources from standard directories.Each WebObjects application contains a resource manager object,which you can access by sending  <a frame= "conv" href="WOApplication.html#//apple_ref/occ/instm/WOApplication/resourceManager">resourceManager</a> to the WOApplicationclass  </p><br><br><br><h2>Adopted Protocols</h2><hr><blockquote>NSLocking<dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/lock">- lock</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/unlock">- unlock</a></dd></blockquote><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Retrieving resources</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/pathForResourceNamed:inFramework:languages:">- pathForResourceNamed:inFramework:languages:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/urlForResourceNamed:inFramework:languages:request:">- urlForResourceNamed:inFramework:languages:request:</a></dd></dl><dl><dt>Retrieving localizedstrings</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/stringForKey:inTableNamed:withDefaultValue:inFramework:languages:">- stringForKey:inTableNamed:withDefaultValue:inFramework:languages:</a></dd></dl><dl><dt>Managing the application-widedata cache</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/flushDataCache">- flushDataCache</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/removeDataForKey:session:">- removeDataForKey:session:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/setData:forKey:mimeType:session:">- setData:forKey:mimeType:session:</a></dd></dl></blockquote><BR><BR><h2>Instance Methods</h2><hr><a name = "flushDataCache"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/flushDataCache">flushDataCache</a></h3></a><p><code>- (void)<b>flushDataCache</b></code></p>Removes all data from the image data cache.Use this method if you are storing data in the application-widecache that you no longer need.<p>Access to the WOResourceManagerobject is locked at the beginning of this method and unlocked at theend.</p><p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/removeDataForKey:session:">- removeDataForKey:session:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/setData:forKey:mimeType:session:">- setData:forKey:mimeType:session:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "lock"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/lock">lock</a></h3></a><p><code>- (void)<b>lock</b></code></p>Locks access to the WOResourceManager object.When the WOResourceManager is locked, no other threads may accessit. <p>Usually, you don't need to invoke this method in yourown code. All messages that you send to a WOResourceManager objectlock access to the object at the beginning of the method and unlockaccess at the end. You only need to use this method if you'resubclassing WOResourceManager. In that case, you should lock accessto the WOResourceManager object in methods that load resources. </p><p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/unlock">- unlock</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "pathForResourceNamed_inFramework_languages_"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/pathForResourceNamed:inFramework:languages:">pathForResourceNamed:inFramework:languages:</a></h3></a><p><code>- (NSString *)<b>pathForResourceNamed:</b>(NSString*)<em>aResourceFile</em><b>inFramework:</b>(NSString *)<em>aFrameworkName</em><b>languages:</b>(NSArray *)<em>languagesList</em></code></p>Returns the absolute path for the resource <em>aResourceFile</em>.Include the file's extension when specifying <em>aResourceFile</em>.If the file is in the application, specify nil for the frameworkargument.  <p>This method always returns a path like <b>/Local/Library/WebObjects/Applications/MyApp.woa/WebServerResources/MyResource</b>.It does not return the path relative to the HTTP server's documentroot unless the entire application is located in the document root. </p><p>Accessto the WOResourceManager object is locked at the beginning of thismethod and unlocked at the end.</p><p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/urlForResourceNamed:inFramework:languages:request:">- urlForResourceNamed:inFramework:languages:request:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "removeDataForKey_session_"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/removeDataForKey:session:">removeDataForKey:session:</a></h3></a><p><code>- (void)<b>removeDataForKey:</b>(NSString*)<em>key</em><b>session:</b>(WOSession *)<em>aSession</em></code></p>Removes the data stored in the data cache underthe key key. The session argument is currently ignored; specify nil tohave WOResourceManager use the application-wide cache.<p>Thismethod is used by default when a dynamic element requests an imageor embedded object from a database and the <b>key</b> attributeis not set for that dynamic element. If the <b>key</b> attributeisn't set, the data retrieved from the database is stored in thecache using  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/setData:forKey:mimeType:session:">setData:forKey:mimeType:session:</a>,sent to the dynamic element, and then removed from the cache using <b>removeDataForKey:session:</b>.If the <b>key</b> attribute is set, <b>removeDataForKey:session:</b> isnot invoked. </p><p>You rarely need to invoke this methodyourself. Use it only if you need to limit the amount of memory yourapplication uses, if your application has data stored in the cache,and you know that the data is no longer needed. </p><p>Accessto the WOResourceManager object is locked at the beginning of thismethod and unlocked at the end.</p><p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/flushDataCache">- flushDataCache</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "setData_mimeType_key_session_"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/setData:forKey:mimeType:session:">setData:forKey:mimeType:session:</a></h3></a><p><code>- (void)<b>setData:</b>(NSData*)<em>someData</em><b>forKey:</b>(NSString *)<em>key</em><b>mimeType:</b>(NSString *)<em>type</em><b>session:</b>(WOSession *)<em>aSession</em></code></p>Adds the image or embbedded object someDataof MIME type type to the data cache for the session specify by aSession.The data is stored under the key key. The session argument is currentlyignored; specify nil to have WOResourceManager use the application-widecache.<p>This method is invoked any time a dynamic element requestsan image or embedded object from a database. You rarely need toinvoke it yourself. </p><p>By default when a dynamic elementrequests an image from the database, WOResourceManager fetches theimage, stores it in the cache using <b>setData:forKey:mimeType:session:</b>,sends it to the dynamic element, and then removes it from the cacheusing  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/removeDataForKey:session:">removeDataForKey:session:</a>. However,if the dynamic element has a <b>key</b> attributedefined, then the image is stored in the database under that key,and it is not removed from the database. </p><p>Access tothe WOResourceManager object is locked at the beginning of thismethod and unlocked at the end.</p><p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/flushDataCache">- flushDataCache</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "stringForKey_inTableNamed_withDefaultValue_languages_"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/stringForKey:inTableNamed:withDefaultValue:inFramework:languages:">stringForKey:inTableNamed:withDefaultValue:inFramework:languages:</a></h3></a><p><code>- (NSString *)<b>stringForKey:</b>(NSString*)<em>aKey</em><b>inTableNamed:</b>(NSString *)<em>aTableName</em><b>withDefaultValue:</b>(NSString *)<em>aDefaultValue</em><b>inFramework:</b>(NSString *)<em>aFrameworkName</em><b>languages:</b>(NSArray *)<em>languagesList</em></code></p>Returns a localized string from string table <em>aTable</em><b>.strings</b> using <em>aKey</em> tolook it up. If no string value for the key is found in the table, <em>aDefaultValue</em> (optional)is returned. The method first searches the <em>aTable</em><b>.strings</b> file,if it exists, in each of the localized (<b>.lproj</b>)subdirectories of the application wrapper; searching proceeds inthe order specified by the array <em>languagesList</em>.If no string value matching the key is found, the search then continuesto the <em>aTable</em><b>.strings</b> file(if it exists) directly under the Resources directory (inside thedirectory with the <b>.woa</b> extension). <hr WIDTH=25% ALIGN=LEFT><a name = "unlock"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/unlock">unlock</a></h3></a><p><code>- (void)<b>unlock</b></code></p>Removes the lock on the WOResourceManager object,allowing other threads to access it.<p>Usually, you don't needto invoke this method in your own code. All messages that you sendto a WOResourceManager object lock access to the object at the beginningof the method and unlock access at the end. You only need to usethis method if you're subclassing WOResourceManager. In that case, youshould lock access to the WOResourceManager object in methods thatload resources and unlock when the method is finished accessingthe WOResourceManager object. </p><p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/lock">- lock</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "urlForResourceNamed_inFramework_languages_request_"><BR><h3><a name="//apple_ref/occ/instm/WOResourceManager/urlForResourceNamed:inFramework:languages:request:">urlForResourceNamed:inFramework:languages:request:</a></h3></a><p><code>- (NSString *)<b>urlForResourceNamed:</b>(NSString*)<em>aResourceFile</em><b>inFramework:</b>(NSString *)<em>aFrameworkName</em><b>languages:</b>(NSArray *)<em>languagesList</em><b>request:</b>(WORequest *)<em>aRequest</em></code></p>Returns the URL associated with a resource named <em>aResourceFile</em>.The URL returned is of the following form:  <p><b>WebObjects/MyApp.woa/WebServerResources/English.lproj/</b><em>aResourceFile</em></p><p>Includethe file's extension when specifying <em>aResourceFile</em>.If the file is in the application, specify nil for the frameworkargument.  </p><p>This method locates resources under theapplication or framework. The URL returned is computed by concatenatingthe application's base URL (returned by WOApplication's  <a frame= "conv" href="WOApplication.html#//apple_ref/occ/instm/WOApplication/baseURL">baseURL</a> method and settable usingthe WOApplicationBaseURL user default) and the relative path ofthe resource. This method does not check to see if the file is actuallyunder the document root. For example, if your application is installedin <b>/Local/Library/WebObjects/Applications</b>,and the method finds <em>aResourceFile</em> inthe <b>Resources</b> directory, it returns: </p><p><b>/WebObjects/MyApp.woa/Resources/</b><em>aResourceFile</em></p><p>eventhough the <b>Resources</b> directory is not underthe document root. </p><p>Access to the WOResourceManagerobject is locked at the beginning of this method and unlocked at theend.</p><p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/WOResourceManager/pathForResourceNamed:inFramework:languages:">- pathForResourceNamed:inFramework:languages:</a></p><hr WIDTH=25% ALIGN=LEFT><BR><br><a href="../WebObjectsTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note FL15: Blessed Folder : A How-To Guide</title><meta name="keywords" content="Mac OS 8 Files Blessed Folder directory ID PBSetVInfo"><meta name="Description" content="Technical Note FL15: This Technical Note describes a methodfor blessing a folder. A Blessed Folder is a folder thatcontains both the System file and the Finder. Technote alsodetails how to get the System icon to quickly change onceyou've blessed a folder.">                                                                             <meta name="categories" content="Files"><meta name="week-posted" content="Dec 30, 1985 - Jan 3, 1986"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002441" title="Blessed Folder : A How-To Guide"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxFileManagement-date.html" target="_blank">Carbon > File Management</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note FL15</div>
<div id="pageheadsub">Blessed Folder : A How-To Guide</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext">                   <A HREF="#Section1">Blessing a Folder</a><BR><BR>                   <A HREF="#References">References</A><BR>                  <BR>                <A HREF="#changes">Change History</A><BR>                  <BR>                  <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note describes how to determine which folder on an HFS volume isthe blessed folder, that is, the folder that contains both the System file and the Finder.</p><CENTER><TABLE BORDER=0 WIDTH=275><TR><td bgcolor="#E6E6E6" align=left><P id = "introtext"><B>Note:</B><BR>The following information may be effected by future changes tosystem software. If you choose to use this information, you must do so atyour own risk.</P></TD></TR></TABLE></CENTER><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Jan 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content -->          <P><A NAME=Section1></A></P><a name="Section1"></a><h2>Blessing a Folder</h2><p>The way to bless a folder is by taking the longword which is the directory ID of the blessed folder and putting it into the Master Directory Block (MDB). This can be accomplished by using the HFS call <code>PBSetVInfo</code>.  You should not attempt to change this block directly.  First call <code>PBHGetVInfo</code> and set <code>ioVFnderInfo</code>[1]  to the directory ID of the new folder to be blessed.  Then call <code>PBSetVInfo</code> to save this information. Once you have done this, you will find that the Finder takes a little while to realize that you have blessed the folder. Therefore, the icon will take a little while to change. Exactly how long you will have to wait to see the new icon is unknown.</p><p>Forcing the icon to change sooner is not a difficult task. The best way for youto see the icon change more quickly is to change the modification date of thedirectory into which you are copying the new System Folder. Doing this willcause the Finder to reexamine the window and its contents. When the Findernotices that the volume's modification date has changed, it begins scanning forchanges in all the open folders. This scanning process takes place about onceevery 10 seconds. You can change the last modification date for that volume andthe System Folder's directory ID for that volume using <code>PBSetVInfo</code>.Changing the file's <code>FndrInfo</code> or renaming the file does not change themodification date. When you call <code>PBSetVInfo</code> you will need to put theSystem Folder's directory ID in the longword at <code>ioVfndrInfo</code>. Thislongword will be the first four bytes of this directory ID. (As usual, whenever you make a change to a field of a structure you need to first do a <code>PBGetCatInfo</code>, change what you are going to change, and then do <code>PBSetCatInfo</code>. This ensures that you change only the portion of the volume that you intended, in this case a longword, and not the whole structure.)</p><P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><p>Master Directory Block:  <cite>Inside Macintosh</cite> Volume IV on page 166.</p><P><A HREF="#top">Back to top</A></P><a name="changes"></a><h2>Change History</h2><TABLE BORDER=0 CELLPADDING=3 WIDTH=544>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-Jan-1988</P>               </TD>               <td align="left">                  <P>The information about how to find the "Blessed Folder" has been deleted from this technical note.  The <code>FindFolder</code> function can now be used to find the "Blessed Folder" and is documented in Inside Macintosh Volume VI, pages 9-42 to 9-44.   This note now includes information about how to bless a folder to the new system folder.</P>               </TD></tr></table><BR><P><A HREF="#top">Back to top</A></P>   <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (size in bytes,                  size in K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/fl_15.pdf">Download</A></P>               </TD>            </TR>            </table>            <BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/fl/fl_15.html%3Fid%3DDTS10002441-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/fl/fl_15.html%3Fid%3DDTS10002441-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/fl/fl_15.html%3Fid%3DDTS10002441-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center></BODY></HTML>
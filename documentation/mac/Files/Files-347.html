<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Maintaining Alias Records (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING347></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-346.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-348.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-340.html"><B>Chapter 4 - Alias Manager</B></A> / <A HREF="Files-344.html"><B>Using the Alias Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING347-0></A>
<H2>Maintaining Alias Records</H2>
 You can store alias records as resources of type <CODE>'alis'</CODE>.<A NAME=MARKER-9-64></A><A NAME=MARKER-2-80></A><A NAME=MARKER-2-81></A><P>
<PRE>
CONST
   rAliasType = 'alis'; {resource type for saved alias records}
</PRE>
 To store and retrieve resources, use the standard Resource Manager functions (<CODE>AddResource</CODE>, <CODE>GetResource</CODE>, and <CODE>GetNamedResource</CODE>) described in the chapter "Resource Manager" in <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I>. <A HREF=#MARKER-9-82>Listing 4-2</A> illustrates one way to save an alias record as a resource in a document file's resource fork.<P>
<B>Listing 4-2  <A NAME=MARKER-9-82></A>Storing an alias record as a resource</B><P>
<PRE>
FUNCTION DoSaveAlias (myDoc: FSSpec; myAliasHdl: AliasHandle): OSErr;
VAR
   myErr: OSErr;
   myFile: Integer;           {file ref number of document's resource fork}
CONST
   kID = 129;
   kName = 'Dictionary Alias';
BEGIN
   myFile := FSpOpenResFile(myDoc, fsCurPerm);
   IF myFile = -1 THEN        {couldn't open the document's resource fork}
      BEGIN
         DoSaveAlias := ResError;
         exit(DoSaveAlias);
      END;
   AddResource(Handle(myAliasHdl), rAliasType, kID, kName);
   myErr := ResError;         {check for errors adding resource}
   IF myErr = noErr THEN
      BEGIN
         WriteResource(Handle(myAliasHdl));
         myErr := ResError;   {check for errors writing resource}
      END;
   DoSaveAlias := myErr;
END;
</PRE>
 Note that <CODE>DoSaveAlias</CODE> assumes that the file specified by the <CODE>myDoc</CODE> parameter already has a resource fork and that the file is not yet open. Your application might have different requirements.<A NAME=MARKER-2-83></A><P>
 To update an alias record, use the <CODE>UpdateAlias</CODE> function. You typically call <CODE>UpdateAlias</CODE> any time you know that the target of an alias record has been renamed <BR>or otherwise changed. You are most likely to call <CODE>UpdateAlias</CODE> after a call to the <CODE>MatchAlias</CODE> function. If <CODE>MatchAlias</CODE> identifies a single target, it sets a flag telling <BR>you whether or not the key information about the target file matches the information in the alias record. It is the responsibility of your application to update the record.<A NAME=MARKER-2-84></A><A NAME=MARKER-2-90></A><P>
 The <CODE>ResolveAlias</CODE> function automatically updates an alias record if any of the key information about the identified target does not match the information in the record.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Files-346.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-348.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

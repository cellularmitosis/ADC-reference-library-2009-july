<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE>Updating Viewer Data</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=3370"> </A>Updating Viewer Data</H1><P CLASS="T1.Text1"><A NAME="pgfId=3371"> </A>The 3D&nbsp;Viewer provides routines that you can use to update the file or memory copy of the 3D data displayed in a viewer.</P><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3372"> </A>Q3ViewerWriteFile</H2><P CLASS="T1.Text1"><A NAME="pgfId=3373"> </A><A NAME="marker=719"> </A>You can use the <TT CLASS="cv">Q3ViewerWriteFile</TT> function to update the file data being displayed in a viewer.</P><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=6866"> </A>MAC OS VERSION</H3><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12741"> </A>OSErr Q3ViewerWriteFile (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ViewerObject&nbsp;&nbsp;&nbsp;&nbsp;theViewer,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refNum);<BR></CODE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=7017"> </A>WINDOWS VERSION</H3><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12745"> </A>TQ3Status Q3WinViewerWriteFile (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ViewerObject    viewer,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HANDLE             fileHandle);<BR></CODE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=7227"> </A>PARAMETERS</H3><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12749"> </A><TT CLASS="cv">theViewer</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3375"> </A>A viewer object.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12758"> </A><TT CLASS="cv">refnum</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=7725"> </A>The file reference number of an open file.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12767"> </A>fileHandle</DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=7727"> </A>A handle to an open file.</DD></DL COMPACT></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3377"> </A>DESCRIPTION</H3><P CLASS="T1.Text1"><A NAME="pgfId=3378"> </A>The <TT CLASS="cv">Q3ViewerWriteFile</TT> function writes the 3D data currently associated with the viewer object specified by the <TT CLASS="cv">theViewer</TT> parameter in 3DMF format to the file specified by the <TT CLASS="cv">refnum</TT> parameter. If the <TT CLASS="cv">kQ3ViewerOutputTextMode</TT> flag has been set, the 3DMF data is written out in text mode; otherwise, it is written out in binary mode.</P><P CLASS="Note"><A NAME="pgfId=5080"> </A>If the camera viewpoint has been modified, a new camera is added to the 3D metafile data's view hints. </P></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3379"> </A>Q3ViewerWriteData</H2><P CLASS="T1.Text1"><A NAME="pgfId=3380"> </A><A NAME="marker=728"> </A>You can use the <TT CLASS="cv">Q3ViewerWriteData</TT> function to update the memory data being displayed in a viewer.</P><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=7025"> </A>MAC OS VERSION</H3><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12778"> </A>unsigned long Q3ViewerWriteData (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ViewerObject&nbsp;&nbsp;&nbsp;&nbsp;theViewer,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**data);<BR></CODE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=7020"> </A>WINDOWS VERSION</H3><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12782"> </A>TQ3Status Q3WinViewerWriteData (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ViewerObject    viewer,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void               *data,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long      dataSize,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long      *actualDataSize );<BR></CODE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=7229"> </A>PARAMETERS</H3><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12786"> </A><TT CLASS="cv">theViewer</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3382"> </A>A viewer object.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12795"> </A><TT CLASS="cv">data</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3383"> </A>On exit, a pointer to the beginning of a block of 3DMF data that describes the model currently displayed in the specified viewer object. This block of memory is allocated by the 3D&nbsp;Viewer and is automatically disposed of when your application destroys its last viewer object.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12804"> </A>dataSize</DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=7762"> </A>On entry, an unsigned long integer that specifies the size, in bytes, of the buffer pointed to by the data parameter.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=12813"> </A>actualDataSize</DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=7763"> </A> 	On exit, a pointer to a long integer that is set to the number of bytes actually copied into the buffer.</DD></DL COMPACT></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3384"> </A>DESCRIPTION</H3><P CLASS="T1.Text1"><A NAME="pgfId=5135"> </A>The <TT CLASS="cv">Q3ViewerWriteData</TT> function allocates a block of memory large enough to hold a 3DMF description of the model currently displayed in the viewer object specified by the <TT CLASS="cv">theViewer</TT> parameter, writes that description into the block of memory, and returns the address of that block of memory in the <TT CLASS="cv">data</TT> parameter. The Mac&nbsp;OS version of <TT CLASS="cv">Q3ViewerWriteData</TT> returns, as its function result, the size (in bytes) of that block of memory.</P><P CLASS="T1.Text1"><A NAME="pgfId=7779"> </A>If the <TT CLASS="cv">kQ3ViewerOutputTextMode</TT> flag has been set, the 3DMF data is written out in text mode; otherwise, it is written out in binary mode.</P><P CLASS="Note"><A NAME="pgfId=5140"> </A>If the camera viewpoint has been modified, a new camera is added to the 3DMF data's view hints. </P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=5114"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T1.Text1"><A NAME="pgfId=5148"> </A>The block of memory that contains the 3D data is allocated by the 3D&nbsp;Viewer and must not be disposed of by your application. You should copy the 3D data into your own storage if you will need to access it after all viewer objects created by your application have been destroyed.</P></DIV></DIV><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
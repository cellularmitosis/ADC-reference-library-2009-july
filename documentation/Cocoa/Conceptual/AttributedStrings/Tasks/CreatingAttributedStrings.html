<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Attributed Strings Programming Guide: Creating Attributed Strings in Cocoa</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating Attributed Strings in Cocoa"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000714" title="Creating Attributed Strings in Cocoa"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">Attributed Strings Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/AttrStrings.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AccessingAttrs.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000714-BBCCGGCC" title="Creating Attributed Strings in Cocoa"></a><hr /><H1>Creating Attributed Strings in Cocoa</H1>

<p>You create an <code>NSAttributedString</code> object in a number of different ways:</p><ul class="ul"><li class="li"><p>You can create a new string with the <code>initWithString:</code><a name="//apple_ref/doc/uid/20000714-DontLinkElementID_62"></a>, <code>initWithString:attributes:</code><a name="//apple_ref/doc/uid/20000714-DontLinkElementID_63"></a>, or <code>initWithAttributedString:</code><a name="//apple_ref/doc/uid/20000714-DontLinkElementID_64"></a> method. These methods initialize an attributed string<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_65"></a> with data you provide, as illustrated in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSFont *font = [NSFont fontWithName:@"Palatino-Roman" size:14.0];<span></span></pre></td></tr><tr><td scope="row"><pre>NSDictionary *attrsDictionary =<span></span></pre></td></tr><tr><td scope="row"><pre>        [NSDictionary dictionaryWithObject:font<span></span></pre></td></tr><tr><td scope="row"><pre>                                    forKey:NSFontAttributeName];<span></span></pre></td></tr><tr><td scope="row"><pre>NSAttributedString *attrString =<span></span></pre></td></tr><tr><td scope="row"><pre>    [[NSAttributedString alloc] initWithString:@"strigil"<span></span></pre></td></tr><tr><td scope="row"><pre>            attributes:attrsDictionary];<span></span></pre></td></tr></table></div><p>For a list of attributes provided by the Application Kit framework see the Constants section in <span class="content_text"><a href="../../../Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000167" target="_top">NSAttributedString Additions</a></span>. </p><p>The attribute values<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_66"></a> assigned to an attributed string become the property of that string, and should not be modified “behind the attributed string” by other objects. Doing so can render inconsistent the attributed string’s internal state. Always use <code>NSMutableAttributedString</code>’s <code><a href="../../../Reference/Foundation/Classes/NSMutableAttributedString_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableAttributedString/setAttributes:range:" target="_top">setAttributes:range:</a></code><a name="//apple_ref/doc/uid/20000714-DontLinkElementID_67"></a> and related methods to change attribute values. See <span class="content_text"><a href="ChangingAttrStrings.html#//apple_ref/doc/uid/20000162-BBCBGCDG">“Changing an Attributed String”</a></span> for more details.</p></li><li class="li"><p> You can can create an attributed string from rich text<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_68"></a> (RTF) or rich text with attachments (RTFD) data using the initialization methods, <code>initWithRTF:documentAttributes:<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_69"></a></code>, <code>initWithRTFD:documentAttributes:<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_70"></a></code>, and <code>initWithRTFDFileWrapper:documentAttributes:<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_71"></a></code>, as illustrated in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSData *rtfData = ...;  // assume rtfData is an NSData object containing valid RTF data<span></span></pre></td></tr><tr><td scope="row"><pre>NSDictionary *docAttributes;<span></span></pre></td></tr><tr><td scope="row"><pre>NSSize paperSize;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSAttributedString *attrString;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>if ((attrString = [[NSAttributedString alloc]<span></span></pre></td></tr><tr><td scope="row"><pre>        initWithRTF: data documentAttributes: &amp;docAttributes])) {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSValue *value = [docAttrs objectForKey:@"PaperSize"];<span></span></pre></td></tr><tr><td scope="row"><pre>    paperSize = [value sizeValue];<span></span></pre></td></tr><tr><td scope="row"><pre>    // implementation continues...<span></span></pre></td></tr></table></div></li><li class="li"><p>You can can create an attributed string from HTML<a name="//apple_ref/doc/uid/20000714-DontLinkElementID_72"></a> data using the initialization methods <code>initWithHTML:documentAttributes:</code><a name="//apple_ref/doc/uid/20000714-DontLinkElementID_73"></a> and <code>initWithHTML:baseURL:documentAttributes:</code><a name="//apple_ref/doc/uid/20000714-DontLinkElementID_74"></a>. The methods return text attributes defined by the HTML as the attributes of the string. They return document-level attributes defined by the HTML, such as paper and margin sizes, by reference to an <code>NSDictionary</code> object, as described in <span class="content_text"><a href="RTFAndAttrStrings.html#//apple_ref/doc/uid/20000164-BBCBJIBC">“RTF Files and Attributed Strings.”</a></span> The methods translate HTML as well as possible into structures of the Cocoa text system, but the Application Kit does not provide complete, true rendering of arbitrary HTML.</p></li></ul>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/AttrStrings.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AccessingAttrs.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 1997, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-06-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/AttributedStrings/Tasks/CreatingAttributedStrings.html%3Fid%3D10000036i-5.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/AttributedStrings/Tasks/CreatingAttributedStrings.html%3Fid%3D10000036i-5.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/AttributedStrings/Tasks/CreatingAttributedStrings.html%3Fid%3D10000036i-5.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

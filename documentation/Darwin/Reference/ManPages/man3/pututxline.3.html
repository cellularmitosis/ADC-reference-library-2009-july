<html><head><title>Mac OS X
 Manual Page For pututxline(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/pututxline" title="Mac OS X
 Manual Page for pututxline(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/pututxline"; name=pututxline(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
ENDUTXENT(3)             BSD Library Functions Manual             <!-- a -->ENDUTXENT(3)<!-- /a -->

<b>NAME</b>
     <b>endutxent</b>, <b>getutxent</b>, <b>getutxid</b>, <b>getutxline</b>, <b>pututxline</b>, <b>setutxent</b> -- user accounting database functions

<b>LIBRARY</b>
     Standard C Library (libc, -lc)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;utmpx.h&gt;</b>

     <u>void</u>
     <b>endutxent</b>(<u>void</u>);

     <u>struct</u> <u>utmpx</u> <u>*</u>
     <b>getutxent</b>(<u>void</u>);

     <u>struct</u> <u>utmpx</u> <u>*</u>
     <b>getutxid</b>(<u>const</u> <u>struct</u> <u>utmpx</u> <u>*id</u>);

     <u>struct</u> <u>utmpx</u> <u>*</u>
     <b>getutxline</b>(<u>const</u> <u>struct</u> <u>utmpx</u> <u>*line</u>);

     <u>struct</u> <u>utmpx</u> <u>*</u>
     <b>pututxline</b>(<u>const</u> <u>struct</u> <u>utmpx</u> <u>*utx</u>);

     <u>void</u>
     <b>setutxent</b>(<u>void</u>);

<b>DESCRIPTION</b>
     These functions provide access to the <a href="../man5/utmpx.5.html#//apple_ref/doc/man/5/utmpx">utmpx(5)</a> user accounting database.

     <b>getutxent</b>() reads the next entry from the database; if the database was not yet open, it also opens it.
     <b>setutxent</b>() resets the database, so that the next <b>getutxent</b>() call will get the first entry.
     <b>endutxent</b>() closes the database.

     <b>getutxid</b>() returns the next entry of the type specified in its argument's <u>ut</u><b>_</b><u>type</u> field, or NULL if
     none is found.  <b>getutxline</b>() returns the next LOGIN_PROCESS or USER_PROCESS entry which has the same
     name as specified in the <u>ut</u><b>_</b><u>line</u> field, or NULL if no match is found.

     <b>pututxline</b>() adds the argument <a href="../man5/utmpx.5.html#//apple_ref/doc/man/5/utmpx">utmpx(5)</a> entry line to the accounting database, replacing a previous
     entry for the same user if it exists.  Only the superuser may write to the accounting database.

   <b>The</b> <b>utmpx</b> <b>structure</b>
     The <b>utmpx</b> structure has the following definition:

     struct utmpx {
             char ut_user[_UTX_USERSIZE];    /* login name */
             char ut_id[_UTX_IDSIZE];        /* id */
             char ut_line[_UTX_LINESIZE];    /* tty name */
             pid_t ut_pid;                   /* process id creating the entry */
             short ut_type;                  /* type of this entry */
             struct timeval ut_tv;           /* time entry was created */
             char ut_host[_UTX_HOSTSIZE];    /* host name */
             __uint32_t ut_pad[16];          /* reserved for future use */
     };

     Valid entries for <u>ut</u><b>_</b><u>type</u> are:
           BOOT_TIME        Time of a system boot.
           DEAD_PROCESS     A session leader exited.
           EMPTY            No valid user accounting information.
           INIT_PROCESS     A process spawned by <!-- a -->init(8)<!-- /a -->.
           LOGIN_PROCESS    The session leader of a logged-in user.
           NEW_TIME         Time after system clock change.
           OLD_TIME         Time before system clock change.
           RUN_LVL          Run level.  Provided for compatibility, not used.
           USER_PROCESS     A user process.
           SHUTDOWN_TIME    Time of system shutdown (extension to the standards).

     For each value of <u>ut</u><b>_</b><u>type</u>, the other fields with meaningful values are as follows:
           BOOT_TIME        <u>ut</u><b>_</b><u>tv</u>
           DEAD_PROCESS     <u>ut</u><b>_</b><u>id</u>, <u>ut</u><b>_</b><u>pid</u>, <u>ut</u><b>_</b><u>tv</u>
           EMPTY            (no others)
           INIT_PROCESS     <u>ut</u><b>_</b><u>id</u>, <u>ut</u><b>_</b><u>pid</u>, <u>ut</u><b>_</b><u>tv</u>
           LOGIN_PROCESS    <u>ut</u><b>_</b><u>id</u>, <u>ut</u><b>_</b><u>user</u> (implementation-defined name of the login process), <u>ut</u><b>_</b><u>pid</u>, <u>ut</u><b>_</b><u>tv</u>
           NEW_TIME         <u>ut</u><b>_</b><u>tv</u>
           OLD_TIME         <u>ut</u><b>_</b><u>tv</u>
           RUN_LVL          (no used)
           USER_PROCESS     <u>ut</u><b>_</b><u>id</u>, <u>ut</u><b>_</b><u>user</u> (login name of the user), <u>ut</u><b>_</b><u>line</u>, <u>ut</u><b>_</b><u>pid</u>, <u>ut</u><b>_</b><u>host</u> (hostname of
                            remote user) <u>ut</u><b>_</b><u>tv</u>
           SHUTDOWN_TIME    <u>ut</u><b>_</b><u>tv</u>

   <b>Other</b> <b>extensions</b> <b>to</b> <b>the</b> <b>standards</b>
     The <u>ut</u><b>_</b><u>tv</u> value may also be OR-ed with the following masks:
           UTMPX_AUTOFILL_MASK
                 Depending on the <u>ut</u><b>_</b><u>type</u> value, other fields are automatically filled in (as specified in
                 the meaningful fields table above).  In particular, the <u>ut</u><b>_</b><u>id</u> field will be set using the
                 convention of the last four characters of the <u>ut</u><b>_</b><u>line</u> field (itself filled in automatically
                 from the tty name of the device connected to the standard input, output or error, whichever
                 is available).  Note that it is more efficient to fill in as many values as are already
                 available beforehand, rather than have then automatically filled in.
           UTMPX_DEAD_IF_CORRESPONDING_MASK
                 When <u>ut</u><b>_</b><u>type</u> value is DEAD_PROCESS, a call to <b>pututxline</b>() will succeed only if a corre-<font color="#ffffff" class="whiteout">sponding&nbsp;corresponding</font>
                 sponding entry already exists with a <u>ut</u><b>_</b><u>type</u> value of USER_PROCESS.

     Note that the above mask values do not show up in any file format, or in any subsequent reads of the
     data.

     To support <u>wtmpx</u> and <u>lastlogx</u> equivalent capability, <b>pututxline</b>() automatically writes to the appropri-<font color="#ffffff" class="whiteout">ate&nbsp;appropriate</font>
     ate files.  Additional APIs to read these files is available in <!-- a -->endutxent_wtmp(3)<!-- /a --> and <a href="getlastlogx.3.html#//apple_ref/doc/man/3/getlastlogx">getlastlogx(3)</a>.

   <b>Backward</b> <b>compatibility</b>
     Successful calls to <b>pututxline</b>() will automatically write equivalent entries into the <u>utmp</u>, <u>wtmp</u> and
     <u>lastlog</u> files.  Programs that read these old files should work as expected.  However, directly writing
     to these files does not make corresponding entries in <u>utmpx</u> and the <u>wtmpx</u> and <u>lastlogx</u> equivalent
     files, so such write-access is deprecated.

<b>RETURN</b> <b>VALUES</b>
     <b>getutxent</b>() returns the next entry, or NULL on failure (end of database or problems reading from the
     database).  <b>getutxid</b>() and <b>getutxline</b>() return the matching structure on success, or NULL if no match
     was found.

     <b>pututxline</b>() returns the structure that was successfully written, or NULL is returned and the global
     variable <u>errno</u> is set to indicate the error.

<b>ERRORS</b>
     No errors are defined for the <b>endutxent</b>(), <b>getutxent</b>(), <b>getutxid</b>(), <b>getutxline</b>(), and <b>setutxent</b>() func-<font color="#ffffff" class="whiteout">tions.&nbsp;functions.</font>
     tions.

     The <b>pututxline</b>() function may fail if:

     [EPERM]            The process does not have appropriate privileges.

     [EINVAL]           The UTMPX_DEAD_IF_CORRESPONDING_MASK flags was specified along with DEAD_PROCESS,
                        but no corresponding entry with USER_PROCESS was found.

     Other errors may be returned if UTMPX_AUTOFILL_MASK was specified, and a field could not be auto-<font color="#ffffff" class="whiteout">filled.&nbsp;autofilled.</font>
     filled.

<b>SEE</b> <b>ALSO</b>
     <!-- a -->endutxent_wtmp(3)<!-- /a -->, <a href="getlastlogx.3.html#//apple_ref/doc/man/3/getlastlogx">getlastlogx(3)</a>, <a href="../man5/utmpx.5.html#//apple_ref/doc/man/5/utmpx">utmpx(5)</a>

<b>STANDARDS</b>
     The <b>endutxent</b>(), <b>getutxent</b>(), <b>getutxid</b>(), <b>getutxline</b>(), <b>pututxline</b>(), <b>setutxent</b>() all conform to IEEE
     Std 1003.1-2001 (``POSIX.1'') (XSI extension), and previously to X/Open Portability Guide Issue 4,
     Version 2 (``XPG4.2'').  The fields <u>ut</u><b>_</b><u>user</u>, <u>ut</u><b>_</b><u>id</u>, <u>ut</u><b>_</b><u>line</u>, <u>ut</u><b>_</b><u>pid</u>, <u>ut</u><b>_</b><u>type</u>, and <u>ut</u><b>_</b><u>tv</u> conform to IEEE
     Std 1003.1-2001 (``POSIX.1'') (XSI extension), and previously to X/Open Portability Guide Issue 4,
     Version 2 (``XPG4.2'').

BSD                              June 29, 2006                             BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/pututxline.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/pututxline.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/pututxline.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

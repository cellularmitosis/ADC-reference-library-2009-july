<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> SavePreferredConfiguration (csCode = 16)13</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.1dd.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.1e6.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.1e8.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3539"> </A><A NAME="33964"> </A>SavePreferredConfiguration (csCode = 16)</H1><P CLASS="T1.Text1"><A NAME="pgfId=3540"> </A>The required <TT CLASS="cv">SavePreferredConfiguration</TT> routine complements the <A HREF="PCI_BOOK.1fb.html#24563" CLASS="XRef"><TT CLASS="cv">GetPreferredConfiguration</TT> control routine</A>. It is used by clients to save the preferred relative bit depth (depth mode) and display mode. This means that a PCI card should save this information in NVRAM so that it persists across system restarts. Note that NVRAM use is limited to 8 bytes. For more information about NVRAM in PCI-based of Power Macintosh computers, see <A HREF="PCI_BOOK.1b4.html#21830" CLASS="XRef">Typical NVRAM Structure</A>.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=15766"> </A>OSErr = Control(theDeviceRefNum, cscSavePreferredConfiguration,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;theVDSwitchInfo);</CODE><P CLASS="T1.Text1"><A NAME="pgfId=3548"> </A>The Monitors control panel can use this routine to set the preferred resolution and update the resolution list displayed to the user. Following is the information that the control routine must return in the fields of the <TT CLASS="cv">VDSwitchInfoRec</TT> record passed by <TT CLASS="cv">SavePreferredConfiguration</TT>:</P><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15768"> </A><TT CLASS="cv">--&gt; csMode</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3549"> </A><EM CLASS="BodyText">Relative bit depth of preferred resolution</EM></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15777"> </A><TT CLASS="cv">--&gt; csData</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4532"> </A><TT CLASS="cv">DisplayModeID</TT><EM CLASS="BodyText"> of preferred resolution</EM></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15786"> </A><TT CLASS="cv">-- csPage</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4533"> </A><EM CLASS="BodyText">Unused</EM></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15795"> </A><TT CLASS="cv">-- csBaseAddr</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4534"> </A><EM CLASS="BodyText">Unused</EM></DD></DL COMPACT><DIV><blockquote><H4 CLASS="NoteHead"><A NAME="pgfId=15804"> </A>Note</H4><P CLASS="Note"><A NAME="pgfId=3550"> </A>The driver is not required to save any of the information across reboots. However, it is strongly recommended that the relative bit depth and the <TT CLASS="cv">DisplayModeID</TT> value be saved in NVRAM. </P> </blockquote></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.1dd.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.1e6.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.1e8.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Color Picker Parameter Block(IM: ACI Ref)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING75></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACIReference-74.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-76.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACIReference-2.html"><B>Advanced Color Imaging Reference</B></A> / <BR><DD><A HREF="ACIReference-55.html"><B>Chapter 2 - Color Picker Manager Reference</B></A> / <A HREF="ACIReference-10.html"><B></B></A><BR><DL><DD><A HREF="ACIReference-56.html"><B>Constants and Data Types</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING75-0></A>
<H3><A NAME=MARKER-9-84></A>Color Picker Parameter Block</H3>
 <A NAME=MARKER-2-85></A>When your application calls the <CODE>PickColor</CODE> function <A HREF=ACIReference-89.html#MARKER-9-110>(page 2-35)</A> to display a standard color picker dialog box, your application uses a color picker parameter block to specify information to and obtain information from the Color Picker Manager. The color picker parameter block is defined by the <CODE>ColorPickerInfo</CODE> data type.<P>
<PRE>
typedef struct ColorPickerInfo {/* color picker parameter block */
   PMColor        theColor;   /* a picker color */
   CMProfileHandledstProfile; /* destination profile */
   long           flags;      /* color picker flags */
   DialogPlacementSpecplaceWhere;/* dialog box placement 
                                 specifier */
   Point          dialogOrigin;/* upper-left corner of 
                                 dialog box */
   long           pickerType; /* color picker type */
   UserEventProc  eventProc;  /* event filter function */
   ColorChangedProccolorProc; /* color-changed function */
   long           colorProcData;/* data for color-changed 
                                 function */
   Str255         prompt;     /* color picker prompt */
   MenuItemInfo   mInfo;      /* application's edit menu 
                                 items */
   Boolean        newColorChosen;/* whether user changed color */
} ColorPickerInfo;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>theColor</CODE>
<DD> A picker color structure <A HREF=ACIReference-67.html#MARKER-9-69>(page 2-15)</A>. The color that your application supplies in this field is passed to the color picker for editing. This becomes the <I>original color</I> for the color picker. After the user clicks either the OK or Cancel button to close the dialog box, this field contains the new color, that is, the color last chosen by the user. Although the new colors selected by the user may vary widely, the original color remains fixed for comparison. <A HREF=#nonexistent-marker>Figure 2-1 (page 2-4)</A> in <I>Advanced Color Imaging on the Mac OS</I> shows how the standard dialog box displays both the original and the new colors.
<DT><CODE>dstProfile</CODE>
<DD> A handle to a ColorSync 1.0 profile for the final output device. To use the default system profile, set this field to <CODE>nil</CODE>.
<DT><B>Important</B>
<DD>This version of the Color Picker Manager uses ColorSync 1.0 profiles only. The ColorSync 1.0 profile is a handle-based profile. The profile format is defined by Apple Computer. You cannot use version 2.x profiles, which are identified by profile references, with this version of the Color Picker Manager. ColorSync 1.0 profiles typically reside in the ColorSyncTM Profiles folder (within the Preferences folder of the System Folder). They may also be embedded with the images to which they pertain in graphics files. The appendix <A HREF=#nonexistent-marker>"ColorSync Manager Backward Compatibility"</A> in <I>Advanced Color Imaging on the Mac OS</I> provides information about the relationship between the ColorSync Manager version 2.x and ColorSync 1.0 profiles, which you may find useful.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
<DT><CODE>flags</CODE>
<DD> Bits representing the color picker flags <A HREF=ACIReference-63.html#MARKER-9-36>(page 2-8)</A>. Your application can set any of the following flags:
</DL>
<PRE>
               #define CanModifyPalette      4  
               #define CanAnimatePalette     8  
               #define AppIsColorSyncAware   16
</PRE>
<DL>
<DT>
<DD> The color picker may set any of the following flags and override your application settings:
</DL>
<PRE>
               #define InSystemDialog        32
               #define InApplicationDialog   64
               #define InPickerDialog        128
               #define DetachedFromChoices   256
</PRE>
<DL>
<DT><CODE>placeWhere</CODE>
<DD> A specification for where to position the dialog box. Your application uses one of the following constants, which are described in more detail in <A HREF=ACIReference-62.html#MARKER-9-34>"Dialog Placement Specifiers" (page 2-8)</A>, to specify the position for the color picker dialog box:
</DL>
<PRE>
               enum DialogPlacementSpecifiers {
                  kAtSpecifiedOrigin,
                  kDeepestColorScreen,
                  kCenterOnMainScreen
               };
               typedef short DialogPlacementSpec;
</PRE>
<DL>
<DT><CODE>dialogOrigin</CODE>
<DD> The point, in global coordinates, at which to locate the upper-left corner of the dialog box. This origin point is used only if your application supplies the <CODE>kAtSpecifiedOrigin</CODE> specifier in the <CODE>placeWhere</CODE> field.
<DT><CODE>pickerType</CODE>
<DD> The component subtype of the initial color picker. If your application sets this field to 0, the default color picker is used (that is, the last color picker chosen by the user). When <CODE>PickColor</CODE> returns, this field contains the component subtype of the color picker that was chosen when the user closed the color picker dialog box.
<DT><CODE>eventProc</CODE>
<DD> A pointer to an application-defined event filter function <A HREF=ACIReference-126.html#MARKER-9-132>(page 2-57)</A> for handling user events meant for your application. If your filter function returns <CODE>true</CODE>, the Color Picker Manager won't process the event any further. If your filter function returns <CODE>false</CODE>, the Color Picker Manager handles the event as if it were meant for the color picker.
<DT><CODE>colorProc</CODE>
<DD> A pointer to an application-defined function <A HREF=ACIReference-128.html#MARKER-9-135>(page 2-58)</A> to handle color changes. This function should support the updating of colors in a document as the user selects them. 
<DT><CODE>colorProcData</CODE>
<DD> A long integer that the Color Picker Manager passes to the application-defined function supplied in the <CODE>colorProc</CODE> field. Your application-defined function can use this value for any purpose it needs.
<DT><CODE>prompt</CODE>
<DD> A text string prompting the user to choose a color for a particular use (for example, "Choose a highlight color:").
<DT><CODE>mInfo</CODE>
<DD> A <CODE>MenuItemInfo</CODE> structure <A HREF=ACIReference-73.html#MARKER-9-80>(page 2-19)</A>. This structure allows your application to specify your Edit menu for use when a color picker dialog box is displayed
<DT><CODE>newColorChosen</CODE>
<DD> Upon completion, the <CODE>PickColor</CODE> function returns the value <CODE>true</CODE> if the user chose a color and clicked the OK button, and <CODE>false</CODE> if the user clicked Cancel.
</DL>
</BLOCKQUOTE><HR>
<center>
<A HREF="ACIReference-74.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-76.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACIReference-3.html">&copy; Apple Computer, Inc.</A><br>11 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

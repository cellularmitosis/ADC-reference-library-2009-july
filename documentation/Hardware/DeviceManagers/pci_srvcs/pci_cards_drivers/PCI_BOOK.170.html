<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Interrupt Registration</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.16b.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.16f.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.171.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=4208"> </A>Interrupt Registration</H1><P CLASS="T1.Text1"><A NAME="pgfId=4209"> </A>An interrupt member (a node in the IST) can have four kinds of information attached  to it:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=4210"> </A>a pointer to an interrupt service routine (ISR)</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=4211"> </A>a pointer to an interrupt enabler routine (IER)</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=4212"> </A>a pointer to an interrupt disabler routine (IDR)</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=4213"> </A>a reference constant (<TT CLASS="cv">refCon</TT>)</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=4214"> </A>Installation of this information is done by drivers and I/O experts during initialization. The process of attachment is called <B CLASS="bold">registration.</B> Once registered to an interrupt member, the information persists until the next system startup.</P><P CLASS="T1.Text1"><A NAME="pgfId=4215"> </A>There are two types of ISRs. The first type, called a <B CLASS="bold">transversal ISR</B>, routes interrupt processing from a member to one of its child members. Transversal ISRs are always attached to root or parent/child members. The second type of ISR directly handles a device's request for service. This type, called a <I CLASS="italics">handler ISR,</I> is always attached to a leaf member. Transversal ISRs never directly handle a device's request for service, and handler ISRs never directly route the processing of an interrupt.</P><P CLASS="T1.Text1"><A NAME="pgfId=4216"> </A>When a handler ISR is invoked, it is supplied with three parameters. The first parameter indicates the source of the interrupt and consists of an <TT CLASS="cv">InterruptSetID</TT> and <TT CLASS="cv">InterruptMemberNumber</TT>, forming the <TT CLASS="cv">InterruptSetMember</TT> parameter. This allows a single ISR that has been registered with multiple interrupt sources to determine which source caused the current interrupt. The second parameter is the reference constant value that was registered along with the ISR. The reference constant is not used by the system; its use is completely up to the driver writer. The third parameter is a numeric value that tells an ISR whether it has been invoked more than once in a single interrupt tree traversal process. See <A HREF="PCI_BOOK.17d.html#36133" CLASS="XRef">InterruptHandler</A> for more information.</P><P CLASS="T1.Text1"><A NAME="pgfId=4220"> </A>An IER turns on an interrupt source's ability to generate a hardware interruption. Enabling a root member or parent/child member also allows any pending interrupt requests from any hierarchically lower child to propagate.</P><P CLASS="T1.Text1"><A NAME="pgfId=4221"> </A>An IDR turns off an interrupt source's ability to generate a hardware interruption. It returns the previous state of the interrupt source (enabled or disabled), which can be used to decide if subsequent enable operations are required. Disabling a root member or parent/child member also prevents any pending interrupt requests from any hierarchically lower child from propagating.</P><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.16b.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.16f.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.171.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
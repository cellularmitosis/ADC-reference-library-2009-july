<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTBind</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING151></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-150.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-152.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-150.html"><B>Binding and Unbinding Endpoints</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING151-0></A>
<H3><A NAME=MARKER-9-126></A>OTBind<A NAME=MARKER-13-127></A></H3>
 Assigns an address to an endpoint.<P>
<A NAME=HEADING151-2></A>
<H5>C INTERFACE </H5>
<PRE>
<A NAME=MARKER-0-95></A>OSStatus OTBind(EndpointRef ref, 
                     TBind* reqAddr,
                     TBind* retAddr);
</PRE>
<A NAME=HEADING151-4></A>
<H5>C++ INTERFACE </H5>
<PRE>
<A NAME=MARKER-12-129></A>OSStatus TEndpoint::Bind(TBind* reqAddr, 
                     TBind* retAddr);
</PRE>
<A NAME=HEADING151-6></A>
<H5>PARAMETERS </H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint that you are binding.
<DT><CODE>reqAddr</CODE>
<DD> A pointer to a <A HREF=NetworkingWOT-137.html#MARKER-9-86><CODE>TBind</CODE></A> structure  that contains information about the address to which you want to bind the endpoint and the number of possible outstanding connection requests if this is a connection-oriented endpoint. 
<DT>
<DD> If you specify <CODE>NULL</CODE> for the <CODE>reqAddr</CODE> parameter, Open Transport chooses a protocol address for you and requests 0 as the endpoint's maximum number of outstanding connect indications. 
<DT>
<DD>  If you want Open Transport to assign an address for you, while still specifying a <CODE>qlen</CODE> value, set the <CODE>addr.len</CODE> field of the <CODE>TBind</CODE> structure to 0.
<DT><CODE>retAddr</CODE>
<DD> A pointer to a <A HREF=NetworkingWOT-137.html#MARKER-9-86><CODE>TBind</CODE></A> structure that, on return, indicates the address to which the endpoint is actually bound and, for connection-oriented endpoints, indicates the maximum number of outstanding connect indications that this endpoint actually allows. The <CODE>TBind</CODE> structure is described in the <A HREF=NetworkingWOT-137.html#MARKER-9-86>"Endpoints Reference"</A>.
<DT>
<DD> You can set this parameter to <CODE>NULL </CODE>if you do not care to know what address the endpoint is bound to or what the negotiated value of <CODE>qlen</CODE> is. However, it is almost always a good idea to check this field to find out whether the endpoint negotiated a different queue length from the length you requested.
<DT><I>function result</I>
<DD> An error code. See Discussion.
</DL>
<A NAME=HEADING151-14></A>
<H5>DISCUSSION</H5>
 You call the <CODE>OTBind</CODE> function to request that an endpoint be bound to an address. You can either use the <CODE>reqAddr</CODE> parameter to request that the endpoint be bound to a specific address or allow the endpoint provider to assign an address dynamically by passing<CODE> NULL</CODE> for this parameter. Consult the documentation for the top-level protocol you are using to determine whether it is preferable to have the address assigned dynamically. <P>
 Before you call the function, you must allocate a buffer for the address and set the <CODE>retAddr-&gt;addr.buf</CODE> field to point to it. You must also specify the maximum size of the address using the <CODE>retAddr-&gt;addr.maxlen</CODE> field<CODE>. </CODE>The function returns the address to which the endpoint is actually bound in the <CODE>retAddr</CODE> parameter. This might be different from the address you requested. The field <CODE>retAddr-&gt;addr.len</CODE> contains the length of the address. If the <CODE>ret-&gt;addr.maxlen</CODE> field indicates a buffer size that is not large enough to contain the address, the function returns with the result <CODE>kOTBufferOverflowErr.</CODE> If the requested address is not available, the function returns the result <CODE>kOTAddressBusyErr.</CODE> If the endpoint cannot allocate an address, the function returns with the<CODE> kOTNoAddressErr</CODE> result.<P>
 If the endpoint is in synchronous mode, the function returns when the bind is complete. If the endpoint is in asynchronous mode and you have installed a notification routine, the <CODE>OTBind</CODE> function returns <CODE>kOTNoError</CODE> and sends the <CODE>T_BINDCOMPLETE</CODE> event to your notifier when the bind completes. For more information on notifier functions and event codes, see <A HREF=NetworkingWOT-126.html#MARKER-9-142><CODE>MyNotifierCallback</CODE></A> function and <A HREF=NetworkingWOT-100.html#MARKER-9-22>"Event Codes"</A>. If you have not installed a notifier function, the only way to determine when the function completes is to poll the endpoint using the <A HREF=NetworkingWOT-155.html#MARKER-9-139><CODE>OTGetEndpointState</CODE></A> function. This function returns a <CODE>kOTStateChangeErr</CODE> until the bind completes. When the endpoint is bound, the state is either <CODE>T_UNBND</CODE> if the bind failed, or <CODE>T_IDLE</CODE> if it succeeded. You can cancel an asynchronous bind that is still in progress by calling the <A HREF=NetworkingWOT-152.html#MARKER-9-130><CODE>OTUnbind</CODE></A> function.<P>
 If you are binding a connection-oriented endpoint, you must use the <CODE>reqAddr-&gt;qlen</CODE> field to specify the number of connection requests that may be outstanding for this endpoint. You can set this field to 0 if you are only going to be initiating outgoing connections. The <CODE>retAddr-&gt;qlen</CODE> field specifies, on return, the actual number of connection requests allowed for the endpoint. This number might be smaller than the number you requested. Note that when the endpoint is actually connected, the number might be further decreased by negotiations taking place at that time. <P>
 You must not bind more than one connectionless endpoint to a single address. If you attempt to bind a second endpoint to the an address that is already bound, the <CODE>OTBind</CODE> function will return the result <CODE>kOTAddressBusyErr</CODE>. Some connection-oriented protocols let you bind two or more endpoints to the same address. In such instances, you must use only one of the endpoints to listen for connection requests for that address. When binding the endpoint listening for a connection, you must set the <CODE>reqAddr-&gt;qlen</CODE> field of the <CODE>OTBind</CODE> function to a value greater than or equal to 1. When binding the other endpoints, you must set the <CODE>reqAddr-&gt;qlen</CODE> field to 0. <P>
 If you accept a connection on an endpoint that is also listening for connection requests, the address of that endpoint is deemed "busy" for the duration of the connection, and you must not bind another endpoint for listening to that same address. This requirement prevents more than one endpoint bound to the same address from accepting connection requests. If you have to bind another listening endpoint to the same address, you must first use the <CODE>OTUnbind</CODE> function to unbind the first endpoint or use the <CODE>OTCloseProvider</CODE> function to close it.<P>
<A NAME=HEADING151-21></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 In asynchronous mode, the endpoint provider might call your notifier function before the function's initial return.<P>
 An endpoint may not allow an explicit binding of more than one endpoint to the same protocol address, although it allows more than one connection to be accepted for the same protocol address. To ensure portability, do not bind endpoints that are used as responding endpoints in a call to the <CODE>OTAccept</CODE> function if the responding address is to be the same as the called address.<P>
<A NAME=HEADING151-24></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-105.html#MARKER-9-67><CODE>OTCloseProvider</CODE></A> function. <P>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
 <A HREF=NetworkingWOT-28.html#MARKER-9-119>"Processing Multiple Connection Requests"</A>.<P>
 The <A HREF=NetworkingWOT-177.html#MARKER-9-199><CODE>OTConnect</CODE></A> function.<P>
 The <A HREF=NetworkingWOT-180.html#MARKER-9-208><CODE>OTAccept</CODE></A> function.<P>
 <A HREF=NetworkingWOT-51.html#MARKER-9-17>"TCP/IP Services"</A>.<P>
 <A HREF=NetworkingWOT-69.html#MARKER-9-19>"AppleTalk Data Stream Protocol (ADSP)"</A> 
 <A HREF=NetworkingWOT-71.html#MARKER-9-55></A><P>
 <A HREF=NetworkingWOT-66.html#MARKER-9-22>"Datagram Delivery Protocol (DDP)"</A> <A HREF=NetworkingWOT-68.html#MARKER-9-51>.<P>
 <A HREF=NetworkingWOT-75.html#MARKER-9-19>"Printer Access Protocol (PAP)"</A> <A HREF=NetworkingWOT-77.html#MARKER-9-45></A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-150.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-152.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><meta name="keywords" content="posCntl thumbCntl custom control"><meta name="Description" content="Technical Note TB31: This Technical Note provides some commentaryabout responding to the posCntl and thumbCntl messages incustom control definitions."><title>Technical Note TB31: 'CDEF' Parameters and Bugs</title>                           <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Aug 1, 1988 - Aug 5, 1988"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002782" title="'CDEF' Parameters and Bugs"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB31</div>
<div id="pageheadsub">'CDEF' Parameters and Bugs</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">drawCntl (0) and autoTrack (8)</A><BR><BR><A HREF="#Section3">posCntl (5) and thumbCntl (6)</A><BR><BR><A HREF="#Section4">_TrackControl</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note describes known bugs in the Control Manager which affectcontrol definition functions (<code>'CDEF'</code> resources).</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Aug 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><p>The Control Manager chapter of <i>Inside Macintosh</i>, Volume I-309, describeshow to write a control definition function (<code>'CDEF'</code> resource).  ThisNote assumes a basic understanding of this chapter, specifically of the variousmessages which are sent in the <code>message</code> parameter.</p><a name="Section2"></a> <P><A HREF="#top">Back to top</A></p><h2>drawCntl (0) and autoTrack (8)</h2><p>When a <code>'CDEF'</code> is called with either the message <code>drawCntl</code> or<code>autoTrack</code>, it is possible for the high word of the <code>param</code>parameter to contain undefined data which could result in the failure ofroutines that rely upon all 32 bits of <code>param</code> being defined.<code>'CDEF'</code> resources should only consider the low word of the<code>param</code> parameter when dealing with the <code>drawCntl</code> and<code>autoTrack</code> messages.</p><a name="Section3"></a> <P><A HREF="#top">Back to top</A></p><h2>posCntl (5) and thumbCntl (6)</h2><p>According to <i>Inside Macintosh</i>, the Control Manager calls a<code>'CDEF'</code> with the <code>posCntl</code> message and the <code>thumbCntl</code>message if an application does custom dragging of an indicator (a thumb), butnot if it does default dragging.  This is not true.  The Control Manager callsa <code>'CDEF'</code> with the <code>posCntl</code> message if an application doesdefault dragging, which is exactly the opposite of the way it is documented.The <code>'CDEF'</code> receives the <code>thumbCntl</code> message regardless of whichtype of dragging an application does, however, the results are used only fordefault dragging (they are ignored for custom dragging).</p><a name="Section4"></a> <P><A HREF="#top">Back to top</A></p><h2>_TrackControl</h2><p>When a user clicks on your control, you normally call <code>_TrackControl</code>,which is supposed to return zero if the user does not change the control'ssetting or the part code if the user does change the setting.  For<code>'CDEF'</code> resources that implement custom dragging,<code>_TrackControl</code> returns zero whether or not the user changes thecontrol's setting.  To work around this problem, you must use another method tofind out if the user has changed the control's setting, such as comparing thecontrol's value before and after the call to <code>_TrackControl</code>.</p><P><A HREF="#top">Back to top</A></p><a name = "References"></a><h2>References</h2><P><i>Inside Macintosh</i>, Volume I-309, The Control Manager</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_31.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_31.html%3Fid%3DDTS10002782-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_31.html%3Fid%3DDTS10002782-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_31.html%3Fid%3DDTS10002782-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<html><head><title>Mac OS X
 Manual Page For zshcompsys(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/zshcompsys" title="Mac OS X
 Manual Page for zshcompsys(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/zshcompsys"; name=zshcompsys(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
ZSHCOMPSYS(1)                                                                                  ZSHCOMPSYS(1)



<b>NAME</b>
       zshcompsys - zsh completion system

<b>DESCRIPTION</b>
       This describes the shell code for the `new' completion system, referred to as <b>compsys</b>.  It is written
       in shell functions based on the features described in <a href="zshcompwid.1.html#//apple_ref/doc/man/1/zshcompwid"><u>zshcompwid</u>(1)</a>.

       The features are contextual, sensitive to the point at which completion is started.  Many completions
       are  already  provided.   For  this reason, a user can perform a great many tasks without knowing any
       details beyond how to initialize the system, which is described below in INITIALIZATION.

       The context that decides what completion is to be performed may be
             an argument or option position: these describe the position on the command line at which  com-<font color="#ffffff" class="whiteout">pletion&nbsp;completion</font>
              pletion  is requested.  For example `first argument to rmdir, the word being completed names a
              directory';


             a special context, denoting an element in the shell's syntax.  For example `a word in  command
              position' or `an array subscript'.


       A full context specification contains other elements, as we shall describe.

       Besides  commands  names  and contexts, the system employs two more concepts, <u>styles</u> and <u>tags</u>.  These
       provide ways for the user to configure the system's behaviour.

       Tags play a dual role.  They serve as a classification system for the matches, typically indicating a
       class of object that the user may need to distinguish.  For example, when completing arguments of the
       <b>ls</b> command the user may prefer to try <b>files</b> before <b>directories</b>, so both of these are tags.  They also
       appear as the rightmost element in a context specification.

       Styles  modify  various operations of the completion system, such as output formatting, but also what
       kinds of completers are used (and in what order), or which tags  are  examined.   Styles  may  accept
       arguments and are manipulated using the <b>zstyle</b> command described in see <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>.

       In  summary,  tags  describe <u>what</u> the completion objects are, and style <b>how</b> they are to be completed.
       At various points of execution, the completion system checks what styles and/or tags are defined  for
       the current context, and uses that to modify its behavior.  The full description of context handling,
       which determines how tags and other elements of the context influence the  behaviour  of  styles,  is
       described below in COMPLETION SYSTEM CONFIGURATION.

       When  a  completion  is requested, a dispatcher function is called; see the description of <b>_main_com</b>-<font color="#ffffff" class="whiteout">plete&nbsp;_main_complete</font>
       <b>plete</b> in the list of control functions below. This dispatcher decides which function should be called
       to  produce  the completions, and calls it. The result is passed to one or more <u>completers</u>, functions
       that implement individual completion strategies: simple completion, error correction, completion with
       error correction, menu selection, etc.

       More generally, the shell functions contained in the completion system are of two types:
             those beginning `<b>comp</b>' are to be called directly; there are only a few of these;


             those beginning `<b>_</b>' are called by the completion code.  The shell functions of this set, which
              implement completion behaviour and may be bound to keystrokes, are referred to  as  `widgets'.
              These proliferate as new completions are required.




<b>INITIALIZATION</b>
       If  the system was installed completely, it should be enough to call the shell function <b>compinit</b> from
       your initialization file; see the next section.  However, the function <b>compinstall</b> can be  run  by  a
       user to configure various aspects of the completion system.

       Usually,  <b>compinstall</b>  will insert code into <b>.zshrc</b>, although if that is not writable it will save it
       in another file and tell you that file's location.  Note that it is up to you to make sure  that  the
       lines  added  to <b>.zshrc</b> are actually run; you may, for example, need to move them to an earlier place
       in the file if <b>.zshrc</b> usually returns early.  So long as you keep them all  together  (including  the
       comment  lines  at  the start and finish), you can rerun <b>compinstall</b> and it will correctly locate and
       modify these lines.  Note, however, that any code you add to this section by hand  is  likely  to  be
       lost  if  you  rerun <b>compinstall</b>, although lines using the command `<b>zstyle</b>' should be gracefully han-<font color="#ffffff" class="whiteout">dled.&nbsp;handled.</font>
       dled.

       The new code will take effect next time you start the shell, or run <b>.zshrc</b> by hand; there is also  an
       option  to  make  them take effect immediately.  However, if <b>compinstall</b> has removed definitions, you
       will need to restart the shell to see the changes.

       To run <b>compinstall</b> you will need to make sure it is in a directory mentioned in your <b>fpath</b> parameter,
       which  should already be the case if zsh was properly configured as long as your startup files do not
       remove the appropriate directories from <b>fpath</b>.  Then it must be autoloaded (`<b>autoload</b> <b>-U</b> <b>compinstall</b>'
       is recommended).  You can abort the installation any time you are being prompted for information, and
       your <b>.zshrc</b> will not be altered at all; changes only take place right  at  the  end,  where  you  are
       specifically asked for confirmation.


   <b>Use</b> <b>of</b> <b>compinit</b>
       This  section  describes  the  use  of <b>compinit</b> to initialize completion for the current session when
       called directly; if you have run <b>compinstall</b> it will be called automatically from your <b>.zshrc</b>.

       To initialize the system, the function <b>compinit</b> should be in  a  directory  mentioned  in  the  <b>fpath</b>
       parameter,  and  should be autoloaded (`<b>autoload</b> <b>-U</b> <b>compinit</b>' is recommended), and then run simply as
       `<b>compinit</b>'.  This will define a few utility functions, arrange for all the necessary shell  functions
       to  be  autoloaded, and will then re-define all widgets that do completion to use the new system.  If
       you use the <b>menu-select</b> widget, which is part of the <b>zsh/complist</b> module, you should make  sure  that
       that module is loaded before the call to <b>compinit</b> so that that widget is also re-defined.  If comple-<font color="#ffffff" class="whiteout">tion&nbsp;completion</font>
       tion styles (see below) are set up to perform expansion as well as completion by default, and the TAB
       key  is  bound  to <b>expand-or-complete</b>, <b>compinit</b> will rebind it to <b>complete-word</b>; this is necessary to
       use the correct form of expansion.

       Should you need to use the original completion commands, you can still bind keys to the  old  widgets
       by putting a `<b>.</b>' in front of the widget name, e.g. `<b>.expand-or-complete</b>'.

       To  speed  up  the running of <b>compinit</b>, it can be made to produce a dumped configuration that will be
       read in on future invocations; this is the default, but can be turned off by  calling  <b>compinit</b>  with
       the option <b>-D</b>.  The dumped file is <b>.zcompdump</b> in the same directory as the startup files (i.e. <b>$ZDOT</b>-<font color="#ffffff" class="whiteout">DIR&nbsp;$ZDOTDIR</font>
       <b>DIR</b> or <b>$HOME</b>); alternatively, an explicit file name can be given by `<b>compinit</b> <b>-d</b> <u>dumpfile</u>'.  The next
       invocation of <b>compinit</b> will read the dumped file instead of performing a full initialization.

       If  the number of completion files changes, <b>compinit</b> will recognise this and produce a new dump file.
       However, if the name of a function or the arguments in the first line  of  a  <b>#compdef</b>  function  (as
       described  below) change, it is easiest to delete the dump file by hand so that <b>compinit</b> will re-cre-<font color="#ffffff" class="whiteout">ate&nbsp;re-create</font>
       ate it the next time it is run.  The check performed to see if there are new functions can be omitted
       by giving the option <b>-C</b>.  In this case the dump file will only be created if there isn't one already.

       The dumping is actually done by another function, <b>compdump</b>, but you will only need to run this  your-<font color="#ffffff" class="whiteout">self&nbsp;yourself</font>
       self  if  you  change  the configuration (e.g. using <b>compdef</b>) and then want to dump the new one.  The
       name of the old dumped file will be remembered for this purpose.

       If the parameter <b>_compdir</b> is set, <b>compinit</b> uses it as a directory where completion functions  can  be
       found; this is only necessary if they are not already in the function search path.

       For  security reasons <b>compinit</b> also checks if the completion system would use files not owned by root
       or by the current user, or files in directories that are world- or group-writable  or  that  are  not
       owned  by  root or by the current user.  If such files or directories are found, <b>compinit</b> will ask if
       the completion system should really be used.  To avoid these tests and make all files found  be  used
       without asking, use the option <b>-u</b>, and to make <b>compinit</b> silently ignore all insecure files and direc-<font color="#ffffff" class="whiteout">tories&nbsp;directories</font>
       tories use the option <b>-i</b>.  This security check is skipped entirely when the <b>-C</b> option is given.

       The security check can be retried at any time by running the function <b>compaudit</b>.  This  is  the  same
       check  used  by <b>compinit</b>, but when it is executed directly any changes to <b>fpath</b> are made local to the
       function so they do not persist.  The directories to be checked may be passed as arguments;  if  none
       are  given,  <b>compaudit</b>  uses <b>fpath</b> and <b>_compdir</b> to find completion system directories, adding missing
       ones to <b>fpath</b> as necessary.  To force a check of exactly the directories currently  named  in  <b>fpath</b>,
       set <b>_compdir</b> to an empty string before calling <b>compaudit</b> or <b>compinit</b>.


   <b>Autoloaded</b> <b>files</b>
       The  convention for autoloaded functions used in completion is that they start with an underscore; as
       already mentioned, the <b>fpath/FPATH</b> parameter must contain the directory in which they are stored.  If
       <b>zsh</b>  was  properly  installed  on  your  system, then <b>fpath/FPATH</b> automatically contains the required
       directories for the standard functions.

       For incomplete installations, if <b>compinit</b> does not find enough files  beginning  with  an  underscore
       (fewer  than twenty) in the search path, it will try to find more by adding the directory <b>_compdir</b> to
       the search path.  If that directory has a subdirectory named <b>Base</b>, all subdirectories will  be  added
       to  the path.  Furthermore, if the subdirectory <b>Base</b> has a subdirectory named <b>Core</b>, <b>compinit</b> will add
       all subdirectories of the subdirectories is to the path: this allows the functions to be in the  same
       format as in the <b>zsh</b> source distribution.

       When  <b>compinit</b> is run, it searches all such files accessible via <b>fpath/FPATH</b> and reads the first line
       of each of them.  This line should contain one of the tags described below.  Files whose  first  line
       does not start with one of these tags are not considered to be part of the completion system and will
       not be treated specially.

       The tags are:

       <b>#compdef</b> <u>names...</u> [ <b>-[pP]</b> <u>patterns...</u> [ <b>-N</b> <u>names...</u> ] ]
              The file will be made autoloadable and the function defined in it will be called when complet-<font color="#ffffff" class="whiteout">ing&nbsp;completing</font>
              ing  <u>names</u>,  each of which is either the name of a command whose arguments are to be completed
              or one of a number of special contexts in the form <b>-</b><u>context</u><b>-</b> described below.

              Each <u>name</u> may also be of the form `<u>cmd</u><b>=</b><u>service</u>'.  When completing the command <u>cmd</u>,  the  func-<font color="#ffffff" class="whiteout">tion&nbsp;function</font>
              tion  typically  behaves  as  if  the command (or special context) <u>service</u> was being completed
              instead.  This provides a way of altering the behaviour of functions  that  can  perform  many
              different  completions.   It is implemented by setting the parameter <b>$service</b> when calling the
              function; the function may choose to interpret this how it wishes, and simpler functions  will
              probably ignore it.

              If the <b>#compdef</b> line contains one of the options <b>-p</b> or <b>-P</b>, the words following are taken to be
              patterns.  The function will be called when completion is attempted for a command  or  context
              that  matches  one  of the patterns.  The options <b>-p</b> and <b>-P</b> are used to specify patterns to be
              tried before or after other completions respectively.  Hence <b>-P</b> may be used to specify default
              actions.

              The  option  <b>-N</b>  is used after a list following <b>-p</b> or <b>-P</b>; it specifies that remaining words no
              longer define patterns.  It is possible to toggle between the three options as many  times  as
              necessary.

       <b>#compdef</b> <b>-k</b> <u>style</u> <u>key-sequences...</u>
              This  option creates a widget behaving like the builtin widget <u>style</u> and binds it to the given
              <u>key-sequences</u>, if any.  The <u>style</u> must be one of the builtin widgets that perform  completion,
              namely   <b>complete-word</b>,  <b>delete-char-or-list</b>,  <b>expand-or-complete</b>,  <b>expand-or-complete-prefix</b>,
              <b>list-choices</b>,  <b>menu-complete</b>,  <b>menu-expand-or-complete</b>,  or  <b>reverse-menu-complete</b>.   If   the
              <b>zsh/complist</b> module is loaded (see <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>) the widget <b>menu-select</b> is also available.

              When  one  of the <u>key-sequences</u> is typed, the function in the file will be invoked to generate
              the matches.  Note that a key will not be re-bound if if it already was (that is, was bound to
              something other than <b>undefined-key</b>).  The widget created has the same name as the file and can
              be bound to any other keys using <b>bindkey</b> as usual.

       <b>#compdef</b> <b>-K</b> <u>widget-name</u> <u>style</u> <u>key-sequences</u> ...
              This is similar to <b>-k</b> except that only one <u>key-sequences</u> argument may be given for  each  <u>wid</u>-<font color="#ffffff" class="whiteout">get-name&nbsp;widget-name</font>
              <u>get-name</u>  <u>style</u>  pair.  However, the entire set of three arguments may be repeated with a dif-<font color="#ffffff" class="whiteout">ferent&nbsp;different</font>
              ferent set of arguments.  Note in particular that the <u>widget-name</u> must  be  distinct  in  each
              set.  If it does not begin with `<b>_</b>' this will be added.  The <u>widget-name</u> should not clash with
              the name of any existing widget: names based on the name of the function are most useful.  For
              example,

                     <b>#compdef</b> <b>-K</b> <b>_foo_complete</b> <b>complete-word</b> <b>"^X^C"</b> <b>\</b>
                       <b>_foo_list</b> <b>list-choices</b> <b>"^X^D"</b>

              (all on one line) defines a widget <b>_foo_complete</b> for completion, bound to `<b>^X^C</b>', and a widget
              <b>_foo_list</b> for listing, bound to `<b>^X^D</b>'.

       <b>#autoload</b> [ <u>options</u> ]
              Functions with the <b>#autoload</b> tag are marked for autoloading but are not otherwise treated spe-<font color="#ffffff" class="whiteout">cially.&nbsp;specially.</font>
              cially.   Typically  they  are  to be called from within one of the completion functions.  Any
              <u>options</u> supplied will be passed to the <b>autoload</b> builtin; a typical use  is  <b>+X</b>  to  force  the
              function to be loaded immediately.  Note that the <b>-U</b> and <b>-z</b> flags are always added implicitly.

       The <b>#</b> is part of the tag name and no white space is allowed after it.  The <b>#compdef</b> tags use the <b>com</b>-<font color="#ffffff" class="whiteout">pdef&nbsp;compdef</font>
       <b>pdef</b>  function  described  below;  the  main  difference is that the name of the function is supplied
       implicitly.

       The special contexts for which completion functions can be defined are:

       <b>-array-value</b>-<font color="#ffffff" class="whiteout">The&nbsp;-array-valueThe</font>
              The right hand side of an array-assignment (`<b>foo=(...)</b>')

       <b>-brace-parameter</b>-<font color="#ffffff" class="whiteout">The&nbsp;-brace-parameterThe</font>
              The name of a parameter expansion within braces (`<b>${...}</b>')

       <b>-assign-parameter</b>-<font color="#ffffff" class="whiteout">The&nbsp;-assign-parameterThe</font>
              The name of a parameter in an assignment, i.e. on the left hand side of an `<b>=</b>'

       <b>-command</b>-<font color="#ffffff" class="whiteout">A&nbsp;-commandA</font>
              A word in command position

       <b>-condition</b>-<font color="#ffffff" class="whiteout">A&nbsp;-conditionA</font>
              A word inside a condition (`<b>[[...]]</b>')

       <b>-default</b>-<font color="#ffffff" class="whiteout">Any&nbsp;-defaultAny</font>
              Any word for which no other completion is defined

       <b>-equal</b>-<font color="#ffffff" class="whiteout">A&nbsp;-equalA</font>
              A word beginning with an equals sign

       <b>-first</b>-<font color="#ffffff" class="whiteout">This&nbsp;-firstThis</font>
              This is tried before any other completion function.  The function called may set the <b>_compskip</b>
              parameter to one of various values: <b>all</b>: no further completion is attempted; a string contain-<font color="#ffffff" class="whiteout">ing&nbsp;containing</font>
              ing the substring <b>patterns</b>: no pattern completion functions will be called; a string  contain-<font color="#ffffff" class="whiteout">ing&nbsp;containing</font>
              ing  <b>default</b>:  the  function  for  the  `<b>-default-</b>'  context will not be called, but functions
              defined for commands will

       <b>-math-</b> Inside mathematical contexts, such as `<b>((</b>...<b>))</b>'

       <b>-parameter</b>-<font color="#ffffff" class="whiteout">The&nbsp;-parameterThe</font>
              The name of a parameter expansion (`<b>$...</b>')

       <b>-redirect</b>-<font color="#ffffff" class="whiteout">The&nbsp;-redirectThe</font>
              The word after a redirection operator.

       <b>-subscript</b>-<font color="#ffffff" class="whiteout">The&nbsp;-subscriptThe</font>
              The contents of a parameter subscript.

       <b>-tilde</b>-<font color="#ffffff" class="whiteout">After&nbsp;-tildeAfter</font>
              After an initial tilde (`<b>~</b>'), but before the first slash in the word.

       <b>-value</b>-<font color="#ffffff" class="whiteout">On&nbsp;-valueOn</font>
              On the right hand side of an assignment.

       Default implementations are supplied for each of these contexts.  In most cases the context <b>-</b><u>context</u><b></b>-<font color="#ffffff" class="whiteout">is&nbsp;-contextis</font>
       is  implemented by a corresponding function <b>_</b><u>context</u>, for example the context `<b>-tilde-</b>' and the func-<font color="#ffffff" class="whiteout">tion&nbsp;function</font>
       tion `<b>_tilde</b>').

       The contexts <b>-redirect-</b> and <b>-value-</b> allow extra context-specific information.  (Internally,  this  is
       handled  by the functions for each context calling the function <b>_dispatch</b>.)  The extra information is
       added separated by commas.

       For the <b>-redirect-</b> context, the extra information is in the form `<b>-redirect-,</b><u>op</u><b>,</b><u>command</u>', where <u>op</u> is
       the  redirection operator and <u>command</u> is the name of the command on the line.  If there is no command
       on the line yet, the <u>command</u> field will be empty.

       For the <b>-value-</b> context, the form is `<b>-value-,</b><u>name</u><b>,</b><u>command</u>', where <u>name</u> is the name of the parameter.
       In  the case of elements of an associative array, for example `<b>assoc=(key</b> <b>&lt;TAB&gt;</b>', <u>name</u> is expanded to
       `<u>name</u><b>-</b><u>key</u>'.  In certain special contexts, such as completing after `<b>make</b> <b>CFLAGS=</b>', the  <u>command</u>  part
       gives the name of the command, here <b>make</b>; otherwise it is empty.

       It is not necessary to define fully specific completions as the functions provided will try to gener-<font color="#ffffff" class="whiteout">ate&nbsp;generate</font>
       ate completions by progressively replacing the elements with `<b>-default-</b>'.  For example, when complet-<font color="#ffffff" class="whiteout">ing&nbsp;completing</font>
       ing  after  `<b>foo=&lt;TAB&gt;</b>',  <b>_value</b>  will  try  the  names `<b>-value-,foo,</b>' (note the empty <u>command</u> part),
       `<b>-value-,foo,-default-</b>' and`<b>-value-,-default-,-default-</b>', in that order, until it finds a function to
       handle the context.

       As an example:

              <b>compdef</b> <b>'_files</b> <b>-g</b> <b>"*.log"'</b> <b>'-redirect-,2&gt;,-default-'</b>

       completes  files  matching  `<b>*.log</b>'  after  `<b>2&gt;</b>  <b>&lt;TAB&gt;</b>' for any command with no more specific handler
       defined.

       Also:

              <b>compdef</b> <b>_foo</b> <b>-value-,-default-,-default</b>-<font color="#ffffff" class="whiteout">specifies&nbsp;-value-,-default-,-defaultspecifies</font>

       specifies that <b>_foo</b> provides completions for the values of parameters for which no  special  function
       has been defined.  This is usually handled by the function <b>_value</b> itself.

       The same lookup rules are used when looking up styles (as described below); for example

              <b>zstyle</b> <b>':completion:*:*:-redirect-,2&gt;,*:*'</b> <b>file-patterns</b> <b>'*.log'</b>

       is another way to make completion after `<b>2&gt;</b> <b>&lt;TAB&gt;</b>' complete files matching `<b>*.log</b>'.


   <b>Functions</b>
       The following function is defined by <b>compinit</b> and may be called directly.

       <b>compdef</b> [ <b>-an</b> ] <u>function</u> <u>names...</u> [ <b>-[pP]</b> <u>patterns...</u> [ <b>-N</b> <u>names...</u> ] ]
       <b>compdef</b> <b>-d</b> <u>names...</u>
       <b>compdef</b> <b>-k</b> [ <b>-an</b> ] <u>function</u> <u>style</u> <u>key-sequences...</u>
       <b>compdef</b> <b>-K</b> [ <b>-an</b> ] <u>function</u> <u>name</u> <u>style</u> <u>key-sequences</u> <u>...</u>
              The  first form defines the <u>function</u> to call for completion in the given contexts as described
              for the <b>#compdef</b> tag above.

              Alternatively, all the arguments may have the form `<u>cmd</u><b>=</b><u>service</u>'.  Here <u>service</u> should already
              have been defined by `<u>cmd1</u><b>=</b><u>service</u>' lines in <b>#compdef</b> files, as described above.  The argument
              for <u>cmd</u> will be completed in the same way as <u>service</u>.

              The <u>function</u> argument may alternatively be a string containing any  shell  code.   The  string
              will  be executed using the <b>eval</b> builtin command to generate completions.  This provides a way
              of avoiding having to define a new completion function.  For example, to complete files ending
              in `<b>.h</b>' as arguments to the command <b>foo</b>:

                     <b>compdef</b> <b>'_files</b> <b>-g</b> <b>"*.h"'</b> <b>foo</b>

              The  option  <b>-n</b> prevents any completions already defined for the command or context from being
              overwritten.

              The option <b>-d</b> deletes any completion defined for the command or contexts listed.

              The <u>names</u> may also contain <b>-p</b>, <b>-P</b> and <b>-N</b> options as  described  for  the  <b>#compdef</b>  tag.   The
              effect on the argument list is identical, switching between definitions of patterns tried ini-<font color="#ffffff" class="whiteout">tially,&nbsp;initially,</font>
              tially, patterns tried finally, and normal commands and contexts.

              The parameter <b>$_compskip</b> may be set by any function defined for a pattern context.  If  it  is
              set  to  a  value  containing  the  substring `<b>patterns</b>' none of the pattern-functions will be
              called; if it is set to a value containing the substring `<b>all</b>',  no  other  function  will  be
              called.

              The  form  with <b>-k</b> defines a widget with the same name as the <u>function</u> that will be called for
              each of the <u>key-sequences</u>; this is like the <b>#compdef</b> <b>-k</b> tag.  The function should generate the
              completions  needed  and  will otherwise behave like the builtin widget whose name is given as
              the <u>style</u> argument.  The widgets usable  for  this  are:  <b>complete-word</b>,  <b>delete-char-or-list</b>,
              <b>expand-or-complete</b>,        <b>expand-or-complete-prefix</b>,       <b>list-choices</b>,       <b>menu-complete</b>,
              <b>menu-expand-or-complete</b>, and <b>reverse-menu-complete</b>, as well as <b>menu-select</b> if the <b>zsh/complist</b>
              module  is  loaded.   The  option <b>-n</b> prevents the key being bound if it is already to bound to
              something other than <b>undefined-key</b>.

              The form with <b>-K</b> is similar and defines multiple widgets based on the same <u>function</u>,  each  of
              which  requires the set of three arguments <u>name</u>, <u>style</u> and <u>key-sequences</u>, where the latter two
              are as for <b>-k</b> and the first must be a unique widget name beginning with an underscore.

              Wherever applicable, the <b>-a</b> option makes the <u>function</u> autoloadable, equivalent to <b>autoload</b>  <b>-U</b>
              <u>function</u>.

       The  function  <b>compdef</b> can be used to associate existing completion functions with new commands.  For
       example,

              <b>compdef</b> <b>_pids</b> <b>foo</b>

       uses the function <b>_pids</b> to complete process IDs for the command <b>foo</b>.

       Note also the <b>_gnu_generic</b> function described below, which can be used to complete options  for  com-<font color="#ffffff" class="whiteout">mands&nbsp;commands</font>
       mands that understand the `<b>--help</b>' option.


<b>COMPLETION</b> <b>SYSTEM</b> <b>CONFIGURATION</b>
       This  section  gives a short overview of how the completion system works, and then more detail on how
       users can configure how and when matches are generated.


   <b>Overview</b>
       When completion is attempted somewhere on the command line the completion system first works out  the
       context.   This  takes  account  of  a number of things including the command word (such as `<b>grep</b>' or
       `<b>zsh</b>') and options to which the current word may be an argument (such as the `<b>-o</b>' option to <b>zsh</b> which
       takes a shell option as an argument).

       This  context  information  is  condensed  into  a  string consisting of multiple fields separated by
       colons, referred to simply as `the context' in the remainder of the documentation.  This is  used  to
       look  up  <u>styles</u>, context-sensitive options that can be used to configure the completion system.  The
       context used for lookup may vary during the same call to the completion system.

       The context string always consists of a fixed set of fields, separated by colons and with  a  leading
       colon  before the first, in the form <b>:completion:</b><u>function</u><b>:</b><u>completer</u><b>:</b><u>command</u><b>:</b><u>argument</u><b>:tag</b>.  These have
       the following meaning:

             The literal string <b>completion</b>, saying that this style is used by the completion system.   This
              distinguishes the context from those used by, for example, zle widgets and ZFTP functions.


             The  <u>function</u>, if completion is called from a named widget rather than through the normal com-<font color="#ffffff" class="whiteout">pletion&nbsp;completion</font>
              pletion system.  Typically this is blank, but it is set by special widgets such as  <b>predict-on</b>
              and  the  various  functions  in  the <b>Widget</b> directory of the distribution to the name of that
              function, often in an abbreviated form.


             The <u>completer</u> currently active, the name of the function without the  leading  underscore  and
              with  other underscores converted to hyphens.  A `completer' is in overall control of how com-<font color="#ffffff" class="whiteout">pletion&nbsp;completion</font>
              pletion is to be performed; `<b>complete</b>' is the simplest, but other completers exist to  perform
              related  tasks  such  as correction, or to modify the behaviour of a later completer.  See the
              section `Control Functions' below for more information.


             The <u>command</u> or a special <b>-</b><u>context</u><b>-</b>, just at it appears following the <b>#compdef</b> tag or the  <b>com</b>-<font color="#ffffff" class="whiteout">pdef&nbsp;compdef</font>
              <b>pdef</b>  function.   Completion functions for commands that have sub-commands usually modify this
              field to contain the name of the command followed by a minus sign and  the  sub-command.   For
              example,  the completion function for the <b>cvs</b> command sets this field to <b>cvs-add</b> when complet-<font color="#ffffff" class="whiteout">ing&nbsp;completing</font>
              ing arguments to the <b>add</b> subcommand.


             The <u>argument</u>; this indicates which command line or option argument  we  are  completing.   For
              command arguments this generally takes the form <b>argument-</b><u>n</u>, where <u>n</u> is the number of the argu-<font color="#ffffff" class="whiteout">ment,&nbsp;argument,</font>
              ment, and for arguments to options the form <b>option-</b><u>opt</u><b>-</b><u>n</u> where <u>n</u> is the number of the argument
              to  option  <u>opt</u>.   However,  this is only the case if the command line is parsed with standard
              UNIX-style options and arguments, so many completions do not set this.


             The <u>tag</u>.  As described previously, tags are used to discriminate between the types of  matches
              a  completion function can generate in a certain context.  Any completion function may use any
              tag name it likes, but a list of the more common ones is given below.


       The context is gradually put together as the functions are executed, starting  with  the  main  entry
       point,  which  adds  <b>:completion:</b> and the <u>function</u> element if necessary.  The completer then adds the
       <u>completer</u> element.  The contextual completion adds the <u>command</u> and <u>argument</u>  options.   Finally,  the
       <u>tag</u> is added when the types of completion are known.  For example, the context name

              <b>:completion::complete:dvips:option-o-1:files</b>

       says  that  normal  completion  was  attempted  as the first argument to the option <b>-o</b> of the command
       <b>dvips</b>:

              <b>dvips</b> <b>-o</b> <b>...</b>

       and the completion function will generate filenames.

       Usually completion will be tried for all possible tags in an order given by the completion  function.
       However, this can be altered by using the <b>tag-order</b> style.  Completion is then restricted to the list
       of given tags in the given order.

       The <b>_complete_help</b> bindable command shows all the contexts and tags available  for  completion  at  a
       particular  point.   This provides an easy way of finding information for <b>tag-order</b> and other styles.
       It is described in the section `Bindable Commands' below.

       Styles determine such things as how the matches are generated, similarly to shell  options  but  with
       much  more  control.   They can have any number of strings as their value.  They are defined with the
       <b>zstyle</b> builtin command (see <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>).

       When looking up styles the completion system uses full context names, including the tag.  Looking  up
       the  value  of a style therefore consists of two things:  the context, which may be matched as a pat-<font color="#ffffff" class="whiteout">tern,&nbsp;pattern,</font>
       tern, and the name of the style itself, which must be given exactly.

       For example, many completion functions can generate matches in a simple and a verbose  form  and  use
       the  <b>verbose</b>  style  to decide which form should be used.  To make all such functions use the verbose
       form, put

              <b>zstyle</b> <b>':completion:*'</b> <b>verbose</b> <b>yes</b>

       in a startup file (probably <b>.zshrc</b>).  This gives the <b>verbose</b> style the value  <b>yes</b>  in  every  context
       inside  the  completion  system,  unless  that context has a more specific definition.  It is best to
       avoid giving the context as `<b>*</b>' in case the style has some meaning outside the completion system.

       Many such general purpose styles can be configured simply by using the <b>compinstall</b> function.

       A more specific example of the use of the <b>verbose</b> style is by the completion for  the  <b>kill</b>  builtin.
       If  the  style is set, the builtin lists full job texts and process command lines; otherwise it shows
       the bare job numbers and PIDs.  To turn the style off for this use only:

              <b>zstyle</b> <b>':completion:*:*:kill:*'</b> <b>verbose</b> <b>no</b>

       For even more control, the style can use one of the tags `<b>jobs</b>' or `<b>processes</b>'.  To turn off  verbose
       display only for jobs:

              <b>zstyle</b> <b>':completion:*:*:kill:*:jobs'</b> <b>verbose</b> <b>no</b>

       The  <b>-e</b>  option  to <b>zstyle</b> even allows completion function code to appear as the argument to a style;
       this requires some understanding of the internals of completion functions (see  see  <a href="zshcompwid.1.html#//apple_ref/doc/man/1/zshcompwid"><u>zshcompwid</u>(1)</a>)).
       For example,

              <b>zstyle</b> <b>-e</b> <b>':completion:*'</b> <b>hosts</b> <b>'reply=($myhosts)'</b>

       This  forces  the value of the <b>hosts</b> style to be read from the variable <b>myhosts</b> each time a host name
       is needed; this is useful if the value of <b>myhosts</b> can change dynamically.  For another  useful  exam-<font color="#ffffff" class="whiteout">ple,&nbsp;example,</font>
       ple,  see  the  example  in  the description of the <b>file-list</b> style below.  This form can be slow and
       should be avoided for commonly examined styles such as <b>menu</b> and <b>list-rows-first</b>.

       Note that the order in which styles are <u>defined</u> does not matter; the style mechanism  uses  the  most
       specific  possible  match  for  a  particular  style to determine the set of values.  More precisely,
       strings are preferred over patterns (for example, `<b>:completion::complete:foo</b>' is more  specific  than
       `<b>:completion::complete:*'</b>), and longer patterns are preferred over shorter patterns.

       Style  names  like  those  of tags are arbitrary and depend on the completion function.  However, the
       following two sections list some of the most common tags and styles.


   <b>Standard</b> <b>Tags</b>
       Some of the following are only used when looking up particular styles and do not refer to a  type  of
       match.

       <b>accounts</b>
              used to look up the <b>users-hosts</b> style

       <b>all-expansions</b>
              used by the <b>_expand</b> completer when adding the single string containing all possible expansions

       <b>all-files</b>
              for the names of all files (as distinct from a particular subset, see the <b>globbed-files</b>  tag).

       <b>arguments</b>
              for arguments to a command

       <b>arrays</b> for names of array parameters

       <b>association-keys</b>
              for keys of associative arrays; used when completing inside a subscript to a parameter of this
              type

       <b>bookmarks</b>
              when completing bookmarks (e.g. for URLs and the <b>zftp</b> function suite)

       <b>builtins</b>
              for names of builtin commands

       <b>characters</b>
              for single characters in arguments of commands such as <b>stty</b>.   Also used when completing char-<font color="#ffffff" class="whiteout">acter&nbsp;character</font>
              acter classes after an opening bracket

       <b>colormapids</b>
              for X colormap ids

       <b>colors</b> for color names

       <b>commands</b>
              for  names  of  external  commands.  Also used by complex commands such as <b>cvs</b> when completing
              names subcommands.

       <b>contexts</b>
              for contexts in arguments to the <b>zstyle</b> builtin command

       <b>corrections</b>
              used by the <b>_approximate</b> and <b>_correct</b> completers for possible corrections

       <b>cursors</b>
              for cursor names used by X programs

       <b>default</b>
              used in some contexts to provide a way of supplying a default when more specific tags are also
              valid.  Note that this tag is used when only the <u>function</u> field of the context name is set

       <b>descriptions</b>
              used  when  looking  up  the  value  of the <b>format</b> style to generate descriptions for types of
              matches

       <b>devices</b>
              for names of device special files

       <b>directories</b>
              for names of directories

       <b>directory-stack</b>
              for entries in the directory stack

       <b>displays</b>
              for X display names

       <b>domains</b>
              for network domains

       <b>expansions</b>
              used by the <b>_expand</b> completer for individual words (as opposed to the complete set  of  expan-<font color="#ffffff" class="whiteout">sions)&nbsp;expansions)</font>
              sions) resulting from the expansion of a word on the command line

       <b>extensions</b>
              for X server extensions

       <b>file-descriptors</b>
              for numbers of open file descriptors

       <b>files</b>  the generic file-matching tag used by functions completing filenames

       <b>fonts</b>  for X font names

       <b>fstypes</b>
              for file system types (e.g. for the <b>mount</b> command)

       <b>functions</b>
              names of functions -- normally shell functions, although certain commands may understand other
              kinds of function

       <b>globbed-files</b>
              for filenames when the name has been generated by pattern matching

       <b>groups</b> for names of user groups

       <b>history-words</b>
              for words from the history

       <b>hosts</b>  for hostnames

       <b>indexes</b>
              for array indexes

       <b>jobs</b>   for jobs (as listed by the `<b>jobs</b>' builtin)

       <b>interfaces</b>
              for network interfaces

       <b>keymaps</b>
              for names of zsh keymaps

       <b>keysyms</b>
              for names of X keysyms

       <b>libraries</b>
              for names of system libraries

       <b>limits</b> for system limits

       <b>local-directories</b>
              for names of directories that are subdirectories of the current working  directory  when  com-<font color="#ffffff" class="whiteout">pleting&nbsp;completing</font>
              pleting arguments of <b>cd</b> and related builtin commands (compare <b>path-directories</b>)

       <b>manuals</b>
              for names of manual pages

       <b>mailboxes</b>
              for e-mail folders

       <b>maps</b>   for map names (e.g. NIS maps)

       <b>messages</b>
              used to look up the <b>format</b> style for messages

       <b>modifiers</b>
              for names of X modifiers

       <b>modules</b>
              for modules (e.g. <b>zsh</b> modules)

       <b>my-accounts</b>
              used to look up the <b>users-hosts</b> style

       <b>named-directories</b>
              for named directories (you wouldn't have guessed that, would you?)

       <b>names</b>  for all kinds of names

       <b>newsgroups</b>
              for USENET groups

       <b>nicknames</b>
              for nicknames of NIS maps

       <b>options</b>
              for command options

       <b>original</b>
              used by the <b>_approximate</b>, <b>_correct</b> and <b>_expand</b> completers when offering the original string as
              a match

       <b>other-accounts</b>
              used to look up the <b>users-hosts</b> style

       <b>packages</b>
              for packages (e.g. <b>rpm</b> or installed <b>Debian</b> packages)

       <b>parameters</b>
              for names of parameters

       <b>path-directories</b>
              for names of directories found by searching the <b>cdpath</b> array when completing arguments  of  <b>cd</b>
              and related builtin commands (compare <b>local-directories</b>)

       <b>paths</b>  used to look up the values of the <b>expand</b>, <b>ambiguous</b> and <b>special-dirs</b> styles

       <b>pods</b>   for perl pods (documentation files)

       <b>ports</b>  for communication ports

       <b>prefixes</b>
              for prefixes (like those of a URL)

       <b>printers</b>
              for print queue names

       <b>processes</b>
              for process identifiers

       <b>processes-names</b>
              used to look up the <b>command</b> style when generating the names of processes for <b>killall</b>

       <b>sequences</b>
              for sequences (e.g. <b>mh</b> sequences)

       <b>sessions</b>
              for sessions in the <b>zftp</b> function suite

       <b>signals</b>
              for signal names

       <b>strings</b>
              for strings (e.g. the replacement strings for the <b>cd</b> builtin command)

       <b>styles</b> for styles used by the zstyle builtin command

       <b>suffixes</b>
              for filename extensions

       <b>tags</b>   for tags (e.g. <b>rpm</b> tags)

       <b>targets</b>
              for makefile targets

       <b>time-zones</b>
              for time zones (e.g. when setting the <b>TZ</b> parameter)

       <b>types</b>  for types of whatever (e.g. address types for the <b>xhost</b> command)

       <b>urls</b>   used to look up the <b>urls</b> and <b>local</b> styles when completing URLs

       <b>users</b>  for usernames

       <b>values</b> for one of a set of values in certain lists

       <b>variant</b>
              used by <b>_pick_variant</b> to look up the command to run when determining what program is installed
              for a particular command name.

       <b>visuals</b>
              for X visuals

       <b>warnings</b>
              used to look up the <b>format</b> style for warnings

       <b>widgets</b>
              for zsh widget names

       <b>windows</b>
              for IDs of X windows

       <b>zsh-options</b>
              for shell options


   <b>Standard</b> <b>Styles</b>
       Note that the values of several of these styles represent boolean values.  Any of the strings `<b>true</b>',
       `<b>on</b>',  `<b>yes</b>',  and  `<b>1</b>' can be used for the value `true' and any of the strings `<b>false</b>', `<b>off</b>', `<b>no</b>',
       and `<b>0</b>' for the value `false'.  The behavior for any other value is undefined except where explicitly
       mentioned.  The default value may be either true or false if the style is not set.

       Some of these styles are tested first for every possible tag corresponding to a type of match, and if
       no style was found, for the <b>default</b> tag.  The most notable styles of this type are <b>menu</b>,  <b>list-colors</b>
       and  styles controlling completion listing such as <b>list-packed</b> and <b>last-prompt</b>).  When tested for the
       <b>default</b> tag, only the <u>function</u> field of the context will be set so that a style using the default tag
       will normally be defined along the lines of:

              <b>zstyle</b> <b>':completion:*:default'</b> <b>menu</b> <b>...</b>

       <b>accept-exact</b>
              This  is tested for the default tag in addition to the tags valid for the current context.  If
              it is set to `true' and any of the trial matches is the same as  the  string  on  the  command
              line,  this  match  will  immediately  be  accepted  (even if it would otherwise be considered
              ambiguous).

              When completing pathnames (where the tag used is `<b>paths</b>') this style  accepts  any  number  of
              patterns as the value in addition to the boolean values.  Pathnames matching one of these pat-<font color="#ffffff" class="whiteout">terns&nbsp;patterns</font>
              terns will be accepted immediately even if the command line contains some more partially typed
              pathname components and these match no file under the directory accepted.

              This  style is also used by the <b>_expand</b> completer to decide if words beginning with a tilde or
              parameter expansion should be expanded.  For example, if there are parameters <b>foo</b> and  <b>foobar</b>,
              the  string  `<b>$foo</b>' will only be expanded if <b>accept-exact</b> is set to `true'; otherwise the com-<font color="#ffffff" class="whiteout">pletion&nbsp;completion</font>
              pletion system will be allowed to complete <b>$foo</b> to <b>$foobar</b>. If the style is set to `continue',
              _expand  will  add  the expansion as a match and the completion system will also be allowed to
              continue.

       <b>add-space</b>
              This style is used by the <b>_expand</b> completer.  If it is true (the default),  a  space  will  be
              inserted  after  all  words  resulting from the expansion, or a slash in the case of directory
              names.  If the value is `<b>file</b>', the completer will only add  a  space  to  names  of  existing
              files.   Either a boolean true or the value `<b>file</b>' may be combined with `<b>subst</b>', in which case
              the completer will not add a space to words generated from the expansion of a substitution  of
              the form `<b>$(...)</b>' or `<b>${...}</b>'.

              The <b>_prefix</b> completer uses this style as a simple boolean value to decide if a space should be
              inserted before the suffix.

       <b>ambiguous</b>
              This applies when completing non-final components of filename paths, in other words those with
              a  trailing slash.  If it is set, the cursor is left after the first ambiguous component, even
              if menu completion is in use.  The style is always tested with the <b>paths</b> tag.

       <b>assign-list</b>
              When completing after an equals sign that is being treated as an  assignment,  the  completion
              system  normally completes only one filename.  In some cases the value  may be a list of file-<font color="#ffffff" class="whiteout">names&nbsp;filenames</font>
              names separated by colons, as with <b>PATH</b> and similar parameters.  This style can be  set  to  a
              list of patterns matching the names of such parameters.

              The default is to complete lists when the word on the line already contains a colon.

       <b>auto-description</b>
              If  set, this style's value will be used as the description for options that are not described
              by the completion functions, but that have exactly one argument.  The  sequence  `<b>%d</b>'  in  the
              value  will  be  replaced by the description for this argument.  Depending on personal prefer-<font color="#ffffff" class="whiteout">ences,&nbsp;preferences,</font>
              ences, it may be useful to set this style to something like `<b>specify:</b> <b>%d</b>'.  Note that this may
              not work for some commands.

       <b>avoid-completer</b>
              This  is  used by the <b>_all_matches</b> completer to decide if the string consisting of all matches
              should be added to the list currently being generated.  Its value is a list of names  of  com-<font color="#ffffff" class="whiteout">pleters.&nbsp;completers.</font>
              pleters.  If any of these is the name of the completer that generated the matches in this com-<font color="#ffffff" class="whiteout">pletion,&nbsp;completion,</font>
              pletion, the string will not be added.

              The default value for this style is `<b>_expand</b> <b>_old_list</b> <b>_correct</b> <b>_approximate</b>',  i.e.  it  con-<font color="#ffffff" class="whiteout">tains&nbsp;contains</font>
              tains the completers for which a string with all matches will almost never be wanted.

       <b>cache-path</b>
              This  style  defines  the  path  where  any  cache files containing dumped completion data are
              stored.  It defaults to `<b>$ZDOTDIR/.zcompcache</b>', or  `<b>$HOME/.zcompcache</b>'  if  <b>$ZDOTDIR</b>  is  not
              defined.  The completion cache will not be used unless the <b>use-cache</b> style is set.

       <b>cache-policy</b>
              This  style defines the function that will be used to determine whether a cache needs rebuild-<font color="#ffffff" class="whiteout">ing.&nbsp;rebuilding.</font>
              ing.  See the section on the <b>_cache_invalid</b> function below.

       <b>call-command</b>
              This style is used in the function for commands such as <b>make</b> and <b>ant</b> where calling the command
              directly  to  generate  matches suffers problems such as being slow or, as in the case of <b>make</b>
              can potentially causes actions in the makefile to be executed. If it is set to `true' the com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
              mand is called to generate matches. The default value of this style is `false'.

       <b>command</b>
              In  many  places,  completion functions need to call external commands to generate the list of
              completions.  This style can be used to override the command  that  is  called  in  some  such
              cases.   The  elements  of the value are joined with spaces to form a command line to execute.
              The value can also start with a hyphen, in which case the usual command will be added  to  the
              end;  this  is most useful for putting `<b>builtin</b>' or `<b>command</b>' in front to make sure the appro-<font color="#ffffff" class="whiteout">priate&nbsp;appropriate</font>
              priate version of a command is called, for example to avoid calling a shell function with  the
              same name as an external command.

              As  an example, the completion function for process IDs uses this style with the <b>processes</b> tag
              to generate the IDs to complete and the list of processes to display (if the <b>verbose</b> style  is
              `true').  The list produced by the command should look like the output of the <b>ps</b> command.  The
              first line is not displayed, but is searched for the string `<b>PID</b>' (or `<b>pid</b>') to find the posi-<font color="#ffffff" class="whiteout">tion&nbsp;position</font>
              tion of the process IDs in the following lines.  If the line does not contain `<b>PID</b>', the first
              numbers in each of the other lines are taken as the process IDs to complete.

              Note that the completion function generally has to call the specified command for each attempt
              to  generate  the  completion  list.  Hence care should be taken to specify only commands that
              take a short time to run, and in particular to avoid any that may never terminate.

       <b>command-path</b>
              This is a list of directories to search for commands to complete.  The default for this  style
              is the value of the special parameter <b>path</b>.

       <b>commands</b>
              This  is  used  by  the function completing sub-commands for the system initialisation scripts
              (residing in <b>/etc/init.d</b> or somewhere not too far  away  from  that).   Its  values  give  the
              default  commands  to complete for those commands for which the completion function isn't able
              to find them out automatically.  The default for this style are the two  strings  `<b>start</b>'  and
              `<b>stop</b>'.

       <b>complete</b>
              This  is  used by the <b>_expand_alias</b> function when invoked as a bindable command.  If it set to
              `true' and the word on the command line is not the name of an alias, matching alias names will
              be completed.

       <b>completer</b>
              The  strings  given as the value of this style provide the names of the completer functions to
              use. The available completer functions are described in the section `Control Functions' below.

              Each  string  may  be  either  the name of a completer function or a string of the form `<u>func</u>-<font color="#ffffff" class="whiteout">tion:name'.&nbsp;`function:name'.</font>
              <u>tion</u><b>:</b><u>name</u>'.  In the first case the <u>completer</u> field of the context will contain the name of the
              completer  without  the leading underscore and with all other underscores replaced by hyphens.
              In the second case the <u>function</u> is the name of the completer to call,  but  the  context  will
              contain  the user-defined <u>name</u> in the <u>completer</u> field of the context.  If the <u>name</u> starts with
              a hyphen, the string for the context will be build from the name of the completer function  as
              in the first case with the <u>name</u> appended to it.  For example:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>_complete</b> <b>_complete:-foo</b>

              Here, completion will call the <b>_complete</b> completer twice, once using `<b>complete</b>' and once using
              `<b>complete-foo</b>' in the <u>completer</u> field of the context.  Normally, using the same completer more
              than  once  only  makes  sense when used with the `<u>functions</u><b>:</b><u>name</u>' form, because otherwise the
              context name will be the same in all calls to the completer; possible exceptions to this  rule
              are the <b>_ignored</b> and <b>_prefix</b> completers.

              The  default value for this style is `<b>_complete</b> <b>_ignored</b>': only completion will be done, first
              using the <b>ignored-patterns</b> style and the <b>$fignore</b> array and then without ignoring matches.

       <b>condition</b>
              This style is used by the <b>_list</b> completer function to decide if insertion of matches should be
              delayed unconditionally. The default is `true'.

       <b>disabled</b>
              If  this is set to `true', the <b>_expand_alias</b> completer and bindable command will try to expand
              disabled aliases, too.  The default is `<b>false</b>'.

       <b>disable-stat</b>
              This is used with an empty tag by the <b>_cvs</b> function to  decide  whether  the  <b>zsh/stat</b>  module
              should be used to generate names of modified files in the appropriate places (this is its only
              use).  If the style is set, completion will use the <b>ls</b> command.

       <b>domains</b>
              A list of names of network domains for completion.  If this is not set, domain names  will  be
              taken from the file <b>/etc/resolv.conf</b>.

       <b>expand</b> This style is used when completing strings consisting of multiple parts, such as path names.

              If  one  of  its values is the string `<b>prefix</b>', the partially typed word from the line will be
              expanded as far as possible even if trailing parts cannot be completed.

              If one of its values is the string `<b>suffix</b>', matching names for  components  after  the  first
              ambiguous  one  will also be added.  This means that the resulting string is the longest unam-<font color="#ffffff" class="whiteout">biguous&nbsp;unambiguous</font>
              biguous string possible.  However, menu completion can be used to cycle through all matches.

       <b>fake</b>   This style may be set for any completion context.  It specifies additional strings  that  will
              always  be  completed  in  that  context.  The form of each string is `<u>value</u><b>:</b><u>description</u>'; the
              colon and description may be omitted, but any literal colons in <u>value</u> must be  quoted  with  a
              backslash.  Any <u>description</u> provided is shown alongside the value in completion listings.

              It  is important to use a sufficiently restrictive context when specifying fake strings.  Note
              that the styles <b>fake-files</b> and <b>fake-parameters</b> provide  additional  features  when  completing
              files or parameters.

       <b>fake-always</b>
              This works identically to the <b>fake</b> style except that the <b>ignored-patterns</b> style is not applied
              to it.  This makes it possible to override a set of matches completely by setting the  ignored
              patterns to `<b>*</b>'.

              The  following  shows a way of supplementing any tag with arbitrary data, but having it behave
              for display purposes like a separate tag.   In  this  example  we  use  the  features  of  the
              <b>tag-order</b>  style  to divide the <b>named-directories</b> tag into two when performing completion with
              the standard completer <b>complete</b> for arguments of <b>cd</b>.  The tag <b>named-directories-normal</b> behaves
              as  normal,  but the tag <b>named-directories-mine</b> contains a fixed set of directories.  This has
              the effect of adding the match group `<b>extra</b> <b>directories</b>' with the given completions.

                     <b>zstyle</b> <b>':completion::complete:cd:*'</b> <b>tag-order</b> <b>\</b>
                       <b>'named-directories:-mine:extra\</b> <b>directories</b>
                       <b>named-directories:-normal:named\</b> <b>directories</b> <b>*'</b>
                     <b>zstyle</b> <b>':completion::complete:cd:*:named-directories-mine'</b> <b>\</b>
                       <b>fake-always</b> <b>mydir1</b> <b>mydir2</b>
                     <b>zstyle</b> <b>':completion::complete:cd:*:named-directories-mine'</b> <b>\</b>
                       <b>ignored-patterns</b> <b>'*'</b>

       <b>fake-files</b>
              This style is used when completing files and looked up without a tag.  Its values are  of  the
              form  `<u>dir</u><b>:</b><u>names...</u>'.   This  will  add  the  <u>names</u>  (strings separated by spaces) as possible
              matches when completing in the directory <u>dir</u>, even if no such files really exist.

              This can be useful on systems that support special filesystems whose top-level  pathnames  can
              not  be listed or generated with glob patterns.  It can also be used for directories for which
              one does not have read permission.

       <b>fake-parameters</b>
              This is used by the completion function for parameter names.  Its values are names of  parame-<font color="#ffffff" class="whiteout">ters&nbsp;parameters</font>
              ters  that  might  not  yet be set but should be completed nonetheless.  Each name may also be
              followed by a colon and a string specifying the type of the parameter (like `<b>scalar</b>',  `<b>array</b>'
              or  `<b>integer</b>').   If  the type is given, the name will only be completed if parameters of that
              type are required in the particular context.  Names for which no type is specified will always
              be completed.

       <b>file-list</b>
              This  style  controls  whether  files completed using the standard builtin mechanism are to be
              listed with a long list similar to <b>ls</b> <b>-l</b>.  Note  that  this  feature  uses  the  shell  module
              <b>zsh/stat</b>  for  file  information;  this loads the builtin <b>stat</b> which will replace any external
              <b>stat</b> executable.  To avoid this the following code can be included in an initialization file:

                     <b>zmodload</b> <b>-i</b> <b>zsh/stat</b>
                     <b>disable</b> <b>stat</b>

              The style may either be set to a true value (or `<b>all</b>'), or  one  of  the  values  `<b>insert</b>'  or
              `<b>list</b>',  indicating  that  files are to be listed in long format in all circumstances, or when
              attempting to insert a file name, or when listing file names without attempting to insert one.

              More  generally,  the value may be an array of any of the above values, optionally followed by
              <b>=</b><u>num</u>.  If <u>num</u> is present it gives the maximum number of matches for which long  listing  style
              will be used.  For example,

                     <b>zstyle</b> <b>':completion:*'</b> <b>file-list</b> <b>list=20</b> <b>insert=10</b>

              specifies  that  long format will be used when listing up to 20 files or inserting a file with
              up to 10 matches (assuming a listing is to be shown at all, for example on an  ambiguous  com-<font color="#ffffff" class="whiteout">pletion),&nbsp;completion),</font>
              pletion), else short format will be used.

                     <b>zstyle</b> <b>-e</b> <b>':completion:*'</b> <b>file-list</b> <b>'((</b> <b>${+NUMERIC}</b> <b>))</b> <b>&amp;&amp;</b> <b>reply=(true)'</b>

              specifies  that  long  format will be used any time a numeric argument is supplied, else short
              format.

       <b>file-patterns</b>
              This is used by the standard function for completing filenames, <b>_files</b>.  If the style is unset
              up  to three tags are offered, `<b>globbed-files</b>',`<b>directories</b>' and `<b>all-files</b>', depending on the
              types of files  expected by the caller of <b>_files</b>.  The first two (`<b>globbed-files</b>' and  `<b>direc</b>-<font color="#ffffff" class="whiteout">tories')&nbsp;`directories')</font>
              <b>tories</b>') are normally offered together to make it easier to complete files in sub-directories.

              The <b>file-patterns</b> style provides alternatives to the default tags, which are  not  used.   Its
              value  consists  of  elements of the form `<u>pattern</u><b>:</b><u>tag</u>'; each string may contain any number of
              such specifications separated by spaces.

              The <u>pattern</u> is a pattern that is to be used to generate  filenames.   Any  occurrence  of  the
              sequence  `<b>%p</b>' is replaced by any <!-- a -->pattern(s)<!-- /a --> passed by the function calling <b>_files</b>.  Colons in
              the pattern must be preceded by a backslash to make them distinguishable from the colon before
              the  <u>tag</u>.   If more than one pattern is needed, the patterns can be given inside braces, sepa-<font color="#ffffff" class="whiteout">rated&nbsp;separated</font>
              rated by commas.

              The <u>tag</u>s of all strings in the value will be offered by <b>_files</b> and used when looking up  other
              styles.   Any  <u>tag</u>s  in the same word will be offered at the same time and before later words.
              If no `<b>:</b><u>tag</u>' is given the `<b>files</b>' tag will be used.

              The <u>tag</u> may also be followed by an optional second colon and a description, which will be used
              for the `<b>%d</b>' in the value of the <b>format</b> style (if that is set) instead of the default descrip-<font color="#ffffff" class="whiteout">tion&nbsp;description</font>
              tion supplied by the completion function.  If the description given  here  contains  itself  a
              `<b>%d</b>', that is replaced with the description supplied by the completion function.

              For  example,  to  make  the <b>rm</b> command first complete only names of object files and then the
              names of all files if there is no matching object file:

                     <b>zstyle</b> <b>':completion:*:*:rm:*'</b> <b>file-patterns</b> <b>\</b>
                         <b>'*.o:object-files'</b> <b>'%p:all-files'</b>

              To alter the default behaviour of file completion -- offer files matching a pattern and direc-<font color="#ffffff" class="whiteout">tories&nbsp;directories</font>
              tories  on  the  first  attempt,  then  all files -- to offer only matching files on the first
              attempt, then directories, and finally all files:

                     <b>zstyle</b> <b>':completion:*'</b> <b>file-patterns</b> <b>\</b>
                         <b>'%p:globbed-files'</b> <b>'*(-/):directories'</b> <b>'*:all-files'</b>

              This works even where there is no special pattern: <b>_files</b> matches all files using the  pattern
              `<b>*</b>' at the first step and stops when it sees this pattern.  Note also it will never try a pat-<font color="#ffffff" class="whiteout">tern&nbsp;pattern</font>
              tern more than once for a single completion attempt.

              During the execution of completion functions, the <b>EXTENDED_GLOB</b> option is in  effect,  so  the
              characters `<b>#</b>', `<b>~</b>' and `<b>^</b>' have special meanings in the patterns.

       <b>file-sort</b>
              The  standard filename completion function uses this style without a tag to determine in which
              order the names should be listed; menu completion will cycle through them in the  same  order.
              The possible values are: `<b>size</b>' to sort by the size of the file; `<b>links</b>' to sort by the number
              of links to the file; `<b>modification</b>' (or `<b>time</b>' or `<b>date</b>') to sort by  the  last  modification
              time;  `<b>access</b>' to sort by the last access time; and `<b>inode</b>' (or `<b>change</b>') to sort by the last
              inode change time.  If the style is set to any other value, or is unset, files will be  sorted
              alphabetically  by  name.   If the value contains the string `<b>reverse</b>', sorting is done in the
              opposite order.

       <b>filter</b> This is used by the LDAP plugin for e-mail address completion to  specify  the  attributes  to
              match  against  when filtering entries.  So for example, if the style is set to `<b>sn</b>', matching
              is done against surnames.  Standard LDAP filtering is used so normal  completion  matching  is
              bypassed.  If this style is not set, the LDAP plugin is skipped.  You may also need to set the
              <b>command</b> style to specify how to connect to your LDAP server.

       <b>force-list</b>
              This forces a list of completions to be shown at any point where  listing  is  done,  even  in
              cases  where  the  list  would  usually be suppressed.  For example, normally the list is only
              shown if there are at least two different matches.  By setting this  style  to  `<b>always</b>',  the
              list  will  always  be  shown,  even  if there is only a single match that will immediately be
              accepted.  The style may also be set to a number.  In this case the  list  will  be  shown  if
              there are at least that many matches, even if they would all insert the same string.

              This style is tested for the default tag as well as for each tag valid for the current comple-<font color="#ffffff" class="whiteout">tion.&nbsp;completion.</font>
              tion.  Hence the listing can be forced only for certain types of match.

       <b>format</b> If this is set for the <b>descriptions</b> tag, its value is  used  as  a  string  to  display  above
              matches  in  completion lists.  The sequence `<b>%d</b>' in this string will be replaced with a short
              description of what these matches are.  This string may also contain the sequences to  specify
              output attributes, such as `<b>%B</b>', `<b>%S</b>' and `<b>%{</b>...<b>%}</b>'.

              The style is tested with each tag valid for the current completion before it is tested for the
              <b>descriptions</b> tag.  Hence different format strings can be defined for different types of match.

              Note  also that some completer functions define additional `<b>%</b>'-sequences.  These are described
              for the completer functions that make use of them.

              Some completion functions display messages that may be customised by setting  this  style  for
              the <b>messages</b> tag.  Here, the `<b>%d</b>' is replaced with a message given by the completion function.

              Finally, the format string is looked up with the <b>warnings</b> tag, for use when no  matches  could
              be  generated at all.  In this case the `<b>%d</b>' is replaced with the descriptions for the matches
              that were expected separated by spaces.  The sequence `<b>%D</b>' is replaced with the same  descrip-<font color="#ffffff" class="whiteout">tions&nbsp;descriptions</font>
              tions separated by newlines.

              It  is  possible  to  use  printf-style  field  width  specifiers with `<b>%d</b>' and similar escape
              sequences.  This is handled by the <b>zformat</b> builtin command from the <b>zsh/zutil</b> module, see <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zsh</u></a>-<font color="#ffffff" class="whiteout">modules(1).&nbsp;zshmodules(1).</font>
              <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>modules</u>(1)</a>.

       <b>glob</b>   This is used by the <b>_expand</b> completer.  If it is set to `true' (the default), globbing will be
              attempted on the words resulting from a previous substitution (see the  <b>substitute</b>  style)  or
              else the original string from the line.

       <b>global</b> If  this is set to `true' (the default), the <b>_expand_alias</b> completer and bindable command will
              try to expand global aliases.

       <b>group-name</b>
              The completion system can group different types of matches, which appear  in  separate  lists.
              This  style can be used to give the names of groups for particular tags.  For example, in com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
              mand position the completion system generates names of builtin and external commands, names of
              aliases,  shell  functions and parameters and reserved words as possible completions.  To have
              the external commands and shell functions listed separately:

                     <b>zstyle</b> <b>':completion:*:*:-command-:*:commands'</b> <b>group-name</b> <b>commands</b>
                     <b>zstyle</b> <b>':completion:*:*:-command-:*:functions'</b> <b>group-name</b> <b>functions</b>

              As a consequence, any match with the same tag will be displayed in the same group.

              If the name given is the empty string the name of the tag for the matches will be used as  the
              name  of  the group.  So, to have all different types of matches displayed separately, one can
              just set:

                     <b>zstyle</b> <b>':completion:*'</b> <b>group-name</b> <b>''</b>

              All matches for which no group name is defined will be put in a group named <b>-default-</b>.

       <b>group-order</b>
              This style is additional to the <b>group-name</b> style to specify  the  order  for  display  of  the
              groups  defined by that style (compare <b>tag-order</b>, which determines which completions appear at
              all).  The groups named are shown in the given order; any other groups are shown in the  order
              defined by the completion function.

              For  example,  to have names of builtin commands, shell functions and external commands appear
              in that order when completing in command position:

                     <b>zstyle</b> <b>':completion:*:*:-command-:*'</b> <b>group-order</b> <b>\</b>
                            <b>builtins</b> <b>functions</b> <b>commands</b>

       <b>groups</b> A list of names of UNIX groups.  If this is not set, group names are taken from the  YP  data-<font color="#ffffff" class="whiteout">base&nbsp;database</font>
              base or the file `<b>/etc/group</b>'.

       <b>hidden</b> If  this  is  set  to  true,  matches  for  the given context will not be listed, although any
              description for the matches set with the <b>format</b> style will be shown.  If it is set  to  `<b>all</b>',
              not even the description will be displayed.

              Note  that the matches will still be completed; they are just not shown in the list.  To avoid
              having matches considered as possible completions at all, the <b>tag-order</b> style can be  modified
              as described below.

       <b>hosts</b>  A  list  of  names of hosts that should be completed.  If this is not set, hostnames are taken
              from the file `<b>/etc/hosts</b>'.

       <b>hosts-ports</b>
              This style is used by commands that need or accept hostnames and network ports.   The  strings
              in the value should be of the form `<u>host</u><b>:</b><u>port</u>'.  Valid ports are determined by the presence of
              hostnames; multiple ports for the same host may appear.

       <b>ignore-line</b>
              This is tested for each tag valid for the current completion.  If it is set to `<b>true</b>', none of
              the  words  that are already on the line will be considered as possible completions.  If it is
              set to `<b>current</b>', the word the cursor is on will not be considered as a  possible  completion.
              The  value `<b>current-shown</b>' is similar but only applies if the list of completions is currently
              shown on the screen.  Finally, if the style is set to `<b>other</b>', no word apart from the  current
              one will be considered as a possible completion.

              The  values  `<b>current</b>'  and  `<b>current-shown</b>'  are  a bit like the opposite of the <b>accept-exact</b>
              style:  only strings with missing characters will be completed.

              Note that you almost certainly don't want to set this to `true' or `<b>other</b>' for a general  con-<font color="#ffffff" class="whiteout">text&nbsp;context</font>
              text  such  as `<b>:completion:*</b>'.  This is because it would disallow completion of, for example,
              options multiple times even if the command in question accepts the option more than once.

       <b>ignore-parents</b>
              The style is tested without a tag by the function completing pathnames in order  to  determine
              whether  to ignore the names of directories already mentioned in the current word, or the name
              of the current working directory.  The value  must  include  one  or  both  of  the  following
              strings:

              <b>parent</b> The  name  of  any directory whose path is already contained in the word on the line is
                     ignored.  For example, when completing after <b>foo/../</b>, the directory  <b>foo</b>  will  not  be
                     considered a valid completion.

              <b>pwd</b>    The  name  of  the current working directory will not be completed; hence, for example,
                     completion after <b>../</b> will not use the name of the current directory.

              In addition, the value may include one or both of:

              <b>..</b>     Ignore the specified directories only when the word on the line contains the  substring
                     `<b>../</b>'.

              <b>directory</b>
                     Ignore the specified directories only when names of directories are completed, not when
                     completing names of files.

              Excluded values act in a similar fashion to values of the <b>ignored-patterns</b> style, so they  can
              be restored to consideration by the <b>_ignored</b> completer.

       <b>ignored-patterns</b>
              A  list  of  patterns; any trial completion matching one of the patterns will be excluded from
              consideration.  The <b>_ignored</b> completer can appear in the list of  completers  to  restore  the
              ignored matches.  This is a more configurable version of the shell parameter <b>$fignore</b>.

              Note that the <b>EXTENDED_GLOB</b> option is set during the execution of completion functions, so the
              characters `<b>#</b>', `<b>~</b>' and `<b>^</b>' have special meanings in the patterns.

       <b>insert</b> This style is used by the <b>_all_matches</b> completer to decide whether to insert the list  of  all
              matches unconditionally instead of adding the list as another match.

       <b>insert-ids</b>
              When  completing  process IDs, for example as arguments to the <b>kill</b> and <b>wait</b> builtins the name
              of a command may be converted to the appropriate  process  ID.   A  problem  arises  when  the
              process  name  typed is not unique.  By default (or if this style is set explicitly to `<b>menu</b>')
              the name will be converted immediately to a set of possible IDs, and menu completion  will  be
              started to cycle through them.

              If  the value of the style is `<b>single</b>', the shell will wait until the user has typed enough to
              make the command unique before converting the name to an ID; attempts at  completion  will  be
              unsuccessful  until  that  point.   If  the value is any other string, menu completion will be
              started when the string typed by the user is longer than the common prefix to the  correspond-<font color="#ffffff" class="whiteout">ing&nbsp;corresponding</font>
              ing IDs.

       <b>insert-tab</b>
              If this is set to `true', the completion system will insert a TAB character (assuming that was
              used to start completion) instead of performing completion when there is no non-blank  charac-<font color="#ffffff" class="whiteout">ter&nbsp;character</font>
              ter to the left of the cursor.  If it is set to `false', completion will be done even there.

              The value may also contain the substrings `<b>pending</b>' or `<b>pending=</b><u>val</u>'.  In this case, the typed
              character will be inserted instead of staring completion when there is unprocessed input pend-<font color="#ffffff" class="whiteout">ing.&nbsp;pending.</font>
              ing.   If  a <u>val</u> is given, completion will not be done if there are at least that many charac-<font color="#ffffff" class="whiteout">ters&nbsp;characters</font>
              ters of unprocessed input.  This is often useful when  pasting  characters  into  a  terminal.
              Note  however,  that it relies on the <b>$PENDING</b> special parameter from the <b>zsh/zle</b> module being
              set properly which is not guaranteed on all platforms.

              The default value of this style is `true' except for completion within <b>vared</b>  builtin  command
              where it is `false'.

       <b>insert-unambiguous</b>
              This  is used by the <b>_match</b> and <b>_approximate</b> completers.  These completers are often used with
              menu completion since the word typed may bear little  resemblance  to  the  final  completion.
              However,  if  this  style is `true', the completer will start menu completion only if it could
              find no unambiguous initial string at least as long as the original string typed by the  user.

              In  the  case  of  the <b>_approximate</b> completer, the completer field in the context will already
              have been set to one of <b>correct-</b><u>num</u> or <b>approximate-</b><u>num</u>, where <u>num</u> is the number of errors that
              were accepted.

              In  the case of the <b>_match</b> completer, the style may also be set to the string `<b>pattern</b>'.  Then
              the pattern on the line is left unchanged if it does not match unambiguously.

       <b>keep-prefix</b>
              This style is used by the <b>_expand</b> completer.  If it is `true', the completer will try to  keep
              a  prefix  containing  a  tilde or parameter expansion.  Hence, for example, the string `<b>~/f*</b>'
              would be expanded to `<b>~/foo</b>' instead of `<b>/home/user/foo</b>'.  If the style is  set  to  `<b>changed</b>'
              (the  default), the prefix will only be left unchanged if there were other changes between the
              expanded words and the original word from the command line.  Any other value forces the prefix
              to be expanded unconditionally.

              The  behaviour  of expand when this style is true is to cause <b>_expand</b> to give up when a single
              expansion with the restored prefix is the same as the original; hence any remaining completers
              may be called.

       <b>last-prompt</b>
              This  is a more flexible form of the <b>ALWAYS_LAST_PROMPT</b> option.  If it is true, the completion
              system will try to return the cursor to the previous command line after displaying  a  comple-<font color="#ffffff" class="whiteout">tion&nbsp;completion</font>
              tion  list.  It is tested for all tags valid for the current completion, then the <b>default</b> tag.
              The cursor will be moved back to the previous line if this style is `true' for  all  types  of
              match.  Note that unlike the <b>ALWAYS_LAST_PROMPT</b> option this is independent of the numeric pre-<font color="#ffffff" class="whiteout">fix&nbsp;prefix</font>
              fix argument.

       <b>known-hosts-files</b>
              This style should contain a list of files to search for host names and (if the <b>use-ip</b> style is
              set)  IP  addresses  in a format compatible with ssh <b>known_hosts</b> files.  If it is not set, the
              files <b>/etc/ssh/ssh_known_hosts</b> and <b>~/.ssh/known_hosts</b> are used.

       <b>list</b>   This style is used by the <b>_history_complete_word</b> bindable command.  If it is set to `true'  it
              has  no  effect.  If it is set to `false' matches will not be listed.  This overrides the set-<font color="#ffffff" class="whiteout">ting&nbsp;setting</font>
              ting of the options controlling listing  behaviour,  in  particular  <b>AUTO_LIST</b>.   The  context
              always starts with `<b>:completion:history-words</b>'.

       <b>list-colors</b>
              If  the  <b>zsh/complist</b>  module  is  loaded, this style can be used to set color specifications.
              This mechanism replaces the use of the <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters described in  the
              section `The zsh/complist Module' in <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>, but the syntax is the same.

              If this style is set for the <b>default</b> tag, the strings in the value are taken as specifications
              that are to be used everywhere.  If it is set for other tags, the specifications are used only
              for  matches  of  the  type described by the tag.  For this to work best, the <b>group-name</b> style
              must be set to an empty string.

              In addition to setting styles for specific tags, it is also possible to use group names speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
              fied  explicitly  by  the  <b>group-name</b>  tag  together  with the `<b>(group)</b>' syntax allowed by the
              <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters and simply using the <b>default</b> tag.

              It is possible to use any color specifications already set up for the GNU version  of  the  <b>ls</b>
              command:

                     <b>zstyle</b> <b>':completion:*:default'</b> <b>list-colors</b> <b>${(s.:.)LS_COLORS}</b>

              The  default  colors are the same as for the GNU <b>ls</b> command and can be obtained by setting the
              style to an empty string (i.e. <b>''</b>).

       <b>list-grouped</b>
              If this style is `true' (the default), the completion system will try to make certain  comple-<font color="#ffffff" class="whiteout">tion&nbsp;completion</font>
              tion  listings  more compact by grouping matches.  For example, options for commands that have
              the same description (shown when the <b>verbose</b> style is set to `true') will appear as  a  single
              entry.  However, menu selection can be used to cycle through all the matches.

       <b>list-packed</b>
              This is tested for each tag valid in the current context as well as the <b>default</b> tag.  If it is
              set to `true', the corresponding matches appear in listings as if the <b>LIST_PACKED</b> option  were
              set.  If it is set to `false', they are listed normally.

       <b>list-prompt</b>
              If this style is set for the <b>default</b> tag, completion lists that don't fit on the screen can be
              scrolled (see the description of the <b>zsh/complist</b> module in <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>).  The value, if not
              the  empty string, will be displayed after every screenful and the shell will prompt for a key
              press; if the style is set to the empty string, a default prompt will be used.

              The value may contain the escape sequences: `<b>%l</b>' or `<b>%L</b>', which will be replaced by the number
              of  the  last  line  displayed  and the total number of lines; `<b>%m</b>' or `<b>%M</b>', the number of the
              last match shown and the total number of matches; and `<b>%p</b>' and `<b>%P</b>', `<b>Top</b>' when at the  begin-<font color="#ffffff" class="whiteout">ning&nbsp;beginning</font>
              ning of the list, `<b>Bottom</b>' when at the end and the position shown as a percentage of the total
              length otherwise.  In each case the form with the uppercase  letter  will  be  replaced  by  a
              string  of  fixed  width,  padded  to the  right with spaces, while the lowercase form will be
              replaced by a variable width string.  As in other prompt strings, the escape  sequences  `<b>%S</b>',
              `<b>%s</b>',  `<b>%B</b>',  `<b>%b</b>',  `<b>%U</b>',  `<b>%u</b>' for entering and leaving the display modes standout, bold and
              underline are also available, as is the form `<b>%{</b>...<b>%}</b>' for enclosing  escape  sequences  which
              display with zero width.

              After deleting this prompt the variable <b>LISTPROMPT</b> should be unset for the the removal to take
              effect.

       <b>list-rows-first</b>
              This style is tested in the same way as the <b>list-packed</b> style and determines  whether  matches
              are to be listed in a rows-first fashion as if the <b>LIST_ROWS_FIRST</b> option were set.

       <b>list-suffixes</b>
              This style is used by the function that completes filenames.  If it is true, and completion is
              attempted on a string containing multiple partially typed pathname components,  all  ambiguous
              components will be shown.  Otherwise, completion stops at the first ambiguous component.

       <b>list-separator</b>
              The  value of this style is used in completion listing to separate the string to complete from
              a description when possible  (e.g.  when  completing  options).   It  defaults  to  `<b>--</b>'  (two
              hyphens).

       <b>local</b>  This is for use with functions that complete URLs for which the corresponding files are avail-<font color="#ffffff" class="whiteout">able&nbsp;available</font>
              able directly from the filing system.  Its value should consist of three strings: a  hostname,
              the  path to the default web pages for the server, and the directory name used by a user plac-<font color="#ffffff" class="whiteout">ing&nbsp;placing</font>
              ing web pages within their home area.

              For example:

                     <b>zstyle</b> <b>':completion:*'</b> <b>local</b> <b>toast</b> <b>\</b>
                         <b>/var/http/public/toast</b> <b>public_html</b>

              Completion after `<a href="http://toast/stuff/"><b>http://toast/stuff/</b></a>' will look for files  in  the  directory  <b>/var/http/pub</b>-
              <b>lic/toast/stuff</b>,   while  completion  after `<a href="http://toast/~yousir/"><b>http://toast/~yousir/</b></a>' will look for files in the
              directory <b>~yousir/public_html</b>.

       <b>mail-directory</b>
              If set, zsh will assume that mailbox files can  be  found  in  the  directory  specified.   It
              defaults to `<b>~/Mail</b>'.

       <b>match-original</b>
              This  is  used  by  the  <b>_match</b>  completer.  If it is set to <b>only</b>, <b>_match</b> will try to generate
              matches without inserting a `<b>*</b>' at the cursor position.  If set to any other non-empty  value,
              it will first try to generate matches without inserting the `<b>*</b>' and if that yields no matches,
              it will try again with the `<b>*</b>' inserted.  If it is unset or set to the empty string,  matching
              will only be performed with the `<b>*</b>' inserted.

       <b>matcher</b>
              This style is tested separately for each tag valid in the current context.  Its value is added
              to any match specifications given by the  <b>matcher-list</b>  style.   It  should  be  in  the  form
              described in the section `Matching Control' in <a href="zshcompwid.1.html#//apple_ref/doc/man/1/zshcompwid"><u>zshcompwid</u>(1)</a>.

       <b>matcher-list</b>
              This  style  can  be  set to a list of match specifications that are to be applied everywhere.
              Match specifications are described in the section `Matching Control'  in  <a href="zshcompwid.1.html#//apple_ref/doc/man/1/zshcompwid"><u>zshcompwid</u>(1)</a>.   The
              completion  system  will try them one after another for each completer selected.  For example,
              to try first simple completion and, if that generates no matches, case-insensitive completion:

                     <b>zstyle</b> <b>':completion:*'</b> <b>matcher-list</b> <b>''</b> <b>'m:{a-zA-Z}={A-Za-z}'</b>

              By  default  each specification replaces the previous one; however, if a specification is pre-
              fixed with <b>+</b>, it is added to the existing list.  Hence it is possible to  create  increasingly
              general specifications without repetition:

                     <b>zstyle</b> <b>':completion:*'</b> <b>matcher-list</b> <b>''</b> <b>'+m{a-Z}={A-Z}'</b> <b>'+m{A-Z}={a-z}'</b>

              It  is  possible  to  create match specifications valid for particular completers by using the
              third field of the context.  For example, to use the completers <b>_complete</b> and <b>_prefix</b> but only
              allow case-insensitive completion with <b>_complete</b>:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>_complete</b> <b>_prefix</b>
                     <b>zstyle</b> <b>':completion:*:complete:*'</b> <b>matcher-list</b> <b>\</b>
                            <b>''</b> <b>'m:{a-zA-Z}={A-Za-z}'</b>

              User-defined names, as explained for the <b>completer</b> style, are available.  This makes it possi-
              ble to try the same completer more than once with different match  specifications  each  time.
              For  example,  to  try normal completion without a match specification, then normal completion
              with case-insensitive matching, then correction, and finally partial-word completion:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>_complete</b> <b>_correct</b> <b>_complete:foo</b>
                     <b>zstyle</b> <b>':completion:*:complete:*'</b> <b>matcher-list</b> <b>\</b>
                         <b>''</b> <b>'m:{a-zA-Z}={A-Za-z}'</b>
                     <b>zstyle</b> <b>':completion:*:foo:*'</b> <b>matcher-list</b> <b>\</b>
                         <b>'m:{a-zA-Z}={A-Za-z}</b> <b>r:|[-_./]=*</b> <b>r:|=*'</b>

              If the style is unset in any context no match specification is applied.  Note also  that  some
              completers  such  as  <b>_correct</b>  and  <b>_approximate</b>  do not use the match specifications at all,
              though these completers will only ever called once even if the <b>matcher-list</b> contains more than
              one element.

              Where  multiple  specifications  are  useful, note that the <u>entire</u> completion is done for each
              element of <b>matcher-list</b>, which can quickly reduce the shell's performance.  As a rough rule of
              thumb, one to three strings will give acceptable performance.  On the other hand, putting mul-
              tiple space-separated values into the same string does not have an appreciable impact on  per-
              formance.

       <b>max-errors</b>
              This  is  used  by  the <b>_approximate</b> and <b>_correct</b> completer functions to determine the maximum
              number of errors to allow.  The completer will try to generate completions by  first  allowing
              one error, then two errors, and so on, until either a match or matches were found or the maxi-
              mum number of errors given by this style has been reached.

              If the value for this style contains the string `<b>numeric</b>', the completer  function  will  take
              any numeric argument as the maximum number of errors allowed. For example, with

                     <b>zstyle</b> <b>':completion:*:approximate:::'</b> <b>max-errors</b> <b>2</b> <b>numeric</b>

              two errors are allowed if no numeric argument is given, but with a numeric argument of six (as
              in `<b>ESC-6</b> <b>TAB</b>'), up to six errors are accepted.  Hence with a value of `<b>0</b>  <b>numeric</b>',  no  cor-
              recting completion will be attempted unless a numeric argument is given.

              If  the  value  contains the string `<b>not-numeric</b>', the completer will <u>not</u> try to generate cor-
              rected completions when given a numeric argument, so in this case the number given  should  be
              greater than zero.  For example, `<b>2</b> <b>not-numeric</b>' specifies that correcting completion with two
              errors will usually be performed, but if a numeric argument is  given,  correcting  completion
              will not be performed.

              The default value for this style is `<b>2</b> <b>numeric</b>'.

       <b>max-matches-width</b>
              This  style  is  used  to  determine  the  trade off between the width of the display used for
              matches and the width used for their descriptions when the <b>verbose</b> style is  in  effect.   The
              value gives the number of display columns to reserve for the matches.  The default is half the
              width of the screen.

              This has the most impact when several matches have the same description and so will be grouped
              together.   Increasing the style will allow more matches to be grouped together; decreasing it
              will allow more of the description to be visible.

       <b>menu</b>   If this is true in the context of any of the tags defined for the current completion menu com-
              pletion  will  be  used.   The value for a specific tag will take precedence over that for the
              `<b>default</b>' tag.

              If none of the values found in this way is true but at least one is set to `<b>auto</b>',  the  shell
              behaves as if the <b>AUTO_MENU</b> option is set.

              If  one  of  the  values is explicitly set to false, menu completion will be explicitly turned
              off, overriding the <b>MENU_COMPLETE</b> option and other settings.

              In the form `<b>yes=</b><u>num</u>', where `<b>yes</b>' may be any of the true  values  (`<b>yes</b>',  `<b>true</b>',  `<b>on</b>'  and
              `<b>1</b>'),  menu  completion  will  be  turned  on  if there are at least <u>num</u> matches.  In the form
              `<b>yes=long</b>', menu completion will be turned on if the list does not fit on  the  screen.   This
              does not activate menu completion if the widget normally only lists completions, but menu com-
              pletion can be activated in that case with the value  `<b>yes=long-list</b>'  (Typically,  the  value
              `<b>select=long-list</b>' described later is more useful as it provides control over scrolling.)

              Similarly, with any of the `false' values (as in `<b>no=10</b>'), menu completion will <u>not</u> be used if
              there are <u>num</u> or more matches.

              The value of this widget also controls menu selection, as implemented by the <b>zsh/complist</b> mod-
              ule.  The following values may appear either alongside or instead of the values above.

              If the value contains the string `<b>select</b>', menu selection will be started unconditionally.

              In  the  form  `<b>select=</b><u>num</u>',  menu  selection  will  only be started if there are at least <u>num</u>
              matches.  If the values for more than one tag provide a number, the smallest number is  taken.

              Menu   selection   can   be   turned  off  explicitly  by  defining  a  value  containing  the
              string`<b>no-select</b>'.

              It is also possible to start menu selection only if the list of matches does not  fit  on  the
              screen  by  using the value `<b>select=long</b>'.  To start menu selection even if the current widget
              only performs listing, use the value `<b>select=long-list</b>'.

              To turn on menu completion or menu selection when a there are a certain number of  matches  <u>or</u>
              the  list  of  matches  does  not fit on the screen, both of `<b>yes=</b>' and `<b>select=</b>' may be given
              twice, once with a number and once with `<b>long</b>' or `<b>long-list</b>'.

              Finally, it is possible to activate two special modes of menu selection.  The  word  `<b>interac</b>-
              <b>tive</b>'  in  the  value causes interactive mode to be entered immediately when menu selection is
              started; see the description of the <b>zsh/complist</b> module in <a href="zshmodules.1.html#//apple_ref/doc/man/1/zshmodules"><u>zshmodules</u>(1)</a>.RE for a  description
              of interactive mode.  Including the string `<b>search</b>' does the same for incremental search mode.
              To select backward incremental search, include the string `<b>search-backward</b>'.  )

              <b>muttrc</b> If set, gives the location of the mutt configuration file.  It defaults to `<b>~/.muttrc</b>'.

              <b>numbers</b>
                     This  is  used with the <b>jobs</b> tag.  If it is `true', the shell will complete job numbers
                     instead of the shortest unambiguous prefix of the job command text.  If the value is  a
                     number,  job numbers will only be used if that many words from the job descriptions are
                     required to resolve ambiguities.  For example, if the value is `<b>1</b>', strings  will  only
                     be used if all jobs differ in the first word on their command lines.

              <b>old-list</b>
                     This  is  used by the <b>_oldlist</b> completer.  If it is set to `<b>always</b>', then standard wid-
                     gets which perform listing will retain the current list of matches, however  they  were
                     generated;  this can be turned off explicitly with the value `<b>never</b>', giving the behav-
                     iour without the <b>_oldlist</b> completer.  If the style is unset, or any other  value,  then
                     the  existing  list  of  completions  is displayed if it is not already; otherwise, the
                     standard completion list is generated; this is the default behaviour of <b>_oldlist</b>.  How-
                     ever,  if  there is an old list and this style contains the name of the completer func-
                     tion that generated the list, then the old list will be used even if it  was  generated
                     by a widget which does not do listing.

                     For  example,  suppose  you type <b>^Xc</b> to use the <b>_correct_word</b> widget, which generates a
                     list of corrections for the word under the cursor.  Usually, typing <b>^D</b> would generate a
                     standard  list  of  completions  for the word on the command line, and show that.  With
                     <b>_oldlist</b>, it will instead show the list of corrections already generated.

                     As another example consider the <b>_match</b> completer: with the <b>insert-unambiguous</b> style set
                     to  `true'  it inserts only a common prefix string, if there is any.  However, this may
                     remove parts of the original pattern, so that further  completion  could  produce  more
                     matches  than  on  the first attempt.  By using the <b>_oldlist</b> completer and setting this
                     style to <b>_match</b>, the list of matches generated on the first attempt will be used again.

              <b>old-matches</b>
                     This  is  used by the <b>_all_matches</b> completer to decide if an old list of matches should
                     be used if one exists.  This is selected by one of the `true' values or by  the  string
                     `<b>only</b>'.   If the value is `<b>only</b>', <b>_all_matches</b> will only use an old list and won't have
                     any effect on the list of matches currently being generated.

                     If this style is set it is generally unwise to call the <b>_all_matches</b> completer uncondi-
                     tionally.   One  possible  use  is  for  either this style or the <b>completer</b> style to be
                     defined with the <b>-e</b> option to <b>zstyle</b> to make the style conditional.

              <b>old-menu</b>
                     This is used by the <b>_oldlist</b> completer.  It controls how menu completion behaves when a
                     completion  has already been inserted and the user types a standard completion key such
                     as <b>TAB</b>.  The default behaviour of <b>_oldlist</b> is that  menu  completion  always  continues
                     with the existing list of completions.  If this style is set to `false', however, a new
                     completion is started if the old list was generated by a different completion  command;
                     this is the behaviour without the <b>_oldlist</b> completer.

                     For  example,  suppose you type <b>^Xc</b> to generate a list of corrections, and menu comple-
                     tion is started in one of the usual ways.  Usually, or with this style  set  to  <b>false</b>,
                     typing  <b>TAB</b>  at  this  point would start trying to complete the line as it now appears.
                     With <b>_oldlist</b>, it instead continues to cycle through the list of corrections.

              <b>original</b>
                     This is used by the <b>_approximate</b> and <b>_correct</b> completers  to  decide  if  the  original
                     string  should be added as a possible completion.  Normally, this is done only if there
                     are at least two possible corrections, but if this style is set to `true', it is always
                     added.   Note  that  the style will be examined with the completer field in the context
                     name set to <b>correct-</b><u>num</u> or <b>approximate-</b><u>num</u>, where <u>num</u> is the number of errors that were
                     accepted.

              <b>packageset</b>
                     This style is used when completing arguments of the Debian `<b>dpkg</b>' program.  It contains
                     an override for the default package set for a given context.  For example,

                            <b>zstyle</b> <b>':completion:*:complete:dpkg:option--status-1:*'</b> <b>\</b>
                                           <b>packageset</b> <b>avail</b>

                     causes available packages, rather than only installed packages,  to  be  completed  for
                     `<b>dpkg</b> <b>--status</b>'.

              <b>path</b>   The function that completes color names uses this style with the <b>colors</b> tag.  The value
                     should be the pathname of a file containing color names in the format of an X11 <b>rgb.txt</b>
                     file.   If the style is not set but this file is found in one of various standard loca-
                     tions it will be used as the default.

              <b>pine-directory</b>
                     If set, specifies the directory containing PINE mailbox files.  There  is  no  default,
                     since  recursively  searching this directory is inconvenient for anyone who doesn't use
                     PINE.

              <b>ports</b>  A list of Internet service names (network ports) to complete.  If this is not set, ser-
                     vice names are taken from the file `<b>/etc/services</b>'.

              <b>prefix-hidden</b>
                     This  is  used for certain completions which share a common prefix, for example command
                     options beginning with dashes.  If it is `true', the prefix will not be  shown  in  the
                     list of matches.

                     The default value for this style is `false'.

              <b>prefix-needed</b>
                     This,  too, is used for matches with a common prefix.  If it is set to `true' this com-
                     mon prefix must be typed by the user to generate the matches.  In the case  of  command
                     options,  this means that the initial `<b>-</b>', `<b>+</b>', or `<b>--</b>' must be typed explicitly before
                     option names will be completed.

                     The default value for this style is `true'.

              <b>preserve-prefix</b>
                     This style is used when completing path names.  Its value should be a pattern  matching
                     an  initial prefix of the word to complete that should be left unchanged under all cir-
                     cumstances.  For example, on some Unices an initial `<b>//</b>' (double slash) has  a  special
                     meaning;  setting  this style to the string `<b>//</b>' will preserve it.  As another example,
                     setting this style to `<b>?:/</b>' under Cygwin would allow completion after `<b>a:/...</b>'  and  so
                     on.

              <b>range</b>  This  is used by the <b>_history</b> completer and the <b>_history_complete_word</b> bindable command
                     to decide which words should be completed.

                     If it is a singe number, only the last <u>N</u> words from the history will be completed.

                     If it is a range of the form `<u>max</u><b>:</b><u>slice</u>', the last <u>slice</u> words will be completed;  then
                     if  that yields no matches, the <u>slice</u> words before those will be tried and so on.  This
                     process stops either when at least one match was been found, or  <u>max</u>  words  have  been
                     tried.

                     The default is to complete all words from the history at once.

              <b>regular</b>
                     This  style  is  used  by  the <b>_expand_alias</b> completer and bindable command.  If set to
                     `<b>true</b>' (the default), regular aliases will be expanded but only  in  command  position.
                     If  it  is  set  to  `<b>false</b>', regular aliases will never be expanded.   If it is set to
                     `<b>always</b>', regular aliases will be expanded even if not in command position.

              <b>rehash</b> If this is set when completing external commands, the internal list (hash) of  commands
                     will  be  updated  for  each  search  by  issuing the <b>rehash</b> command.  There is a speed
                     penalty for this which is only likely to be noticeable when  directories  in  the  path
                     have slow file access.

              <b>remote-access</b>
                     If set to <b>false</b>, certain commands will be prevented from making Internet connections to
                     retrieve remote information.  This includes the completion for the <b>CVS</b> command.

                     It is not always possible to know if connections are in fact to a remote site, so  some
                     may be prevented unnecessarily.

              <b>remove-all-dups</b>
                     The  <b>_history_complete_word</b>  bindable  command  and  the <b>_history</b> completer use this to
                     decide if all duplicate matches should be removed, rather than just consecutive  dupli-
                     cates.

              <b>select-prompt</b>
                     If  this  is set for the <b>default</b> tag, its value will be displayed during menu selection
                     (see the <b>menu</b> style above) when the completion list does not fit on  the  screen  as  a
                     whole.   The  same escapes as for the <b>list-prompt</b> style are understood, except that the
                     numbers refer to the match or line the mark is on.  A default prompt is used  when  the
                     value is the empty string.

              <b>select-scroll</b>
                     This  style  is  tested  for  the  <b>default</b>  tag and determines how a completion list is
                     scrolled during a menu selection (see the <b>menu</b> style above) when  the  completion  list
                     does  not  fit  on  the  screen  as  a  whole.  If the value is `<b>0</b>' (zero), the list is
                     scrolled by half-screenfuls; if it is a positive integer, the list is scrolled  by  the
                     given  number of lines; if it is a negative number, the list is scrolled by a screenful
                     minus the absolute value of the given number of lines.  The default  is  to  scroll  by
                     single lines.

              <b>separate-sections</b>
                     This  style  is used with the <b>manuals</b> tag when completing names of manual pages.  If it
                     is `true', entries for different sections are added separately using tag names  of  the
                     form  `<b>manual.</b><u>X</u>',  where <u>X</u> is the section number.  When the <b>group-name</b> style is also in
                     effect, pages from different sections will appear separately.  This style is also  used
                     similarly  with  the  <b>words</b> style when completing words for the dict command. It allows
                     words from different dictionary databases to be added separately.  The default for this
                     style is `false'.

              <b>show-completer</b>
                     Tested whenever a new completer is tried.  If it is true, the completion system outputs
                     a progress message in the listing area showing what completer is being tried.  The mes-
                     sage  will be overwritten by any output when completions are found and is removed after
                     completion is finished.

              <b>single-ignored</b>
                     This is used by the <b>_ignored</b> completer when there is only one match.  If its  value  is
                     `<b>show</b>',  the  single match will be displayed but not inserted.  If the value is `<b>menu</b>',
                     then the single match and the original string are both added as matches and  menu  com-
                     pletion is started, making it easy to select either of them.

              <b>sort</b>   Many  completion  widgets  call  <b>_description</b>  at  some point which decides whether the
                     matches are added sorted or unsorted (often  indirectly  via  <b>_wanted</b>  or  <b>_requested</b>).
                     This  style  can be set explicitly to one of the usual true or false values as an over-
                     ride.  If it is not set for the context, the standard behaviour of the  calling  widget
                     is used.

                     The style is tested first against the full context including the tag, and if that fails
                     to produce a value against the context without the tag.

                     If the calling widget explicitly requests unsorted matches, this is  usually  honoured.
                     However,  the default (unsorted) behaviour of completion for the command history may be
                     overridden by setting the style to <b>true</b>.

                     In the <b>_expand</b> completer, if it is set to `true', the expansions generated will  always
                     be  sorted.   If it is set to `<b>menu</b>', then the expansions are only sorted when they are
                     offered as single strings but not in the string containing all possible expansions.

              <b>special-dirs</b>
                     Normally, the completion code will not produce the directory names `<b>.</b>' and `<b>..</b>' as pos-
                     sible  completions.   If  this style is set to `true', it will add both `<b>.</b>' and `<b>..</b>' as
                     possible completions; if it is set to `<b>..</b>', only `<b>..</b>' will be added.

                     The following example sets <b>special-dirs</b> to `<b>..</b>' when the current prefix is empty, is  a
                     single  `<b>.</b>',  or  consists only of a path beginning with `<b>../</b>'.  Otherwise the value is
                     `false'.

                            <b>zstyle</b> <b>-e</b> <b>':completion:*'</b> <b>special-dirs</b> <b>\</b>
                               <b>'[[</b> <b>$PREFIX</b> <b>=</b> <b>(../)#(|.|..)</b> <b>]]</b> <b>&amp;&amp;</b> <b>reply=(..)'</b>

              <b>squeeze-slashes</b>
                     If set to `true', sequences of slashes in filename paths (for  example  in  `<b>foo//bar</b>')
                     will  be  treated  as a single slash.  This is the usual behaviour of UNIX paths.  How-
                     ever, by default the file completion function behaves as if there were  a  `<b>*</b>'  between
                     the slashes.

              <b>stop</b>   If  set  to  `true',  the  <b>_history_complete_word</b>  bindable command will stop once when
                     reaching the beginning or end of the  history.   Invoking  <b>_history_complete_word</b>  will
                     then  wrap  around to the opposite end of the history.  If this style is set to `false'
                     (the default), <b>_history_complete_word</b> will loop immediately as in a menu completion.

              <b>strip-comments</b>
                     If set to `true', this style causes non-essential comment text to be removed from  com-
                     pletion  matches.   Currently it is only used when completing e-mail addresses where it
                     removes any display name from the addresses, cutting them down to plain <u>user@host</u> form.

              <b>subst-globs-only</b>
                     This is used by the <b>_expand</b> completer.  If it is set to `true', the expansion will only
                     be used if it resulted from globbing; hence, if expansions resulted from the use of the
                     <b>substitute</b>  style  described below, but these were not further changed by globbing, the
                     expansions will be rejected.

                     The default for this style is `false'.

              <b>substitute</b>
                     This boolean style controls whether the <b>_expand</b> completer will first try to expand  all
                     substitutions in the string (such as `<b>$(...)</b>' and `<b>${...}</b>').

                     The default is `true'.

              <b>suffix</b> This  is  used  by  the <b>_expand</b> completer if the word starts with a tilde or contains a
                     parameter expansion.  If it is set to `true', the word will  only  be  expanded  if  it
                     doesn't  have  a  suffix,  i.e.  if  it  is something like `<b>~foo</b>' or `<b>$foo</b>' rather than
                     `<b>~foo/</b>' or `<b>$foo/bar</b>', unless that  suffix  itself  contains  characters  eligible  for
                     expansion.  The default for this style is `true'.

              <b>tag-order</b>
                     This  provides  a  mechanism for sorting how the tags available in a particular context
                     will be used.

                     The values for the style are sets of space-separated lists of tags.  The tags  in  each
                     value  will  be  tried  at the same time; if no match is found, the next value is used.
                     (See the <b>file-patterns</b> style for an exception to this behavior.)

                     For example:

                            <b>zstyle</b> <b>':completion:*:complete:-command-:*'</b> <b>tag-order</b> <b>\</b>
                                <b>'commands</b> <b>functions'</b>

                     specifies that completion in command position first offers external commands and  shell
                     functions.  Remaining tags will be tried if no completions are found.

                     In addition to tag names, each string in the value may take one of the following forms:

                     <b>-</b>      If any value consists of only a hyphen, then <u>only</u>  the  tags  specified  in  the
                            other values are generated.  Normally all tags not explicitly selected are tried
                            last if the specified tags fail to generate any matches.  This means that a sin-
                            gle value consisting only of a single hyphen turns off completion.

                     <b>!</b> <u>tags</u>...
                            A  string starting with an exclamation mark specifies names of tags that are <u>not</u>
                            to be used.  The effect is the same as if all other possible tags for  the  con-
                            text had been listed.

                     <u>tag</u><b>:</b><u>label</u> ...
                            Here,  <u>tag</u>  is one of the standard tags and <u>label</u> is an arbitrary name.  Matches
                            are generated as normal but the name <u>label</u> is used in contexts instead  of  <u>tag</u>.
                            This is not useful in words starting with <b>!</b>.

                            If the <u>label</u> starts with a hyphen, the <u>tag</u> is prepended to the <u>label</u> to form the
                            name used for lookup.  This can be used to make the completion system try a cer-
                            tain  tag  more  than once, supplying different style settings for each attempt;
                            see below for an example.

                     <u>tag</u><b>:</b><u>label</u><b>:</b><u>description</u>
                            As before, but <b>description</b> will replace the `<b>%d</b>' in  the  value  of  the  <b>format</b>
                            style  instead  of  the default description supplied by the completion function.
                            Spaces in the description must be quoted with a backslash.  A `<b>%d</b>' appearing  in
                            <u>description</u> is replaced with the description given by the completion function.

                     In  any  of  the  forms  above the tag may be a pattern or several patterns in the form
                     `<b>{</b><u>pat1</u><b>,</b><u>pat2...</u><b>}</b>'.  In this case all matching tags will be used  except  for  any  given
                     explicitly in the same string.

                     One  use  of these features is to try one tag more than once, setting other styles dif-
                     ferently on each attempt, but still to use all the other tags without having to  repeat
                     them all.  For example, to make completion of function names in command position ignore
                     all the completion functions starting with an underscore the first time  completion  is
                     tried:

                            <b>zstyle</b> <b>':completion:*:*:-command-:*'</b> <b>tag-order</b> <b>\</b>
                                <b>'functions:-non-comp</b> <b>*'</b> <b>functions</b>
                            <b>zstyle</b> <b>':completion:*:functions-non-comp'</b> <b>ignored-patterns</b> <b>'_*'</b>

                     On  the  first attempt, all tags will be offered but the <b>functions</b> tag will be replaced
                     by <b>functions-non-comp</b>.  The <b>ignored-patterns</b> style is set for this tag to exclude func-
                     tions  starting  with  an underscore.  If there are no matches, the second value of the
                     <b>tag-order</b> style is used which completes functions using the default tag, this time pre-
                     sumably including all function names.

                     The matches for one tag can be split into different groups.  For example:

                            <b>zstyle</b> <b>':completion:*'</b> <b>tag-order</b> <b>\</b>
                                <b>'options:-long:long\</b> <b>options</b>
                                 <b>options:-short:short\</b> <b>options</b>
                                 <b>options:-single-letter:single\</b> <b>letter\</b> <b>options'</b>

                            zstyle ':completion:*:options-long' ignored-patterns '[-+](|-|[^-]*)'
                            zstyle ':completion:*:options-short' ignored-patterns '--*' '[-+]?'
                            zstyle ':completion:*:options-single-letter' ignored-patterns '???*'

                     With  the  <b>group-names</b> style set, options beginning with `<b>--</b>', options beginning with a
                     single `<b>-</b>' or `<b>+</b>' but containing multiple characters, and single-letter options will be
                     displayed in separate groups with different descriptions.

                     Another use of patterns is to try multiple match specifications one after another.  The
                     <b>matcher-list</b> style offers something similar, but it is tested very early in the comple-
                     tion  system and hence can't be set for single commands nor for more specific contexts.
                     Here is how to try normal completion without any match specification and, if that  gen-
                     erates  no matches, try again with case-insensitive matching, restricting the effect to
                     arguments of the command <b>foo</b>:

                            <b>zstyle</b> <b>':completion:*:*:foo:*'</b> <b>tag-order</b> <b>'*'</b> <b>'*:-case'</b>
                            <b>zstyle</b> <b>':completion:*-case'</b> <b>matcher</b> <b>'m:{a-z}={A-Z}'</b>

                     First, all the tags offered when completing after <b>foo</b> are tried using  the  normal  tag
                     name.  If that generates no matches, the second value of <b>tag-order</b> is used, which tries
                     all tags again except that this time each has <b>-case</b> appended to its name for lookup  of
                     styles.  Hence this time the value for the <b>matcher</b> style from the second call to <b>zstyle</b>
                     in the example is used to make completion case-insensitive.

                     It is possible to use the <b>-e</b> option of the <b>zstyle</b> builtin command to specify conditions
                     for the use of particular tags.  For example:

                            <b>zstyle</b> <b>-e</b> <b>'*:-command-:*'</b> <b>tag-order</b> <b>'</b>
                                <b>if</b> <b>[[</b> <b>-n</b> <b>$PREFIX$SUFFIX</b> <b>]];</b> <b>then</b>
                                  <b>reply=(</b> <b>)</b>
                                <b>else</b>
                                  <b>reply=(</b> <b>-</b> <b>)</b>
                                <b>fi'</b>

                     Completion in command position will be attempted only if the string typed so far is not
                     empty.  This is tested using  the  <b>PREFIX</b>  special  parameter;  see  zshcompwid  for  a
                     description  of  parameters which are special inside completion widgets.  Setting <b>reply</b>
                     to an empty array provides the default behaviour of trying all tags at once; setting it
                     to an array containing only a hyphen disables the use of all tags and hence of all com-
                     pletions.

                     If no <b>tag-order</b> style has been defined for  a  context,  the  strings  `<b>(|*-)argument-*</b>
                     <b>(|*-)option-*</b>  <b>values</b>'  and  `<b>options</b>' plus all tags offered by the completion function
                     will be used to provide a sensible default behavior that causes arguments (whether nor-
                     mal  command arguments or arguments of options) to be completed before option names for
                     most commands.

              <b>urls</b>   This is used together with the the <b>urls</b> tag by functions completing URLs.

                     If the value consists of more than one string, or if the only string does  not  name  a
                     file or directory, the strings are used as the URLs to complete.

                     If  the  value contains only one string which is the name of a normal file the URLs are
                     taken from that file (where the URLs may be separated by white space or newlines).

                     Finally, if the only string in the value names a  directory,  the  directory  hierarchy
                     rooted  at this directory gives the completions.  The top level directory should be the
                     file access method, such as `<b>http</b>', `<b>ftp</b>', `<b>bookmark</b>' and so on.   In  many  cases  the
                     next  level  of directories will be a filename.  The directory hierarchy can descend as
                     deep as necessary.

                     For example,

                            <b>zstyle</b> <b>':completion:*'</b> <b>urls</b> <b>~/.urls</b>
                            <b>mkdir</b> <b>-p</b> <b>~/.urls/ftp/ftp.zsh.org/pub/development</b>

                     allows completion of all the components of  the  URL  <a href="ftp://ftp.zsh.org/pub/development"><b>ftp://ftp.zsh.org/pub/development</b></a>
                     after suitable commands such as `<b>netscape</b>' or `<b>lynx</b>'.  Note, however, that access meth-
                     ods and files are completed separately, so if the <b>hosts</b> style is set hosts can be  com-
                     pleted without reference to the <b>urls</b> style.

                     See  the  description  in  the  function  <b>_urls</b> itself for more information (e.g. `<b>more</b>
                     <b>$^fpath/_urls(N)</b>').

              <b>use-cache</b>
                     If this is set, the completion caching layer is activated for any completions which use
                     it  (via  the <b>_store_cache</b>, <b>_retrieve_cache</b>, and <b>_cache_invalid</b> functions).  The direc-
                     tory containing the cache files can be changed with the <b>cache-path</b> style.

              <b>use-compctl</b>
                     If this style is set to a string <u>not</u> equal to <b>false</b>, <b>0</b>, <b>no</b>,  and  <b>off</b>,  the  completion
                     system  may use any completion specifications defined with the <b>compctl</b> builtin command.
                     If the style is unset, this is done only if the  <b>zsh/compctl</b>  module  is  loaded.   The
                     string  may also contain the substring `<b>first</b>' to use completions defined with `<b>compctl</b>
                     <b>-T</b>', and the substring `<b>default</b>' to use the completion defined with `<b>compctl</b> <b>-D</b>'.

                     Note that this is only intended to smooth the transition from <b>compctl</b> to the  new  com-
                     pletion system and may disappear in the future.

                     Note  also  that the definitions from <b>compctl</b> will only be used if there is no specific
                     completion function for the command in question.  For example, if there is  a  function
                     <b>_foo</b>  to  complete arguments to the command <b>foo</b>, <b>compctl</b> will never be invoked for <b>foo</b>.
                     However, the <b>compctl</b> version will be tried if <b>foo</b> only uses default completion.

              <b>use-ip</b> By default, the function <b>_hosts</b> that completes host  names  strips  IP  addresses  from
                     entries read from host databases such as NIS and ssh files.  If this style is true, the
                     corresponding IP addresses can be completed as well.  This style is not use in any con-
                     text  where  the  <b>hosts</b> style is set; note also it must be set before the cache of host
                     names is generated (typically the first completion attempt).

              <b>use-perl</b>
                     Various parts of the function system use awk to extract words  from  files  or  command
                     output  as  this  universally  available.  However, many versions of awk have arbitrary
                     limits on the size of input.  If this style is set, perl will be used instead.  This is
                     almost always preferable if perl is available on your system.

                     Currently this is only used in completions for `make', but it may be extended depending
                     on authorial frustration.

              <b>users</b>  This may be set to a list of usernames to be completed.  If it is not set all usernames
                     will  be  completed.  Note that if it is set only that list of users will be completed;
                     this is because on some systems querying all users can take  a  prohibitive  amount  of
                     time.

              <b>users-hosts</b>
                     The  values  of this style should be of the form `<u>user</u><b>@</b><u>host</u>' or `<u>user</u><b>:</b><u>host</u>'. It is used
                     for commands that need pairs of user- and  hostnames.   These  commands  will  complete
                     usernames  from  this style (only), and will restrict subsequent hostname completion to
                     hosts paired with that user in one of the values of the style.

                     It is possible to group values for sets of commands which allow a remote login, such as
                     <b>rlogin</b>  and  <b>ssh</b>, by using the <b>my-accounts</b> tag.  Similarly, values for sets of commands
                     which usually refer to the accounts of other people, such as <b>talk</b> and  <b>finger</b>,  can  be
                     grouped by using the <b>other-accounts</b> tag.  More ambivalent commands may use the <b>accounts</b>
                     tag.

              <b>users-hosts-ports</b>
                     Like <b>users-hosts</b> but used for commands like <b>telnet</b> and containing strings of  the  form
                     `<u>user</u><b>@</b><u>host</u><b>:</b><u>port</u>'.

              <b>verbose</b>
                     If  set,  as  it  is by default, the completion listing is more verbose.  In particular
                     many commands show descriptions for options if this style is `true'.

              <b>word</b>   This is used by the <b>_list</b> completer, which prevents the insertion of completions  until
                     a  second  completion attempt when the line has not changed.  The normal way of finding
                     out if the line has changed is to compare its entire contents  between  the  two  occa-
                     sions.   If this style is true, the comparison is instead performed only on the current
                     word.  Hence if completion is performed on another word with the same contents, comple-
                     tion will not be delayed.


<b>CONTROL</b> <b>FUNCTIONS</b>
       The  initialization  script  <b>compinit</b>  redefines all the widgets which perform completion to call the
       supplied widget function <b>_main_complete</b>.  This function acts as a wrapper calling the so-called `com-
       pleter' functions that generate matches.  If <b>_main_complete</b> is called with arguments, these are taken
       as the names of completer functions to be called in the order given.  If no arguments are given,  the
       set of functions to try is taken from the <b>completer</b> style.  For example, to use normal completion and
       correction if that doesn't generate any matches:

              <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>_complete</b> <b>_correct</b>

       after calling <b>compinit</b>. The default value for this style is `<b>_complete</b> <b>_ignored</b>', i.e. normally  only
       ordinary  completion  is  tried, first with the effect of the <b>ignored-patterns</b> style and then without
       it.  The <b>_main_complete</b> function uses the return status of the completer functions to decide if other
       completers  should  be  called.   If the return status is zero, no other completers are tried and the
       <b>_main_complete</b> function returns.

       If the first argument to <b>_main_complete</b> is a single hyphen, the arguments will not be taken as  names
       of  completers.   Instead, the second argument gives a name to use in the <u>completer</u> field of the con-
       text and the other arguments give a command name and arguments to call to generate the matches.

       The following completer functions are contained in the distribution, although users may  write  their
       own.   Note that in contexts the leading underscore is stripped, for example basic completion is per-
       formed in the context `<b>:completion::complete:</b><u>...</u>'.

       <b>_all_matches</b>
              This completer can be used to add a string consisting of all other matches.  As it  influences
              later  completers  it must appear as the first completer in the list.  The list of all matches
              is affected by the <b>avoid-completer</b> and <b>old-matches</b> styles described above.

              It may be useful to use the <b>_generic</b> function described below to bind <b>_all_matches</b> to its  own
              keystroke, for example:

                     <b>zle</b> <b>-C</b> <b>all-matches</b> <b>complete-word</b> <b>_generic</b>
                     <b>bindkey</b> <b>'^Xa'</b> <b>all-matches</b>
                     <b>zstyle</b> <b>':completion:all-matches:*'</b> <b>old-matches</b> <b>only</b>
                     <b>zstyle</b> <b>':completion:all-matches::::'</b> <b>completer</b> <b>_all_matches</b>

              Note that this does not generate completions by itself.  First use any of the standard ways of
              generating a list of completions, then use <b>^Xa</b> to show all matches.

       <b>_approximate</b>
              This is similar to the basic <b>_complete</b> completer but allows the completions to undergo correc-
              tions.   The  maximum  number  of  errors  can  be  specified by the <b>max-errors</b> style; see the
              description of approximate matching in <a href="zshexpn.1.html#//apple_ref/doc/man/1/zshexpn"><u>zshexpn</u>(1)</a> for how errors are counted.   Normally  this
              completer will only be tried after the normal <b>_complete</b> completer:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>_complete</b> <b>_approximate</b>

              This  will give correcting completion if and only if normal completion yields no possible com-
              pletions.  When corrected completions are found, the completer will normally start  menu  com-
              pletion allowing you to cycle through these strings.

              This completer uses the tags <b>corrections</b> and <b>original</b> when generating the possible corrections
              and the original string.  The <b>format</b> style for the former may contain the additional sequences
              `<b>%e</b>'  and `<b>%o</b>' which will be replaced by the number of errors accepted to generate the correc-
              tions and the original string, respectively.

              The completer progressively increases the number of errors allowed up  to  the  limit  by  the
              <b>max-errors</b>  style,  hence  if  a  completion  is found with one error, no completions with two
              errors will be shown, and so on.  It modifies the completer name in the  context  to  indicate
              the  number  of  errors  being  tried: on the first try the completer field contains `<b>approxi</b>-
              <b>mate-1</b>', on the second try `<b>approximate-2</b>', and so on.

              When <b>_approximate</b> is called from another function, the number  of  errors  to  accept  may  be
              passed with the <b>-a</b> option.  The argument is in the same format as the <b>max-errors</b> style, all in
              one string.

              Note that this completer (and the <b>_correct</b> completer mentioned below) can be  quite  expensive
              to  call,  especially  when a large number of errors are allowed.  One way to avoid this is to
              set up the <b>completer</b> style using the <b>-e</b> option to zstyle so that some completers are only used
              when completion is attempted a second time on the same string, e.g.:

                     <b>zstyle</b> <b>-e</b> <b>':completion:*'</b> <b>completer</b> <b>'</b>
                       <b>if</b> <b>[[</b> <b>$_last_try</b> <b>!=</b> <b>"$HISTNO$BUFFER$CURSOR"</b> <b>]];</b> <b>then</b>
                         <b>_last_try="$HISTNO$BUFFER$CURSOR"</b>
                         <b>reply=(_complete</b> <b>_match</b> <b>_prefix)</b>
                       <b>else</b>
                         <b>reply=(_ignored</b> <b>_correct</b> <b>_approximate)</b>
                       <b>fi'</b>

              This uses the <b>HISTNO</b> parameter and the <b>BUFFER</b> and <b>CURSOR</b> special parameters that are available
              inside zle and completion widgets to find out if the command line  hasn't  changed  since  the
              last  time  completion  was tried.  Only then are the <b>_ignored</b>, <b>_correct</b> and <b>_approximate</b> com-
              pleters called.

       <b>_complete</b>
              This completer generates all possible completions in a context-sensitive  manner,  i.e.  using
              the settings defined with the <b>compdef</b> function explained above and the current settings of all
              special parameters.  This gives the normal completion behaviour.

              To complete arguments of commands, <b>_complete</b> uses the utility function <b>_normal</b>,  which  is  in
              turn responsible for finding the particular function; it is described below.  Various contexts
              of the form <b>-</b><u>context</u><b>-</b> are handled specifically. These are  all  mentioned  above  as  possible
              arguments to the <b>#compdef</b> tag.

              Before  trying  to  find  a function for a specific context, <b>_complete</b> checks if the parameter
              `<b>compcontext</b>' is set. Setting `<b>compcontext</b>' allows the  usual  completion  dispatching  to  be
              overridden  which  is  useful in places such as a function that uses <b>vared</b> for input. If it is
              set to an array, the elements are taken to be the possible matches  which  will  be  completed
              using  the tag `<b>values</b>' and the description `<b>value</b>'. If it is set to an associative array, the
              keys are used as the possible completions and the values (if non-empty) are used  as  descrip-
              tions for the matches.  If `<b>compcontext</b>' is set to a string containing colons, it should be of
              the form `<u>tag</u><b>:</b><u>descr</u><b>:</b><u>action</u>'.  In this case the <u>tag</u> and <u>descr</u> give the tag and  description  to
              use  and  the  <u>action</u>  indicates  what should be completed in one of the forms accepted by the
              <b>_arguments</b> utility function described below.

              Finally, if `<b>compcontext</b>' is set to a string without colons, the value is taken as the name of
              the  context  to  use and the function defined for that context will be called.  For this pur-
              pose, there is a special context named <b>-command-line-</b> that completes whole command lines (com-
              mands  and their arguments).  This is not used by the completion system itself but is nonethe-
              less handled when explicitly called.

       <b>_correct</b>
              Generate corrections, but not completions, for the current word; this is similar to  <b>_approxi</b>-
              <b>mate</b>  but  will not allow any number of extra characters at the cursor as that completer does.
              The effect is similar to spell-checking.  It is based on <b>_approximate</b>, but the completer field
              in the context name is <b>correct</b>.

              For example, with:

                     <b>zstyle</b> <b>':completion:::::'</b> <b>completer</b> <b>_complete</b> <b>_correct</b> <b>_approximate</b>
                     <b>zstyle</b> <b>':completion:*:correct:::'</b> <b>max-errors</b> <b>2</b> <b>not-numeric</b>
                     <b>zstyle</b> <b>':completion:*:approximate:::'</b> <b>max-errors</b> <b>3</b> <b>numeric</b>

              correction  will accept up to two errors.  If a numeric argument is given, correction will not
              be performed, but correcting completion will be, and will accept as many errors  as  given  by
              the  numeric  argument.  Without a numeric argument, first correction and then correcting com-
              pletion will be tried, with the first one accepting two errors and the  second  one  accepting
              three errors.

              When  <b>_correct</b>  is called as a function, the number of errors to accept may be given following
              the <b>-a</b> option.  The argument is in the same form a values to the  <b>accept</b>  style,  all  in  one
              string.

              This  completer  function  is intended to be used without the <b>_approximate</b> completer or, as in
              the example, just before it.  Using it after  the  <b>_approximate</b>  completer  is  useless  since
              <b>_approximate</b>  will at least generate the corrected strings generated by the <b>_correct</b> completer
              -- and probably more.

       <b>_expand</b>
              This completer function does not really perform completion, but instead checks if the word  on
              the command line is eligible for expansion and, if it is, gives detailed control over how this
              expansion is done.  For this to happen, the completion system needs to be  invoked  with  <b>com</b>-
              <b>plete-word</b>, not <b>expand-or-complete</b> (the default binding for <b>TAB</b>), as otherwise the string will
              be expanded by the shell's internal mechanism before the completion system is  started.   Note
              also this completer should be called before the <b>_complete</b> completer function.

              The tags used when generating expansions are <b>all-expansions</b> for the string containing all pos-
              sible expansions, <b>expansions</b> when adding the possible expansions as single matches and  <b>origi</b>-
              <b>nal</b>  when adding the original string from the line.  The order in which these strings are gen-
              erated, if at all, can be controlled by the <b>group-order</b> and <b>tag-order</b> styles, as usual.

              The format string for <b>all-expansions</b> and for <b>expansions</b> may contain the  sequence  `<b>%o</b>'  which
              will be replaced by the original string from the line.

              The  kind  of expansion to be tried is controlled by the <b>substitute</b>, <b>glob</b> and <b>subst-globs-only</b>
              styles.

              It is also possible to call <b>_expand</b> as a function, in which case the different  modes  may  be
              selected with options: <b>-s</b> for <b>substitute</b>, <b>-g</b> for <b>glob</b> and <b>-o</b> for <b>subst-globs-only</b>.

       <b>_expand_alias</b>
              If  the  word the cursor is on is an alias, it is expanded and no other completers are called.
              The types of aliases which are to be expanded can  be  controlled  with  the  styles  <b>regular</b>,
              <b>global</b> and <b>disabled</b>.

              This function is also a bindable command, see the section `Bindable Commands' below.

       <b>_history</b>
              Complete  words  from  the  shell's command  history.  This completer can be controlled by the
              <b>remove-all-dups</b>, and <b>sort</b> styles as for the <b>_history_complete_word</b> bindable command,  see  the
              section `Bindable Commands' below and the section `Completion System Configuration' above.

       <b>_ignored</b>
              The  <b>ignored-patterns</b> style can be set to a list of patterns which are compared against possi-
              ble completions; matching ones are removed.  With this completer those matches  can  be  rein-
              stated,  as  if  no <b>ignored-patterns</b> style were set.  The completer actually generates its own
              list of matches; which completers are invoked is determined in the same way as for the <b>_prefix</b>
              completer.  The <b>single-ignored</b> style is also available as described above.

       <b>_list</b>  This  completer  allows the insertion of matches to be delayed until completion is attempted a
              second time without the word on the line being changed.  On the first attempt, only  the  list
              of  matches  will  be shown.  It is affected by the styles <b>condition</b> and <b>word</b>, see the section
              `Completion System Configuration' above.

       <b>_match</b> This completer is intended to be used after the <b>_complete</b> completer.  It behaves similarly but
              the  string  on  the  command  line may be a pattern to match against trial completions.  This
              gives the effect of the <b>GLOB_COMPLETE</b> option.

              Normally completion will be performed by taking the pattern from the line, inserting a `<b>*</b>'  at
              the  cursor  position and comparing the resulting pattern with the possible completions gener-
              ated.  This can be modified with the <b>match-original</b> style described above.

              The generated matches will be offered in a menu completion unless the <b>insert-unambiguous</b> style
              is set to `true'; see the description above for other options for this style.

              Note  that  matcher  specifications  defined globally or used by the completion functions (the
              styles <b>matcher-list</b> and <b>matcher</b>) will not be used.

       <b>_menu</b>  This completer was written as simple example function to  show  how  menu  completion  can  be
              enabled  in  shell  code. However, it has the notable effect of disabling menu selection which
              can be useful with <b>_generic</b> based widgets. It should be used as the  first  completer  in  the
              list.   Note  that this is independent of the setting of the <b>MENU_COMPLETE</b> option and does not
              work  with  the  other   menu   completion   widgets   such   as   <b>reverse-menu-complete</b>,   or
              <b>accept-and-menu-complete</b>.

       <b>_oldlist</b>
              This  completer  controls how the standard completion widgets behave when there is an existing
              list of completions which may have been generated  by  a  special  completion  (i.e.  a  sepa-
              rately-bound  completion  command).  It allows the ordinary completion keys to continue to use
              the list of completions thus generated, instead of producing a new list of ordinary contextual
              completions.   It should appear in the list of completers before any of the widgets which gen-
              erate matches.  It uses two styles: <b>old-list</b> and <b>old-menu</b>, see the section `Completion  System
              Configuration' above.

       <b>_prefix</b>
              This  completer  can  be  used to try completion with the suffix (everything after the cursor)
              ignored.  In other words, the suffix will not be considered to be part of  the  word  to  com-
              plete.  The effect is similar to the <b>expand-or-complete-prefix</b> command.

              The  <b>completer</b>  style  is  used  to decide which other completers are to be called to generate
              matches.  If this style is unset, the list of completers set for the current context  is  used
              --  except,  of  course, the <b>_prefix</b> completer itself.  Furthermore, if this completer appears
              more than once in the list of completers only those completers not already tried by  the  last
              invocation of <b>_prefix</b> will be called.

              For example, consider this global <b>completer</b> style:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>\</b>
                         <b>_complete</b> <b>_prefix</b> <b>_correct</b> <b>_prefix:foo</b>

              Here,  the <b>_prefix</b> completer tries normal completion but ignoring the suffix.  If that doesn't
              generate any matches, and neither does the call to the <b>_correct</b> completer  after  it,  <b>_prefix</b>
              will  be called a second time and, now only trying correction with the suffix ignored.  On the
              second invocation the completer part of the context appears as `<b>foo</b>'.

              To use <b>_prefix</b> as the last resort and try only normal completion when it is invoked:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>_complete</b> <b>...</b> <b>_prefix</b>
                     <b>zstyle</b> <b>':completion::prefix:*'</b> <b>completer</b> <b>_complete</b>

              The <b>add-space</b> style is also respected.  If it is set to `true'  then  <b>_prefix</b>  will  insert  a
              space between the matches generated (if any) and the suffix.

              Note  that this completer is only useful if the <b>COMPLETE_IN_WORD</b> option is set; otherwise, the
              cursor will be moved to the end of the current word before the completion code is  called  and
              hence there will be no suffix.

       <b>bashcompinit</b>
              This  function provides compatibility with bash's programmable completion system.  When run it
              will define the functions, <b>compgen</b> and <b>complete</b> which correspond to the bash builtins with the
              same  names.   It will then be possible to use completion specifications and functions written
              for bash.


<b>BINDABLE</b> <b>COMMANDS</b>
       In addition to the context-dependent completions provided, which are expected to  work  in  an  intu-
       itively  obvious way, there are a few widgets implementing special behaviour which can be bound sepa-
       rately to keys.  The following is a list of these and their default bindings.

       <b>_bash_completions</b>
              This function is used by two widgets, <b>_bash_complete-word</b> and <b>_bash_list-choices</b>.   It  exists
              to  provide compatibility with completion bindings in bash.  The last character of the binding
              determines what is completed: `<b>!</b>', command names; `<b>$</b>', environment variables; `<b>@</b>', host names;
              `<b>/</b>',  file names; `<b>~</b>' user names.  In bash, the binding preceded by `<b>\e</b>' gives completion, and
              preceded by `<b>^X</b>' lists options.  As some of these bindings clash with standard  zsh  bindings,
              only  `<b>\e~</b>' and `<b>^X~</b>' are bound by default.  To add the rest, the following should be added to
              <b>.zshrc</b> after <b>compinit</b> has been run:

                     <b>for</b> <b>key</b> <b>in</b> <b>'!'</b> <b>'$'</b> <b>'@'</b> <b>'/'</b> <b>'~';</b> <b>do</b>
                       <b>bindkey</b> <b>"\e$key"</b> <b>_bash_complete-word</b>
                       <b>bindkey</b> <b>"^X$key"</b> <b>_bash_list-choices</b>
                     <b>done</b>

              This includes the bindings for `<b>~</b>' in case they were already bound to something else; the com-
              pletion code does not override user bindings.

       <b>_correct_filename</b> <b>(^XC)</b>
              Correct  the  filename path at the cursor position.  Allows up to six errors in the name.  Can
              also be called with an argument to correct a filename path, independently of zle; the  correc-
              tion is printed on standard output.

       <b>_correct_word</b> (^Xc)
              Performs correction of the current argument using the usual contextual completions as possible
              choices. This stores the string `<b>correct-word</b>' in the <u>function</u> field of the context  name  and
              then calls the <b>_correct</b> completer.

       <b>_expand_alias</b> <b>(^Xa)</b>
              This  function  can be used as a completer and as a bindable command.  It expands the word the
              cursor is on if it is an alias.  The types of alias expanded can be controlled with the styles
              <b>regular</b>, <b>global</b> and <b>disabled</b>.

              When  used  as a bindable command there is one additional feature that can be selected by set-
              ting the <b>complete</b> style to `true'.  In this case, if the word is not the  name  of  an  alias,
              <b>_expand_alias</b> tries to complete the word to a full alias name without expanding it.  It leaves
              the cursor directly after the completed word so that invoking  <b>_expand_alias</b>  once  more  will
              expand the now-complete alias name.

       <b>_expand_word</b> <b>(^Xe)</b>
              Performs  expansion  on the current word:  equivalent to the standard <b>expand-word</b> command, but
              using the <b>_expand</b> completer.  Before calling it, the <u>function</u> field of the context is  set  to
              `<b>expand-word</b>'.

       <b>_generic</b>
              This function is not defined as a widget and not bound by default.  However, it can be used to
              define a widget and will then store the name of the widget in the <u>function</u> field of  the  con-
              text and call the completion system.  This allows custom completion widgets with their own set
              of style settings to be defined easily.  For example, to define a widget that performs  normal
              completion and starts menu selection:

                     <b>zle</b> <b>-C</b> <b>foo</b> <b>complete-word</b> <b>_generic</b>
                     <b>bindkey</b> <b>'...'</b> <b>foo</b>
                     <b>zstyle</b> <b>':completion:foo:*'</b> <b>menu</b> <b>yes</b> <b>select=1</b>

              Note  in particular that the <b>completer</b> style may be set for the context in order to change the
              set of functions used to generate possible matches.  If <b>_generic</b>  is  called  with  arguments,
              those are passed through to <b>_main_complete</b> as the list of completers in place of those defined
              by the <b>completer</b> style.

       <b>_history_complete_word</b> (\e/)
              Complete words from the shell's command history. This uses the  <b>list</b>,  <b>remove-all-dups</b>,  <b>sort</b>,
              and <b>stop</b> styles.

       <b>_most_recent_file</b> <b>(^Xm)</b>
              Complete  the name of the most recently modified file matching the pattern on the command line
              (which may be blank).  If given a numeric argument <u>N</u>, complete the <u>N</u>th most recently  modified
              file.  Note the completion, if any, is always unique.

       <b>_next_tags</b> (^Xn)
              This  command  alters the set of matches used to that for the next tag, or set of tags, either
              as given by the <b>tag-order</b> style or as set by default; these matches  would  otherwise  not  be
              available.  Successive invocations of the command cycle through all possible sets of tags.

       <b>_read_comp</b> <b>(^X^R)</b>
              Prompt  the  user for a string, and use that to perform completion on the current word.  There
              are two possibilities for the string.  First, it can be a set  of  words  beginning  `<b>_</b>',  for
              example  `<b>_files</b> <b>-/</b>', in which case the function with any arguments will be called to generate
              the completions.  Unambiguous parts of the function name will be completed automatically (nor-
              mal completion is not available at this point) until a space is typed.

              Second,  any  other string will be passed as a set of arguments to <b>compadd</b> and should hence be
              an expression specifying what should be completed.

              A very restricted set of editing commands is available when reading  the  string:   `<b>DEL</b>'  and
              `<b>^H</b>'  delete  the last character; `<b>^U</b>' deletes the line, and `<b>^C</b>' and `<b>^G</b>' abort the function,
              while `<b>RET</b>' accepts the completion.  Note the string is used verbatim as a  command  line,  so
              arguments must be quoted in accordance with standard shell rules.

              Once  a string has been read, the next call to <b>_read_comp</b> will use the existing string instead
              of reading a new one.  To force a new string to be read, call <b>_read_comp</b> with a numeric  argu-
              ment.

       <b>_complete_debug</b> <b>(^X?)</b>
              This  widget  performs  ordinary  completion,  but captures in a temporary file a trace of the
              shell commands executed by the completion system.  Each completion attempt gets its own  file.
              A command to view each of these files is pushed onto the editor buffer stack.

       <b>_complete_help</b> <b>(^Xh)</b>
              This  widget  displays information about the context names, the tags, and the completion func-
              tions used when completing at the current cursor position. If given a numeric  argument  other
              than <b>1</b> (as in `<b>ESC-2</b> <b>^Xh</b>'), then the styles used and the contexts for which they are used will
              be shown, too.

              Note that the information about styles may be incomplete; it depends on the information avail-
              able  from  the  completion  functions  called,  which in turn is determined by the user's own
              styles and other settings.

       <b>_complete_tag</b> <b>(^Xt)</b>
              This widget completes symbol tags created by the <b>etags</b> or <b>ctags</b> programmes (note there  is  no
              connection  with  the  completion  system's tags) stored in a file <b>TAGS</b>, in the format used by
              <b>etags</b>, or <b>tags</b>, in the format created by <b>ctags</b>.  It will look back up the path  hierarchy  for
              the first occurrence of either file; if both exist, the file <b>TAGS</b> is preferred.  You can spec-
              ify the full path to a <b>TAGS</b> or <b>tags</b> file by  setting  the  parameter  <b>$TAGSFILE</b>  or  <b>$tagsfile</b>
              respectively.   The corresponding completion tags used are <b>etags</b> and <b>vtags</b>, after emacs and vi
              respectively.


<b>UTILITY</b> <b>FUNCTIONS</b>
       Descriptions follow for utility functions that may be useful when writing completion  functions.   If
       functions  are  installed in subdirectories, most of these reside in the <b>Base</b> subdirectory.  Like the
       example functions for commands in the distribution, the utility functions generating matches all fol-
       low the convention of returning status zero if they generated completions and non-zero if no matching
       completions could be added.

       Two more features are offered by the <b>_main_complete</b> function.  The arrays <b>compprefuncs</b> and  <b>comppost</b>-
       <b>funcs</b> may contain names of functions that are to be called immediately before or after completion has
       been tried.  A function will only be called once unless  it  explicitly  reinserts  itself  into  the
       array.

       <b>_all_labels</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <u>tag</u> <u>name</u> <u>descr</u> [ <u>command</u> <u>args</u> ... ]
              This  is a convenient interface to the <b>_next_label</b> function below, implementing the loop shown
              in the <b>_next_label</b> example.  The <u>command</u> and its arguments are called to generate the matches.
              The  options  stored in the parameter <u>name</u> will automatically be inserted into the <u>args</u> passed
              to the <u>command</u>.  Normally, they are put directly after the <u>command</u>, but if one of the <u>args</u>  is
              a  single hyphen, they are inserted directly before that.  If the hyphen is the last argument,
              it will be removed from  the  argument  list  before  the  <u>command</u>  is  called.   This  allows
              <b>_all_labels</b> to be used in almost all cases where the matches can be generated by a single call
              to the <b>compadd</b> builtin command or by a call to one of the utility functions.

              For example:

                     <b>local</b> <b>expl</b>
                     <b>...</b>
                     <b>if</b> <b>_requested</b> <b>foo;</b> <b>then</b>
                       <b>...</b>
                       <b>_all_labels</b> <b>foo</b> <b>expl</b> <b>'...'</b> <b>compadd</b> <b>...</b> <b>-</b> <b>$matches</b>
                     <b>fi</b>

              Will complete the strings from the <b>matches</b> parameter, using <b>compadd</b>  with  additional  options
              which will take precedence over those generated by <b>_all_labels</b>.

       <b>_alternative</b> [ <b>-C</b> <u>name</u> ] <u>spec</u> ...
              This  function  is  useful  in simple cases where multiple tags are available.  Essentially it
              implements a loop like the one described for the <b>_tags</b> function below.

              The tags to use and the action to perform if a tag is requested are described using the  <u>spec</u>s
              which are of the form: `<u>tag</u><b>:</b><u>descr</u><b>:</b><u>action</u>'.  The <u>tag</u>s are offered using <b>_tags</b> and if the tag is
              requested, the <u>action</u> is executed with the given description <u>descr</u>.   The  <u>action</u>s  are  those
              accepted  by  the  <b>_arguments</b>  function  (described below), excluding the `<b>-&gt;</b><u>state</u>' and `<b>=</b><u>...</u>'
              forms.

              For example, the <u>action</u> may be a simple function call:

                     <b>_alternative</b> <b>\</b>
                         <b>'users:user:_users'</b> <b>\</b>
                         <b>'hosts:host:_hosts'</b>

              offers usernames and hostnames as possible matches, generated by the <b>_users</b> and  <b>_hosts</b>  func-
              tions respectively.

              Like  <b>_arguments</b>, this functions uses <b>_all_labels</b> to execute the actions, which will loop over
              all sets of tags.  Special handling is only required if there is an additional valid tag,  for
              example inside a function called from <b>_alternative</b>.

              Like <b>_tags</b> this function supports the <b>-C</b> option to give a different name for the argument con-
              text field.

       <b>_arguments</b> [ <b>-nswWACRS</b> ] [ <b>-O</b> <u>name</u> ] [ <b>-M</b> <u>matchspec</u> ] [ <b>:</b> ] <u>spec</u> ...
              This function can be used to give a complete specification for completion for a command  whose
              arguments  follow  standard UNIX option and argument conventions.  The following forms specify
              individual sets of options and arguments; to avoid ambiguity, these may be separated from  the
              options to <b>_arguments</b> itself by a single colon.  Options to <b>_arguments</b> itself must be in sepa-
              rate words, i.e. <b>-s</b> <b>-w</b>, not <b>-sw</b>.

              With the option <b>-n</b>, <b>_arguments</b> sets the parameter <b>NORMARG</b> to the position of the first  normal
              argument  in  the <b>$words</b> array, i.e. the position after the end of the options.  If that argu-
              ment has not been reached, <b>NORMARG</b> is set to <b>-1</b>.  The caller should declare `<b>integer</b>  <b>NORMARG</b>'
              if the <b>-n</b> option is passed; otherwise the parameter is not used.

              <u>n</u><b>:</b><u>message</u><b>:</b><u>action</u>
              <u>n</u><b>::</b><u>message</u><b>:</b><u>action</u>
                     This describes the <u>n</u>'th normal argument.  The <u>message</u> will be printed above the matches
                     generated and the <u>action</u> indicates what can be completed in this position (see  below).
                     If  there  are  two colons before the <u>message</u> the argument is optional.  If the <u>message</u>
                     contains only white space, nothing will be printed above the matches unless the  action
                     adds an explanation string itself.

              <b>:</b><u>message</u><b>:</b><u>action</u>
              <b>::</b><u>message</u><b>:</b><u>action</u>
                     Similar,  but  describes the <u>next</u> argument, whatever number that happens to be.  If all
                     arguments are specified in this form in the correct order the numbers are  unnecessary.

              <b>*:</b><u>message</u><b>:</b><u>action</u>
              <b>*::</b><u>message</u><b>:</b><u>action</u>
              <b>*:::</b><u>message</u><b>:</b><u>action</u>
                     This  describes how arguments (usually non-option arguments, those not beginning with <b></b>-
                     or <b>+</b>) are to be completed when neither of the first two forms was provided.  Any number
                     of arguments can be completed in this fashion.

                     With  two  colons  before  the <u>message</u>, the <b>words</b> special array and the <b>CURRENT</b> special
                     parameter are modified to refer only to the normal arguments when the  <u>action</u>  is  exe-
                     cuted  or  evaluated.   With three colons before the <u>message</u> they are modified to refer
                     only to the normal arguments covered by this description.

              <u>optspec</u>
              <u>optspec</u>:<u>...</u>
                     This describes an option.  The colon indicates handling for one or  more  arguments  to
                     the option; if it is not present, the option is assumed to take no arguments.

                     By default, options are multi-character name, one `<b>-</b><u>word</u>' per option.  With <b>-s</b>, options
                     may be single characters, with more than one option per word, although  words  starting
                     with two hyphens, such as `<b>--prefix</b>', are still considered complete option names.  This
                     is suitable for standard GNU options.

                     The combination of <b>-s</b> with <b>-w</b> allows single-letter options to be combined in  a  single
                     word  even  if  one or more of the options take arguments.  For example, if <b>-a</b> takes an
                     argument, with no <b>-s</b> `<b>-ab</b>' is considered as a single (unhandled) option; with <b>-s</b> <b>-ab</b> is
                     an  option with the argument `<b>b</b>'; with both <b>-s</b> and <b>-w</b>, <b>-ab</b> may be the option <b>-a</b> and the
                     option <b>-b</b> with arguments still to come.

                     The option <b>-W</b> takes this a stage further:  it is  possible  to  complete  single-letter
                     options  even  after  an argument that occurs in the same word.  However, it depends on
                     the action performed whether options will really be completed at this point.  For  more
                     control, use a utility function like <b>_guard</b> as part of the action.

                     The  following  forms  are available for the initial <u>optspec</u>, whether or not the option
                     has arguments.

                     <b>*</b><u>optspec</u>
                            Here <u>optspec</u> is one of the remaining forms below.  This indicates the  following
                            <u>optspec</u>  may  be  repeated.   Otherwise  if  the corresponding option is already
                            present on the command line to the left of the cursor it  will  not  be  offered
                            again.

                     <b>-</b><u>optname</u>
                     <b>+</b><u>optname</u>
                            In  the simplest form the <u>optspec</u> is just the option name beginning with a minus
                            or a plus sign, such as `<b>-foo</b>'.  The first argument for the option (if any) must
                            follow as a <u>separate</u> word directly after the option.

                            Either  of  `<b>-+</b><u>optname</u>' and `<b>+-</b><u>optname</u>' can be used to specify that <b>-</b><u>optname</u> and
                            <b>+</b><u>optname</u> are both valid.

                            In all the remaining forms, the leading `<b>-</b>' may be replaced by  or  paired  with
                            `<b>+</b>' in this way.

                     <b>-</b><u>optname</u><b></b>-
                            The first argument of the option must come directly after the option name <u>in</u> <u>the</u>
                            <u>same</u> <u>word</u>.  For example, `<b>-foo-:</b><u>...</u>' specifies that  the  completed  option  and
                            argument will look like `<b>-foo</b><u>arg</u>'.

                     <b>-</b><u>optname</u><b>+</b>
                            The first argument may appear immediately after <u>optname</u> in the same word, or may
                            appear as a separate word after the option.  For example, `<b>-foo+:</b><u>...</u>'  specifies
                            that  the completed option and argument will look like either `<b>-foo</b><u>arg</u>' or `<b>-foo</b>
                            <u>arg</u>'.

                     <b>-</b><u>optname</u><b>=</b>
                            The argument may appear as the next word, or in same word  as  the  option  name
                            provided  that it is separated from it by an equals sign, for example `<b>-foo=</b><u>arg</u>'
                            or `<b>-foo</b> <u>arg</u>'.

                     <b>-</b><u>optname</u><b>=</b>-
                            The argument to the option must appear after an equals sign in  the  same  word,
                            and may not be given in the next argument.

                     <u>optspec</u><b>[</b><u>explanation</u><b>]</b>
                            An  explanation  string may be appended to any of the preceding forms of <u>optspec</u>
                            by enclosing it in brackets, as in `<b>-q[query</b> <b>operation]</b>'.

                            The <b>verbose</b> style is used to decide whether the  explanation  strings  are  dis-
                            played with the option in a completion listing.

                            If  no  bracketed  explanation string is given but the <b>auto-description</b> style is
                            set and only one argument is described for this <u>optspec</u>, the value of the  style
                            is  displayed,  with  any  appearance of the sequence `<b>%d</b>' in it replaced by the
                            <u>message</u> of the first <u>optarg</u> that follows the <u>optspec</u>; see below.

              It is possible for options with a literal `+' or `<b>=</b>' to appear, but  that  character  must  be
              quoted, for example `<b>-\+</b>'.

              Each <u>optarg</u> following an <u>optspec</u> must take one of the following forms:

              <b>:</b><u>message</u><b>:</b><u>action</u>
              <b>::</b><u>message</u><b>:</b><u>action</u>
                     An  argument  to  the option; <u>message</u> and <u>action</u> are treated as for ordinary arguments.
                     In the first form, the argument is mandatory, and in the second form it is optional.

                     This group may be repeated for options which take multiple arguments.  In other  words,
                     <b>:</b><u>message1</u><b>:</b><u>action1</u><b>:</b><u>message2</u><b>:</b><u>action2</u> specifies that the option takes two arguments.

              <b>:*</b><u>pattern</u><b>:</b><u>message</u><b>:</b><u>action</u>
              <b>:*</b><u>pattern</u><b>::</b><u>message</u><b>:</b><u>action</u>
              <b>:*</b><u>pattern</u><b>:::</b><u>message</u><b>:</b><u>action</u>
                     This  describes multiple arguments.  Only the last <u>optarg</u> for an option taking multiple
                     arguments may be given in this form.  If the <u>pattern</u> is  empty  (i.e.,  <b>:*:</b>),  all  the
                     remaining  words on the line are to be completed as described by the <u>action</u>; otherwise,
                     all the words up to and including a word matching the <u>pattern</u> are to be completed using
                     the <u>action</u>.

                     Multiple  colons are treated as for the `<b>*:</b><u>...</u>' forms for ordinary arguments:  when the
                     <u>message</u> is preceded by two colons, the <b>words</b> special  array  and  the  <b>CURRENT</b>  special
                     parameter  are  modified during the execution or evaluation of the <u>action</u> to refer only
                     to the words after the option.  When preceded by three colons,  they  are  modified  to
                     refer only to the words covered by this description.

       Any literal colon in an <u>optname</u>, <u>message</u>, or <u>action</u> must be preceded by a backslash, `<b>\:</b>'.

       Each  of  the  forms above may be preceded by a list in parentheses of option names and argument num-
       bers.  If the given option is on the command line, the options and arguments indicated in parentheses
       will  not  be  offered.   For example, `<b>(-two</b> <b>-three</b> <b>1)-one:...</b>' completes the option `<b>-one</b>'; if this
       appears on the command line, the options <b>-two</b> and <b>-three</b> and the first ordinary argument will not  be
       completed  after  it.   `<b>(-foo):</b><u>...</u>' specifies an ordinary argument completion; <b>-foo</b> will not be com-
       pleted if that argument is already present.

       Other items may appear in the list of excluded options to indicate various other  items  that  should
       not  be  applied  when the current specification is matched: a single star (<b>*</b>) for the rest arguments
       (i.e. a specification of the form `<b>*:...</b>'); a colon (<b>:</b>) for all normal (non-option-) arguments; and a
       hyphen (<b>-</b>) for all options.  For example, if `<b>(*)</b>' appears before an option and the option appears on
       the command line, the list of remaining arguments (those shown in  the  above  table  beginning  with
       `<b>*:</b>') will not be completed.

       To  aid  in  reuse of specifications, it is possible to precede any of the forms above with `<b>!</b>'; then
       the form will no longer be completed, although if the option or argument appears on the command  line
       they  will  be skipped as normal.  The main use for this is when the arguments are given by an array,
       and <b>_arguments</b> is called repeatedly for  more  specific  contexts:  on  the  first  call  `<b>_arguments</b>
       <b>$global_options</b>' is used, and on subsequent calls `<b>_arguments</b> <b>!$^global_options</b>'.

       In each of the forms above the <u>action</u> determines how completions should be generated.  Except for the
       `<b>-&gt;</b><u>string</u>' form below, the <u>action</u> will be executed by calling the <b>_all_labels</b> function to process all
       tag labels.  No special handling of tags is needed unless a function call introduces a new one.

       The forms for <u>action</u> are as follows.

         (single unquoted space)
              This  is  useful where an argument is required but it is not possible or desirable to generate
              matches for it.  The <u>message</u> will be displayed but no completions listed.  Note that  even  in
              this case the colon at the end of the <u>message</u> is needed; it may only be omitted when neither a
              <u>message</u> nor an <u>action</u> is given.

       <b>(</b><u>item1</u> <u>item2</u> <u>...</u><b>)</b>
              One of a list of possible matches, for example:

                     <b>:foo:(foo</b> <b>bar</b> <b>baz)</b>

       <b>((</b><u>item1</u><b>\:</b><u>desc1</u> <u>...</u><b>))</b>
              Similar to the above, but with descriptions for  each  possible  match.   Note  the  backslash
              before the colon.  For example,

                     <b>:foo:((a\:bar</b> <b>b\:baz))</b>

              The  matches  will  be listed together with their descriptions if the <b>description</b> style is set
              with the <b>values</b> tag in the context.

       <b>-&gt;</b><u>string</u>
              In this form, <b>_arguments</b> processes the arguments and options and then returns control  to  the
              calling function with parameters set to indicate the state of processing; the calling function
              then makes its own arrangements for  generating  completions.   For  example,  functions  that
              implement a state machine can use this type of action.

              Where  <b>_arguments</b>  encounters  a `<b>-&gt;</b><u>string</u>', it will strip all leading and trailing whitespace
              from <u>string</u> and set the array <b>state</b> to the set of all <u>strings</u>s for which an action  is  to  be
              performed.

              By  default and in common with all other well behaved completion functions, _arguments returns
              status zero if it was able to add matches and non-zero otherwise. However, if the <b>-R</b> option is
              given,  <b>_arguments</b>  will  instead return a status of 300 to indicate that <b>$state</b> is to be han-
              dled.

              In addition to <b>$state</b>, <b>_arguments</b> also  sets  the  global  parameters  `<b>context</b>',  `<b>line</b>'  and
              `<b>opt_args</b>'  as  described below, and does not reset any changes made to the special parameters
              such as <b>PREFIX</b> and <b>words</b>.  This gives the calling  function  the  choice  of  resetting  these
              parameters or propagating changes in them.

              A  function calling <b>_arguments</b> with at least one action containing a `<b>-&gt;</b><u>string</u>' therefore must
              declare appropriate local parameters:

                     <b>local</b> <b>context</b> <b>state</b> <b>line</b>
                     <b>typeset</b> <b>-A</b> <b>opt_args</b>

              to avoid <b>_arguments</b> from altering the global environment.

       <b>{</b><u>eval-string</u><b>}</b>
              A string in braces is evaluated as shell code to generate matches.  If the <u>eval-string</u>  itself
              does  not  begin  with  an opening parenthesis or brace it is split into separate words before
              execution.

       <b>=</b> <u>action</u>
              If the <u>action</u> starts with `<b>=</b> ' (an equals sign followed by a space),  <b>_arguments</b>  will  insert
              the  contents  of  the  <u>argument</u>  field of the current context as the new first element in the
              <b>words</b> special array and increment the value of the <b>CURRENT</b> special parameter.   This  has  the
              effect of inserting a dummy word onto the completion command line while not changing the point
              at which completion is taking place.

              This is most useful with one of the specifiers that restrict the words on the command line  on
              which  the <u>action</u> is to operate (the two- and three-colon forms above).  One particular use is
              when an <u>action</u> itself causes <b>_arguments</b> on a restricted range; it is  necessary  to  use  this
              trick  to  insert an appropriate command name into the range for the second call to <b>_arguments</b>
              to be able to parse the line.

        <u>word...</u>
       <u>word...</u>
              This covers all forms other than those above.  If the <u>action</u> starts with a space, the  remain-
              ing list of words will be invoked unchanged.

              Otherwise it will be invoked with some extra strings placed after the first word; these are to
              be passed down as options to the <b>compadd</b> builtin.  They ensure that  the  state  specified  by
              <b>_arguments</b>,  in  particular  the descriptions of options and arguments, is correctly passed to
              the completion command.  These additional arguments are taken from the array parameter `<b>expl</b>';
              this  will be set up before executing the <u>action</u> and hence may be referred to inside it, typi-
              cally in an expansion of the form `<b>$expl[@]</b>' which preserves empty elements of the array.

       During the performance of the action the array `<b>line</b>' will be set to  the  command  name  and  normal
       arguments from the command line, i.e. the words from the command line excluding all options and their
       arguments.  Options are stored in the associative array `<b>opt_args</b>' with  option  names  as  keys  and
       their  arguments  as the values.  For options that have more than one argument these are given as one
       string, separated by colons.  All colons in the original arguments are preceded with backslashes.

       The parameter `<b>context</b>' is set when returning to the calling function to perform  an  action  of  the
       form  `<b>-&gt;</b><u>string</u>'.   It  is set to an array of elements corresponding to the elements of <b>$state</b>.  Each
       element is a suitable name for the argument field of  the  context:  either  a  string  of  the  form
       `<b>option</b><u>-opt</u><b>-</b><u>n</u>' for the <u>n</u>'th argument of the option <u>-opt</u>, or a string of the form `<b>argument-</b><u>n</u>' for the
       <u>n</u>'th argument.  For `rest' arguments, that is those in the list at the end not handled by position, <u>n</u>
       is  the  string  `<b>rest</b>'.   For  example,  when  completing the argument of the <b>-o</b> option, the name is
       `<b>option-o-1</b>', while for the second normal (non-option-) argument it is `<b>argument-2</b>'.

       Furthermore, during the evaluation of the <u>action</u> the context name  in  the  <b>curcontext</b>  parameter  is
       altered to append the same string that is stored in the <b>context</b> parameter.

       It  is  possible  to specify multiple sets of options and arguments with the sets separated by single
       hyphens.  The specifications before the first hyphen (if any) are shared by all the  remaining  sets.
       The  first word in every other set provides a name for the set which may appear in exclusion lists in
       specifications, either alone or before one of the possible values described  above.   In  the  second
       case a `<b>-</b>' should appear between this name and the remainder.

       For example:

              <b>_arguments</b> <b>\</b>
                  <b>-a</b> <b>\</b>
                <b>-</b> <b>set1</b> <b>\</b>
                  <b>-c</b> <b>\</b>
                <b>-</b> <b>set2</b> <b>\</b>
                  <b>-d</b> <b>\</b>
                  <b>':arg:(x2</b> <b>y2)'</b>

       This defines two sets.  When the command line contains the option `<b>-c</b>', the `<b>-d</b>' option and the argu-
       ment will not be considered possible completions.  When it contains `<b>-d</b>' or an argument,  the  option
       `<b>-c</b>' will not be considered.  However, after `<b>-a</b>' both sets will still be considered valid.

       If  the name given for one of the mutually exclusive sets is of the form `<b>(</b><u>name</u><b>)</b>' then only one value
       from each set will ever be completed; more formally, all specifications are mutually exclusive to all
       other specifications in the same set.  This is useful for defining multiple sets of options which are
       mutually exclusive and in which the options are aliases for each other.  For example:

              <b>_arguments</b> <b>\</b>
                  <b>-a</b> <b>-b</b> <b>\</b>
                <b>-</b> <b>'(compress)'</b> <b>\</b>
                  <b>{-c,--compress}'[compress]'</b> <b>\</b>
                <b>-</b> <b>'(uncompress)'</b> <b>\</b>
                  <b>{-d,--decompress}'[decompress]'</b>

       As the completion code has to parse the command line separately for each set this form of argument is
       slow  and  should only be used when necessary.  A useful alternative is often an option specification
       with rest-arguments (as in `<b>-foo:*:...</b>'); here the option <b>-foo</b> swallows up all remaining arguments as
       described by the <u>optarg</u> definitions.

       The  options <b>-S</b> and <b>-A</b> are available to simplify the specifications for commands with standard option
       parsing.  With <b>-S</b>, no option will be completed after a `<b>--</b>' appearing on its own on  the  line;  this
       argument will otherwise be ignored; hence in the line

              <b>foobar</b> <b>-a</b> <b>--</b> <b>-b</b>

       the `<b>-a</b>' is considered an option but the `<b>-b</b>' is considered an argument, while the `<b>--</b>' is considered
       to be neither.

       With <b>-A</b>, no options will be completed after the first non-option argument on the line.  The  <b>-A</b>  must
       be  followed  by a pattern matching all strings which are not to be taken as arguments.  For example,
       to make <b>_arguments</b> stop completing options after the first normal argument, but ignoring all  strings
       starting  with a hyphen even if they are not described by one of the <u>optspec</u>s, the form is `<b>-A</b> <b>"-*"</b>'.

       The option `<b>-O</b> <u>name</u>' specifies the name of an array whose elements will be  passed  as  arguments  to
       functions  called  to execute <u>actions</u>.  For example, this can be used to pass the same set of options
       for the <b>compadd</b> builtin to all <u>action</u>s.

       The option `<b>-M</b> <u>spec</u>' sets a match specification to use to completion option  names  and  values.   It
       must  appear  before the first argument specification.  The default is `<b>r:|[_-]=*</b> <b>r:|=*</b>': this allows
       partial word completion after `<b>_</b>' and `<b>-</b>', for example `-f-b' can be completed to `<b>-foo-bar</b>'.

       The option <b>-C</b> tells <b>_arguments</b> to  modify  the  <b>curcontext</b>  parameter  for  an  action  of  the  form
       `<b>-&gt;</b><u>state</u>'.   This  is the standard parameter used to keep track of the current context.  Here it (and
       not the <b>context</b> array) should be made local to the calling function to avoid passing back  the  modi-
       fied value and should be initialised to the current value at the start of the function:

              <b>local</b> <b>curcontext="$curcontext"</b>

       This is useful where it is not possible for multiple states to be valid together.

       The  option  `<b>--</b>'  allows  <b>_arguments</b> to work out the names of long options that support the `<b>--help</b>'
       option which is standard in many GNU commands.  The command word is called with the argument `<b>--help</b>'
       and  the  output  examined  for  option names.  Clearly, it can be dangerous to pass this to commands
       which may not support this option as the behaviour of the command is unspecified.

       In addition to options, `<b>_arguments</b> <b>--</b>' will try to deduce  the  types  of  arguments  available  for
       options  when  the  form `<b>--</b><u>opt</u>=<u>val</u>' is valid.  It is also possible to provide hints by examining the
       help text of the command and adding specifiers of the form `<u>pattern</u><b>:</b><u>message</u><b>:</b><u>action</u>'; note that normal
       <b>_arguments</b>  specifiers are not used.  The <u>pattern</u> is matched against the help text for an option, and
       if it matches the <u>message</u> and <u>action</u> are used as for other argument specifiers.  For example:

              <b>_arguments</b> <b>--</b> <b>'*\*:toggle:(yes</b> <b>no)'</b> <b>\</b>
                            <b>'*=FILE*:file:_files'</b> <b>\</b>
                            <b>'*=DIR*:directory:_files</b> <b>-/'</b> <b>\</b>
                            <b>'*=PATH*:directory:_files</b> <b>-/'</b>

       Here, `<b>yes</b>' and `<b>no</b>' will be completed as the argument of options whose description ends in  a  star;
       file  names  will be completed for options that contain the substring `<b>=FILE</b>' in the description; and
       directories will be completed for options whose description contains `<b>=DIR</b>'  or  `<b>=PATH</b>'.   The  last
       three  are  in fact the default and so need not be given explicitly, although it is possible to over-
       ride the use of these patterns.  A typical help text which uses this feature is:

                <b>-C,</b> <b>--directory=DIR</b>          <b>change</b> <b>to</b> <b>directory</b> <b>DIR</b>

       so that the above specifications will cause directories to be completed after  `<b>--directory</b>',  though
       not after `<b>-C</b>'.

       Note  also that <b>_arguments</b> tries to find out automatically if the argument for an option is optional.
       This can be specified explicitly by doubling the colon before the <u>message</u>.

       If the <u>pattern</u> ends in `<b>(-)</b>', this will removed from the pattern and the <u>action</u>  will  be  used  only
       directly  after  the  `<b>=</b>',  not  in  the  next word.  This is the behaviour of a normal specification
       defined with the form `<b>=-</b>'.

       The `<b>_arguments</b> <b>--</b>' can be followed by the option `<b>-i</b> <u>patterns</u>' to give patterns  for  options  which
       are not to be completed.  The patterns can be given as the name of an array parameter or as a literal
       list in parentheses.  For example,

              <b>_arguments</b> <b>--</b> <b>-i</b> <b>\</b>
                  <b>"(--(en|dis)able-FEATURE*)"</b>

       will cause completion to ignore the options `<b>--enable-FEATURE</b>' and `<b>--disable-FEATURE</b>' (this  example
       is useful with GNU <b>configure</b>).

       The  `<b>_arguments</b>  <b>--</b>'  form  can also be followed by the option `<b>-s</b> <u>pair</u>' to describe option aliases.
       Each <u>pair</u> consists of a pattern and a replacement.   For  example,  some  <b>configure</b>-scripts  describe
       options  only  as `<b>--enable-foo</b>', but also accept `<b>--disable-foo</b>'.  To allow completion of the second
       form:

              <b>_arguments</b> <b>--</b> <b>-s</b> <b>"(#--enable-</b> <b>--disable-)"</b>

       Here is a more general example of the use of <b>_arguments</b>:

              <b>_arguments</b> <b>'-l+:left</b> <b>border:'</b> <b>\</b>
                         <b>'-format:paper</b> <b>size:(letter</b> <b>A4)'</b> <b>\</b>
                         <b>'*-copy:output</b> <b>file:_files::resolution:(300</b> <b>600)'</b> <b>\</b>
                         <b>':postscript</b> <b>file:_files</b> <b>-g</b> <b>\*.\(ps\|eps\)'</b> <b>\</b>
                         <b>'*:page</b> <b>number:'</b>

       This describes three options: `<b>-l</b>', `<b>-format</b>', and `<b>-copy</b>'.  The first takes one  argument  described
       as  `<u>left</u>  <u>border</u>' for which no completion will be offered because of the empty action.  Its argument
       may come directly after the `<b>-l</b>' or it may be given as the next word on the line.

       The `<b>-format</b>' option takes one argument in the next word, described as `<u>paper</u> <u>size</u>'  for  which  only
       the strings `<b>letter</b>' and `<b>A4</b>' will be completed.

       The  `<b>-copy</b>' option may appear more than once on the command line and takes two arguments.  The first
       is mandatory and will be completed as a filename.  The second is  optional  (because  of  the  second
       colon before the description `<u>resolution</u>') and will be completed from the strings `<b>300</b>' and `<b>600</b>'.

       The  last  two descriptions say what should be completed as arguments.  The first describes the first
       argument as a `<u>postscript</u> <u>file</u>' and makes files ending in `<b>ps</b>'  or  `<b>eps</b>'  be  completed.   The  last
       description  gives all other arguments the description `<u>page</u> <u>numbers</u>' but does not offer completions.

       <b>_cache_invalid</b> <u>cache</u><b>_</b><u>identifier</u>
              This function returns status zero if the completions cache corresponding to  the  given  cache
              identifier  needs rebuilding.  It determines this by looking up the <b>cache-policy</b> style for the
              current context.  This should provide a function name which is run with the full path  to  the
              relevant cache file as the only argument.

              Example:

                     <b>_example_caching_policy</b> <b>()</b> <b>{</b>
                         <b>#</b> <b>rebuild</b> <b>if</b> <b>cache</b> <b>is</b> <b>more</b> <b>than</b> <b>a</b> <b>week</b> <b>old</b>
                         <b>oldp=(</b> <b>"$1"(Nmw+1)</b> <b>)</b>
                         <b>((</b> <b>$#oldp</b> <b>))</b>
                     <b>}</b>

       <b>_call_function</b> <u>return</u> <u>name</u> [ <u>args</u> ... ]
              If  a  function  <u>name</u> exists, it is called with the arguments <u>args</u>.  The <u>return</u> argument gives
              the name of a parameter in which the return status from the function <u>name</u>; if <u>return</u> is  empty
              or a single hyphen it is ignored.

              The  return status of <b>_call_function</b> itself is zero if the function <u>name</u> exists and was called
              and non-zero otherwise.

       <b>_call_program</b> <u>tag</u> <u>string</u> ...
              This function provides a mechanism for the user to override the use of  an  external  command.
              It  looks  up the <b>command</b> style with the supplied <u>tag</u>.  If the style is set, its value is used
              as the command to execute.  The <u>string</u>s from the call to <b>_call_program</b>, or from the  style  if
              set,  are  concatenated  with  spaces between them and the resulting string is evaluated.  The
              return status is the return status of the command called.

       <b>_combination</b> [ <b>-s</b> <u>pattern</u> ] <u>tag</u> <u>style</u> <u>spec</u> ... <u>field</u> <u>opts</u> ...
              This function is used to complete combinations of values,  for example pairs of hostnames  and
              usernames.   The  <u>style</u> argument gives the style which defines the pairs; it is looked up in a
              context with the <u>tag</u> specified.

              The style name consists of field names separated by hyphens, for example  `<b>users-hosts-ports</b>'.
              For each field for a value is already known, a <u>spec</u> of the form `<u>field</u><b>=</b><u>pattern</u>' is given.  For
              example, if the command line so far specifies a user `<b>pws</b>', the  argument  `<b>users=pws</b>'  should
              appear.

              The  next argument with no equals sign is taken as the name of the field for which completions
              should be generated (presumably not one of the <u>field</u>s for which the value is known).

              The matches generated will be taken from the value of the style.   These  should  contain  the
              possible  values  for  the  combinations  in the appropriate order (users, hosts, ports in the
              example above).  The different fields the values for the different  fields  are  separated  by
              colons.   This  can  be  altered with the option <b>-s</b> to <b>_combination</b> which specifies a pattern.
              Typically this is a character class, as for example `<b>-s</b> <b>"[:@]"</b>' in the case of the <b>users-hosts</b>
              style.    Each `<u>field</u><b>=</b><u>pattern</u>' specification restricts the completions which apply to elements
              of the style with appropriately matching fields.

              If no style with the given name is defined for the given tag, or if none  of  the  strings  in
              style's  value  match,  but a function name of the required field preceded by an underscore is
              defined, that function will be called to generate the matches.  For example, if  there  is  no
              `<b>users-hosts-ports</b>'  or  no  matching  hostname when a host is required, the function `<b>_hosts</b>'
              will automatically be called.

              If the same name is used for more than one field, in both the `<u>field</u><b>=</b><u>pattern</u>' and the argument
              that  gives the name of the field to be completed, the number of the field (starting with one)
              may be given after the fieldname, separated from it by a colon.

              All arguments after the required field name are passed to <b>compadd</b> when generating matches from
              the style value, or to the functions for the fields if they are called.

       <b>_describe</b> [ <b>-oO</b> | <b>-t</b> <u>tag</u> ] <u>descr</u> <u>name1</u> [ <u>name2</u> ] <u>opts</u> ... <b>--</b> ...
              This  function  associates completions with descriptions.  Multiple groups separated by <b>--</b> can
              be supplied, potentially with different completion options <u>opts</u>.

              The <u>descr</u> is taken as a string to display above the  matches  if  the  <b>format</b>  style  for  the
              <b>descriptions</b>  tag  is set.  This is followed by one or two names of arrays followed by options
              to pass to <b>compadd</b>.  The first array contains the possible completions with their descriptions
              in  the  form  `<u>completion</u><b>:</b><u>description</u>'.   If a second array is given, it should have the same
              number of elements as the first; in this case the corresponding elements are added as possible
              completions  instead of the <u>completion</u> strings from the first array.  The completion list will
              retain the descriptions from the first array.   Finally,  a  set  of  completion  options  can
              appear.

              If  the  option  `<b>-o</b>'  appears before the first argument, the matches added will be treated as
              names of command options (N.B. not shell options), typically following a `<b>-</b>', `<b>--</b>' or  `<b>+</b>'  on
              the  command  line.   In this case <b>_describe</b> uses the <b>prefix-hidden</b>, <b>prefix-needed</b> and <b>verbose</b>
              styles to find out if the strings should be added  as  completions  and  if  the  descriptions
              should  be  shown.   Without  the  `<b>-o</b>'  option,  only the <b>verbose</b> style is used to decide how
              descriptions are shown.  If `<b>-O</b>' is used instead of `<b>-O</b>', command  options  are  completed  as
              above but <b>_describe</b> will not handle the <b>prefix-needed</b> style.

              With  the  <b>-t</b>  option a <u>tag</u> can be specified.  The default is `<b>values</b>' or, if the <b>-o</b> option is
              given, `<b>options</b>'.

              If selected by the <b>list-grouped</b> style, strings with the same description will appear  together
              in the list.

              <b>_describe</b> uses the <b>_all_labels</b> function to generate the matches, so it does not need to appear
              inside a loop over tag labels.

       <b>_description</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <u>tag</u> <u>name</u> <u>descr</u> [ <u>spec</u> ... ]
              This function is not to be confused with the previous one; it is used as a helper function for
              creating  options  to  <b>compadd</b>.  It is buried inside many of the higher level completion func-
              tions and so often does not need to be called directly.

              The styles listed below are tested in the current context using the given <u>tag</u>.  The  resulting
              options  for <b>compadd</b> are put into the array named <u>name</u> (this is traditionally `<b>expl</b>', but this
              convention is not enforced).  The description for the corresponding set of matches  is  passed
              to the function in <u>descr</u>.

              The  styles  tested are: <b>format</b>, <b>hidden</b>, <b>matcher</b>, <b>ignored-patterns</b> and <b>group-name</b>.  The <b>format</b>
              style is first tested for the given <u>tag</u> and then for the <b>descriptions</b>  tag  if  no  value  was
              found, while the remainder are only tested for the tag given as the first argument.  The func-
              tion also calls <b>_setup</b> which tests some more styles.

              The string returned by the <b>format</b> style (if any) will be modified so that the sequence `<b>%d</b>' is
              replaced by the <u>descr</u> given as the third argument without any leading or trailing white space.
              If, after removing the white space, the <u>descr</u> is the empty string, the format style  will  not
              be  used  and the options put into the <u>name</u> array will not contain an explanation string to be
              displayed above the matches.

              If <b>_description</b> is called with more than three arguments, the additional <u>spec</u>s  should  be  of
              the  form  `<u>char</u><b>:</b><u>str</u>'.   These supply escape sequence replacements for the <b>format</b> style: every
              appearance of `<b>%</b><u>char</u>' will be replaced by <u>string</u>.

              If the <b>-x</b> option is given, the description will be passed  to  <b>compadd</b>  using  the  <b>-x</b>  option
              instead  of  the  default <b>-X</b>.  This means that the description will be displayed even if there
              are no corresponding matches.

              The options placed in the array <u>name</u> take account of the  <b>group-name</b>  style,  so  matches  are
              placed  in  a  separate group where necessary.  The group normally has its elements sorted (by
              passing the option <b>-J</b> to <b>compadd</b>), but if an option starting with `<b>-V</b>', `<b>-J</b>', `<b>-1</b>', or `<b>-2</b>' is
              passed  to  <b>_description</b>, that option will be included in the array.  Hence it is possible for
              the completion group to be unsorted by giving the option `<b>-V</b>', `<b>-1V</b>', or `<b>-2V</b>'.

              In most cases, the function will be used like this:

                     <b>local</b> <b>expl</b>
                     <b>_description</b> <b>files</b> <b>expl</b> <b>file</b>
                     <b>compadd</b> <b>"$expl[@]"</b> <b>-</b> <b>"$files[@]"</b>

              Note the use of the parameter <b>expl</b>, the hyphen, and the list of matches.  Almost all calls  to
              <b>compadd</b>  within  the  completion system use a similar format; this ensures that user-specified
              styles are correctly passed down to the builtins which implement the internals of  completion.

       <b>_dispatch</b> <u>context</u> <u>string</u> <u>...</u>
              This  sets  the  current  context to <u>context</u> and looks for completion functions to handle this
              context by hunting through the list of command names or special contexts (as  described  above
              for  <b>compdef</b>) given as <u>string</u> <u>...</u>.  The first completion function to be defined for one of the
              contexts in the list is used to generate matches.  Typically, the last <u>string</u> is <b>-default-</b>  to
              cause the function for default completion to be used as a fallback.

              The  function sets the parameter <b>$service</b> to the <u>string</u> being tried, and sets the <u>context/com</u>-
              <u>mand</u> field (the fourth) of the <b>$curcontext</b> parameter to the <u>context</u> given as the  first  argu-
              ment.

       <b>_files</b> The  function  <b>_files</b> calls <b>_path_files</b> with all the arguments it was passed except for <b>-g</b> and
              <b>-/</b>.  The use of these two options depends on the setting of the  <b>file-patterns</b> style.

              This function accepts the full set of options allowed by <b>_path_files</b>, described below.

       <b>_gnu_generic</b>
              This function is a simple wrapper around the <b>_arguments</b> function described above.  It  can  be
              used  to  determine  automatically the long options understood by commands that produce a list
              when passed the option `<b>--help</b>'.  It is intended to be used as a top-level completion function
              in its own right.  For example, to enable option completion for the commands <b>foo</b> and <b>bar</b>, use

                     <b>compdef</b> <b>_gnu_generic</b> <b>foo</b> <b>bar</b>

              after the call to <b>compinit</b>.

              The  completion  system  as  supplied is conservative in its use of this function, since it is
              important to be sure the command understands the option `<b>--help</b>'.

       <b>_guard</b> [ <u>options</u> ] <u>pattern</u> <u>descr</u>
              This function is intended to be used in the <u>action</u> for the specifications passed to <b>_arguments</b>
              and  similar functions.  It returns immediately with a non-zero return status if the string to
              be completed does not match the <u>pattern</u>.  If the pattern matches, the <u>descr</u> is displayed;  the
              function then returns status zero if the word to complete is not empty, non-zero otherwise.

              The  <u>pattern</u>  may be preceded by any of the options understood by <b>compadd</b> that are passed down
              from <b>_description</b>, namely <b>-M</b>, <b>-J</b>, <b>-V</b>, <b>-1</b>, <b>-2</b>, <b>-n</b>, <b>-F</b> and <b>-X</b>.  All of  these  options  will  be
              ignored.   This  fits  in  conveniently  with  the argument-passing conventions of actions for
              <b>_arguments</b>.

              As an example, consider a command taking the options <b>-n</b> and <b>-none</b>, where <b>-n</b> must  be  followed
              by a numeric value in the same word.  By using:

                     <b>_arguments</b> <b>'-n-:</b> <b>:_guard</b> <b>"[0-9]#"</b> <b>"numeric</b> <b>value"'</b> <b>'-none'</b>

              <b>_arguments</b>  can be made to both display the message `<b>numeric</b> <b>value</b>' and complete options after
              `<b>-n&lt;TAB&gt;</b>'.  If the `<b>-n</b>' is already followed by one or  more  digits  (the  pattern  passed  to
              <b>_guard</b>) only the message will be displayed; if the `<b>-n</b>' is followed by another character, only
              options are completed.

       <b>_message</b> [ <b>-r12</b> ] [ <b>-VJ</b> <u>group</u> ] <u>descr</u>
       <b>_message</b> <b>-e</b> [ <u>tag</u> ] <u>descr</u>
              The <u>descr</u> is used in the same way as the third argument to the <b>_description</b>  function,  except
              that the resulting string will always be shown whether or not matches were generated.  This is
              useful for displaying a help message in places where no completions can be generated.

              The <b>format</b> style is examined with the <b>messages</b> tag to find a message; the usual tag,  <b>descrip</b>-
              <b>tions</b>, is used only if the style is not set with the former.

              If  the  <b>-r</b>  option  is given, no style is used; the <u>descr</u> is taken literally as the string to
              display.  This is most useful when the <u>descr</u> comes from a pre-processed  argument  list  which
              already contains an expanded description.

              The  <b>-12VJ</b>  options and the <u>group</u> are passed to <b>compadd</b> and hence determine the group the mes-
              sage string is added to.

              The second form gives a description for completions with the tag <u>tag</u> to be shown even if there
              are  no  matches  for  that  tag.   The tag can be omitted and if so the tag is taken from the
              parameter <b>$curtag</b>; this is maintained by the completion system and so is usually correct.

       <b>_multi_parts</b> <u>sep</u> <u>array</u>
              The argument <u>sep</u> is a separator character.  The <u>array</u> may be  either  the  name  of  an  array
              parameter  or a literal array in the form `<b>(foo</b> <b>bar)</b>', a parenthesised list of words separated
              by whitespace.  The possible completions are the strings from the array.  However, each  chunk
              delimited  by  <u>sep</u>  will  be  completed  separately.   For  example,  the  <b>_tar</b>  function uses
              `<b>_multi_parts</b> <b>/</b> <u>patharray</u>' to complete partial file paths from the  given  array  of  complete
              file paths.

              The <b>-i</b> option causes <b>_multi_parts</b> to insert a unique match even if that requires multiple sep-
              arators to be inserted.  This is not usually the expected behaviour with filenames,  but  cer-
              tain  other  types  of completion, for example those with a fixed set of possibilities, may be
              more suited to this form.

              Like other utility functions, this function accepts the `<b>-V</b>', `<b>-J</b>', `<b>-1</b>',  `<b>-2</b>',  `<b>-n</b>',  `<b>-f</b>',
              `<b>-X</b>', `<b>-M</b>', `<b>-P</b>', `<b>-S</b>', `<b>-r</b>', `<b>-R</b>', and `<b>-q</b>' options and passes them to the <b>compadd</b> builtin.

       <b>_next_label</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <u>tag</u> <u>name</u> <u>descr</u> [ <u>options</u> ... ]
              This  function is used to implement the loop over different tag labels for a particular tag as
              described above for the <b>tag-order</b> style.  On each call it checks to see if there are any  more
              tag labels; if there is it returns status zero, otherwise non-zero.  As this function requires
              a current tag to be set, it must always follow a call to <b>_tags</b> or <b>_requested</b>.

              The <b>-x12VJ</b> options and the first three arguments are  passed  to  the  <b>_description</b>  function.
              Where appropriate the <u>tag</u> will be replaced by a tag label in this call.  Any description given
              in the <b>tag-order</b> style is preferred to the <u>descr</u> passed to <b>_next_label</b>.

              The <u>options</u> given after the <u>descr</u> are set in the parameter given by <u>name</u>, and hence are to  be
              passed to <b>compadd</b> or whatever function is called to add the matches.

              Here  is a typical use of this function for the tag <b>foo</b>.  The call to <b>_requested</b> determines if
              tag <b>foo</b> is required at all; the loop over <b>_next_label</b> handles any labels defined for  the  tag
              in the <b>tag-order</b> style.

                     <b>local</b> <b>expl</b> <b>ret=1</b>
                     <b>...</b>
                     <b>if</b> <b>_requested</b> <b>foo;</b> <b>then</b>
                       <b>...</b>
                       <b>while</b> <b>_next_label</b> <b>foo</b> <b>expl</b> <b>'...';</b> <b>do</b>
                         <b>compadd</b> <b>"$expl[@]"</b> <b>...</b> <b>&amp;&amp;</b> <b>ret=0</b>
                       <b>done</b>
                       <b>...</b>
                     <b>fi</b>
                     <b>return</b> <b>ret</b>

       <b>_normal</b>
              This  is  the standard function called to handle completion outside any special <u>-context-</u>.  It
              is called both to complete the command word and also the arguments for a command.  In the sec-
              ond  case,  <b>_normal</b>  looks  for a special completion for that command, and if there is none it
              uses the completion for the <b>-default-</b> context.

              A second use is to reexamine the command line specified by the <b>$words</b> array and  the  <b>$CURRENT</b>
              parameter  after  those have been modified.  For example, the function <b>_precommand</b>, which com-
              pletes after pre-command specifiers such as <b>nohup</b>, removes  the  first  word  from  the  <b>words</b>
              array,  decrements the <b>CURRENT</b> parameter, then calls <b>_normal</b> again.  The effect is that `<b>nohup</b>
              <u>cmd</u> <u>...</u>' is treated in the same way as `<u>cmd</u> <u>...</u>'.

              If the command name matches one of the patterns given by one of the options <b>-p</b> or <b>-P</b>  to  <b>com</b>-
              <b>pdef</b>,  the  corresponding  completion  function  is called and then the parameter <b>_compskip</b> is
              checked.  If it is set completion is terminated at that point even if  no  matches  have  been
              found.  This is the same effect as in the <b>-first-</b> context.

       <b>_options</b>
              This  can be used to complete the names of shell options.  It provides a matcher specification
              that ignores a leading `<b>no</b>', ignores underscores and allows upper-case letters to match  their
              lower-case  counterparts  (for  example,  `<b>glob</b>', `<b>noglob</b>', `<b>NO_GLOB</b>' are all completed).  Any
              arguments are propagated to the <b>compadd</b> builtin.

       <b>_options_set</b> and <b>_options_unset</b>
              These functions complete only set or unset options, with the same matching specification  used
              in the <b>_options</b> function.

              Note that you need to uncomment a few lines in the <b>_main_complete</b> function for these functions
              to work properly.  The lines in question are used to  store  the  option  settings  in  effect
              before the completion widget locally sets the options it needs.  Hence these functions are not
              generally used by the completion system.

       <b>_parameters</b>
              This is used to complete the names of shell parameters.

              The option `<b>-g</b> <u>pattern'</u> <u>limits</u> <u>the</u> <u>completion</u> <u>to</u> <u>parameters</u> <u>whose</u> <u>type</u>  <u>matches</u>  <u>the</u>  <u>pattern.</u>
              <u>The</u>  <u>type</u>  <u>of</u>  <u>a</u> <u>parameter</u> <u>is</u> <u>that</u> <u>shown</u> <u>by</u> <u>`</u><b>print</b> <b>${(t)</b><u>param</u><b>}</b><u>',</u> <u>hence</u> <u>judicious</u> <u>use</u> <u>of</u> <u>`</u><b>*</b><u>'</u> <u>in</u>
              <u>pattern</u> <u>is</u> <u>probably</u> <u>necessary.</u>

              All other arguments are passed to the <b>compadd</b> builtin.

       <b>_path_files</b>
              This function is used throughout the completion system to complete filenames.  It allows  com-
              pletion  of  partial  paths.   For  example,  the  string  `<b>/u/i/s/sig</b>'  may  be  completed to
              `<b>/usr/include/sys/signal.h</b>'.

              The options accepted by both <b>_path_files</b> and <b>_files</b> are:

              <b>-f</b>     Complete all filenames.  This is the default.

              <b>-/</b>     Specifies that only directories should be completed.

              <b>-g</b> <u>pattern</u>
                     Specifies that only files matching the <u>pattern</u> should be completed.

              <b>-W</b> <u>paths</u>
                     Specifies path prefixes that are to be prepended to the string from the command line to
                     generate the filenames but that should not be inserted as completions nor shown in com-
                     pletion listings.  Here, <u>paths</u> may be the name of an array parameter, a literal list of
                     paths enclosed in parentheses or an absolute pathname.

              <b>-F</b> <u>ignored-files</u>
                     This  behaves  as for the corresponding option to the <b>compadd</b> builtin.  It gives direct
                     control over which filenames should be ignored.  If the  option  is  not  present,  the
                     <b>ignored-patterns</b> style is used.

              Both  <b>_path_files</b>  and  <b>_files</b>  also accept the following options which are passed to <b>compadd</b>:
              `<b>-J</b>', `<b>-V</b>', `<b>-1</b>', `<b>-2</b>', `<b>-n</b>', `<b>-X</b>', `<b>-M</b>', `<b>-P</b>', `<b>-S</b>', `<b>-q</b>', `<b>-r</b>', and `<b>-R</b>'.

              Finally, the <b>_path_files</b> function  uses the styles <b>expand</b>, <b>ambiguous</b>, <b>special-dirs</b>,  <b>list-suf</b>-
              <b>fixes</b> and <b>file-sort</b> described above.

       <b>_pick_variant</b> <b>[</b> <b>-c</b> <u>command</u> <b>]</b> <b>[</b> <b>-r</b> <u>name</u> <b>]</b> <u>label</u><b>=</b><u>pattern</u> <b>...</b> <u>label</u> <b>[</b> <u>args</u> <b>...</b> <b>]</b>
              This function is used to resolve situations where a single command name requires more than one
              type of handling, either because it has more than one variant or because there is a name clash
              between two different commands.

              The  command to run is taken from the first element of the array <b>words</b> unless this is overrid-
              den by the option <b>-c</b>.  This command is run and its output is compared with a  series  of  pat-
              terns.   Arguments to be passed to the command can be specified at the end after all the other
              arguments.  The patterns to try in order are given by the arguments <u>label</u><b>=</b><u>pattern</u>; if the out-
              put  of  `<u>command</u> <u>args</u> <b>...</b>' contains <u>pattern</u>, then <b>label</b> is selected as the label for the com-
              mand variant.  If none of the patterns match, the final command label is selected and status 1
              is returned.

              If the `<b>-r</b> <u>name</u>' is given, the <u>label</u> picked is stored in the parameter named <u>name</u>.

              The  results  are also cached in the <b>_</b><u>cmd</u><b>_</b><u>variant</u> associative array indexed by the name of the
              command run.

       <b>_regex_arguments</b> <u>name</u> <u>spec</u> ...
              This function generates a completion function <u>name</u> which matches the specifications <u>spec</u>  <b>...</b>,
              a set of regular expressions as described below.  After running <b>_regex_arguments</b>, the function
              <u>name</u> should be called as a normal completion function.  The pattern to be matched is given  by
              the  contents  of  the <b>words</b> array up to the current cursor position joined together with null
              characters; no quotation is applied.

              The arguments are grouped as sets of alternatives separated by `<b>|</b>', which are tried one  after
              the  other until one matches.  Each alternative consists of a one or more specifications which
              are tried left to right, with each pattern matched being stripped in  turn  from  the  command
              line being tested, until all of the group succeeds or until one fails; in the latter case, the
              next alternative is tried.  This structure can be repeated to arbitrary depth by using  paren-
              theses; matching proceeds from inside to outside.

              A  special procedure is applied if no test succeeds but the remaining command line string con-
              tains no null character (implying the remaining word is the one for which completions  are  to
              be  generated).  The completion target is restricted to the remaining word and any <u>action</u>s for
              the corresponding patterns are executed.  In this case, nothing is stripped from  the  command
              line string.  The order of evaluation of the <u>action</u>s can be determined by the <b>tag-order</b> style;
              the various formats supported by <b>_alternative</b> can be used in <u>action</u>.  The <u>descr</u>  is  used  for
              setting up the array parameter <b>expl</b>.

              Specification arguments take one of following forms, in which metacharacters such as `<b>(</b>', `<b>)</b>',
              `<b>#</b>' and `<b>|</b>' should be quoted.

              <b>/</b><u>pattern</u><b>/</b> [<b>%</b><u>lookahead</u><b>%</b>] [<b>-</b><u>guard</u>] [<b>:</b><u>tag</u><b>:</b><u>descr</u><b>:</b><u>action</u>]
                     This is a single primitive component.  The function tests whether the combined  pattern
                     `<b>(#b)((#B)</b><u>pattern</u><b>)</b><u>lookahead</u><b>*</b>' matches the command line string.  If so, `<u>guard</u>' is eval-
                     uated and its return status is examined to determine if the test  has  succeeded.   The
                     <u>pattern</u>  string  `<b>[]</b>' is guaranteed never to match.  The <u>lookahead</u> is not stripped from
                     the command line before the next pattern is examined.

                     The argument starting with <b>:</b> is used in the same manner as an argument to <b>_alternative</b>.

                     A  component  is  used  as  follows:  <u>pattern</u> is tested to see if the component already
                     exists on the command line.  If it does, any following specifications are  examined  to
                     find  something  to complete.  If a component is reached but no such pattern exists yet
                     on the command line, the string containing the <u>action</u> is used to  generate  matches  to
                     insert at that point.

              <b>/</b><u>pattern</u><b>/+</b> [<b>%</b><u>lookahead</u><b>%</b>] [<b>-</b><u>guard</u>] [<b>:</b><u>tag</u><b>:</b><u>descr</u><b>:</b><u>action</u>]
                     This  is  similar to `<b>/</b><u>pattern</u><b>/</b> ...' but the left part of the command line string (i.e.
                     the part already matched by previous patterns) is also considered part of  the  comple-
                     tion target.

              <b>/</b><u>pattern</u><b>/-</b> [<b>%</b><u>lookahead</u><b>%</b>] [<b>-</b><u>guard</u>] [<b>:</b><u>tag</u><b>:</b><u>descr</u><b>:</b><u>action</u>]
                     This  is  similar  to  `<b>/</b><u>pattern</u><b>/</b>  ...'  but  the <u>action</u>s of the current and previously
                     matched patterns are ignored even if the following `<u>pattern</u>' matches the empty  string.

              <b>(</b> <u>spec</u> <b>)</b>
                     Parentheses  may be used to groups <u>spec</u>s; note each parenthesis is a single argument to
                     <b>_regex_arguments</b>.

              <u>spec</u> <b>#</b> This allows any number of repetitions of <u>spec</u>.

              <u>spec</u> <u>spec</u>
                     The two <u>spec</u>s are to be matched one after the other as described above.

              <u>spec</u> <b>|</b> <u>spec</u>
                     Either of the two <u>spec</u>s can be matched.

              The function <b>_regex_words</b> can be used as a helper function to generate matches for  a  set  of
              alternative words possibly with their own arguments as a command line argument.

              Examples:

                     <b>_regex_arguments</b> <b>_tst</b> <b>/$'[^\0]#\0'/</b> <b>\</b>
                     <b>/$'[^\0]#\0'/</b> <b>:'compadd</b> <b>aaa'</b>

              This  generates a function <b>_tst</b> that completes <b>aaa</b> as its only argument.  The <u>tag</u> and <u>descrip</u>-
              <u>tion</u> for the action have been omitted for brevity (this works but is not recommended in normal
              use).   The  first  component matches the command word, which is arbitrary; the second matches
              any argument.  As the argument is also arbitrary, any following component would not depend  on
              <b>aaa</b> being present.

                     <b>_regex_arguments</b> <b>_tst</b> <b>/$'[^\0]#\0'/</b> <b>\</b>
                     <b>/$'aaa\0'/</b> <b>:'compadd</b> <b>aaa'</b>

              This  is a more typical use; it is similar, but any following patterns would only match if <b>aaa</b>
              was present as the first argument.

                     <b>_regex_arguments</b> <b>_tst</b> <b>/$'[^\0]#\0'/</b> <b>\(</b> <b>\</b>
                     <b>/$'aaa\0'/</b> <b>:'compadd</b> <b>aaa'</b> <b>\</b>
                     <b>/$'bbb\0'/</b> <b>:'compadd</b> <b>bbb'</b> <b>\)</b> <b>\#</b>

              In this example, an indefinite number of command arguments may be  completed.   Odd  arguments
              are  completed  as  <b>aaa</b> and even arguments as <b>bbb</b>.  Completion fails unless the set of <b>aaa</b> and
              <b>bbb</b> arguments before the current one is matched correctly.

                     <b>_regex_arguments</b> <b>_tst</b> <b>/$'[^\0]#\0'/</b> <b>\</b>
                     <b>\(</b> <b>/$'aaa\0'/</b> <b>:'compadd</b> <b>aaa'</b> <b>\|</b> <b>\</b>
                     <b>/$'bbb\0'/</b> <b>:'compadd</b> <b>bbb'</b> <b>\)</b> <b>\#</b>

              This is similar, but either <b>aaa</b> or <b>bbb</b> may be  completed  for  any  argument.   In  this  case
              <b>_regex_words</b> could be used to generate a suitable expression for the arguments.


       <b>_regex_words</b> <u>tag</u> <u>description</u> <u>spec</u> ...
              This  function can be used to generate arguments for the <b>_regex_arguments</b> command which may be
              inserted at any point where a set of rules is expected.  The <u>tag</u> and <u>description</u> give a  stan-
              dard  tag  and description pertaining to the current context.  Each <u>spec</u> contains two or three
              arguments separated by a colon: note that there is no leading colon in this case.

              Each <u>spec</u> gives one of a set of words that may be completed at this point, together with argu-
              ments.   It  is  thus  roughly  equivalent  to  the  <b>_arguments</b>  function  when used in normal
              (non-regex) completion.

              The part of the <u>spec</u> before the first colon is the word to be completed.  This may  contain  a
              <b>*</b>;  the  entire  word,  before and after the <b>*</b> is completed, but only the text before the <b>*</b> is
              required for the context to be matched, so that further arguments may be completed  after  the
              abbreviated form.

              The second part of <u>spec</u> is a description for the word being completed.

              The  optional third part of the <u>spec</u> describes how words following the one being completed are
              themselves to be completed.  It will be evaluated in order to  avoid  problems  with  quoting.
              This  means that typically it contains a reference to an array containing previously generated
              regex arguments.

              The option <b>-t</b> <u>term</u> specifies a terminator for the word instead of the usual  space.   This  is
              handled as an auto-removable suffix in the manner of the option <b>-s</b> <u>sep</u> to <b>_values</b>.

              The  result  of  the  processing by <b>_regex_words</b> is placed in the array <b>reply</b>, which should be
              made local to the calling function.  If the set of words and arguments may be matched  repeat-
              edly, a <b>#</b> should be appended to the generated array at that point.

              For example:

                     <b>local</b> <b>-a</b> <b>reply</b>
                     <b>_regex_words</b> <b>mydb-commands</b> <b>'mydb</b> <b>commands'</b> <b>\</b>
                       <b>'add:add</b> <b>an</b> <b>entry</b> <b>to</b> <b>mydb:$mydb_add_cmds'</b> <b>\</b>
                       <b>'show:show</b> <b>entries</b> <b>in</b> <b>mydb'</b>
                     <b>_regex_arguments</b> <b>_mydb</b> <b>"$reply[@]"</b>
                     <b>_mydb</b> <b>"$@"</b>

              This shows a completion function for a command <b>mydb</b> which takes two command arguments, <b>add</b> and
              <b>show</b>.  <b>show</b> takes no arguments, while the arguments for <b>add</b> have already been prepared  in  an
              array <b>mydb_add_cmds</b>, quite possibly by a previous call to <b>_regex_words</b>.

       <b>_requested</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <u>tag</u> [ <u>name</u> <u>descr</u> [ <u>command</u> <u>args</u> ... ] ]
              This  function  is  called  to decide whether a tag already registered by a call to <b>_tags</b> (see
              below) has been requested by the user and hence completion should be  performed  for  it.   It
              returns status zero if the tag is requested and non-zero otherwise.  The function is typically
              used as part of a loop over different tags as follows:

                     <b>_tags</b> <b>foo</b> <b>bar</b> <b>baz</b>
                     <b>while</b> <b>_tags;</b> <b>do</b>
                       <b>if</b> <b>_requested</b> <b>foo;</b> <b>then</b>
                         <b>...</b> <b>#</b> <b>perform</b> <b>completion</b> <b>for</b> <b>foo</b>
                       <b>fi</b>
                       <b>...</b> <b>#</b> <b>test</b> <b>the</b> <b>tags</b> <b>bar</b> <b>and</b> <b>baz</b> <b>in</b> <b>the</b> <b>same</b> <b>way</b>
                       <b>...</b> <b>#</b> <b>exit</b> <b>loop</b> <b>if</b> <b>matches</b> <b>were</b> <b>generated</b>
                     <b>done</b>

              Note that the test for whether matches were generated is not performed until the  end  of  the
              <b>_tags</b>  loop.  This is so that the user can set the <b>tag-order</b> style to specify a set of tags to
              be completed at the same time.

              If <u>name</u> and <u>descr</u> are given, <b>_requested</b> calls the <b>_description</b> function with  these  arguments
              together with the options passed to <b>_requested</b>.

              If  <u>command</u>  is given, the <b>_all_labels</b> function will be called immediately with the same argu-
              ments.  In simple cases this makes it possible to perform the test for the tag and the  match-
              ing in one go.  For example:

                     <b>local</b> <b>expl</b> <b>ret=1</b>
                     <b>_tags</b> <b>foo</b> <b>bar</b> <b>baz</b>
                     <b>while</b> <b>_tags;</b> <b>do</b>
                       <b>_requested</b> <b>foo</b> <b>expl</b> <b>'description'</b> <b>\</b>
                           <b>compadd</b> <b>foobar</b> <b>foobaz</b> <b>&amp;&amp;</b> <b>ret=0</b>
                       <b>...</b>
                       <b>((</b> <b>ret</b> <b>))</b> <b>||</b> <b>break</b>
                     <b>done</b>

              If the <u>command</u> is not <b>compadd</b>, it must nevertheless be prepared to handle the same options.

       <b>_retrieve_cache</b> <u>cache</u><b>_</b><u>identifier</u>
              This function retrieves completion information from the file given by <u>cache</u><b>_</b><u>identifier</u>, stored
              in a directory specified by the <b>cache-path</b> style which defaults to <b>~/.zcompcache</b>.  The  return
              status  is  zero if retrieval was successful.  It will only attempt retrieval if the <b>use-cache</b>
              style is set, so you can call this function without worrying about whether the user wanted  to
              use the caching layer.

              See <b>_store_cache</b> below for more details.

       <b>_sep_parts</b>
              This  function  is  passed alternating arrays and separators as arguments.  The arrays specify
              completions for parts of strings to be separated by the separators.  The  arrays  may  be  the
              names  of  array  parameters  or a quoted list of words in parentheses.  For example, with the
              array `<b>hosts=(ftp</b> <b>news)</b>' the call `<b>_sep_parts</b> <b>'(foo</b> <b>bar)'</b> <b>@</b> <b>hosts</b>' will  complete  the  string
              `<b>f</b>' to `<b>foo</b>' and the string `<b>b@n</b>' to `<b>bar@news</b>'.

              This  function  accepts  the  <b>compadd</b>  options `<b>-V</b>', `<b>-J</b>', `<b>-1</b>', `<b>-2</b>', `<b>-n</b>', `<b>-X</b>', `<b>-M</b>', `<b>-P</b>',
              `<b>-S</b>', `<b>-r</b>', `<b>-R</b>', and `<b>-q</b>' and passes them on to the <b>compadd</b> builtin used to add the  matches.

       <b>_setup</b> <u>tag</u> [ <u>group</u> ]
              This  function  sets up the special parameters used by the completion system appropriately for
              the  <u>tag</u>  given  as  the  first  argument.   It  uses  the  styles  <b>list-colors</b>,  <b>list-packed</b>,
              <b>list-rows-first</b>, <b>last-prompt</b>, <b>accept-exact</b>, <b>menu</b> and <b>force-list</b>.

              The  optional <u>group</u> supplies the name of the group in which the matches will be placed.  If it
              is not given, the <u>tag</u> is used as the group name.

              This function is called automatically from <b>_description</b>  and  hence  is  not  normally  called
              explicitly.

       <b>_store_cache</b> <u>cache</u><b>_</b><u>identifier</u> <u>params</u> ...
              This  function,  together  with <b>_retrieve_cache</b> and <b>_cache_invalid</b>, implements a caching layer
              which can be used in any completion function.  Data obtained by costly operations  are  stored
              in  parameters;  this  function then dumps the values of those parameters to a file.  The data
              can then be retrieved quickly from that file via <b>_retrieve_cache</b>, even in different  instances
              of the shell.

              The  <u>cache</u><b>_</b><u>identifier</u>  specifies  the  file  which  the data should be dumped to.  The file is
              stored in a directory specified by the <b>cache-path</b> style which defaults to <b>~/.zcompcache</b>.   The
              remaining <u>params</u> arguments are the parameters to dump to the file.

              The  return  status is zero if storage was successful.  The function will only attempt storage
              if the <b>use-cache</b> style is set, so you can call this function without  worrying  about  whether
              the user wanted to use the caching layer.

              The  completion  function may avoid calling <b>_retrieve_cache</b> when it already has the completion
              data available as parameters.  However, in that case it should call  <b>_cache_invalid</b>  to  check
              whether the data in the parameters and in the cache are still valid.

              See  the  _perl_modules  completion  function for a simple example of the usage of the caching
              layer.

       <b>_tags</b> [ [ <b>-C</b> <u>name</u> ] <u>tags</u> ... ]
              If called with arguments, these are taken to be the names of tags valid for completions in the
              current context.  These tags are stored internally and sorted by using the <b>tag-order</b> style.

              Next,  <b>_tags</b>  is  called repeatedly without arguments from the same completion function.  This
              successively selects the first, second, etc. set of tags requested by the  user.   The  return
              status  is zero if at least one of the tags is requested and non-zero otherwise.  To test if a
              particular tag is to be tried, the <b>_requested</b> function should be called (see above).

              If `<b>-C</b> <u>name</u>' is given, <u>name</u> is temporarily stored in the argument field  (the  fifth)  of  the
              context  in  the <b>curcontext</b> parameter during the call to <b>_tags</b>; the field is restored on exit.
              This allows <b>_tags</b> to use a more specific context without having to change and reset  the  <b>cur</b>-
              <b>context</b> parameter (which has the same effect).

       <b>_values</b> [ <b>-O</b> <u>name</u> ] [ <b>-s</b> <u>sep</u> ] [ <b>-S</b> <u>sep</u> ] [ <b>-wC</b> ] <u>desc</u> <u>spec</u> ...
              This  is  used  to  complete arbitrary keywords (values) and their arguments, or lists of such
              combinations.

              If the first argument is the option `<b>-O</b> <u>name</u>', it will be used in  the  same  way  as  by  the
              <b>_arguments</b> function.  In other words, the elements of the <u>name</u> array will be passed to <b>compadd</b>
              when executing an action.

              If the first argument (or the first argument after `<b>-O</b> <u>name</u>') is `<b>-s</b>', the  next  argument  is
              used  as  the character that separates multiple values.  This character is automatically added
              after each value in an auto-removable fashion (see below); all values  completed  by  `<b>_values</b>
              <b>-s</b>'  appear in the same word on the command line, unlike completion using <b>_arguments</b>.  If this
              option is not present, only a single value will be completed per word.

              Normally, <b>_values</b> will only use the current word to determine which values are already present
              on the command line and hence are not to be completed again.  If the <b>-w</b> option is given, other
              arguments are examined as well.

              The first non-option argument is used as a string to print as a description before listing the
              values.

              All  other  arguments describe the possible values and their arguments in the same format used
              for the description of options by the <b>_arguments</b> function (see above).  The  only  differences
              are  that  no  minus or plus sign is required at the beginning, values can have only one argu-
              ment, and the forms of action beginning with an equal sign are not supported.

              The character separating a value from its argument can be set using the option  <b>-S</b>  (like  <b>-s</b>,
              followed  by  the  character  to  use  as the separator in the next argument).  By default the
              equals sign will be used as the separator between values and arguments.

              Example:

                     <b>_values</b> <b>-s</b> <b>,</b> <b>'description'</b> <b>\</b>
                             <b>'*foo[bar]'</b> <b>\</b>
                             <b>'(two)*one[number]:first</b> <b>count:'</b> <b>\</b>
                             <b>'two[another</b> <b>number]::second</b> <b>count:(1</b> <b>2</b> <b>3)'</b>

              This describes three possible values: `<b>foo</b>', `<b>one</b>', and `<b>two</b>'.   The  first  is  described  as
              `<b>bar</b>',  takes no argument and may appear more than once.  The second is described as `<b>number</b>',
              may appear more than once, and takes one mandatory argument described  as  `<b>first</b>  <b>count</b>';  no
              action  is  specified, so it will not be completed.  The `<b>(two)</b>' at the beginning says that if
              the value `<b>one</b>' is on the line, the value `<b>two</b>' will no longer be considered a  possible  com-
              pletion.   Finally,  the  last  value  (`<b>two</b>')  is  described as `<b>another</b> <b>number</b>' and takes an
              optional argument described as `<b>second</b> <b>count</b>' for which the completions (to  appear  after  an
              `<b>=</b>')  are  `<b>1</b>',  `<b>2</b>', and `<b>3</b>'.  The <b>_values</b> function will complete lists of these values sepa-
              rated by commas.

              Like <b>_arguments</b>, this function temporarily adds another context name component  to  the  argu-
              ments  element  (the fifth) of the current context while executing the <u>action</u>.  Here this name
              is just the name of the value for which the argument is completed.

              The style <b>verbose</b> is used to decide if the descriptions for the values (but not those for  the
              arguments) should be printed.

              The  associative array <b>val_args</b> is used to report values and their arguments; this works simi-
              larly to the <b>opt_args</b> associative array used by <b>_arguments</b>.  Hence the function calling  <b>_val</b>-
              <b>ues</b> should declare the local parameters <b>state</b>, <b>line</b>, <b>context</b> and <b>val_args</b>:

                     <b>local</b> <b>context</b> <b>state</b> <b>line</b>
                     <b>typeset</b> <b>-A</b> <b>val_args</b>

              when using an action of the form `<b>-&gt;</b><u>string</u>'.  With this function the <b>context</b> parameter will be
              set to the name of the value whose argument is to be completed.

              Note also that <b>_values</b> normally adds the character used as the separator between values as  an
              auto-removable suffix (similar to a `<b>/</b>' after a directory).  However, this is not possible for
              a `<b>-&gt;</b><u>string</u>' action as the matches for the argument are generated by the calling function.  To
              get the usual behaviour, the the calling function can add the separator <u>x</u> as a suffix by pass-
              ing the options `<b>-qS</b> <u>x</u>' either directly or indirectly to <b>compadd</b>.

              The option <b>-C</b> is treated in the same way as it is by <b>_arguments</b>.  In that case  the  parameter
              <b>curcontext</b> should be made local instead of <b>context</b> (as described above).

       <b>_wanted</b> [ <b>-x</b> ] [ <b>-C</b> <u>name</u> ]  [ <b>-12VJ</b> ] <u>tag</u> <u>name</u> <u>descr</u> <u>command</u> <u>args</u> ...
              In  many  contexts, completion can only generate one particular set of matches, usually corre-
              sponding to a single tag.  However, it is still necessary to decide whether the user  requires
              matches of this type.  This function is useful in such a case.

              The  arguments  to <b>_wanted</b> are the same as those to <b>_requested</b>, i.e. arguments to be passed to
              <b>_description</b>.  However, in this case the <u>command</u> is not optional;  all the processing of tags,
              including the loop over both tags and tag labels and the generation of matches, is carried out
              automatically by <b>_wanted</b>.

              Hence to offer only one tag and immediately add  the  corresponding  matches  with  the  given
              description:

                     <b>local</b> <b>expl</b>
                     <b>_wanted</b> <b>tag</b> <b>expl</b> <b>'description'</b> <b>\</b>
                         <b>compadd</b> <b>matches...</b>

              Note  that, as for <b>_requested</b>, the <u>command</u> must be able to accept options to be passed down to
              <b>compadd</b>.

              Like <b>_tags</b> this function supports the <b>-C</b> option to give a different name for the argument con-
              text field.  The <b>-x</b> option has the same meaning as for <b>_description</b>.


<b>COMPLETION</b> <b>DIRECTORIES</b>
       In  the  source  distribution,  the  files  are contained in various subdirectories of the <b>Completion</b>
       directory.  They may have been installed in the same structure, or into one  single  function  direc-
       tory.  The following is a description of the files found in the original directory structure.  If you
       wish to alter an installed file, you will need to copy it to some directory which appears earlier  in
       your <b>fpath</b> than the standard directory where it appears.

       <b>Base</b>   The  core functions and special completion widgets automatically bound to keys.  You will cer-
              tainly need most of these, though will probably not need to alter them.   Many  of  these  are
              documented above.

       <b>Zsh</b>    Functions  for  completing arguments of shell builtin commands and utility functions for this.
              Some of these are also used by functions from the <b>Unix</b> directory.

       <b>Unix</b>   Functions for completing arguments of external commands and suites of commands.  They may need
              modifying for your system, although in many cases some attempt is made to decide which version
              of a command is present.  For example, completion for the <b>mount</b> command tries to determine the
              system  it  is running on, while completion for many other utilities try to decide whether the
              GNU version of the command is in use, and hence whether the <b>--help</b> option is supported.

       <b>X</b>, <b>AIX</b>, <b>BSD</b>, ...
              Completion and utility function for commands available only on some systems.   These  are  not
              arranged  hierarchically,  so,  for example, both the <b>Linux</b> and <b>Debian</b> directories, as well as
              the <b>X</b> directory, may be useful on your system.



zsh 4.3.4                                      April 19, 2006                                  ZSHCOMPSYS(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/zshcompsys.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/zshcompsys.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/zshcompsys.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

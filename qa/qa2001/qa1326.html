<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><title>Technical Q&amp;A QA1326: QuickTime Effects - How to set up parameter description values when using kParameterTypeDataImage</title><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta name="keywords" content="QuickTime, Effects, Parameter Description Format, kParameterTypeDataImage"><meta name="Description" content="This Q&amp;A describes how to set up an effect parameter description when using kParameterTypeDataImage as the parameter data type."><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR=WHITE><a name="//apple_ref/doc/uid/DTS10003178" title="QuickTime Effects - How to set up parameter description values when using kParameterTypeDataImage"></a>
<!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalqas/QuickTime/idxVideoEffectsTransitions-date.html">Video Effects & Transitions</a> &gt; </p><!-- end_header_information --><!-- begin_titles_information --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1326</div>
<div id="pageheadsub">QuickTime Effects - How to set up parameter description values when using kParameterTypeDataImage</div>
</h1>
</td></tr></table></CENTER><!-- end_titles_information --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR>					<td align="left">						<hr width=500 align=center>						<!-- begin_document_contents -->						<p id=p2>Q: I'm trying to use the effect parameter data type <code>kParameterTypeDataImage</code> in my QuickTime Effect, but I can't find any documentation on how to set up the values for the <code>kParameterDataDefaultItem</code>, <code>kParameterDataBehavior</code> and <code>kParameterDataRange</code> atoms with this specific data type.</p>						<p id=p4>A: An effect parameter <code>kParameterDataType</code> atom defines the type of data for a specific effect parameter. The data type <code>kParameterTypeDataImage</code> specifies a reference to image data.</p>						<p id=p4>When using <code>kParameterTypeDataImage</code> as the parameter data type, the following guidelines should be used for setting up the associated parameter description atoms:</p>						<ul>							<li id=p4><code>kParameterDataRange</code> - this is an <code>ImageRangeRecord</code> and defines the legal range of values the specified effect parameter can take. The first field of this record is <code>imageFlags</code> and should be set to <code>0</code> ( zero ). This value is defined as the constant <code>kParameterImageNoFlags</code>.<br>								<br>							<li id=p4><code>kParameterDataBehavior</code> - this atom suggests how the effect parameter should be displayed by the client application. It's first field is <code>behaviorType</code> and should be set to <code>kParameterItemDragImage</code>, this allows the image to be changed by dragging a new image onto the control. The <code>behaviorFlags</code> field should be <code>0</code> ( <code>kParameterImageNoFlags </code>).<br>								<br>							<li id=p4><code>kParameterDataDefaultItem</code> - this atom contains the default value for the parameter and must either be 3 <code>short</code> values specifying a solid color, or PICT image data. <br>								<br>If the size of the default item ( <code>kParameterDataDefaultItem </code>) is less than the minimum size of a Picture ( &lt; 10 bytes - see QuickDraw.h ), QuickTime will assume the data is a solid color when creating the default image.<br>								<br>If the size of the default item ( <code>kParameterDataDefaultItem </code>) is greater than the minimum size of a Picture ( &gt; 10 bytes - see QuickDraw.h ), QuickTime will assume the item contains valid PICT data to be used as the default image.						</ul>						<p id=p4>These constants can be found in <code>ImageCodec.h</code> along with the other effect parameter records, flags and values.</p>						<p id=p4>The listings below demonstrate how QuickTime sets up the associated parameter atoms when the data type is <code>kParameterTypeDataImage</code>, listing 1 as the ripple mask for the &quot;Ripple&quot; effect and listing 2 as the matte for the &quot;Gradient Wipe&quot; effect.<br>							<!-- listing starts here --></p>						<center>							<table border=0 cellpadding=0 width=550>								<tr>									<td scope="row">										<p><b>Listing 1</b>. kParameterTypeDataImage for Ripple Effect</p>									</td>								</tr>								<tr>									<td bgcolor="#E6E6E6" scope="row">										<pre>// --------------------    // mask    kParameterAtomTypeAndID, 104, noChildren,    {        OSType { &quot;mask&quot; };        long { &quot;1&quot; };        kAtomNotInterpolated;        string { &quot;Ripple mask&quot; };    };        kParameterDataType, 104, noChildren,    {        kParameterTypeDataImage;    };                    kParameterDataRange, 104, noChildren,    {        long { &quot;0&quot; };    };    kParameterDataBehavior, 104, noChildren,    {        kParameterItemDragImage;        long { &quot;0&quot; };    };            kParameterDataDefaultItem, 104, noChildren,    {        short { &quot;0&quot; }; // black as shorts        short { &quot;0&quot; }; // black as shorts        short { &quot;0&quot; }; // black as shorts    };</pre>									</td>								</tr>							</table>						</center>						<!-- listing ends here --><br>						<!-- listing starts here -->						<center>							<table border=0 cellpadding=0 width=550>								<tr>									<td scope="row">										<p><b>Listing 2</b>. kParameterTypeDataImage for Gradient Wipe Effect.</p>									</td>								</tr>								<tr>									<td bgcolor="#E6E6E6" scope="row">										<pre>// --------------------    // matt    kParameterAtomTypeAndID, 104, noChildren,    {        OSType { &quot;matt&quot; };        long { &quot;1&quot; };        kAtomNotInterpolated;        string { &quot;Matte&quot; };    };        kParameterDataType, 104, noChildren,    {        kParameterTypeDataImage;    };                    kParameterDataRange, 104, noChildren,    {        long { &quot;0&quot; };    };    kParameterDataBehavior, 104, noChildren,    {        kParameterItemDragImage;        long { &quot;0&quot; };    };            kParameterDataDefaultItem, 104, noChildren,    { // PICT        lstring {         $&quot;129A 0000 0000 0100 0155 0011 02FF 0C00&quot; /*.?.......U...?.. */        $&quot;FFFE 0000 0048 0000 0048 0000 0000 0000&quot; /*??...H...H...... */        $&quot;0100 0155 0000 0000 00A1 01F2 0016 3842&quot; /*...U.....&deg;.&Uacute;..8B */        $&quot;494D 0000 0000 0000 0100 0155 4772 8970&quot; /*IM.........UGr?p */        $&quot;68AF 626A 0001 000A 0000 0000 0100 0155&quot; /*h&yuml;bj...........U */        $&quot;0098 8158 0000 0000 0100 0155 0000 0000&quot; /*.&Uacute;&Aring;X.......U.... */        $&quot;0000 0000 0048 0000 0048 0000 0000 0008&quot; /*.....H...H...... */        $&quot;0001 0008 0000 0000 0000 0000 0000 0000&quot; /*................ */        $&quot;0000 0028 0000 00FF 0000 FFFF FFFF FFFF&quot; /*...(...?..?????? */        $&quot;0001 FEFE FEFE FEFE 0002 FDFD FDFD FDFD&quot; /*..??????..?????? */        $&quot;0003 FCFC FCFC FCFC 0004 FBFB FBFB FBFB&quot; /*..      ..?????? */        $&quot;0005 FAFA FAFA FAFA 0006 F9F9 F9F9 F9F9&quot; /*..??????..?????? */        $&quot;0007 F8F8 F8F8 F8F8 0008 F7F7 F7F7 F7F7&quot; /*..&Oslash;&Oslash;&Oslash;&Oslash;&Oslash;&Oslash;..&ograve;&ograve;&ograve;&ograve;&ograve;&ograve; */        $&quot;0009 F6F6 F6F6 F6F6 000A F5F5 F5F5 F5F5&quot; /*.?&agrave;&agrave;&agrave;&agrave;&agrave;&agrave;..?????? */        $&quot;000B F4F4 F4F4 F4F4 000C F3F3 F3F3 F3F3&quot; /*..??????..&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc;&Ucirc; */        $&quot;000D F2F2 F2F2 F2F2 000E F1F1 F1F1 F1F1&quot; /*.&uml;&Uacute;&Uacute;&Uacute;&Uacute;&Uacute;&Uacute;..?????? */        $&quot;000F F0F0 F0F0 F0F0 0010 EFEF EFEF EFEF&quot; /*..??????..       */     ... PICT DATA CONTINUES ...       $&quot;0006 8100 8100 A900 00FF&quot;                 /* ..&Aring;.&Aring;.&copy;..? */       };    };</pre>									</td>								</tr>							</table>						</center>						<h3><!-- listing ends here --></h3>						<h3>References:</h3>						<ul>							<li><a href="../../documentation/QuickTime/REF/refEffects.34.htm" target="_blank">QuickTime Effect Parameter Descriptions</a>							<li><a href="../../documentation/QuickTime/REF/refEffects.36.htm" target="_blank">QuickTIme Effect Parameter Description Format</a>							<li><a href="../../documentation/mac/QuickDraw/QuickDraw-366.html" target="_blank">The Picture Resource</a>						</ul>						<hr width=500 align=center>						<!-- begin_date --><H4 ALIGN=center>[Dec 09, 2003]</H4><!-- end_date --><!-- end_document_contents --></td>				</TR></TABLE></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1326.html%3Fid%3DDTS10003178-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1326.html%3Fid%3DDTS10003178-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1326.html%3Fid%3DDTS10003178-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
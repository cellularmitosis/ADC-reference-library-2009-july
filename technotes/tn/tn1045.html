<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN1045: On Changes to QuickTime Conferencing Components: New Error Codes, Behavior &amp; Methods of Retrieving Errors</title>    <meta name="keywords" content="Mac OS 8 Quicktime conferencing components error codes PowerTalk MTFlowControlInit">    <meta name="Description" content="Technical Note TN1045: This Technical Note describes newerror codes, documents new behavior, and provides informationon retrieving errors involved in the various components ofQuickTime Conferencing (QTC). Topics include: Snapshot errors,MTFlowControlInit errors, MTRecorderChangedStreams &amp; mtRenegotiatedErr,etc."><meta name="categories" content="QuickTime Conferencing"><meta name="week-posted" content="Apr 29, 1996 - May 3, 1996"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002887" title="On Changes to QuickTime Conferencing Components: New Error Codes, Behavior & Methods of Retrieving Errors"></a><A NAME="top"></A> <!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1045</div>
<div id="pageheadsub">On Changes to QuickTime Conferencing Components: New Error Codes, Behavior &amp; Methods of Retrieving Errors</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"> <!-- begin_header_box --> <table width="600" cellpadding="0" cellspacing="0" border="0">	<tr>		<td width=300 valign="top" align=left scope="row">			<table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>				</tr>				<tr bgcolor="#e6e6e6">					<td background="images/tnmenubody.gif" width=300 align=left>						<span id="menutitle">							CONTENTS     <BR>    <BR>						</span>					</td>				</tr>				<tr bgcolor="#e6e6e6">					<td background="images/tnmenubody.gif" width=300 align=left>						<p id="menutext"><A HREF = "#5#RTFToC1">Getting Stream Controller Errors When a Snapshot Fails,QTC 1.0.2</a><br><br><A HREF = "#5#RTFToC2">Error Codes for MTFlowControlInit, QTC 1.0.2</a><br><br><A HREF = "#5#RTFToC3">Conferencing MTRecorderChangedStreams &amp; mtRenegotiatedErr, QTC 1.0.2</a><br><br><A HREF = "#5#RTFToC4">QuickTime Conferencing Gestalt Selector Code, QTC 1.0.3</a><br><br><A HREF = "#5#RTFToC5">PowerTalk Browser Notes</a><br><br><A HREF = "#5#RTFToC6">Speaker Designation "Off While Recording" mislabeled</a><br><br><A HREF = "#5#RTFToC7">MTTransportDisconnect does not return <br>mtIncompatibleStateErr</a><br><br><A HREF = "#5#RTFToC8">Interrupt-Time Processing with QTC Network Calls</a><br><br><A HREF = "#5#RTFToC9">QTC SNMP MTallowedBandwidth MIB variable</a><br><br><A HREF = "#5#RTFToC10">No QTC CFM-68K Support Yet</a><br><br><A HREF = "#5#RTFToC11">Source Stream Director Restrictions</a><br><br><A HREF = "#5#RTFToC12">Summary</a><br><br><A HREF="#references">References</A><BR><BR><A HREF="#Downloads">Downloadables</A><BR></p>											</td>				</tr>				<tr>					<td width=300 align=left scope="row">						<img src="images/tnmenubottom.gif" alt="" width=300 height=16>					</td>				</tr>			</table>		</td>		<td width=300 valign="top" align=left><p id="introtext">This Technote describes new error codes, documents new behavior, and providesinformation on retrieving errors involved in the various components ofQuickTime Conferencing (QTC).</p><P id = "introtext">This Note is aimed at all developers whose projects include QuickTime Conferencing.</p><BR><CENTER><TABLE BORDER=0 WIDTH=275><TR><td bgcolor="#E6E6E6" align=left><P id = "introtext"><B>Note:</B><BR>Note: The sections in this Technote refer to topics supported by different versionsof QuickTime Conferencing. The title to each section includes the version ofQTC in which that topic is first supported.</p></TD></TR></TABLE></CENTER><BR><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Mar 1 1996]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR> <!-- begin_content --><a name = "RTFToC1"></a><h2>Getting Stream Controller Errors When a Snapshot Fails,QTC 1.0.2</h2><P>This section shows how applications can retrieve errors set by a QuickTimeConferencing version 1.0.2 Stream Controller Component in the case where aSnapshot fails, and is directed towards those developers who are using theQuickTime Conferencing Stream Controller Components API.</p><h3>Snapshot Failed Errors</h3><P>Under QuickTime Conferencing 1.0, a stream controller had no way of conveyingerrors which occur when a snapshot fails. The only indication that an erroroccurred was that the parameter passed into the action filter procedure for the<code>mtControllerActionSnapshot</code> and <code>mtControllerActionSnapshotData</code> action codes wasNULL. But there was no way of getting the actual error number.</p><p>Beginning with QuickTime 1.0.2, a stream controller uses the Component Managerfunction <code>SetComponentInstanceError</code> to convey the error in the case of a failedsnapshot. If an application gets a NULL parameter for the<code>mtControllerActionSnapshot</code> or <code>mtControllerActionSnapshotData</code> action codes, itcan then call the Component Manager function <code>GetComponentInstanceError</code> to findout the specific error number.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC2"></a><h2>Error Codes for MTFlowControlInit, QTC 1.0.2</h2><P>The Flow Control Components chapter of <i>Inside Macintosh: QuickTimeConferencing</i> version describes the <code>MTFlowControlInit</code> function, along withresult codes that may be returned by this call. Since the publication of thisdocument, however, some new error codes have been defined. This sectiondescribes the new error codes that were added beginning with QuickTimeConferencing version 1.0.2, and is for developers who are writing QuickTimeConferencing Flow Control Components.</p><h3>New Error Codes for MTFlowControlInit</h3><P>Starting with QuickTime Conferencing version 1.0.2, the <code>MTFlowControlInit</code>function can now return two new error codes, in addition to those listed in theFlow Control Components chapter of <i>Inside Macintosh: QuickTimeConferencing</i> page 7-13: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>invalidComponentIDmemFullErr</pre>	</TD></TR></TABLE></CENTER><P>This only applies to flow control components of type <code>kMTFlowControlSender</code>. Theoutgoing flow control component tries to open the QTC SNMP regulating component(which was not documented for QTC 1.0). If the outgoing flow control componentcannot find the component, invalidComponentID is returned. If the componentcannot be opened due to memory errors, memFullErr is returned.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC3"></a><h2>Conferencing MTRecorderChangedStreams &amp; mtRenegotiatedErr, QTC 1.0.2</h2><P>This section documents new behavior for the QuickTime Conferencing version1.0.2 <code>MTRecorderChangedStreams</code> function. It is aimed at developers who arewriting QuickTime Conferencing Recorder Components or Stream Directors andapplication developers who use the Recorder Components APIs.</p><h3>MTRecorderChangedStreams &amp; mtRenegotiatedErr</h3><P>According to <i>Inside Macintosh: QuickTime Conferencing</i>, an applicationneeds to call the <code>MTRecorderChangedStreams</code> function (see page 8-24) to informrecorder components about stream additions or deletions, and about changes tothe format of streams it is recording. With QuickTime Conferencing version1.0.2, however, this is no longer true.</p><P>Instead, the source and sink stream directors call the recorder's callbackrecording procedure routine, passing it a chunk with an the error field set to<code>mtRenegotiatedErr</code>. This indicates to the recorder that the stream formats andstream ID's have changed and that it needs to make the appropriate calls to thestream director to update the recording.</p><P>Developers of stream directors will need to call the recording procedure with achunk which has the error field set to <code>mtRenegotiatedErr</code> whenever streamschange when it is recording.</p><P>Developers of recorder components will need to look for the <code>mtRenegotiatedErr</code>value in the chunk error field of the media chunk and react appropriately tothe new stream formats and ID's.</p><P>The error code <code>mtRenegotiatedErr</code> can be found in the QTC 1.0.2 interface files and is defined as follows: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>mtRenegotiatedErr    -7886</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></P><a name = "RTFToC4"></a><h2>QuickTime Conferencing Gestalt Selector Code, QTC 1.0.3</h2><P>This section documents a new Gestalt Selector Code for QuickTime Conferencingversion 1.0.3 and later. This section is aimed at all developers using theQuickTime Conferencing APIs.</p><h3>New Gestalt Selector Code</h3><P>A new Gestalt selector was added into QuickTime Conferencing version 1.0.3 andlater. The new selector is: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>#define gestaltQuickTimeConferencingInfo 'qtci'</pre>	</TD></TR></TABLE></CENTER><P>This new selector was necessary for backwards and forwards compatibility of theApple Media Conference (AMC) application, and to provide applications with moreinformation about the installed version of QTC.</p><P>The new Gestalt selector will return a pointer to the following structure: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>struct QTCGestaltInfo {    long QTCversion; /* standard binary version - i.e. 0x01044007                        means &quot;1.0.4a7&quot; */    char QTCversionString[20]; /* this is a pascal string, followed                                    by a zero char */};</pre>	</TD></TR></TABLE></CENTER><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>WARNING:</B><BR>Do not modify or dispose of the pointer to this structure - treat it asread-only information.</p><P>The reason for this is that version 1.0.2 of Apple Media Conference (also,therefore, Connectix VideoPhone) expects the same QTC version number asreturned by the existing <code>gestaltQuickTimeConferencing</code> ('mtlk') Gestaltselector, and all the currently shipped 1.0.2 applications would have failed torun if the old selector was changed from its 0x01028000 value -- newer versionsof QTC extensions essentially must lie about their version number to keep AMC1.0.2 happy. Yes, that's also why Apple Media Conference 1.0.2 still says theQTC version is 1.0.2, even when a newer version of QTC is actually installed.</P></TD></TR></TABLE></CENTER><BR><P>Starting in QTC 1.0.3 and later, the new Gestalt was created to detach thedependency of AMC on specific releases of QTC and provide a way forapplications to get and display the real QTC version number.</p><P>If the Gestalt selector points at a zero version number and empty string, itmeans that some QTC-related extension has already loaded, but QTC itself is notinstalled or has not yet loaded.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>The <code>QTCversionString</code> is a Pascal string. Since there's a zero character afterit, however, you can add one byte to the address and use it as a C string. </P></TD></TR></TABLE></CENTER><BR><P><A HREF="#top">Back to top</A></P><a name = "RTFToC5"></a><h2>PowerTalk Browser Notes</h2><P>The PowerTalk browser included with QTC 1.0.2 (and above) is <i>not</i> adialog box.  Therefore, any application-defined modal filter procedure providedwhen calling the MTBrowserBrowse function (see <i>Inside Macintosh: QuickTimeConferencing</i> 3-13) for the PowerTalk browser must not make any DialogManager calls. Doing so may result in a program crash.</p><P>Also, when the PowerTalk browser is being used with the MTBrowserBrowsefunction, two additional errors not documented in the Browser chapter (chapter3) of <i>Inside Macintosh: QuickTime Conferencing</i> may be returned: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>invalidComponentIDmemFullErr</pre>	</TD></TR></TABLE></CENTER><P>Essentially, the PowerTalk browser requires another component to do its work.If you specify the PowerTalk browser when calling the <code>MTBrowserBrowse</code> functionit tries to find and open such a component.  If the call can't find thiscomponent, <code>MTBrowserBrowse</code> will return <code>invalidComponentID</code>.  <code>MTBrowserBrowse</code>will return the error <code>memFullErr</code> if the component can't be opened because ofmemory-related problems.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC6"></a><h2>Speaker Designation "Off While Recording" mislabeled</h2><P>The Apple Media Conference application 1.0.2 (and above) speaker designationOff While Recording is somewhat misleading.  The Off While Recording speakerdesignation can be set by first selecting the Sound Settings... menu item underthe Settings menu. Once in the Sound settings dialog window select Source fromthe pop-up menu and specify Off While Recording in the Speaker pop-up menu.</p><P>Since there exists a recording function within the Apple Media Conferenceapplication that is separate and distinct from the conference or broadcastfunctions, many users assume that the Off While Recording designation will turnthe speakers off only when they elect to make a recording.  In fact, it shutsoff the speaker when a connection is made.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC7"></a><h2>MTTransportDisconnect does not return mtIncompatibleStateErr</h2><P>The description of the <code>MTTransportDisconnect</code> function in<i>InsideMacintosh: QuickTime Conferencing</i>, page 9-28, the QTC 1.0.2 is incorrect.</p><P>The <code>MTTransportDisconnect</code> function can legally be called at any time to clearthe state.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC8"></a><h2>Interrupt-Time Processing with QTC Network Calls</h2><P><i>Inside Macintosh: QuickTime Conferencing</i>, page 10-18, lists the followingQTC 1.0.2 (and above) Network Component functions that should not be called atinterrupt time: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>MTNetworkExtractNameMTNetworkOptionsMTNetworkSetNotifyProcMTNetworkSetReceiveMediaProc</pre>	</TD></TR></TABLE></CENTER><P>The following calls are safe to make at interrupt time: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>MTNetworkSendMTNetworkReceiveMTNetworkSendMedia</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></P><a name = "RTFToC9"></a><h2>QTC SNMP MTallowedBandwidth MIB variable</h2><P>SNMP Administrators must note that if the QTC 1.0.2 (and above) SNMP Agent<code>MTallowedBandwidth</code> MIB variable is set to zero, it will not stop all traffic ona given QTC connection. It will however, cause the connection to slow down to aminimum throughput of 1 frame-per-second (fps). This is equivalent to a valueof 25000 for the <code>MTallowedBandwidth</code> MIB variable. It is not possible for anSNMP&nbsp;Administrator to stop traffic completely for a given QTCconnection.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC10"></a><h2>No QTC CFM-68K Support Yet</h2><P>QTC 1.0.2 (and above) does not yet provide support for the 680x0 Macintosh CodeFragment Manager (CFM-68K). Such support would mean new QTC MPW Interface filesand QTC interface libraries. The QTC team is investigating possibly providingthese in future revisions of the product. In the meantime, developers who arecreating 680x0 Macintosh QTC applications will need to continue to use staticlibraries.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC11"></a><h2>Source Stream Director Restrictions</h2><P>With QTC 1.0.2 (and above), it is not possible to set the various visualcharacteristics for a source stream director. Thus the following calls made toa source stream director will fail with the <code>cantDoThatInCurrentMode</code> (-9402)error: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>MTDirectorSetMatrixMTDirectorSetRectMTDirectorSetClip</pre>	</TD></TR></TABLE></CENTER><P>The same code will, however, work fine for a sink stream director. Thisbehavior may be corrected in future versions of QTC.</p><P>Additionally, with QTC 1.0.2 (and above) it is possible to create a window thatcontains a sink view and its associated controller at some fixed offset (x,y)within the window. This is not currently possible for a given source view andits associated controller. A source controller may reside at some offset withina window but the corresponding source view must be placed at offset (0,0) inthe same window. This behavior may be corrected in future versions of QTC.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC12"></a><h2>Summary</h2><P>There are many new error codes, new behaviors, and new information onretrieving errors involved in the various components of QuickTime Conferencing.If you're developing any projects that include QuickTime Conferencing, you'llwant to be familiar with these changes. Check this Technote for information onchanges in future releases of QTC.</p><P><A HREF="#top">Back to top</A></P><A NAME="References"></a><H2>References</h2><p><i>Inside Macintosh: QuickTime Conferencing,</i> Stream Control Components,Chapter 4</p><p><a href="../../documentation/mac/MoreToolbox/MoreToolbox-333.html"><i>Inside Macintosh: More Macintosh Toolbox,</i></A> Component Manager, Chapter 6</p><p><i>Inside Macintosh: QuickTime Conferencing,</i> Flow Control ComponentsChapter, 7-12 </p><p><i>Inside Macintosh: QuickTime Conferencing, </i>Recorder Components, Chapter8, Stream Director Components, Chapter 5</p><p><i>Inside Macintosh: QuickTime Conferencing</i></p><p><a href="../../documentation/mac/OSUtilities/OSUtilities-9.html"><i>Inside Macintosh: Operating System Utilities</i></A>, Gestalt Manager,Chapter 1</p><P><A HREF="#top">Back to top</A></P>         <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (76K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn1045.pdf">Download</A></P>               </TD>            </TR></TABLE><P><A HREF="#top">Back to top</A></P></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1045.html%3Fid%3DDTS10002887-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1045.html%3Fid%3DDTS10002887-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1045.html%3Fid%3DDTS10002887-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
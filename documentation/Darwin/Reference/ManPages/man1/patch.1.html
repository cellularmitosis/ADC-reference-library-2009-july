<html><head><title>Mac OS X
 Manual Page For patch(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/patch" title="Mac OS X
 Manual Page for patch(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/patch"; name=patch(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
PATCH(1)                                                                                            PATCH(1)



<b>NAME</b>
       patch - apply a diff file to an original

<b>SYNOPSIS</b>
       <b>patch</b> [<u>options</u>] [<u>originalfile</u> [<u>patchfile</u>]]

       but usually just

       <b>patch</b> <b>-p</b><u>num</u> <b>&lt;</b><u>patchfile</u>

<b>DESCRIPTION</b>
       <b>patch</b>  takes  a patch file <u>patchfile</u> containing a difference listing produced by the <b>diff</b> program and
       applies those differences to one or more original files, producing patched  versions.   Normally  the
       patched  versions  are  put  in  place of the originals.  Backups can be made; see the <b>-b</b> or <b>--backup</b>
       option.  The names of the files to be patched are usually taken from the patch file, but  if  there's
       just one file to be patched it can specified on the command line as <u>originalfile</u>.

       Upon  startup,  patch  attempts  to  determine the type of the diff listing, unless overruled by a <b>-c</b>
       (<b>--context</b>), <b>-e</b> (<b>--ed</b>), <b>-n</b> (<b>--normal</b>), or <b>-u</b> (<b>--unified</b>)  option.   Context  diffs  (old-style,  new-
       style, and unified) and normal diffs are applied by the <b>patch</b> program itself, while <b>ed</b> diffs are sim-<font color="#ffffff" class="whiteout">ply&nbsp;simply</font>
       ply fed to the <a href="ed.1.html#//apple_ref/doc/man/1/ed"><b>ed</b>(1)</a> editor via a pipe.

       <b>patch</b> tries to skip any leading garbage, apply the diff, and then skip any  trailing  garbage.   Thus
       you  could feed an article or message containing a diff listing to <b>patch</b>, and it should work.  If the
       entire diff is indented by a consistent amount, or if a context diff contains lines ending in CRLF or
       is  encapsulated  one  or  more  times  by prepending "<b>-</b> " to lines starting with "<b>-</b>" as specified by
       Internet RFC 934, this is taken into account.   After  removing  indenting  or  encapsulation,  lines
       beginning with <b>#</b> are ignored, as they are considered to be comments.

       With  context diffs, and to a lesser extent with normal diffs, <b>patch</b> can detect when the line numbers
       mentioned in the patch are incorrect, and attempts to find the correct place to apply  each  hunk  of
       the patch.  As a first guess, it takes the line number mentioned for the hunk, plus or minus any off-<font color="#ffffff" class="whiteout">set&nbsp;offset</font>
       set used in applying the previous hunk.  If that is not the correct place, <b>patch</b> scans both  forwards
       and  backwards  for  a  set of lines matching the context given in the hunk.  First <b>patch</b> looks for a
       place where all lines of the context match.  If no such place is found, and it's a context diff,  and
       the  maximum  fuzz  factor  is set to 1 or more, then another scan takes place ignoring the first and
       last line of context.  If that fails, and the maximum fuzz factor is set to 2 or more, the first  two
       and  last two lines of context are ignored, and another scan is made.  (The default maximum fuzz fac-<font color="#ffffff" class="whiteout">tor&nbsp;factor</font>
       tor is 2.)  If <b>patch</b> cannot find a place to install that hunk of the patch, it puts the hunk out to a
       reject  file,  which  normally  is the name of the output file plus a <b>.rej</b> suffix, or <b>#</b> if <b>.rej</b> would
       generate a file name that is too long (if even appending the single character <b>#</b> makes the  file  name
       too  long, then <b>#</b> replaces the file name's last character).  (The rejected hunk comes out in ordinary
       context diff form regardless of the input patch's form.  If the input was a normal diff, many of  the
       contexts are simply null.)  The line numbers on the hunks in the reject file may be different than in
       the patch file: they reflect the approximate location patch thinks the failed hunks belong in the new
       file rather than the old one.

       As  each  hunk  is completed, you are told if the hunk failed, and if so which line (in the new file)
       <b>patch</b> thought the hunk should go on.  If the hunk is installed at a different line from the line num-<font color="#ffffff" class="whiteout">ber&nbsp;number</font>
       ber  specified  in  the diff you are told the offset.  A single large offset <u>may</u> indicate that a hunk
       was installed in the wrong place.  You are also told if a fuzz factor was used to make the match,  in
       which  case  you  should also be slightly suspicious.  If the <b>--verbose</b> option is given, you are also
       told about hunks that match exactly.

       If no original file <u>origfile</u> is specified on the command line, <b>patch</b> tries to  figure  out  from  the
       leading garbage what the name of the file to edit is, using the following rules.

       First, <b>patch</b> takes an ordered list of candidate file names as follows:

        <b></b><b><u>oo</u></b> If  the header is that of a context diff, <b>patch</b> takes the old and new file names in the header.  A
          name is ignored if it does not have enough slashes to satisfy the  <b>-p</b><u>num</u>  or  <b>--strip=</b><u>num</u>  option.
          The name <b>/dev/null</b> is also ignored.

        <b></b><b><u>oo</u></b> If  there  is  an  <b>Index:</b> line in the leading garbage and if either the old and new names are both
          absent or if <b>patch</b> is conforming to POSIX, <b>patch</b> takes the name in the <b>Index:</b> line.

        <b></b><b><u>oo</u></b> For the purpose of the following rules, the candidate file names are considered to be in the order
          (old, new, index), regardless of the order that they appear in the header.

       Then <b>patch</b> selects a file name from the candidate list as follows:

        <b></b><b><u>oo</u></b> If  some  of  the  named files exist, <b>patch</b> selects the first name if conforming to POSIX, and the
          best name otherwise.

        <b></b><b><u>oo</u></b> If <b>patch</b> is not ignoring RCS, ClearCase, Perforce, and SCCS (see the <b>-g</b> <u>num</u> or <b>--get=</b><u>num</u>  option),
          and  no  named files exist but an RCS, ClearCase, Perforce, or SCCS master is found, <b>patch</b> selects
          the first named file with an RCS, ClearCase, Perforce, or SCCS master.

        <b></b><b><u>oo</u></b> If no named files exist, no RCS, ClearCase, Perforce, or SCCS master was  found,  some  names  are
          given, <b>patch</b> is not conforming to POSIX, and the patch appears to create a file, <b>patch</b> selects the
          best name requiring the creation of the fewest directories.

        <b></b><b><u>oo</u></b> If no file name results from the above heuristics, you are asked for  the  name  of  the  file  to
          patch, and <b>patch</b> selects that name.

       To  determine  the  <u>best</u>  of  a nonempty list of file names, <b>patch</b> first takes all the names with the
       fewest path name components; of those, it then takes all the names with  the  shortest  basename;  of
       those, it then takes all the shortest names; finally, it takes the first remaining name.

       Additionally,  if  the  leading  garbage contains a <b>Prereq:</b> line, <b>patch</b> takes the first word from the
       prerequisites line (normally a version number) and checks the original file to see if that  word  can
       be found.  If not, <b>patch</b> asks for confirmation before proceeding.

       The  upshot  of all this is that you should be able to say, while in a news interface, something like
       the following:

          <b>|</b> <b>patch</b> <b>-d</b> <b>/usr/src/local/blurfl</b>

       and patch a file in the <b>blurfl</b> directory directly from the article containing the patch.

       If the patch file contains more than one patch, <b>patch</b> tries to apply each of them  as  if  they  came
       from  separate  patch files.  This means, among other things, that it is assumed that the name of the
       file to patch must be determined for each diff listing, and that the garbage before each diff listing
       contains interesting things such as file names and revision level, as mentioned previously.

<b>OPTIONS</b>
       <b>-b</b>  or  <b>--backup</b>
          Make backup files.  That is, when patching a file, rename or copy the original instead of removing
          it.  When backing up a file that does not exist, an empty, unreadable backup file is created as  a
          placeholder to represent the nonexistent file.  See the <b>-V</b> or <b>--version-control</b> option for details
          about how backup file names are determined.

       <b>--backup-if-mismatch</b>
          Back up a file if the patch does not match the file exactly  and  if  backups  are  not  otherwise
          requested.  This is the default unless <b>patch</b> is conforming to POSIX.

       <b>--no-backup-if-mismatch</b>
          Do  not  back up a file if the patch does not match the file exactly and if backups are not other-<font color="#ffffff" class="whiteout">wise&nbsp;otherwise</font>
          wise requested.  This is the default if <b>patch</b> is conforming to POSIX.

       <b>-B</b> <u>pref</u>  or  <b>--prefix=</b><u>pref</u>
          Prefix <u>pref</u> to a file name when generating  its  simple  backup  file  name.   For  example,  with
          <b>-B</b> <b>/junk/</b> the simple backup file name for <b>src/patch/util.c</b> is <b>/junk/src/patch/util.c</b>.

       <b>--binary</b>
          Read and write all files in binary mode, except for standard output and <b>/dev/tty</b>.  This option has
          no effect on POSIX-conforming systems.  On systems like DOS where this option makes a  difference,
          the patch should be generated by <b>diff</b> <b>-a</b> <b>--binary</b>.

       <b>-c</b>  or  <b>--context</b>
          Interpret the patch file as a ordinary context diff.

       <b>-d</b> <u>dir</u>  or  <b>--directory=</b><u>dir</u>
          Change to the directory <u>dir</u> immediately, before doing anything else.

       <b>-D</b> <u>define</u>  or  <b>--ifdef=</b><u>define</u>
          Use the <b>#ifdef</b> ... <b>#endif</b> construct to mark changes, with <u>define</u> as the differentiating symbol.

       <b>--dry-run</b>
          Print the results of applying the patches without actually changing any files.

       <b>-e</b>  or  <b>--ed</b>
          Interpret the patch file as an <b>ed</b> script.

       <b>-E</b>  or  <b>--remove-empty-files</b>
          Remove  output  files that are empty after the patches have been applied.  Normally this option is
          unnecessary, since <b>patch</b> can examine the time stamps on the header to  determine  whether  a  file
          should  exist after patching.  However, if the input is not a context diff or if <b>patch</b> is conform-<font color="#ffffff" class="whiteout">ing&nbsp;conforming</font>
          ing to POSIX, <b>patch</b> does not remove empty patched files unless this option is given.   When  <b>patch</b>
          removes a file, it also attempts to remove any empty ancestor directories.

       <b>-f</b>  or  <b>--force</b>
          Assume  that  the  user knows exactly what he or she is doing, and do not ask any questions.  Skip
          patches whose headers do not say which file is to be patched; patch files even  though  they  have
          the wrong version for the <b>Prereq:</b> line in the patch; and assume that patches are not reversed even
          if they look like they are.  This option does not suppress commentary; use <b>-s</b> for that.

       <b>-F</b> <u>num</u>  or  <b>--fuzz=</b><u>num</u>
          Set the maximum fuzz factor.  This option only applies to diffs  that  have  context,  and  causes
          <b>patch</b> to ignore up to that many lines in looking for places to install a hunk.  Note that a larger
          fuzz factor increases the odds of a faulty patch.  The default fuzz factor is 2, and it may not be
          set to more than the number of lines of context in the context diff, ordinarily 3.

       <b>-g</b> <u>num</u>  or  <b>--get=</b><u>num</u>
          This  option controls <b>patch</b>'s actions when a file is under RCS or SCCS control, and does not exist
          or is read-only and matches the default version, or when a file is  under  ClearCase  or  Perforce
          control  and  does  not  exist.   If <u>num</u> is positive, <b>patch</b> gets (or checks out) the file from the
          revision control system; if zero, <b>patch</b> ignores RCS, ClearCase, Perforce, and SCCS  and  does  not
          get  the file; and if negative, <b>patch</b> asks the user whether to get the file.  The default value of
          this option is given by the value of the <b>PATCH_GET</b> environment variable if it is set; if not,  the
          default value is zero if <b>patch</b> is conforming to POSIX, negative otherwise.

       <b>--help</b>
          Print a summary of options and exit.

       <b>-i</b> <u>patchfile</u>  or  <b>--input=</b><u>patchfile</u>
          Read the patch from <u>patchfile</u>.  If <u>patchfile</u> is <b>-</b>, read from standard input, the default.

       <b>-l</b>  or  <b>--ignore-whitespace</b>
          Match  patterns  loosely,  in case tabs or spaces have been munged in your files.  Any sequence of
          one or more blanks in the patch file matches any sequence in the original file, and  sequences  of
          blanks  at  the ends of lines are ignored.  Normal characters must still match exactly.  Each line
          of the context must still match a line in the original file.

       <b>-n</b>  or  <b>--normal</b>
          Interpret the patch file as a normal diff.

       <b>-N</b>  or  <b>--forward</b>
          Ignore patches that seem to be reversed or already applied.  See also <b>-R</b>.

       <b>-o</b> <u>outfile</u>  or  <b>--output=</b><u>outfile</u>
          Send output to <u>outfile</u> instead of patching files in place.  Do not use this option if  <u>outfile</u>  is
          one of the files to be patched.

       <b>-p</b><u>num</u>  or  <b>--strip=</b><u>num</u>
          Strip  the  smallest  prefix containing <u>num</u> leading slashes from each file name found in the patch
          file.  A sequence of one or more adjacent slashes is counted as a single slash.  This controls how
          file  names found in the patch file are treated, in case you keep your files in a different direc-<font color="#ffffff" class="whiteout">tory&nbsp;directory</font>
          tory than the person who sent out the patch.  For example, supposing the file name  in  the  patch
          file was

             <b>/u/howard/src/blurfl/blurfl.c</b>

          setting <b>-p0</b> gives the entire file name unmodified, <b>-p1</b> gives

             <b>u/howard/src/blurfl/blurfl.c</b>

          without the leading slash, <b>-p4</b> gives

             <b>blurfl/blurfl.c</b>

          and  not  specifying  <b>-p</b>  at  all just gives you <b>blurfl.c</b>.  Whatever you end up with is looked for
          either in the current directory, or the directory specified by the <b>-d</b> option.

       <b>--posix</b>
          Conform more strictly to the POSIX standard, as follows.

           <b></b><b><u>oo</u></b> Take the first existing file from the list (old, new, index) when  intuiting  file  names  from
             diff headers.

           <b></b><b><u>oo</u></b> Do not remove files that are empty after patching.

           <b></b><b><u>oo</u></b> Do not ask whether to get files from RCS, ClearCase, Perforce, or SCCS.

           <b></b><b><u>oo</u></b> Require that all options precede the files in the command line.

           <b></b><b><u>oo</u></b> Do not backup files when there is a mismatch.

       <b>--quoting-style=</b><u>word</u>
          Use style <u>word</u> to quote output names.  The <u>word</u> should be one of the following:

          <b>literal</b>
                 Output names as-is.

          <b>shell</b>  Quote  names  for  the  shell if they contain shell metacharacters or would cause ambiguous
                 output.

          <b>shell-always</b>
                 Quote names for the shell, even if they would normally not require quoting.

          <b>c</b>      Quote names as for a C language string.

          <b>escape</b> Quote as with <b>c</b> except omit the surrounding double-quote characters.

          You can specify the default value of the <b>--quoting-style</b>  option  with  the  environment  variable
          <b>QUOTING_STYLE</b>.  If that environment variable is not set, the default value is <b>shell</b>.

       <b>-r</b> <u>rejectfile</u>  or  <b>--reject-file=</b><u>rejectfile</u>
          Put rejects into <u>rejectfile</u> instead of the default <b>.rej</b> file.

       <b>-R</b>  or  <b>--reverse</b>
          Assume that this patch was created with the old and new files swapped.  (Yes, I'm afraid that does
          happen occasionally, human nature being what it is.)  <b>patch</b> attempts  to  swap  each  hunk  around
          before  applying it.  Rejects come out in the swapped format.  The <b>-R</b> option does not work with <b>ed</b>
          diff scripts because there is too little information to reconstruct the reverse operation.

          If the first hunk of a patch fails, <b>patch</b> reverses the hunk to see if it can be applied that  way.
          If  it can, you are asked if you want to have the <b>-R</b> option set.  If it can't, the patch continues
          to be applied normally.  (Note: this method cannot detect a reversed patch if it is a normal  diff
          and  if  the  first  command is an append (i.e. it should have been a delete) since appends always
          succeed, due to the fact that a null context matches  anywhere.   Luckily,  most  patches  add  or
          change  lines  rather  than  delete them, so most reversed normal diffs begin with a delete, which
          fails, triggering the heuristic.)

       <b>-s</b>  or  <b>--silent</b>  or  <b>--quiet</b>
          Work silently, unless an error occurs.

       <b>-t</b>  or  <b>--batch</b>
          Suppress questions like <b>-f</b>, but make some different assumptions: skip patches whose headers do not
          contain file names (the same as <b>-f</b>); skip patches for which the file has the wrong version for the
          <b>Prereq:</b> line in the patch; and assume that patches are reversed if they look like they are.

       <b>-T</b>  or  <b>--set-time</b>
          Set the modification and access times of patched files from time  stamps  given  in  context  diff
          headers,  assuming  that the context diff headers use local time.  This option is not recommended,
          because patches using local time cannot easily be used by people in other time zones, and  because
          local  time  stamps  are  ambiguous  when  local clocks move backwards during daylight-saving time
          adjustments.  Instead of using this option, generate patches with UTC and use the <b>-Z</b> or  <b>--set-utc</b>
          option instead.

       <b>-u</b>  or  <b>--unified</b>
          Interpret the patch file as a unified context diff.

       <b>-v</b>  or  <b>--version</b>
          Print out <b>patch</b>'s revision header and patch level, and exit.

       <b>-V</b> <u>method</u>  or  <b>--version-control=</b><u>method</u>
          Use <u>method</u> to determine backup file names.  The method can also be given by the <b>PATCH_VERSION_CON</b>-<font color="#ffffff" class="whiteout">TROL&nbsp;PATCH_VERSION_CONTROL</font>
          <b>TROL</b> (or, if that's not set, the <b>VERSION_CONTROL</b>) environment variable,  which  is  overridden  by
          this  option.  The method does not affect whether backup files are made; it affects only the names
          of any backup files that are made.

          The value of <u>method</u> is like the GNU Emacs `version-control' variable; <b>patch</b> also  recognizes  syn-<font color="#ffffff" class="whiteout">onyms&nbsp;synonyms</font>
          onyms  that  are  more  descriptive.   The  valid  values for <u>method</u> are (unique abbreviations are
          accepted):

          <b>existing</b>  or  <b>nil</b>
             Make numbered backups of files that already have them, otherwise simple backups.  This  is  the
             default.

          <b>numbered</b>  or  <b>t</b>
             Make  numbered  backups.   The  numbered backup file name for <u>F</u> is <u>F</u><b>.~</b><u>N</u><b>~</b> where <u>N</u> is the version
             number.

          <b>simple</b>  or  <b>never</b>
             Make simple backups.  The <b>-B</b> or <b>--prefix</b>, <b>-Y</b> or <b>--basename-prefix</b>, and <b>-z</b> or  <b>--suffix</b>  options
             specify  the simple backup file name.  If none of these options are given, then a simple backup
             suffix is used; it is the value of the <b>SIMPLE_BACKUP_SUFFIX</b> environment variable if set, and is
             <b>.orig</b> otherwise.

          With  numbered or simple backups, if the backup file name is too long, the backup suffix <b>~</b> is used
          instead; if even appending <b>~</b> would make the name too long, then <b>~</b> replaces the last  character  of
          the file name.

       <b>--verbose</b>
          Output extra information about the work being done.

       <b>-x</b> <u>num</u>  or  <b>--debug=</b><u>num</u>
          Set internal debugging flags of interest only to <b>patch</b> patchers.

       <b>-Y</b> <u>pref</u>  or  <b>--basename-prefix=</b><u>pref</u>
          Prefix <u>pref</u> to the basename of a file name when generating its simple backup file name.  For exam-<font color="#ffffff" class="whiteout">ple,&nbsp;example,</font>
          ple, with <b>-Y</b> <b>.del/</b> the simple backup file name for <b>src/patch/util.c</b> is <b>src/patch/.del/util.c</b>.

       <b>-z</b> <u>suffix</u>  or  <b>--suffix=</b><u>suffix</u>
          Use <u>suffix</u> as the simple backup suffix.  For example, with <b>-z</b> <b>-</b> the simple backup  file  name  for
          <b>src/patch/util.c</b>  is  <b>src/patch/util.c-</b>.   The  backup  suffix  may  also be specified by the <b>SIM</b>-<font color="#ffffff" class="whiteout">PLE_BACKUP_SUFFIX&nbsp;SIMPLE_BACKUP_SUFFIX</font>
          <b>PLE_BACKUP_SUFFIX</b> environment variable, which is overridden by this option.

       <b>-Z</b>  or  <b>--set-utc</b>
          Set the modification and access times of patched files from time  stamps  given  in  context  diff
          headers,  assuming  that the context diff headers use Coordinated Universal Time (UTC, often known
          as GMT).  Also see the <b>-T</b> or <b>--set-time</b> option.

          The <b>-Z</b> or <b>--set-utc</b> and <b>-T</b> or <b>--set-time</b> options normally refrain from setting a  file's  time  if
          the  file's original time does not match the time given in the patch header, or if its contents do
          not match the patch exactly.  However, if the <b>-f</b> or <b>--force</b> option is given, the file time is  set
          regardless.

          Due to the limitations of <b>diff</b> output format, these options cannot update the times of files whose
          contents have not changed.  Also,  if  you  use  these  options,  you  should  remove  (e.g.  with
          <b>make</b> <b>clean</b>)  all  files that depend on the patched files, so that later invocations of <b>make</b> do not
          get confused by the patched files' times.

<b>ENVIRONMENT</b>
       <b>PATCH_GET</b>
          This specifies whether <b>patch</b> gets missing or read-only files from  RCS,  ClearCase,  Perforce,  or
          SCCS by default; see the <b>-g</b> or <b>--get</b> option.

       <b>POSIXLY_CORRECT</b>
          If set, <b>patch</b> conforms more strictly to the POSIX standard by default: see the <b>--posix</b> option.

       <b>QUOTING_STYLE</b>
          Default value of the <b>--quoting-style</b> option.

       <b>SIMPLE_BACKUP_SUFFIX</b>
          Extension to use for simple backup file names instead of <b>.orig</b>.

       <b>TMPDIR</b>, <b>TMP</b>, <b>TEMP</b>
          Directory  to  put temporary files in; <b>patch</b> uses the first environment variable in this list that
          is set.  If none are set, the default is system-dependent; it is normally <b>/tmp</b> on Unix hosts.

       <b>VERSION_CONTROL</b> or <b>PATCH_VERSION_CONTROL</b>
          Selects version control style; see the <b>-v</b> or <b>--version-control</b> option.

<b>FILES</b>
       <u>$TMPDIR</u><b>/p*</b>
          temporary files

       <b>/dev/tty</b>
          controlling terminal; used to get answers to questions asked of the user

<b>SEE</b> <b>ALSO</b>
       <a href="diff.1.html#//apple_ref/doc/man/1/diff"><b>diff</b>(1)</a>, <a href="ed.1.html#//apple_ref/doc/man/1/ed"><b>ed</b>(1)</a>

       Marshall T. Rose and Einar A. Stefferud, Proposed Standard for Message  Encapsulation,  Internet  RFC
       934 URL: &lt;<a href="ftp://ftp.isi.edu/in-notes/rfc934.txt">ftp://ftp.isi.edu/in-notes/rfc934.txt</a> (1985-01).

<b>NOTES</b> <b>FOR</b> <b>PATCH</b> <b>SENDERS</b>
       There are several things you should bear in mind if you are going to be sending out patches.

       Create  your patch systematically.  A good method is the command <b>diff</b> <b>-Naur</b> <u>old</u> <u>new</u> where <u>old</u> and <u>new</u>
       identify the old and new directories.  The names <u>old</u> and <u>new</u> should not  contain  any  slashes.   The
       <b>diff</b>  command's  headers should have dates and times in Universal Time using traditional Unix format,
       so that patch recipients can use the <b>-Z</b> or <b>--set-utc</b> option.   Here  is  an  example  command,  using
       Bourne shell syntax:

          <b>LC_ALL=C</b> <b>TZ=UTC0</b> <b>diff</b> <b>-Naur</b> <b>gcc-2.7</b> <b>gcc-2.8</b>

       Tell your recipients how to apply the patch by telling them which directory to <b>cd</b> to, and which <b>patch</b>
       options to use.  The option string <b>-Np1</b> is recommended.  Test your procedure by pretending  to  be  a
       recipient and applying your patch to a copy of the original files.

       You  can  save people a lot of grief by keeping a <b>patchlevel.h</b> file which is patched to increment the
       patch level as the first diff in the patch file you send out.  If you put a <b>Prereq:</b> line in with  the
       patch, it won't let them apply patches out of order without some warning.

       You  can create a file by sending out a diff that compares <b>/dev/null</b> or an empty file dated the Epoch
       (1970-01-01 00:00:00 UTC) to the file you want to create.  This only works if the file  you  want  to
       create  doesn't  exist already in the target directory.  Conversely, you can remove a file by sending
       out a context diff that compares the file to be deleted with an empty file dated the Epoch.  The file
       will  be removed unless <b>patch</b> is conforming to POSIX and the <b>-E</b> or <b>--remove-empty-files</b> option is not
       given.  An easy way to generate patches that create and remove files is  to  use  GNU  <b>diff</b>'s  <b>-N</b>  or
       <b>--new-file</b> option.

       If the recipient is supposed to use the <b>-p</b><u>N</u> option, do not send output that looks like this:

          <b>diff</b> <b>-Naur</b> <b>v2.0.29/prog/README</b> <b>prog/README</b>
          <b>---</b> <b>v2.0.29/prog/README</b>   <b>Mon</b> <b>Mar</b> <b>10</b> <b>15:13:12</b> <b>1997</b>
          <b>+++</b> <b>prog/README</b>   <b>Mon</b> <b>Mar</b> <b>17</b> <b>14:58:22</b> <b>1997</b>

       because  the two file names have different numbers of slashes, and different versions of <b>patch</b> inter-<font color="#ffffff" class="whiteout">pret&nbsp;interpret</font>
       pret the file names differently.  To avoid confusion, send output that looks like this instead:

          <b>diff</b> <b>-Naur</b> <b>v2.0.29/prog/README</b> <b>v2.0.30/prog/README</b>
          <b>---</b> <b>v2.0.29/prog/README</b>   <b>Mon</b> <b>Mar</b> <b>10</b> <b>15:13:12</b> <b>1997</b>
          <b>+++</b> <b>v2.0.30/prog/README</b>   <b>Mon</b> <b>Mar</b> <b>17</b> <b>14:58:22</b> <b>1997</b>


       Avoid sending patches that compare backup file names like <b>README.orig</b>, since this might confuse <b>patch</b>
       into  patching  a  backup file instead of the real file.  Instead, send patches that compare the same
       base file names in different directories, e.g. <b>old/README</b> and <b>new/README</b>.

       Take care not to send out reversed patches, since it makes people wonder whether they already applied
       the patch.

       Try  not  to have your patch modify derived files (e.g. the file <b>configure</b> where there is a line <b>con</b>-<font color="#ffffff" class="whiteout">figure:&nbsp;configure:</font>
       <b>figure:</b> <b>configure.in</b> in your makefile), since the recipient should be able to regenerate the  derived
       files anyway.  If you must send diffs of derived files, generate the diffs using UTC, have the recip-<font color="#ffffff" class="whiteout">ients&nbsp;recipients</font>
       ients apply the patch with the <b>-Z</b> or <b>--set-utc</b> option, and have them remove any unpatched files  that
       depend on patched files (e.g. with <b>make</b> <b>clean</b>).

       While  you  may  be able to get away with putting 582 diff listings into one file, it may be wiser to
       group related patches into separate files in case something goes haywire.

<b>DIAGNOSTICS</b>
       Diagnostics generally indicate that <b>patch</b> couldn't parse your patch file.

       If the <b>--verbose</b> option is given, the message <b>Hmm...</b> indicates that there is unprocessed text in  the
       patch  file  and that <b>patch</b> is attempting to intuit whether there is a patch in that text and, if so,
       what kind of patch it is.

       <b>patch</b>'s exit status is 0 if all hunks are applied successfully, 1 if some hunks  cannot  be  applied,
       and  2 if there is more serious trouble.  When applying a set of patches in a loop it behooves you to
       check this exit status so you don't apply a later patch to a partially patched file.

<b>CAVEATS</b>
       Context diffs cannot reliably represent the creation or deletion of empty files,  empty  directories,
       or special files such as symbolic links.  Nor can they represent changes to file metadata like owner-<font color="#ffffff" class="whiteout">ship,&nbsp;ownership,</font>
       ship, permissions, or whether one file is a hard link to another.  If changes  like  these  are  also
       required,  separate instructions (e.g. a shell script) to accomplish them should accompany the patch.

       <b>patch</b> cannot tell if the line numbers are off in an <b>ed</b> script, and can detect bad line numbers  in  a
       normal diff only when it finds a change or deletion.  A context diff using fuzz factor 3 may have the
       same problem.  Until a suitable interactive interface is added, you should probably do a context diff
       in  these  cases  to  see if the changes made sense.  Of course, compiling without errors is a pretty
       good indication that the patch worked, but not always.

       <b>patch</b> usually produces the correct results, even when it has to do a lot of guessing.   However,  the
       results  are  guaranteed  to be correct only when the patch is applied to exactly the same version of
       the file that the patch was generated from.

<b>COMPATIBILITY</b> <b>ISSUES</b>
       The POSIX standard specifies behavior that differs from <b>patch</b>'s traditional behavior.  You should  be
       aware of these differences if you must interoperate with <b>patch</b> versions 2.1 and earlier, which do not
       conform to POSIX.

        <b></b><b><u>oo</u></b> In traditional <b>patch</b>, the <b>-p</b> option's operand was optional, and a bare <b>-p</b> was equivalent  to  <b>-p0.</b>
          The <b>-p</b> option now requires an operand, and <b>-p</b> <b>0</b> is now equivalent to <b>-p0</b>.  For maximum compatibil-<font color="#ffffff" class="whiteout">ity,&nbsp;compatibility,</font>
          ity, use options like <b>-p0</b> and <b>-p1</b>.

          Also, traditional <b>patch</b> simply counted slashes when stripping  path  prefixes;  <b>patch</b>  now  counts
          pathname  components.   That is, a sequence of one or more adjacent slashes now counts as a single
          slash.  For maximum portability, avoid sending patches containing <b>//</b> in file names.

        <b></b><b><u>oo</u></b> In traditional <b>patch</b>, backups were enabled by default.  This behavior is now enabled with  the  <b>-b</b>
          or <b>--backup</b> option.

          Conversely,  in POSIX <b>patch</b>, backups are never made, even when there is a mismatch.  In GNU <b>patch</b>,
          this behavior is enabled with the <b>--no-backup-if-mismatch</b> option, or by conforming to  POSIX  with
          the <b>--posix</b> option or by setting the <b>POSIXLY_CORRECT</b> environment variable.

          The  <b>-b</b> <u>suffix</u> option of traditional <b>patch</b> is equivalent to the <b>-b</b> <b>-z</b> <u>suffix</u> options of GNU <b>patch</b>.

        <b></b><b><u>oo</u></b> Traditional <b>patch</b> used a complicated (and incompletely documented) method to intuit  the  name  of
          the file to be patched from the patch header.  This method did not conform to POSIX, and had a few
          gotchas.  Now <b>patch</b> uses a different, equally complicated (but better documented) method  that  is
          optionally  POSIX-conforming; we hope it has fewer gotchas.  The two methods are compatible if the
          file names in the context diff header and the <b>Index:</b> line are all  identical  after  prefix-strip-<font color="#ffffff" class="whiteout">ping.&nbsp;prefix-stripping.</font>
          ping.   Your  patch is normally compatible if each header's file names all contain the same number
          of slashes.

        <b></b><b><u>oo</u></b> When traditional <b>patch</b> asked the user a question, it sent  the  question  to  standard  error  and
          looked  for  an  answer  from  the  first file in the following list that was a terminal: standard
          error, standard output, <b>/dev/tty</b>, and standard input.  Now <b>patch</b> sends questions to standard  out-<font color="#ffffff" class="whiteout">put&nbsp;output</font>
          put  and  gets  answers  from <b>/dev/tty</b>.  Defaults for some answers have been changed so that <b>patch</b>
          never goes into an infinite loop when using default answers.

        <b></b><b><u>oo</u></b> Traditional <b>patch</b> exited with a status value that counted the number of bad hunks, or with  status
          1  if  there  was  real trouble.  Now <b>patch</b> exits with status 1 if some hunks failed, or with 2 if
          there was real trouble.

        <b></b><b><u>oo</u></b> Limit yourself to the following options when sending instructions meant to be executed  by  anyone
          running  GNU  <b>patch</b>, traditional <b>patch</b>, or a <b>patch</b> that conforms to POSIX.  Spaces are significant
          in the following list, and operands are required.

             <b>-c</b>
             <b>-d</b> <u>dir</u>
             <b>-D</b> <u>define</u>
             <b>-e</b>
             <b>-l</b>
             <b>-n</b>
             <b>-N</b>
             <b>-o</b> <u>outfile</u>
             <b>-p</b><u>num</u>
             <b>-R</b>
             <b>-r</b> <u>rejectfile</u>

<b>BUGS</b>
       Please report bugs via email to <b>&lt;bug-patch@gnu.org&gt;</b>.

       <b>patch</b> could be smarter about partial matches, excessively deviant offsets and swapped code, but  that
       would take an extra pass.

       If  code  has been duplicated (for instance with <b>#ifdef</b> <b>OLDCODE</b> ... <b>#else</b> <b>...</b> <b>#endif</b>), <b>patch</b> is inca-<font color="#ffffff" class="whiteout">pable&nbsp;incapable</font>
       pable of patching both versions, and, if it works at all, will likely patch the wrong one,  and  tell
       you that it succeeded to boot.

       If  you  apply a patch you've already applied, <b>patch</b> thinks it is a reversed patch, and offers to un-<font color="#ffffff" class="whiteout">apply&nbsp;unapply</font>
       apply the patch.  This could be construed as a feature.

<b>COPYING</b>
       Copyright (C) 1984, 1985, 1986, 1988 Larry Wall.
       Copyright (C) 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002 Free
       Software Foundation, Inc.

       Permission  is  granted  to make and distribute verbatim copies of this manual provided the copyright
       notice and this permission notice are preserved on all copies.

       Permission is granted to copy and distribute modified versions of this manual  under  the  conditions
       for  verbatim copying, provided that the entire resulting derived work is distributed under the terms
       of a permission notice identical to this one.

       Permission is granted to copy and distribute translations of this manual into another language, under
       the  above  conditions  for  modified versions, except that this permission notice may be included in
       translations approved by the copyright holders instead of in the original English.

<b>AUTHORS</b>
       Larry Wall wrote the original version of <b>patch</b>.  Paul Eggert removed <b>patch</b>'s arbitrary limits;  added
       support  for  binary  files,  setting  file  times, and deleting files; and made it conform better to
       POSIX.  Other contributors include Wayne Davison, who added unidiff support, and David MacKenzie, who
       added configuration and backup support.



GNU                                              2003/05/08                                         PATCH(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/patch.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/patch.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/patch.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

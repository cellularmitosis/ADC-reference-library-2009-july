<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Quartz 2D Programming Guide: Data Management</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Data Management"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001066-CH216" title="Data Management"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../Quartz-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000559" target="_top">Quartz</a> &gt; <a href="../dq_intro/dq_intro.html#//apple_ref/doc/uid/TP30001066-CH201-TPXREF101">Quartz 2D Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../dq_trans_layers/dq_trans_layers.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../dq_images/dq_images.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001066-CH216-TPXREF101" title="Data Management"></a><h1>Data Management</h1><p>Managing data is a task every graphics application needs to perform. For Quartz, data management refers to supplying data to or receiving data from Quartz 2D routines. Some Quartz 2D routines move blocks of data into Quartz, such as those that get image or PDF data from a file or another part of your application. Other routines accept blocks of Quartz data, such as those that write image or PDF data to a file or provide the data to another part of your application. </p><p>Quartz provides a variety of functions for managing data. By reading this chapter, you should be able to determine which functions are best for your application. As you’ll see, some routines are available only in Mac OS X v10.4 and later while others have been with Quartz since its beginning.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001066-CH216-DontLinkElementID_54" title="Note"></a><p><strong>Note:</strong>&nbsp;The preferred way to read and write image data in Mac OS X v10.4 and later is to use the Image I/O framework. See <em><a href="../../ImageIOGuide/index.html#//apple_ref/doc/uid/TP40005462" target="_top">Image I/O Programming Guide</a></em>. This guide describes how to use the <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/tdef/CGImageSourceRef" target="_top">CGImageSourceRef</a></code> and <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/tdef/CGImageDestinationRef" target="_top">CGImageDestinationRef</a></code> opaque data types.</p></div><p>Quartz recognizes three broad categories of data sources and destinations:</p><ul class="ul"><li class="li"><p>URL. Data whose location can be specified as a URL can act as a supplier or receiver of data. You pass a URL to a Quartz function using the Core Foundation data type <code><a href="../../../../CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/tdef/CFURLRef" target="_top">CFURLRef</a></code>. </p></li><li class="li"><p>CFData. The Core Foundation data types <code><a href="../../../../CoreFoundation/Reference/CFDataRef/Reference/reference.html#//apple_ref/c/tdef/CFDataRef" target="_top">CFDataRef</a></code> and <code><a href="../../../../CoreFoundation/Reference/CFMutableDataRef/Reference/reference.html#//apple_ref/c/tdef/CFMutableDataRef" target="_top">CFMutableDataRef</a></code>  are data objects that let simple allocated buffers take on the behavior of Core Foundation objects. CFData is “toll-free bridged” with its Cocoa Foundation counterpart, the <code>NSData</code> class. This means that if you are using Quartz 2D with the Cocoa framework, you can pass an <code>NSData</code> object to any Quartz function that takes a CFData object.</p></li><li class="li"><p>Raw data. You can provide a pointer to data of any type along with a set of callbacks that take care of basic memory management for the data.</p></li></ul><p>The data itself, whether represented by a URL, a CFData object, or a data buffer, can be image data or PDF data. Image data can use any type of file format. Quartz understands most of the common image file formats. Some of the Quartz data management functions work specifically with image data, a few work only with PDF data, while others are more generic and can be used either for PDF or image data.</p><p>URL, CFData, and raw data sources and destinations refer to data outside the realm of Mac OS X graphics technologies, as shown in <span class="content_text">Figure 10-1</span>. Your application can also move data between Quartz 2D and Core Image, which is another Mac OS X graphics technology. Although this is a fairly trivial operation, it’s an important one to keep in mind because Core Image can add impressive capabilities to your graphics application.</p><br/><div><a name="//apple_ref/doc/uid/TP30001066-CH216-BAJJFJGA" title="Figure 10-1Moving data to and from Quartz 2D"></a><p><strong>Figure 10-1&nbsp;&nbsp;</strong>Moving data to and from Quartz 2D</p><img src = "../Art/movingdata.gif" alt = "Moving data to and from Quartz 2D" width="270" height="191"></div><br/><p>These sections provide detailed information on data management in Quartz 2D:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="dq_data_mgr.html#//apple_ref/doc/uid/TP30001066-CH216-BAJEDJJE">“Moving Data Into Quartz 2D”</a></span></p></li><li class="li"><p><span class="content_text"><a href="dq_data_mgr.html#//apple_ref/doc/uid/TP30001066-CH216-BAJGAIEE">“Moving Data Out Of Quartz 2D”</a></span></p></li><li class="li"><p><span class="content_text"><a href="dq_data_mgr.html#//apple_ref/doc/uid/TP30001066-CH216-BAJHEBHE">“Moving Data Between Quartz 2D and Core Image”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP30001066-CH216-BAJEDJJE" title="Moving Data Into Quartz 2D"></a><h2>Moving Data Into Quartz 2D</h2><p>The functions for getting data from a data source are listed in <span class="content_text">Table 10-1</span>. All these functions, except for <code><a href="../../../Reference/CGPDFDocument/Reference/reference.html#//apple_ref/c/func/CGPDFDocumentCreateWithURL" target="_top">CGPDFDocumentCreateWithURL</a></code>, either return an image source (<code>CGImageSourceRef</code>) or a data provider (<code>CGDataProviderRef</code>). Image sources and data providers abstract the data-access task and eliminate the need for applications to manage data through a raw memory buffer. Image sources are used exclusively for obtaining image data, but are available only in Mac OS X v10.4 or later. An image source represents a wide variety of image data. An image source can contain more than one image, thumbnail images, and properties for each image and the image file.</p><p>Data providers can be used to obtain image or PDF data, and all, except for <code><a href="../../../Reference/CGDataProvider/Reference/reference.html#//apple_ref/c/func/CGDataProviderCreateWithCFData" target="_top">CGDataProviderCreateWithCFData</a></code>, are available in Mac OS Xv10.0 or later. The function <code><a href="../../../Reference/CGPDFDocument/Reference/reference.html#//apple_ref/c/func/CGPDFDocumentCreateWithURL" target="_top">CGPDFDocumentCreateWithURL</a></code> is a convenience function that creates a PDF document from the file located at the specified URL.</p><p>You can supply a data provider to:</p><ul class="ul"><li class="li"><p>An image creation function, such as <code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreate" target="_top">CGImageCreate</a></code>, <code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreateWithPNGDataProvider" target="_top">CGImageCreateWithPNGDataProvider</a></code>, or <code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreateWithJPEGDataProvider" target="_top">CGImageCreateWithJPEGDataProvider</a></code>.</p></li><li class="li"><p>The PDF document creation function <code><a href="../../../Reference/CGPDFDocument/Reference/reference.html#//apple_ref/c/func/CGPDFDocumentCreateWithProvider" target="_top">CGPDFDocumentCreateWithProvider</a></code>.</p></li><li class="li"><p>The function <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceUpdateDataProvider" target="_top">CGImageSourceUpdateDataProvider</a></code> to update an existing image source with new data.</p></li></ul><p>When you are working with image data and your application runs in Mac OS X v10.4 or later, image sources are the preferred way to move image data into Quartz. After you have a <code>CGImageSourceRef</code>, you can accomplish these tasks:</p><ul class="ul"><li class="li"><p>Create images (<code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code>) using the functions <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCreateImageAtIndex" target="_top">CGImageSourceCreateImageAtIndex</a></code>, <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCreateThumbnailAtIndex" target="_top">CGImageSourceCreateThumbnailAtIndex</a></code>, or <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCreateIncremental" target="_top">CGImageSourceCreateIncremental</a></code>. A <code>CGImageRef</code> data type represents a single Quartz image. </p></li><li class="li"><p>Add content to an image source using the functions <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceUpdateData" target="_top">CGImageSourceUpdateData</a></code> or <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceUpdateDataProvider" target="_top">CGImageSourceUpdateDataProvider</a></code>.</p></li><li class="li"><p>Obtain information from an image source using the functions <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceGetCount" target="_top">CGImageSourceGetCount</a></code> , <code><!--a target="_top" -->CGImageSourceGetProperties<!--/a--></code>, and <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCopyTypeIdentifiers" target="_top">CGImageSourceCopyTypeIdentifiers</a></code>.</p></li></ul><p>For more information on images, see <span class="content_text"><a href="../dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-TPXREF101">“Bitmap Images and Image Masks.”</a></span></p><a name="//apple_ref/doc/uid/TP30001066-CH216-BAJICJJA" title="Table 10-1Functions that move data into Quartz 2D"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 10-1&nbsp;&nbsp;</strong>Functions that move data into Quartz 2D</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Function</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Use this function</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Availability</p></th></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataProvider/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/CGDataProviderCreate" target="_top">CGDataProviderCreate</a></code></p></td><td ><p>To read image or PDF data in a stream. You supply callbacks to handle the data.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataProvider/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/CGDataProviderCreateDirectAccess" target="_top">CGDataProviderCreateDirectAccess</a></code></p></td><td ><p>To read image or PDF data in a block. You supply callbacks to handle the data.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataProvider/Reference/reference.html#//apple_ref/c/func/CGDataProviderCreateWithData" target="_top">CGDataProviderCreateWithData</a></code></p></td><td ><p>To read a buffer of image or PDF data supplied by your application. You provide a callback to release the memory you allocated for the data.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataProvider/Reference/reference.html#//apple_ref/c/func/CGDataProviderCreateWithURL" target="_top">CGDataProviderCreateWithURL</a></code></p></td><td ><p>Whenever you can supply a URL that specifies the target for data access to image or PDF data.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGPDFDocument/Reference/reference.html#//apple_ref/c/func/CGPDFDocumentCreateWithURL" target="_top">CGPDFDocumentCreateWithURL</a></code></p></td><td ><p>To create a PDF document from data that resides at the specified URL.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataProvider/Reference/reference.html#//apple_ref/c/func/CGDataProviderCreateWithCFData" target="_top">CGDataProviderCreateWithCFData</a></code></p></td><td ><p>To read image or PDF data from a CFData object.</p></td><td ><p>10.4</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCreateWithDataProvider" target="_top">CGImageSourceCreateWithDataProvider</a></code></p></td><td ><p>To create an image source from a data provider.</p></td><td ><p>10.4</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCreateWithData" target="_top">CGImageSourceCreateWithData</a></code></p></td><td ><p>To create an image source from a CFData object.</p></td><td ><p>10.4</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/func/CGImageSourceCreateWithURL" target="_top">CGImageSourceCreateWithURL</a></code></p></td><td ><p>To create an image source from a URL that specifies the location of image data.</p></td><td ><p>10.4</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP30001066-CH216-BAJGAIEE" title="Moving Data Out Of Quartz 2D"></a><h2>Moving Data Out Of Quartz 2D</h2><p>The functions listed in <span class="content_text">Table 10-2</span> move data out of Quartz 2D. All these functions, except for <code><a href="../../../Reference/CGPDFContext/Reference/reference.html#//apple_ref/c/func/CGPDFContextCreateWithURL" target="_top">CGPDFContextCreateWithURL</a></code>, either return an image destination (<code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/tdef/CGImageDestinationRef" target="_top">CGImageDestinationRef</a></code>) or a data consumer (<code><a href="../../../Reference/CGDataConsumer/Reference/reference.html#//apple_ref/c/tdef/CGDataConsumerRef" target="_top">CGDataConsumerRef</a></code>). Image destination and data consumers abstract the data-writing task, letting Quartz take care of the details for you. Image destinations are used exclusively for writing image data, but are available only in Mac OS X v10.4 or later. Similar to image sources, an image destination can represent a variety of image data, from a single image to a destination that contains multiple images, thumbnail images, and properties for each image or for the image file.</p><p>Data consumers can be used to write image or PDF data, and all, except for <code><a href="../../../Reference/CGDataConsumer/Reference/reference.html#//apple_ref/c/func/CGDataConsumerCreateWithCFData" target="_top">CGDataConsumerCreateWithCFData</a></code>, are available in Mac OS X v10.0 or later. The function <code><a href="../../../Reference/CGPDFContext/Reference/reference.html#//apple_ref/c/func/CGPDFContextCreateWithURL" target="_top">CGPDFContextCreateWithURL</a></code> is a convenience function that writes PDF data to the location specified by a URL.</p><p>You can supply a data consumer to:</p><ul class="ul"><li class="li"><p>The PDF context creation function <code><a href="../../../Reference/CGPDFContext/Reference/reference.html#//apple_ref/c/func/CGPDFContextCreate" target="_top">CGPDFContextCreate</a></code>. This function returns a graphics context that records your drawing as a sequence of PDF drawing commands that are passed to the data consumer object.</p></li><li class="li"><p>The function <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCreateWithDataConsumer" target="_top">CGImageDestinationCreateWithDataConsumer</a></code> to create an image destination from a data consumer.</p></li></ul><p>When you are working with image data and your application runs in Mac OS X v10.4 or later, an image destination is the preferred way to move image data out of Quartz. After you have a <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/tdef/CGImageDestinationRef" target="_top">CGImageDestinationRef</a></code>, you can accomplish these tasks:</p><ul class="ul"><li class="li"><p>Add images (<code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code>) to a destination using the functions <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationAddImage" target="_top">CGImageDestinationAddImage</a></code> or <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationAddImageFromSource" target="_top">CGImageDestinationAddImageFromSource</a></code>. A <code>CGImageRef</code> data type represents a single Quartz image. </p></li><li class="li"><p>Set properties using the function <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationSetProperties" target="_top">CGImageDestinationSetProperties</a></code>.</p></li><li class="li"><p>Obtain information from an image destination using the functions <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCopyTypeIdentifiers" target="_top">CGImageDestinationCopyTypeIdentifiers</a></code> or <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationGetTypeID" target="_top">CGImageDestinationGetTypeID</a></code>.</p></li></ul><p>For more information on images, see <span class="content_text"><a href="../dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-TPXREF101">“Bitmap Images and Image Masks.”</a></span></p><a name="//apple_ref/doc/uid/TP30001066-CH216-BAJGFIHF" title="Table 10-2Functions that move data out of Quartz 2D"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 10-2&nbsp;&nbsp;</strong>Functions that move data out of Quartz 2D</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Function</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>When to use this function</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Availability</p></th></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataConsumer/Reference/reference.html#//apple_ref/c/func/CGDataConsumerCreateWithURL" target="_top">CGDataConsumerCreateWithURL</a></code></p></td><td ><p>Whenever you can supply a URL that specifies where to write the image or PDF data.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataConsumer/Reference/reference.html#//apple_ref/c/func/CGDataConsumerCreate" target="_top">CGDataConsumerCreate</a></code></p></td><td ><p>To write image or PDF data using callbacks you supply. </p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGPDFContext/Reference/reference.html#//apple_ref/c/func/CGPDFContextCreateWithURL" target="_top">CGPDFContextCreateWithURL</a></code></p></td><td ><p>Whenever you can supply a URL that specifies where to write PDF data.</p></td><td ><p>10.0</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGDataConsumer/Reference/reference.html#//apple_ref/c/func/CGDataConsumerCreateWithCFData" target="_top">CGDataConsumerCreateWithCFData</a></code></p></td><td ><p>To write image or PDF data to a CFData object.</p></td><td ><p>10.4</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCreateWithDataConsumer" target="_top">CGImageDestinationCreateWithDataConsumer</a></code></p></td><td ><p>To write image data to a data consumer.</p></td><td ><p>10.4</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCreateWithData" target="_top">CGImageDestinationCreateWithData</a></code></p></td><td ><p>To write image data to a CFData object.</p></td><td ><p>10.4</p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCreateWithURL" target="_top">CGImageDestinationCreateWithURL</a></code></p></td><td ><p>Whenever you can supply a URL that specifies where to write the image data.</p></td><td ><p>10.4</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP30001066-CH216-BAJHEBHE" title="Moving Data Between Quartz 2D and Core Image"></a><h2>Moving Data Between Quartz 2D and Core Image</h2><p>The Core Image framework is an Objective-C API that supports image processing. Core Image lets you access built-in image filters for both video and still images and provides support for custom filters and near real-time processing. You can apply Core Image filters to Quartz 2D images. For example, you can use Core Image to correct color, distort the geometry of images, blur or sharpen images, and create a transition between images. Core Image also allows you to apply an iterative process to an image—one that feeds back the output of a filter operation to the input. To understand the capabilities of Core Image more fully, see <em><a href="../../CoreImaging/index.html#//apple_ref/doc/uid/TP30001185" target="_top">Core Image Programming Guide</a></em>.</p><p>Core Image methods operate on images that are packaged as Core Image images, or CIImage objects. Although “CIImage” looks similar to the “CGImage” on the printed page (or display screen), Core Image does not operate directly on Quartz images (<code>CGImageRef</code> data types). Quartz images must be converted to Core Image images before you apply a Core Image filter to the image.</p><p>The Quartz 2D API does not provide any functions that package Quartz images as Core Image images. But Core Image does. The following Core Image methods create a Core Image image from either a Quartz image or a Quartz layer (<code>CGLayerRef</code>). You can use them to move Quartz 2D data to Core Image.</p><ul class="ul"><li class="li"><p><code><a href="../../../Reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/CIImage/imageWithCGImage:" target="_top">imageWithCGImage:</a></code></p></li><li class="li"><p><code><a href="../../../Reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/CIImage/imageWithCGImage:options:" target="_top">imageWithCGImage:options:</a></code></p></li><li class="li"><p><code><a href="../../../Reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/CIImage/imageWithCGLayer:" target="_top">imageWithCGLayer:</a></code></p></li><li class="li"><p><code><a href="../../../Reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/CIImage/imageWithCGLayer:options:" target="_top">imageWithCGLayer:options:</a></code></p></li></ul><p>The following Core Image methods return a Quartz image from a Core Image image. You can use them to move a processed image back into Quartz 2D:</p><ul class="ul"><li class="li"><p><code><a href="../../../Reference/QuartzCoreFramework/Classes/CIContext_Class/Reference/Reference.html#//apple_ref/occ/instm/CIContext/createCGImage:fromRect:" target="_top">createCGImage:fromRect:</a></code></p></li><li class="li"><p><code><a href="../../../Reference/QuartzCoreFramework/Classes/CIContext_Class/Reference/Reference.html#//apple_ref/occ/instm/CIContext/createCGLayerWithSize:info:" target="_top">createCGLayerWithSize:info:</a></code></p></li></ul><p>For a complete description of Core Image methods, see <em><a href="../../../Reference/CoreImagingRef/index.html#//apple_ref/doc/uid/TP40001171" target="_top">Core Image Reference Collection</a></em>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../dq_trans_layers/dq_trans_layers.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../dq_images/dq_images.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-12-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_data_mgr/dq_data_mgr.html%3Fid%3DTP30001066-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_data_mgr/dq_data_mgr.html%3Fid%3DTP30001066-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_data_mgr/dq_data_mgr.html%3Fid%3DTP30001066-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>IOPacketQueue</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/class/IOPacketQueue" title="IOPacketQueue"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOPacketQueue">IOPacketQueue</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../../../OSObject_h/Classes/OSObject/index.html#//apple_ref/cpp/cl/OSObject" target="_top">OSObject</a>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOPacketQueue.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>Implements a bounded FIFO queue of mbuf packets. 
<!-- end abstract --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Packets are
removed from the head of the queue (dequeue), and new packets are added
to the tail of the queue (enqueue). A spinlock is used to synchronize
access to the queue between methods that have a "lock" prefix. 
<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/dequeue/mbuf_t/()" target="_top">dequeue</a></tt></dt>
<dd><p>Removes a single packet from the head of the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/dequeueAll/mbuf_t/()" target="_top">dequeueAll</a></tt></dt>
<dd><p>Removes all packets from the queue and returns the head of the
packet chain.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/enqueue/bool/(IOPacketQueue*)" target="_top">enqueue(IOPacketQueue *)</a></tt></dt>
<dd><p>Removes all packets from the specified queue, and adds them
to the tail of this queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/enqueue/bool/(mbuf_t)" target="_top">enqueue(mbuf_t)</a></tt></dt>
<dd><p>Adds a chain of packets to the tail of the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/enqueueWithDrop/UInt32/(mbuf_t)" target="_top">enqueueWithDrop</a></tt></dt>
<dd><p>Adds a chain of packets to the tail of the queue. 
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/flush/UInt32/()" target="_top">flush</a></tt></dt>
<dd><p>Frees all packets currently held in the queue and releases them
back to the free mbuf pool.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/free/void/()" target="_top">free</a></tt></dt>
<dd><p>Frees the IOPacketQueue object.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/getCapacity/UInt32/()" target="_top">getCapacity</a></tt></dt>
<dd><p>Gets the current capacity of the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/getSize/UInt32/()" target="_top">getSize</a></tt></dt>
<dd><p>Gets the size of the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/initWithCapacity/bool/(UInt32)" target="_top">initWithCapacity</a></tt></dt>
<dd><p>Initializes an IOPacketQueue object.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/lockDequeue/mbuf_t/()" target="_top">lockDequeue</a></tt></dt>
<dd><p>Removes a single packet from the head of a synchronized queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/lockDequeueAll/mbuf_t/()" target="_top">lockDequeueAll</a></tt></dt>
<dd><p>Removes all packets from a synchronized queue and returns the
head of the packet chain.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/lockEnqueue/bool/(mbuf_t)" target="_top">lockEnqueue</a></tt></dt>
<dd><p>Adds a chain of packets to the tail of a synchronized queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/lockEnqueueWithDrop/UInt32/(mbuf_t)" target="_top">lockEnqueueWithDrop</a></tt></dt>
<dd><p>Adds a chain of packets to the tail of a synchronized queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/lockFlush/UInt32/()" target="_top">lockFlush</a></tt></dt>
<dd><p>Frees all packets currently held in a synchronized queue and
releases them back to the free mbuf pool.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/lockPrepend/void/(mbuf_t)" target="_top">lockPrepend</a></tt></dt>
<dd><p>Adds a chain of packets to the head of a synchronized queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/peek/constmbuf_t/()" target="_top">peek</a></tt></dt>
<dd><p>Examines the packet at the head of the queue without
removing it from the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/prepend/void/(IOPacketQueue*)" target="_top">prepend(IOPacketQueue *)</a></tt></dt>
<dd><p>Removes all packets from the specified queue, and adds them
to the head of this queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/prepend/void/(mbuf_t)" target="_top">prepend(mbuf_t)</a></tt></dt>
<dd><p>Adds a chain of packets to the head of the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOPacketQueue/setCapacity/bool/(UInt32)" target="_top">setCapacity</a></tt></dt>
<dd><p>Changes the capacity of the queue.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOPacketQueue/withCapacity/IOPacketQueue*/(UInt32)" target="_top">withCapacity</a></tt></dt>
<dd><p>Factory method that constructs and initializes an
IOPacketQueue object.
</p></dd>
</dl>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/dequeue/mbuf_t/();  indexgroup=Network ;   name=IOPacketQueue::dequeue --><a name="//apple_ref/cpp/instm/IOPacketQueue/dequeue/mbuf_t/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="dequeue">dequeue</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes a single packet from the head of the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">mbuf_t</span><!-- /a --> <!-- a --><span class="function">dequeue</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a packet removed from the head of the queue, or NULL if the
queue was empty. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/dequeueAll/mbuf_t/();  indexgroup=Network ;   name=IOPacketQueue::dequeueAll --><a name="//apple_ref/cpp/instm/IOPacketQueue/dequeueAll/mbuf_t/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="dequeueAll">dequeueAll</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes all packets from the queue and returns the head of the
packet chain.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">mbuf_t</span><!-- /a --> <!-- a --><span class="function">dequeueAll</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the head of a packet chain linking all packets that were held
in the queue, or NULL if the queue was empty. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The size of the queue is cleared to zero.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/enqueue/bool/(IOPacketQueue*);  indexgroup=Network ;   name=IOPacketQueue::enqueue --><a name="//apple_ref/cpp/instm/IOPacketQueue/enqueue/bool/(IOPacketQueue*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="enqueue(IOPacketQueue*)">enqueue(IOPacketQueue *)</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes all packets from the specified queue, and adds them
to the tail of this queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">enqueue</span><!-- /a -->(
    <a href="index.html#//apple_ref/cpp/cl/IOPacketQueue" target="_top" class="type"><span class="type">IOPacketQueue</span></a> <span class="type">*</span><span class="param">queue</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>queue</code></dt>
<dd><p>The source IOPacketQueue object containing the packets to
be transferred.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Always returns true. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/enqueue/bool/(mbuf_t);  indexgroup=Network ;   name=IOPacketQueue::enqueue --><a name="//apple_ref/cpp/instm/IOPacketQueue/enqueue/bool/(mbuf_t)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="enqueue(mbuf_t)">enqueue(mbuf_t)</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a chain of packets to the tail of the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">enqueue</span><!-- /a -->(
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="param">m</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>m</code></dt>
<dd><p>A chain of packets to add to the tail of the queue.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true on success, or false to indicate over-capacity and refusal
to accept the packet chain provided. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Packets are not added if the size of the queue has reached
its capacity.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/enqueueWithDrop/UInt32/(mbuf_t);  indexgroup=Network ;   name=IOPacketQueue::enqueueWithDrop --><a name="//apple_ref/cpp/instm/IOPacketQueue/enqueueWithDrop/UInt32/(mbuf_t)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="enqueueWithDrop">enqueueWithDrop</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a chain of packets to the tail of the queue. 
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="function">enqueueWithDrop</span><!-- /a -->(
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="param">m</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>m</code></dt>
<dd><p>A chain of packets to add to the tail of the queue.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the number of packets dropped and freed by the queue. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Packets are
dropped if the size of the queue has reached its capacity.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/flush/UInt32/();  indexgroup=Network ;   name=IOPacketQueue::flush --><a name="//apple_ref/cpp/instm/IOPacketQueue/flush/UInt32/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="flush">flush</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Frees all packets currently held in the queue and releases them
back to the free mbuf pool.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="function">flush</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the number of packets freed. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The size of the queue is cleared to zero.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/free/void/();  indexgroup=Network ;   name=IOPacketQueue::free --><a name="//apple_ref/cpp/instm/IOPacketQueue/free/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="free">free</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Frees the IOPacketQueue object.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">free</span><!-- /a -->(); </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>All packets held by the queue are released back to the free
pool, resource are deallocated, then super::free() is called. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/getCapacity/UInt32/();  indexgroup=Network ;   name=IOPacketQueue::getCapacity --><a name="//apple_ref/cpp/instm/IOPacketQueue/getCapacity/UInt32/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getCapacity">getCapacity</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Gets the current capacity of the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="function">getCapacity</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the current queue capacity. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/getSize/UInt32/();  indexgroup=Network ;   name=IOPacketQueue::getSize --><a name="//apple_ref/cpp/instm/IOPacketQueue/getSize/UInt32/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getSize">getSize</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Gets the size of the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="function">getSize</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the number of packets currently held by the queue. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/initWithCapacity/bool/(UInt32);  indexgroup=Network ;   name=IOPacketQueue::initWithCapacity --><a name="//apple_ref/cpp/instm/IOPacketQueue/initWithCapacity/bool/(UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="initWithCapacity">initWithCapacity</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Initializes an IOPacketQueue object.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">initWithCapacity</span><!-- /a -->(
    <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="type">capacity</span><!-- /a --> = <span class="param">IOPacketQueueDefaultCapacity</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>capacity</code></dt>
<dd><p>The initial capacity of the queue. Can be later changed
by calling the setCapacity() method.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if initialized successfully, false otherwise. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method initializes an IOPacketQueue object with the given capacity.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/lockDequeue/mbuf_t/();  indexgroup=Network ;   name=IOPacketQueue::lockDequeue --><a name="//apple_ref/cpp/instm/IOPacketQueue/lockDequeue/mbuf_t/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lockDequeue">lockDequeue</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes a single packet from the head of a synchronized queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">mbuf_t</span><!-- /a --> <!-- a --><span class="function">lockDequeue</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a packet removed from the head of the queue, or NULL if the
queue was empty. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>A spinlock is used to synchronize access to the queue.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/lockDequeueAll/mbuf_t/();  indexgroup=Network ;   name=IOPacketQueue::lockDequeueAll --><a name="//apple_ref/cpp/instm/IOPacketQueue/lockDequeueAll/mbuf_t/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lockDequeueAll">lockDequeueAll</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes all packets from a synchronized queue and returns the
head of the packet chain.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">mbuf_t</span><!-- /a --> <!-- a --><span class="function">lockDequeueAll</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the head of a packet chain linking all packets that were held
in the queue, or NULL if the queue was empty. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The size of the queue is cleared to zero. A spinlock is used
to synchronize access to the queue.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/lockEnqueue/bool/(mbuf_t);  indexgroup=Network ;   name=IOPacketQueue::lockEnqueue --><a name="//apple_ref/cpp/instm/IOPacketQueue/lockEnqueue/bool/(mbuf_t)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lockEnqueue">lockEnqueue</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a chain of packets to the tail of a synchronized queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">lockEnqueue</span><!-- /a -->(
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="param">m</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>m</code></dt>
<dd><p>A chain of packets to add to the tail of the queue.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true on success, or false to indicate over-capacity and refusal
to accept the packet chain provided.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Packets are not added if the size of the queue has reached
its capacity. A spinlock is used to synchronize access to the queue.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/lockEnqueueWithDrop/UInt32/(mbuf_t);  indexgroup=Network ;   name=IOPacketQueue::lockEnqueueWithDrop --><a name="//apple_ref/cpp/instm/IOPacketQueue/lockEnqueueWithDrop/UInt32/(mbuf_t)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lockEnqueueWithDrop">lockEnqueueWithDrop</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a chain of packets to the tail of a synchronized queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="function">lockEnqueueWithDrop</span><!-- /a -->(
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="param">m</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>m</code></dt>
<dd><p>A chain of packets to add to the tail of the queue.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the number of packets dropped and freed by the queue. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Packets are dropped if the size of the queue has reached its capacity.  A spinlock is used to synchronize access to the queue.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/lockFlush/UInt32/();  indexgroup=Network ;   name=IOPacketQueue::lockFlush --><a name="//apple_ref/cpp/instm/IOPacketQueue/lockFlush/UInt32/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lockFlush">lockFlush</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Frees all packets currently held in a synchronized queue and
releases them back to the free mbuf pool.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="function">lockFlush</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the number of packets freed. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The size of the queue is cleared to zero. A spinlock is used
to synchronize access to the queue.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/lockPrepend/void/(mbuf_t);  indexgroup=Network ;   name=IOPacketQueue::lockPrepend --><a name="//apple_ref/cpp/instm/IOPacketQueue/lockPrepend/void/(mbuf_t)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lockPrepend">lockPrepend</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a chain of packets to the head of a synchronized queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">lockPrepend</span><!-- /a -->(
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="param">m</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>m</code></dt>
<dd><p>A chain of packets to add to the head of the queue.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Always returns true. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>A spinlock is used to synchronize access to the queue.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/peek/constmbuf_t/();  indexgroup=Network ;   name=IOPacketQueue::peek --><a name="//apple_ref/cpp/instm/IOPacketQueue/peek/constmbuf_t/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="peek">peek</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Examines the packet at the head of the queue without
removing it from the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <span class="keyword">const</span> <!-- a --><span class="var">mbuf_t</span><!-- /a --> <!-- a --><span class="var">peek</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the packet at the head of the queue. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>A following call to peek() or dequeue() will return
the same packet. The caller must never modify the mbuf packet returned.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/prepend/void/(IOPacketQueue*);  indexgroup=Network ;   name=IOPacketQueue::prepend --><a name="//apple_ref/cpp/instm/IOPacketQueue/prepend/void/(IOPacketQueue*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="prepend(IOPacketQueue*)">prepend(IOPacketQueue *)</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes all packets from the specified queue, and adds them
to the head of this queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">prepend</span><!-- /a -->(
    <a href="index.html#//apple_ref/cpp/cl/IOPacketQueue" target="_top" class="type"><span class="type">IOPacketQueue</span></a> <span class="type">*</span><span class="param">queue</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>queue</code></dt>
<dd><p>The source IOPacketQueue object containing the packets to
be transferred.</p></dd>
</dl>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/prepend/void/(mbuf_t);  indexgroup=Network ;   name=IOPacketQueue::prepend --><a name="//apple_ref/cpp/instm/IOPacketQueue/prepend/void/(mbuf_t)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="prepend(mbuf_t)">prepend(mbuf_t)</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a chain of packets to the head of the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">prepend</span><!-- /a -->(
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="param">m</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>m</code></dt>
<dd><p>A chain of packets to add to the head of the queue.</p></dd>
</dl>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOPacketQueue/setCapacity/bool/(UInt32);  indexgroup=Network ;   name=IOPacketQueue::setCapacity --><a name="//apple_ref/cpp/instm/IOPacketQueue/setCapacity/bool/(UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setCapacity">setCapacity</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Changes the capacity of the queue.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">setCapacity</span><!-- /a -->(
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">capacity</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>capacity</code></dt>
<dd><p>The new capacity.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if the new capacity was accepted, false otherwise. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOPacketQueue/withCapacity/IOPacketQueue*/(UInt32);  indexgroup=Network ;   name=IOPacketQueue::withCapacity --><a name="//apple_ref/cpp/clm/IOPacketQueue/withCapacity/IOPacketQueue*/(UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="withCapacity">withCapacity</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Factory method that constructs and initializes an
IOPacketQueue object.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="index.html#//apple_ref/cpp/cl/IOPacketQueue" target="_top" class="type"><span class="type">IOPacketQueue</span></a> <span class="type">*</span> <!-- a --><span class="function">withCapacity</span><!-- /a -->(
    <!-- a --><span class="type">UInt32</span><!-- /a --> <!-- a --><span class="type">capacity</span><!-- /a --> = <span class="param">IOPacketQueueDefaultCapacity</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>capacity</code></dt>
<dd><p>The initial capacity of the queue object. Can be
later changed by calling the setCapacity() method.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns an IOPacketQueue instance on success, or 0 otherwise. 

<!-- end return value --></p>
<p></p>
<h2>Member Data</h2>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOPacketQueue/_reserved;  indexgroup=Network ;   name=IOPacketQueue::_reserved --><a name="//apple_ref/cpp/data/IOPacketQueue/_reserved"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="_reserved">_reserved</a></h3>
</td></tr></table>
<hr>
<p></p>
<b>See Also:</b><blockquote><dl>
<dt>
<a href="index.html#//apple_ref/doc/title:data/IOPacketQueue/reserved" target="_top"><p>reserved</p></a>
</dt>
<dd></dd>
</dl></blockquote>
<pre><tt>protected</tt>
<br><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> <span class="type">*</span><a href="../../../IOHIDElement_h/index.html#//apple_ref/c/data/_reserved" target="_top" class="var"><span class="var">_reserved</span></a>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Reserved for future use.  (Internal use only)<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clconst;  uid=//apple_ref/cpp/clconst/IOPacketQueue/IOPacketQueueDefaultCapacity;  indexgroup=Network ;   name=IOPacketQueue::IOPacketQueueDefaultCapacity --><a name="//apple_ref/cpp/clconst/IOPacketQueue/IOPacketQueueDefaultCapacity"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="IOPacketQueueDefaultCapacity">IOPacketQueueDefaultCapacity</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Describes the default capacity of the 
queue object. 
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">static</span> <span class="keyword">const</span> <!-- a --><span class="var">UInt32</span><!-- /a --> <!-- a --><span class="var">IOPacketQueueDefaultCapacity</span><!-- /a --> = <span class="number">100</span>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The capacity is only observed by the enqueue() method.
Therefore, it is possible for the size of the queue to exceed its
capacity when other methods, such as prepend(), are used to add packets
to the queue. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=title:data;  uid=//apple_ref/doc/title:data/IOPacketQueue/reserved;  indexgroup=Network ;   name=IOPacketQueue::reserved --><a name="//apple_ref/doc/title:data/IOPacketQueue/reserved"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="reserved">reserved</a></h3>
</td></tr></table>
<hr>
<p></p>
<b>See Also:</b><blockquote><dl>
<dt>
<a href="index.html#//apple_ref/cpp/data/IOPacketQueue/_reserved" target="_top"><p>_reserved</p></a>
</dt>
<dd></dd>
</dl></blockquote>
<pre><tt>protected</tt>
<br><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> <span class="type">*</span><a href="../../../IOHIDElement_h/index.html#//apple_ref/c/data/_reserved" target="_top" class="var"><span class="var">_reserved</span></a>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Reserved for future use.  (Internal use only)<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOPacketQueue_h/Classes/IOPacketQueue/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOPacketQueue_h/Classes/IOPacketQueue/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOPacketQueue_h/Classes/IOPacketQueue/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=cl; uid=//apple_ref/cpp/cl/IOPacketQueue; indexgroup=Network ; name=IOPacketQueue--><a name="//apple_ref/cpp/cl/IOPacketQueue"></a>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<script language="JavaScript" src="frametest.js"></script>
<TITLE> ConvertFromUnicodeToPString</TITLE><LINK REL="stylesheet" TYPE="text/css" HREF="../../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../../Resources/JavaScript/page.js"></script>
</head>
<body bgcolor="#ffffff">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<DIV>
<a name="top"></a>
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --><A HREF="TEC.92.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.93.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.95.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A><br>
<font face="Geneva,Helvetica,Arial" size="1"><b><br>
		PATH<spacer type="horizontal" size="5">&nbsp;</b></font><a href="../../../mac8.html"><font face="Geneva,Helvetica,Arial" size="1">Mac OS 8 and 9 Developer Documentation</a>  <b>&gt;</b> Text Encoding Conversion Manager<br>
		<img src="images/im_smblue.gif" width="116" height="8"><img src="images/space.gif" width="6" height="11">Programming With the Text Encoding Conversion Manager</font><br>
		<br>
		<hr>

</DIV>
<H1>
<A NAME="pgfId=3905">
 </A>
<A NAME="12650">
 </A>
ConvertFromUnicodeToPString</H1>
<P>
<A NAME="pgfId=3906">
 </A>
Converts a Unicode string to Pascal in a Mac OS text encoding. </P>
<TT>
<A NAME="pgfId=27033">
 </A>
pascal OSStatus ConvertFromUnicodeToPString (<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UnicodeToTextInfo iUnicodeToTextInfo, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount iUnicodeLen, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstUniCharArrayPtr iUnicodeStr,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Str255 oPascalStr);</TT>
<DL COMPACT>
<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27037">
 </A>
<TT>iUnicodeToTextInfo</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3909">
 </A>
 A Unicode converter object. You use the <TT>CreateUnicodeToTextInfo</TT> or <TT>CreateUnicodeToTextInfoByEncoding</TT> function to obtain the Unicode converter object for the conversion.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27048">
 </A>
<TT>iUnicodeLen</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3913">
 </A>
The length in bytes of the Unicode string to be converted. This is the string your application provides in the <TT>iUnicodeStr</TT> parameter<TT>.</TT></DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27057">
 </A>
<TT>iUnicodeStr</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3917">
 </A>
A pointer to an array containing the Unicode string to be converted. For information on the Unicode character array, see <A HREF="TEC.18.html" CLASS="XRef">
Basic Text Types Reference</A>
</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27066">
 </A>
<TT>oPascalStr</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3918">
 </A>
A buffer. On output, the converted Pascal string returned by the function. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27075">
 </A>
<I CLASS="italics">
function result</I>
</DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=16438">
 </A>
A result code. See <A HREF="TEC.20.html" CLASS="XRef">
Text Encoding Conversion Manager Result Codes</A>
 in the chapter <A HREF="TEC.18.html" CLASS="XRef">
Basic Text Types Reference</A>
</DD><P>

</DL COMPACT>
<DIV>
<H5 CLASS="RSb.RoutineSbhd">
<A NAME="pgfId=16445">
 </A>
DISCUSSION</H5>
<P>
<A NAME="pgfId=3921">
 </A>
The <TT>ConvertFromUnicodeToPString</TT>	 function provides an easy and efficient way to convert a Unicode string to a Pascal string in a Mac OS text encoding without incurring the overhead associated with use of the function <A HREF="TEC.86.html" CLASS="XRef"><TT>ConvertFromUnicodeToText</TT></A> or <A HREF="TEC.8d.html" CLASS="XRef"><TT>ConvertFromUnicodeToScriptCodeRun</TT></A>. <P>


<A NAME="pgfId=14925">
 </A>
If necessary, this function uses the loose mapping and fallback characters to map the text elements of the string. For fallback mappings, it uses the handler associated with the Unicode converter object. <P>


<A NAME="pgfId=13042">
 </A>
The function returns a <TT>noErr</TT> result code if it has completely converted the Unicode string to the Pascal without using fallback characters. If the function returns the <TT>paramErr</TT> or <TT>kTECGlobalsUnavailableErr</TT> result codes, it did not convert the string.<P>


<A NAME="pgfId=13043">
 </A>
If the function returns <TT>kTECTableFormatErr</TT>, the code encountered a table in an unknown format. The function did not completely convert the input string (and may not have converted any of it).<P>


<A NAME="pgfId=13044">
 </A>
If the function returns <TT>kTECBufferBelowMinimumSizeErr</TT>, the output buffer was too small to allow conversion of any part of the input string. You need to increase the size of the output buffer and try again.<P>


<A NAME="pgfId=13045">
 </A>
If the function returns the <TT>kTECUsedFallbacksStatus</TT> result code, the function has completely converted the string using one or more fallback characters. <P>


<A NAME="pgfId=13046">
 </A>
If the function returns <TT>kTECOutputBufferFullErr</TT>, the output buffer was not big enough to completely convert the input. You can call the function again with another output buffer (or with the same output buffer, after copying its contents) to convert the remainder of the Unicode string.<P>


<A NAME="pgfId=13047">
 </A>
If the function returns <TT>kTECPartialCharErr</TT>, the Unicode input string ended with an incomplete UTF-8 character, which can only happen for UTF-8 input. If you have subsequent input text available, you can append the unconverted input from this call to the beginning of the subsequent input text and call the function again.<P>


<A NAME="pgfId=13049">
 </A>
If the function returns <TT>kTextUndefinedElementErr</TT>, the Unicode input string included a value that is undefined for the specified Unicode version. The function did not completely convert the input string, and fallback handling was not invoked. You can resume conversion from a point beyond the offending Unicode character, or take some other action.<P>


<A NAME="pgfId=14946">
 </A>
If the function returns <TT>kTextIncompleteElementErr</TT>, then either the input string included a text element that is too long for the internal buffers, or the input string ended with a text element that may be incomplete. The latter case can happen only if you set the <TT>kUnicodeStringUnterminatedMask</TT> control flag. The function did not completely convert the input string, and fallback handling was not invoked.</P>
</DIV>
<HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 13 Dec 99)<P><A HREF="TEC.92.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.93.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.95.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A>

<!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY>
</HTML>

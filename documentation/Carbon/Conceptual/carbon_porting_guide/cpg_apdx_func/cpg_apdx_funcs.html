<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Carbon Porting Guide (Legacy): New Carbon Functions</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="New Carbon Functions"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000991-CH206" title="New Carbon Functions"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Carbon-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000494" target="_top">Carbon</a> &gt; <a href="../cpg_intro_struct/cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF101">Carbon Porting Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../cpg_newtechstruct/cpg_newtech_struct.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../cpg_apdx_sampleapp/cpg_apdx_sample_app.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF101" title="New Carbon Functions"></a><h1>New Carbon Functions</h1><p>This section provides an overview of some of the new functions introduced in Carbon. Until complete documentation is available, you should refer to the header files and sample code included on the Mac OS X Developer Tools CD for additional information.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BABCFEGG">Custom Definition Procedures</a>
				
			<br/>
			
        
			
			
				<a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BAACHCEC">Functions for Accessing Opaque Data Structures</a>
				
			<br/>
			
        
			
			
				<a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BAABGAIG">Functions in CarbonAccessors.o</a>
				
			<br/>
			
        
			
			
				<a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BAABFEDG">Debugging Functions</a>
				
			<br/>
			
        
			
			
				<a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BAABEEHF">Resource Chain Manipulation Functions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000991-CH206-BABCFEGG" title="Custom Definition Procedures"></a><h2>Custom Definition Procedures</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_16"></a>Custom defprocs (that is, WDEFs, MDEFs, CDEFs, and LDEFs) must be compiled as PowerPC code and can no longer be stored in resources. Carbon introduces new variants of <code>CreateWindow</code> and similar functions (such as <code>NewControl</code> and <code>NewMenu</code>) that take a universal procedure pointer (UPP) to your custom defproc. Instead of creating a window definition as a WDEF resource, for example, you call the Carbon routine <code>CreateCustomWindow</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus CreateCustomWindow(const WindowDefSpec *def,<span></span></pre></td></tr><tr><td scope="row"><pre>        WindowClass windowClass, WindowAttributes attributes,<span></span></pre></td></tr><tr><td scope="row"><pre>        const Rect *bounds, WindowPtr *outWindow);<span></span></pre></td></tr></table></div><p>The <code>WindowDefSpec</code> parameter contains a UPP that points to your custom window definition procedure.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-BAADIDAH" title="Changes to WDEFs"></a><h3>Changes to WDEFs</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_17"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_18"></a>You need to be aware of the following changes for custom WDEFs:</p><ul class="spaceabove"><li class="li"><p>Window defprocs no longer receive the <code>wCalcRgns</code> message. Instead they receive the <code>kWindowMsgGetRegion</code> message twice, once for the structure region and once for the content region. The structure passed in the message parameter indicates the desired region in each case. Your defproc must handle these messages. </p></li><li class="li"><p>If you need to get the global bounds of a window’s <code>portRect</code> in order to determine the structure or content regions, you should call <code>GetWindowBounds</code> and pass the <code>kWindowGlobalPortRgn</code> constant. On return, the function will supply a pointer to a <code>Rect</code> indicating the bounds in global coordinates. The pixel map (<code>PixMap</code>) bounds on Mac OS X will always start at (0,0), so you will obtain incorrect results if you attempt to manually convert the port’s bounds from local to global coordinates by offsetting the bounds by the port’s pixel map’s bounds.</p></li></ul><a name="//apple_ref/doc/uid/TP30000991-CH206-BAABDJDG" title="Changes to MDEFs"></a><h3>Changes to MDEFs</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_19"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_20"></a>You need to be aware of the following changes to custom MDEFs:</p><ul class="spaceabove"><li class="li"><p>Menu defprocs no longer receive the <code>mChooseMsg</code> message. Instead they receive two new messages: <code>kMenuFindItemMsg</code> and <code>kMenuHiliteItemMsg</code> .</p></li><li class="li"><p>Code that sets or reads the low memory global variables <code>TopMenuItem</code>, <code>AtMenuBottom</code>, <code>MenuDisable</code>, and <code>MBSaveLoc</code> should use the new <code>MenuTrackingData</code> structure instead. You can obtain the contents of the structure at any time by calling the new function <code>GetMenuTrackingData</code>. </p></li><li class="li"><p>When a menu defproc receives a <code>mDrawMsg</code> message, it also receives a pointer to a <code>MenuTrackingData</code> structure in the <code>whichItem</code> parameter. Your defproc should read the structure to obtain the menu virtual top and bottom rather than using the low memory accessor functions <code>LMTopMenuItem</code> and <code>LMAtMenuBottom</code>. </p></li></ul><a name="//apple_ref/doc/uid/TP30000991-CH206-BAACHCEC" title="Functions for Accessing Opaque Data Structures"></a><h2>Functions for Accessing Opaque Data Structures</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_21"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_22"></a>A major change introduced in Carbon is that some commonly used data structures are now opaque—meaning their internal structure is hidden. Directly referencing fields within these structures is no longer allowed, and will cause a compiler error. QuickDraw global variables, graphics ports, regions, window and dialog records, controls, menus, and TSMTE dialogs are all opaque to Carbon applications. Anywhere you reference fields in these structures directly, you must use new casting and accessor functions described in the following sections.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-BAAEBEHJ" title="Casting Functions"></a><h3>Casting Functions</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_23"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_24"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_25"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_26"></a>Many applications assume that window pointer (<code>WindowPtr</code>) and dialog pointer (<code>DialogPtr</code>) types have a graphics port (<code>GrafPort</code>) embedded at the top of their structures. In fact, the standard Universal Interfaces defines dialog pointers and window pointers as graphics pointers so that you don’t have to cast them to a type <code>GrafPtr</code> before using them. For example:</p><div class="codesample"><table><tr><td scope="row"><pre>void DrawIntoWindow(WindowPtr window)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SetPort(window);<span></span></pre></td></tr><tr><td scope="row"><pre>    MoveTo(x, y);<span></span></pre></td></tr><tr><td scope="row"><pre>    LineTo(x + 50, y + 50);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>If you compile the above code using the Carbon interfaces, you’ll get a number of compilation errors due to the fact that window pointers are no longer defined as graphics pointers. But you can’t simply cast these variables to type <code>GrafPtr</code> because doing so will cause your application to crash under Mac OS X.</p><p>Instead, Carbon provides a set of casting functions that allow you to obtain a pointer to a window’s <code>GrafPort</code> structure or vice versa. Using these new functions, code like the previous example must be updated as follows to be Carbon-compliant and compile without errors:</p><div class="codesample"><table><tr><td scope="row"><pre>void DrawIntoWindow(WindowPtr window)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SetPort(GetWindowPort(window));<span></span></pre></td></tr><tr><td scope="row"><pre>    MoveTo(x, y);<span></span></pre></td></tr><tr><td scope="row"><pre>    LineTo(x + 50, y + 50);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Casting functions are provided for obtaining graphics ports from windows, windows from dialogs, and various other combinations. By convention, functions that cast up (that is, going from a lower-level data structure like a graphics port to a window or going from a window to a dialog pointer) are named <code>GetHigherLevelTypeFromLowerLevelType</code>. Functions that cast down are named <code>GetHigherLevelTypeLowerLevelType</code>. </p><p>Examples of functions that cast up include:</p><div class="codesample"><table><tr><td scope="row"><pre>pascal DialogPtr GetDialogFromWindow(WindowPtr window);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal WindowPtr GetWindowFromPort(CGrafPtr port);<span></span></pre></td></tr></table></div><p>Functions that cast down include: </p><div class="codesample"><table><tr><td scope="row"><pre>pascal WindowPtr GetDialogWindow(DialogPtr dialog);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal CGrafPtr GetWindowPort(WindowPtr window);<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF102" title="Accessor Functions"></a><h3>Accessor Functions</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_27"></a>Carbon includes a number of functions to allow applications to access fields within system data structures that are now opaque. <span class="content_text"><a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-TPXREF115">Listing A-1</a></span> shows an example of some typical coding practices that must be modified for Carbon.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF115" title="Listing A-1Example of unsupported data structure access"></a><p class="codesample"><strong>Listing A-1&nbsp;&nbsp;</strong>Example of unsupported data structure access</p><div class="codesample"><table><tr><td scope="row"><pre>void WalkWindowsAndDoSomething(WindowPtr firstWindow)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    WindowPtr currentWindow = firstWindow;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    while (currentWindow != NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        if ((WindowPeek) currentWindow->visible)<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;&amp; RectIsFourByFour(&amp;currentWindow->portRect))<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            DoSomethingSpecial(currentWindow);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        currentWindow = (WindowPtr) ((WindowPeek) currentWindow->nextWindow);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>There are four problems in <span class="content_text"><a href="cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-TPXREF115">Listing A-1</a></span> that will cause compiler errors when building a Carbon application. </p><ol class="ol"><li class="li"><p>Checking the <code>visible</code> field directly is not allowed because the <code>WindowPeek</code> type is no longer defined (it’s only useful when you can assume that type <code>WindowPtr</code> can be cast to a <code>WindowRecord</code> pointer, which is not the case in Carbon). </p></li><li class="li"><p>The <code>currentWindow</code> variable is treated as a graphics port. You need to use the casting functions discussed above to access a window’s <code>GrafPort</code> structure. </p></li><li class="li"><p>Graphics ports are now opaque data structures, so you must use an accessor to get the port’s bounding rectangle. </p></li><li class="li"><p>Accessing the <code>nextWindow</code> field directly from the <code>WindowRecord</code> structure is not allowed.</p></li></ol><p>To compile and run under Carbon, the code above would have to be changed as shown in Listing A-2.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF111" title="Listing A-2Example of using Carbon-compatible accessor functions"></a><p class="codesample"><strong>Listing A-2&nbsp;&nbsp;</strong>Example of using Carbon-compatible accessor functions</p><div class="codesample"><table><tr><td scope="row"><pre>void WalkWindowsAndDoSomething(WindowPtr firstWindow)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    WindowPtr currentWindow = firstWindow;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    while (currentWindow != NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        Rect windowBounds;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        if (IsWindowVisible(currentWindow) &amp;&amp;<span></span></pre></td></tr><tr><td scope="row"><pre>            RectIsFourByFour(GetPortBounds(GetWindowPort(currentWindow),<span></span></pre></td></tr><tr><td scope="row"><pre>                &amp;windowBounds))<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            DoSomethingSpecial(currentWindow);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        currentWindow = GetNextWindow(currentWindow);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>One thing to note is that the <code>GetPortBounds</code> function returns a pointer to the input rectangle as a syntactic convenience, to allow you to pass the result of <code>GetPortBounds</code> directly to another function. Many of the accessor functions return a pointer to the input in the same way, as a convenience to the caller.</p><p>With a few exceptions as noted below, all accessor functions return copies to data, not the data itself. You must make sure to allocate storage before you access non-scalar types such as regions and pixel patterns. For example, if you use code like this to test the visible region of a graphics port:</p><div class="codesample"><table><tr><td scope="row"><pre>if (EmptyRgn(somePort->visRgn))<span></span></pre></td></tr><tr><td scope="row"><pre>    DoSomething();<span></span></pre></td></tr></table></div><p>you’ll have to change it as shown below in order to allow the accessor to copy the port’s visible region into your reference:</p><div class="codesample"><table><tr><td scope="row"><pre>RgnHandle visibleRegion;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>visibleRegion = NewRgn();<span></span></pre></td></tr><tr><td scope="row"><pre>if (EmptyRgn(GetPortVisibleRegion(somePort, visibleRegion)))<span></span></pre></td></tr><tr><td scope="row"><pre>    DoSomething();<span></span></pre></td></tr><tr><td scope="row"><pre>DisposeRgn(visibleRegion);<span></span></pre></td></tr></table></div><p>A few accessor functions continue to return actual data rather than copied data. <code>GetPortPixMap</code>, for example, is provided specifically to allow calls to <code>CopyBits</code>, <code>CopyMask</code>, and similar functions, and should only be used for these calls. The interface for the <code>CopyBits</code>-type calls will be changing to work around this exception, but for now be aware that this exception exists. The QuickDraw bottleneck routines, which are stored in a <code>GrafProc</code> record, continue to operate just like their classic Mac OS equivalents. That is, the actual pointer to the structure is returned rather than creating a copy. Other instances where the actual handle is passed back include cases where user-specified data is carried in a data structure, such as the <code>UserHandle</code> field in <code>ListHandle</code> records.</p><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_28"></a>Table A-1 lists common accessor functions for Human Interface Toolbox structures. </p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF112" title="Table A-1Summary of Carbon Human Interface Toolbox accessors "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table A-1&nbsp;&nbsp;</strong>Summary of Carbon Human Interface Toolbox accessors </caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data structure</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Element</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Accessor</p></th></tr><tr><td  scope="row"><p>Controls</p></td><td ><p></p></td><td ><p></p></td></tr><tr><td  scope="row"><p><code>ControlRecord</code></p></td><td ><p><code>nextControl</code></p></td><td ><p>Use Control Manager embedding hierarchy functions. (See Mac OS 8 Control Manager Reference.)</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlOwner</code></p></td><td ><p><code>Get/SetControlOwner</code>. May be replaced in favor of <code>Embed/DetachControl</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlRect</code></p></td><td ><p><code>Get/SetControlBounds</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlVis</code></p></td><td ><p><code>IsControlVisible, SetControlVisibility</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlHilite</code></p></td><td ><p><code>GetControlHilite, HiliteControl</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlValue</code></p></td><td ><p><code>Get/SetControlValue, Get/SetControl32BitValue</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlMin</code></p></td><td ><p><code>Get/SetControlMinimum, Get/SetControl32BitMinimum</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlMax</code></p></td><td ><p><code>Get/SetControlMaximum, Get/SetControl32BitMaximum</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlDefProc</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlData</code></p></td><td ><p><code>Get/SetControlDataHandle</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlAction</code></p></td><td ><p><code>Get/SetControlAction</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlRfCon</code></p></td><td ><p><code>Get/SetControlReference</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contrlTitle</code></p></td><td ><p><code>Get/SetControlTitle</code></p></td></tr><tr><td  scope="row"><p><code>AuxCtlRec</code></p></td><td ><p><code>acNext</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>acOwner</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>acCTable</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>acFlags</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>acReserved</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>acRefCon</code></p></td><td ><p>Use <code>Get/SetControlProperty</code> if you need more <code>refCon</code>s.</p></td></tr><tr><td  scope="row"><p><code>PopupPrivateData</code></p></td><td ><p><code>mHandle</code></p></td><td ><p>Use <code>Get/SetControlData</code> with proper tags.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>mID</code></p></td><td ><p>Use <code>Get/SetControlData</code> with proper tags.</p></td></tr><tr><td  scope="row"><p>Dialog Boxes</p></td><td ><p></p></td><td ><p></p></td></tr><tr><td  scope="row"><p><code>DialogRecord</code></p></td><td ><p><code>window</code></p></td><td ><p>Use <code>GetDialogWindow</code> to obtain the value. There is no equivalent function for setting the value. </p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>items</code></p></td><td ><p><code>AppendDITL, ShortenDITL, AppendDialogItemList, InsertDialogItem, RemoveDialogItems</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>textH</code></p></td><td ><p><code>GetDialogTextEditHandle</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>editField</code></p></td><td ><p><code>GetDialogKeyboardFocusItem</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>editOpen</code></p></td><td ><p><code>Get/SetDialogCancelItem</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>aDefItem</code></p></td><td ><p><code>Get/SetDialogDefaultItem</code></p></td></tr><tr><td  scope="row"><p>Menus</p></td><td ><p></p></td><td ><p></p></td></tr><tr><td  scope="row"><p><code>MenuInfo</code></p></td><td ><p><code>menuID</code></p></td><td ><p><code>Get/SetMenuID</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>menuWidth</code></p></td><td ><p><code>Get/SetMenuWidth</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>menuHeight</code></p></td><td ><p><code>Get/SetMenuHeight</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>menuProc</code></p></td><td ><p><code>SetMenuDefinition</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>enableFlags</code></p></td><td ><p><code>Enable/DisableMenuItem, IsMenuItemEnabled</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>menuData</code></p></td><td ><p><code>Get/SetMenuTitle</code></p></td></tr><tr><td  scope="row"><p>Windows</p></td><td ><p></p></td><td ><p></p></td></tr><tr><td  scope="row"><p><code>WindowRecord CWindowRecord</code></p></td><td ><p><code>port</code></p></td><td ><p>Use <code>GetWindowPort</code> to obtain the value. There is no equivalent function for setting the value. </p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>windowKind</code></p></td><td ><p><code>Get/SetWindowKind</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>visible</code></p></td><td ><p><code>Hide/ShowWindow, ShowHide, IsWindowVisible</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>hilited</code></p></td><td ><p><code>HiliteWindow, IsWindowHilited</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>goAwayFlag</code></p></td><td ><p><code>ChangeWindowAttributes</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>spareFlag</code></p></td><td ><p><code>ChangeWindowAttributes</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>strucRgn</code></p></td><td ><p><code>GetWindowRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>contRgn</code></p></td><td ><p><code>GetWindowRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>updateRgn</code></p></td><td ><p><code>GetWindowRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>windowDefProc</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>dataHandle</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>titleHandle</code></p></td><td ><p><code>Get/SetWTitle</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>titleWidth</code></p></td><td ><p><code>GetWindowRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>controlList</code></p></td><td ><p><code>GetRootControl</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>nextWindow</code></p></td><td ><p><code>GetNextWindow</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>windowPic</code></p></td><td ><p><code>Get/SetWindowPic</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>refCon</code></p></td><td ><p><code>Get/SetWRefCon</code></p></td></tr><tr><td  scope="row"><p><code>AuxWinRec</code></p></td><td ><p><code>awNext</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>awOwner</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>awCTable</code></p></td><td ><p><code>Get/SetWindowContentColor</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>reserved</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>awFlags</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>awReserved</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>awRefCon</code></p></td><td ><p>Use <code>Get/SetWindowProperty</code> if you need more reference constants.</p></td></tr><tr><td  scope="row"><p>Lists</p></td><td ><p></p></td><td ><p></p></td></tr><tr><td  scope="row"><p><code>ListRec</code></p></td><td ><p><code>rView</code></p></td><td ><p><code>Get/SetListViewBounds</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>port</code></p></td><td ><p><code>Get/SetListPort</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>indent</code></p></td><td ><p><code>Get/SetListCellIndent</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>cellSize</code></p></td><td ><p><code>Get/SetListCellSize</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>visible</code></p></td><td ><p>Use <code>GetListVisibileCells</code> to obtain the value.  No equivalent function for setting the value. </p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>vScroll</code></p></td><td ><p><code>GetListVerticalScrollBar</code>, use new API (TBD) to turn off automatic scroll bar drawing.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>hScroll</code></p></td><td ><p><code>GetListHorizontalScrollBar</code>, use new API (TBD) to turn off automatic scroll bar drawing.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>selFlags</code></p></td><td ><p><code>Get/SetListSelectionFlags</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>lActive</code></p></td><td ><p><code>LActivate, GetListActive</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>lReserved</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>listFlags</code></p></td><td ><p><code>Get/SetListFlags</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>clikTime</code></p></td><td ><p><code>Get/SetListClickTime</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>clikLoc</code></p></td><td ><p><code>GetListClickLocation</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>mouseLoc</code></p></td><td ><p><code>GetListMouseLocation</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>lClickLoop</code></p></td><td ><p><code>Get/SetListClickLoop</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>lastClick</code></p></td><td ><p><code>SetListLastClick</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>refCon</code></p></td><td ><p><code>Get/SetListRefCon</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>listDefProc</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>userHandle</code></p></td><td ><p><code>Get/SetListUserHandle</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>dataBounds</code></p></td><td ><p><code>GetListDataBounds</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>cells</code></p></td><td ><p><code>LGet/SetCell</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>maxIndex</code></p></td><td ><p><code>LGet/SetCell</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>cellArray</code></p></td><td ><p><code>LGet/SetCell</code></p></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_29"></a>Table A-2 provides a summary of accessor functions you can use to access common QuickDraw data structures. </p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF113" title="Table A-2QuickDraw accessor functions "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table A-2&nbsp;&nbsp;</strong>QuickDraw accessor functions </caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data structure</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Element</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Accessor</p></th></tr><tr><td  scope="row"><p><code>GrafPort</code></p></td><td ><p><code>device</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>portBits</code></p></td><td ><p>Use <code>GetPortBitMapsForCopyBits</code> or <code>IsPortColor</code>. </p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>portRect</code></p></td><td ><p><code>Get/SetPortBounds</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>visRgn</code></p></td><td ><p><code>Get/SetPortVisibleRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>clipRgn</code></p></td><td ><p><code>Get/SetPortClipRgn</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>bkPat</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>fillPat</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnLoc</code></p></td><td ><p><code>Get/SetPortPenLocation</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnSize</code></p></td><td ><p><code>Get/SetPortPenSize</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnMode</code></p></td><td ><p><code>Get/SetPortPenMode</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnPat</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnVis</code></p></td><td ><p>Use <code>GetPortPenVisibility</code> or <code>Show/HidePen</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txFont</code></p></td><td ><p>Use <code>GetPortTextFont</code> or <code>TextFont</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txFace</code></p></td><td ><p>Use <code>GetPortTextFace</code> or <code>TextFace</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txMode</code></p></td><td ><p>Use <code>GetPortTextMode</code> or <code>TextMode</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txSize</code></p></td><td ><p>Use <code>GetPortTextSize</code> or <code>TextSize</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>spExtra</code></p></td><td ><p>Use <code>GetPortSpExtra</code> or <code>SpaceExtra</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>fgColor</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>bkColor</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>colrBit</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>patStretch</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>picSave</code></p></td><td ><p><code>IsPortPictureBeingDefined</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>rgnSave</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>polySave</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>grafProcs</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p><code>CGrafPort</code></p></td><td ><p><code>device</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>portPixMap</code></p></td><td ><p><code>GetPortPixMap</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>portVersion</code></p></td><td ><p><code>IsPortColor</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>grafVars</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>chExtra</code></p></td><td ><p><code>GetPortChExtra</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnLocHFrac</code></p></td><td ><p><code>Get/SetPortFracHPenLocation</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>portRect</code></p></td><td ><p><code>Get/SetPortBounds</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>visRgn</code></p></td><td ><p><code>Get/SetPortVisibleRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>clipRgn</code></p></td><td ><p><code>Get/SetPortClipRegion</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>bkPixPat</code></p></td><td ><p>Use <code>GetPortBackPixPat</code> or <code>BackPixPat</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>rgbFgColor</code></p></td><td ><p>Use <code>GetPortForeColor</code> or <code>RGBForeColor</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>rgbBkColor</code></p></td><td ><p>Use <code>GetPortBackColor</code> or <code>RGBBackColor</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnLoc</code></p></td><td ><p><code>Get/SetPortPenLocation</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnSize</code></p></td><td ><p><code>Get/SetPortPenSize</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnMode</code></p></td><td ><p><code>Get/SetPortPenMode</code></p></td></tr><tr><td  scope="row"><p><code>pnPixPat</code></p></td><td ><p></p></td><td ><p><code>Get/SetPortPenPixPat</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>fillPixPat</code></p></td><td ><p><code>Get/SetPortFillPixPat</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>pnVis</code></p></td><td ><p>Use <code>GetPortPenVisibility</code> or <code>Show/HidePen</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txFont</code></p></td><td ><p>Use <code>GetPortTextFont</code> or <code>TextFont</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txFace</code></p></td><td ><p>Use <code>GetPortTextFace</code> or <code>TextFace</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txMode</code></p></td><td ><p>Use <code>GetPortTextMode</code> or <code>TextMode</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>txSize</code></p></td><td ><p>Use <code>GetPortTextSize</code> or <code>TextSize</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>spExtra</code></p></td><td ><p>Use <code>GetPortSpExtra</code> or <code>SpaceExtra</code>.</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>fgColor</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>bkColor</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>colrBit</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>patStretch</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>picSave</code></p></td><td ><p><code>IsPortPictureBeingDefined</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>rgnSave</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>polySave</code></p></td><td ><p>not supported</p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>grafProcs</code></p></td><td ><p><code>Get/SetPortGrafProcs</code></p></td></tr><tr><td  scope="row"><p><code>QDGlobals</code></p></td><td ><p><code>randSeed</code></p></td><td ><p><code>GetQDGlobalsRandomSeed</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>screenBits</code></p></td><td ><p><code>GetQDGlobalsScreenBits</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>arrow</code></p></td><td ><p><code>GetQDGlobalsArrow</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>dkGray</code></p></td><td ><p><code>GetQDGlobalsDarkGray</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>ltGray</code></p></td><td ><p><code>GetQDGlobalsLightGray</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>gray</code></p></td><td ><p><code>GetQDGlobalsGray</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>black</code></p></td><td ><p><code>GetQDGlobalsBlack</code></p></td></tr><tr><td  scope="row"><p></p></td><td ><p><code>white</code></p></td><td ><p><code>GetQDGlobalsWhite</code></p></td></tr><tr><td  scope="row"><p><code>GrafPtr</code></p></td><td ><p><code>thePort</code></p></td><td ><p><code>GetQDGlobalsThePort</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF103" title="Utility Functions"></a><h3>Utility Functions</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_30"></a><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_31"></a>Carbon includes a number of utility functions to make it easier to port your application. Under the classic Mac OS API, new graphics ports were created by allocating non-relocatable memory the size of a <code>CGrafPort</code> record and calling <code>OpenCPort</code>. Because <code>GrafPort</code> records are now opaque, and their size is system-defined, Carbon includes new routines to create and dispose of graphics ports:</p><div class="codesample"><table><tr><td scope="row"><pre>pascal CGrafPtr CreateNewPort()<span></span></pre></td></tr><tr><td scope="row"><pre>pascal void DisposePort(CGrafPtr port)<span></span></pre></td></tr></table></div><p>These functions provide access to commonly used bounding rectangles:</p><div class="codesample"><table><tr><td scope="row"><pre>pascal OSStatus GetWindowBounds(WindowRef window,<span></span></pre></td></tr><tr><td scope="row"><pre>                WindowRegionCode regionCode, Rect *bounds);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal OSStatus GetWindowRegion(WindowRef window,<span></span></pre></td></tr><tr><td scope="row"><pre>                WindowRegionCode regionCode, RgnHandle windowRegion);<span></span></pre></td></tr></table></div><p>Often you’ll find the need to set the current port to the one that belongs to a window or dialog box. <code>SetPortWindowPort</code> and <code>SetPortDialogPort</code> allow you to do this:</p><div class="codesample"><table><tr><td scope="row"><pre>pascal void SetPortWindowPort(WindowPtr window)<span></span></pre></td></tr><tr><td scope="row"><pre>pascal void SetPortDialogPort(DialogPtr dialog)<span></span></pre></td></tr></table></div><p>The new function <code>GetParamText</code> replaces <code>LMGetDAStrings</code> as the method to retrieve the current <code>ParamText</code> setting. Pass <code>NULL</code> for a parameter if you don’t want a particular string.</p><div class="codesample"><table><tr><td scope="row"><pre>pascal void GetParamText(StringPtr param0, StringPtr param1,<span></span></pre></td></tr><tr><td scope="row"><pre>                         StringPtr param2, StringPtr param3)<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000991-CH206-BAABGAIG" title="Functions in CarbonAccessors.o"></a><h2>Functions in CarbonAccessors.o</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_32"></a><code>CarbonAccessors.o</code> is a static library that contains implementations of the Carbon functions for accessing opaque toolbox data structures. See <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-TPXREF111">“Begin With CarbonAccessors.o”</a></span> for information on how you can use this library to assist in porting your code to Carbon.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_1" title="Note"></a><p><strong>Note:</strong>&nbsp;You can also use <code>CarbonAccessors.o</code> to maintain some backwards compatibility with non-Carbon systems. For example, if you don’t require functions that are available only in CarbonLib, by linking against the <code>CarbonAccessors.o</code> static library you can build an application from a Carbon-compliant code base that runs on non-Carbon systems.</p></div><p>Table A-3 lists the Carbon functions implemented in <code>CarbonAccessors.o.</code> The “•” symbol indicates a function added since the Developer Preview 3 version of this document. “••” indicates a function added since Developer Preview 4.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF114" title="Table A-3Functions in CarbonAccessors.o "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table A-3&nbsp;&nbsp;</strong>Functions in CarbonAccessors.o </caption><tr><td  scope="row"><p><code>AEFlattenDesc</code>••</p></td><td ><p><code>AEGetDescData</code></p></td></tr><tr><td  scope="row"><p><code>AEGetDescDataSize</code></p></td><td ><p><code>AEReplaceDescData</code>•</p></td></tr><tr><td  scope="row"><p><code>AESizeOfFlattenedDesc</code>••</p></td><td ><p><code>AEUnflattenDesc</code>••</p></td></tr><tr><td  scope="row"><p><code>c2pstrcpy</code>•</p></td><td ><p><code>CopyCStringToPascal</code>•</p></td></tr><tr><td  scope="row"><p><code>CopyPascalStringToC</code>•</p></td><td ><p><code>CreateNewPort</code></p></td></tr><tr><td  scope="row"><p><code>DisposePort</code></p></td><td ><p><code>GetControlBounds</code></p></td></tr><tr><td  scope="row"><p><code>GetControlDataHandle</code></p></td><td ><p><code>GetControlHilite</code></p></td></tr><tr><td  scope="row"><p><code>GetControlOwner</code></p></td><td ><p><code>GetControlPopupMenuHandle</code></p></td></tr><tr><td  scope="row"><p><code>GetControlPopupMenuID</code></p></td><td ><p><code>GetDialogCancelItem</code></p></td></tr><tr><td  scope="row"><p><code>GetDialogDefaultItem</code></p></td><td ><p><code>GetDialogFromWindow</code></p></td></tr><tr><td  scope="row"><p><code>GetDialogKeyboardFocusItem</code></p></td><td ><p><code>GetDialogPort</code></p></td></tr><tr><td  scope="row"><p><code>GetDialogTextEditHandle</code></p></td><td ><p><code>GetDialogWindow</code></p></td></tr><tr><td  scope="row"><p><code>GetGlobalMouse</code></p></td><td ><p><code>GetListActive</code></p></td></tr><tr><td  scope="row"><p><code>GetListCellIndent</code></p></td><td ><p><code>GetListCellSize</code></p></td></tr><tr><td  scope="row"><p><code>GetListClickLocation</code></p></td><td ><p><code>GetListClickLoop</code></p></td></tr><tr><td  scope="row"><p><code>GetListClickTime</code></p></td><td ><p><code>GetListDataBounds</code></p></td></tr><tr><td  scope="row"><p><code>GetListDataHandle</code></p></td><td ><p><code>GetListDefinition</code></p></td></tr><tr><td  scope="row"><p><code>GetListFlags</code></p></td><td ><p><code>GetListHorizontalScrollBar</code></p></td></tr><tr><td  scope="row"><p><code>GetListMouseLocation</code></p></td><td ><p><code>GetListPort</code></p></td></tr><tr><td  scope="row"><p><code>GetListRefCon</code></p></td><td ><p><code>GetListSelectionFlags</code></p></td></tr><tr><td  scope="row"><p><code>GetListUserHandle</code></p></td><td ><p><code>GetListVerticalScrollBar</code></p></td></tr><tr><td  scope="row"><p><code>GetListViewBounds</code></p></td><td ><p><code>GetListVisibleCells</code></p></td></tr><tr><td  scope="row"><p><code>GetMenuHeight</code></p></td><td ><p><code>GetMenuID</code></p></td></tr><tr><td  scope="row"><p><code>GetMenuTitle</code></p></td><td ><p><code>GetMenuWidth</code></p></td></tr><tr><td  scope="row"><p><code>GetNextWindow</code>•</p></td><td ><p><code>GetParamText</code></p></td></tr><tr><td  scope="row"><p><code>GetPixBounds</code></p></td><td ><p><code>GetPixDepth</code></p></td></tr><tr><td  scope="row"><p><code>GetPortBackColor</code></p></td><td ><p><code>GetPortBackPixPat</code></p></td></tr><tr><td  scope="row"><p><code>GetPortBackPixPatDirect</code></p></td><td ><p><code>GetPortBitMapForCopyBits</code>•</p></td></tr><tr><td  scope="row"><p><code>GetPortBounds</code></p></td><td ><p><code>GetPortChExtra</code></p></td></tr><tr><td  scope="row"><p><code>GetPortClipRegion</code></p></td><td ><p><code>GetPortFillPixPat</code></p></td></tr><tr><td  scope="row"><p><code>GetPortForeColor</code></p></td><td ><p><code>GetPortFracHPenLocation</code></p></td></tr><tr><td  scope="row"><p><code>GetPortGrafProcs</code></p></td><td ><p><code>GetPortHiliteColor</code></p></td></tr><tr><td  scope="row"><p><code>GetPortOpColor</code></p></td><td ><p><code>GetPortPenLocation</code></p></td></tr><tr><td  scope="row"><p><code>GetPortPenMode</code></p></td><td ><p><code>GetPortPenPixPat</code></p></td></tr><tr><td  scope="row"><p><code>GetPortPenPixPatDirect</code></p></td><td ><p><code>GetPortPenSize</code></p></td></tr><tr><td  scope="row"><p><code>GetPortPenVisibility</code></p></td><td ><p><code>GetPortPixMap</code></p></td></tr><tr><td  scope="row"><p><code>GetPortPrintingReference</code></p></td><td ><p><code>GetPortSpExtra</code></p></td></tr><tr><td  scope="row"><p><code>GetPortTextFace</code></p></td><td ><p><code>GetPortTextFont</code></p></td></tr><tr><td  scope="row"><p><code>GetPortTextMode</code></p></td><td ><p><code>GetPortTextSize</code></p></td></tr><tr><td  scope="row"><p><code>GetPortVisibleRegion</code></p></td><td ><p><code>GetQDGlobals</code></p></td></tr><tr><td  scope="row"><p><code>GetQDGlobalsArrow</code></p></td><td ><p><code>GetQDGlobalsBlack</code></p></td></tr><tr><td  scope="row"><p><code>GetQDGlobalsDarkGray</code></p></td><td ><p><code>GetQDGlobalsGray</code></p></td></tr><tr><td  scope="row"><p><code>GetQDGlobalsLightGray</code></p></td><td ><p><code>GetQDGlobalsRandomSeed</code></p></td></tr><tr><td  scope="row"><p><code>GetQDGlobalsScreenBits</code></p></td><td ><p><code>GetQDGlobalsThePort</code></p></td></tr><tr><td  scope="row"><p><code>GetQDGlobalsWhite</code></p></td><td ><p><code>GetRegionBounds</code></p></td></tr><tr><td  scope="row"><p><code>GetTSMDialogDocumentID</code></p></td><td ><p><code>GetTSMTEDialogTSMTERecHandle</code>•</p></td></tr><tr><td  scope="row"><p><code>GetWindowFromPort</code></p></td><td ><p><code>GetWindowKind</code></p></td></tr><tr><td  scope="row"><p><code>GetWindowList</code>•</p></td><td ><p><code>GetWindowPort</code></p></td></tr><tr><td  scope="row"><p><code>GetWindowPortBounds</code></p></td><td ><p><code>GetWindowSpareFlag</code></p></td></tr><tr><td  scope="row"><p><code>GetWindowStandardState</code></p></td><td ><p><code>GetWindowUserState</code></p></td></tr><tr><td  scope="row"><p><code>InvalWindowRect</code></p></td><td ><p><code>InvalWindowRgn</code></p></td></tr><tr><td  scope="row"><p><code>IsControlHilited</code></p></td><td ><p><code>IsPortColor</code>•</p></td></tr><tr><td  scope="row"><p><code>IsPortOffscreen</code></p></td><td ><p><code>IsPortPictureBeingDefined</code></p></td></tr><tr><td  scope="row"><p><code>IsPortRegionBeingDefined</code></p></td><td ><p><code>IsRegionRectangular</code></p></td></tr><tr><td  scope="row"><p><code>IsTSMTEDialog•</code></p></td><td ><p><code>IsWindowHilited</code></p></td></tr><tr><td  scope="row"><p><code>IsWindowUpdatePending</code></p></td><td ><p><code>IsWindowVisible</code></p></td></tr><tr><td  scope="row"><p><code>p2cstrcpy</code>•</p></td><td ><p><code>SetControlBounds</code></p></td></tr><tr><td  scope="row"><p><code>SetControlDataHandle</code></p></td><td ><p><code>SetControlOwner</code></p></td></tr><tr><td  scope="row"><p><code>SetControlPopupMenuHandle</code></p></td><td ><p><code>SetControlPopupMenuID</code></p></td></tr><tr><td  scope="row"><p><code>SetListCellIndent</code></p></td><td ><p><code>SetListClickLoop</code></p></td></tr><tr><td  scope="row"><p><code>SetListClickTime</code></p></td><td ><p><code>SetListFlags</code></p></td></tr><tr><td  scope="row"><p><code>SetListLastClick</code></p></td><td ><p><code>SetListPort</code></p></td></tr><tr><td  scope="row"><p><code>SetListRefCon</code></p></td><td ><p><code>SetListSelectionFlags</code></p></td></tr><tr><td  scope="row"><p><code>SetListUserHandle</code></p></td><td ><p><code>SetListViewBounds</code></p></td></tr><tr><td  scope="row"><p><code>SetMenuHeight</code></p></td><td ><p><code>SetMenuID</code></p></td></tr><tr><td  scope="row"><p><code>SetMenuTitle</code></p></td><td ><p><code>SetMenuWidth</code></p></td></tr><tr><td  scope="row"><p><code>SetPortBackPixPat</code></p></td><td ><p><code>SetPortBackPixPatDirect</code></p></td></tr><tr><td  scope="row"><p><code>SetPortBounds</code></p></td><td ><p><code>SetPortClipRegion</code></p></td></tr><tr><td  scope="row"><p><code>SetPortDialogPort</code></p></td><td ><p><code>SetPortFracHPenLocation</code></p></td></tr><tr><td  scope="row"><p><code>SetPortGrafProcs</code></p></td><td ><p><code>SetPortOpColor</code></p></td></tr><tr><td  scope="row"><p><code>SetPortPenMode</code></p></td><td ><p><code>SetPortPenPixPat</code></p></td></tr><tr><td  scope="row"><p><code>SetPortPenPixPatDirect</code></p></td><td ><p><code>SetPortPenSize</code></p></td></tr><tr><td  scope="row"><p><code>SetPortPrintingReference</code></p></td><td ><p><code>SetPortVisibleRegion</code></p></td></tr><tr><td  scope="row"><p><code>SetPortWindowPort</code></p></td><td ><p><code>SetQDError</code>•</p></td></tr><tr><td  scope="row"><p><code>SetQDGlobalsArrow</code></p></td><td ><p><code>SetQDGlobalsRandomSeed</code></p></td></tr><tr><td  scope="row"><p><code>SetTSMDialogDocumentID</code></p></td><td ><p><code>SetTSMTEDialogTSMTERecHandle</code>•</p></td></tr><tr><td  scope="row"><p><code>SetWindowKind</code></p></td><td ><p><code>SetWindowStandardState</code></p></td></tr><tr><td  scope="row"><p><code>SetWindowUserState</code></p></td><td ><p><code>ValidWindowRect</code></p></td></tr><tr><td  scope="row"><p><code>ValidWindowRgn</code></p></td><td ><p></p></td></tr></table></div><p>The following functions were removed from <code>CarbonAccessors.o</code>. </p><a name="//apple_ref/doc/uid/TP30000991-CH206-BAAEAEAH" title="Table A-4Functions removed from CarbonAccessors.o "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table A-4&nbsp;&nbsp;</strong>Functions removed from CarbonAccessors.o </caption><tr><td  scope="row"><p><code>DisableMenuItem</code></p></td><td ><p><code>EnableMenuItem</code></p></td></tr><tr><td  scope="row"><p><code>GetControlColorTable</code></p></td><td ><p><code>GetControlDefinition</code></p></td></tr><tr><td  scope="row"><p><code>GetTSMDialogPtr</code></p></td><td ><p><code>GetTSMDialogTextEditHandle</code></p></td></tr><tr><td  scope="row"><p><code>GetWindowGoAwayFlag</code></p></td><td ><p><code>SetControlColorTable</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000991-CH206-BAABFEDG" title="Debugging Functions"></a><h2>Debugging Functions</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_33"></a>The following functions have been added to <code>MacMemory.h</code> to aid in debugging.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF104" title="CheckAllHeaps"></a><h3>CheckAllHeaps</h3><div class="codesample"><table><tr><td scope="row"><pre>pascal Boolean CheckAllHeaps(void);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_34"></a>Checks all applicable heaps for validity. Returns <code>false</code> if there is any corruption.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF105" title="IsHeapValid"></a><h3>IsHeapValid</h3><div class="codesample"><table><tr><td scope="row"><pre>pascal Boolean IsHeapValid(void);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_35"></a>Similar to <code>CheckAllHeaps</code>, but checks only the application heap for validity.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF106" title="IsHandleValid"></a><h3>IsHandleValid</h3><div class="codesample"><table><tr><td scope="row"><pre>pascal Boolean IsHandleValid(Handle h);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_36"></a>Returns <code>true</code> if the specified handle is valid. You cannot pass <code>NULL</code> or an empty handle to <code>IsHandleValid.</code></p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF107" title="IsPointerValid"></a><h3>IsPointerValid</h3><div class="codesample"><table><tr><td scope="row"><pre>pascal Boolean IsPointerValid(Ptr p);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_37"></a>Returns <code>true</code> if the specified pointer is valid. You cannot pass <code>NULL</code> or an empty pointer to <code>IsPointerValid.</code></p><a name="//apple_ref/doc/uid/TP30000991-CH206-BAABEEHF" title="Resource Chain Manipulation Functions"></a><h2>Resource Chain Manipulation Functions</h2><p>Three functions have been added to <code>Resources.h</code> to facilitate resource chain manipulation in Carbon applications.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF108" title="InsertResourceFile"></a><h3>InsertResourceFile</h3><div class="codesample"><table><tr><td scope="row"><pre>OSErr InsertResourceFile(SInt16 refNum, RsrcChainLocation where);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_38"></a>If the file is already in the resource chain, it is removed and re-inserted at the location specified by the <code>where</code> parameter. If the file has been detached, it is added to the resource chain at the specified location. Returns <code>resFNotFound</code> if the file is not currently open. Valid constants for the <code>where</code> parameter are:</p><div class="codesample"><table><tr><td scope="row"><pre>// RsrcChainLocation constants for InsertResourceFile<span></span></pre></td></tr><tr><td scope="row"><pre>enum short<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kRsrcChainBelowAll = 0,         /* Below all other app files in<span></span></pre></td></tr><tr><td scope="row"><pre>                                            the resource chain */<span></span></pre></td></tr><tr><td scope="row"><pre>    kRsrcChainBelowApplicationMap = 1, /* Below the application's<span></span></pre></td></tr><tr><td scope="row"><pre>                                            resource map */<span></span></pre></td></tr><tr><td scope="row"><pre>    kRsrcChainAboveApplicationMap = 2  /* Above the application's<span></span></pre></td></tr><tr><td scope="row"><pre>                                            resource map */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF109" title="DetachResourceFile"></a><h3>DetachResourceFile</h3><div class="codesample"><table><tr><td scope="row"><pre>OSErr DetachResourceFile(SInt16 refNum);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_39"></a>If the file is not currently in the resource chain, this function returns <code>resNotFound</code>. Otherwise, the resource file is removed from the resource chain.</p><a name="//apple_ref/doc/uid/TP30000991-CH206-TPXREF110" title="FSpResourceFileAlreadyOpen"></a><h3>FSpResourceFileAlreadyOpen</h3><div class="codesample"><table><tr><td scope="row"><pre>Boolean FSpResourceFileAlreadyOpen (<span></span></pre></td></tr><tr><td scope="row"><pre>                        const FSSpec *resourceFile,<span></span></pre></td></tr><tr><td scope="row"><pre>                        Boolean *inChain,<span></span></pre></td></tr><tr><td scope="row"><pre>                        SInt16 *refNum);<span></span></pre></td></tr></table></div><p><a name="//apple_ref/doc/uid/TP30000991-CH206-DontLinkElementID_40"></a>This function returns <code>true</code> if the resource file is already open and known by the Resource Manager (that is, if the file is either in the current resource chain or if it’s a detached resource file). If the file is in the resource chain, the <code>inChain</code> parameter is set to <code>true</code> on exit and the function returns <code>true</code>.  If the file is open but currently detached, <code>inChain</code> is set to <code>false</code> and the function returns <code>true</code>. If the file is open, the <code>refNum</code> to the file is returned.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../cpg_newtechstruct/cpg_newtech_struct.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../cpg_apdx_sampleapp/cpg_apdx_sample_app.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2002-12-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/carbon_porting_guide/cpg_apdx_func/cpg_apdx_funcs.html%3Fid%3DTP30000991-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/carbon_porting_guide/cpg_apdx_func/cpg_apdx_funcs.html%3Fid%3DTP30000991-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/carbon_porting_guide/cpg_apdx_func/cpg_apdx_funcs.html%3Fid%3DTP30000991-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
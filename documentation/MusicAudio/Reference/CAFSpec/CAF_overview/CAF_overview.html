<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Apple Core Audio Format Specification 1.0: CAF File Overview</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="CAF File Overview"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001862-CH209" title="CAF File Overview"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/MusicAudio/index.html#//apple_ref/doc/uid/TP30001281-TP30000428" target="_top">Audio</a> &gt; <a href="../../../../../reference/MusicAudio/idxCoreAudio-date.html#//apple_ref/doc/uid/TP30001281-TP30000428-TP30000500" target="_top">Core Audio</a> &gt; <a href="../CAF_intro/CAF_intro.html#//apple_ref/doc/uid/TP40001862-CH203-DontLinkElementID_60">Apple Core Audio Format Specification 1.0</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../CAF_intro/CAF_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../CAF_spec/CAF_spec.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_62" title="CAF File Overview"></a><h1><a name="//apple_ref/doc/uid/TP40001862-CH209-TPXREF101" title="CAF File Overview"></a>CAF File Overview</h1><p>This chapter provides background information
important for understanding and using Apple&#8217;s Core Audio Format
(CAF) files.</p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="CAF_overview.html#//apple_ref/doc/uid/TP40001862-CH209-BCGDADFA">CAF File Advantages</a>
				
			<br/>
			
        
			
			
				<a href="CAF_overview.html#//apple_ref/doc/uid/TP40001862-CH209-TPXREF102">CAF File Structure</a>
				
			<br/>
			
        
			
			
				<a href="CAF_overview.html#//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_5">Types of Chunks</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001862-CH209-BCGDADFA" title="CAF File Advantages"></a><h2>CAF File Advantages</h2>
<p>Apple&#8217;s Core Audio Format is a flexible, state-of-the-art
file format for storing and manipulating digital audio data. It
is fully supported by Core Audio APIs on Mac OS X v10.4 and later
and on Mac OS X v10.3 with QuickTime 7 or later. CAF provides high
performance and flexibility, and is scalable to future ultra-high
resolution audio recording, editing, and playback.</p>
<p>CAF files have several advantages over other standard audio
file formats:</p>
<ul class="ul"><li class="li"><p>Unrestricted
file size</p><p>Whereas AIFF, AIFF-C, and WAV files are limited in
size to 4 gigabytes, which might represent as little as 15 minutes
of audio, CAF files use 64-bit file offsets, eliminating practical
limits. A standard CAF file can hold audio data with a playback
duration of hundreds of years.</p></li>
<li class="li"><p>Safe and efficient recording</p><p>Applications writing AIFF
and WAV files must either update the data header&#8217;s size field
at the end of recording&#8212;which can result in an unusable file if
recording is interrupted before the header is finalized&#8212;or they
must update the size field after recording each packet of data,
which is inefficient. With CAF files, in contrast, an application can
append new audio data to the end of the file in a manner that allows it to
determine the amount of data even if the size field in the header
has not been finalized.</p></li>
<li class="li"><p>Support for many data formats</p><p>CAF files serve as wrappers
for a wide variety of audio data formats. The flexibility of the
CAF file structure and the many types of metadata that can be recorded
enable CAF files to be used with practically any type of audio data.
Furthermore, CAF files can store any number of audio channels.</p></li>
<li class="li"><p>Support for many types of auxiliary data</p><p>In addition
to audio data, CAF files can store text annotations, markers, channel layouts,
and many other types of information that can help in the interpretation, analysis,
or editing of the audio.</p></li>
<li class="li"><p>Support for data dependencies</p><p>Certain metadata in CAF
files is linked to the audio data by an edit count value. You can
use this value to determine when metadata has a dependency on the
audio data and, furthermore, when the audio data has changed since
the metadata was written. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-TPXREF102" title="CAF File Structure"></a><h2>CAF File Structure</h2>
<p>CAF files begin with a file header, which identifies the file
type and the CAF version, followed by a series of chunks. A chunk
consists of a header, which defines the type of the chunk and indicates
the size of its data section, followed by the chunk data. The nature
and format of the data is specific to each type of chunk.</p>
<p>The only two chunk types required for every CAF file are the
Audio Data chunk (which, as you might have guessed, contains the
audio data) and the Audio Description chunk, which specifies the audio data
format.</p>
<p>The Audio Description chunk must be the first chunk following
the file header. The Audio Data chunk can appear anywhere else in
the file, unless the size of its data section has not been determined.
In that case, the size field in the Audio Data chunk header is set
to <code>-1</code> and the Audio Data
chunk must come last in the file so that the end of the audio data
chunk is the same as the end of the file. This placement allows
you to determine the data section size when that information is
not available in the size field.</p>
<p>Audio is stored in the Audio Data chunk as a sequential series
of packets. An audio packet in a CAF file contains one or more frames
of audio data.</p>
<p>CAF supports a wide range of other chunk types, which can
be placed in any order in the file except first (reserved for the
Audio Description chunk) or last (when the Audio Data chunk size
field is set to -1). Some chunk types can be used more than once
in a file. Some refer to&#8212;or are referred to by&#8212;chunks of other
types.</p>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_4" title="Chunk Structure"></a><h3>Chunk Structure</h3>
<p>Every chunk consists of a chunk header followed by a data
section. Chunk headers contain two fields:</p>
<ul class="spaceabove"><li class="li"><p>A four-character
code indicating the chunk&#8217;s type</p></li>
<li class="li"><p>A number indicating the chunk size in bytes</p></li></ul>
<p>The format of the data in a chunk depends on the chunk type.
It consists of a series of sections, typically called <em>fields</em>.
The format of the audio data depends on the data type. All of the
other fields in a CAF file are in big-endian (network) byte order.</p>
<a name="//apple_ref/doc/uid/TP40001862-CH209-CJAIJHBI" title="Packets, Frames, and Samples"></a><h3>Packets, Frames, and Samples</h3>
<p>In order to understand this specification, it is important
to understand the definitions of the following four terms:</p>
<ul class="spaceabove"><li class="li"><p>Sample</p><p>One
number for one channel of digitized audio data.</p></li>
<li class="li"><p>Frame</p><p>A set of samples representing one sample for each
channel. The samples in a frame are intended to be played together
(that is, simultaneously). Note that this definition might be different
from the use of the term &#8220;frame&#8221; by codecs, video files, and
audio or video processing applications.</p></li>
<li class="li"><p>Packet</p><p>The smallest, indivisible block of data. For linear
PCM (pulse-code modulated) data, each packet contains exactly one
frame. For compressed audio data formats, the number of frames in
a packet depends on the encoding. For example, a packet of AAC represents 1024
frames of PCM. In some formats, the number of frames per packet varies. </p></li>
<li class="li"><p>Sample rate</p><p>The number of complete frames of samples
per second of noncompressed or decompressed data.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_5" title="Types of Chunks"></a><h2>Types of Chunks</h2>
<p>This section briefly introduces the types of chunks defined
in the CAF specification. All CAF chunk types are fully described
in <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-TPXREF101">“Core Audio Format Specification.”</a></span></p>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_6" title="Required"></a><h3>Required</h3>
<p>Every CAF file must include the following chunks:</p>
<ul class="spaceabove"><li class="li"><p>Audio Description
chunk, which describes the audio data format for the file. This chunk
must follow immediately after the CAF file header. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk.”</a></span></p></li>
<li class="li"><p>Audio Data chunk, containing the audio data for the file.
If the data chunk&#8217;s size isn&#8217;t known, it must be the final chunk
in the file. If this chunk&#8217;s header specifies the size, the chunk
can appear anywhere after the Audio Description chunk. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk.”</a></span></p></li>
<li class="li"><p>If the audio packets vary in size, the file must have a Packet
Table chunk, which records the size of each packet. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBDDAI">“Packet Table Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_7" title="Channel Layout"></a><h3>Channel Layout</h3>
<p>There is one chunk that is required for all CAF files with
more than two channels:</p>
<ul class="spaceabove"><li class="li"><p>Channel Layout
chunk, which describes the role of each channel in the file. This
chunk is optional for one- and two-channel files. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCIJCF">“Channel Layout Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_8" title="Supplementary Data"></a><h3>Supplementary Data</h3>
<p>Some chunks refer to data in other, supporting chunks:</p>
<ul class="spaceabove"><li class="li"><p>Some compressed
audio data formats require additional codec-specific data in order
to decode the audio data. If the audio format requires this data,
the file must have a Magic Cookie chunk. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGFCCFA">“Magic Cookie Chunk.”</a></span></p></li>
<li class="li"><p>Some chunks refer to text strings held in the Strings chunk.
See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAFAD">“Strings Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_9" title="Markers"></a><h3>Markers</h3>
<p>There are two chunks that you can use to place markers in
the data file. These chunks share data types, described in <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIGCIH">“Marker Data Types”</a></span>:</p>
<ul class="spaceabove"><li class="li"><p>Marker chunks
hold individual markers. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCHAJE">“Marker Chunk.”</a></span></p></li>
<li class="li"><p>Region chunks delineate segments of the audio data. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBCCE">“Region Chunk”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_10" title="Music Metadata"></a><h3>Music Metadata</h3>
<p>There are two chunk types that store musical information: </p>
<ul class="spaceabove"><li class="li"><p>Instrument
chunks describe aspects of the audio data needed when the audio
is used by a sampler or played as an instrument. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJIDHD">“Instrument Chunk.”</a></span></p></li>
<li class="li"><p>MIDI chunks store all of the information in a standard MIDI
file. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJJDBF">“MIDI Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_11" title="Support For Editors"></a><h3>Support For Editors</h3>
<p>Two chunks contain data for use by audio editors:</p>
<ul class="spaceabove"><li class="li"><p>Overview
chunks contain samples of the data useful for displaying the audio
at a particular resolution. A CAF file can have any number of these;
one for each resolution to be displayed. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBIJEH">“Overview Chunk.”</a></span></p></li>
<li class="li"><p>Peak chunks list the peak amplitude in each channel and specify
the frame in which that amplitude occurs. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDICDC">“Peak Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_12" title="Annotations"></a><h3>Annotations</h3>
<p>There are two chunk types that hold annotations to the data:</p>
<ul class="spaceabove"><li class="li"><p>Edit Comments
chunks hold time-stamped comments added when the data is edited. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGFGEAD">“Edit Comments Chunk.”</a></span></p></li>
<li class="li"><p>The Information chunk contains text strings that provide information
about the audio data, such as key signature, artist, and title.
See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBBFI">“Information Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_13" title="Identifier"></a><h3>Identifier</h3>
<p>One chunk type can be used to uniquely identify the data:</p>
<ul class="spaceabove"><li class="li"><p>The optional
Unique Material Identifier (UMID) chunk provides a unique identifier
for the audio data in a CAF file. There can be at most one UMID
chunk in a file. See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCECBB">“Unique Material Identifier Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_14" title="Extending CAF"></a><h3>Extending CAF</h3>
<p>You can define your own chunk type to extend the CAF file
specification. There is a chunk type defined for this purpose:</p>
<ul class="spaceabove"><li class="li"><p>The User-Defined
chunk provides a universally unique ID (UUID) for a new chunk type.
See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHJGEC">“User-Defined Chunk.”</a></span></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001862-CH209-DontLinkElementID_15" title="Extra Space"></a><h3>Extra Space</h3>
<p>Many chunk types allow you to specify a larger chunk size
than is currently needed for data in order to reserve additional
space. There is also a special chunk you can use to reserve extra
space in the CAF file as a whole:</p>
<ul class="spaceabove"><li class="li"><p>The Free
chunk contains no data, but reserves space that you can use later.
See <span class="content_text"><a href="../CAF_spec/CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDCHAA">“Free Chunk.”</a></span></p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../CAF_intro/CAF_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../CAF_spec/CAF_spec.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-03-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/CAFSpec/CAF_overview/CAF_overview.html%3Fid%3DTP40001862-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/CAFSpec/CAF_overview/CAF_overview.html%3Fid%3DTP40001862-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/CAFSpec/CAF_overview/CAF_overview.html%3Fid%3DTP40001862-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
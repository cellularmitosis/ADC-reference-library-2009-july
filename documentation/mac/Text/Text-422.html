<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Providing Menus and Icons(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING422></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-421.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-423.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-409.html"><B>Chapter 7 - Text Services Manager</B></A> / <A HREF="Text-421.html"><B>Using the Text Services Manager (for Text Service Components)</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING422-0></A>
<H2><A NAME=MARKER-9-178></A>Providing Menus and Icons</H2>
 If you are writing a text service component, you can have it display its own menu, provide an icon for the title of that menu, and provide icons for the Keyboard menu.<P>
<A NAME=HEADING422-2></A>
<H3><A NAME=MARKER-2-810></A>Providing a Text Service Component Menu</H3>
 Although most user selections and configurations are best made with floating palettes, a text service component may put one menu into the menu bar. For input-method text service components, the menu cannot be hierarchical. Input-method menus appear on the right (system) side of the menu bar, between the Help menu and the Keyboard menu. Menus for non-input-method text service components appear on the left (application) side of the menu bar. See <A HREF=#MARKER-9-184>Figure 7-10 on page 7-40</A>.<P>
 To create the menu, follow the standard procedures as described in the Menu Manager chapter of <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>. The Text Services Manager installs the menu in the menu bar whenever your component is opened or activated. The application (through the Text Services Manager) passes the menu commands to you for handling when appropriate.<P>
 All instances of an input-method text service component must share one menu handle. Therefore, make sure to allocate the handle in the System heap. You can store the menu handle in your component's <CODE>refcon</CODE> field. See the discussion of the Component Manager <CODE>SetComponentRefcon</CODE> routine in <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I>.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD><A NAME=MARKER-2-70></A>An input-method text service component should never dispose <BR>of its menu handle in response to a <CODE>TerminateTextService</CODE> <BR>call (see <A HREF=Text-472.html#MARKER-9-337>page 7-86</A>). Any other kind of text service component <BR>should always dispose of its menu handle in response to a <CODE>TerminateTextService</CODE> call.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
<DT><B>Using an icon for the menu title</B>
<DD><A NAME=MARKER-2-181></A>If you wish to have an icon instead of text as the title of your text service component menu, first create a small-icon suite (such as <CODE>'kcs#'</CODE>, <CODE>'kcs4'</CODE>, and <CODE>'kcs8'</CODE>) to represent your menu title. Then, in your menu resource, make the menu title a 5-byte Pascal string (6 bytes total size), with this format:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Byte<TH>Value<TR>
<TD>0<TD>$05 (length byte for menu string)<TR>
<TD>1<TD>$01 (invalid character code)<TR>
<TD>2-5<TD>Handle to icon suite</TABLE>
  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DD>When the menu is created, the menu bar definition procedure knows from the values of the first 2 bytes that the final 4 bytes are a handle to an icon suite, and the procedure will put the icon in the menu bar. For more on creating icon suites and drawing icons, see the Finder Interface chapter of <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>. See also <I>Macintosh Human Interface Guidelines</I> for design suggestions for color icon families.<EM></EM><A NAME=MARKER-2-357></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Remember these limitations when considering an input-method menu: an input method can put up only one menu, the menu cannot be hierarchical, and the menu can be removed from the menu bar if there is insufficient room for it (on a small screen). It may be more appropriate to use palettes.<P>
<A NAME=HEADING422-11></A>
<H3>Providing Input Method Icons for the Keyboard Menu</H3>
 <A NAME=MARKER-2-246></A>Any text service component that provides an input method must supply the following keyboard icon resources to display an icon for the input method in the Keyboard menu: <CODE>'kcs#'</CODE>, <CODE>'kcs4'</CODE>, and <CODE>'kcs8'</CODE>. The resource ID number of the keyboard icon resources must equal the script code of the script system that the input method supports. If your input method supports more than one script system, you can have more than one icon suite, each with the appropriate resource IDs.<P>
 <A HREF=#MARKER-9-184>Figure 7-10</A> shows a Keyboard menu displaying a Japanese input method and a Korean input method, as well as keyboard layouts from several other script systems. The Japanese input method is active; its icon is checked in the menu and appears highlighted on the menu bar.<P>
<B>Figure 7-10  <A NAME=MARKER-9-184></A>Input method icons in the Keyboard menu and menu bar</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/TSM_S-06.jpg">
 The pencil icon between the Keyboard menu and the Help menu in <A HREF=#MARKER-9-184>Figure 7-10</A> is the title for the menu belonging to the active input method.<P>
 For more information on keyboard icon suites, see the appendix "Keyboard Resources" in this book. For information on script codes, see the chapter "Script Manager" in <BR>this book.<A NAME=MARKER-2-185></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-421.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-423.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Developing and Deploying aServlet</title>		</HEAD>	<body bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Servlets_in_WebObjects.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="Deploying_a_s_a_Servlet.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "BAJFDCFE"></a><h2><font face="Lucida Grande,Helvetica,Arial">Developing and Deploying aServlet</font></h2><!-- apple_doc: pageHeadingEnd --><p>Follow these steps to create a new project with servlet support.</p><ol><li>Create anew project using Project Builder.<p>Select WebObjects Applicationfrom the list of project types, and click Next.</p><br> <img src = "../art/newproject.gif" alt = "[image: ../art/newproject.gif]"><p>You can deploy as a servletother types of WebObjects applications, such as Direct to Java Client,Direct to Web, Display Group, and Java Client.</p></font></li><li> Identify the project.<p>Name the project Hello, selecta location for it, and click Next.</p><br> <img src = "../art/newproject2.gif" alt = "[image: ../art/newproject2.gif]"><br></font></li><br><li>Select Deploy in a JSP/Servlet Container, and click Next.<br><br> <img src = "../art/newproject3.gif" alt = "[image: ../art/newproject3.gif]"><p>Selecting "Copyall JARs inside the JSP/Servlet WEB-INF directory" tells Project Builderto copy framework and application JAR files to the <code>WEB-INF/lib</code> directory (necessaryonly when the servlet uses other servlets, or for JSPs that makeuse of actual objects).</p></font></li><li>Make sure no data-source adaptors are selected in the ChooseEOAdaptors pane, because this application doesn't make use ofa data source, and click Next.<br><br> <img src = "../art/newproject4.gif" alt = "[image: ../art/newproject4.gif]"></font></li><br><br><li>No additional frameworks are needed. Click Finish.<br><br> <img src = "../art/newproject5.gif" alt = "[image: ../art/newproject5.gif]"></font></li></ol><p>When Project Builder is finished creating the project, you'llsee a window similar to the one in  <a href="#CJBDFEHG">Figure 2-1</a>.</p><br><a name = "CJBDFEHG"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure2-1 New WebObjects Application projectwith servlet-support</font></b></p> <img src = "../art/project.gif" alt = "[image: ../art/project.gif]"><p>The newly created project is, in all respects, a standardWebObjects Application project. However, Project Builder adds theServlet Resources folder to the Resources group. Anything you addto this folder is included in the WAR file that Project Buildercreates when you build the project, following the same directorystructure (the Servlet Resources folder is a real directory in theproject's root directory).</p><p>The WEB-INF folder, under Server Resources, contains the <code>web.xml.template</code> file,which Project Builder uses to generate the servlet's deploymentdescriptor. You can edit this template to customize the deploymentdescriptor for your deployment environment. There are several elementswhose values are surrounded by percent (%) characters (these areplaceholders that Project Builder evaluates when you build the project).These elements include cross-platform settings (see  <a href="Cross_Platform_Deployment.html#TPXREF107" target = "content">"Cross-Platform Deployment"</a> fordetails). You can replace the placeholders with other values ifyour environment requires it.</p><p>Project Builder also adds a couple of build settings to JSP/Servletprojects, as shown in  <a href="#CJBGIEGC">Figure 2-2</a>.</p><br><a name = "CJBGIEGC"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure2-2 Build settings for a servlet project</font></b></p> <img src = "../art/buildsettings.gif" alt = "[image: ../art/buildsettings.gif]"><p>The <code>SERVLET_COPY_JARS</code> buildsetting tells Project Builder whether to copy framework and applicationJAR files to the <code>WEB-INF/lib</code> directory(necessary only when the servlet uses other servlets, or for JSPsthat make use of actual objects).</p><p>You can tell Project Builder where to put the WAR file bysetting the value of the <code>SERVLET_WEBAPPS_DIR</code> buildsetting (this is especially convenient during development). By default,WAR files are places in the <code>build</code> directoryof your project.</p><p>Project Builder WO (on Windows) adds two buckets to your project:JSP Servlet WEB-INF and JSP Servlet Resources. The JSP Servlet WEB-INFbucket is a holding place for JARs, classes, and TLDs (which areauto-routed to the correct subdirectories in the <code>WEB-INF</code> directoryof the generated WAR file, <code>lib</code>, <code>class</code>,and <code>tld</code> respectively;the <code>web.xml.template</code> fileis also located here). The JSP Servlet Resources bucket containsany other items you want to add to the WAR file (you can drag filesand folders into this bucket; Project Builder WO preserves the directorystructure when it generates the WAR file). These items are not auto-routed.</p><p>There are also several new variables defined in <code>Makefile.preamble</code> .The <code>SERVLET_APP_MODE</code> variableindicates whether Web-server resources are loaded from the WOA bundle(the default) or the servlet container (by setting it to <code>&quot;Deployment&quot;</code>.The <code>SERVLET_WEBAPPS_DIR</code> and <code>SERVLET_COPY_JARS</code> variablesperform the same function described for Project Builder's servlet-relatedbuild settings above.</p><p>This is how you set up the <code>SERVLET_WEBAPPS_DIR</code> variablein Project Builder WO:</p><pre>export SERVLET_WEBAPPS_DIR = C:\Tomcat\webapps</pre><p>You can test the servlet by setting the <code>SERVLET_WEBAPPS_DIR</code> buildsetting to the path of your servlet container's application deploymentdirectory and building the project. Before you build, you can edit <code>Main.wo</code> usingWebObjects Builder to add a message to the page, such as "<code>Hello.I'm a servlet.</code>" When Project Builder finishesbuilding the application, it places the <code>Hello.war</code> filein your servlet container's application deployment directory.  <a href="#CJBFIIFJ">Figure 2-3</a> showsthe deployment directory of a servlet deployed within Tomcat.</p><br><a name = "CJBFIIFJ"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure2-3 Tomcat's application-deploymentdirectory</font></b></p> <img src = "../art/hellowar_in_webapps.gif" alt = "[image: ../art/hellowar_in_webapps.gif]"><p>After restarting Tomcat you'll be able to view your application'soutput by connecting to it through your servlet container. By default,the connection URL is</p><pre>http://host:port/AppName/WebObjects/AppName.woa</pre><p>where <code>host</code> and <code>port</code> aredefined by the servlet container.  <a href="#BAJHHEIB">Table 2-1</a> lists the default host andport for Tomcat and WebLogic.</p><br> <img src = "../art/hello_page.gif" alt = "[image: ../art/hello_page.gif]"><br><br><table border = "1"><a name = "BAJHHEIB"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Table2-1 Default host and port in Tomcat andWebLogic</font></b></p><br><b><font face="Geneva,Helvetica,Arial" size="1"><tr><td scope="row">&nbsp;</td><td>Host</td><td>Port</td></tr></b></font><tr><td scope="row">Tomcat</td><td><code>localhost</code></td><td><code>8080</code></td></tr><tr><td scope="row">WebLogic</td><td><code>localhost</code></td><td><code>7001</code></td></tr></table><br><br>    <br><a href="Servlets_in_WebObjects.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="Deploying_a_s_a_Servlet.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated January 3, 2002)</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PrCtlCall (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING453></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-452.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-454.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-406.html"><B>Chapter 9 - Printing Manager</B></A> / <A HREF="QuickDraw-409.html"><B>Printing Manager Reference</B></A><BR><DL><DD><A HREF="QuickDraw-423.html"><B>Printing Manager Routines</B></A> / <A HREF="QuickDraw-448.html"><B>Low-Level Routines</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING453-0></A>
<H3>PrCtlCall</H3>
 <A NAME=MARKER-11-592></A><A NAME=MARKER-11-592></A><A NAME=MARKER-2-593></A>You can use the <CODE>PrCtlCall</CODE> procedure to send various requests to the current printer driver.<P>
<PRE>
PROCEDURE PrCtlCall (iWhichCtl: Integer; lParam1: LongInt; 
                     lParam2: LongInt; lParam3: LongInt);
</PRE>
<DL>
<DT><CODE>iWhichCtl</CODE>
<DD> A value that indicates the operation to perform. You can use these constants in this parameter:
</DL>
<PRE>
          CONST
            iPrBitsCtl     = 4;  {print a bitmap object}
            iPrIOCtl       = 5;  {perform text streaming}
            iPrEvtCtl      = 6;  {print object specified in }
                                 { lParam1 parameter}
            iPrDevCtl      = 7;  {device control command}
</PRE>
<DL>
<DT><CODE>lParam1</CODE>
<DD> The use of this parameter varies according to the value in the <CODE>iWhichCtl </CODE>parameter. See the following paragraphs for this information.
<DT><CODE>lParam2</CODE>
<DD> The use of this parameter varies according to the value in the <CODE>iWhichCtl </CODE>parameter. See the following paragraphs for this information.
<DT><CODE>lParam3</CODE>
<DD> The use of this parameter varies according to the value in the <CODE>iWhichCtl </CODE>parameter. See the following paragraphs for this information.
</DL>
<A NAME=HEADING453-8></A>
<H5>DESCRIPTION</H5>
 The <CODE>PrCtlCall</CODE> procedure performs the operation indicated by the <CODE>iWhichCtl</CODE> parameter. Depending on the operation, <CODE>PrCtlCall</CODE> may also use information in the <CODE>lParam1</CODE>, <CODE>lParam2</CODE>, and <CODE>lParam3</CODE> parameters. The <CODE>PrCtlCall</CODE> procedure calls the printer driver's control routine. Instead of sending the low-level calls to the printer driver, the <CODE>PrCtlCall</CODE> procedure converts the call into its high-level equivalent before execution.<P>
 <A NAME=MARKER-13-595></A><A NAME=MARKER-13-595></A><A NAME=MARKER-2-596></A>You can use the <CODE>PrCtlCall</CODE> procedure with the <CODE>iPrBitsCtl</CODE> control constant when you want to print bitmaps. In this case, you should supply the parameters to <CODE>PrCtlCall</CODE> with the following information:<P>
<DL>
<DT><CODE>iWhichCtl</CODE>
<DD> The constant <CODE>iPrBitsCtl</CODE>. This constant allows you to send all or part of a QuickDraw bitmap directly to the printer.
<DT><CODE>lParam1</CODE>
<DD> A pointer to the QuickDraw bitmap to print.
<DT><CODE>lParam2</CODE>
<DD> A pointer to the rectangle you want to print.
<DT><CODE>lParam3</CODE>
<DD> The type of resolution used to print the bitmap. The LaserWriter printer driver ignores this flag. This parameter can have one of the following values:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Constant<TH>Value<TH>Description<TR>
<TD>&nbsp;<TD>lScreenBits<TD>$00000000<TD><A NAME=MARKER-13-5></A><A NAME=MARKER-13-5></A>The resolution is 80 by 72 dpi<A NAME=MARKER-2-6></A><TR>
<TD>&nbsp;<TD>lPaintBits<TD>$00000001<TD><A NAME=MARKER-13-8></A><A NAME=MARKER-13-8></A>The resolution is 72 by 72 dpi<A NAME=MARKER-2-9></A><TR>
<TD>&nbsp;<TD>lHiScreenBits<TD>$00000002<TD><A NAME=MARKER-13-11></A><A NAME=MARKER-13-11></A>The resolution is 160 by 144 dpi<A NAME=MARKER-2-12></A><TR>
<TD>&nbsp;<TD>lHiPaintBits<TD>$00000003<TD><A NAME=MARKER-13-14></A><A NAME=MARKER-13-14></A>The resolution is 144 by 144 dpi<A NAME=MARKER-2-15></A><A NAME=MARKER-2-16></A></TABLE>

</DL>
 <A NAME=MARKER-13-598></A><A NAME=MARKER-13-598></A><A NAME=MARKER-2-599></A><A NAME=MARKER-2-600></A>You can use the <CODE>PrCtlCall</CODE> procedure with the <CODE>iPrIOCtl</CODE> control constant when you want text streaming in your application. (Text streaming is useful for fast printing of text when speed is more important than visual fidelity or formatting. It makes no use of QuickDraw.) In this case, you should supply the parameters to <CODE>PrCtlCall</CODE> with the following information:<P>
<DL>
<DT><CODE>iWhichCtl</CODE>
<DD> The constant <CODE>iPrIOCtl</CODE>. This constant causes text streaming to occur. 
<DT><CODE>lParam1</CODE>
<DD> A pointer to the beginning of the text. 
<DT><CODE>lParam2</CODE>
<DD> The number of bytes to transfer. The high-order word must be 0. 
<DT><CODE>lParam3</CODE>
<DD> This should be 0.<A NAME=MARKER-2-601></A> <A NAME=MARKER-2-602></A>
</DL>
 <A NAME=MARKER-13-604></A><A NAME=MARKER-13-604></A><A NAME=MARKER-2-605></A>You can use the <CODE>PrCtlCall</CODE> procedure with the <CODE>iPrEvtCtl</CODE> control constant for printing the screen or the frontmost window on most ImageWriter printers. (The LaserWriter printer driver does not support this call.) In this case, you should supply the parameters to <CODE>PrCtlCall</CODE> with the following information:<P>
<DL>
<DT><CODE>iWhichCtl</CODE>
<DD> The constant <CODE>iPrEvtCtl</CODE>. This constant prints the object you have selected using the <CODE>lParam1</CODE> parameter. 
<DT><CODE>lParam1</CODE>
<DD> This parameter selects the object to be printed. If this value is $00000000, you want to print the screen. If this value is $00010000, you want to print the frontmost window. 
<DT><CODE>lParam2</CODE>
<DD> This should be <CODE>NIL</CODE>. 
<DT><CODE>lParam3</CODE>
<DD> This should be <CODE>NIL</CODE>.<A NAME=MARKER-2-606></A> 
</DL>
 <A NAME=MARKER-13-608></A><A NAME=MARKER-13-608></A><A NAME=MARKER-2-609></A>You can use the <CODE>PrCtlCall</CODE> procedure with the <CODE>iPrDevCtl</CODE> control constant for controlling the printer device. In this case, you should supply the parameters to <CODE>PrCtlCall</CODE> with the following information:<P>
<DL>
<DT><CODE>iWhichCtl</CODE>
<DD> The constant <CODE>iPrDevCtl</CODE>. 
<DT><CODE>lParam1</CODE>
<DD> The action you want to take. The values possible for this parameter are listed in <A HREF=#MARKER-9-17>Table 9-1</A>. 
<DT><CODE>lParam2</CODE>
<DD> This should be <CODE>NIL</CODE>. 
<DT><CODE>lParam3</CODE>
<DD> This should be <CODE>NIL</CODE>. 
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-17></A>Values for the <CODE>lParam1</CODE> parameter when using the <CODE>iPrDevCtl</CODE> control constant</CAPTION>
<TH>Constant<TH>Value<TH>Description<TR>
<TD>lPrDocOpen<TD>$00010000<TD><A NAME=MARKER-13-19></A><A NAME=MARKER-13-19></A>Opens the document. This is similar to the high-level routine <CODE>PrOpenDoc</CODE> and should be followed with a call to <CODE>PrCtlCall</CODE> with the <CODE>iPrDetl</CODE> control call and an <CODE>lParam1</CODE> value of <CODE>lPrDocClose</CODE>.<A NAME=MARKER-2-20></A><TR>
<TD>lPrReset<TD>$00010000<TD><A NAME=MARKER-13-22></A><A NAME=MARKER-13-22></A>Reserved. <A NAME=MARKER-2-23></A><TR>
<TD>lPrPageClose<TD>$00020000<TD><A NAME=MARKER-13-25></A><A NAME=MARKER-13-25></A>Closes the page. This is similar to the high-level routine <CODE>PrClosePage</CODE> and should follow a call to <CODE>PrCtlCall</CODE> with the <CODE>iPrDevCtl</CODE> control call and an <CODE>lParam1</CODE> value of <CODE>lPrPageOpen</CODE>.<A NAME=MARKER-2-26></A><TR>
<TD>lPrPageEnd<TD>$00020000<TD><A NAME=MARKER-13-28></A><A NAME=MARKER-13-28></A>Same as <CODE>lPrPageClose</CODE>.<A NAME=MARKER-2-29></A><TR>
<TD>lPrLineFeed<TD>$00030000<TD><A NAME=MARKER-13-31></A><A NAME=MARKER-13-31></A>Paper advance.<A NAME=MARKER-2-32></A><TR>
<TD>lPrLFStd<TD>$0003FFFF<TD><A NAME=MARKER-13-34></A><A NAME=MARKER-13-34></A>Carriage return with line feed. The ImageWriter printer driver causes a carriage return plus a paper feed of one-sixth of an inch. The LaserWriter printer driver moves the pen location down the page.<A NAME=MARKER-2-35></A><TR>
<TD>lPrPageOpen<TD>$00040000<TD><A NAME=MARKER-13-37></A><A NAME=MARKER-13-37></A>Opens the page for printing. This is similar to the high-level routine <CODE>PrOpenPage</CODE> and should be followed with a call to <CODE>PrCtlCall</CODE> with the <CODE>iPrDevCtl</CODE> control call and an <CODE>lParam1</CODE> value of <CODE>lPrPageClose</CODE>.<A NAME=MARKER-2-38></A><TR>
<TD>lPrDocClose<TD>$00050000<TD><A NAME=MARKER-13-40></A><A NAME=MARKER-13-40></A>Closes the document. This is similar to the high-level routine <CODE>PrCloseDoc</CODE> and should follow a call to <CODE>PrCtlCall</CODE> with the <CODE>iPrDevCtl</CODE> control call and an <CODE>lParam1</CODE> value of <CODE>lPrDocOpen</CODE>.<A NAME=MARKER-2-41></A><A NAME=MARKER-2-42></A></TABLE>

</DL>
<A NAME=HEADING453-30></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Apple strongly discourages you from using this routine.<P>
<A NAME=HEADING453-32></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>PrCtlCall</CODE> procedure are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_PrGlue<TD>$A0000E00<A NAME=MARKER-2-1></A><A NAME=MARKER-2-2></A><A NAME=MARKER-2-48></A></TABLE>
<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-452.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-454.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

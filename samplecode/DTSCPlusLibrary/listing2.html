<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>DTSCPlusLibrary - /Headers/Application.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; <A HREF="javascript:location.replace('index.html');">DTSCPlusLibrary</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">DTSCPlusLibrary</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/Headers/Application.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/Headers/AppleEvent.h</option>
<option value="listing2.html">/Headers/Application.h</option>
<option value="listing3.html">/Headers/ApplicationResources.h</option>
<option value="listing4.html">/Headers/CollectionClasses.h</option>
<option value="listing5.html">/Headers/ColorPicker.h</option>
<option value="listing6.html">/Headers/DTSCPlusLibrary.h</option>
<option value="listing7.html">/Headers/Environment.h</option>
<option value="listing8.html">/Headers/FileClass.h</option>
<option value="listing9.html">/Headers/GDevice.h</option>
<option value="listing10.html">/Headers/GraphicsEnv.h</option>
<option value="listing11.html">/Headers/KeyMap.h</option>
<option value="listing12.html">/Headers/MemoryClass.h</option>
<option value="listing13.html">/Headers/Menu.h</option>
<option value="listing14.html">/Headers/Process.h</option>
<option value="listing15.html">/Headers/Random.h</option>
<option value="listing16.html">/Headers/SoundClass.h</option>
<option value="listing17.html">/Headers/SpinCursor.h</option>
<option value="listing18.html">/Headers/Template.h</option>
<option value="listing19.html">/Headers/Timer.h</option>
<option value="listing20.html">/Headers/Toolbox.h</option>
<option value="listing21.html">/Headers/Tracer.h</option>
<option value="listing22.html">/Headers/UserTermination.h</option>
<option value="listing23.html">/Headers/Volume.h</option>
<option value="listing24.html">/Headers/Window.h</option>
<option value="listing25.html">/Resources/GUIApplication.r</option>
<option value="listing26.html">/Resources/MemoryClass.r</option>
<option value="listing27.html">/Resources/SoundClass.r</option>
<option value="listing28.html">/Resources/SpinCursor.r</option>
<option value="listing29.html">/Sources/AppleEvent.cp</option>
<option value="listing30.html">/Sources/Application.cp</option>
<option value="listing31.html">/Sources/CollectionClasses.cp</option>
<option value="listing32.html">/Sources/CollectionClassesTest.cp</option>
<option value="listing33.html">/Sources/ColorPicker.cp</option>
<option value="listing34.html">/Sources/ColorPickerTest.cp</option>
<option value="listing35.html">/Sources/DTSCPlusLibrary.cp</option>
<option value="listing36.html">/Sources/Environment.cp</option>
<option value="listing37.html">/Sources/EnvironmentTest.cp</option>
<option value="listing38.html">/Sources/FileClass.cp</option>
<option value="listing39.html">/Sources/FileClassTest.cp</option>
<option value="listing40.html">/Sources/GDevice.cp</option>
<option value="listing41.html">/Sources/GDeviceTest.cp</option>
<option value="listing42.html">/Sources/GraphicsEnv.cp</option>
<option value="listing43.html">/Sources/GraphicsEnvTest.cp</option>
<option value="listing44.html">/Sources/KeyMap.cp</option>
<option value="listing45.html">/Sources/KeyMapTest.cp</option>
<option value="listing46.html">/Sources/MemoryClass.cp</option>
<option value="listing47.html">/Sources/MemoryClassTest.cp</option>
<option value="listing48.html">/Sources/Menu.cp</option>
<option value="listing49.html">/Sources/Process.cp</option>
<option value="listing50.html">/Sources/ProcessTest.cp</option>
<option value="listing51.html">/Sources/Random.cp</option>
<option value="listing52.html">/Sources/RandomTest.cp</option>
<option value="listing53.html">/Sources/SoundClass.cp</option>
<option value="listing54.html">/Sources/SoundClassTest.cp</option>
<option value="listing55.html">/Sources/SpinCursor.cp</option>
<option value="listing56.html">/Sources/SpinCursorTest.cp</option>
<option value="listing57.html">/Sources/Template.cp</option>
<option value="listing58.html">/Sources/TemplateTest.cp</option>
<option value="listing59.html">/Sources/Timer.cp</option>
<option value="listing60.html">/Sources/TimerTest.cp</option>
<option value="listing61.html">/Sources/Toolbox.cp</option>
<option value="listing62.html">/Sources/ToolboxTest.cp</option>
<option value="listing63.html">/Sources/Tracer.cp</option>
<option value="listing64.html">/Sources/tracertest.cp</option>
<option value="listing65.html">/Sources/UserTermination.cp</option>
<option value="listing66.html">/Sources/UserTerminationTest.cp</option>
<option value="listing67.html">/Sources/Volume.cp</option>
<option value="listing68.html">/Sources/VolumeTest.cp</option>
<option value="listing69.html">/Sources/Window.cp</option></select>
				</p>
				</form>
				<p><strong><a href="DTSCPlusLibrary.zip">Download Sample</a></strong> (&#147;DTSCPlusLibrary.zip&#148;, 435.0K)<BR>
<strong><a href="DTSCPlusLibrary.dmg">Download Sample</a></strong> (&#147;DTSCPlusLibrary.dmg&#148;, 521.3K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    Application.h  Contains:  TApplication is an abstract base class, TBKApplication is a background only application class,          TGUIApplication is a window-based user application class. TQTApplication is a QuickTime aware application          class, TGXApplication is a Quickdraw GX aware application class. Finally TQTAndGXApplication          handles both QX and QT application work.          Application.h contains application level classes for building the wire for an application framework.   Written by:     Copyright:  Copyright &copy; 1992-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        8/18/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        */// Declare label for this header file#ifndef _APPLICATION_#define _APPLICATION_#ifndef _DTSCPLUSLIBRARY_#include &quot;DTSCPlusLibrary.h&quot;#endif//  Toolbox Interfaces#ifndef __QUICKDRAW__#include &lt;Quickdraw.h&gt;#endif#ifndef __EVENTS__#include &lt;Events.h&gt;#endif#ifndef __OSEVENTS__#include &lt;OSEvents.h&gt;#endif#ifndef __MEMORY__#include &lt;Memory.h&gt;#endif#ifndef __WINDOWS__#include &lt;Windows.h&gt;#endif#ifndef __DESK__#include &lt;Desk.h&gt;#endif#ifndef __FONTS__#include &lt;Fonts.h&gt;#endif#ifndef __TOOLUTILS__#include &lt;ToolUtils.h&gt;#endif#ifndef __DIALOGS__#include &lt;Dialogs.h&gt;#endif#ifndef __MENUS__#include &lt;Menus.h&gt;#endif#ifndef __TEXTEDIT__#include &lt;TextEdit.h&gt;#endif#ifndef __APPLEEVENTS_#include &lt;AppleEvents.h&gt;#endif#ifndef __RESOURCES__#include &lt;Resources.h&gt;#endif#ifndef __DISKINIT__#include &lt;DiskInit.h&gt;#endif// DTS Library headers#ifndef _WINDOW_#include &quot;Window.h&quot;#endif#ifndef _APPLEEVENT_#include &quot;AppleEvent.h&quot;#endif#include &quot;Menu.h&quot;#include &lt;AERegistry.h&gt;#include &quot;ApplicationResources.h&quot;#include &quot;CollectionClasses.h&quot;// GLOBAL INTERNAL STRUCTURESstruct AEEventTable{                        // AppleEvent record  OSType theClass;  OSType theID;  long theValue;};typedef AEEventTable* AEEventTablePtr;// _________________________________________________________________________________________________________ ////  TApplication Interface.class TApplication// The TApplication is the base class for Application classes. It contains the basic behavior// for any application work. Note that it's an abstract class.{public:  // TYPEDEFS AND ENUMS  enum EConstants  {    kForgroundSleepValue = 0, kSuspendResumeMessage = 1, kResumeMask = 1, kHighByte = 24, kBackgroundSleepValue = 60  };  enum EState  {    kInit = 1, kRun, kQuit  };  // CONSTRUCTORS AND DESTRUCTORS  TApplication();                // default constructor  virtual~ TApplication();          // default destructor  // MAIN INTERFACE  virtual void InitializeMemory();      // initialize our memory needs  virtual void InitializeToolbox() = 0;    // initialize the toolbox  // EVENT AND CONTROL METHODS  virtual void DoNextEvent();          // handle the incoming events  virtual void DoEventLoop(){};        // handle the actual event dispatching  virtual void DoHighLevelEvent();      // handle high level events  virtual void Start();            // start the application and let it run  virtual void DoIdle() = 0;          // call idle handler  virtual void Quit();            // quit the application   virtual void DoCommand(long   /*command*/){};// handle commands  // CORE AE HANDLER METHODS  virtual void InstallAEHandler();      // install our AE dispatcher  virtual void DispatchAppleEvents(AppleEvent* in,                   AppleEvent* out,                   long Command);// Dispatch incoming Apple Events in the framework  virtual OSErr HandleQuit(AppleEvent* in,               AppleEvent* out,               long refCon);    // handle the quit AE  virtual OSErr HandleOpen(AppleEvent* in,               AppleEvent* out,               long refCon);    // handle the open AE  virtual OSErr HandleOpenDocuments(AppleEvent* in,                    AppleEvent* out,                    long refCon);// handle the open document AE  virtual OSErr HandlePrint(AppleEvent* in,                AppleEvent* out,                long refCon);    // handle the print command  // STATE CHANGE METHODS  virtual void SetState(TApplication::EState theState);// change the state of the application FSM  // FIELDSprotected:  RgnHandle fSleepRegion;            // our sleep region (for possible mouse movements)  long fSleepValue;              // defined sleep value for WaitNextEvent  EventRecord fEventRecord;          // current event record  short fEventMask;              // our eventMask  short fMoreMasters;              // amount of MoreMaster calls  TAppleEvent fMessenger;            // our AE posting system  EState fState;                // internal state of the TApplication  OSErr fError;                // latest error};// _________________________________________________________________________________________________________ ////  TBKApplication Interface.class TBKApplication : public TApplication// The TBKApplication is the base class for background only/faceless applications. It provides// the basic skeleton for building such applications.{public:  // CONSTRUCTORS AND DESTRUCTORS  TBKApplication();  virtual~ TBKApplication();};// _________________________________________________________________________________________________________ ////  TGUIApplication Interface.class TGUIApplication : public TApplication// The TGUIApplication is the base class for writing window/menu based user interaction applications.{public:  // CONSTRUCTORS AND DESTRUCTORS  TGUIApplication();              // default constructor  virtual~ TGUIApplication();          // default destructor  // MAIN INTERFACE  // CONTROL  virtual void InitializeToolbox();      // initialize the toolbox  virtual void Start();            // handle the cursor before calling inherited Start  virtual void DoEventLoop();          // handle the actual event dispatching  // SYSTEM  virtual void DoIdle();            // handle idle time  virtual void DoSystemTime();        // handle DA time  virtual void DoDiskEvent();          // handle disk insertion events  virtual void DispatchAppleEvents(AppleEvent* in,                   AppleEvent* out,                   long command);  // GENERAL WINDOW EVENTS  virtual void DoWindowUpdate();        // handle window updating  virtual void DoDragWindow();        // handle inDrag events  virtual void DoGoAwayWindow();        // handle doGoAway events  virtual void DoInWindowContent();      // handle window mouse clicks  // MENU EVENTS  virtual void DoMenuCommand();        // handle menu command  virtual void DoInternalMenus(long command);  // handle internal menus (Apple)  virtual void DoCommand(long command);    // handle commands related to default GUI  virtual long CalculateMenuCommand(long menuentry);// calculate the menu command  // AE HANDLING  virtual OSErr HandleOpen(AppleEvent* in,               AppleEvent* out,               long refCon);    // OVERRIDE - handle the open AE  // DOCUMENT METHODS  virtual void DoCreateDocument();      // create our document (default one window)  virtual void DoCreateDocument(short windowID);// create our document from a resource (default one window)  virtual void AddDocument(TWindow* theDocument);// add the document to the list of known ones  // USER INTERACTIONS  virtual void Draw();            // draw in the main window  virtual void DoClick();            // handle a click inside a window  virtual void AdjustUserInterface(){};    // adjust the user interface based on state changes  virtual void DoAboutBox();          // present our About\xC9 box  virtual void DoHelp();            // a hook to a possible outside help system  // FIELDSprotected:  CursHandle fCursHandle;            // current cursor selected  TWindow* fDocument;              // our only window/document (create list of windows later)  WindowPtr fCurrentWindow;          // the current window attached to the event  short fWindowNum;              // amount of windows  long fMenuResult;              // value received from menu};// _________________________________________________________________________________________________________ ////  TQTApplication Interface.class TQTApplication : public TGUIApplication// The TQTApplication is the base class for writing window/menu based user interaction applications// that also handles QuickTime calls.{public:  // CONSTRUCTORS AND DESTRUCTORS  TQTApplication();  virtual~ TQTApplication();};// _________________________________________________________________________________________________________ ////  TGXApplication Interface.class TGXApplication : public TGUIApplication// The TGXApplication is the base class for writing window/menu based user interaction applications// that also handles Quickdraw GX calls.{public:  // CONSTRUCTORS AND DESTRUCTORS  TGXApplication();  virtual~ TGXApplication();};// _________________________________________________________________________________________________________ ////  TQTAndGXApplication Interface.class TQTAndGXApplication : public TGUIApplication// The TGXApplication is the base class for writing window/menu based user interaction applications// that handles both Quickdraw GX and QuickTime calls.{public:  // CONSTRUCTORS AND DESTRUCTORS  TQTAndGXApplication();  virtual~ TQTAndGXApplication();};#endif// _________________________________________________________________________________________________________ ///*  Change History (most recent last):  No    Init.  Date    Comment  1      khs    11/6/92    New file  2      khs    1/14/92    Cleanup*/</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/DTSCPlusLibrary/listing2.html%3Fid%3DDTS10000731-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/DTSCPlusLibrary/listing2.html%3Fid%3DDTS10000731-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/DTSCPlusLibrary/listing2.html%3Fid%3DDTS10000731-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
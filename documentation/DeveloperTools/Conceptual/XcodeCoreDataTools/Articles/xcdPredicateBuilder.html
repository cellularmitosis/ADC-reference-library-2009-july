<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Xcode Tools for Core Data: The Predicate Builder</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="The Predicate Builder"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006853" title="The Predicate Builder"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../Xcode-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000557" target="_top">Xcode</a> &gt; <a href="../index.html" target="_top">Xcode Tools for Core Data</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="xcdDiagramView.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="xcdCodeGeneration.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40006853-SW1" title="The Predicate Builder"></a><hr /><H1>The Predicate Builder</H1><p>You use the predicate builder to create predicates for fetched properties and for fetch request templates. As with the rest of the modeling tool, the predicate builder simply provides a graphical means of defining a collection of objects that you could otherwise create programmatically.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-BCIFBJJB">Fetched Properties and Fetch Request Templates</a>
				
			<br/>
			
        
			
			
				<a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-SW3">The Predicate Builder</a>
				
			<br/>
			
        
			
			
				<a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-SW5">Left-Hand Side</a>
				
			<br/>
			
        
			
			
				<a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-SW6">Right-Hand Side</a>
				
			<br/>
			
        
			
			
				<a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-SW7">Compound Predicates</a>
				
			<br/>
			
        
			
			
				<a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-SW8">Expressions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40006853-BCIFBJJB" title="Fetched Properties and Fetch Request Templates"></a><h2>Fetched Properties and Fetch Request Templates</h2><p>Fetched properties are weak, unidirectional relationships from one entity to another, defined by a fetch request. For more about fetched properties, see <code><a href="../../../../Cocoa/Reference/CoreDataFramework/Classes/NSFetchedPropertyDescription_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFetchedPropertyDescription" target="_top">NSFetchedPropertyDescription</a></code>. Note that fetched property names must begin with a lowercase letter.</p><p>Fetch request templates allow you to create predefined instances of <code>NSFetchRequest</code> that are stored in the model. You can either define all aspects of a fetch or you can allow for runtime substitution of values for given variables. Fetch templates are associated with the entity against which the fetch will be made, that is, instances of which the fetch will return. For more about fetch request templates, see <span class="content_text"><a href="../../../../Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793" target="_top">Creating Predicates</a></span> and the reference documentation for <code><a href="../../../../Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html#//apple_ref/occ/cl/NSManagedObjectModel" target="_top">NSManagedObjectModel</a></code>. For more about predicates in general, see <em><a href="../../../../Cocoa/Conceptual/Predicates/index.html#//apple_ref/doc/uid/TP40001789" target="_top">Predicate Programming Guide</a></em>. </p><a name="//apple_ref/doc/uid/TP40006853-SW3" title="The Predicate Builder"></a><h2>The Predicate Builder</h2><p>You access the predicate builder by clicking the "Edit Predicate" button that appears in the detail pane for fetched properties and for fetch request templates (see <span class="content_text"><a href="xcdBrowserView.html#//apple_ref/doc/uid/TP40006857-SW1">“The Browser View”</a></span> and <span class="content_text"><a href="xcdBrowserView.html#//apple_ref/doc/uid/TP40006857-SW3">Figure 1</a></span> respectively).</p><br/><div><a name="//apple_ref/doc/uid/TP40006853-SW2" title="Figure 1Fetched property detail pane"></a><p><strong>Figure 1&nbsp;&nbsp;</strong>Fetched property detail pane</p><img src = "../Art/fetchedPropertyDetail.jpg" alt = "" ></div><br/><p>Using the predicate builder, you can build predicates of arbitrary complexity. The initial display shows a simple comparison predicate. The left-hand side is pop-up menu that allows you to choose the key used in a key path expression, the right-hand side is a text field that allows you to specify a constant value, and between them is a pop-up menu that allows you to choose a comparison operator. Note that <em>for a fetched property you must specify the destination entity before you edit the predicate</em>, otherwise the predicate builder does not display any properties.</p><br/><div><a name="//apple_ref/doc/uid/TP40006853-SW4" title="Figure 2The predicate builder"></a><p><strong>Figure 2&nbsp;&nbsp;</strong>The predicate builder</p><img src = "../Art/predicateBuilder.jpg" alt = "" ></div><br/><a name="//apple_ref/doc/uid/TP40006853-SW5" title="Left-Hand Side"></a><h2>Left-Hand Side</h2><p>The key pop-up menu, shown in <span class="content_text">Figure 3</span>, displays attributes of the entity with which the predicate is associated. You can choose Expression to replace the pop-up menu-based expression editor with a free-form text field editor—see <span class="content_text"><a href="xcdBrowserView.html#//apple_ref/doc/uid/TP40006857-SW13">“Properties table.”</a></span></p><br/><div><a name="//apple_ref/doc/uid/TP40006853-BAJJGBCH" title="Figure 3Predicate keys"></a><p><strong>Figure 3&nbsp;&nbsp;</strong>Predicate keys</p><img src = "../Art/predicateLHS.jpg" alt = "Predicate keys" ></div><br/><p>To use a key path (that is, to follow relationships), choose the Select Key item in the key pop-up menu. This displays a browser, shown in <span class="content_text">Figure 4</span>, from which you can choose the key or key path you want. </p><br/><div><a name="//apple_ref/doc/uid/TP40006853-BAJHGGHH" title="Figure 4Adding a key path"></a><p><strong>Figure 4&nbsp;&nbsp;</strong>Adding a key path</p><img src = "../Art/predicateKeypath.jpg" alt = "Adding a key path" ></div><br/><a name="//apple_ref/doc/uid/TP40006853-SW6" title="Right-Hand Side"></a><h2>Right-Hand Side</h2><p>You change the type of the right-hand side expression using the contextual menu shown in <span class="content_text">Figure 5</span> (you must Control-click “empty space” in the line of the criteria—for example, at the end of the line or between the pop-up menus). This changes the constant value field into a variable field or a key pop-up menu as appropriate. </p><br/><div><a name="//apple_ref/doc/uid/TP40006853-BAJHFFBH" title="Figure 5Right-hand side expression type"></a><p><strong>Figure 5&nbsp;&nbsp;</strong>Right-hand side expression type</p><img src = "../Art/predicateRHS.jpg" alt = "Right-hand side expression type" ></div><br/><p>In addition to a constant value, you can also define the right-hand side of a comparison predicate to be a variable or another key. You use this if you are creating either a fetch request template that requires substitution variables or defining a fetched property and need to use the <code>$FETCH_SOURCE</code> or <code>$FETCHED_PROPERTY</code> variables in the predicate.</p><a name="//apple_ref/doc/uid/TP40006853-SW7" title="Compound Predicates"></a><h2>Compound Predicates</h2><p>You can add logical operators (AND, NOT, and OR) to create compound predicates of arbitrary depth and complexity. To add a specific logical operator, use the contextual menu shown in <span class="content_text">Figure 6</span>. </p><br/><div><a name="//apple_ref/doc/uid/TP40006853-BAJGFBBG" title="Figure 6Creating a compound predicate"></a><p><strong>Figure 6&nbsp;&nbsp;</strong>Creating a compound predicate</p><img src = "../Art/predicateCompound.jpg" alt = "Creating a compound predicate" ></div><br/><p>You can also add peer predicates by either clicking the plus (+) button, or choosing Add Criteria in the contextual menu—these add an AND operator. You can change the logical operator using the pop-up menu.</p><p>You can rearrange the predicate hierarchy by dragging a row or part of the predicate hierarchy.</p><p>To remove a predicate, click the minus (−) button, or use the contextual menu. The predicate builder will try to rebuild the remaining predicate as it can, removing comparison operators where appropriate. </p><a name="//apple_ref/doc/uid/TP40006853-SW8" title="Expressions"></a><h2>Expressions</h2><p>To replace the pop-up menu-based expression editor with a free-form text field editor, you can choose Expression from the left-hand side key pop-up menu shown in <span class="content_text"><a href="xcdPredicateBuilder.html#//apple_ref/doc/uid/TP40006853-BAJJGBCH">Figure 3</a></span>. The text field allows you to create more complex expressions that include, for example, functions such as <code>sum</code> and <code>avg</code>. <span class="content_text"><a href="xcdBrowserView.html#//apple_ref/doc/uid/TP40006857-SW14">“Displaying columns”</a></span> shows a simple predicate that you could use for a fetch request template to fetch departments where the sum of the salaries of the employees is greater than a given amount.</p><br/><div><a name="//apple_ref/doc/uid/TP40006853-SW9" title="Figure 7The expression editor"></a><p><strong>Figure 7&nbsp;&nbsp;</strong>The expression editor</p><img src = "../Art/predicateExpressionEditor.jpg" alt = "The expression editor" ></div><br/><p>You would use the template as shown in the following code fragment.</p><div class="codesample"><table><tr><td scope="row"><pre>NSFetchRequest *fetchRequest = [theManagedObjectModel<span></span></pre></td></tr><tr><td scope="row"><pre>        fetchRequestFromTemplateWithName:@"departmentsExceedingSalaryAverage"<span></span></pre></td></tr><tr><td scope="row"><pre>        substitutionVariables:[NSDictionary dictionaryWithObject:salaryAverage forKey:@"salaryAverage"]];<span></span></pre></td></tr></table></div><p>For more about fetch request templates, see <span class="content_text"><a href="../../../../Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793" target="_top">Creating Predicates</a></span> and the reference documentation for <code><a href="../../../../Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html#//apple_ref/occ/cl/NSManagedObjectModel" target="_top">NSManagedObjectModel</a></code>. For more about fetched properties, see the reference documentation for <code><a href="../../../../Cocoa/Reference/CoreDataFramework/Classes/NSFetchedPropertyDescription_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFetchedPropertyDescription" target="_top">NSFetchedPropertyDescription</a></code>.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="xcdDiagramView.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="xcdCodeGeneration.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-04-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/XcodeCoreDataTools/Articles/xcdPredicateBuilder.html%3Fid%3DTP40006846-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/XcodeCoreDataTools/Articles/xcdPredicateBuilder.html%3Fid%3DTP40006846-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/XcodeCoreDataTools/Articles/xcdPredicateBuilder.html%3Fid%3DTP40006846-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

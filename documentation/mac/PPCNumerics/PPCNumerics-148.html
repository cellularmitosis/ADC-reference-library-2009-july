<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Load and Store Instructions(IM:PN)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING148></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCNumerics-147.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-149.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCNumerics-2.html"><B>PowerPC Numerics </B></A> / <A HREF="PPCNumerics-144.html"><B>Part 3 - Numerics in PowerPC Assembly Language</B></A><BR><DD><A HREF="PPCNumerics-145.html"><B>Chapter 11 - Introduction to Assembly-Language Numerics</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING148-0></A>
<H1>Load and Store Instructions</H1>
 <A NAME=MARKER-2-22></A>Before you perform any floating-point computation, you must load a value into a floating-point register. To do this, use one of the load instructions. Load instructions load either single or double floating-point numbers from memory into floating-point registers. Store instructions take the contents of a floating-point register and store them in memory.<P>
 <A NAME=MARKER-2-24></A>Load and store instructions take one of two forms depending on which address mode is used. The first form is<A NAME=MARKER-2-33></A><P>
 <I>instr   FPR, D(GPR)</I><P>
<DL>
<DT><I>instr</I>
<DD> Specifies which type of load or store is to be performed.
<DT><I>FPR</I>
<DD> A floating-point register, which is either the source or the destination for the operation, depending on whether it is a load or a store.
<DT><I>D</I>
<DD> A 16-bit signed integer value.
<DT><I>GPR</I>
<DD> A general-purpose register or the value 0. 
</DL>
 The <I>D</I>(<I>GPR</I>) part of the instruction determines the memory address involved. If <I>GPR</I> is not 0, it is interpreted as a general-purpose register and the contents of register <I>GPR</I> are added to the value <I>D</I> to produce the memory address. If <I>GPR</I> is 0, it is interpreted as the value 0 rather than as register GPR0, so 0 is added to <I>D</I> to produce the memory address.<P>
 Load instructions of this form are interpreted as <I>FPR</I> <EM>\xC6</EM> (<I>D</I> + (<I>GPR</I>)), which means that the instruction loads into <I>FPR</I> the contents of the memory address obtained by adding <I>D</I> to the contents of <I>GPR</I> (unless <I>GPR</I> is 0).<P>
 Store instructions of this form are interpreted as <I>D</I> + (<I>GPR</I>) <EM>\xC6</EM> (<I>FPR</I>), which means that the instruction stores the contents of <I>FPR</I> at the memory address obtained by adding <I>D</I> to the contents of <I>GPR</I> (unless <I>GPR</I> is 0).<P>
 The second form for load and store operations uses a different address mode:<P>
 <I>instr   FPR<CODE>, GPR1, GPR2</CODE></I> <P>
<DL>
<DT><I>instr</I>
<DD> Specifies which type of load or store is to be performed.
<DT><I>FPR</I>
<DD> A floating-point register, which is either the source or the destination for the operation, depending on whether it is a load or a store.
<DT><I>GPR1</I>
<DD>  A general purpose register or the value 0.
<DT><I>GPR2</I>
<DD> A general-purpose register. 
</DL>
 <I>GPR1</I> and <I>GPR2</I> determine the memory address involved. If <I>GPR1</I> is not 0, it is interpreted as a general-purpose register, and the contents of register <I>GPR1</I> are added to the contents of register <I>GPR2</I> to produce the memory address. If <I>GPR1</I> is 0, it is interpreted as the value 0 rather than as register GPR0, so 0 is added to the contents of register <I>GPR2</I> to produce the memory address.<P>
 Load instructions of this form are interpreted as <I>FPR</I> <EM>\xC6</EM> ((<I>GPR1</I>) + (<I>GPR2</I>)) unless <I>GPR1</I> is 0.<P>
 Store instructions of this form are interpreted as (<I>GPR1</I>) + (<I>GPR2</I>) <EM>\xC6</EM> (<I>FPR</I>) unless <BR><I>GPR1</I> is 0.<A NAME=MARKER-2-34></A><P>
 <A HREF=#MARKER-9-1>Table 11-1</A> lists and describes the PowerPC load and store instructions. There are two load and two store instructions for each address mode. One version simply performs <BR>the load or store, and the other version puts the effective memory address into the general-purpose register specified in the instruction (shown as R<I>n</I> in the table).<P>
 Each of the load and store instructions has a single and a double form, making a total of eight load and eight store instructions. If the single form of a load instruction is used, the number is converted to double format before the load is performed. If the single form of a store instruction is used, the number is converted to single format before it is stored. See <A HREF=PPCNumerics-156.html#MARKER-9-10>Chapter 13, "Assembly-Language Numeric Conversions,"</A> for more information about conversions performed during load and store operations.<P>
 None of the load and store instructions raise floating-point exceptions or make special cases of zeros, NaNs, or Infinities.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-1></A><B>Table 11-1 Load and store floating-point instructions</B> </CAPTION>
<TH>Address<BR>mode<TH>Instruction syntax<TH>Operation<TR>
<TD><I>d</I>(R<I>n</I>)<TD><CODE>lfd <I>DST,</I></CODE> <I>n<CODE>(GPR)</CODE></I> <CODE><A NAME=MARKER-2-10></A></CODE><TD>Load double format<TR>
<TD>&nbsp;<TD><CODE>stfd <I>SRC, n(GPR)</I></CODE> <CODE><A NAME=MARKER-2-54></A></CODE><TD>Store double format<TR>
<TD>&nbsp;<TD><CODE>lfs <I>DST, n(GPR)</I></CODE> <CODE><A NAME=MARKER-2-55></A></CODE><TD>Load single format<TR>
<TD>&nbsp;<TD><CODE>stfs <I>SRC, n(GPR)</I></CODE> <CODE><A NAME=MARKER-2-48></A></CODE><TD>Store single format<TR>
<TD>&nbsp;<TD><CODE>lfdu <I>DST,</I></CODE> <I>n<CODE>(GPR)</CODE></I> <CODE><A NAME=MARKER-2-8></A></CODE><TD>Load double format and update<TR>
<TD>&nbsp;<TD><CODE>stfdu <I>SRC, n(GPR)</I></CODE> <CODE><A NAME=MARKER-2-57></A></CODE><TD>Store double format and update<TR>
<TD>&nbsp;<TD><CODE>lfsu <I>DST, n(GPR)</I></CODE> <CODE><A NAME=MARKER-2-62></A></CODE><TD>Load single format and update<TR>
<TD>&nbsp;<TD><CODE>stfsu <I>SRC, n(GPR)</I></CODE> <CODE><A NAME=MARKER-2-9></A></CODE><TD>Store single format and update<TR>
<TD>R<I>n</I>, R<I>m</I><TD><CODE>lfdx <I>DST,</I></CODE> <I>GPR1<CODE>, GPR2</CODE></I> <CODE><A NAME=MARKER-2-10></A></CODE><TD>Load double format indexed<TR>
<TD>&nbsp;<TD><CODE>stfdx <I>SRC, GPR1, GPR2</I></CODE> <CODE><A NAME=MARKER-2-49></A></CODE><TD>Store double format indexed<TR>
<TD>&nbsp;<TD><CODE>lfsx <I>DST,</I></CODE> <I>GPR1<CODE>,GPR2</CODE></I> <CODE><A NAME=MARKER-2-77></A></CODE><TD>Load single format indexed<TR>
<TD>&nbsp;<TD><CODE>stfsx <I>SRC, GPR1, GPR2</I></CODE> <CODE><A NAME=MARKER-9-20></A></CODE><TD>Store single format indexed<TR>
<TD>&nbsp;<TD><CODE>lfdux <I>DST, GPR1, GPR2</I></CODE> <CODE><A NAME=MARKER-2-11></A></CODE><TD>Load double format and update indexed<TR>
<TD>&nbsp;<TD><CODE>stfdux <I>SRC, GPR1, GPR2</I></CODE> <CODE><A NAME=MARKER-2-15></A></CODE><TD>Store double format and update indexed<TR>
<TD>&nbsp;<TD><CODE>lfsux <I>DST, GPR1, GPR2</I></CODE> <CODE><A NAME=MARKER-2-16></A></CODE><TD>Load single format and update indexed<TR>
<TD>&nbsp;<TD><CODE>stfsux <I>SRC, GPR1, GPR2</I></CODE> <CODE><A NAME=MARKER-2-28></A></CODE><TD>Store single format and update indexed<A NAME=MARKER-2-12></A></TABLE>
<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="PPCNumerics-147.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-149.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="PPCNumerics-3.html">&copy; Apple Computer, Inc.</A><br>13 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

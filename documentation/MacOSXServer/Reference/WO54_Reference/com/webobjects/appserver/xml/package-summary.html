<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_07) on Tue Oct 09 08:59:25 PDT 2007 -->
<TITLE>
com.webobjects.appserver.xml (WebObjects 5.4 Reference)
</TITLE>

<META NAME="date" CONTENT="2007-10-09">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.webobjects.appserver.xml (WebObjects 5.4 Reference)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

				WebObjects 5.4
			</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/webobjects/appserver/parser/woml/namespaces/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/webobjects/directtoweb/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/webobjects/appserver/xml/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.webobjects.appserver.xml
</H2>
Provides for encoding and decoding of XML data.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/webobjects/appserver/xml/WOXMLCoding.html" title="interface in com.webobjects.appserver.xml">WOXMLCoding</A></B></TD>
<TD>This interface allows WOXMLCoder, when used without a mapping model, to encode the class that
 implements this interface as XML data.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/webobjects/appserver/xml/WOXMLCoder.html" title="class in com.webobjects.appserver.xml">WOXMLCoder</A></B></TD>
<TD>This class is used to encode objects as XML data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/webobjects/appserver/xml/WOXMLDecoder.html" title="class in com.webobjects.appserver.xml">WOXMLDecoder</A></B></TD>
<TD>Use this class to decode an object from XML data.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Exception Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/webobjects/appserver/xml/WOXMLException.html" title="class in com.webobjects.appserver.xml">WOXMLException</A></B></TD>
<TD>This class serves to wrap a number of exceptions that can arise during the parsing process, reducing the number of exceptions your code has to catch.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.webobjects.appserver.xml Description
</H2>

<P>
Provides for encoding and decoding of XML data.

<h2>Introduction</h2>
<p>The XML framework consists of two main classes-WOXMLCoder and WOXMLDecoder-which can encode and decode objects as XML. These classes can also be used to parse or generate XML data from an external source (such as the World Wide Web). When working with such "foreign" XML, you describe the XML elements and properties and their mapping to objects in an XML-format "mapping model" that you can create with either a text editor or an XML editor.</p>
<p>The mapping model provides greater control over the decoding process and is typically used when you are encoding and decoding XML that is destined for, or originates from, an external source. When the WOXMLCoder and WOXMLDecoder are used as a simple archiving mechanism, the mapping model is usually not necessary. See <a href="#BAAJGIAH">"The Format of the Mapping Model"</a> for more information on the contents and structure of the mapping model.</p>
<p>When encoding and decoding a custom object using the WOXMLCoder and WOXMLDecoder classes without a mapping model, your custom class needs to:</p>
<ul>
        <li>implement <code>encodeWithWOXMLCoder</code> declared in the WOXMLCoding interface (your implementation of this method is where you encode the custom class's instance variables)</li>
        <li>implement the single-argument constructor described in the WOXMLDecoder class description</li>
</ul>
<p>You don't need to do the above if you are working with a mapping model or the object you are encoding and decoding is:
<ul>
        <li>an instance of String, Number, Boolean and NSTimestamp. Subclasses of these classes will be treated like their superclass, unless you explicitly implement the WOXMLCoding interface.</li>
        <li>an instance of NSArray, NSDictionary and NSData. Please note that before WebObject 5.1, when the mutable forms of these classes (NSMutableArray, NSMutableDictionary and NSMutableData) are encoded using WOXMLCoder, they get written out as their immutable counterparts. For example, NSMutableArray used to be written out as NSArray.  Now, they get written out as themselves. As a result, when WOXMLDecoder is used to decode mutable objects, they are decoded as mutable forms.</li>
        <li>an instance of EOEnterpriseObject (or a subclass, providing that all instance variables are either attributes or relationships).</li>
</ul>
</p>
<p>Exceptions raised by the underlying SAX parser are, for simplicity's sake, wrapped in a WOXMLException object, greatly reducing the number of exceptions your code needs to catch.</p>
<p>
<a name="BAAJGIAH"></a>
<h2>The Format of the Mapping Model</h2>
<p>The mapping model can be created manually with a text editor or an XML editor. It is simply a text file that consists of one or more &lt;entity> elements, each of which can enclose zero or more &lt;property> elements, all enclosed within a single root &lt;model> element.</p>
The following is a simple mapping model:
<pre>
<blockquote>

&lt;model>
        &lt;entity name="Command" xmlTag="command">
                &lt;property name="qty" xmlTag="quantity" attribute="YES"/>
                &lt;property name="movie" xmlTag="movie"/>
                &lt;property name="customer" xmlTag="customer"/>
        &lt;/entity>
        &lt;entity name="MyMovie" xmlTag="movie">
                &lt;property name="title" xmlTag="name" attribute="YES"/>
                &lt;property name="dateReleased" xmlTag="date">
                &lt;property name="roles" xmlTag="role">
                &lt;property name="category" xmlTag="cat"/>
        &lt;/entity>
        &lt;entity name="com.webobjects.eocontrol.EOGenericRecord" xmlTag="role">
                &lt;property name="roleName" xmlTag="name" attribute="YES"/>
        &lt;/entity>
&lt;/model>
</blockquote>
</pre>
<p>When creating a mapping model, be aware that mappings must be unique for a given property when decoding (that is, you cannot have two mappings for the same property). The same applies for XML tags when encoding: you cannot have two mappings for the same XML tag.</p>

<h3>The &lt;model> element</h3>
<p>The &lt;model> element is the root element of the mapping file and it contains the mapping information. It has no attributes. The &lt;model> element must contain at least one &lt;entity> element.</p>
<p>
<h3>The &lt;entity> element</h3>
<p>The &lt;entity> element describes the relationship between the generated XML data and the encoded objects. The first &lt;entity> element describes the root element of the generated XML data. Subsequent &lt;entity> elements are usually required to complete the description of the root element. It has two required attributes and a number of optional ones:</p>
<ul>
<li><code>name=</code><em>property</em> (required)<br/>
The type name for the encoded object, for example the MyMovie class. Usually, this is the name of the property on the key-value coding side (the name of the class, name of the attribute of the enterprise object in the EOModel, or dictionary key to which the XML data is to be mapped).</li>
<li><code>xmlTag=</code><em>tag</em> (required)<br/>
The XML tag that appears in the generated data. This tag corresponds to the entity that is currently being described.</li>
<li><code>ignoreUnmappedTags="YES" | "NO"</code> (optional)<br/>
This attribute is useful only during decoding.<br/>
<code>"NO"</code> causes a WOXMLException to be thrown if <code>unmappedTagsKey</code> isn't specified and, while parsing the XML for the entity, an XML tag is encountered for which there is no specified mapping in the mapping model. No exception is thrown if <code>"YES"</code> is specified or if the entity object being decoded is an NSDictionary.<br/>
Default is <code>"NO".</code></li>
<li><code>unmappedTagsKey=</code><em>key</em> (optional)<br/>
This attribute is useful only during decoding.<br/>
The name of the property on the key-value coding side to be used when, while parsing the XML for the entity, an XML tag is encountered for which there is no specified mapping in the mapping model. Note the value to be given for the key-value coding is an NSDictionary, for example, <code>'{ quantity = "9"; }'</code>. The developer has to deal with this as such.</li>
<li><code>contentsKey=</code><em>key</em>(optional)<br/>
This attribute is useful only during decoding.<br/>
The property name to be used for text enclosed by the &lt;entity> element being parsed. For example, if the mapping model contained the following:
<pre>
<blockquote>
...
&lt;entity name="com.webobjects.foundation.NSMutableDictionary" xmlTag="text" contentsKey="contents" />
...</blockquote>
</pre>
<p>and if the following was encountered while parsing XML:</p>
<pre>
<blockquote>
&lt;text>Hello, &lt;b>World!&lt;/b>&lt;/text></blockquote>
</pre>
<p>an NSMutableDictionary object would be created with a single key-value pair: the key "contents" would have as its value an NSMutableArray containing two elements: the string "Hello, " and a dictionary with a single key-value pair: the key "b" would have as its value the string "World!".</p>
When this attribute is specified, it is not necessary to create &lt;property> elements for this &lt;entity> element since they are not used anyway. Instead, ensure that there is a key-value coding pair for the <em>key</em> and that the value is dealt with as an NSMutableArray.
</li>
</ul>
<h3>The &lt;property> element</h3>
<p>Within an &lt;entity> element, you can have zero or more &lt;property> elements. It describes the mapping between the entity object's property and the XML data to be generated for that property. Each entity object's property is a key-value coding pair whose value will end up as XML data. A &lt;property> element has two required attributes and a few optional ones:</p>
<ul>
<li><code>name=</code><em>key</em> (required)<br/>
The name of the key of the key-value coding pair representing the property.</li>
<li><code>xmlTag=</code><em>tag</em> (required)<br/>
The XML tag that appears in the generated data. This tag corresponds to the property that is currently being described. If this property's type is actually a class, for example MyMovie, then an &lt;entity> element has to be defined later to complete the full description. The chaining is done using this &lt;xmlTag>. Using the previous example, the entity <code>Command</code> has a property <code>movie</code>. Since <code>movie</code> is actually an object of class MyMovie, it is further described using another &lt;entity> element.</li>
<li><code>attribute="YES" | "NO"</code> (optional)<br/>
This attribute is useful only during encoding.<br/>
<code>"YES"</code> causes this property to be encoded as an attribue of the enclosing &lt;entity> element instead of the usual sub-element. For example, if <code>attribute="YES"</code> was specified for the <code>movie</code> property, it will be encoded as: 
<pre>
<blockquote>
        &lt;command movie="someValue" ... &lt;/command>
</blockquote>
</pre>
instead of:
<pre>
<blockquote>
        &lt;command>
                ...
                &lt;movie>someValue&lt;/movie>
                ...
        &lt;/command>
</blockquote>
</pre>
Default is <code>"NO".</code>
</li>
<li><code>forceList="YES" | "NO"</code> (optional)<br/>
This attribute is useful only during decoding.<br/>
When parsing for the value of the property, a single enclosed value is decoded as an object of the appropriate type or as a String (if there is no further &lt;entity> element mapping for the value). This is the default behavior (when <code>forceList="NO"</code>). <code>"YES"</code> causes a single enclosed element to be decoded as an NSMutableArray with a single object of the appropriate type. For example, if we have an XML segment like this:
<pre>
<blockquote>
        &lt;property_foo>
          &lt;type_bar>some_Value&lt;/type_bar>
        &lt;/property_foo>
</blockquote>
</pre>
by default, decoding will result in a key-value coding call with key <code>property_foo</code> and value an object of type <code>type_bar</code>. But <code>forceList="YES"</code> causes the value in this instance to become an NSMutableArray containing a single object of type <code>type_bar</code>.<br/>

<p>Note that decoding an XML structure like the following:</p>
<pre>
<blockquote>
        &lt;property_foo>
          &lt;type_bar>value1&lt;/type_bar>
          &lt;type_bar>value2&lt;/type_bar>
        &lt;/property_foo>
</blockquote>
</pre>
<p>always results in a key-value coding call with key <code>property_foo</code> and value an NSMutableArray containing the two <code>type_bar</code> objects.</p>
Default is <code>"NO".</code>
</li>
<li><code>codeBasedOn="TAG"</code> (optional)<br/>
This attribute is useful only during decoding.<br/>
The WOXMLCoder normally uses the value of the property's name attribute as the key during key-value coding. This is the desired behavior in most situations since the name attribute typically indicates the name of an instance variable in a custom class. When working with NSDictionary objects, however, you may instead want to use the value of the xmlTag attribute as the key. To do this, specify <code>codeBasedOn="TAG"</code> in the property's list of attributes.</li>
<li><code>reportEmptyValues="YES" | "NO"</code> (optional)<br/>
This attribute is useful only during decoding.<br/>
When an empty element is encountered while decoding XML (for instance, <code>&lt;myElement>&lt;/myElement></code>), the WOXMLDecoder creates an empty NSDictionary object by default. Setting <code>reportEmptyValues</code> to <code>"NO"</code> prevents this empty object from being created.<br/>
Default is <code>"YES".</code></li>
<li><code>outputTags="class" | "property" | "both" | "neither"</code> (optional)<br/>
This attribute is useful only during encoding.<br/>
It specifies which XML tag specified in the mapping model should be output for the given property. <code>property</code>, the default, specifies that the property's XML tag should be output. <code>class</code> specifies that the XML tag associated with the property's enclosing class should be output instead. <code>both</code> indicates that both the property and the class tags should be output, and <code>neither</code> indicates that neither XML tag should be placed in the XML.</p>
<p>To illustrate the use of the outputTags attribute, the following mapping model could be used to produce HTML tags from an NSMutableDictionary object:</p>
<pre>
<blockquote>
&lt;model>
  &lt;entity name="com.webobjects.foundation.NSMutableDictionary" xmlTag="text">
    &lt;property name="p" xmlTag="ignore" outputTags="neither"/>
  &lt;/entity>
  &lt;entity name="Paragraph" xmlTag="p">
    &lt;property name="text.contents" xmlTag="text" outputTags="class"/>
  &lt;/entity>
  &lt;entity name="ItemList" xmlTag="ul">
    &lt;property name="contents" xmlTag="li" outputTags="both"/>
  &lt;/entity>
  &lt;entity name="Item" xmlTag="item">
    &lt;property name="contents" xmlTag="ignore" outputTags="class"/>
  &lt;/entity>
  &lt;entity name="LineBreak" xmlTag="br"/>
  &lt;entity name="ExternalLink" xmlTag="a">
    &lt;property name="url" xmlTag="href" attribute="YES"/>
    &lt;property name="anchorText" xmlTag="ignore" outputTags="neither"/>
  &lt;/entity>
&lt;/model>
</blockquote>
</pre>
</li>
</ul>
<h2>Package Specification</h2>


<h2>Related Documentation</h2>

<!-- Put @see and @since tags down here. -->
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

				<i>Last updated Tuesday, October 9, 2007 08:58 PDT</i>
			</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/webobjects/appserver/parser/woml/namespaces/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/webobjects/directtoweb/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/webobjects/appserver/xml/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

				<b>Copyright &copy; 2000-2007 Apple Inc.</b>
			
</BODY>
</HTML>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Power Manager(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING230></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-229.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-231.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / </DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING230-0></A>
<H1>Chapter 6 - Power Manager</H1>
 <EM><A NAME=MARKER-2-41></A></EM><A NAME=MARKER-2-42></A>This chapter describes the Power Manager, the part of the Macintosh Operating System that controls power to the internal hardware devices of battery-powered Macintosh computers (such as the Macintosh Portable, the Macintosh PowerBook computers, and the Macintosh Duo computers)<P>
 The Power Manager automatically shuts off power to internal devices to conserve power whenever the computer has not been used for a predetermined amount of time. In addition, the Power Manager allows your application or other software to<P>
<UL>
<LI>install a procedure that is executed when power to internal devices is about to be shut off or when power has just been restored
<LI>set a timer to wake up the computer at some time in the future
<LI>set or disable the wakeup timer and read its current setting
<LI>enable, disable, or delay the CPU idle feature
<LI>read the current CPU clock speed
<LI>control power to the internal modem and serial ports
<LI>read the status of the internal modem
<LI>read the state of the battery charge and the status of the battery charger<P>
</UL>
 Most applications do not need to know whether they are executing on a battery-powered Macintosh computer because the transition between power states is largely invisible. As a result, most applications do not need to use Power Manager routines. You need the information in this chapter only if you are writing a program--such as a device driver--that must control power to some subsystem of a battery-powered Macintosh computer or that might be affected by the idle or sleep state. See <A HREF=Devices-231.html#MARKER-9-43>"About the Power Manager," beginning on page 6-4</A>, for a complete description of these power conservation states.<P>
 The Power Manager is available only in system software version 6.0.4 and later versions. You should use the <CODE>Gestalt</CODE> function to determine whether the Power Manager is available before calling it. See <A HREF=Devices-232.html#MARKER-9-103>"Determining Whether the Power Manager Is Present," on page 6-14</A>, for more information.<P>
 To use this chapter, you might need to be familiar with techniques for accessing information in your application's A5 world. The chapter "Introduction to Memory Management" in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I> describes the A5 world and the routines you can use to manipulate the A5 register. This chapter provides complete code samples that illustrate how to access your application's A5 world in a sleep procedure. If you wish to display a dialog box from a sleep procedure, you also need to know about the Dialog Manager. See the chapter "Dialog Manager" in <I><A HREF ="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>.<P>
 This chapter begins with a preliminary description of the power conservation states controlled by the Power Manager and of the relationship between the power management hardware and software in portable Macintosh computers. It then discusses the power conservation states and the sleep queue in greater detail. The section <A HREF=Devices-232.html#MARKER-9-101>"Using the Power Manager," beginning on page 6-13</A>, describes how to use Power Manager routines to control the power conservation states and how to write and install sleep procedures.<P>
 The reference section is divided into three sections. The first section describes the data structures used by Power Manager routines. The second section, <A HREF=Devices-240.html#MARKER-9-179>"Power Manager Routines,"</A> beginning on <A HREF=Devices-240.html#MARKER-9-179>page 6-28</A>, describes low-level Power Manager routines that you can use to control a variety of Power Manager functions. The third section, <A HREF=Devices-263.html#MARKER-9-265>"Power Manager Dispatch Routines,"</A> beginning on <A HREF=Devices-263.html#MARKER-9-265>page 6-40</A>, describes high-level Power Manager routines that isolate you from the need to read or write directly to the Power Manager's private data structures and to parameter RAM. The Power Manager dispatch routines provide access to most of the Power Manager's internal parameters. Where a Power Manager dispatch routine duplicates the function of another Power Manager routine, the dispatch routine provides the preferred interface.<P>
 Whereas the Pascal programming language interface is used to describe the Power Manager routines in <A HREF=Devices-240.html#MARKER-9-179>"Power Manager Routines,"</A> the C language interface is used for the newer routines described in <A HREF=Devices-263.html#MARKER-9-265>"Power Manager Dispatch Routines."</A> The section <A HREF=Devices-311.html#MARKER-9-374>"Summary of the Power Manager," beginning on page 6-67</A>, includes both Pascal and C interfaces for both sets of routines.<P>
<HR>
<B>Chapter </B><B>Contents</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Devices-231.html#HEADING231-0">About the Power Manager</A>
<DD>
<DL>
<DT><A HREF="Devices-231.html#HEADING231-23">The Power-Saver State</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-26">The Idle State</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-39">The Sleep State</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-52">The Sleep Queue</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-61">Sleep Requests</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-65">Sleep Demands</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-71">Wakeup Demands</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-73">Sleep-Request Revocations</A>
<DD>
<DT><A HREF="Devices-231.html#HEADING231-75">Power Manager Dispatch</A>
<DD>
</DL>
<DT><A HREF="Devices-232.html#HEADING232-0">Using the Power Manager</A>
<DD>
<DL>
<DT><A HREF="Devices-232.html#HEADING232-8">Determining Whether the Power Manager Is Present</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-13">Determining Whether the Power Manager Dispatch Routines are Present</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-19">Enabling or Disabling the Idle State</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-34">Setting, Disabling, and Reading the Wakeup Timer</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-45">Installing a Sleep Procedure</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-53">Using Application Global Variables in Sleep Procedures</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-64">Writing a Sleep Procedure</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-88">Switching Serial Power On and Off</A>
<DD>
<DT><A HREF="Devices-232.html#HEADING232-105">Monitoring the Battery and Battery Charger</A>
<DD>
</DL>
<DT><A HREF="Devices-233.html#HEADING233-0">Power Manager Reference</A>
<DD>
<DL>
<DT><A HREF="Devices-234.html#HEADING234-0">Data Structures</A>
<DD>
<DL>
<DT><A HREF="Devices-235.html#HEADING235-0">Sleep Queue Record</A>
<DD>
<DT><A HREF="Devices-236.html#HEADING236-0">Hard Disk Queue Structure</A>
<DD>
<DT><A HREF="Devices-237.html#HEADING237-0">Wakeup Time Structure</A>
<DD>
<DT><A HREF="Devices-238.html#HEADING238-0">Battery Information Structure</A>
<DD>
<DT><A HREF="Devices-239.html#HEADING239-0">Battery Time Structure</A>
<DD>
</DL>
<DT><A HREF="Devices-240.html#HEADING240-0">Power Manager Routines</A>
<DD>
<DL>
<DT><A HREF="Devices-241.html#HEADING241-0">Controlling the Idle State</A>
<DD>
<DT><A HREF="Devices-246.html#HEADING246-0">Controlling and Reading the Wakeup Timer</A>
<DD>
<DT><A HREF="Devices-250.html#HEADING250-0">Controlling the Sleep Queue</A>
<DD>
<DT><A HREF="Devices-253.html#HEADING253-0">Controlling Serial Power</A>
<DD>
<DT><A HREF="Devices-259.html#HEADING259-0">Reading the Status of the Internal Modem</A>
<DD>
<DT><A HREF="Devices-261.html#HEADING261-0">Reading the Status of the Battery and the Battery Charger</A>
<DD>
</DL>
<DT><A HREF="Devices-263.html#HEADING263-0">Power Manager Dispatch Routines</A>
<DD>
<DL>
<DT><A HREF="Devices-264.html#HEADING264-0">Determining the Power Manager Features Available</A>
<DD>
<DT><A HREF="Devices-267.html#HEADING267-0">Controlling the Sleep and Wakeup Timers</A>
<DD>
<DT><A HREF="Devices-274.html#HEADING274-0">Controlling the Dimming Timer</A>
<DD>
<DT><A HREF="Devices-279.html#HEADING279-0">Controlling the Hard Disk</A>
<DD>
<DT><A HREF="Devices-288.html#HEADING288-0">Getting Information About the Internal Batteries</A>
<DD>
<DT><A HREF="Devices-293.html#HEADING293-0">Controlling the Internal Modem</A>
<DD>
<DT><A HREF="Devices-296.html#HEADING296-0">Controlling the Processor</A>
<DD>
<DT><A HREF="Devices-303.html#HEADING303-0">Getting and Setting the SCSI ID</A>
<DD>
<DT><A HREF="Devices-306.html#HEADING306-0">Application-Defined Routines</A>
<DD>
<DT><A HREF="Devices-307.html#HEADING307-0">Sleep Procedures</A>
<DD>
<DT><A HREF="Devices-309.html#HEADING309-0">Hard Disk Spindown Function</A>
<DD>
</DL>
</DL>
<DT><A HREF="Devices-311.html#HEADING311-0">Summary of the Power Manager</A>
<DD>
<DL>
<DT><A HREF="Devices-311.html#HEADING311-1">Pascal Summary</A>
<DD>
<DL>
<DT><A HREF="Devices-311.html#HEADING311-2">Constants</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-11">Data Types</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-17">Power Manager Routines</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-40">Power Manager Dispatch Routines</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-83">Application-Defined Routines</A>
<DD>
</DL>
<DT><A HREF="Devices-311.html#HEADING311-86">C Summary</A>
<DD>
<DL>
<DT><A HREF="Devices-311.html#HEADING311-87">Constants and Data Types</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-103">Power Manager Functions</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-126">Power Manager Dispatch Functions</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-169">Application-Defined Functions</A>
<DD>
</DL>
<DT><A HREF="Devices-311.html#HEADING311-172">Assembly-Language Summary</A>
<DD>
<DL>
<DT><A HREF="Devices-311.html#HEADING311-173">Data Structures</A>
<DD>
<DT><A HREF="Devices-311.html#HEADING311-179">Trap Macros</A>
<DD>
</DL>
<DT><A HREF="Devices-311.html#HEADING311-184">Result Codes</A>
<DD>
</DL>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-229.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-231.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

<html><head><title>Mac OS X
 Manual Page For states(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/states" title="Mac OS X
 Manual Page for states(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/states"; name=states(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
STATES(1)                                          STATES                                          STATES(1)



<b>NAME</b>
       states - awk alike text processing tool


<b>SYNOPSIS</b>
       <b>states</b> [<b>-hV</b>] [<b>-D</b> <u>var</u><b>=</b><u>val</u>] [<b>-f</b> <u>file</u>] [<b>-o</b> <u>outputfile</u>] [<b>-s</b> <u>startstate</u>] [<b>-W</b> <u>level</u>] [<u>filename</u> ...]


<b>DESCRIPTION</b>
       <b>States</b>  is  an awk-alike text processing tool with some state machine extensions.  It is designed for
       program source code highlighting and to similar tasks where state information helps input processing.

       At a single point of time, <b>States</b> is in one state, each quite similar to awk's work environment, they
       have regular expressions which are matched from the input and actions which are executed when a match
       is found.  From the action blocks, <b>states</b> can perform state transitions; it can move to another state
       from which the processing is continued.  State transitions are recorded so <b>states</b> can return  to  the
       calling state once the current state has finished.

       The  biggest  difference  between <b>states</b> and awk, besides state machine extensions, is that <b>states</b> is
       not line-oriented.  It matches regular expression tokens from the input and  once  a  match  is  pro-<font color="#ffffff" class="whiteout">cessed,&nbsp;processed,</font>
       cessed,  it  continues processing from the current position, not from the beginning of the next input
       line.


<b>OPTIONS</b>
       <b>-D</b> <u>var</u><b>=</b><u>val</u><b>,</b> <b>--define=</b><u>var</u><b>=</b><u>val</u>
               Define variable <u>var</u> to have string value <u>val</u>.  Command line  definitions  overwrite  variable
               definitions found from the config file.

       <b>-f</b> <u>file</u><b>,</b> <b>--file=</b><u>file</u>
               Read  state definitions from file <u>file</u>.  As a default, <b>states</b> tries to read state definitions
               from file <b>states.st</b> in the current working directory.

       <b>-h,</b> <b>--help</b>
               Print short help message and exit.

       <b>-o</b> <u>file</u><b>,</b> <b>--output=</b><u>file</u>
               Save output to file <u>file</u> instead of printing it to <b>stdout</b>.

       <b>-s</b> <u>state</u><b>,</b> <b>--state=</b><u>state</u>
               Start execution from state <b>state</b>.  This definition overwrites start state resolved  from  the
               <b>start</b> block.

       <b>-V,</b> <b>--version</b>
               Print <b>states</b> version and exit.

       <b>-W</b> <u>level</u><b>,</b> <b>--warning=</b><u>level</u>
               Set the warning level to <u>level</u>.  Possible values for <u>level</u> are:

               <b>light</b>   light warnings (default)

               <b>all</b>     all warnings


<b>STATES</b> <b>PROGRAM</b> <b>FILES</b>
       <b>States</b>  program files can contain on <u>start</u> block, <u>startrules</u> and <u>namerules</u> blocks to specify the ini-<font color="#ffffff" class="whiteout">tial&nbsp;initial</font>
       tial state, <u>state</u> definitions and <u>expressions</u>.

       The <u>start</u> block is the main() of the <b>states</b> program, it is executed on script startup for each  input
       file  and  it  can  perform  any  initialization  the  script  needs.   It  normally  also  calls the
       <b>check_startrules()</b> and <b>check_namerules()</b> primitives which resolve the initial state  from  the  input
       file  name or the data found from the begining of the input file.  Here is a sample start block which
       initializes two variables and does the standard start state resolving:

              start
              {
                a = 1;
                msg = "Hello, world!";
                check_startrules ();
                check_namerules ();
              }

       Once the start block is processed, the input processing is continued from the initial state.

       The initial state is resolved by the information found from  the  <u>startrules</u>  and  <u>namerules</u>  blocks.
       Both  blocks  contain  regular expression - symbol pairs, when the regular expression is matched from
       the name of from the beginning of the input file, the initial state is  named  by  the  corresponding
       symbol.  For example, the following start and name rules can distinguish C and Fortran files:

              namerules
              {
                /.(c|h)$/    c;
                /.[fF]$/     fortran;
              }

              startrules
              {
                /- [cC] -/      c;
                /- fortran -/   fortran;
              }

       If  these  rules  are used with the previously shown start block, <b>states</b> first check the beginning of
       input file.  If it has string <b>-*-</b> <b>c</b> <b>-*-</b>, the file is assumed to contain C code and the processing  is
       started from state called <b>c</b>.  If the beginning of the input file has string <b>-*-</b> <b>fortran</b> <b>-*-</b>, the ini-<font color="#ffffff" class="whiteout">tial&nbsp;initial</font>
       tial state is <b>fortran</b>.  If none of the start rules matched, the name of the  input  file  is  matched
       with  the  namerules.  If the name ends to suffix <b>c</b> or <b>C</b>, we go to state <b>c</b>.  If the suffix is <b>f</b> or <b>F</b>,
       the initial state is fortran.

       If both start and name rules failed to resolve the start state, <b>states</b> just copies its input to  out-<font color="#ffffff" class="whiteout">put&nbsp;output</font>
       put unmodified.

       The start state can also be specified from the command line with option <b>-s</b>, <b>--state</b>.

       State definitions have the following syntax:

       <b>state</b> <b>{</b> <u>expr</u> {<u>statements</u>} ... }

       where  <u>expr</u> is: a regular expression, special expression or symbol and <u>statements</u> is a list of state-<font color="#ffffff" class="whiteout">ments.&nbsp;statements.</font>
       ments.  When the expression <u>expr</u> is matched from the input, the statement  block  is  executed.   The
       statement  block can call <b>states</b>' primitives, user-defined subroutines, call other states, etc.  Once
       the block is executed, the input processing is continued from  the  current  intput  position  (which
       might have been changed if the statement block called other states).

       Special  expressions  <b>BEGIN</b>  and  <b>END</b> can be used in the place of <u>expr</u>.  Expression <b>BEGIN</b> matches the
       beginning of the state, its block is called when the state is entered.  Expression  <b>END</b>  matches  the
       end of the state, its block is executed when <b>states</b> leaves the state.

       If  <u>expr</u>  is  a  symbol,  its  value  is looked up from the global environment and if it is a regular
       expression, it is matched to the input, otherwise that rule is ignored.

       The <b>states</b> program file can also have top-level expressions, they are  evaluated  after  the  program
       file is parsed but before any input files are processed or the <u>start</u> block is evaluated.


<b>PRIMITIVE</b> <b>FUNCTIONS</b>
       <b>call</b> <b>(</b><u>symbol</u><b>)</b>
               Move  to  state  <u>symbol</u> and continue input file processing from that state.  Function returns
               whatever the <b>symbol</b> state's terminating <b>return</b> statement returned.

       <b>check_namerules</b> <b>()</b>
               Try to resolve start state from <b>namerules</b> rules.  Function  returns  <b>1</b>  if  start  state  was
               resolved or <b>0</b> otherwise.

       <b>check_startrules</b> <b>()</b>
               Try  to  resolve  start  state  from <b>startrules</b> rules.  Function returns <b>1</b> if start state was
               resolved or <b>0</b> otherwise.

       <b>concat</b> <b>(</b><u>str</u><b>,</b> <b>...)</b>
               Concanate argument strings and return result as a new string.

       <b>float</b> <b>(</b><u>any</u><b>)</b>
               Convert argument to a floating point number.

       <b>getenv</b> <b>(</b><u>str</u><b>)</b>
               Get value of environment variable <u>str</u>.  Returns an empty string if variable <u>var</u> is undefined.

       <b>int</b> <b>(</b><u>any</u><b>)</b>
               Convert argument to an integer number.

       <b>length</b> <b>(</b><u>item</u><b>,</b> <b>...)</b>
               Count the length of argument strings or lists.

       <b>list</b> <b>(</b><u>any</u><b>,</b> <b>...)</b>
               Create a new list which contains items <u>any</u>, ...

       <b>panic</b> <b>(</b><u>any</u><b>,</b> <b>...)</b>
               Report a non-recoverable error and exit with status <b>1</b>.  Function never returns.

       <b>print</b> <b>(</b><u>any</u><b>,</b> <b>...)</b>
               Convert arguments to strings and print them to the output.

       <b>range</b> <b>(</b><u>source</u><b>,</b> <u>start</u><b>,</b> <u>end</u><b>)</b>
               Return a sub-range of <u>source</u> starting from position <u>start</u> (inclusively) to <u>end</u> (exclusively).
               Argument <u>source</u> can be string or list.

       <b>regexp</b> <b>(</b><u>string</u><b>)</b>
               Convert string <u>string</u> to a new regular expression.

       <b>regexp_syntax</b> <b>(</b><u>char</u><b>,</b> <u>syntax</u><b>)</b>
               Modify regular expression character syntaxes by assigning new  syntax  <u>syntax</u>  for  character
               <u>char</u>.  Possible values for <u>syntax</u> are:

               <b>'w'</b>     character is a word constituent

               <b>'</b> <b>'</b>     character isn't a word constituent

       <b>regmatch</b> <b>(</b><u>string</u><b>,</b> <u>regexp</u><b>)</b>
               Check  if  string <u>string</u> matches regular expression <u>regexp</u>.  Functions returns a boolean suc-<font color="#ffffff" class="whiteout">cess&nbsp;success</font>
               cess status and sets sub-expression registers <b>$</b><u>n</u>.

       <b>regsub</b> <b>(</b><u>string</u>, <u>regexp</u><b>,</b> <u>subst</u><b>)</b>
               Search regular expression <u>regexp</u> from string <u>string</u> and replace the matching  substring  with
               string  <u>subst</u>.   Returns  the resulting string.  The substitution string <u>subst</u> can contain <b>$</b><u>n</u>
               references to the <u>n</u>:th parenthesized sup-expression.

       <b>regsuball</b> <b>(</b><u>string</u>, <u>regexp</u><b>,</b> <u>subst</u><b>)</b>
               Like <b>regsub</b> but replace all matches of regular expression  <u>regexp</u>  from  string  <u>string</u>  with
               string <u>subst</u>.

       <b>split</b> <b>(</b><u>regexp</u><b>,</b> <u>string</u><b>)</b>
               Split string <u>string</u> to list considering matches of regular rexpression <u>regexp</u> as item separa-<font color="#ffffff" class="whiteout">tor.&nbsp;separator.</font>
               tor.

       <b>sprintf</b> <b>(</b><u>fmt</u>, ...)
               Format arguments according to <u>fmt</u> and return result as a string.

       <b>strcmp</b> <b>(</b><u>str1</u><b>,</b> <u>str2</u><b>)</b>
               Perform a case-sensitive comparision for strings <u>str1</u> and <u>str2</u>.   Function  returns  a  value
               that is:

               <b>-1</b>      string <u>str1</u> is less than <u>str2</u>

               <b>0</b>       strings are equal

               <b>1</b>       string <u>str1</u> is greater than <u>str2</u>

       <b>string</b> <b>(</b><u>any</u><b>)</b>
               Convert argument to string.

       <b>strncmp</b> <b>(</b><u>str1</u><b>,</b> <u>str2</u><b>,</b> <u>num</u><b>)</b>
               Perform a case-sensitive comparision for strings <u>str1</u> and <u>str2</u> comparing at maximum <u>num</u> <b>char</b>-<font color="#ffffff" class="whiteout">acters.&nbsp;characters.</font>
               <b>acters.</b>

       <b>substring</b> <b>(</b><u>str</u><b>,</b> <u>start</u><b>,</b> <u>end</u><b>)</b>
               Return a substring of string <u>str</u> starting from position <u>start</u> (inclusively)  to  <u>end</u>  (exclu-<font color="#ffffff" class="whiteout">sively).&nbsp;(exclusively).</font>
               sively).


<b>BUILTIN</b> <b>VARIABLES</b>
       <b>$.</b>      current input line number

       <b>$</b><u>n</u>      the <u>n</u>th parenthesized regular expression sub-expression from the latest state regular expres-<font color="#ffffff" class="whiteout">sion&nbsp;expression</font>
               sion or from the <b>regmatch</b> primitive

       <b>$`</b>      everything before the matched regular rexpression.  This is usable when used  with  the  <b>reg</b>-<font color="#ffffff" class="whiteout">match&nbsp;regmatch</font>
               <b>match</b>  primitive;  the  contents  of this variable is undefined when used in action blocks to
               refer the data before the block's regular expression.

       <b>$B</b>      an alias for <b>$`</b>

       <b>argv</b>    list of input file names

       <b>filename</b>
               name of the current input file

       <b>program</b> name of the program (usually <b>states</b>)

       <b>version</b> program version string


<b>FILES</b>
       /usr/share/enscript/enscript.st         enscript's states definitions


<b>SEE</b> <b>ALSO</b>
       <a href="awk.1.html#//apple_ref/doc/man/1/awk">awk(1)</a>, <a href="enscript.1.html#//apple_ref/doc/man/1/enscript">enscript(1)</a>


<b>AUTHOR</b>
       Markku Rossi &lt;mtr@iki.fi&gt; &lt;<a href="http://www.iki.fi/~mtr/">http://www.iki.fi/~mtr/</a>

       GNU Enscript WWW home page: &lt;<a href="http://www.iki.fi/~mtr/genscript/">http://www.iki.fi/~mtr/genscript/</a>



STATES                                           Jun 6, 1997                                       STATES(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/states.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/states.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/states.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

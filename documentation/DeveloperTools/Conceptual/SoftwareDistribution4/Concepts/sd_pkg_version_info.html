<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Specifying Version Information for Packaged Software</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Specifying Version Information for Packaged Software"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001942" title="Specifying Version Information for Packaged Software"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_find_file.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_spec_install_req.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001942-TPXREF4" title="Specifying Version Information for Packaged Software"></a><hr /><H1>Specifying Version Information for Packaged Software</H1><p>If you supply version information in the correct format as part of bundled software you create, PackageMaker can gather and store the information in your package file, and Installer can use it to make intelligent decisions about when to replace outdated software during an installation.</p><p>This feature provides Installer with an efficient mechanism for determining which files in a package need to be installed, and can lead to a faster installation. This mechanism works as follows:</p><ul class="ul"><li class="li"><p>You supply version information in a version property list file named <code>version.plist</code> in any application, framework, or other bundles in your installation package.</p></li><li class="li"><p>When you create a package, PackageMaker automatically searches for version property list files in your software, combines them into another property list named <code>BundleVersions.plist</code>, and stores that list in the package.</p></li><li class="li"><p>During an upgrade installation, Installer can compare version property list files in the previously installed software with those in its bundle versions list. If the version in the target is newer than the version in the package, Installer skips the step of installing that software.</p></li></ul><p>The following sections describe this process, and the bundle versions and version property lists, in more detail.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001942-DontLinkElementID_60" title="Note"></a><p><strong>Note:</strong>&nbsp;See <span class="content_text"><a href="sd_install_upgrade.html#//apple_ref/doc/uid/20001762-TPXREF2">“Installs and Upgrades”</a></span> for information on how Installer determines whether an installation is an upgrade or an install.</p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1007759-TPXREF153">Supplying Version Information for Your Software</a>
				
			<br/>
			
        
			
			
				<a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1007952-TPXREF19">The BundleVersions.plist File</a>
				
			<br/>
			
        
			
			
				<a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1016445-TPXREF20">How Installer Uses Bundle Versions Information</a>
				
			<br/>
			
        
			
			
				<a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1016661-CEGBFEAA">How Installer Computes a Version</a>
				
			<br/>
			
        
			
			
				<a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1008947-TPXREF21">Testing With Bundle Versions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001942-1007759" title="Supplying Version Information for Your Software"></a><a name="//apple_ref/doc/uid/20001942-1007759-TPXREF153" title="Supplying Version Information for Your Software"></a><h2>Supplying Version Information for Your Software</h2><p>In addition to the version information you typically supply in any bundled software, you can add a small property list file that provides Installer with version information about your software. This file can be stored anywhere in the bundle, must have the name <code>version.plist</code>, and should contain information similar to that shown in <span class="content_text">Listing 1</span>. Of the keys shown in <span class="content_text">Listing 1</span>, the most important to supply are <code>BuildVersion</code>, <code>CFBundleShortVersionString</code>, and <code>SourceVersion</code>.</p><a name="//apple_ref/doc/uid/20001942-1007845-CEGBBEEI" title="Listing 1Contents of a version.plist file for a beta release of PackageMaker"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001942-1007845" title="Listing 1Contents of a version.plist file for a beta release of PackageMaker"></a><strong>Listing 1&nbsp;&nbsp;</strong>Contents of a version.plist file for a beta release of PackageMaker</p><div class="codesample"><table><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>BuildVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>17&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CFBundleShortVersionString&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1.1&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CFBundleVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1.1&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ProjectName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>PackageMaker&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ReleaseStatus&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>Beta&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>SourceVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>200000&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001942-1007952" title="The BundleVersions.plist File"></a><a name="//apple_ref/doc/uid/20001942-1007952-TPXREF19" title="The BundleVersions.plist File"></a><h2>The BundleVersions.plist File</h2><p>The <code>BundleVersions.plist</code> file (or bundle versions file) is a property list file created by PackageMaker when it creates an installation package. The file contains the contents of any version property list files found by scanning the items contained in the archive of files to be installed.The bundle versions file is stored in a package’s <code>Resources</code> directory and is not localized.</p><p>The bundle versions file contains a dictionary of dictionaries. For each top-level dictionary, the key is the path to the <code>version.plist</code> corresponding to one of the bundles being installed. The value of this key is the contents of the <code>version.plist</code> referenced by the path in the key.</p><p>For example, suppose that there exists an installation package for the latest version of ColorSync Utility and CPU Monitor. The bundle versions file might look like the one shown in <span class="content_text">Listing 2</span>.</p><a name="//apple_ref/doc/uid/20001942-1006439-CEGBACCB" title="Listing 2A BundleVersions.plist with versions for two bundles"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001942-1006439" title="Listing 2A BundleVersions.plist with versions for two bundles"></a><strong>Listing 2&nbsp;&nbsp;</strong>A BundleVersions.plist with versions for two bundles</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist SYSTEM "file://localhost/System/Library/DTDs/PropertyList.dtd"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="0.9"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key>./Applications/Utilities/ColorSync Utility.app/Contents/version.plist&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>BuildVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>19&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CFBundleShortVersionString&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>4.0&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CFBundleVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>4.0&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ProjectName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>ColorSyncEtc&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ReleaseStatus&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>GM&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>SourceVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>81&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key>./Applications/Utilities/CPU Monitor.app/Contents/version.plist&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>BuildVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>35&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CFBundleShortVersionString&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1.0&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CFBundleVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>23&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ProjectName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>CPUMonitor&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ReleaseStatus&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>GM&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>SourceVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>23.1&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist><span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/20001942-1016445" title="How Installer Uses Bundle Versions Information"></a><a name="//apple_ref/doc/uid/20001942-1016445-TPXREF20" title="How Installer Uses Bundle Versions Information"></a><h2>How Installer Uses Bundle Versions Information</h2><p>Installer reads the contents of the bundle versions file to determine the versions of the items it is installing. For each <code>version.plist</code> path referenced in the bundle versions file, Installer looks for a corresponding path on the user’s target volume. If the item exists, Installer reads the <code>version.plist</code> file from disk and compares the versions computed from the two <code>version.plist</code> files (see <span class="content_text"><a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1016661">“How Installer Computes a Version”</a></span> for details).</p><p>If the version on the target volume is newer than the one in the package being installed, Installer determines the path to the owner of the <code>version.plist</code>. For example, if Installer encounters a path to a version property list of <code>./Applications/iTunes.app/Contents/version.plist</code>, Installer knows that the path to the owner of this property list is <code>./Applications/iTunes.app</code>. After determining the owner, Installer prunes any paths beginning with <code>./Applications/iTunes.app</code> from the list of paths it will be installing. In this way, Installer can selectively filter out items in the package that would be downgrading items on a user’s disk.</p><p>If the version number on the target volume is equal to or less than that being installed, or for software for which it doesn’t find a version property list, Installer allows all files in the bundle being examined to be installed.</p><p>For something like a package that installs only localized resources and not the application itself, it is still appropriate to include the <code>version.plist</code> file for the application that owns the resources in the bundle versions file. Installer can then skip installing localized resources if an application on disk is newer than the one described in the bundle versions file of the package.</p><p>A shortcoming of this technology is that it currently will not prevent resources from a newer version of a bundle from being installed into an older version of a bundle. For example, it would be possible to install a package containing only Chinese resources for iTunes 5.0 (if such a version existed) into a copy of iTunes 2.0 (or anything less than 5.0).</p><a name="//apple_ref/doc/uid/20001942-1016661" title="How Installer Computes a Version"></a><a name="//apple_ref/doc/uid/20001942-1016661-CEGBFEAA" title="How Installer Computes a Version"></a><h2>How Installer Computes a Version</h2><p>To create a version from a <code>version.plist</code> file, Installer computes a 5-tuple from three keys in the <code>version.plist</code> file: the <code>CFBundleShortVersionString</code> key, the <code>SourceVersion</code> key, and the <code>BuildVersion</code> key. For a 5-tuple of the form a.b.c.d.e, a.b.c is obtained from the value of <code>CFBundleShortVersionString</code>, d is obtained from the value of <code>SourceVersion</code>, and e is obtained from the value of <code>BuildVersion</code>. If any key is missing, the corresponding element is replaced with 0.</p><p>The fourth and fifth elements of the 5-tuple are created from the integer values of <code>SourceVersion</code> and <code>BuildVersion</code>. If the only difference between two submissions is that the SourceVersion field changed from <code>1.8.4GMc2</code> to <code>1.8.4GMc3</code>, Installer treats them as the same because the integer values of both of these is 1. For Installer to be able to distinguish between two copies of a bundle, either the <code>SourceVersion</code> needs to change for each submission, or the <code>CFBundleShortVersionString</code> needs to change, such that the integer values can be differentiated.</p><a name="//apple_ref/doc/uid/20001942-1008947" title="Testing With Bundle Versions"></a><a name="//apple_ref/doc/uid/20001942-1008947-TPXREF21" title="Testing With Bundle Versions"></a><h2>Testing With Bundle Versions</h2><p>The accuracy of the version information as well as the correctness of installation may be judged by manually installing the package with the Installer application, located in <code>/Applications/Utilities</code>. Open the installation package and choose File > Show Log. The Installer log can be saved to disk or printed by clicking the Save or Print buttons in the Installer Log window. If there are any version conflicts, the resulting log contains output similar to that shown in <span class="content_text">Listing 3</span>.</p><a name="//apple_ref/doc/uid/20001942-1009127-CEGCAACB" title="Listing 3Version info from the Installer log"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001942-1009127" title="Listing 3Version info from the Installer log"></a><strong>Listing 3&nbsp;&nbsp;</strong>Version info from the Installer log</p><div class="codesample"><table><tr><td scope="row"><pre>./System/Library/Extensions/AppleMesh.kext (version 1.1.0.1.1) was not installed because a newer version (1.1.0.1.60) already exists.<span></span></pre></td></tr><tr><td scope="row"><pre>./System/Library/Extensions/IOUSBFamily.kext/Contents/PlugIns/IOUSBLib.bundle (version 1.8.3.1.1) was not installed because a newer version (1.8.3.1.3) already exists.<span></span></pre></td></tr><tr><td scope="row"><pre>./System/Library/PrivateFrameworks/DiscRecording.framework (version 1.2.0.1.1) was not installed because a newer version (1.2.0.1.30) already exists.<span></span></pre></td></tr><tr><td scope="row"><pre>./System/Library/Extensions/AppleStorageDrivers.kext/Contents/PlugIns/LSI-FW-500.kext (version 1.1.0.1.2) was not installed because a newer version (1.1.0.1.3) already exists.<span></span></pre></td></tr><tr><td scope="row"><pre>./System/Library/Extensions/System.kext/Contents/PlugIns/IOSystemManagement.kext (version 1.1.0.8.1) was not installed because a newer version (1.1.0.8.15) already exists.<span></span></pre></td></tr><tr><td scope="row"><pre>./System/Library/Extensions/System.kext/Contents/PlugIns/IOADBFamily.kext (version 1.1.0.8.1) was not installed because a newer version (1.1.0.8.15) already exists.<span></span></pre></td></tr></table></div><p>Given the output in the log and knowledge of how Installer computes version 5-tuples, you should be able to track down and correct any problems with the installation.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_find_file.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_spec_install_req.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_pkg_version_info.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_pkg_version_info.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_pkg_version_info.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<script language="JavaScript" src="frametest.js"></script>
<TITLE> TECInfo</TITLE><LINK REL="stylesheet" TYPE="text/css" HREF="../../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../../Resources/JavaScript/page.js"></script>
</head>
<body bgcolor="#ffffff">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<DIV>
<a name="top"></a>
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --><A HREF="TEC.21.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.23.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.25.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A><br>
<font face="Geneva,Helvetica,Arial" size="1"><b><br>
		PATH<spacer type="horizontal" size="5">&nbsp;</b></font><a href="../../../mac8.html"><font face="Geneva,Helvetica,Arial" size="1">Mac OS 8 and 9 Developer Documentation</a>  <b>&gt;</b> Text Encoding Conversion Manager<br>
		<img src="images/im_smblue.gif" width="116" height="8"><img src="images/space.gif" width="6" height="11">Programming With the Text Encoding Conversion Manager</font><br>
		<br>
		<hr>

</DIV>
<H1>
<A NAME="pgfId=9302">
 </A>
<A NAME="34553">
 </A>
TECInfo</H1>
<P>
<A NAME="pgfId=9565">
 </A>
The converter information structure is used by the function <A HREF="TEC.30.html" CLASS="XRef"><TT>TECGetInfo</TT></A> to hold returned information about the Unicode Converter, the Text Encoding Converter, and Basic Text Types. </P>
<TT>
<A NAME="pgfId=20674">
 </A>
struct TECInfo {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt16  format;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt16  tecVersion;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt32  tecTextConverterFeatures;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt32  tecUnicodeConverterFeatures;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt32  tecTextCommonFeatures;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Str31   tecTextEncodingsFolderName;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Str31   tecExtensionFileName;<BR>
/* The following are present if format is &gt;= 2 */<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt16&nbsp;&nbsp;tecLowestTEFileVersion;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;UInt16&nbsp;&nbsp;tecHighestTEFileVersion;<BR>
};<BR>
typedef struct TECInfo TECInfo;<BR>
typedef TECInfo * TECInfoPtr;<BR>
typedef TECInfoPtr * TECInfoHandle;</TT>
<P>
<A NAME="pgfId=14743">
 </A>
The following enumerations should be moved to the &quot;Constants&quot; section, and constant descriptions for them need to be added there. </P>
<TT>
<A NAME="pgfId=20680">
 </A>
enum {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECInfoCurrentFormat = 2<BR>
};</TT>
<TT>
<A NAME="pgfId=20684">
 </A>
enum {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECKeepInfoFixBit = 0,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECFallbackTextLengthFixBit = 1, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECTextRunBitClearFixBit &nbsp;&nbsp;= 2,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECTextToUnicodeScanFixBit = 3,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECAddForceASCIIChangesBit = 4,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECPreferredEncodingFixBit = 5,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECAddTextRunHeuristicsBit = 6,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECAddFallbackInterruptBit = 7<BR>
};</TT>
<TT>
<A NAME="pgfId=20688">
 </A>
enum {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECKeepInfoFixMask = 1L &lt;&lt; kTECKeepInfoFixBit,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECFallbackTextLengthFixMask &nbsp;&nbsp;= 1L &lt;&lt; kTECFallbackTextLengthFixBit,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECTextRunBitClearFixMask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 1L &lt;&lt; kTECTextRunBitClearFixBit,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECTextToUnicodeScanFixMask&nbsp;&nbsp;&nbsp;&nbsp;= 1L &lt;&lt; kTECTextToUnicodeScanFixBit,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECAddForceASCIIChangesMask&nbsp;&nbsp;&nbsp;&nbsp;= 1L &lt;&lt; kTECAddForceASCIIChangesBit,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECPreferredEncodingFixMask&nbsp;&nbsp;&nbsp;&nbsp;= 1L &lt;&lt; kTECPreferredEncodingFixBit, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECAddTextRunHeuristicsMask&nbsp;&nbsp;&nbsp;&nbsp;= 1L &lt;&lt; kTECAddTextRunHeuristicsBit,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;kTECAddFallbackInterruptMask&nbsp;&nbsp;&nbsp;&nbsp;= 1L &lt;&lt; kTECAddFallbackInterruptBit<BR>
};</TT><P>

<BR>
<H4>Field descriptions</H4>
<DL COMPACT>
<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20690">
 </A>
<TT>format</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=9669">
 </A>
The current format of the returned structure. The format of the structure is indicated by the <TT>kTECInfoCurrentFormat</TT> constant. Any future changes to the format will always be backward compatible; any new fields will be added to the end of the structure. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20699">
 </A>
<TT>tecVersion</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=9691">
 </A>
The current version of the Text Encoding Conversion Manager extension in BCD (binary coded decimal), with the first byte indicating the major version; for example, 0x0121 for 1.2.1. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20708">
 </A>
<TT>tecTextConverterFeatures</TT></DT>



<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=9703">
 </A>
New features or bug fixes in the Text Encoding Converter. No bits are currently defined.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20717">
 </A>
<TT>tecUnicodeConverterFeatures</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=9710">
 </A>
</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=12850">
 </A>
Bit flags indicating new features or bug fixes in the Unicode Converter. The bits currently defined are <TT>kTECKeepInfoFixBit</TT>, <TT>kTECFallbackTextLengthFixBit</TT>, <TT>kTECTextRunBitClearFixBit</TT>, <TT>kTECTextToUnicodeScanFixBit</TT>, <TT>kTecAddForceASCIIChangesBit</TT>, <TT>kTECPreferredEncodingFixBit</TT>; <TT>kTECAddTextRunHeuristicsBit</TT>, and <TT>kTECAddFallbackInterruptBit</TT>; the corresponding masks are <TT>kTECKeepInfoFixMask</TT>, <TT>kTECFallbackTextLengthFixMask</TT>, <TT>kTECTextRunMaskClearFixMask</TT>, <TT>kTECTextToUnicodeScanFixMask</TT>,<TT> kTecAddForceASCIIChangesMask</TT>, <TT>kTECPreferredEncodingFixMask</TT>., <TT>kTECAddTextRunHeuristicsMask</TT>, and <TT>kTECAddFallbackInterruptMask</TT>.</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=12851">
 </A>
The <TT>kTECKeepInfoFixBit</TT> is set if the Unicode Converter has a bug fix to stop ignoring certain control flags if the <TT>kUnicodeKeepInfoBit </TT>flag is set. </DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=9758">
 </A>
The <TT>kTECFallbackTextLengthFixBit</TT> is set if the Unicode Converter has a bug fix to use the source length (<TT>srcConvLen) </TT>and destination length (<TT>destConvLen)</TT> returned by a caller-supplied fall-back handler for any status it returns except <TT>kTECUnmappableElementErr</TT>.<TT> </TT>Previously it honored only these values if <TT>noErr</TT> was returned.</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=12672">
 </A>
The <TT>kTECTextRunBitClearFixBit </TT>is set if <TT>ConvertFromUnicodeToTextRun</TT> and <TT>ConvertFromUnicodeToScriptCodeRun</TT> function correctly if the <TT>kUnicodeTextRunBit</TT> is clear.</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=12867">
 </A>
The <TT>kTECTextToUnicodeScanFixBit</TT> is set if <TT>ConvertFromTextToUnicode</TT> is enhanced so mappings can depend on context and saved state. The consequences of this are (1) malformed input results in <TT>kTextMalformedInputErr</TT>; (2) <TT>ConvertFromTextToUnicode</TT> accepts the control flags <TT>kUnicodeLooseMappingsMask</TT>, <TT>kUnicodeKeepInfoMask</TT>, and <TT>kUnicodeStringUnterminatedMask</TT>; (3) elimination of redundant direction overrides when converting Mac OS Arabic and Hebrew to Unicode; and (4) improved mapping of 0x30-0x39 digits in Mac OS Arabic when loose mappings are used.	</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=12872">
 </A>
<TT>kTECAddForceASCIIChangesBit</TT> is set if the new control flag bits <TT>kUnicodeForceASCIIRangeBit</TT> and <TT>kUnicodeNoHalfwidthCharsBit</TT> are supported for use with the functions <TT>ConvertFromTextToUnicode</TT>, <TT>ConvertFromUnicodeToText</TT>, and so forth.</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=12879">
 </A>
<TT>kTECPreferredEncodingFixBit</TT> is set to indicate that if a preferred encoding is specified for <TT>CreateUnicodeToTextRunInfo</TT> and related functions, they handle it correctly even if it does not match the system script.</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=14578">
 </A>
<TT>kTECAddTextRunHeuristicsBit</TT> is set if the new control flag bit <TT>kUnicodeTextRunHeuristicsBit</TT> is supported for use with the function <TT>ConvertFromUnicodeToTextRun</TT>.</DD><P>


<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=14583">
 </A>
<TT>kTECAddFallbackInterruptBit</TT> is set if the new control flag bit <TT>kUnicodeFallbackInterruptSafeMask</TT> is supported for use with the functions <TT>SetFallbackUnicodeToText</TT> and <TT>SetFallbackUnicodeToTextRun</TT>.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20742">
 </A>
<TT>tecTextCommonFeatures</TT> </DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14584">
 </A>
 Bit flags indicating new features or bug fixes in Basic Text Types (the Text Common static library). No bits are currently defined.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20752">
 </A>
<TT>tecTextEncodingsFolderName</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=9780">
 </A>
 A Pascal string with the (possibly localized) name of the Text Encodings folder.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20762">
 </A>
<TT>tecExtensionFileName</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=10251">
 </A>
 A Pascal string with the (possibly localized) name of the Text Encoding Conversion Manager extension file.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20772">
 </A>
<TT>tecLowestTEFileVersion</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14589">
 </A>
 The lowest version number for any file in the Text Encodings folder. This can be compared with the version of the TEC Manager in the <TT>tecVersion</TT> field. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=20782">
 </A>
<TT>tecHighestTEFileVersion</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14591">
 </A>
 The highest version number for any file in the Text Encodings folder. This can be compared with the version of the TEC Manager in the <TT>tecVersion</TT> field.</DD><P>

</DL COMPACT>
<HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 13 Dec 99)<P><A HREF="TEC.21.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.23.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.25.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A>

<!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY>
</HTML>

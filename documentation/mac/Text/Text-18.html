<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Text Storage(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING18></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-17.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-19.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-13.html"><B>Chapter 1 - Introduction to Text on the Macintosh</B></A> / <A HREF="Text-14.html"><B>Macintosh Text Overview</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING18-0></A>
<H2>Text Storage</H2>
 <A NAME=MARKER-2-36></A>In considering how to store text in buffers, strings, and files, it may be clearer if you understand the assumptions that the Macintosh text managers make about your text-storage method. The discussions throughout this book assume that your text is stored and accessed acording to these conventions:<P>
<UL>
<LI>Your program stores text as a simple sequence of character codes. The character <BR>codes may be 1-byte or 2-byte codes, but there is nothing else in the text stream <BR>except for those codes. Using font information that your program stores separately, Script Manager routines can help you determine whether a character is 1 or 2 bytes, and other managers allow you to work with either character size.
<LI>Character location within a text sequence in memory is in terms of byte offset (not character offset) from the beginning of the text. Offset is zero-based; the first byte in the sequence has an offset of 0.
<LI><A NAME=MARKER-2-66></A>The <B>storage order</B> of your text--the sequence in memory in which the character codes occur--is the same as its logical order. It is the order in which the characters would be read or pronounced in the language of the text. Because text of different languages may be read either left-to-right or right-to-left, storage order is not always the same as the left-to-right <B>display</B> <B>order </B>of the text when it is drawn. In <A HREF=#MARKER-9-48>Figure 1-5</A>, for example, note that the Hebrew characters are displayed in reverse order from the order in which they are stored.<P>
</UL>
<B>Figure 1-5  <A NAME=MARKER-9-48></A>Storage order and display order</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/IT_L-09.jpg">
<UL>
<LI>All writing-system, font, size, color, and style information about each part of your text is stored separately from the text, and it is your application's responsibility to maintain that information. The text stream itself carries no information about what writing system or font it was created with or is meant to be drawn with; you need to keep track of and supply that information before making a drawing or measuring call.
<LI><A NAME=MARKER-2-70></A>Text is divided into <B>runs. </B>There are text runs, direction runs, script runs, font runs, and style runs. A <B>style run</B> is a continuous sequence of text that is all of the same writing system, font, size, color, style, and scaling factors (if the text is scaled). <BR><A HREF=#MARKER-9-50>Figure 1-6</A> shows four style runs on a single line. Because of the way many drawing and measuring routines work, it is important to track all the individual style runs in your text. Runs are described in more detail under <A HREF=Text-32.html#MARKER-9-340>"Style Runs, Font Runs, Script Runs, Direction Runs" beginning on page 1-70</A>.<P>
</UL>
<B>Figure 1-6  <A NAME=MARKER-9-50></A>Style runs in text<A NAME=MARKER-2-127></A></B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/IT_L-10.jpg">
<UL>
<LI>Drawing involves converting character codes in memory to glyphs on the screen. When drawn, some characters in some writing systems change their shape, size, or position depending on their contextual position, that is, on what other characters surround them. See <A HREF=Text-25.html#MARKER-9-143>"Contextual Forms and Character Reordering" beginning on page 1-26</A>. Using information in a set of <B>international resources,</B> the Macintosh text-measuring and drawing routines can automatically perform these <A NAME=MARKER-2-53></A>contextual transformations for you.
<LI>For text that is contextual, you do not store the transformed, ready-to-draw version; what you store in memory are the codes for the fundamental characters that make up the text. That makes searching, sorting and other manipulation more straightforward. Each time the text is drawn it is re-transformed as appropriate.<A NAME=MARKER-2-304></A><P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-17.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-19.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

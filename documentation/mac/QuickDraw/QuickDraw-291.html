<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>DeviceLoop (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING291></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-290.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-292.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-270.html"><B>Chapter 5 - Graphics Devices</B></A> / <A HREF="QuickDraw-273.html"><B>Graphics Devices Reference</B></A><BR><DL><DD><A HREF="QuickDraw-277.html"><B>Routines for Graphics Devices</B></A> / <A HREF="QuickDraw-290.html"><B>Determining the Characteristics of a Video Device</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING291-0></A>
<H3><A NAME=MARKER-9-138></A>DeviceLoop</H3>
 <A NAME=MARKER-11-140></A><A NAME=MARKER-11-140></A><A NAME=MARKER-2-32></A><A NAME=MARKER-2-142></A>For drawing images that are optimized for every screen they cross, use the <CODE>DeviceLoop</CODE> procedure. <P>
<PRE>
PROCEDURE DeviceLoop (drawingRgn: RgnHandle; 
                     drawingProc: DeviceLoopDrawingProcPtr; 
                     userData: LongInt; flags: DeviceLoopFlags);
</PRE>
<DL>
<DT><CODE>drawingRgn</CODE>
<DD> A handle to the region in which you will draw; this drawing region uses coordinates that are local to its graphics port.
<DT><CODE>drawingProc</CODE>
<DD> A pointer to your own drawing procedure.
<DT><CODE>userData</CODE>
<DD> Any additional data that you wish to supply to your drawing procedure.
<DT><CODE>flags</CODE>
<DD> One or more members of the set of flags defined by the <CODE>DeviceLoopFlags</CODE> data type:
</DL>
<PRE>
           TYPE
              DeviceLoopFlags = SET OF 
              (singleDevices,dontMatchSeeds,allDevices);
</PRE>
<DL>
<DT>
<DD> These flags are described in the following text; if you want to use the default behavior of <CODE>DeviceLoop</CODE>, specify an empty set ([]) in this parameter.
</DL>
<A NAME=HEADING291-9></A>
<H5>DESCRIPTION</H5>
 The <CODE>DeviceLoop</CODE> procedure searches for graphics devices that intersect your window's drawing region, and it calls your drawing procedure for each video device it finds. In the <CODE>drawingRgn</CODE> parameter, supply a handle to the region in which you wish to draw; in the <CODE>drawingProc</CODE> parameter, supply a pointer to your drawing procedure. In the <CODE>flags</CODE> parameter, you can specify members of the set of these flags defined by the <CODE>DeviceLoopFlags</CODE> data type:
<TABLE BORDER="0" CELLPADDING=3><TD>singleDevices<TD><A NAME=MARKER-2-3></A><A NAME=MARKER-2-3></A>If this flag is not set, <CODE>DeviceLoop</CODE> calls your drawing procedure only once for each set of similar graphics devices, and the first one found is passed as the target device. (It is assumed to be representative of all the similar graphics devices.) If you set the <CODE>singleDevices</CODE> flag, then <CODE>DeviceLoop</CODE> does not group similar graphics devices--that is, those having identical pixel depths, black-and-white or color settings, and matching color table seeds--when it calls your drawing procedure. <A NAME=MARKER-21-223></A><TR>
<TD>dontMatchSeeds<TD><A NAME=MARKER-2-6></A><A NAME=MARKER-2-6></A>If you set the <CODE>dontMatchSeeds</CODE> flag, then <CODE>DeviceLoop</CODE> doesn't consider the <CODE>ctSeed</CODE> field of <CODE>ColorTable</CODE> records for graphics devices when comparing them; <CODE>DeviceLoop</CODE> ignores this flag if you set the <CODE>singleDevices</CODE> flag.<A NAME=MARKER-2-65></A><TR>
<TD>allDevices<TD><A NAME=MARKER-2-9></A><A NAME=MARKER-2-9></A>If you set the <CODE>allDevices</CODE> flag, <CODE>DeviceLoop</CODE> ignores the <CODE>drawingRgn</CODE> parameter and calls your drawing procedure for every device. The value of current graphics port's <CODE>visRgn</CODE> field is not affected when you set this flag.<A NAME=MARKER-2-9></A><A NAME=MARKER-2-21></A></TABLE>
<P>
 For each dissimilar video device that intersects this region, <CODE>DeviceLoop</CODE> calls your drawing procedure. For example, after a call to the Event Manager procedure <CODE>BeginUpdate</CODE>, the region you specify in the <CODE>drawingRgn</CODE> parameter can be the same as the visible region for the active window. Because <CODE>DeviceLoop</CODE> provides your drawing procedure with the pixel depth and other attributes of each video device, your drawing procedure can optimize its drawing for each video device--for example, by using the <CODE>HiliteColor</CODE> procedure to set magenta as the highlight color on a color video device.<P>
<A NAME=HEADING291-12></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>DeviceLoop</CODE> procedure may move or purge memory blocks in the application heap. Your application should not call this procedure at interrupt time.<P>
<A NAME=HEADING291-14></A>
<H5>SEE ALSO</H5>
 <A HREF=QuickDraw-272.html#MARKER-9-25>Listing 5-1 on page 5-7</A> illustrates the use of <CODE>DeviceLoop</CODE>. See <A HREF=QuickDraw-297.html#MARKER-9-177>page 5-34</A> for a description of the drawing procedure you must provide for the <CODE>drawingProc</CODE> parameter. Offscreen graphics worlds are described in the next chapter. The <CODE>HiliteColor</CODE> procedure is described in the chapter "Color QuickDraw" in this book.<A NAME=MARKER-9-158></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-290.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-292.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QA1151: How can I set the default location with the modern Navigation APIs NavCreatexxx?</title><meta name="keywords" content="location default defaultlocation NavGetFile NavPutFile NavCreateGetFileDialogNavCreatePutFileDialog kNavCtlSetLocation NavDialogRun"><meta name="Description" content="Technical Q&amp;A QA1151: Setting the default location with aNavCustomControl call using the kNavCtlSetLocation messagein the kNavCBStart selector of the Event Proc."><meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Jul 1, 2002 - Jul 5, 2002"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001696" title="How can I set the default location with the modern Navigation APIs NavCreatexxx?"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/Carbon/index.html">Carbon</a> &gt; <a href="../../technicalqas/Carbon/idxHumanInterfaceToolbox-date.html">Human Interface Toolbox</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1151</div>
<div id="pageheadsub">How can I set the default location with the modern Navigation APIs NavCreatexxx?</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR> <td align="left"><!-- begin_content --><hr width=500 align=center>                  <P id=p2>Q:      I was using the defaultLocation parameter when I was calling      NavGetFile(), NavPutFile(), etc., but this parameter disappeared      in the new APIs NavCreateGetFileDialog(), NavCreatePutFileDialog(),      etc., how can I set the default location in a modern way?</p>                  <P id=p4>A:      You just need to use the NavCustomControl call using the      kNavCtlSetLocation message as early as possible after you      call NavDialogRun(). The best way is to have this code when      you get the kNavCBStart selector in your Event Proc, the      following source code excerpt illustrate this:</p><BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre> pascal void modernEventProc(NavEventCallbackMessage callBackSelector,                            NavCBRecPtr callBackParms, void* callBackUD)  {  ...  switch(callBackSelector)    {    ...    case kNavCBStart:      {      OSStatus theStatus = noErr;      AEDesc theLocation = {typeNull, NULL);      FSSpec theFSSpec;      theStatus = FSMakeFSSpec(...&lt;your construction here&gt;..., &amp;theFSSpec);      if (theStatus != noErr) {... your error handling here ...}      theStatus = AECreateDesc(typeFSS, &amp;theFSSpec, sizeof(FSSpec), &amp;theLocation));      if (theStatus != noErr) {... your error handling here ...}      theStatus = NavCustomControl(callBackParms-&gt;context,                        kNavCtlSetLocation, (void*)&amp;theLocation);      if (theStatus != noErr) {... your error handling here ...}      }    ...    }  ...  }</pre></TD></TR><TR><td align="left"><P><B>Listing 1</B>.       Setting the location in the kNavCBStart selector of the Event      Proc</P></TD></TR></TABLE></CENTER><BR><BR>          <hr width=500 align=center> <!-- begin_date --><H4 ALIGN=center>[Jul 01 2002]</H4><!-- end_date --></TD> </TR> </TABLE></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1151.html%3Fid%3DDTS10001696-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1151.html%3Fid%3DDTS10001696-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1151.html%3Fid%3DDTS10001696-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<html><head><title>Mac OS X
 Manual Page For fdisk(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/fdisk" title="Mac OS X
 Manual Page for fdisk(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/fdisk"; name=fdisk(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
FDISK(8)                  BSD System Manager's Manual                 FDISK(8)

<b>NAME</b>
     <b>fdisk</b> -- DOS partition maintenance program

<b>SYNOPSIS</b>
     <b>fdisk</b> [<b>-ieu</b>] [<b>-f</b> <u>mbrname</u>] [<b>-c</b> <u>cylinders</u>] [<b>-h</b> <u>heads</u>] [<b>-s</b> <u>sectors</u>] [<b>-S</b> <u>size</u>] [<b>-b</b> <u>size</u>] <u>device</u>

<b>DESCRIPTION</b>
     In order for the BIOS to boot the kernel, certain conventions must be adhered to.  Sector 0 of a
     bootable hard disk must contain boot code, an MBR partition table, and a magic number (0xAA55).  These
     MBR partitions (also known as BIOS partitions) can be used to break the disk up into several pieces.

     The BIOS loads sector 0 of the boot disk into memory, verifies the magic number, and begins executing
     the code at the first byte.  The normal DOS MBR boot code searches the MBR partition table for an
     ``active'' partition (indicated by a `*' in the first column), and if one is found, the boot block from
     that partition is loaded and executed in place of the original (MBR) boot block.

     The options are as follows:

     <b>-i</b>      Initialize the MBR sector.

     <b>-a</b> <u>style</u>
             Specify an automatic partitioning style.

     <b>-e</b>      Edit existing MBR sectors.

     <b>-f</b> <u>mbrname</u>
             Specifies an alternate MBR template file.

     <b>-u</b>      Update MBR code, preserving existing partition table.

     <b>-y</b>      Do not ask for confirmation before writing.

     <b>-d</b>      Dump partition table in a format readable by the -r option.

     <b>-r</b>      Read a partition table from the standard input.

     <b>-t</b>      Test if the disk is partitioned.

     <b>-c</b> <u>cylinders</u>, <b>-h</b> <u>heads</u>, <b>-s</b> <u>sectors</u>
             Specifies an alternate BIOS geometry for <b>fdisk</b> to use.

     <b>-S</b> <u>size</u>
             Specify the disk size in blocks.

     <b>-b</b> <u>size</u>
             Specify the number of bytes per disk block.

     The DOS <b>fdisk</b> program can be used to divide space on the disk into partitions and set one active.  This
     <b>fdisk</b> program serves a similar purpose to the DOS program.  When called with no special flags, it
     prints the MBR partition table of the specified device, i.e.,

         # fdisk fd0
         Disk: fd0       geometry: 80/2/18 [2880 sectors]
         Offset: 0       Signature: 0xAA55
                  Starting        Ending
          #: id  cyl  hd sec -  cyl  hd sec [     start -       size]
         ----------------------------------------------------------------------<font color="#ffffff" class="whiteout">*1:&nbsp;---------------------------------------------------------------------*1:</font>
         *1: A6    0   0   1 -   79   1  18 [         0 -       2880] OpenBSD
          2: 00    0   0   0 -    0   0   0 [         0 -          0] unused
          3: A7    0   0   2 -   79   1  18 [         1 -       2879] NEXTSTEP
          4: 00    0   0   0 -    0   0   0 [         0 -          0] unused

     The geometry displayed is a synthetic geometry unless another geometry has been selected using the <b>-c</b>,
     <b>-h</b>, <b>-s</b>, <b>-S</b>, and <b>-b</b> options.  In the future, <b>fdisk</b> will read the BIOS geometry from the IOKit registry.

     In this example, the disk is divided into two partitions that happen to fill the disk.  The first par-<font color="#ffffff" class="whiteout">tition&nbsp;partition</font>
     tition overlaps the third partition.  (Used for debugging purposes.)

     <u>#</u>           Number of partition table entry.  A ``*'' denotes the bootable partition.

     <u>id</u>          System identifier.  OpenBSD reserves the magic number 166 decimal (A6 in hex).  If no 166
                 partition is found, it will use an older FreeBSD partition (with a magic number of 165 or
                 A5 in hex).

     <u>cyl/hd/sec</u>  These fields provide the starting and ending address of the partition in BIOS geometry

     <u>start/size</u>  These fields provide the starting sector and size in sectors of the partition in linear
                 block addresses.

     <u>NOTE</u>: The sectors field is ``1 based'', and the start field is ``0 based''.  The CHS values may need to
     be in the BIOS's geometry for older systems to be able to boot and use the drive correctly; most modern
     systems prefer the starting sector and size in preference to the CHS values.

     The <b>-i</b> flag is used to indicate that the partition data is to be initialized.  In this mode, <b>fdisk</b> will
     completely overwrite the primary MBR and partition table, either using the default MBR template, or the
     one specified by the <b>-f</b> flag.

     In the default template, partition number 1 will be configured as a Darwin boot partition spanning from
     cylinder 0, head 1, sector 1, and extending for 8 megabytes.  Partition number 2 will be configured as
     a Darwin HFS partition spanning the rest of the disk.  This mode is designed to initialize an MBR the
     very first time, or when it has been corrupted beyond repair.

     You can specify other default partition styles with the <b>-a</b> flag.  The available styles are:

     <u>boothfs</u>     Creates an 8Mb boot partition (type AB hex) and makes the rest of the disk a Darwin HFS
                 partition (type AF hex).

     <u>bootufs</u>     Creates an 8Mb boot partition (type AB hex) and makes the rest of the disk a Darwin UFS
                 partition (type A8 hex).

     <u>ufs</u>         Makes the entire disk one Darwin UFS partition (type A8 hex).

     <u>hfs</u>         Makes the entire disk one HFS+ partition (type AF hex).

     <u>dos</u>         Makes the entire disk one DOS partition (type 0C hex).

     <u>raid</u>        Makes the entire disk one type AC hex partition.

     The <b>-u</b> flag is used to update the MBR code on a given drive.  The MBR code extends from offset 0x000 to
     the start of the partition table at offset 0x1BE.  It is similar to the <b>-i</b> flag, except the existing
     partition table is preserved. This is useful for writing new MBR code onto an existing drive, and is
     equivalent to the DOS command ``FDISK /MBR''.  Note that this option will overwrite the NT disk signa-<font color="#ffffff" class="whiteout">ture,&nbsp;signature,</font>
     ture, if present.  The <b>-u</b> and <b>-i</b> flags may not be specified together.

     The flag <b>-e</b> is used to modify a partition table using a interactive edit mode of the <b>fdisk</b> program.
     This mode is designed to allow you to change any partition on the drive you choose, including extended
     partitions.  It is a very powerful mode, but is safe as long as you do not execute the <u>write</u> command,
     or answer in the negative (the default) when <b>fdisk</b> asks you about writing out changes.

<b>COMMAND</b> <b>MODE</b>
     When you first enter this mode, you are presented with a prompt, that looks like so: <u>fdisk:</u> <u>0&gt;</u>.  This
     prompt has two important pieces of information for you.  It will tell you if the in-memory copy of the
     boot block has been modified or not.  If it has been modified, the prompt will change to look like:
     <u>fdisk:*0&gt;</u>.  The second piece of information pertains to the number given in the prompt.  This number
     specifies the disk offset of the currently selected boot block you are editing.  This number could be
     something different that zero when you are editing extended partitions.  The list of commands and their
     explanations are given below.

     <u>help</u>    Display a list of commands that <b>fdisk</b> understands in the interactive edit mode.

     <u>manual</u>  Display this manual page.

     <u>reinit</u>  Initialize the currently selected, in-memory copy of the boot block.

     <u>auto</u>    Partition the disk with one of the automatic partition styles.

     <u>disk</u>    Display the current drive geometry that <b>fdisk</b> has probed.  You are given a chance to edit it if
             you wish.

     <u>edit</u>    Edit a given table entry in the memory copy of the current boot block.  You may edit either in
             BIOS geometry mode, or in sector offsets and sizes.

     <u>setpid</u>  Change the partition identifier of the given partition table entry.  This command is particu-<font color="#ffffff" class="whiteout">larly&nbsp;particularly</font>
             larly useful for reassigning an existing partition to OpenBSD.

     <u>flag</u>    Make the given partition table entry bootable.  Only one entry can be marked bootable.  If you
             wish to boot from an extended partition, you will need to mark the partition table entry for
             the extended partition as bootable.

     <u>update</u>  Update the machine code in the memory copy of the currently selected boot block.  Note that
             this option will overwrite the NT disk signature, if present.

     <u>select</u>  Select and load into memory the boot block pointed to by the extended partition table entry in
             the current boot block.

     <u>print</u>   Print the currently selected in-memory copy of the boot block and its MBR table to the termi-<font color="#ffffff" class="whiteout">nal.&nbsp;terminal.</font>
             nal.

     <u>write</u>   Write the in-memory copy of the boot block to disk.  You will be asked to confirm this opera-<font color="#ffffff" class="whiteout">tion.&nbsp;operation.</font>
             tion.

     <u>exit</u>    Exit the current level of <b>fdisk</b>, either returning to the previously selected in-memory copy of
             a boot block, or exiting the program if there is none.

     <u>quit</u>    Exit the current level of <b>fdisk</b>, either returning to the previously selected in-memory copy of
             a boot block, or exiting the program if there is none.  Unlike <u>exit</u> it does write the modified
             block out.

     <u>abort</u>   Quit program without saving current changes.

<b>NOTES</b>
     The automatic calculation of starting cylinder etc. uses a set of figures that represent what the BIOS
     thinks is the geometry of the drive.  These figures are by default taken from the in-core disklabel, or
     values that <u>/boot</u> has passed to the kernel, but <b>fdisk</b> gives you an opportunity to change them if there
     is a need to.  This allows the user to create a bootblock that can work with drives that use geometry
     translation under a potentially different BIOS.

     If you hand craft your disk layout, please make sure that the OpenBSD partition starts on a cylinder
     boundary.  (This restriction may be changed in the future.)

     Editing an existing partition is risky, and may cause you to lose all the data in that partition.

     You should run this program interactively once or twice to see how it works.  This is completely safe
     as long as you answer the ``write'' questions in the negative.

<b>FILES</b>
     /usr/mdec/mbr  default MBR template

<b>SEE</b> <b>ALSO</b>
     <a href="gpt.8.html#//apple_ref/doc/man/8/gpt">gpt(8)</a>, <a href="pdisk.8.html#//apple_ref/doc/man/8/pdisk">pdisk(8)</a>

<b>BUGS</b>
     There are subtleties <b>fdisk</b> detects that are not explained in this manual page.  As well, chances are
     that some of the subtleties it should detect are being steamrolled.  Caveat Emptor.

BSD                             January 3, 2002                            BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/fdisk.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/fdisk.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/fdisk.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

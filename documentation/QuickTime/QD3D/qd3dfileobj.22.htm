<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE>Application-Defined Routines</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="RH2.RoutineHd2"><A NAME="pgfId=4050"> </A><A NAME="marker=5787"> </A><A NAME="35603"> </A>Application-Defined Routines<A NAME="marker=4049"> </A></H1><P CLASS="T1.Text1"><A NAME="pgfId=4051"> </A>This section describes the I/O methods you can implement to handle a custom object type. Your custom methods are reported to QuickDraw&nbsp;3D by your object metahandler. This section also describes how to write a file idler callback routine.</P><P CLASS="Note"><A NAME="pgfId=4055"> </A>For information about defining an object metahandler and about the basic methods for handling custom objects, see the chapter <A HREF="qd3dobjects.htm#16698" CLASS="XRef">&quot;QuickDraw&nbsp;3D Objects.&quot;</A> </P><P CLASS="T1.Text1"><A NAME="pgfId=4065"> </A>These I/O methods define how QuickDraw&nbsp;3D handles your custom objects when reading them from or writing them to a metafile. Each distinct object in a metafile consists of a root object that determines the object's type and default data. Some types of objects can have child objects attached to them, which add information to the parent object or override the parent's default data. A parent object and its child (or children) are encapsulated in a container, the first object in which is always the parent object.</P><P CLASS="T1.Text1"><A NAME="pgfId=4933"> </A>To read a custom object from a file, you need to define a read data method for the custom object. To write a custom object to a file, you need to define two I/O methods for the custom object: a traversal method and a write method.</P><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=4127"> </A><A NAME="18894"> </A>TQ3FileIdleMethod</H3><P CLASS="T1.Text1"><A NAME="pgfId=4128"> </A>You can define an idle method to receive occasional callbacks to your application during lengthy file operations.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=14182"> </A>typedef TQ3Status (*TQ3FileIdleMethod) (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3FileObject file, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void *idlerData);<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14184"> </A><TT CLASS="cv">file</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4130"> </A>A file object.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14193"> </A><TT CLASS="cv">idlerData</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4131"> </A>A pointer to an application-defined block of data.</DD></DL COMPACT><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=4132"> </A>DESCRIPTION</H4><P CLASS="T1.Text1"><A NAME="pgfId=4133"> </A>Your <TT CLASS="cv">TQ3FileIdleMethod</TT> function is called occasionally during lengthy file operations. You can use an idle method to provide a method for the user to cancel the lengthy operation (for example, by clicking a button or pressing a key sequence such as Command-period).</P><P CLASS="T1.Text1"><A NAME="pgfId=4137"> </A>If your idle method returns <TT CLASS="cv">kQ3Success</TT>, QuickDraw&nbsp;3D continues its current operation. If your idle method returns <TT CLASS="cv">kQ3Failure</TT>, QuickDraw&nbsp;3D cancels its current operation and returns <TT CLASS="cv">kQ3ViewStatusCancelled</TT> the next time you call <TT CLASS="cv">Q3View_EndWriting</TT>.</P><P CLASS="T1.Text1"><A NAME="pgfId=4141"> </A>There is currently no way to indicate how often you want your idle method to be called. You can read the time maintained by the Operating System if you need to determine the amount of time that has elapsed since your idle method was last called.</P><P CLASS="T1.Text1"><A NAME="pgfId=4147"> </A>You must not call any QuickDraw&nbsp;3D routines inside your idle method.<A NAME="marker=4146"> </A></P></DIV></DIV><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
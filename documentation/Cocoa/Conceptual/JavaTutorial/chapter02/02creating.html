<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Tutorial for Java Programmers (Legacy): Creating the Currency Converter Project and User Interface</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating the Currency Converter Project and User Interface"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001111-CH205" title="Creating the Currency Converter Project and User Interface"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Cocoa-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000495" target="_top">Cocoa</a> &gt; <a href="../chapter01/01introduction.html#//apple_ref/doc/uid/TP30001111-CH203-SW2">Cocoa Tutorial for Java Programmers (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../chapter01/01introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../chapter03/03implementing.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The Java API for Cocoa is deprecated in Mac OS X version 10.4 and later. You should use the Objective-C API instead. For a tutorial on using Cocoa with Objective-C, see <em><a href="../../ObjCTutorial/index.html#//apple_ref/doc/uid/TP40000863" target="_top">Cocoa Application Tutorial</a></em>.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001111-CH205-SW13" title="Creating the Currency Converter Project and User Interface"></a><h1><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF101" title="Creating the Currency Converter Project and User Interface"></a>Creating the Currency Converter Project and User Interface</h1><p>This chapter guides you through the development of the user interface of the Currency Converter application and in the process teaches you the essential steps required for building a Cocoa application.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF110">Creating the Currency Converter Project</a>
				
			<br/>
			
        
			
			
				<a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF112">Creating the Currency Converter User Interface</a>
				
			<br/>
			
        
			
			
				<a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF114">Defining the ConverterController Class</a>
				
			<br/>
			
        
			
			
				<a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF115">Interconnecting the ConverterController Class and the User Interface</a>
				
			<br/>
			
        
			
			
				<a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF119">Defining the Converter Class</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF110" title="Creating the Currency Converter Project"></a><h2>Creating the Currency Converter Project</h2><p>Every Cocoa application starts life as a <strong>project</strong>. A project is a repository for all the elements that go into the application, such as source code files, frameworks, libraries, the application’s user interface, sounds, and images. You use the Xcode application to create and manage your project.</p><p>The following sections cover the steps necessary to create the Currency Converter project.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABCDIHJ" title="Open Xcode"></a><h3>Open Xcode</h3><p>To open Xcode:</p><ol class="ol"><li class="li"><p>In the Finder, go to <code>/Developer/Applications</code>.</p></li><li class="li"><p>Double-click the icon, shown in <span class="content_text">Figure 1-1</span>.</p></li></ol><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBDJCID" title="Figure 1-1The Xcode application icon"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>The Xcode application icon</p><img src = "../art/xc_icon.gif" alt = "" width="84" height="87"></div><br/><p>The first time you start Xcode, it asks you a few setup questions. The default values should work for the majority of users.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABGFDBA" title="Choose the New Project Command"></a><h3>Choose the New Project Command</h3><p>When Xcode is launched, only its menu bar appears. To create a project, choose New Project from the File menu. The New Project Assistant appears.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABCGBBI" title="Choose a Project Type"></a><h3>Choose a Project Type</h3><p>Xcode can build several types of applications, including everything from Carbon and Cocoa applications to Mac OS X kernel extensions and Mac OS X frameworks. For this tutorial, select Cocoa-Java Application and click Next, as shown in <span class="content_text">Figure 1-2</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBJAFDI" title="Figure 1-2Xcode New Project Assistant"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>Xcode New Project Assistant</p><img src = "../art/assistant1.gif" alt = "" width="466" height="391"></div><br/><ol class="ol"><li class="li"><p>Type <code>Currency Converter</code> in the Project Name field, as shown in <span class="content_text">Figure 1-3</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW7" title="Figure 1-3Entering a project&acirc;&#128;&#153;s name and choosing its location in Xcode New Project Assistant"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF167" title="Figure 1-3Entering a project&acirc;&#128;&#153;s name and choosing its location in Xcode New Project Assistant"></a><strong>Figure 1-3&nbsp;&nbsp;</strong>Entering a project’s name and choosing its location in Xcode New Project Assistant</p><img src = "../art/assistant2.gif" alt = "" width="465" height="392"></div></li><li class="li"><p>Click Choose to navigate to the directory where you want your project to be stored. The drop-down menu next to the Project Directory text field eventually fills up with your frequently used directories. Use this to save time in the future.</p></li><li class="li"><p>Click Finish.</p></li></ol><p>When you click Finish, Xcode creates the project’s files and displays the project window, shown in <span class="content_text">Figure 1-4</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBHEGDJ" title="Figure 1-4The new Currency Converter project in Xcode"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>The new Currency Converter project in Xcode</p><img src = "../art/project_new.gif" alt = "" width="699" height="414"></div><br/><p>The Groups &amp; Files list is comprised of all the source files, images, and other resources that make up a project. These files are grouped in the project group, the first item in the Groups &amp; Files list; this group is named after the project. The project’s files are grouped into subgroups, such as Classes, Other Sources, Resources, and so on, as shown in <span class="content_text">Figure 1-4</span>. These groups are very flexible in that they do not necessarily reflect either the on-disk layout of the project or the way the build system handles it. They are purely for organizing your project. The groups created by Xcode should be suitable for most developers, but you can rearrange them however you like.</p><p>These are the groups Xcode sets up for Cocoa-Java applications:</p><ul class="simple"><li><p><strong>Classes.</strong> This group is empty at first. However, you can place in it the classes required by your application.</p></li><li><p><strong>Other Sources.</strong> This group contains the <code>main.m</code> file, which implements the <code>main</code> routine. This routine starts the application. (You shouldn’t have to modify this file.) This group also contains <code>Currency Converter_Prefix.h</code>. This “prefix header” helps Xcode reduce the compilation time of C-based source files. This is not important for this tutorial.</p></li><li><p><strong>Resources.</strong> This group contains the nib files and other resources that specify the application’s user interface. <span class="content_text"><a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF135">What Is a Nib File?</a></span> describes nib files.</p></li><li><p><strong>Frameworks.</strong> This group contains the frameworks (which are similar to packages) that the application uses.</p></li><li><p><strong>Products.</strong> This group contains the results of project builds and is automatically populated with references to the products created by each target in the project.</p></li></ul><p>Below the project group are other groups, including <strong>smart groups</strong>. Smart groups—identified by the purple folders on the left side of the column—allow you to sort the project’s files using custom rules in a way similar to using smart playlists in iTunes.</p><p>These are some of the other groups in the Groups &amp; Files list:</p><ul class="simple"><li><p><strong>Targets.</strong> Lists all the end results of your builds. This group usually contains one target, such as an application or a framework, but it can consist of multiple items.</p></li><li><p><strong>Executables.</strong> Contains all the the executable products your project creates.</p></li><li><p><strong>Errors and Warnings.</strong> Displays the errors and warnings encountered in your project when you perform a build.</p></li></ul><p>Curious folks might want to look in the project directory to see what kind of files it contains. Among the project files are:</p><dl class="termdef">	<dt><code>English.lproj</code></dt><dd><p>A directory containing resources localized to the English language. In this directory are nib files automatically created for the project. You may find other directories containing localized resources, such as <code>Dutch.lproj</code>.</p></dd></dl><dl class="termdef">	<dt><code>main.m</code></dt><dd><p>An Objective-C file, generated for each project, that contains the entry-point code for the application.</p></dd></dl><dl class="termdef">	<dt><code>Currency Converter.xcodeproj</code></dt><dd><p>This file contains information that defines the project. It should not be modified directly. You can open your project by double-clicking this file in the Finder.</p></dd></dl><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF112" title="Creating the Currency Converter User Interface"></a><h2>Creating the Currency Converter User Interface</h2><p>This section guides you through the code-free steps involved in creating a functioning user interface for Currency Converter and explains interesting and important aspects of Cocoa programming along the way.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF135" title="What Is a Nib File?"></a><h3>What Is a Nib File?</h3><p>Every Cocoa application with a graphical user interface has at least one nib file. The main nib file is loaded automatically when an application launches. It contains the menu bar and generally at least one window along with various other objects. An application can have other nib files as well. Each nib file contains:</p><ul class="spaceabove"><li class="li"><p><strong>Archived objects.</strong> Also known in object-oriented terminology as “flattened” or “serialized” objects—meaning that the object has been encoded in such a way that it can be saved to disk (or transmitted over a network connection to another computer) and later restored to memory. Archived objects contain information such as their size, location, and position in the object hierarchy. At the top of the hierarchy of archived objects is the File’s Owner object, a proxy object that points to the actual object that owns the nib file (typically, the one that loaded the nib file from disk).</p></li><li class="li"><p><strong>Images.</strong> Image files that you drag and drop on the nib file window or on an object that can accept them (such as a button or image view). </p></li><li class="li"><p><strong>Class references.</strong> Interface Builder can store the details of Cocoa objects and objects that you place into static palettes, but it does not know how to archive instances of your custom classes since it doesn’t have access to the code. For these classes, Interface Builder stores a proxy object to which it attaches your custom class information.</p></li><li class="li"><p><strong>Connection information.</strong> Information about how objects within the class hierarchies are interconnected. Connector objects special to Interface Builder store this information. When you save a document, its connector objects are archived in the nib file along with the objects they connect. </p></li></ul><a name="//apple_ref/doc/uid/TP30001111-CH205-BABFGFEE" title="Open the Main Nib File"></a><h3>Open the Main Nib File</h3><p>You use Interface Builder to define an application’s user interface. To open the Currency Converter’s main nib file in Interface Builder:</p><ol class="ol"><li class="li"><p>Locate <code>MainMenu.nib</code> in the Resources subgroup of your project.</p></li><li class="li"><p>Double-click the nib file. This opens the nib file in Interface Builder.</p></li></ol><p>A default menu bar called MainMenu and a window titled “Window” appear when the nib file is opened.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF136" title="Windows in Cocoa"></a><h3>Windows in Cocoa</h3><p>A window in Cocoa looks very similar to windows in other user environments, such as Windows. It is a rectangular area on the screen in which an application displays things such as controls, fields, text, and graphics. Windows can be moved around the screen and stacked on top of each other like pieces of paper. A typical Cocoa window has a title bar, a content area, and several control objects.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF137" title="NSWindow and the Window Server"></a><h4>NSWindow and the Window Server</h4><p>Many user-interface objects other than the standard window are windows. Menus, pop-up lists, and pull-down lists are primarily windows, as are all varieties of utility windows and dialogs: attention dialogs, Info windows, drawers, panels, and tool palettes, to name a few. In fact, anything drawn on the screen must appear in a window. End users, however, may not recognize or refer to them as “windows.”</p><p>Two interacting systems create and manage Cocoa windows. A window is created by the Window Server. The Window Server is a process that uses the internal window management portion of Quartz (the low-level drawing system) to draw, resize, hide, and move windows using Quartz graphics routines. The Window Server also detects user events (such as mouse clicks) and forwards them to applications.</p><p>The window that the Window Server creates is paired with an object supplied by the Application Kit framework (AppKit). The object supplied is an instance of the NSWindow class. Each physical window in a Cocoa program is managed by an instance of NSWindow or a subclass of it. For information on AppKit, see <span class="content_text"><!--a target="_top" -->The Cocoa Frameworks<!--/a--></span> in <em><a href="../../CocoaFundamentals/index.html#//apple_ref/doc/uid/TP40002974" target="_top">Cocoa Fundamentals Guide</a></em>.</p><p>When you create an NSWindow object, the Window Server creates the physical window that the NSWindow object manages. The NSWindow class offers a number of instance methods through which you customize the operation of its onscreen window.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF138" title="Application, Window, View"></a><h4>Application, Window, View</h4><p>In a running Cocoa application, NSWindow objects occupy a middle position between an instance of NSApplication and the views of the application. (A view is an object that can draw itself and detect user events.) The NSApplication object keeps a list of its windows and tracks the current status of each. Each NSWindow object manages a hierarchy of views in addition to its window. </p><p>At the top of this hierarchy is the content view, which fits just within the window’s content rectangle. The content view encloses all other views (its subviews) that come below it in the hierarchy. The NSWindow distributes events to views in the hierarchy and regulates coordinate transformations among them.</p><p>Another rectangle, the frame rectangle, defines the outer boundary of the window and includes the title bar and the window’s controls. Cocoa uses the bottom-left corner of the frame rectangle as the origin for the base coordinate system, unlike Carbon and Classic applications, which use the top-left corner. Views draw themselves in coordinate systems transformed from (and relative to) this base coordinate system.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF139" title="Key and Main Windows"></a><h4>Key and Main Windows</h4><p>Windows have numerous characteristics. They can be onscreen or offscreen. Onscreen windows are “layered” on the screen in tiers managed by the Window Server. Onscreen windows can also have a status: <strong>key</strong> or <strong>main</strong>.</p><p>Key windows respond to key presses for an application and are the primary recipient of messages from menus and panels. Usually, a window is made key when the user clicks it. Each application can have only one key window.</p><p>An application has one main window, which can often have key status as well. The main window is the principal focus of user actions for an application. Often user actions in a modal key window (typically a panel such as the Font window or an Info window) have a direct effect on the main window.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABDIHFD" title="Resize the Window"></a><h3>Resize the Window</h3><p>Make the window smaller by dragging the bottom-right corner of the window inward, as shown in <span class="content_text">Figure 1-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-SW8" title="Figure 1-5Resizing a window manually"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF168" title="Figure 1-5Resizing a window manually"></a><strong>Figure 1-5&nbsp;&nbsp;</strong>Resizing a window manually</p><img src = "../art/window_resizing.gif" alt = "" width="344" height="227"></div><br/><p>You can resize the window more precisely in the Size pane in the NSWindow inspector.</p><ol class="ol"><li class="li"><p>Choose Show Inspector from the Tools menu.</p></li><li class="li"><p>Choose Size from the inspector pop-up menu.</p></li><li class="li"><p>In the Content Rectangle group, choose Width/Height from the second pop-up menu.</p></li><li class="li"><p>Type <code>400</code> in the width (“w”) field and <code>200</code> in the height (“h”) field, as shown in <span class="content_text">Figure 1-6</span>.</p></li></ol><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBDJABG" title="Figure 1-6Resizing a window with the NSWindow inspector"></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>Resizing a window with the NSWindow inspector</p><img src = "../art/window_info_size.gif" alt = "" width="260" height="402"></div><br/><a name="//apple_ref/doc/uid/TP30001111-CH205-BABJJHHD" title="Set the Window&acirc;&#128;&#153;s Title and Other Attributes"></a><h3>Set the Window’s Title and Other Attributes</h3><p>Set other attributes for the window in the NSWindow inspector:</p><ol class="ol"><li class="li"><p>Choose Attributes from the inspector pop-up menu and change the window’s title to “Currency Converter”. Press Return to lock in the change.</p></li><li class="li"><p>Verify that the “Visible at launch time” option is selected.</p></li><li class="li"><p>Deselect the Zoom option in the “Title bar controls” group.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-DontLinkElementID_1" title="Set the Application Name in the Menu"></a><h3>Set the Application Name in the Menu</h3><p>Interface Builder places the term “NewApplication” in place of the application name in the menu bar. You must change this text to the application name in all menu items that include the application name, such as the application menu and the Help menu.</p><ol class="ol"><li class="li"><p>In the MainMenu window, double-click NewApplication, and press the Space bar.</p></li><li class="li"><p>In the NSMenuItem inspector, enter <code>Currency Converter</code> in the Title text field and press Return.</p></li><li class="li"><p>In the MainMenu window, click Currency Converter, double-click Quit NewApplication, and type <code>Quit Currency Converter</code>.</p><div class="item_figure"><img src = "../art/menu.gif" alt = "image: ../art/menu.gif" width="338" height="224"></div></li><li class="li"><p>Click Help and replace “New Application Help” with “Currency Converter Help”.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-BABHFHBH" title="Configure a Text Field"></a><h3>Configure a Text Field</h3><p>The Interface Builder palette window contains several user-interface elements or controls that you can drag into a window or menu to create an application’s user interface. You open the Interface Builder palette window—shown in <span class="content_text">Figure 1-7</span>—by choosing Tools > Palettes > Show Palettes.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-SW1" title="Figure 1-7Cocoa text controls in the Interface Builder palette window"></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>Cocoa text controls in the Interface Builder palette window</p><img src = "../art/palette_text.gif" alt = "" width="331" height="210"></div><br/><ol class="ol"><li class="li"><p>Click the text toolbar item in the palette window (shown as the third toolbar item in <span class="content_text">Figure 1-7</span>) and drag a text field object to the top-right corner of the Currency Converter window. Notice that Interface Builder helps you place objects according to the Apple human interface guidelines by displaying layout guides when an object is dragged close to the proper distance from neighboring objects or the edge of the window.</p></li><li class="li"><p>Increase the text field’s size so that it’s about 50% wider. Resize the text field by grabbing a handle and dragging in the direction you want it to grow. In this case, drag the left handle to the left to enlarge the text field, as shown in <span class="content_text">Figure 1-8</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW9" title="Figure 1-8Resizing a text field"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>Resizing a text field</p><img src = "../art/textfield_resize.gif" alt = "" width="369" height="216"></div></li></ol><p>Currency Converter needs two more text fields, both the same size as the first. There are two options: You can drag another text field from the palette to the window and make it the same size as the first one; or you can duplicate the text field already in the window.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABIFHHC" title="Duplicate an Object"></a><h3>Duplicate an Object</h3><p>To duplicate the text field in the Currency Converter window:</p><ol class="ol"><li class="li"><p>Select the text field, if it is not already selected.</p></li><li class="li"><p>Choose Duplicate (Command-D) from the Edit menu. The new text field appears slightly offset from the original field. </p></li><li class="li"><p>Position the new text field under the first text field. Notice that the layout guides appear and Interface Builder snaps the text field into place.</p></li><li class="li"><p>To make the third text field, press Command-D. Notice that Interface Builder remembered the offset from the previous Duplicate command and automatically applied it to the newly created text field.</p></li></ol><p>As a shortcut, you can also Option-drag the original text field to duplicate it.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABGEAHE" title="Change the Attributes of a Text Field"></a><h3>Change the Attributes of a Text Field</h3><p>The bottom text field displays the results of the currency-conversion computation and should therefore have different attributes than the other text fields: It must not be editable by the user.</p><ol class="ol"><li class="li"><p>Select the third text field.</p></li><li class="li"><p>In the NSTextField inspector, choose Attributes from the pop-up menu.</p></li><li class="li"><p>Deselect the Editable option so that users are not allowed to alter the contents of the text field. Make sure the Selectable option is selected so that users can copy and paste the contents of the text field to other applications.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-BABIAHDG" title="Assign Labels to the Fields"></a><h3>Assign Labels to the Fields</h3><p>Text fields without labels would be confusing, so add labels by using the ready-made label object from the Text palette.</p><ol class="ol"><li class="li"><p>Drag a System Font Text element onto the window from the Cocoa Text palette.</p><div class="item_figure"><img src = "../art/text.gif" alt = "image: ../art/text.gif" width="368" height="216"></div></li><li class="li"><p>In the NSTextField inspector, enter <code>Exchange Rate per $1:</code> in the Title text field.</p></li><li class="li"><p>Make the text label right aligned. With the System Font Text element selected, click the third button from the left in the Alignment area in the inspector, as shown in <span class="content_text">Figure 1-9</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW14" title="Figure 1-9Right-aligning a text label in Interface Builder"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF171" title="Figure 1-9Right-aligning a text label in Interface Builder"></a><strong>Figure 1-9&nbsp;&nbsp;</strong>Right-aligning a text label in Interface Builder</p><img src = "../art/text_align.gif" alt = "" width="260" height="402"></div></li><li class="li"><p>Duplicate the text label twice. Set the title of the second text label to “Dollars to Convert:” and the title for the third text label to “Amount in Other Currency:”.</p></li><li class="li"><p>Align the new text labels as shown in <span class="content_text">Figure 1-10</span>. You may need to expand the text labels so that their entire titles are visible.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBCFDAE" title="Figure 1-10Aligned text fields and labels in Interface Builder"></a><p><strong>Figure 1-10&nbsp;&nbsp;</strong>Aligned text fields and labels in Interface Builder</p><img src = "../art/window_text_fields.gif" alt = "" width="368" height="217"></div></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-BABGCCIJ" title="Configure a Button"></a><h3>Configure a Button</h3><p>The currency conversion should be invoked either by clicking a button or pressing Return.</p><ol class="ol"><li class="li"><p>Drag the Button element from the Cocoa Controls palette to the bottom-right corner of the window.</p></li><li class="li"><p>Double-click the button and change its title to “Convert”.</p></li><li class="li"><p>Choose Attributes from the NSButton inspector pop-up menu and then choose Return from the Key Equiv pop-up menu. This makes the button respond to the Return key as well as clicks.</p></li><li class="li"><p>Align the button under the text fields:</p><ol class="ol"><li class="ol ol"><p>Drag the button downward until the layout guide appears and then release it.</p></li><li class="ol ol"><p>With the button still selected, hold down the Option key. If you move the pointer around, Interface Builder shows you the distance from the button to the object over which the pointer is hovering.</p></li><li class="ol ol"><p>With the Option key still down and the pointer over the Amount in Other Currency text field, use the arrow keys to nudge the button so that its center is aligned with the center of the text field, as shown in <span class="content_text">Figure 1-11</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW10" title="Figure 1-11Measuring distances in Interface Builder"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF172" title="Figure 1-11Measuring distances in Interface Builder"></a><strong>Figure 1-11&nbsp;&nbsp;</strong>Measuring distances in Interface Builder</p><img src = "../art/window_button.gif" alt = "" width="368" height="216"></div></li></ol></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-BABCJGAH" title="Add a Horizontal Decorative Line"></a><h3>Add a Horizontal Decorative Line</h3><p>You probably noticed that the final interface for Currency Converter has a decorative line between the text fields and the button. To add the line to the Currency Converter window:</p><ol class="ol"><li class="li"><p>Drag a horizontal line element from the Cocoa Controls palette to the Currency Converter window.</p></li><li class="li"><p>Drag the endpoints of the line until the line extends across the window, as shown in <span class="content_text">Figure 1-12</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW11" title="Figure 1-12Adding a horizontal line to the Currency Converter window"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF173" title="Figure 1-12Adding a horizontal line to the Currency Converter window"></a><strong>Figure 1-12&nbsp;&nbsp;</strong>Adding a horizontal line to the Currency Converter window</p><img src = "../art/window_line.gif" alt = "" width="369" height="216"></div></li><li class="li"><p>Move the Convert button up until the layout guide appears below the Amount in Other Currency text field, and shorten the window until the horizontal layout guide appears below the Convert button.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF113" title="Interface Layout and Object Alignment"></a><h3>Interface Layout and Object Alignment</h3><p>In order to make an attractive user interface, you must be able to visually align interface objects in rows and columns. “Eyeballing” the alignments can be very difficult; and typing in x/y coordinates by hand is tedious and time consuming. Aligning Aqua interface elements is made even more difficult because the elements have shadows and user interface guideline metrics do not typically take the shadows into account. Interface Builder uses visual guides and layout rectangles to help you with object alignment.</p><p>In Cocoa, all drawing is done within the bounds of an object’s frame. Because interface objects have shadows, they do not visually align correctly if you align the edges of the frames. For example, the Apple user interface guidelines say that a push button should be 20 pixels tall, but you actually need a frame of 32 pixels for both the button and its shadow. The layout rectangle is what you must align. You can view the layout rectangles of objects in Interface Builder using the Show Layout Rectangles command (Command-L) in the Layout menu.</p><p>Interface Builder gives you several ways to align objects in a window:</p><ul class="spaceabove"><li class="li"><p>Dragging objects with the mouse in conjunction with the layout guides</p></li><li class="li"><p>Pressing arrow keys (with the grid off, the selected objects move one pixel)</p></li><li class="li"><p>Using a reference object to put selected objects in rows and columns</p></li><li class="li"><p>Using the built-in alignment functions</p></li><li class="li"><p>Specifying origin points in the Size pane in the inspector</p></li></ul><p>The Alignment and Guides submenus in the Layout menu provide various alignment commands and tools, including the Alignment window, which contains controls you can use to perform common alignment operations.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABFIFJI" title="Finalize the Window Layout"></a><h3>Finalize the Window Layout</h3><p>Currency Converter’s interface is almost complete. The finishing touch is to resize the window so that all the user-interface elements are centered and properly aligned to each edge. Currently, the objects are aligned only to the top and right edges.</p><p>Perform these steps to finalize the Currency Converter window:</p><ol class="ol"><li class="li"><p>Select the Amount in Other Currency text label and extend the selection (Shift-click) to include the other two.</p></li><li class="li"><p>Resize all the labels to their minimum width by choosing Size to Fit in the Layout menu.</p></li><li class="li"><p>Choose Same Size from the Layout menu to make the selected text labels the same size.</p></li><li class="li"><p>Choose Layout > Alignment > Align Left Edges.</p></li><li class="li"><p>Drag the labels towards the left edge of the window, and release them when the layout guide appears.</p></li><li class="li"><p>Select the three text fields and drag them to the left, again using the guides to help you find the proper position.</p></li><li class="li"><p>Shorten the horizontal separator and move the button into position again under the text fields.</p></li><li class="li"><p>Make the window shorter and narrower until the layout guides appear to the right of the text fields and below the Convert button.</p></li></ol><p>At this point the application’s window should look like <span class="content_text">Figure 1-13</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBEDGHD" title="Figure 1-13Currency Converter&acirc;&#128;&#153;s final user interface in Interface Builder"></a><p><strong>Figure 1-13&nbsp;&nbsp;</strong>Currency Converter’s final user interface in Interface Builder</p><img src = "../art/window_final.gif" alt = "" width="338" height="199"></div><br/><a name="//apple_ref/doc/uid/TP30001111-CH205-BABFEFIJ" title="Enable Tabbing Between Text Fields"></a><h3>Enable Tabbing Between Text Fields</h3><p>The final step in composing the Currency Converter user interface has more to do with behavior than with appearance. You want the user to be able to tab from the first editable field to the second, and back to the first. Many objects in Interface Builder’s palettes have an outlet named <code>nextKeyView</code>. This variable identifies the next object to receive keyboard events when the user presses the Tab key (or the previous object when Shift-Tab is pressed). A Cocoa application by default makes its “best guess” about how to handle text field tabbing, but this guess often produces unexpected results. If you want correct interfield tabbing, you must connect fields through the <code>nextKeyView</code> outlet:</p><ol class="ol"><li class="li"><p>Select the Exchange Rate text field.</p></li><li class="li"><p>Control-drag a connection from the Exchange Rate text field to the Dollars to Convert text field, as shown in <span class="content_text">Figure 1-14</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW15" title="Figure 1-14Connecting nextKeyView outlets in Interface Builder"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF174" title="Figure 1-14Connecting nextKeyView outlets in Interface Builder"></a><strong>Figure 1-14&nbsp;&nbsp;</strong>Connecting <code>nextKeyView</code> outlets in Interface Builder</p><img src = "../art/window_nextkey.gif" alt = "" width="597" height="402"></div></li><li class="li"><p>In the inspector for the Dollars to Convert text field click Outlets, select <code>nextKeyView</code>, and click Connect. The <code>nextKeyView</code> outlet identifies the next object to respond to events after the Tab key is pressed.</p></li><li class="li"><p>Repeat the same procedure, going from the Dollars to Convert text field to the Exchange Rate text field.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF140" title="Set the First Responder for the Currency Converter Window"></a><h3>Set the First Responder for the Currency Converter Window</h3><p>In <span class="content_text"><a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-BABFEFIJ">Enable Tabbing Between Text Fields</a></span>, you set up the key view loop using Interface Builder, establishing connections between the <code>nextKeyView</code> outlets of the two text fields. Now you must set the window’s <code>initialFirstResponder</code> outlet to the text field that you want selected when the window is first displayed onscreen. If you do not set this outlet, the window sets a key loop and picks a default initial first responder for you (not necessarily the same as the one you would have specified).</p><p>To set the <code>initialFirstResponder</code> outlet for the Currency Converter window:</p><ol class="ol"><li class="li"><p>Control-drag a connection from the Window instance in the <code>MainMenu.nib</code> window to the Exchange Rate text field, as shown in <span class="content_text">Figure 1-15</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW16" title="Figure 1-15Setting the initialFirstResponder outlet in Interface Builder"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF175" title="Figure 1-15Setting the initialFirstResponder outlet in Interface Builder"></a><strong>Figure 1-15&nbsp;&nbsp;</strong>Setting the <code>initialFirstResponder</code> outlet in Interface Builder</p><img src = "../art/window_first_responder.gif" alt = "" width="597" height="418"></div></li><li class="li"><p>In the inspector for the Exchange Rate text field, select <code>initialFirstResponder</code> and click Connect.</p></li></ol><p>The Currency Converter user interface is now complete.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABFEBJH" title="Test the Interface"></a><h3>Test the Interface</h3><p>Interface Builder lets you test an application’s user interface without having to write code. To test the Currency Converter user interface:</p><ol class="ol"><li class="li"><p>Choose File > Save to save your work.</p></li><li class="li"><p>Choose File > Test Interface.</p></li><li class="li"><p>Try various user operations, such as tabbing, and cutting and pasting between text fields.</p></li><li class="li"><p>When finished, choose Quit Currency Converter from the Interface Builder application menu to exit test mode.</p></li></ol><p>Notice that the screen position of the Currency Converter window in Interface Builder is used as the initial position for the window when the application is launched. Place the window near the top left corner of the screen so that it’s in a convenient (and traditional) initial location.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF114" title="Defining the ConverterController Class"></a><h2>Defining the ConverterController Class</h2><p>Interface Builder is a versatile tool for application developers. It enables you to not only to compose the application’s graphical user interface, but it gives you a way to define much of the programmatic interface of the application’s classes and to connect the objects eventually created from those classes.</p><p>The following sections show how to define the ConverterController class and connect it to Currency Converter’s user interface.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF154" title="Classes and Objects"></a><h3>Classes and Objects</h3><p>To newcomers, explanations of object-oriented programming might seem to use the terms “object” and “class” interchangeably. Are an object and a class the same thing? And if not, how are they different? How are they related?</p><p>An object and a class are both programmatic units. They are closely related, but serve quite different purposes in a program.</p><p>First, classes provide a taxonomy of objects, a useful way of categorizing them. Just as you can say that a particular tree is a pine tree, you can identify a particular software object by its class. You can thereby know its purpose and what messages you can send it. In other words, a class describes the type of an object.</p><p>Second, you use classes to generate instances of them—or objects. Classes define the data structures and behavior of their instances, and at run time create and initialize these instances. In a sense, a class is like a factory, stamping out instances of itself (objects of its class) when requested.</p><p>What especially differentiates a class from its instance is data. An instance has its own unique set of data, but its class, strictly speaking, does not. The class defines the structure of the data its instances have, but only instances can hold data. The class also implements the behavior of all its instances in a running program.</p><p>Implicit in the notion of a taxonomy is inheritance, a key property of classes. Classes exist in a hierarchical relationship to one another, with a subclass inheriting behavior and data structures from its superclass, which in turn inherits from its superclass.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABHFAHC" title="Specify the ConverterController Class"></a><h3>Specify the ConverterController Class</h3><p>You must go to the Classes pane of the nib file window to define a class. To design the ConverterController class:</p><ol class="ol"><li class="li"><p>In the <code>MainMenu.nib</code> window, click Classes.</p></li><li class="li"><p>In the leftmost column of the browser, select <code>java.lang.Object</code> and press Return to create a <code>java.lang.Object</code> subclass called MyObject.</p></li><li class="li"><p>Type <code>ConverterController</code> to rename MyObject, and press Return. <span class="content_text">Figure 1-16</span> shows the result of this operation.</p><p></p></li></ol><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-SW2" title="Figure 1-16Subclassing java.lang.Object"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF176" title="Figure 1-16Subclassing java.lang.Object"></a><strong>Figure 1-16&nbsp;&nbsp;</strong>Subclassing <code>java.lang.Object</code></p><img src = "../art/instance_controller.gif" alt = "" width="330" height="231"></div><br/><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF155" title="Paths for Object Communication: Outlets, Targets, and Actions"></a><h3>Paths for Object Communication: Outlets, Targets, and Actions</h3><p>In Interface Builder, you specify the paths for messages traveling between the ConverterController object and other objects as outlets and actions.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF156" title="Outlets"></a><h4>Outlets</h4><p>An <strong>outlet</strong> is an instance variable that identifies an object. <span class="content_text">Figure 1-17</span> illustrates how an outlet in one object points to another object.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-SW3" title="Figure 1-17An outlet pointing from one object to another"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF177" title="Figure 1-17An outlet pointing from one object to another"></a><strong>Figure 1-17&nbsp;&nbsp;</strong>An outlet pointing from one object to another</p><img src = "../art/outlet.gif" alt = "" width="269" height="92"></div><br/><p>Objects can communicate with other objects in an application by sending messages to outlets.</p><p>An outlet can reference any object in an application: user-interface objects such as text fields and buttons, windows and dialogs, instances of custom classes, and even the application object itself. What distinguishes outlets is their relationship to Interface Builder.</p><p>Outlets are declared as:</p><p><code>public Object variableName;</code></p><p>You might notice that though the outlet type is labeled <code>id</code> in Interface Builder, the variable in the source file is declared with the type <code>Object</code>. This is simply a consequence of the Java specification—since Java is a strongly typed language, the object cannot directly act as a Cocoa <code>id</code> object (which represents a dynamically typed object).</p><p>Since <code>Object</code> refers to an arbitrary object type, you can—and should, in most cases—statically type outlets with the appropriate class:</p><p><code>IBOutlet NSButton myButton;</code></p><p>Xcode helps you remember what objects are Interface Builder outlets by appending a comment to the declaration:</p><p><code>IBOutlet NSButton myButton; /* IBOutlet */</code></p><p>This comment is added automatically if the outlet is originally declared in Interface Builder. If you add the outlet explicitly to your class definition, it is good practice to add this comment yourself. It helps you distinguish between interface outlets and other noninterface objects in the future.</p><p>Interface Builder can recognize outlets in code by their declarations, and it can initialize outlets. You usually set an outlet’s target in Interface Builder by drawing connection lines between objects. There are ways other than outlets to reference objects in an application, but outlets and Interface Builder’s facility for initializing them are a great convenience.</p><p>At application load time, the instance variables that represent outlets are initialized to point to the corresponding target. For example, the <code>rateField</code> of the ConverterController instance would be initialized with a reference to the Exchange Rate text field object (see <span class="content_text"><a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF117">Connect the ConverterController Class to the Text Fields</a></span> for details). When an outlet is not connected, the value of the corresponding instance variable is <code>null</code>.</p><p>It might help to understand connections by imagining an electrical outlet plugged into the destination object. Also picture an electrical cord extending from the outlet in the source object. Before the connection is made, the cord is not plugged in, and the value of the outlet is <code>null</code>; after the connection is made (the cord is plugged in), a reference to the destination object is assigned to the source object’s outlet.</p><p>You are free to use all Java language features in your code, but in rare situations, you may need to know something about the Cocoa implementation and its implications for Java code.</p><p>The Cocoa classes are implemented in Objective-C. When you use a Cocoa class from Java, you are using a Java “wrapper” class for the Objective-C class of the same name. An instance of such a class is actually an Objective-C instance. In this example, you are using the NSTextField Java class that wraps the Objective-C NSTextField class.</p><p>Java uses automatic garbage collection to manage dynamic memory; Objective-C, on the other hand, uses a retain-release reference-counting mechanism that is only semiautomatic. You will almost never have to concern yourself with the interaction between these two mechanisms if you take note of the following advice: Be sure that an object has been assigned to a instance variable before you use it as a target, a delegate, or an NSTableView item.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF158" title="Target/Action in Interface Builder"></a><h4>Target/Action in Interface Builder</h4><p>You can view (and complete) target/action connections in the Connections pane in the Interface Builder inspector. This pane is easy to use, but the relation of target and action in it might not be apparent. First, a <strong>target</strong> is an outlet of a cell object that identifies the recipient of an action message. Well, you may say, what’s a cell object and what does it have to do with a button?</p><p>One or more cell objects are always associated with a control object (that is, an object inheriting from NSControl, such as a button). Control objects “drive” the invocation of action methods, but they get the target and action from a cell. NSActionCell defines the target and action outlets, and most kinds of cells in AppKit inherit these outlets.</p><p>For example, when a user clicks the Convert button in the Currency Converter window, the button gets the required information from its cell and invokes the <code>convert</code> method on the target outlet object, which is an instance of the custom class ConverterController. <span class="content_text">Figure 1-18</span> shows the interactions between the ConverterController class, the Convert button, and the Amount in Other Currency field.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-SW12" title="Figure 1-18Relationships in the target-action paradigm"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF178" title="Figure 1-18Relationships in the target-action paradigm"></a><strong>Figure 1-18&nbsp;&nbsp;</strong>Relationships in the target-action paradigm</p><img src = "../art/targetaction.gif" alt = "" width="296" height="191"></div><br/><p>In the Actions column in the Connections pane in the inspector are all action methods defined by the class of the target object and known by Interface Builder. Interface Builder identifies action methods because their names follow the syntax:</p><p><code>public void myAction(Object sender)</code></p><p>Here, it looks for the argument <code>sender</code>.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF159" title="Which Direction to Connect?"></a><h4>Which Direction to Connect?</h4><p>Usually the outlets and actions that you connect belong to a custom subclass of <code>java.lang.Object</code>. For these occasions, you need only to follow a simple rule to know which way to specify a connection in Interface Builder. Create the connection from the object that sends the message to the object that receives the message:</p><ul class="spaceabove"><li class="li"><p>To make an action connection, create the connection from an element in the user interface, such as a button or a text field, to the custom instance you want to send the message to.</p></li><li class="li"><p>To make an outlet connection, create the connection from the custom instance to another object (another instance or user-interface element) in the application.</p></li></ul><p>These are only rules of thumb for common cases and do not apply in all circumstances. For instance, many Cocoa objects have a delegate outlet. To connect these, you draw a connection line from the Cocoa object to your custom object.</p><p>Another way to clarify connections is to consider who needs to find whom. With outlets, the custom object needs to find some other object, so the connection is from the custom object to the other object. With actions, the control object needs to find the custom object, so the connection is from the control object to the custom object.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABJDCED" title="Define the User Interface and Model Outlets of the ConverterController Class"></a><h3>Define the User Interface and Model Outlets of the ConverterController Class</h3><p>ConverterController needs to communicate with the user-interface elements in the Currency Converter window. It must also communicate with an instance of the Converter class, defined in <span class="content_text"><a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF119">Defining the Converter Class</a></span>. The Converter class implements the conversion computation.</p><p>To add the outlets required by the ConverterController class:</p><ol class="ol"><li class="li"><p>Select ConverterController in the Classes pane in the <code>MainMenu.nib</code> window.</p></li><li class="li"><p>Choose Add Outlet to ConverterController from the Classes menu, or:</p><ol class="ol"><li class="ol ol"><p>Choose Attributes from the inspector pop-up menu.</p></li><li class="ol ol"><p>Click 0 Outlets.</p></li><li class="ol ol"><p>Click Add.</p></li></ol></li><li class="li"><p>Name this outlet <code>rateField</code> and press Return.</p></li><li class="li"><p>Since the <code>rateField</code> outlet is still selected, all you have to do to create more outlets is press Return. Do this once to create the <code>dollarField</code> outlet, and again for the <code>amountField</code> outlet.</p></li><li class="li"><p>Add another outlet named “converter”. This is the outlet ConverterController will use to communicate with the Converter instance. (The Converter class is defined later in this chapter.)</p></li></ol><p>Notice the Type column in the table of outlets. By default, the type of outlets is set to <code>id</code>. It rarely works to leave it as <code>id</code>—Java is a statically typed language, and the Java compiler will not compile your program if it invoked any methods implemented by Cocoa classes on an object declared as <code>id</code>. You may sometimes get lucky—for example, if you do not call any of the object’s intended class methods—but it’s a good idea to get into the habit of setting the types for outlets. (This practice is not required when using Objective-C but improves the application’s performance.) Change the type of the three outlets to <code>NSTextField</code> by choosing it from the pop-up menus currently set to <code>id</code>.</p><p>The result of these operations is shown in <span class="content_text">Figure 1-19</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001111-CH205-SW5" title="Figure 1-19Outlets and actions in the ConverterController inspector"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF179" title="Figure 1-19Outlets and actions in the ConverterController inspector"></a><strong>Figure 1-19&nbsp;&nbsp;</strong>Outlets and actions in the ConverterController inspector</p><img src = "../art/controller_outlets.gif" alt = "" width="260" height="402"></div><br/><a name="//apple_ref/doc/uid/TP30001111-CH205-BABFFABF" title="Define the Actions of the ConverterController Class"></a><h3>Define the Actions of the ConverterController Class</h3><p>ConverterController has one action method, <code>convert</code>. When the user clicks the Convert button, the <code>convert</code> method is invoked on the target object, an instance of ConverterController. “Action” refers both to a message sent to an object when the user clicks a button or manipulates some other control object and to the method that is invoked. To add the <code>convert</code> method to ConverterController:</p><ol class="ol"><li class="li"><p>Select ConverterController in the Classes pane in the <code>MainMenu.nib</code> window.</p></li><li class="li"><p>Choose Add Action to ConverterController from the Classes menu, or:</p><ol class="ol"><li class="ol ol"><p>Choose Attributes from the inspector pop-up menu.</p></li><li class="ol ol"><p>Click 0 Actions.</p></li><li class="ol ol"><p>Click Add.</p></li></ol></li><li class="li"><p>Type <code>convert()</code> in the Action Name list and press Return.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF115" title="Interconnecting the ConverterController Class and the User Interface"></a><h2>Interconnecting the ConverterController Class and the User Interface</h2><p>The following sections show how to connect the Converter Controller user interface and the ConverterController class to each other.</p><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF116" title="Create an Instance of the ConverterController Class"></a><h3>Create an Instance of the ConverterController Class</h3><p>As the final step of defining a class in Interface Builder, you create an instance of the ConverterController class and connect its outlets and actions. To carry out this task, perform these steps:</p><ol class="ol"><li class="li"><p>Select ConverterController in the Classes pane in the <code>MainMenu.nib</code> window.</p></li><li class="li"><p>Choose Instantiate ConverterController from the Classes menu. The instance appears in the Instances pane as shown in <span class="content_text">Figure 1-20</span>. Notice that the instance has a yellow badge with an exclamation point next to it. This means the instance contains unconnected outlets.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-CJBBGJAE" title="Figure 1-20A newly instantiated ConverterController instance"></a><p><strong>Figure 1-20&nbsp;&nbsp;</strong>A newly instantiated ConverterController instance</p><img src = "../art/controller_instance.gif" alt = "" width="331" height="233"></div></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF117" title="Connect the ConverterController Class to the Text Fields"></a><h3>Connect the ConverterController Class to the Text Fields</h3><p>By connecting it to specific objects in the interface, you initialize its outlets. ConverterController uses these outlets to get and set values in the user interface. Follow these steps to connect the ConverterController instance to the user interface:</p><ol class="ol"><li class="li"><p>In the Instances pane in the nib file window, Control-drag a connection from the ConverterController instance to the Exchange Rate text field.</p></li><li class="li"><p>Interface Builder displays the Connections pane of the inspector. Select the outlet that corresponds to the first field, <code>rateField</code>.</p></li><li class="li"><p>Click Connect, as shown in <span class="content_text">Figure 1-21</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW4" title="Figure 1-21Connecting ConverterController to the rateField outlet"></a><p><a name="//apple_ref/doc/uid/TP30001111-CH205-BABHHHIF" title="Figure 1-21Connecting ConverterController to the rateField outlet"></a><strong>Figure 1-21&nbsp;&nbsp;</strong>Connecting ConverterController to the <code>rateField</code> outlet</p><img src = "../art/controller_ratefield.gif" alt = "" width="606" height="408"></div></li><li class="li"><p>Following the same steps, connect ConverterController’s <code>dollarField</code> and <code>amountField</code> outlets to the appropriate text fields.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF118" title="Connect the Convert Button to the ConverterController convert Action Method"></a><h3>Connect the Convert Button to the ConverterController convert Action Method</h3><p>Follow these steps to connect the user interface elements in the Currency Converter window to the methods of the ConverterController class:</p><ol class="ol"><li class="li"><p>Control-drag a connection from the Convert button to the ConverterController instance in the nib file window.</p></li><li class="li"><p>In the Connections pane in the nib file window, make sure the Target/Action pane is displayed.</p></li><li class="li"><p>Select <code>convert()</code> in the Actions in ConverterController list and click Connect.</p></li><li class="li"><p>Save the nib file.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH205-TPXREF119" title="Defining the Converter Class"></a><h2>Defining the Converter Class</h2><p>While connecting ConverterController’s outlets, you probably noticed that one outlet remains unconnected: <code>converter</code>. This outlet identifies an instance of the Converter class in the Currency Converter application, but this instance doesn’t exist yet.</p><p>The Converter implements a <strong>model object</strong>. Model objects contain special knowledge and expertise. They hold data and define the logic that manipulates that data. For example, a customer object, common in business applications, is a model object. Since instances of this type of class don’t communicate directly with the user interface, there is no need for outlets or actions. Here are the steps to be completed:</p><ol class="ol"><li class="li"><p>In the Classes pane in the nib file window, create a subclass of <code>java.lang.Object</code> named “Converter”. See <span class="content_text"><a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-BABHFAHC">Specify the ConverterController Class</a></span> for details.</p><div class="item_figure"><img src = "../art/converter_class.gif" alt = "image: ../art/converter_class.gif" width="331" height="232"></div></li><li class="li"><p>Instantiate the Converter class. See <span class="content_text"><a href="02creating.html#//apple_ref/doc/uid/TP30001111-CH205-TPXREF116">Create an Instance of the ConverterController Class</a></span> for details.</p><div class="item_figure"><img src = "../art/converter_instance.gif" alt = "image: ../art/converter_instance.gif" width="330" height="232"></div></li><li class="li"><p>Connect the <code>converter</code> outlet of the ConverterController instance to the Converter instance, as shown in <span class="content_text">Figure 1-22</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001111-CH205-SW6" title="Figure 1-22Connecting ConverterController.converter to the Converter instance"></a><p><strong>Figure 1-22&nbsp;&nbsp;</strong>Connecting <code>ConverterController.converter</code> to the Converter instance</p><img src = "../art/controller_converter_conn.gif" alt = "" width="586" height="408"></div></li><li class="li"><p>Save the nib file.</p></li></ol>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../chapter01/01introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../chapter03/03implementing.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-10-03<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/JavaTutorial/chapter02/02creating.html%3Fid%3DTP30001111-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/JavaTutorial/chapter02/02creating.html%3Fid%3DTP30001111-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/JavaTutorial/chapter02/02creating.html%3Fid%3DTP30001111-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
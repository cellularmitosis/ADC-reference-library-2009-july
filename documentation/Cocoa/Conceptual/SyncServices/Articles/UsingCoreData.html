<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Sync Services Programming Guide: Syncing Core Data Applications</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Syncing Core Data Applications"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005232" title="Syncing Core Data Applications"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../Syncing-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP40001899" target="_top">Syncing</a> &gt; <a href="../index.html" target="_top">Sync Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ControllingSyncSessions.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="SyncingPreferences.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40005232-SW1" title="Syncing Core Data Applications"></a><hr /><H1>Syncing Core Data Applications</H1><p>Core Data provides a robust and reliable persistent store ideal for syncing applications. Using Core Data to store local sync records greatly simplifies your application. When you use Core Data, you don’t need to worry about modeling your entities, saving and loading records, and tracking changes between sync sessions. However, sync clients and sync sessions are not automatically created for you, so you still need to follow some of the steps described in this document to sync your application. Managing a sync session is also simplified using a delegate, similar to the <code>ISyncSessionDriver</code> class and <code>ISyncSessionDriverDataSource</code> protocol. This article describes some of the same and alternate steps to create a syncing Core Data application.</p><p>Follow these general steps to create a Core Data application that syncs managed objects:</p><ol class="ol"><li class="li"><p>Create a Core Data application using Xcode and add <code>SyncServices.framework</code> to the project.</p><p>Read <em><!--a target="_top" -->Xcode 2 User Guide<!--/a--></em> for how to create an Xcode project from a template.</p></li><li class="li"><p>Create a managed object model using the data modeling tool in Xcode.</p><p>Read <span class="content_text"><a href="../../../../DeveloperTools/Conceptual/XcodeUserGuide20/Contents/Resources/en.lproj/design_data_model/04_designDataModeling.html#//apple_ref/doc/uid/TP40001440-CH273" target="_top">Data Modeling With Xcode</a></span> in <em><!--a target="_top" -->Xcode 2 User Guide<!--/a--></em> for how to use this tool.</p></li><li class="li"><p>Add additional syncing information to the entities and properties in the model that you want to sync.</p><p>Read <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW7">“Adding Information to Managed Object Models”</a></span> in this article for how to add this information.</p></li><li class="li"><p>Create a sync schema that registers the managed object model directly.</p><p>Read <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW8">“Registering Managed Object Models”</a></span> in this article for how to add managed object models to sync schemas.</p></li><li class="li"><p>Register the schema.</p><p>Read <span class="content_text"><a href="RegisteringSchemas.html#//apple_ref/doc/uid/TP40001154-CJBEHAAG">“Registering Schemas”</a></span> for how to register your schema.</p></li><li class="li"><p>Create and register your sync client.</p><p>Read <span class="content_text"><a href="RegisteringClients.html#//apple_ref/doc/uid/TP40001155-CJBEHAAG">“Registering Clients”</a></span> for how to create clients.</p></li><li class="li"><p>Start a sync session.</p><p>Read <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW5">“Starting Core Data Sync Sessions”</a></span> in this article for how to start a Core Data sync session.</p></li><li class="li"><p>Optionally, register a handler to control a Core Data sync session.</p><p>Read <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW4">“Controlling Core Data Sync Sessions”</a></span> in this article for how to intervene during a Core Data sync session.</p></li></ol><p> See <em><a href="../../CoreData/index.html#//apple_ref/doc/uid/TP40001075" target="_top">Core Data Programming Guide</a></em> and <em><a href="../../../Reference/CoreData_ObjC/index.html#//apple_ref/doc/uid/TP40001181" target="_top">Core Data Framework Reference</a></em> for more information about Core Data.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005232-DontLinkElementID_33" title="Note"></a><p><strong>Note:</strong>&nbsp;Core Data syncing and the managed object models schema property are available in Mac OS X v10.5 and later.</p></div><a name="//apple_ref/doc/uid/TP40005232-SW7" title="Adding Information to Managed Object Models"></a><h2>Adding Information to Managed Object Models</h2><p>Use the Xcode data modeling tool to create managed object models that work with Sync Services. However, you need to add additional information to entities and properties in the model so Sync Services knows how to handle the corresponding records during a sync session. This information is in the form of key-value pairs similar to the properties you use to create a sync schema from scratch, described in <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-CJBEHAAG">“Creating a Sync Schema.”</a></span></p><p>Typically, you use the sync pane in the Xcode data modeling tool to set the keys, as shown in <span class="content_text">Figure 1</span>. The controls in this pane correspond to the keys described in <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW2">Table 1</a></span>. You can also use the user information dictionary pane in the data modeling tool to set these keys directly. If you are creating your managed object model programmatically, use the <code><a href="../../../Reference/CoreDataFramework/Classes/NSEntityDescription_Class/Reference/NSEntityDescription.html#//apple_ref/occ/instm/NSEntityDescription/setUserInfo:" target="_top">setUserInfo:</a></code> method of the <code><a href="../../../Reference/CoreDataFramework/Classes/NSEntityDescription_Class/Reference/NSEntityDescription.html#//apple_ref/occ/cl/NSEntityDescription" target="_top">NSEntityDescription</a></code> and <code><a href="../../../Reference/CoreDataFramework/Classes/NSPropertyDescription_Class/Reference/NSPropertyDescription.html#//apple_ref/occ/cl/NSPropertyDescription" target="_top">NSPropertyDescription</a></code> classes to set these keys. This article describes how to set these keys using the data modeling tool only.</p><p>Open the managed object model in Xcode and set the keys using the controls in the sync pane. Select the managed object model file—for example, select <code>Stickies.xcdatamodel</code>—in the Groups &amp; Files outline view to edit the model. Select an entity in the entities pane of the model browser and click the sync pane icon in the detail pane as shown in <span class="content_text">Figure 1</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40005232-SW11" title="Figure 1A sync pane for an entity"></a><p><strong>Figure 1&nbsp;&nbsp;</strong>A sync pane for an entity</p><img src = "../art/notesyncpane.jpg" alt = "Note Sync Pane" ></div><br/><p>Most of the settings have default values. By default, all entities in the managed object model are synced unless you specifically deselect the Synchronize... option. You cannot change the <code>com.apple.syncservices.SyncName</code> key option using the sync pane because this key can be derived from the entity name. You can choose a data class from the Data Class combo box or type one in. The data class should use a reverse DNS-style name as in <code>com.mycompany.stickies</code> and match the data class name used in the schema file as shown in <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW6">Listing 1</a></span>. You can also select a parent from the Parent pop-up menu if applicable.</p><p>Both the entity and the property sync pane contain an “Exclude from Data Change Alert” option that corresponds to the <code>com.apple.syncservices.ExcludeFromDataChangeAlert</code> key described in <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW2">Table 1</a></span>. Use this option to reduce the number of data change alerts. Only changes to entities and properties that the user recognizes and deems significant should cause data change alerts to appear. By default, all changes cause data change alerts, so you definitely should consider selecting this option to exclude some types of changes. </p><p>For example, in the FancyStickiesUsingCoreData application, changes to the appearance of a sticky note do not trigger data change alerts but changes to the creation date and text attributes do. To configure this behavior, select the Exclude from Data Change Alert  option for all the entities and properties you want to exclude. For example, exclude changes to the <code>color</code>, <code>floating</code>, <code>shaded</code>, and <code>translucent</code> attributes of a <code>Note</code> entity.</p><a name="//apple_ref/doc/uid/TP40005232-SW2" title="Table 1Entity user information dictionary keys"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1&nbsp;&nbsp;</strong>Entity user information dictionary keys</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>com.apple.syncservices.SyncName</code></p></td><td ><p>The name of the entity that is registered with Sync Services. Typically, the sync name is different from the name used by the managed object model to refer to this entity. This key is the same as the <code>Name</code> property of an entity in a sync schema. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-139948">“Entity Properties”</a></span> for a complete description of this value. This key is optional.</p><p>If this key is not in the user information dictionary, then Sync Services attempts to construct a unique sync name as follows. If the managed object model entity name contains a <code>.</code> then it is used as the sync name. Otherwise, the sync name is the concatenation of the data class name, dot (<code>.</code>), and the entity name. For example, if the data class name is <code>com.apple.contacts</code> and the entity name is <code>Contact</code>, then the sync name is <code>com.apple.contacts.Contact</code>. </p></td></tr><tr><td  scope="row"><p><code>com.apple.syncservices.DataClass</code></p></td><td ><p>The name of the entity's data class. This key is the same as the <code>Name</code> property of a data class in a sync schema. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-139879">“Data Class Properties”</a></span> for a complete description of this value. This key is required.</p></td></tr><tr><td  scope="row"><p><code>com.apple.syncservices.Parent</code></p></td><td ><p>This key is the same as the <code>Parent</code> property of an entity in a sync schema. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-139948">“Entity Properties”</a></span> for a complete description of this value. This key is optional.</p></td></tr><tr><td  scope="row"><p><code>com.apple.syncservices.Syncable</code></p></td><td ><p>A Boolean value of <code>YES</code> or <code>NO</code>. If <code>YES</code>, this entity is synced; otherwise, it is ignored. The default value is <code>YES</code>. This key is optional.</p></td></tr><tr><td  scope="row"><p><code>com.apple.syncservices.ExcludeFromDataChangeAlert</code></p></td><td ><p>A Boolean value of <code>YES</code> or <code>NO</code>. If <code>YES</code>, a change to this entity is used by a data change alert; otherwise, it is ignored. This key is the same as the <code>ExcludeFromDataChangeAlert</code> property of an entity in a sync schema. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-139948">“Entity Properties”</a></span> for a complete description of this value. The default value is <code>NO</code>. This key is optional.</p></td></tr><tr><td  scope="row"><p><code>com.apple.syncservices.IdentityProperties</code></p></td><td ><p>The set of properties used to identify records of this entity. An array of arrays containing strings where the first array contains the identity property names (currently, any additional arrays in the parent array are ignored). This key is similar to the <code>IdentityProperties</code> property of an entity in a sync schema. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-149660">“Identity Properties”</a></span> for a complete description. By default, none of the properties are identity properties. This key is optional.</p></td></tr></table></div><p><span class="content_text">Table 2</span> describes the keys you set for a property in the managed object model. The keys are optional and have default values. For example, by default, all properties are synced and none of the properties are used to identify a record if a conflict occurs.</p><a name="//apple_ref/doc/uid/TP40005232-SW3" title="Table 2Property user information dictionary keys"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2&nbsp;&nbsp;</strong>Property user information dictionary keys</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>com.apple.syncservices.Syncable</code></p></td><td ><p>A Boolean value of <code>YES</code> or <code>NO</code>. If <code>YES</code>, this property is synced; otherwise, it is ignored. The default value is <code>YES</code>. This key is optional.</p></td></tr><tr><td  scope="row"><p><code>com.apple.syncservices.ExcludeFromDataChangeAlert</code></p></td><td ><p>A Boolean value of <code>YES</code> or <code>NO</code>. If <code>YES</code>, a change to this property is used by a data change alert; otherwise, it is ignored. This key is the same as the <code>ExcludeFromDataChangeAlert</code> property of an attribute or relationship in a sync schema. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-140094">“Attribute Properties”</a></span> for a complete description of this value. The default value is <code>NO</code>. This key is optional.</p></td></tr></table></div><p>Use the sync panel, shown in <span class="content_text">Figure 2</span>, for a property to configure these keys. Select the Synchronize option to sync a property. Select the “Identity property” option if a property should be used to identify a record. Select the “Exclude from Data Change Alert” option if a change to a property should not display a change alert. For example, in <span class="content_text">Figure 2</span>, the <code>color</code> attribute is synced and excluded from data change alerts —its value affects only the appearance of a sticky note. </p><br/><div><a name="//apple_ref/doc/uid/TP40005232-SW9" title="Figure 2A sync pane for a property"></a><p><strong>Figure 2&nbsp;&nbsp;</strong>A sync pane for a property</p><img src = "../art/colorsyncpane.jpg" alt = "Color Sync Pane" ></div><br/><p>For a property such as <code>createDate</code>, the “Identity property” option would be selected but not the “Exclude from Data Change Alert” option because a change to this property should display a change alert.</p><a name="//apple_ref/doc/uid/TP40005232-SW8" title="Registering Managed Object Models"></a><h2>Registering Managed Object Models</h2><p>If you define your entities and properties entirely in the managed object model, then all you need to do is create a sync schema and set the <code>Name</code>, <code>DataClasses</code>, and <code>ManagedObjectModels</code> properties. Read <span class="content_text"><a href="SchemaDesign.html#//apple_ref/doc/uid/TP40001153-CJBEHAAG">“Creating a Sync Schema”</a></span> for how to create a sync schema from scratch. </p><p>Use the <code>ManagedObjectModels</code> property to register the Core Data entities directly with Sync Services. For example, <span class="content_text">Listing 1</span> shows the <code>Schema.plist</code> for the Stickies sync schema used by the FrancyStickiesUsingCoreData application. You do not need to declare the entities in the schema file because this information is already in the managed object model. Next register the schema with Sync Services by following the steps in <span class="content_text"><a href="RegisteringSchemas.html#//apple_ref/doc/uid/TP40001154-CJBEHAAG">“Registering Schemas.”</a></span></p><a name="//apple_ref/doc/uid/TP40005232-SW6" title="Listing 1Stickies schema property list"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>Stickies schema property list</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;plist version="1.0"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key>DataClasses&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>ImagePath&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>Stickies.icns&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>Name&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>com.mycompany.Stickies&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;key>ManagedObjectModels&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>../../../FancyStickiesUsingCoreData.mom&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key>Name&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string>com.mycompany.Stickies&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40005232-SW5" title="Starting Core Data Sync Sessions"></a><h2>Starting Core Data Sync Sessions</h2><p>Although managing a sync session is handled for you, you still need to register your client and start sync sessions programmatically. Read <span class="content_text"><a href="RegisteringClients.html#//apple_ref/doc/uid/TP40001155-CJBEHAAG">“Registering Clients”</a></span> for how to create and register a client. The sync sessions for your Core Data application are not started automatically—it’s application-dependent how often you sync and trickle sync. For example, you might sync every time the user saves the managed object context.</p><p>Before starting any sync sessions, you need to specify where to store information about which entities to sync in the next sync session. Don’t skip this step if you want your application to trickle sync—fast sync frequently to improve performance. Send <code><a href="../../../Reference/NSPersistentStoreCoordinator_SyncServicesAdditions/NSPersistentStoreCoordinatorAdditions/NSPersistentStoreCoordinatorAdditions.html#//apple_ref/occ/instm/NSPersistentStoreCoordinator/setStoresFastSyncDetailsAtURL:forPersistentStore:" target="_top">setStoresFastSyncDetailsAtURL:forPersistentStore:</a></code> to your <code>NSPersistentStoreCoordinator</code> object to specify the detail file that is updated every sync session. Typically, you do this just after you create the <code>NSPersistentStoreCoordinator</code> object.</p><p>Send <code><a href="../../../Reference/NSPersistentStoreCoordinator_SyncServicesAdditions/NSPersistentStoreCoordinatorAdditions/NSPersistentStoreCoordinatorAdditions.html#//apple_ref/occ/instm/NSPersistentStoreCoordinator/syncWithClient:inBackground:handler:error:" target="_top">syncWithClient:inBackground:handler:error:</a></code> to your <code>NSPersistentStoreCoordinator</code> object to begin a sync session, as in this code fragment:</p><div class="codesample"><table><tr><td scope="row"><pre>[[[self managedObjectContext] persistentStoreCoordinator] syncWithClient:client inBackground:NO handler:self error:&amp;error];<span></span></pre></td></tr></table></div><p>Optionally, you can sync asynchronously in the background by passing <code>YES</code> as the <code>inBackground:</code> parameter. Otherwise, you block the user interface while syncing. The advantage of blocking the user interface is that users can’t edit managed objects and create conflicts that need to be resolved after syncing.</p><p>If you need to process managed objects before the pushing and after the pulling phases of a sync session—for example, convert Core Data data types to Sync Services data types—then read <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW4">“Controlling Core Data Sync Sessions.”</a></span></p><a name="//apple_ref/doc/uid/TP40005232-SW4" title="Controlling Core Data Sync Sessions"></a><h2>Controlling Core Data Sync Sessions</h2><p>If you register a handler with your <code>NSPersistentStoreCoordinator</code> object that conforms to the <code><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/NSPersistentStoreCoordinatorSyncing/NSPersistentStoreCoordinatorSyncing.html#//apple_ref/occ/intf/NSPersistentStoreCoordinatorSyncing" target="_top">NSPersistentStoreCoordinatorSyncing</a></code> protocol, then you can intervene during a sync session to control how managed objects are pushed and pulled. This is very similar to how you control a sync session using the <code>ISyncSessionDriver</code> class described in <span class="content_text"><a href="ControllingSyncSessions.html#//apple_ref/doc/uid/TP40003600-SW4">“Using a Session Driver.”</a></span> The responsibility of the handler is to optionally intervene during the syncing process to perform application-specific tasks.</p><p>You set a handler when you start a sync session using the <code><a href="../../../Reference/NSPersistentStoreCoordinator_SyncServicesAdditions/NSPersistentStoreCoordinatorAdditions/NSPersistentStoreCoordinatorAdditions.html#//apple_ref/occ/instm/NSPersistentStoreCoordinator/syncWithClient:inBackground:handler:error:" target="_top">syncWithClient:inBackground:handler:error:</a></code> method as show in <span class="content_text"><a href="UsingCoreData.html#//apple_ref/doc/uid/TP40005232-SW5">“Starting Core Data Sync Sessions.”</a></span> All the methods in the <code><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/NSPersistentStoreCoordinatorSyncing/NSPersistentStoreCoordinatorSyncing.html#//apple_ref/occ/intf/NSPersistentStoreCoordinatorSyncing" target="_top">NSPersistentStoreCoordinatorSyncing</a></code> protocol are optional, although some are recommended.</p><p>If you sync asynchronously, by passing <code>YES</code> as the <code>inBackground:</code> parameter to the <code><a href="../../../Reference/NSPersistentStoreCoordinator_SyncServicesAdditions/NSPersistentStoreCoordinatorAdditions/NSPersistentStoreCoordinatorAdditions.html#//apple_ref/occ/instm/NSPersistentStoreCoordinator/syncWithClient:inBackground:handler:error:" target="_top">syncWithClient:inBackground:handler:error:</a></code> method, then you should also implement the <code><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/NSPersistentStoreCoordinatorSyncing/NSPersistentStoreCoordinatorSyncing.html#//apple_ref/occ/intfm/NSPersistentStoreCoordinatorSyncing/managedObjectContextsToMonitorWhenSyncingPersistentStoreCoordinator:" target="_top">managedObjectContextsToMonitorWhenSyncingPersistentStoreCoordinator:</a></code> protocol method.</p><p>It is recommended that you at least implement the <code><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/NSPersistentStoreCoordinatorSyncing/NSPersistentStoreCoordinatorSyncing.html#//apple_ref/occ/intfm/NSPersistentStoreCoordinatorSyncing/managedObjectContextsToReloadAfterSyncingPersistentStoreCoordinator:" target="_top">managedObjectContextsToReloadAfterSyncingPersistentStoreCoordinator:</a></code>  method to return your persistent store coordinator objects; otherwise, it’s your responsibility to reload the persistent store coordinator objects after a sync session. Use the <code><a href="../../../Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/refreshObject:mergeChanges:" target="_top">refreshObject:mergeChanges:</a></code> method of <code>NSManagedObjectContext</code> to refresh an object.</p><p>Use the other methods in the <code>NSPersistentStoreCoordinator</code> to modify the behavior of a Core Data application sync session. For example, the FancyStickiesUsingCoreData application implements the <code><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/NSPersistentStoreCoordinatorSyncing/NSPersistentStoreCoordinatorSyncing.html#//apple_ref/occ/intfm/NSPersistentStoreCoordinatorSyncing/persistentStoreCoordinator:willPushRecord:forManagedObject:inSyncSession:" target="_top">persistentStoreCoordinator:willPushRecord:forManagedObject:inSyncSession:</a></code> method to transform the data type of the <code>color</code> property of a Note object from an <code>NSData</code> to an <code>NSColor</code> object before pushing the record. Conversely, FancyStickiesUsingCoreData implements the <code><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/NSPersistentStoreCoordinatorSyncing/NSPersistentStoreCoordinatorSyncing.html#//apple_ref/occ/intfm/NSPersistentStoreCoordinatorSyncing/persistentStoreCoordinator:willApplyChange:toManagedObject:inSyncSession:" target="_top">persistentStoreCoordinator:willApplyChange:toManagedObject:inSyncSession:</a></code> method to transform the data type from an <code>NSColor</code> to an <code>NSData</code> object before applying the change.</p><p>Read <em><a href="../../../Reference/NSPersistentStoreCoordinator_SyncServicesAdditions/index.html#//apple_ref/doc/uid/TP40005177" target="_top">NSPersistentStoreCoordinator Sync Services Additions Reference</a></em> and <em><a href="../../../Reference/NSPersistentStoreCoordinatorSyncing_Protocol/index.html#//apple_ref/doc/uid/TP40005178" target="_top">NSPersistentStoreCoordinatorSyncing Protocol Reference</a></em> for details on programmatically controlling aspects of a Core Data sync session. </p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ControllingSyncSessions.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="SyncingPreferences.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/SyncServices/Articles/UsingCoreData.html%3Fid%3DTP40001178-5.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/SyncServices/Articles/UsingCoreData.html%3Fid%3DTP40001178-5.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/SyncServices/Articles/UsingCoreData.html%3Fid%3DTP40001178-5.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

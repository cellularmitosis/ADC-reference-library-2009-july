<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>IconMethodToRgn (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING312></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-311.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-313.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-269.html"><B>Chapter 5 - Icon Utilities</B></A> / <A HREF="MoreToolbox-275.html"><B>Icon Utilities Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-278.html"><B>Icon Utilities Routines</B></A> / <A HREF="MoreToolbox-309.html"><B>Converting an Icon Mask to a Region</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING312-0></A>
<H3>IconMethodToRgn</H3>
 <A NAME=MARKER-11-255></A><A NAME=MARKER-2-336></A>You can use the <CODE>IconMethodToRgn</CODE> function to convert, to a region, the mask for an icon that <CODE>IconMethodToRgn</CODE> obtains with the aid of your icon getter function. <P>
<PRE>
FUNCTION IconMethodToRgn (theRgn: RgnHandle; iconRect: Rect;
                          align: IconAlignmentType;
                          theMethod: IconGetter;
                          yourDataPtr: Ptr): OSErr;
</PRE>
<DL>
<DT><CODE>theRgn</CODE>
<DD> <CODE>IconMethodToRgn</CODE> returns a handle to the requested region in this parameter. You must allocate memory for the region handle before calling <CODE>IconMethodToRgn</CODE>.
<DT><CODE>iconRect</CODE>
<DD> The rectangle in which to draw the icon, specified in local coordinates of the current graphics port. The <CODE>IconMethodToRgn</CODE> function obtains the data for the icon mask from your icon getter function and then converts the icon mask to a region. <CODE>IconMethodToRgn</CODE> uses the rectangle specified in this parameter as the bounding box of the region. 
<DT><CODE>align</CODE>
<DD> A value that specifies how <CODE>IconMethodToRgn</CODE> should align the region within the rectangle. See the description of <CODE>PlotIconID</CODE> on <A HREF=MoreToolbox-280.html#MARKER-9-156>page 5-20</A> for a list of constants you can use in this parameter.
<DT><CODE>theMethod</CODE>
<DD> A pointer to an icon getter function.
<DT><CODE>yourDataPtr</CODE>
<DD> A pointer to data that is passed to your icon getter function.  
</DL>
<A NAME=HEADING312-8></A>
<H5>DESCRIPTION</H5>
 The <CODE>IconMethodToRgn</CODE> function modifies the region referred to by the handle in the <CODE>theRgn</CODE> parameter. The region corresponds to the icon's mask (as returned by your icon getter function, and according to the rectangle and alignment specified in the <CODE>iconRect</CODE> and <CODE>align</CODE> parameters).<P>
 <CODE>IconMethodToRgn</CODE> passes to your icon getter function the type of the icon to get and the value specified in the <CODE>yourDataPtr</CODE> parameter. The <CODE>IconMethodToRgn</CODE> function examines the size of the rectangle and requests the appropriate icon from your icon getter function--an icon of icon type <CODE>'ICN#'</CODE> or <CODE>'ics#'</CODE>. Your icon getter function should return a handle to the data of the requested icon type. The <CODE>IconMethodToRgn</CODE> function extracts the mask from the icon data that your icon getter function returns. If your icon getter function returns data that does not correspond to an icon of type <CODE>'ICN#'</CODE> or type <CODE>'ics#'</CODE>, <CODE>IconMethodToRgn</CODE> attempts to generate a mask from the returned data.<P>
 Your icon getter function can get the data for the icon and its mask using whatever method is appropriate to your application. For example, your application might maintain its own cache of icons (and pass a pointer to it in the <CODE>yourDataPtr</CODE> parameter) or use its icon getter function to get an icon from the desktop database.<P>
<A NAME=HEADING312-12></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>noMaskFoundErr<TD>-1000<TD>No mask found <A NAME=MARKER-2-268></A> <A NAME=MARKER-2-2></A></TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-311.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-313.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A DV24: ATA Manager Events Clarified</title>		<meta name="keywords" content="Mac OS 7 ATA Manager Events ">	<meta name="Description" content="Technical Q&amp;A DV24: Q&amp;A clarifies documentation on the kATAOnlineEvent,kATAOfflineEvent, kATAResetEvent, kATARemovedEvent, kATAOfflineRequest,and the KATAEjectRequest."><meta name="categories" content="Devices"><meta name="week-posted" content="Dec 4, 1995 - Dec 8, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001165" title="ATA Manager Events Clarified"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxHardwareDrivers-date.html">Hardware & Drivers</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/HardwareDrivers/idxATA-date.html" target="_blank">Hardware & Drivers > ATA</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A DV24</div>
<div id="pageheadsub">ATA Manager Events Clarified</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><p id=p2>Q:  The <code>kATAOfflineEvent</code> and <code>kATARemovedEvent</code> documentation is incomplete in theReference Library CD Developer's Notes. The documentation is clarifiedhere.</p><p id=p4>A: <code>kATAOnlineEvent</code> (code 1)</p><p id=p4>This event notifies clients when an ATA or ATAPI device becomes available foruse. The event occurs either when a new device is connected to the bus or whena previously unavailable device becomes available again (as in system wakeupwhen power is restored to the device).</p><p id=p4>If the device has a registered driver, only that driver will be notified of theevent; otherwise, each registered default driver will be notified until adriver responds favorably (a <code>noErr</code> response to the event). Note that for newlyconnected devices a driver loaded from the media is given priority.</p><p id=p4>Drivers should keep track of whether the device coming online is a newlyconnected device or one which is currently offline (connected but notunavailable). A device should be considered connected until a kATARemovedEventfor the device occurs.</p><P id=p4><code>kATAOfflineEvent</code> (code 2)</p><p id=p4>This event notifies the registered driver of an ATA or ATAPI device that thedevice is now unavailable for use (offline). The device, however, is stillconnected to the bus and the offline state is assumed to be temporary. Thisevent will occur at system sleep when power is removed.</p><p id=p4>Currently, this event is generated only when the ATA Manager receives a<code>PMSuspend</code> event (essentially the same as a Power Manager sleep demand event)from the PC Card Manager. Drivers receiving <code>kATAOfflineEvent</code> events most likelywill want to maintain control of the device, but deny access to the device fromits clients. In addition, the driver should note the device may need to bereconfigured when the device becomes online again (a <code>kATAOnlineEvent</code> will begenerated when this happens).</p><P id=p4><code>kATARemovedEvent</code> (code 3)</p>	<p id=p4>This event notifies the registered driver of an ATA or ATAPI device that thedevice has been removed. The removal may be either controlled (e.g., a softwareeject command to the ATA Manager) or uncontrolled (e.g., a forced removal bythe user). Note the device may have been in either an online or offline stateprior to the removal. If the device state was online prior to the removal a<code>kATAOfflineEvent</code> is not generated since the removal implies an offlinecondition had to occur.</p><P id=p4><code>kATAResetEvent</code> (code 4)</p><p id=p4>This event notifies the registered driver of an ATA or ATAPI device that thedevice has been reset. The device may need to be reconfigured by the driverbefore it can be used again.</p><p id=p4>This event was created for use with multiple devices per bus (ATA Master/Slavemode), since reset applies to all devices on the bus and not a specific device.At this time Apple does not implement multiple devices per bus with ATA andthis event has not been implemented. It is advised, however, that driverssupport this event now to prevent problems later on when the event isimplemented.</p>	<P id=p4><code>kATAOfflineRequest</code> (code 5)</p><p id=p4>This event is obsolete. It was defined for the early stages of the PC CardManager which would echo the Power Manager Sleep events to its clients. The ATAManager would in turn echo the request to its clients. This event was akin tothe <code>sleepRequest</code> event. The current PC Card Manager now allows only for anevent akin to a <code>sleepDemand</code>, which does not permit rejection by the client.</p><P id=p4><code>kATAEjectRequest</code> (code 6)</p><p id=p4>This event notifies the registered driver of an ATA or ATAPI device that arequest has been made to eject the device. If the response to the request is 0the device will be ejected and a subsequent <code>kATARemovedEvent</code> will be generatedwhen the eject is successful.</p><p id=p4>The event is defined as a protection mechanism to alert drivers of a pendingejection. Drivers will most likely want to reject the request unless itinitiated the request since ejection will remove the device from the bus.</p><p id=p4>Note also that the <code>kATAResetEvent</code>, <code>kATAOfflineRequest</code>, and <code>kATAEjectRequest</code>events are not implemented in the ATA Manager at this time.</p></td></tr></table></CENTER><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Dec 07 1995]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/dv/dv24.html%3Fid%3DDTS10001165-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/dv/dv24.html%3Fid%3DDTS10001165-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/dv/dv24.html%3Fid%3DDTS10001165-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
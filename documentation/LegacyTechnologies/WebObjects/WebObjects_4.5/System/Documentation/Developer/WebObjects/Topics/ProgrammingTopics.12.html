<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Displaying Images Stored in a Database</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.11.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.13.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="17389"> </A>Displaying Images Stored in a Database</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606101"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=609729"> </A>Describes how to display images stored in a database.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606103"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=609721"> </A>It is often useful to serve images from the database through the Web application server instead of storing copies of the images in the Web server's document directory. WebObjects 4.0 adds enhancements to WOImage and WOActiveImage to ease this process.</P><P CLASS="Body"><A NAME="pgfId=606104"> </A>In the EOModel for the Movies example database, the TalentPhoto class has a <TT CLASS="Code">photo</TT> attribute that stores an NSData representing the photograph image of an actor or director. You can use recent enhancements to the WOImage component to display the image of the actor in an application. This example uses the new <TT CLASS="Code">data</TT> and <TT CLASS="Code">mimeType</TT> bindings to accomplish this.</P><P CLASS="Body"><A NAME="pgfId=606106"> </A>The following steps illustrate how to add database-stored images to an application. The example uses the Movies EOModel and a Wizard-generated application. To prepare the example, perform the following steps:</P><P CLASS="Numbered1"><A NAME="pgfId=606107"> </A>	Start Project Builder.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=606108"> </A>	Create a new WebObjects Application project, selecting Wizard for assistance and Java as the primary language.</LI><LI CLASS="Numbered"><A NAME="pgfId=606109"> </A>	Choose the &quot;existing model&quot; option and select the <TT CLASS="Code">Movies.eomodeld</TT> file.</LI><LI CLASS="Numbered"><A NAME="pgfId=606110"> </A>	Select the Talent entity.</LI><LI CLASS="Numbered"><A NAME="pgfId=606111"> </A>	Choose Selected Record and Paginated for the layout.</LI><LI CLASS="Numbered"><A NAME="pgfId=606112"> </A>	Include the <TT CLASS="Code">firstName</TT> and <TT CLASS="Code">lastName</TT> attributes to display, and <TT CLASS="Code">lastName</TT> for the hyperlink.</LI></OL><P CLASS="Body"><A NAME="pgfId=606113"> </A>To add the image, perform the following steps:</P><P CLASS="Numbered1"><A NAME="pgfId=606114"> </A>	Open the <TT CLASS="Code">Main.wo</TT> component in WebObjects Builder.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=606115"> </A>	Add a WOImage component to the WOForm (available from the Dynamic elements toolbar or from the Elements-&gt;WebObjects menu).</LI><LI CLASS="Numbered"><A NAME="pgfId=615206"> </A>	In the inspector for the WOImage, add two attributes, one labeled <TT CLASS="Code">data</TT> and the other labeled <TT CLASS="Code">mimeType</TT>. </LI><LI CLASS="Numbered"><A NAME="pgfId=615210"> </A>	Create the following bindings:</LI></OL><P CLASS="NumberedCont"><A NAME="pgfId=606122"> </A>In the data field, enter 		<TT CLASS="Code">talentDisplayGroup.selectedObject.photo.photo</TT></P><P CLASS="NumberedCont"><A NAME="pgfId=606123"> </A>For mimeType		, select image/gif.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=606124"> </A>	Build and run the example. When you select a talent that has an image in the database, the WOImage should display it.</LI></OL><P CLASS="Body"><A NAME="pgfId=606125"> </A>In this example, the data in the database is assumed to be a GIF image. If different image types are stored, you could create an accessory on the class that either stores the type or determines it on-the-fly and returns the appropriate MIME type.</P><P CLASS="Body"><A NAME="pgfId=606127"> </A>It is also possible to serve images created on-the-fly by the application. Bind the <TT CLASS="Code">data</TT> attribute to a method returning the dynamically generated image. For an example of this, see the CreatePlots example in the <TT CLASS="Code">Developer/Examples/WebObjects/WebScript</TT> folder.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606128"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606129"> </A><A HREF="ProgrammingTopics.10.html#23543" CLASS="XRef">Providing for File Uploads</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=606130"> </A>CreatePlots Example Application</LI><LI CLASS="Bulleted"><A NAME="pgfId=606131"> </A>WOImage specification in the <EM CLASS="Emphasis">WebObjects Dynamic Element Specifications</EM> </LI><LI CLASS="Bulleted"><A NAME="pgfId=620486"> </A>WOActiveImage specification in the <EM CLASS="Emphasis">WebObjects Dynamic Element Specifications</EM></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606132"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606133"> </A>	How do I display an image in my application when the image is in the database?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606134"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606135"> </A>WOImage</LI><LI CLASS="Bulleted"><A NAME="pgfId=606136"> </A>WOActiveImage</LI><LI CLASS="Bulleted"><A NAME="pgfId=606137"> </A>Components</LI><LI CLASS="Bulleted"><A NAME="pgfId=606138"> </A>Database</LI><LI CLASS="Bulleted"><A NAME="pgfId=620489"> </A>Images</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606140"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606141"> </A>22 July, 1998. Timothy Joransen. First Draft.<BR>19 November, 1998. Clif Liu. Second Draft.</P></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.11.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.13.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
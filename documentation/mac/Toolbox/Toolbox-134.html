<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>MenuKey(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING134></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-133.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-135.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-89.html"><B>Chapter 3 - Menu Manager</B></A> / <A HREF="Toolbox-107.html"><B>Menu Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-112.html"><B>Menu Manager Routines</B></A> / <A HREF="Toolbox-132.html"><B>Responding to the User's Choice of a Menu Command</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING134-0></A>
<H3>MenuKey</H3>
 <A NAME=MARKER-11-548></A><A NAME=MARKER-2-549></A>If the user presses another key while holding down the Command key, call the <CODE>MenuKey</CODE> function to determine if the keyboard combination maps to the keyboard equivalent of a menu item in a menu in the current menu list.<P>
<PRE>
FUNCTION MenuKey (ch: Char): LongInt; 
</PRE>
<DL>
<DT><CODE>ch</CODE>
<DD> The 1-byte character representing the key pressed by the user in combination with the Command key.
</DL>
<A NAME=HEADING134-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>MenuKey</CODE> function maps the given character to the menu and menu item with that keyboard equivalent. The <CODE>MenuKey</CODE> function returns as its function result a value that indicates the menu ID and menu item that has the keyboard equivalent corresponding to the given character.<P>
 The <CODE>MenuKey</CODE> function does not distinguish between uppercase and lowercase letters. It takes the 1-byte character passed to it and calls the <CODE>UpperText</CODE> procedure (which provides localizable uppercase conversion of the character). Thus, <CODE>MenuKey</CODE> translates any lowercase character to uppercase when comparing a keyboard event to keyboard equivalents. This allows a user to invoke a keyboard equivalent command, such as the Copy command, by pressing the Command key and "c" or "C". For consistency between applications, you should define the keyboard equivalents of your commands so that they appear in uppercase in your menus.<P>
 If the given character maps to an enabled menu item in the current menu list, <CODE>MenuKey</CODE> highlights the menu title of the chosen menu, returns the menu ID in the high-order word of its function result, and returns the chosen menu item in the low-order word of its function result. After performing the chosen task, your application should unhighlight the menu title using the <CODE>HiliteMenu</CODE> procedure.<P>
 If the given character does not map to an enabled menu item in the current menu list, <CODE>MenuKey</CODE> returns 0 in its high-order word and the low-order word is undefined.<P>
 If the given character maps to a menu item in a menu that a desk accessory has inserted into your application's menu list, <CODE>MenuSelect</CODE> uses the <CODE>SystemMenu</CODE> procedure to process this occurrence and returns 0 to your application in the high-order word.<P>
 You should not define menu items with identical keyboard equivalents. The <CODE>MenuKey</CODE> function scans the menus from right to left and the items from top to bottom. If you have defined more than one menu item with identical keyboard equivalents, <CODE>MenuKey</CODE> returns the first one it finds.<P>
 The <CODE>MenuKey</CODE> function first searches the regular portion of the current menu list for a menu item with a keyboard equivalent matching the given key. If it doesn't find one there, it searches the submenu portion of the current menu list. If the given key maps to a menu item in a submenu, <CODE>MenuKey</CODE> highlights the menu title in the menu bar that the user would normally pull down to begin traversing to the submenu. Your application should perform the desired command and then unhighlight the menu title.<P>
 You shouldn't assign a Command-Shift-number key sequence to a menu item as its keyboard equivalent; Command-Shift-number key sequences are reserved for use as <CODE>'FKEY'</CODE> resources. Command-Shift-number key sequences are not returned to your application, but instead are processed by the Event Manager. The Event Manager invokes the <CODE>'FKEY'</CODE> resource with a resource ID that corresponds to the number that activates it.<A NAME=MARKER-2-550></A><P>
 Apple reserves the Command-key codes $1B (Control-[ ) through $1F (Control-_ ) to indicate meanings other than keyboard equivalents. <CODE>MenuKey</CODE> ignores these character codes and returns a function result of 0 if you specify any of these values in the <CODE>ch</CODE> parameter. Your application should not use these character codes for its own use.<P>
 The global variable <CODE>TheMenu</CODE> contains the ID of the currently highlighted menu in the menu bar. If the user chooses an item from a submenu, <CODE>TheMenu</CODE> contains the menu ID of the submenu, not the menu to which the submenu is attached.<P>
<DL>
<DT><B>WARNING</B>
<DD>Do not define a "circular" hierarchical menu--that is, a hierarchical menu in which a submenu has a submenu whose submenu is <BR>a hierarchical menu higher in the chain. If <CODE>MenuKey</CODE> detects a circular hierarchical menu, it creates a system error with error number 86.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING134-16></A>
<H5>SEE ALSO</H5>
 To unhighlight a menu, use the <CODE>HiliteMenu</CODE> procedure, described on <A HREF=Toolbox-136.html#MARKER-9-556>page 3-121</A>. To provide support for keyboard equivalents other than Command-key equivalents, see the discussion of <CODE>'KCHR'</CODE> resources<A NAME=MARKER-2-551></A> in <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-133.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-135.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

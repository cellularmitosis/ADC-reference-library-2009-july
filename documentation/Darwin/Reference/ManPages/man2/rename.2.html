<html><head><title>Mac OS X Developer Tools
 Manual Page For rename(2)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/2/rename" title="Mac OS X Developer Tools
 Manual Page for rename(2)"><!-- headerDoc=man; indexgroup=Section 2; uid="//apple_ref/doc/man/2/rename"; name=rename(2) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
RENAME(2)                   BSD System Calls Manual                  RENAME(2)

<b>NAME</b>
     <b>rename</b> -- change the name of a file

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;stdio.h&gt;</b>

     <u>int</u>
     <b>rename</b>(<u>const</u> <u>char</u> <u>*old</u>, <u>const</u> <u>char</u> <u>*new</u>);

<b>DESCRIPTION</b>
     The <b>rename</b>() system call causes the link named <u>old</u> to be renamed as <u>new</u>.  If <u>new</u> exists, it is first
     removed.  Both <u>old</u> and <u>new</u> must be of the same type (that is, both must be either directories or non-<font color="#ffffff" class="whiteout">directories)&nbsp;nondirectories)</font>
     directories) and must reside on the same file system.

     The <b>rename</b>() system call guarantees that an instance of <u>new</u> will always exist, even if the system
     should crash in the middle of the operation.

     If the final component of <u>old</u> is a symbolic link, the symbolic link is renamed, not the file or direc-<font color="#ffffff" class="whiteout">tory&nbsp;directory</font>
     tory to which it points.

<b>CAVEAT</b>
     The system can deadlock if a loop is present in the file system graph.  This loop takes the form of an
     entry in directory `<u>a</u>', say `<u>a/foo</u>', being a hard link to directory `<u>b</u>', and an entry in directory `<u>b</u>',
     say `<u>b/bar</u>', being a hard link to directory `<u>a</u>'.  When such a loop exists and two separate processes
     attempt to perform `rename a/foo b/bar' and `rename b/bar a/foo', respectively, the system may deadlock
     attempting to lock both directories for modification.

     Whether or not hard links to directories are supported is specific to the underlying filesystem imple-<font color="#ffffff" class="whiteout">mentation.&nbsp;implementation.</font>
     mentation.

     It is recommended that any hard links to directories in an underlying filesystem should be replaced by
     symbolic links by the system administrator to avoid the possibility of deadlocks.

<b>RETURN</b> <b>VALUES</b>
     A 0 value is returned if the operation succeeds, otherwise <b>rename</b>() returns -1 and the global variable
     <u>errno</u> indicates the reason for the failure.

<b>ERRORS</b>
     The <b>rename</b>() system call will fail and neither of the argument files will be affected if:

     [EACCES]           A component of either path prefix denies search permission.

     [EACCES]           The requested operation requires writing in a directory (e.g., <u>new</u>, new/.., or
                        old/..) whose modes disallow this.

     [EDQUOT]           The directory in which the entry for the new name is being placed cannot be extended
                        because the user's quota of disk blocks on the file system containing the directory
                        has been exhausted.

     [EFAULT]           <u>Path</u> points outside the process's allocated address space.

     [EINVAL]           <u>Old</u> is a parent directory of <u>new</u>, or an attempt is made to rename `.' or `..'.

     [EIO]              An I/O error occurs while making or updating a directory entry.

     [EISDIR]           <u>new</u> is a directory, but <u>old</u> is not a directory.

     [ELOOP]            Too many symbolic links are encountered in translating either pathname.  This is
                        taken to be indicative of a looping symbolic link.

     [ENAMETOOLONG]     A component of a pathname exceeds {NAME_MAX} characters, or an entire path name
                        exceeds {PATH_MAX} characters.

     [ENOENT]           A component of the <u>old</u> path does not exist, or a path prefix of <u>new</u> does not exist.

     [ENOSPC]           The directory in which the entry for the new name is being placed cannot be extended
                        because there is no space left on the file system containing the directory.

     [ENOTDIR]          A component of either path prefix is not a directory.

     [ENOTDIR]          <u>old</u> is a directory, but <u>new</u> is not a directory.

     [ENOTEMPTY]        <u>New</u> is a directory and is not empty.

     [EPERM]            The directory containing <u>old</u> is marked sticky, and neither the containing directory
                        nor <u>old</u> are owned by the effective user ID.

     [EPERM]            The <u>new</u> file exists, the directory containing <u>new</u> is marked sticky, and neither the
                        containing directory nor <u>new</u> are owned by the effective user ID.

     [EROFS]            The requested link requires writing in a directory on a read-only file system.

     [EXDEV]            The link named by <u>new</u> and the file named by <u>old</u> are on different logical devices
                        (file systems).  Note that this error code will not be returned if the implementa-<font color="#ffffff" class="whiteout">tion&nbsp;implementation</font>
                        tion permits cross-device links.

<b>CONFORMANCE</b>
     The restriction on renaming a directory whose permissions disallow writing is based on the fact that
     UFS directories contain a ".." entry.  If renaming a directory would move it to another parent direc-<font color="#ffffff" class="whiteout">tory,&nbsp;directory,</font>
     tory, this entry needs to be changed.

     This restriction has been generalized to disallow renaming of any write-disabled directory, even when
     this would not require a change to the ".." entry.  For consistency, HFS+ directories emulate this
     behavior.

<b>SEE</b> <b>ALSO</b>
     <a href="open.2.html#//apple_ref/doc/man/2/open">open(2)</a>, <a href="../man7/symlink.7.html#//apple_ref/doc/man/7/symlink">symlink(7)</a>

<b>STANDARDS</b>
     The <b>rename</b>() function conforms to IEEE Std 1003.1-1988 (``POSIX.1'').

4.2 Berkeley Distribution        June 4, 1993        4.2 Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man2/rename.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man2/rename.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man2/rename.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

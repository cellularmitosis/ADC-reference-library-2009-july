<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PConfirmName(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING80></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-79.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-81.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-61.html"><B>Chapter 3 - Name-Binding Protocol (NBP)</B></A> / <A HREF="Networking-66.html"><B>NBP Reference</B></A><BR><DL><DD><A HREF="Networking-72.html"><B>Routines</B></A> / <A HREF="Networking-76.html"><B>Handling Name and Address Requests</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING80-0></A>
<H3><A NAME=MARKER-9-155></A>PConfirmName</H3>
 <A NAME=MARKER-11-156></A><A NAME=MARKER-2-95></A>The <A NAME=MARKER-9-115></A><CODE>PConfirmName</CODE> function confirms that a network-visible entity whose name you know is still available on the network and that the address associated with the name has not been changed. <P>
<PRE>
FUNCTION PConfirmName (thePBptr: MPPPBPtr; async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>thePBptr</CODE>
<DD> A pointer to an MPP parameter block.
<DT><CODE>async</CODE>
<DD> A Boolean that specifies whether the function should be executed asynchronously or synchronously. Specify <CODE>TRUE</CODE> for asynchronous execution.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The function result.<TR>
<TD>--><TD>ioRefNum<TD>Integer<TD>The .MPP driver reference number. <TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>confirmName</CODE>. <TR>
<TD>--><TD>interval<TD>Byte<TD>The retry interval.<TR>
<TD><-><TD>count<TD>Byte<TD>The retry count.<TR>
<TD>--> <TD>entityPtr<TD>Ptr<TD>A pointer to an entity name.<TR>
<TD>--> <TD>confirmAddr<TD>AddrBlock<TD>The entity address.<TR>
<TD><-- <TD>newSocket<TD>Byte<TD>The current socket number.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE>ioCompletion</CODE>
<DD> A pointer to a completion routine that you can provide. When you execute a function asynchronously, the .MPP driver calls your completion routine when it completes execution of the function if you specify a pointer to the routine as the value of this field. Specify <CODE>NIL</CODE> for this field if you do not wish to provide a completion routine. If you execute a function synchronously, the .MPP driver ignores the <CODE>ioCompletion</CODE> field. For information about completion routines, see the chapter "Introduction to AppleTalk" in this book. 
<DT><CODE>ioResult</CODE>
<DD> The result of the function. When you execute the function asynchro-<BR>nously, the function sets this field to 1 and returns a function result of <CODE>noErr</CODE> as soon as the function begins execution. When the function completes execution, it sets the <CODE>ioResult</CODE> field to the actual result code.
<DT><CODE>ioRefNum</CODE>
<DD> The .MPP driver reference number. The MPW interface fills in <BR>this field. 
<DT><CODE>csCode</CODE>
<DD> The command code of the .MPP command to be executed. The MPW interface fills in this field.
<DT><CODE>interval</CODE>
<DD> The retry interval to be used by NBP when it looks on the internet for the entity. The retry interval value specifies how long the function is to wait between retries in 8-tick units. A value of 7 for the <CODE>interval</CODE> field is usually sufficient (7 <EM></EM> 8 = 56 ticks equals approximately 1 second). 
<DT><CODE><A NAME=MARKER-9-34></A>count</CODE>
<DD> The retry count to be used by NBP when it looks on the internet for the entity. The value of <CODE>count</CODE> specifies the number of times the <CODE>PConfirmName</CODE> function is to retry the operation. A retry count of 3 or 4 is usually sufficient. The <CODE>PConfirmName</CODE> function decrements this field each time it looks for names.
<DT><CODE><A NAME=MARKER-2-244></A>entityPtr</CODE>
<DD> A pointer to an entity name that you want to confirm. The entity name must be in the format that <A HREF=Networking-65.html#MARKER-9-51>Figure 3-5 on page 3-11</A> shows. <BR>You can use the <CODE>NBPSetEntity</CODE> procedure to create the entity name record.
<DT><CODE><A NAME=MARKER-2-248></A>confirmAddr</CODE>
<DD> The last known address of the network-visible entity whose existence you wish to confirm.
<DT><CODE><A NAME=MARKER-2-160></A>newSocket</CODE>
<DD> The current socket number of the entity. If the socket number of <BR>the entity has changed, the <CODE>PConfirmName</CODE> function returns the new socket number in this field and returns the <CODE>nbpConfDiff</CODE> result code. 
</DL>
<A NAME=HEADING80-15></A>
<H5>DESCRIPTION</H5>
 If you already know the name and address of a network-visible entity, but want to confirm that the name is still registered with NBP and that the address hasn't changed before you attempt to send data to it, you can use the <CODE>PConfirmName</CODE> function. If the address is no longer associated with the name, <CODE>PConfirmName</CODE> returns a result code <BR>of <CODE>nbpNoConfirm</CODE>, indicating that the name may have been removed from the socket. <BR>If the name is assigned to another socket, <CODE>PConfirmName</CODE> returns the current socket number in the parameter block's <CODE>newSocket</CODE> field and a result code of <CODE>nbpConfDiff</CODE>. This function generates less network traffic than the <CODE>PLookupName</CODE> function.<P>
<A NAME=HEADING80-17></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Memory used for the buffer containing the entity name and the record containing the entity address belongs to <CODE>PConfirmName</CODE> until the function completes execution. <P>
<A NAME=HEADING80-19></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>PConfirmName</CODE> function from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>confirmName</CODE> in the <CODE>csCode</CODE> field of the parameter block. To execute the <CODE>_Control</CODE> trap asynchronously, include the value <CODE>,ASYNC</CODE> in the operand field. To execute this function from assembly language, you must also specify the driver reference number. <P>
<A NAME=HEADING80-21></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>nbpNoConfirm<TD>-1025<TD>Name not confirmed<TR>
<TD>nbpConfDiff<TD>-1026<TD>Name confirmed for different socket<TR>
<TD>tooManyReqs<TD>-1097<TD>Too many concurrent requests; wait a few minutes, then try the request again<TR>
<TD>reqAborted<TD>-1105<TD>Request canceled</TABLE>
</H5>
<A NAME=HEADING80-22></A>
<H5>SEE ALSO</H5>
 For a description of the <CODE>AddrBlock</CODE> data type, see <A HREF=Networking-68.html#MARKER-9-74>"Address Block Record" on page 3-19</A>.<P>
 To find the address of a network-visible entity whose name or address you do not already know, use the <CODE>PLookupName</CODE> function, described on <A HREF=Networking-78.html#MARKER-9-132>page 3-28</A>.<P>
 <A NAME=MARKER-2-97></A>To cancel a name confirmation request, use the <CODE>PKillNBP</CODE> function, described on <A HREF=Networking-82.html#MARKER-9-169>page 3-36</A>. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-79.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-81.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

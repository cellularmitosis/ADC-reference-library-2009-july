<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Volume Mounting Information Records (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING124></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-123.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-125.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-72.html"><B>Chapter 2 - File Manager</B></A> / <A HREF="Files-113.html"><B>File Manager Reference</B></A><BR><DL><DD><A HREF="Files-114.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING124-0></A>
<H3>Volume Mounting Information Records</H3>
 <A NAME=MARKER-2-1032></A>The File Manager remote mounting functions store the mounting information in a variable-sized structure called a volume mounting information record, defined by the <CODE>VolMountInfoHeader</CODE> data type.<A NAME=MARKER-2-1031></A><A NAME=MARKER-2-1032></A><P>
<PRE>
TYPE VolMountInfoHeader =        {volume mounting information}
RECORD
   length:           Integer;    {length of mounting information}
   media:            VolumeType; {type of volume}
   {volume-specific, variable-length location data}
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>length</CODE>
<DD> The length of the VolMountInfoHeader structure (that is, <BR>the total length of the structure header described here plus the variable-length location data). The length of the record is flexible <BR>so that non-Macintosh file systems can store whatever information they need for volume mounting.
<DT><CODE>media</CODE>
<DD> The volume type of the remote volume. The value <CODE>AppleShareMediaType</CODE> (a constant that translates to <CODE>'afpm'</CODE>) represents an AppleShare volume. If you are adding support for <BR>the programmatic mounting functions to a non-Macintosh file system, you should register a four-character identifier for your volumes with Macintosh Developer Technical Support at Apple Computer, Inc.<A NAME=MARKER-2-1035></A>
</DL>
 The only volumes that currently support the programmatic mounting functions are AppleShare servers, which use a volume mounting record of type AFPVolMountInfo.<A NAME=MARKER-2-1036></A><P>
<PRE>
TYPE AFPVolMountInfo    =        {AFP volume mounting information}
RECORD
   length:           Integer;    {length of mounting information}
   media:            VolumeType; {type of volume}
   flags:            Integer;    {reserved; must be set to 0}
   nbpInterval:      SignedByte; {NBP retry interval}
   nbpCount:         SignedByte; {NBP retry count}
   uamType:          Integer;    {user authentication method}
   zoneNameOffset:   Integer;    {offset to zone name}
   serverNameOffset: Integer;    {offset server name}
   volNameOffset:    Integer;    {offset to volume name}
   userNameOffset:   Integer;    {offset to user name}
   userPasswordOffset:
                     Integer;    {offset to user password}
   volPasswordOffset:
                     Integer;    {offset to volume password}
   AFPData:          PACKED ARRAY[1..144] OF CHAR;
                                 {standard AFP mounting info}
   {optional volume-specific, variable-length data}
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-1037></A>length</CODE>
<DD> The length of the AFPVolMountInfo structure (that is, the total length of the structure header described here plus the variable-<BR>length location data).
<DT><CODE><A NAME=MARKER-2-1038></A>media</CODE>
<DD> The volume type of the remote volume. The value <CODE>AppleShareMediaType</CODE> (a constant that translates to <CODE>'afpm'</CODE>) represents an AppleShare volume.
<DT><CODE><A NAME=MARKER-2-1039></A>flags</CODE>
<DD> Reserved; set this field to 0. If bit 0 is set, no greeting message from the server is displayed.
<DT><CODE><A NAME=MARKER-2-1040></A>nbpInterval</CODE>
<DD> The NBP retransmit interval, in units of 8 ticks.
<DT><CODE><A NAME=MARKER-2-1041></A>npbCount</CODE>
<DD> The NBP retransmit count. This field specifies the <I>total</I> number of times a packet should be transmitted, including the first transmission.
<DT><CODE><A NAME=MARKER-2-1042></A>uamType</CODE>
<DD> The access-control method used by the remote volume. AppleShare      uses four methods, defined by constants:
</DL>
<PRE>
               CONST
                  kNoUserAuthentication   = 1;  {no password}
                  kPassword               = 2;  {8-byte password}
                  kEncryptPassword        = 3;  
                                       {encrypted 8-byte password}
                  kTwoWayEncryptPassword  = 6;  
                                       {two-way random encryption}
</PRE>
<DL>
<DT><CODE><A NAME=MARKER-2-1044></A>zoneNameOffset</CODE>
<DD> The offset in bytes from the beginning of the record to the entry in the <CODE>AFPData</CODE> field containing the name of the AppleShare zone.
<DT><CODE><A NAME=MARKER-2-1045></A>serverNameOffset</CODE>
<DD> <BR>The offset in bytes from the beginning of the record to the entry in the <CODE>AFPData</CODE> field containing the name of the AppleShare server.
<DT><CODE><A NAME=MARKER-2-1046></A>volNameOffset</CODE>
<DD> The offset in bytes from the beginning of the record to the entry in the <CODE>AFPData</CODE> field containing the name of the volume.
<DT><CODE><A NAME=MARKER-2-1047></A>userNameOffset</CODE>
<DD> The offset in bytes from the beginning of the record to the entry in the <CODE>AFPData</CODE> field containing the name of the user.
<DT><CODE><A NAME=MARKER-2-1048></A>userPasswordOffset</CODE>
<DD> <BR>The offset in bytes from the beginning of the record to the entry in the <CODE>AFPData</CODE> field containing the user's password.
<DT><CODE><A NAME=MARKER-2-1049></A>volPasswordOffset</CODE>
<DD> <BR>The offset in bytes from the beginning of the record to the entry <BR>in the <CODE>AFPData</CODE> field containing the volume's password. Some versions of the AppleShare software do not pass the information <BR>in this field to the server.
<DT><CODE><A NAME=MARKER-2-1050></A>AFPData</CODE>
<DD> The actual volume mounting information, offsets to which are contained in the preceding six fields. To mount an AFP volume, you must fill in the record with at least the zone name, server name, user name, user password, and volume password. You can lay out the data in any order within this data field, as long as you specify the correct offsets in the offset fields.<A NAME=MARKER-2-1051></A><A NAME=MARKER-2-1054></A><A NAME=MARKER-2-1055></A>
</DL>
<HR>
<center>
<A HREF="Files-123.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-125.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Localizing a WebObjects Application</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.a.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.d.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606101"> </A><A NAME="34921"> </A>Localizing a WebObjects Application</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=615301"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606102"> </A>Describes the steps needed to localize your application for different languages.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606103"> </A>Description</H2><DIV><H3 CLASS="Heading2"><A NAME="pgfId=615341"> </A>Resource Organization</H3><P CLASS="Body"><A NAME="pgfId=615817"> </A>WebObjects relies on a specific application directory structure to find localized resources. The resources are placed in <TT CLASS="Code">.lproj</TT> subdirectories of the <TT CLASS="Code">Resources</TT> and <TT CLASS="Code">WebServerResources</TT> directories.</P><PRE CLASS="Code"><A NAME="pgfId=615742"> </A><TT CLASS="Code">MyApp.woa/</TT><A NAME="pgfId=617196"> </A><TT CLASS="Code">  Resources/</TT><A NAME="pgfId=617197"> </A><TT CLASS="Code">    English.lproj/</TT><A NAME="pgfId=617203"> </A><TT CLASS="Code">      MyApplicationWide.strings</TT><A NAME="pgfId=617204"> </A><TT CLASS="Code">      Main.wo/</TT><A NAME="pgfId=617205"> </A><TT CLASS="Code">        Main.html</TT><A NAME="pgfId=617206"> </A><TT CLASS="Code">        Main.wod</TT><A NAME="pgfId=617207"> </A><TT CLASS="Code">        Main.woo</TT><A NAME="pgfId=617212"> </A><TT CLASS="Code">    French.lproj/</TT><A NAME="pgfId=617220"> </A><TT CLASS="Code">      MyApplicationWide.strings</TT><A NAME="pgfId=617221"> </A><TT CLASS="Code">      Main.wo/</TT><A NAME="pgfId=617222"> </A><TT CLASS="Code">        Main.html</TT><A NAME="pgfId=617223"> </A><TT CLASS="Code">        Main.wod</TT><A NAME="pgfId=617224"> </A><TT CLASS="Code">        Main.woo</TT><A NAME="pgfId=617225"> </A><TT CLASS="Code">  WebServerResources/</TT><A NAME="pgfId=617227"> </A><TT CLASS="Code">    English.lproj/</TT><A NAME="pgfId=617226"> </A><TT CLASS="Code">      Flag.gif</TT><A NAME="pgfId=617228"> </A><TT CLASS="Code">    French.lproj/</TT><A NAME="pgfId=617229"> </A><TT CLASS="Code">      Flag.gif</TT></PRE><P CLASS="Body"><A NAME="pgfId=617230"> </A>The <TT CLASS="Code">.lproj</TT> subdirectories should contain everything that has localized content: string tables, sounds, images, and so on. The <TT CLASS="Code">Resources</TT> directory contains resources that your WebObjects application uses, including <TT CLASS="Code">.wo</TT> directories (containing components) and <TT CLASS="Code">.strings</TT> files (containing localized strings). The <TT CLASS="Code">WebServerResources</TT> directory contains resources that the web server needs, such as <TT CLASS="Code">.gif</TT> and <TT CLASS="Code">.jpg</TT> files. When WebObjects needs a resource, it searches the <TT CLASS="Code">.lproj</TT> subdirectories before the top-level resource directory to ensure that if a localized resource is available, it is used. Thus, you need to be sure there are no files of the same name in localized locations when no localization is supposed to occur.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=615816"> </A>Project Builder Support</H3><P CLASS="Body"><A NAME="pgfId=615818"> </A>Project Builder maintains a Resources suitcase and a WebServerResources suitcase corresponding to the directories in the application, and creates the application directory structure from the contents of these suitcases. To add a localized resource file to your project, you first need to create a non-localized file, add it to the appropriate suitcase using Project-&gt;Add Files, and localize it using the following steps.</P><P CLASS="Numbered1"><A NAME="pgfId=616072"> </A>Select the file and open the inspector.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=616075"> </A>Select File Attributes.</LI><LI CLASS="Numbered"><A NAME="pgfId=616076"> </A>Click Localized, and check the languages to support.</LI><LI CLASS="Numbered"><A NAME="pgfId=616077"> </A>Click Apply.</LI></OL><P CLASS="Body"><A NAME="pgfId=615814"> </A>Project Builder creates copies of the resource in the appropriate <TT CLASS="Code">.lproj</TT> folders and offers to remove the global (non-localized) version from the disk. Components can be localized in the same way.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=616081"> </A>Setting the Supported Languages</H3><P CLASS="Body"><A NAME="pgfId=615997"> </A>To tell WebObjects the languages your application supports, use WOSession's <TT CLASS="Code">setLanguages</TT> method, as shown in the code below.</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=616027"> </A>Java Code</H4><PRE CLASS="Code"><A NAME="pgfId=616006"> </A>public Session() {<A NAME="pgfId=617231"> </A>    NSMutableArray languages = new NSMutableArray();<A NAME="pgfId=617232"> </A>    languages.addObject(&quot;English&quot;);<A NAME="pgfId=617233"> </A>    languages.addObject(&quot;French&quot;);<A NAME="pgfId=617234"> </A>    this.setLanguages (languages);<A NAME="pgfId=617235"> </A>}</PRE><P CLASS="Body"><A NAME="pgfId=616003"> </A>The order of languages in the NSArray indicates the preferred order. The names of the languages are the names of the corresponding <TT CLASS="Code">.lproj</TT> subdirectories.</P></DIV></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=616137"> </A>Determining the User's Language Preferences</H3><P CLASS="Body"><A NAME="pgfId=616030"> </A>You can determine the language of the request sender by sending a <TT CLASS="Code">browserLanguages</TT> message to the WORequest object. The <TT CLASS="Code">browserLanguages</TT> method returns an array of language preferences from the user's browser converted to the same format that WOSession's <TT CLASS="Code">setLanguages</TT> method understands. The following code shows how to determine the user's language preferences from a component.</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=616140"> </A>Java Code</H4><PRE CLASS="Code"><A NAME="pgfId=616160"> </A>NSArray languages = this.context().request().browserLanguages();</PRE></DIV></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=616161"> </A>Using Localized Strings</H3><P CLASS="Body"><A NAME="pgfId=615356"> </A>A <TT CLASS="Code">.strings</TT> file contains a simple property list that maps common keys to words, phrases, or sentences in a particular language. For instance, a <TT CLASS="Code">MyApplicationWide.strings</TT> file in <TT CLASS="Code">English.lproj</TT> might have the following content:</P><PRE CLASS="Code"><A NAME="pgfId=615517"> </A><TT CLASS="Code">{</TT><A NAME="pgfId=617236"> </A><TT CLASS="Code">  buttonTitle = &quot;Submit your request&quot;;</TT><A NAME="pgfId=617237"> </A><TT CLASS="Code">}</TT></PRE><P CLASS="Body"><A NAME="pgfId=615360"> </A>The <TT CLASS="Code">MyApplicationWide.strings</TT> file in <TT CLASS="Code">French.lproj</TT> would have the following:</P><PRE CLASS="Code"><A NAME="pgfId=615362"> </A><TT CLASS="Code">{</TT><A NAME="pgfId=617238"> </A><TT CLASS="Code">  buttonTitle = &quot;Soumettez votre requete&quot;;</TT><A NAME="pgfId=617251"> </A><TT CLASS="Code">}</TT></PRE><P CLASS="Body"><A NAME="pgfId=615832"> </A>To access the <TT CLASS="Code">.strings</TT> file use the WOResourceManager <TT CLASS="Code">stringForKey</TT> method (<TT CLASS="Code">stringForKey:inTableNamed:withDefaultValue:inFramework:languages:</TT> in Objective-C). For example, the following code implements an accessor method that can be bound to a button's value attribute.</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=616055"> </A>Java Code</H4><PRE CLASS="Code"><A NAME="pgfId=615893"> </A>public String buttonValue() {<A NAME="pgfId=617252"> </A>    NSArray languages = this.context().request().browserLanguages();<A NAME="pgfId=617253"> </A>    WOResourceManager rm = this.application().resourceManager();<A NAME="pgfId=617254"> </A>    return rm.stringForKey (&quot;buttonTitle&quot;,&quot;MyApplicationWide&quot;,<A NAME="pgfId=617255"> </A>        null,null,languages);<A NAME="pgfId=617256"> </A>}</PRE></DIV></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=615846"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=615847"> </A><A HREF="ProgrammingTopics.d.html#17967" CLASS="XRef">Handling International Character Sets with EOF</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=617257"> </A>WXLocalizedString and WXLocalizedComponent component-based dynamic elements in the <TT CLASS="Code">ComponentElements</TT> example framework.</LI><LI CLASS="Bulleted"><A NAME="pgfId=617267"> </A><TT CLASS="Code">LocalizedHelloWorld</TT> example.</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606132"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606133"> </A>	How do I localize my application?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606134"> </A>How do I include localized resources in my project?</LI><LI CLASS="Bulleted"><A NAME="pgfId=616199"> </A>How do I determine the user's language preferences?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606135"> </A>	How are my localized resources organized?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606137"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606138"> </A>Localization</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606142"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606143"> </A>12 February, 1999. Clif Liu. First Draft.</P><PRE CLASS="Code"><A NAME="pgfId=602450"> </A></PRE></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.a.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.d.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
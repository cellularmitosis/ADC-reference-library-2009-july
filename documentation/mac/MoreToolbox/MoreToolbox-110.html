<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Introduction to the Scrap Manager (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING110></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-109.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-111.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-109.html"><B>Chapter 2 - Scrap Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING110-0></A>
<H1>Introduction to the Scrap Manager</H1>
 You can use the Scrap Manager to<P>
<UL>
<LI>copy and paste data within a document created by your application
<LI>copy and paste data between different documents created by your application
<LI>copy and paste data between documents created by your application and documents created by other applications<P>
</UL>
 <A HREF=MoreToolbox-270.html#MARKER-9-52>Figure 2-1</A> shows two documents from two applications (SurfPaint and SurfWriter) that the user currently has open. The user can select the data to copy from the SurfPaint document, choose Copy from the Edit menu, activate the SurfWriter document, then choose Paste from the Edit menu.<P>
 In the example shown in <A HREF=MoreToolbox-270.html#MARKER-9-52>Figure 2-1</A>, when the user chooses Copy, the SurfPaint application writes the selected data to the scrap. When the user chooses Paste, the SurfWriter application reads any data from the scrap and inserts the data at the current insertion point.<P>
 For each application, the Scrap Manager maintains a storage area to hold the last data cut or copied by the user. The area that is available to an application for this purpose is referred to as the <B>scrap.</B> The scrap can reside either in memory or on disk. All applications that support copy-and-paste operations read data from and write data to the scrap.<A NAME=MARKER-2-180></A><P>
 Whenever the user cuts or copies data, your application should write the data to the scrap (replacing the previous contents of the scrap); and whenever the user pastes data, your application should read the data from the scrap. Alternatively, your application can choose to use its own private scrap, and only write data to and read data from the scrap when necessary. If you use a private scrap, you must copy the data from your private scrap to the scrap upon receiving a suspend event. Upon receiving a resume event you should determine whether the data in the scrap has changed and, if so, either immediately copy the data from the scrap to your private scrap or copy the data from the scrap to your private scrap when the user next chooses the Paste command.<A NAME=MARKER-2-252></A><P>
<B>Figure 2-1  <A NAME=MARKER-9-52></A>Copying and pasting data between two applications using the scrap</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/SM-L-01.jpg">
 You use the Edit menu commands Cut, Copy, and Paste to support cutting, copying, and pasting of data within a document and between documents. <A HREF=#MARKER-9-2>Table 2-1</A> describes the actions your application should perform to support these three commands.<A NAME=MARKER-2-212></A><A NAME=MARKER-2-320></A><A NAME=MARKER-2-18></A><A NAME=MARKER-2-220></A><A NAME=MARKER-2-273></A><A NAME=MARKER-2-87></A><A NAME=MARKER-2-156></A><A NAME=MARKER-2-274></A>
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-2></A><B>Table 2-1 Actions your application perfoms in response to editing commands</B></CAPTION>
<TH>Edit command<TH>Actions your application performs<TR>
<TD>Cut<TD>Remove the data in the current selection (if any) and save the data, either in the scrap or in your application's private scrap.<TR>
<TD>Copy<TD>Copy the data in the current selection (if any) and save the copied data, either in the scrap or in your application's private scrap.<A NAME=MARKER-2-3></A><A NAME=MARKER-9-115></A><A NAME=MARKER-2-268></A><TR>
<TD>Paste<TD>Paste the last data (if any) that the user cut or copied (you get the data to paste by reading the scrap or your application's private scrap). Paste the data at the insertion point, replacing any current selection.</TABLE>
<P>
 You should implement the editing commands as described in <A HREF=#MARKER-9-2>Table 2-1</A> so that when the user chooses the Paste command--whether applied to the same document or another, in the same application or another--the data last operated upon by the user (cut or copied) can be inserted into the current document. Note that if your application implements the Clear command, in response to the Clear command your application should remove the data in the current selection but should not save the data into the scrap.<A NAME=MARKER-2-265></A><A NAME=MARKER-2-350></A><A NAME=MARKER-2-91></A><A NAME=MARKER-2-269></A><A NAME=MARKER-2-187></A><P>
 The nature of the data that the user can transfer varies between the application that the user copies data from and the application that the user pastes data into. The amount of information retained also depends on the capabilities of the applications supporting the copy-and-paste operation. For example, an application that allows a user to record and edit sounds may write a copied sound to the scrap both in <CODE>'snd '</CODE> and <CODE>'TEXT'</CODE> formats. Other applications choose which format to read from the scrap. A word processor that attempts to paste the sound data may not be able to read the sound in the <CODE>'snd '</CODE> format but should be able to read the data in the <CODE>'TEXT'</CODE> format.<P>
 You write data to the scrap using the standard formats that all Macintosh applications should support: <CODE>'PICT'</CODE> and <CODE>'TEXT'</CODE>. These scrap format types are defined as follows:<A NAME=MARKER-2-69></A><P>
<UL>
<LI><CODE>'TEXT'</CODE>: a series of ASCII characters
<LI><CODE>'PICT'</CODE>: a QuickDraw picture, which is a saved sequence of drawing commands that can be played back with the <CODE>DrawPicture</CODE> procedure<P>
</UL>
 Your application must be able to write at least one standard format (<CODE>'PICT'</CODE> or <CODE>'TEXT'</CODE>) to the scrap and should be able to read both. In addition, your application can support other optional popular scrap format types (such as <CODE>'snd '</CODE> or <CODE>'movv'</CODE>). Your application can also write its own private format to the scrap, but must always write one of the standard formats as well. <P>
 When your application requests data from the scrap, it must specify the scrap format type that the Scrap Manager should retrieve from the scrap. Your application typically requests its preferred scrap format first; if that format isn't available, it requests the data specifying another format type.<P>
 If you request a scrap format type that isn't in the scrap and the Translation Manager is available, the Scrap Manager uses the Translation Manager to attempt to convert the data of a scrap format type that does exist in the scrap into the scrap format type requested by your application. For example, if the SurfWriter application requests data from the scrap in the <CODE>'SURF'</CODE> scrap format type, and the data in the scrap is available <BR>in the format types <CODE>'TEXT'</CODE>, <CODE>'PICT'</CODE>, and <CODE>'SDBS'</CODE>(SurfDB's private scrap format type), the Scrap Manager uses the Translation Manager to convert any one of the scrap format types <CODE>'TEXT'</CODE>, <CODE>'PICT'</CODE>, or <CODE>'SDBS'</CODE> into the <CODE>'SURF'</CODE> scrap format type. The Translation Manager looks in the Extensions folder for a translator that can perform one of these translations. If such a translator is available (for example, a translator that can translate the <CODE>'SDBS'</CODE> scrap format type into the <CODE>'SURF'</CODE> scrap format type), the Translation Manager uses the translator to translate the data in the scrap into the requested scrap format type. If the translation is successful, the Scrap Manager returns to your application the data from the scrap in the requested scrap format type.<A NAME=MARKER-2-299></A><P>
 Whenever possible, your application should write both of the standard data types to the scrap. For example, a graphics application, such as SurfPaint, can choose to write both <CODE>'PICT'</CODE> and <CODE>'TEXT'</CODE> formats to the scrap when the user copies a picture consisting of text. <A HREF=#MARKER-9-33>Figure 2-2</A> shows a SurfPaint document and a SurfWriter document. The user copies, then pastes, a picture consisting of text. The SurfPaint application can choose to write only the <CODE>'PICT'</CODE> format; if it does so, then SurfWriter reads the data from the scrap in <CODE>'PICT'</CODE> format and inserts the data as a picture in the SurfWriter document. If the SurfPaint document writes both <CODE>'PICT'</CODE> and <CODE>'TEXT'</CODE> formats to the scrap, SurfWriter can choose which format to read. In this case, SurfWriter can choose to read the <CODE>'TEXT'</CODE> format of the data and insert the data as editable text into the document.<A NAME=MARKER-9-89></A><P>
<B>Figure 2-2  <A NAME=MARKER-9-33></A>Writing both standard formats to the scrap</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/SM-L-02.jpg">
 The SurfPaint application uses an application-defined data type to describe the data in its documents. It uses this same format in its private scrap; this implementation works well as long as the user is working exclusively with SurfPaint documents. When the SurfPaint application receives a suspend event, indicating that another application is about to become the foreground process, SurfPaint copies the data from its private scrap to the scrap. SurfPaint writes data to the scrap in its own private format (<CODE>'SFPN'</CODE>), in <CODE>'PICT'</CODE> format, and if the picture contains text, it writes the data to the scrap in <CODE>'TEXT'</CODE> format as well. Upon receiving a resume event, SurfPaint determines whether the contents of the scrap have changed and if so, copies the new data from the scrap into its private scrap. <A HREF=#MARKER-9-35>Figure 2-3</A> shows how the SurfPaint application uses its own private scrap.<A NAME=MARKER-2-401></A><P>
<B>Figure 2-3  <A NAME=MARKER-9-35></A>Using a private scrap</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/SM-L-03.jpg">
 Note that when your application receives a resume event, it should determine whether the contents of the scrap have changed. If your application uses a private scrap, either you can choose to copy the data from the scrap to your private scrap immediately or you can delay copying until the data is needed.<A NAME=MARKER-2-147></A><P>
 If your application writes data to the scrap in more than one format, it should write the data in its order of preference. For example, the SurfPaint application writes its preferred scrap format type first (its own private format, <CODE>'SFPN'</CODE>), then writes the data in <CODE>'PICT'</CODE> format, and then, if appropriate, writes the data in <CODE>'TEXT'</CODE> format. However, the size of the scrap is limited; therefore, when your application needs to write a large amount of data to the scrap and there isn't enough room in the scrap for both your application's private scrap format type and one of the standard formats, write the data in the standard format.<A NAME=MARKER-9-183></A><P>
 As previously described, the Scrap Manager uses the Translation Manager (if it's available) to convert data in one scrap format type into another. If your application writes its own private scrap format type to the scrap, you may want to provide one or more translators that translate your private scrap format type into other format types. See the chapter "Translation Manager" in this book for information on how to write translators.<A NAME=MARKER-2-57></A><A NAME=MARKER-2-221></A><P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="MoreToolbox-111.html#HEADING111-0">The Clipboard</A>
<DD>
<DT><A HREF="MoreToolbox-112.html#HEADING112-0">Intelligent Cut and Paste</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-109.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-111.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

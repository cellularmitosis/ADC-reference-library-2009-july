<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>How the Palette Manager Restores the Color Environment</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING20></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACI-19.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACI-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACI-122.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACI-21.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACI-2.html"><B>Advanced Color Imaging on the Mac OS</B></A> / <BR><DD><A HREF="ACI-14.html"><B>Chapter 1 - Palette Manager</B></A> / <A HREF="ACI-15.html"><B>About the Palette Manager </B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING20-0></A>
<H2><A NAME=MARKER-21-91></A><A NAME=MARKER-21-92></A>How the Palette Manager Restores the Color Environment</H2>
 <A NAME=MARKER-9-67></A>When a window closes, the Palette Manager resets each display device to the default color table for that depth, except for those indexes still reserved by another application. (Eventually, the application that owns those indexes will terminate or voluntarily release the indexes.) You can run a long sequence of wildly animated color-stealing programs, quit them all, return to the Finder, and find every screen fully restocked with default system color tables. (But if an application calls the Color Manager function <CODE>ProtectEntry</CODE> to lock a device index, the Palette Manager cannot restore the default color tables.)<A NAME=MARKER-2-94></A><P>
 <A NAME=MARKER-2-95></A>The Palette Manager provides default color tables for differing screen devices:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Screen device<TH>Default color table <TR>
<TD>Any device in gray mode or 1 bit deep<TD>A grayscale ramp; that is, an evenly spaced range from white in index 0 to black in the last index (only white and black in 1-bit mode).<TR>
<TD>A color device in 2-bit mode<TD>Indexes 0 to 3 contain white, 50 percent gray, the highlight color, and black, respectively.<TR>
<TD>A color device in 4-bit mode<TD>The <CODE>'clut'</CODE> system resource with a resource ID of 4. It could be in the system file or stored in ROM. If the color closest to the highlight color differs from it by more than $3000 in any component, the color is averaged with the highlight color.<TR>
<TD>A color device in 8-bit mode<TD>The <CODE>'clut'</CODE> system resource with a resource ID of 8. It could be in the system file or stored in ROM.</TABLE>
<P>
 <A NAME=MARKER-2-98></A><A NAME=MARKER-2-99></A><A NAME=MARKER-9-102></A>The <CODE>'clut'</CODE> resource IDs 1, 2, 4, and 8 are the standard color lookup tables for those bit depths; they are shown in <A HREF=#MARKER-9-101>Figure 1-1</A>. <P>
 The <CODE>'clut'</CODE> resource IDs 34, 36, and 40--the bit depth plus 32--are grayscale ramps for bit depths of 2, 4, and 8. <P>
 The default color lookup tables with the highlight color added are <CODE>'clut'</CODE> resource IDs 66, 68, and 72--that is, the bit depth plus 64. To get these color lookup tables, use the <CODE>GetCTable</CODE> function (not <CODE>GetResource</CODE>), as described in the chapter "Color QuickDraw" of <I>Inside Macintosh: Imaging With QuickDraw</I>.<P>
<B>Figure 1-1  <A NAME=MARKER-9-101></A>The colors of the default color tables</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CSU-L-08_2.1.jpg">
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACI-19.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACI-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACI-122.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACI-21.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACI-3.html">&copy; Apple Computer, Inc.</A><br>13 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

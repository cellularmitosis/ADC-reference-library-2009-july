<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTSndUReply</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING172></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-171.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-173.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-169.html"><B>Functions for Connectionless Transaction-Based Endpoints</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING172-0></A>
<H3><A NAME=MARKER-9-187></A>OTSndUReply</H3>
 Replies to a request sent by a client using a connectionless transaction-based protocol.<P>
<A NAME=HEADING172-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-188></A>OSStatus OTSndUReply(EndpointRef ref, 
                     TUnitReply* reply, 
                                         OTFlags replyFlags);
</PRE>
<A NAME=HEADING172-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-12-189></A>OSStatus TEndpoint::SndUReply(TUnitReply* reply,
                     OTFlags replyFlags);
</PRE>
<A NAME=HEADING172-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint sending the reply.
<DT><CODE>reply</CODE><P>
<DD> A pointer to a <A HREF=NetworkingWOT-141.html#MARKER-9-100><CODE>TUnitReply</CODE></A> structure that specifies information about the requester, options, the ID of this transaction, and the reply data. <P>
<DT>
<DD> The<CODE> reply-&gt;addr</CODE> field specifies the location and size of a buffer containing the address of the requester. You are not required to provide this information. If you do not want to provide address information, set the <CODE>reply-&gt;addr.len</CODE> field to 0. To specify an address, you must allocate a buffer for the address and initialize it to the destination address. Then you set the <CODE>reply-&gt;addr.buf</CODE> field to point to the buffer and set the <CODE>reply-&gt;addr.len</CODE> field to the length of the address. <P>
<DT>
<DD> The<CODE> reply-&gt;opt</CODE> field specifies the location and size of a buffer containing the options that you set for this reply. You must set the <CODE>reply-&gt;opt.len</CODE> field to the length of the options or to 0 if you don't want to specify any options.<P>
<DT>
<DD> The<CODE> reply-&gt;udata </CODE>field specifies the location and size of a buffer containing the reply data sent to the requester. You allocate a buffer that contains the reply data, set the <CODE>reply-&gt;udata.buf</CODE> field to point to that buffer, and set the <CODE>reply-&gt; udata.len</CODE> field to specify the size of the reply. The size cannot exceed the value specified for the <CODE>tsdu</CODE> field of the <CODE>TEndpointInfo</CODE> structure for the endpoint.<P>
<DT>
<DD>  Set the <CODE>reply-&gt;sequence</CODE> field to the value that you read for this field with the <A HREF=NetworkingWOT-171.html#MARKER-9-184><CODE>OTRcvURequest</CODE></A> function.<P> 
<DT><CODE>replyFlags</CODE>
<DD> A bitmapped 32-bit value, which you can set to <CODE>T_MORE</CODE> to indicate that you are sending more reply data with a subsequent call to the <CODE>OTSndUReply</CODE> function.<P>
<DT><I>function result</I>
<DD> An error code. See Discussion.
</DL>
<A NAME=HEADING172-15></A>
<H5>DISCUSSION</H5>
 You use the <CODE>OTSndUReply</CODE> function to send a reply. The <CODE>TUnitReply</CODE> structure that you pass in the <CODE>reply</CODE> parameter specifies the address of the requester, the reply data, any options you want to specify for this reply, and a transaction ID. If you do not specify the requester's address, the endpoint provider uses the transaction ID value stored in the <CODE>sequence</CODE> field of the <CODE>reply</CODE> parameter to match the reply against a pending request and knows in this way where to send the request.<P>
 If requests are acknowledged and you do not receive an acknowledgement from the other side within a specific amount of time (usually negotiated with the <CODE>ATP_OPT_RELTIMER</CODE> option), the function returns with the <CODE>kETIMEDOUTErr</CODE> result. If requests are not acknowledged, the function returns immediately, and you have no way of knowing whether the reply was received and read.<P>
 If requests are not acknowledged, the provider generates a <CODE>T_REPLYCOMPLETE</CODE> event code for asynchronous responders even if the requester has not acknowledged receipt of the reply. Thus, the only way for you to know whether this event actually means that the reply was received, is to examine the <CODE>reqFlags</CODE> field of the <CODE>req</CODE> parameter for the <A HREF=NetworkingWOT-171.html#MARKER-9-184><CODE>OTRcvURequest</CODE></A> function. If the <CODE>T_ACKNOWLEDGED</CODE> flag is set, then the <CODE>T_REPLYCOMPLETE</CODE> event indicates that your reply was received. The <CODE>cookie</CODE> parameter passed to the notifier to indicate completion is set to the <CODE>reply</CODE> parameter<CODE>.</CODE><P>
 The following table shows how the endpoint's mode of execution and blocking status affects the behavior of the <CODE>OTSndUReply</CODE> function.<P>

<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Blocking<TH>Nonblocking<TR>
<TD>Synchronous<TD>The function returns when the provider lifts flow-control restrictions and the reply has been acknowledged or timed out (if the matching request was an acknowledged request).<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result is never returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TR>
<TD>Asynchronous&nbsp;&nbsp;<TD>The function returns immediately.<P>The provider calls your notifier, passing <CODE>T_REPLYCOMPLETE</CODE> for the <CODE>code</CODE> parameter when the reply is acknowledged or timed out.<TD>The function returns immediately.<P>The provider calls your notifier, passing <CODE>T_REPLYCOMPLETE</CODE> for the <CODE>code</CODE> parameter when the reply is acknowledged or timed out.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.</TABLE>
<P>
<A NAME=HEADING172-20></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-175.html#MARKER-9-196><CODE>OTCancelUReply</CODE></A> function.<P>
 <A HREF=NetworkingWOT-414.html#MARKER-9-27>"AppleTalk Reference"</A>.<P>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-171.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-173.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<html><head><title>Mac OS X Developer Tools
 Manual Page For tnameserv(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/tnameserv" title="Mac OS X Developer Tools
 Manual Page for tnameserv(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/tnameserv"; name=tnameserv(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
tnameserv(1)                                                                                    tnameserv(1)



<b>NAME</b>
       tnameserv - Java IDL name server starter script

<b>SYNOPSIS</b>
       <b>tnameserv</b> <b>-ORBInitialPort</b> <u>portNumber</u>

<b>DESCRIPTION</b>
       The  CORBA COS (Common Object Services) Naming Service provides a tree-like directory for object ref-<font color="#ffffff" class="whiteout">erences&nbsp;references</font>
       erences much like a filesystem provides a directory structure for files.  The Naming Service provided
       with Java IDL is a simple implementation of the COS Naming Service specification.

       Object references are stored in the namespace by name and each object reference-name pair is called a
       name binding.  Name bindings may be organized under naming contexts.  Naming contexts are  themselves
       name bindings and serve the same organizational function as a file system subdirectory.  All bindings
       are stored under the initial naming context.  The initial naming context is the only persistent bind-<font color="#ffffff" class="whiteout">ing&nbsp;binding</font>
       ing in the namespace; the rest of the namespace is lost if the Java IDL name server process halts and
       restarts.

       For an applet or application to use COS naming, its ORB must know the name and port of a host running
       a  naming  service  or have access to a stringified initial naming context for that name server.  The
       naming service can either be the Java IDL name server or another COS-compliant name service.

<b>USAGE</b>
   <b>Starting</b> <b>the</b> <b>Java</b> <b>IDL</b> <b>Name</b> <b>Server</b>
       You must start the Java IDL name server before an application or applet that uses its naming service.
       Installation  of  the Java IDL product creates a script named tnameserv that starts the Java IDL name
       server.  Start the name server so it runs in the background.

       If you do not specify otherwise, the Java IDL name server listens on port 900 for the bootstrap  pro-<font color="#ffffff" class="whiteout">tocol&nbsp;protocol</font>
       tocol  used  to implement the ORB <b>resolve_initial_references()</b> and <b>list_initial_references()</b> methods.
       Specify a different port, for example, <b>1050</b>, as follows:

              <b>example%</b> <b>tnameserv</b> <b>-ORBInitialPort</b> <b>1050</b>

       Clients of the name server must be made aware of the  new  port  number.   Do  this  by  setting  the
       <b>org.omg.CORBA.ORBInitialPort</b> property to the new port number when creating the ORB object.

   <b>Stopping</b> <b>the</b> <b>Java</b> <b>IDL</b> <b>Name</b> <b>Server</b>
       To  stop  the Java IDL name server, use the relevant operating system command, such as <a href="kill.1.html#//apple_ref/doc/man/1/kill"><b>kill</b>(1)</a>.  Note
       that names registered with the Java IDL name service disappear when the server is terminated.

   <b>Sample</b> <b>Client:</b> <b>Adding</b> <b>Objects</b>
       The following sample program illustrates how to add names to the namespace.  It is  a  self-contained
       Name Server client that creates the following simple tree.

               <b>Initial</b>
            <b>Naming</b> <b>Context</b>
              <b>/</b>      <b>\</b>
             <b>/</b>        <b>\</b>
          <b>plans</b>      <b>personal</b>
                       <b>/\</b>
                      <b>/</b>  <b>\</b>
               <b>calendar</b>   <b>schedule</b>

       In  this example, "plans" is an object reference and "personal" is a naming context that contains two
       object references: "calendar" and "schedule".

       <b>import</b> <b>java.util.Properties;</b>
       <b>import</b> <b>org.omg.CORBA.*;</b>
       <b>import</b> <b>org.omg.CosNaming.*;</b>

       <b>public</b> <b>class</b> <b>NameClient</b>
       <b>{</b>
          <b>public</b> <b>static</b> <b>void</b> <b>main(String</b> <b>args[])</b>
          <b>{</b>
             <b>try</b> <b>{</b>

       In the above section, <b>Starting</b> <b>the</b> <b>Java</b> <b>IDL</b> <b>Name</b> <b>Server</b>, the nameserver was  started  on  port  <b>1050</b>.
       The following code ensures that the client program is aware of this port number.

               <b>Properties</b> <b>props</b> <b>=</b> <b>new</b> <b>Properties();</b>
               <b>props.put("org.omg.CORBA.ORBInitialPort",</b> <b>"1050");</b>
               <b>ORB</b> <b>orb</b> <b>=</b> <b>ORB.init(args,</b> <b>props);</b>

       The  following code obtains the initial naming context and assigns it to <b>ctx</b>.  The second line copies
       <b>ctx</b> into a dummy object reference, <b>objref</b>, that we will attach to various  names  and  add  into  the
       namespace.

               <b>NamingContext</b> <b>ctx</b> <b>=</b> <b>NamingContextHelper.narrow</b>
                   <b>(orb.resolve_initial_references("NameService"));</b>
               <b>NamingContext</b> <b>objref</b> <b>=</b> <b>ctx;</b>

       The  following code creates a name "plans" of type "text" and binds it to our dummy object reference.
       "plans" is then added under the initial naming context using <b>rebind</b>.  The <b>rebind</b> method allows us  to
       run this program over and over again without getting the exceptions we would get from using <b>bind</b>.

               <b>NameComponent</b> <b>nc1</b> <b>=</b> <b>new</b> <b>NameComponent("plans",</b> <b>"text");</b>
               <b>NameComponent[]</b> <b>name1</b> <b>=</b> <b>{nc1};</b>
               <b>ctx.rebind(name1,</b> <b>objref);</b>
               <b>System.out.println("plans</b> <b>rebind</b> <b>sucessful!");</b>

       The  following  code  creates  a naming context called "Personal" of type "directory".  The resulting
       object reference, <b>ctx2</b>, is bound to the name and added under the initial naming context.

               <b>NameComponent</b> <b>nc2</b> <b>=</b> <b>new</b> <b>NameComponent("Personal",</b> <b>"directory");</b>
               <b>NameComponent[]</b> <b>name2</b> <b>=</b> <b>{nc2};</b>
               <b>NamingContext</b> <b>ctx2</b> <b>=</b> <b>ctx.bind_new_context(name2);</b>
               <b>System.out.println("new</b> <b>naming</b> <b>context</b> <b>added..");</b>

       The remainder of the code binds the dummy object reference using the names "schedule" and  "calendar"
       under the "Personal" naming context (<b>ctx2</b>).

               <b>NameComponent</b> <b>nc3</b> <b>=</b> <b>new</b> <b>NameComponent("schedule",</b> <b>"text");</b>
               <b>NameComponent[]</b> <b>name3</b> <b>=</b> <b>{nc3};</b>
               <b>ctx2.rebind(name3,</b> <b>objref);</b>
               <b>System.out.println("schedule</b> <b>rebind</b> <b>sucessful!");</b>

               <b>NameComponent</b> <b>nc4</b> <b>=</b> <b>new</b> <b>NameComponent("calender",</b> <b>"text");</b>
               <b>NameComponent[]</b> <b>name4</b> <b>=</b> <b>{nc4};</b>
               <b>ctx2.rebind(name4,</b> <b>objref);</b>
               <b>System.out.println("calender</b> <b>rebind</b> <b>sucessful!");</b>

           <b>}</b> <b>catch</b> <b>(Exception</b> <b>e)</b> <b>{</b>
               <b>e.printStackTrace(System.err);</b>
           <b>}</b>
         <b>}</b>
       <b>}</b>


   <b>Sample</b> <b>Client:</b> <b>Browsing</b> <b>the</b> <b>Namespace</b>
       The following sample program illustrates how to browse the namespace.

       <b>import</b> <b>java.util.Properties;</b>
       <b>import</b> <b>org.omg.CORBA.*;</b>
       <b>import</b> <b>org.omg.CosNaming.*;</b>

       <b>public</b> <b>class</b> <b>NameClientList</b>
       <b>{</b>
          <b>public</b> <b>static</b> <b>void</b> <b>main(String</b> <b>args[])</b>
          <b>{</b>
             <b>try</b> <b>{</b>

       In  the  above  section,  <b>Starting</b> <b>the</b> <b>Java</b> <b>IDL</b> <b>Name</b> <b>Server</b>, the nameserver was started on port <b>1050</b>.
       The following code ensures that the client program is aware of this port number.

               <b>Properties</b> <b>props</b> <b>=</b> <b>new</b> <b>Properties();</b>
               <b>props.put("org.omg.CORBA.ORBInitialPort",</b> <b>"1050");</b>
               <b>ORB</b> <b>orb</b> <b>=</b> <b>ORB.init(args,</b> <b>props);</b>

       The following code obtains the initial naming context.

               <b>NamingContext</b> <b>nc</b> <b>=</b> <b>NamingContextHelper.narrow</b>
                  <b>(orb.resolve_initial_references("NameService"));</b>

       The list method lists the bindings in the naming context.  In this case, up to 1000 bindings from the
       initial naming context will be returned in the <b>BindingListHolder</b>; any remaining bindings are returned
       in the <b>BindingIteratorHolder</b>.

               <b>BindingListHolder</b> <b>bl</b> <b>=</b> <b>new</b> <b>BindingListHolder();</b>
               <b>BindingIteratorHolder</b> <b>blIt=</b> <b>new</b> <b>BindingIteratorHolder();</b>
               <b>nc.list(1000,</b> <b>bl,</b> <b>blIt);</b>

       The following code gets the array of bindings out of the returned <b>BindingListHolder</b>.  If there are no
       bindings, the program ends.

               <b>Binding</b> <b>bindings[]</b> <b>=</b> <b>bl.value;</b>
               <b>if</b> <b>(bindings.length</b> <b>==</b> <b>0)</b> <b>return;</b>

       The remainder of the code loops through the bindings and prints the names out.

               <b>for</b> <b>(int</b> <b>i=0;</b> <b>i</b> <b>&lt;</b> <b>bindings.length;</b> <b>i++)</b> <b>{</b>

                   <b>//</b> <b>get</b> <b>the</b> <b>object</b> <b>reference</b> <b>for</b> <b>each</b> <b>binding</b>
                   <b>org.omg.CORBA.Object</b> <b>obj</b> <b>=</b> <b>nc.resolve</b>
                            <b>(bindings[i].binding_name);</b>
                   <b>String</b> <b>objStr</b> <b>=</b> <b>orb.object_to_string(obj);</b>
                   <b>int</b> <b>lastIx</b> <b>=</b> <b>bindings[i].binding_name.length-1;</b>

                   <b>//</b> <b>check</b> <b>to</b> <b>see</b> <b>if</b> <b>this</b> <b>is</b> <b>a</b> <b>naming</b> <b>context</b>
                   <b>if</b> <b>(bindings[i].binding_type</b> <b>==</b> <b>BindingType.ncontext)</b> <b>{</b>
                     <b>System.out.println</b>
                            <b>("Context:</b> <b>"</b> <b>+</b> <b>bindings[i].binding_name[lastIx].id);</b>
                   <b>}</b> <b>else</b> <b>{</b>
                       <b>System.out.println</b>
                              <b>("Object:</b> <b>"</b> <b>+</b> <b>bindings[i].binding_name[lastIx].id);</b>
                   <b>}</b>
               <b>}</b>

              <b>}</b> <b>catch</b> <b>(Exception</b> <b>e)</b> <b>{</b>
               <b>e.printStackTrace(System.err);</b>
              <b>}</b>
          <b>}</b>
       <b>}</b>


<b>SEE</b> <b>ALSO</b>
       <a href="kill.1.html#//apple_ref/doc/man/1/kill"><b>kill</b>(1)</a>



                                                13 June 2000                                    tnameserv(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/tnameserv.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/tnameserv.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/tnameserv.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

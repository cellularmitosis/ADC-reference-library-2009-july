<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=HTML">
<title>IOFireWireSBP2LibORBInterface</title>
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/HardwareDrivers/index.html#//apple_ref/doc/uid/TP30001281-TP40003576" target="_top">Hardware & Drivers</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/iokit_fw" target="_top">I/O Kit Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOFireWireSBP2LibORBInterface">IOFireWireSBP2LibORBInterface</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOFireWireSBP2Lib.h</a></div></div></td>
</tr></table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>Represents an SBP2 normal command ORB.  Supplies the APIs for configuring normal
command ORBs.  This includes setting the command block and writing the page tables for I/O.
The ORBs are executed using the submitORB method in IOFireWireSBP2LibLoginInterface.
<!-- end abstract --></p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/getRefCon" target="_top">getRefCon</a></tt></dt>
<dd><p>Returns the refCon set with setRefCon.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSetCommandBuffersAsRanges" target="_top">LSIWorkaroundSetCommandBuffersAsRanges</a></tt></dt>
<dd><p>Creates a page table with the LSI workaround from a list of ranges.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSyncBuffersForInput" target="_top">LSIWorkaroundSyncBuffersForInput</a></tt></dt>
<dd><p>Synchronize the buffers for input.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSyncBuffersForOutput" target="_top">LSIWorkaroundSyncBuffersForOutput</a></tt></dt>
<dd><p>Synchronize the buffers for output.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/releaseCommandBuffers" target="_top">releaseCommandBuffers</a></tt></dt>
<dd><p>Releases SBP2's reference to the command buffers.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandBlock" target="_top">setCommandBlock</a></tt></dt>
<dd><p>Sets the command block portion of the ORB.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandBuffersAsRanges" target="_top">setCommandBuffersAsRanges</a></tt></dt>
<dd><p>Creates a page table from a list of ranges.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandFlags" target="_top">setCommandFlags</a></tt></dt>
<dd><p>Sets configuration flags for the ORB.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandGeneration" target="_top">setCommandGeneration</a></tt></dt>
<dd><p>Sets the command generation.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandTimeout" target="_top">setCommandTimeout</a></tt></dt>
<dd><p>Sets the timeout of the ORB.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setMaxORBPayloadSize" target="_top">setMaxORBPayloadSize</a></tt></dt>
<dd><p>Sets max payload size for the ORB.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setRefCon" target="_top">setRefCon</a></tt></dt>
<dd><p>Sets the ORB refCon.
</p></dd>
</dl>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/getRefCon;  indexgroup=SBP-2 ;   name=getRefCon --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/getRefCon"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getRefCon">getRefCon</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns the refCon set with setRefCon.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span> ( <span class="type">*</span><!-- a --><span class="function">getRefCon</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the previously stored user defined value.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Returns the user defined value previously stored in the ORB with setRefCon.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSetCommandBuffersAsRanges;  indexgroup=SBP-2 ;   name=LSIWorkaroundSetCommandBuffersAsRanges --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSetCommandBuffersAsRanges"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LSIWorkaroundSetCommandBuffersAsRanges">LSIWorkaroundSetCommandBuffersAsRanges</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Creates a page table with the LSI workaround from a list of ranges.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LSIWorkaroundSetCommandBuffersAsRanges</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">FWSBP2VirtualRange</span><!-- /a --> <span class="type">*</span><span class="param">ranges</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">withCount</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">withDirection</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">offset</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">length</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>ranges</code></dt>
<dd><p>An array of ranges representing the data to be transfered.</p></dd>
<dt><code>withCount</code></dt>
<dd><p>The number of ranges in the ranges array.</p></dd>
<dt><code>withDirection</code></dt>
<dd><p>An IODirection indicating the direction of data transfer.</p></dd>
<dt><code>offset</code></dt>
<dd><p>Offset in bytes into data to begin writing table at.</p></dd>
<dt><code>length</code></dt>
<dd><p>Number of bytes of data to map from offset.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns KIOReturnSuccess if the page table was written successfully. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Creates an LSI workaround page table with the given parameters. Any addresses 
mapped by this method routine must remain valid until setCommandBuffers is called again
or releaseCommandBuffers is called. The SBP2 services do not release references to the 
command buffers just because the command has completed.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSyncBuffersForInput;  indexgroup=SBP-2 ;   name=LSIWorkaroundSyncBuffersForInput --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSyncBuffersForInput"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LSIWorkaroundSyncBuffersForInput">LSIWorkaroundSyncBuffersForInput</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Synchronize the buffers for input.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LSIWorkaroundSyncBuffersForInput</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if sync was successful.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Since double buffering may be invovled in the workaround.  The driver needs to 
indicate when these buffers should be syncronized with the original descriptor.  For data 
that will be input LSIWorkaroundSyncBuffersForInput should be called after receiving completion status 
for the ORB.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSyncBuffersForOutput;  indexgroup=SBP-2 ;   name=LSIWorkaroundSyncBuffersForOutput --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/LSIWorkaroundSyncBuffersForOutput"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="LSIWorkaroundSyncBuffersForOutput">LSIWorkaroundSyncBuffersForOutput</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Synchronize the buffers for output.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">LSIWorkaroundSyncBuffersForOutput</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if sync was successful.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Since double buffering may be invovled in the workaround.  The driver needs to 
indicate when these buffers should be syncronized with the original descriptor.  For data 
that will be output LSIWorkaroundSyncBuffersForOutput should be called before submiting the ORB.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/releaseCommandBuffers;  indexgroup=SBP-2 ;   name=releaseCommandBuffers --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/releaseCommandBuffers"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="releaseCommandBuffers">releaseCommandBuffers</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Releases SBP2's reference to the command buffers.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">releaseCommandBuffers</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns KIOReturnSuccess if the page table was cleared successfully. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>When you create a page table with one of the variants of setCommandBuffers.  
SBP2 holds on to a reference to the buffers until this method is called.  This means that 
if a command completed and you released the buffers 
without calling this method you could leave FW in an inconsistent state.  
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandBlock;  indexgroup=SBP-2 ;   name=setCommandBlock --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandBlock"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setCommandBlock">setCommandBlock</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets the command block portion of the ORB.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">setCommandBlock</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buffer</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">length</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>buffer</code></dt>
<dd><p>Pointer to buffer to copy command block from.</p></dd>
<dt><code>length</code></dt>
<dd><p>Number of bytes of data to copy.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns KIOReturnSuccess if the command block was updated successfully. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Copys the data provided in the buffer to the command block portion of the ORB.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandBuffersAsRanges;  indexgroup=SBP-2 ;   name=setCommandBuffersAsRanges --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandBuffersAsRanges"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setCommandBuffersAsRanges">setCommandBuffersAsRanges</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Creates a page table from a list of ranges.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">setCommandBuffersAsRanges</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">FWSBP2VirtualRange</span><!-- /a --> <span class="type">*</span><span class="param">ranges</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">withCount</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">withDirection</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">offset</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">length</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>ranges</code></dt>
<dd><p>An array of ranges representing the data to be transfered.</p></dd>
<dt><code>withCount</code></dt>
<dd><p>The number of ranges in the ranges array.</p></dd>
<dt><code>withDirection</code></dt>
<dd><p>An IODirection indicating the direction of data transfer.</p></dd>
<dt><code>offset</code></dt>
<dd><p>Offset in bytes into data to begin writing table at.</p></dd>
<dt><code>length</code></dt>
<dd><p>Number of bytes of data to map from offset.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns KIOReturnSuccess if the page table was written successfully. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Creates a page table with the given parameters. Any addresses mapped by this method 
must remain valid until setCommandBuffers is called again or releaseCommandBuffers is called.  
The SBP2 services do not release references to the command buffers just because the command 
has completed.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandFlags;  indexgroup=SBP-2 ;   name=setCommandFlags --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandFlags"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setCommandFlags">setCommandFlags</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets configuration flags for the ORB.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setCommandFlags</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">flags</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>flags</code></dt>
<dd><p>The flags to be set.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Sets the configuration flags for the ORB.  These can be any of the following:
</p>
<p>kFWSBP2CommandCompleteNotify - Set the notify bit as specified in SBP2 standard. Set to receive completion/timeout notification on this ORB.  You almost always want to set this.</p>
<p>kFWSBP2CommandTransferDataFromTarget - Transfer direction as specified in SBP2 standard.  Set if data is to be written by the device into the host's memory.</p>
<p>kFWSBP2CommandImmediate - Immediate Append.  ORB address will be written to fetch agent and not chained.  It is only legal to have one immediate ORB in progress at a time.</p>
<p>kFWSBP2CommandNormalORB - ORB format 0 - Format specified by SBP2 standard.  Set this for most ORBs.</p>
<p>kFWSBP2CommandReservedORB - ORB format 1 - Format reserved by SBP2 standard for future standardization.</p>
<p>kFWSBP2CommandVendorORB - ORB format 2 - Format specified by SBP2 standard for vendor dependent ORBs.</p>
<p>kFWSBP2CommandDummyORB - ORB format 3 - Format specified by SBP2 standard for dummy ORBs.</p>
<p>kFWSBP2CommandCheckGeneration - If set upon submitORB, the ORB will only be appended if generation set with setCommandGeneration() matches the current generation.  Pretty much all SBP2 drivers need sophisticated logic to track login state, so this is generally not used. </p>
<p>kFWSBP2CommandFixedSize - Do not allocate more memory for page table if needed.  If there is not enough space in the currently allocated page table, the setCommandBuffers call will fail.  This is important to set if your device is the backing store, as we don't want to cause memory allocations on the paging path. </p>
<p>kFWSBP2CommandVirtualORBs - Normally ORBs are backed by physical address spaces.  Setting this flag makes this ORB backed by a pseudo address space.  This can make ORBs easier to see in a bus trace.  Virtual ORBs will have an address in the form of ffcX.XXXX.0000.0000.  Pseudo address space backed ORBs are slower, so you won't want to set for deployment builds.</p>
<!-- end discussion -->
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandGeneration;  indexgroup=SBP-2 ;   name=setCommandGeneration --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandGeneration"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setCommandGeneration">setCommandGeneration</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets the command generation.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setCommandGeneration</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">generation</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>gen</code></dt>
<dd><p>The bus generation for command execution.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This sets the bus generation this ORB should be appended in.  It is only meaningful 
when combined with the kFWSBP2CommandCheckGeneration flags above.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandTimeout;  indexgroup=SBP-2 ;   name=setCommandTimeout --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setCommandTimeout"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setCommandTimeout">setCommandTimeout</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets the timeout of the ORB.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setCommandTimeout</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">timeout</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>timeout</code></dt>
<dd><p>The timeout duration in milliseconds.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This sets the timeout for the ORB in milliseconds. Note that ORBs without timeouts 
can be "lost."  You will obviously not recieve timeout notification for timeouts of zero.  But 
perhaps less obviously you will not recieve orb reset notification, which is really a sort of
accelerated timeout notification for bus reset situations.  
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setMaxORBPayloadSize;  indexgroup=SBP-2 ;   name=setMaxORBPayloadSize --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setMaxORBPayloadSize"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setMaxORBPayloadSize">setMaxORBPayloadSize</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets max payload size for the ORB.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setMaxORBPayloadSize</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">size</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>maxPayloadSize</code></dt>
<dd><p>The maximum payload size in bytes.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This sets the maximum payload size for this ORB only.  This size is clipped by 
the global max payload size set in the login object.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setRefCon;  indexgroup=SBP-2 ;   name=setRefCon --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibORBInterface/setRefCon"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setRefCon">setRefCon</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets the ORB refCon.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setRefCon</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">refCon</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibORBInterface.</p></dd>
<dt><code>refCon</code></dt>
<dd><p>a user defined value.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Sets a user defined value on the ORB that can be retrieved later with the 
method getRefCon.
<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/IOKit/IOFireWireSBP2Lib_h/Classes/IOFireWireSBP2LibORBInterface/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/IOKit/IOFireWireSBP2Lib_h/Classes/IOFireWireSBP2LibORBInterface/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/IOKit/IOFireWireSBP2Lib_h/Classes/IOFireWireSBP2LibORBInterface/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&nbsp;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2009-02-23
</div>
<!-- headerDoc=cl; uid=//apple_ref/c/cl/IOFireWireSBP2LibORBInterface; indexgroup=SBP-2 ; name=IOFireWireSBP2LibORBInterface--><a name="//apple_ref/c/cl/IOFireWireSBP2LibORBInterface"></a>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Xgrid Programming Guide: Writing a Cocoa Xgrid Client</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Writing a Cocoa Xgrid Client"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006246-CH7" title="Writing a Cocoa Xgrid Client"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000426" target="_top">Mac OS X Server</a> &gt; <a href="../../../HighPerformanceComputing-date.html#//apple_ref/doc/uid/TP30000440-TP30000426-TP40001893" target="_top">High Performance Computing</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40006246-CH1-DontLinkElementID_36">Xgrid Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../OverridingJobSubmission/OverridingJobSubmission.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40006246-CH7-SW1" title="Writing a Cocoa Xgrid Client"></a><h1>Writing a Cocoa Xgrid Client</h1><p>As you learned in the previous chapter, you can create a client application by simply modifying the GridSample sample code. You may need to go further, however, and develop your own application, or add Xgrid capability to an existing application. This chapter describes the basic steps.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_27">Writing an Application in Six Steps</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_28">Step One: Locate a Controller and Connect</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_29">Step Two: Authenticate</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_30">Step Three: Submit a Job</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_31">Step Four: Retrieve Job ID</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_32">Step Five: Register for Notifications</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_33">Step Six: Data Collection</a>
				
			<br/>
			
        
			
			
				<a href="WritingaCocoaXgridClient.html#//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_34">Good Housekeeping</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_27" title="Writing an Application in Six Steps"></a><h2>Writing an Application in Six Steps</h2><p>There are six steps that any Xgrid client application must take:</p><ol class="ol"><li class="li"><p>Locate a controller—You need to locate a controller, which typically involves bringing up a service browser and letting the user choose a controller.</p></li><li class="li"><p>Connect and authenticate—You need to connect to the controller, which is typically password protected.</p></li><li class="li"><p>Submit the job—The tasks must be assembled and submitted to the controller with the proper syntax, specifying a grid.</p></li><li class="li"><p>Identify the job—When you submit a job, an action monitor object is returned. Use this object to determine whether your job submission was successful and to obtain the job ID for future reference.</p></li><li class="li"><p>Receive notifications—Once you have a job ID, you can register to be notified when the job completes, when tasks complete, or when errors occur. </p></li><li class="li"><p>Collect the data—When the job completes, you need to collect the returned data and deal with it appropriately.</p></li></ol><p>Of course, there are housekeeping tasks as well, such as deleting the job when you are done.</p><p>This chapter highlights the functions you need to use to accomplish each step, and points you to code samples that illustrate their use. </p><p>All code samples are included as part of the GridSample project, which is installed in the <code>Developer/Examples/Xcode</code> directory on your hard disk when you install the Mac OS X Developer Tools (Tiger) or XCode Tools (Leopard).</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_48" title="Important:"></a><p><strong>Important:</strong>&nbsp;Most objects in the Xgrid Foundation API load their attributes asynchronously. If you obtain an object from a function, and immediately interrogate its attributes, you may find that they are mostly <code>nil</code>. To retrieve valid attributes, set up a callback using <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGActionMonitor/Classes/XGActionMonitor/index.html#//apple_ref/occ/cl/XGActionMonitor" target="_top">XGActionMonitor</a></code>; when you receive a notification, test the <code>isUpdating</code> attribute.  You may get multiple notifications before updating is complete. Keep monitoring until the <code>isUpdating</code> attribute is false. The other attributes are now valid and ready for you to work with.</p><p></p></div><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_28" title="Step One: Locate a Controller and Connect"></a><h2>Step One: Locate a Controller and Connect</h2><p>To browse for Xgrid controllers, use the <code><a href="../../../../Cocoa/Reference/Foundation/Classes/NSNetServiceBrowser_Class/Reference/Reference.html#//apple_ref/occ/cl/NSNetServiceBrowser" target="_top">NSNetServiceBrowser</a></code> function. <code>GridSampleServiceBrowser.m</code> in GridSample provides a working code sample of an Xgrid service browser. </p><p>Connect to an Xgrid server using the <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGConnection/Classes/XGConnection/index.html#//apple_ref/occ/cl/XGConnection" target="_top">XGConnection</a></code> and <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGController/Classes/XGController/index.html#//apple_ref/occ/cl/XGController" target="_top">XGController</a></code> functions. See <code>GridSampleConnectionController.m</code> in GridSample for working code samples. </p><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_29" title="Step Two: Authenticate"></a><h2>Step Two: Authenticate</h2><p>You may not need to authenticate to access an Xgrid controller, but you typically do. </p><p>Authentication by means of a simple password is supported, as is authentication using single sign-on (SSO or Kerberos). The <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGConnection/Classes/XGConnection/index.html#//apple_ref/occ/cl/XGConnection" target="_top">XGConnection</a></code> function requires an authentication parameter. If the controller is unprotected, pass <code>nil</code>. If it is protected, pass  the user name and password, using <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGTwoWayRandomAuthenticator/Classes/XGTwoWayRandomAuthenticator/index.html#//apple_ref/occ/cl/XGTwoWayRandomAuthenticator" target="_top">XGTwoWayRandomAuthenticator</a></code>. If using Kerberos, use <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGGSSAuthenticator/Classes/XGGSSAuthenticator/index.html#//apple_ref/occ/cl/XGGSSAuthenticator" target="_top">XGGSSAuthenticator</a></code>.</p><p><code>GridSampleConnectionController.m</code> attempts an initial connection with the connection authenticator set to <code>nil</code>. If the connection fails with an authentication error, the user is prompted for login information and <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGAuthenticator/Classes/XGAuthenticator/index.html#//apple_ref/occ/cl/XGAuthenticator" target="_top">XGAuthenticator</a></code> is set.</p><p>Refer to <code>GridSampleLoginController.m</code> in GridSample for a working code sample.</p><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_30" title="Step Three: Submit a Job"></a><h2>Step Three: Submit a Job</h2><p>Submit jobs to Xgrid using the <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGController/Classes/XGController/index.html#//apple_ref/occ/cl/XGController" target="_top">XGController</a></code> function, using this syntax: </p><p><code>-[XGController performSubmitJobActionWithJobSpecification:gridIdentifier:]</code></p><p>Note that you need to pass a job specification and a grid identifier, of type <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGGrid/Classes/XGGrid/index.html#//apple_ref/occ/cl/XGGrid" target="_top">XGGrid</a></code>. </p><p><code>GridSampleNewJobWindow.m</code> includes sample code for a pop-up window that allows the user to choose an available grid.</p><p>Constructing a properly formatted job submission is non-trivial. Refer to the man page for <code>xgrid</code> for the correct syntax. </p><p>Refer to <code>GridSampleNewJobWindowController.m</code> in GridSample for working job submission sample code. You may also find <code>GridCalendarNewJobWindowController.m</code> helpful. If you have not already done so, download the GridCalendar sample code from <span class="content_text"><a href="../../../../../samplecode/GridCalendar/" target="_top">http://developer.apple.com/samplecode/GridCalendar/</a></span>.</p><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_31" title="Step Four: Retrieve Job ID"></a><h2>Step Four: Retrieve Job ID</h2><p>When you submit a job using <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGController/Classes/XGController/index.html#//apple_ref/occ/cl/XGController" target="_top">XGController</a></code>, an <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGActionMonitor/Classes/XGActionMonitor/index.html#//apple_ref/occ/cl/XGActionMonitor" target="_top">XGActionMonitor</a></code> object is returned. Monitor the <code>XGActionMonitor</code> object until the <code>isUpdating</code> attribute is false, then verify that the dictionary contains a “success” entry. If the job submission is successful, the <code>jobIdentifier</code> attribute contains the job ID, an object of type <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGJob/Classes/XGJob/index.html#//apple_ref/occ/cl/XGJob" target="_top">XGJob</a></code>. Pass this identifier to the appropriate functions to monitor the job status and retrieve the data.</p><p>Refer to <code>GridSampleNewJobWindowController.m</code> in GridSample for working sample code.</p><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_32" title="Step Five: Register for Notifications"></a><h2>Step Five: Register for Notifications</h2><p>Register for notification of job state changes, or query the controller for the current job state, using the <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGActionMonitor/Classes/XGActionMonitor/index.html#//apple_ref/occ/cl/XGActionMonitor" target="_top">XGActionMonitor</a></code> function. Pass in the job identifier you received in step four.</p><p>Refer to <code>GridSampleNewJobWindowController.m</code> in GridSample for working sample code.</p><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_33" title="Step Six: Data Collection"></a><h2>Step Six: Data Collection</h2><p>When the job completes, collect your data using <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGFile/Classes/XGFile/index.html#//apple_ref/occ/cl/XGFile" target="_top">XGFile</a></code> and <code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGFileDownload/Classes/XGFileDownload/index.html#//apple_ref/occ/cl/XGFileDownload" target="_top">XGFileDownload</a></code> functions. Identify the job using the identifier object (<code><a href="../../../../Performance/Conceptual/XgridDeveloper/XGJob/Classes/XGJob/index.html#//apple_ref/occ/cl/XGJob" target="_top">XGJob</a></code>).</p><p>Refer to <code>GridSampleJobResultsWindowController.m</code> in GridSample for working sample code.</p><a name="//apple_ref/doc/uid/TP40006246-CH7-DontLinkElementID_34" title="Good Housekeeping"></a><h2>Good Housekeeping</h2><p>When the job is complete, and you have collected the results, the job should be deleted, notification observers should be removed, and unneeded structures and objects should be deallocated.</p><p>See the <code>dealloc</code> function in <code>GridSampleJobResultsWindowController.m</code> for an example of good housekeeping practices.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../OverridingJobSubmission/OverridingJobSubmission.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MacOSXServer/Conceptual/Xgrid_Programming_Guide/WritingaCocoaXgridClient/WritingaCocoaXgridClient.html%3Fid%3DTP40006246-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MacOSXServer/Conceptual/Xgrid_Programming_Guide/WritingaCocoaXgridClient/WritingaCocoaXgridClient.html%3Fid%3DTP40006246-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MacOSXServer/Conceptual/Xgrid_Programming_Guide/WritingaCocoaXgridClient/WritingaCocoaXgridClient.html%3Fid%3DTP40006246-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Using ZIP(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING86></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-85.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-87.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-84.html"><B>Chapter 4 - Zone Information Protocol (ZIP)</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING86-0></A>
<H1>Using ZIP</H1>
 The Zone Information Protocol provides three functions that you can use to obtain the names of registered zones. You can use these functions to obtain<P>
<UL>
<LI>the name of the zone to which your application and its node belong
<LI>the names of the zones in your local network or the names of all the zones that exist throughout the AppleTalk internet to which your local network belongs<P>
</UL>
 Applications running on nodes connected to both extended and<A NAME=MARKER-2-13></A> nonextended networks can use ZIP to get the name of their node's zone. An application running on a node that belongs to an extended network can call ZIP to get a list of all the zone names associated with that network. For example, a network administration application might use ZIP to provide an administrator with a list of the zones for a particular network so that the administrator can select the correct zone for a node when adding nodes to a network. <P>
 You can use ZIP in conjunction with NBP. For example, you can use ZIP to look up zones on the network, then use NBP to look up names in each zone.<P>
 ZIP sends the <CODE>GetMyZone</CODE>, <A NAME=MARKER-9-62></A><CODE>GetLocalZones</CODE>, and <A NAME=MARKER-2-41></A><CODE>GetZoneList</CODE> functions as <A NAME=MARKER-9-101></A>AppleTalk Transaction Protocol (ATP) requests. These requests always ask for a single response. <BR>For example, when you call ZIP to request zone name information, the portion of ZIP implemented on the node running your application sends a request using the transaction-<BR>based services of ATP to the portion of ZIP implemented on a local router that contains the zone information table; using ATP, ZIP on the router node transmits a response to your request. <P>
 When you call <CODE>GetMyZone</CODE> to get the name of your node's zone, ZIP returns the complete zone name in a single ATP response and writes that zone name to the <A NAME=MARKER-2-34></A>buffer you provide. However, when you want to retrieve a list of zone names belonging <BR>either to your local network or to all of the networks forming the internet, ZIP may not <BR>always be able to return the complete list of names in a single ATP response. In this <BR>case, you need to call the ZIP function repeatedly in a loop in order to retrieve all of the <BR>zone names. <P>
 The <CODE>GetMyZone</CODE>, <CODE>GetLocalZones</CODE>, and <CODE>GetZoneList</CODE> functions each use a parameter block of type <CODE>XPPParamBlock</CODE> to contain input and output values for the call. You use the<A NAME=MARKER-9-21></A> <CODE>xCallParam</CODE> variant record to the XPP parameter block for the ZIP functions. This parameter block contains an <CODE>ioRefNum</CODE> field, which the MPW interface sets to the .XPP driver reference number. <P>
 The parameter block for each of the three ZIP functions includes a <CODE>csCode</CODE> field and an <CODE>xppSubCode</CODE> field. You do not need to set these field values before you call the function; the MPW interface fills in the value for each of these fields. The value for the <CODE>csCode</CODE> field is always <CODE>xCall</CODE>. The <CODE>xppSubCode</CODE> field value identifies the specific ZIP function, and it differs for each of the three functions. <P>
 For the three ZIP functions, you specify timeout and retry values that determine the behavior of the ATP transaction that the ZIP call relies on. You need to set values for these fields before you call the ZIP function. You use the parameter block's <CODE>xppTimeout</CODE> field to set the timeout value and the <CODE>xppRetry</CODE> field to set the retry value. The timeout tells ATP how long in seconds to wait between each attempt, and the retry value tells it how may retries it should attempt. For information on how ATP uses these values, see the chapter "AppleTalk Transaction Protocol (ATP)" in this book. <P>
 <A NAME=MARKER-2-43></A>For each function, <A NAME=MARKER-2-236></A>you supply a<A NAME=MARKER-2-56></A> buffer to hold the returned zone name data and a buffer that ZIP requires for its own use. These two buffers and the <CODE>XPPParamBlock</CODE> parameter block that you allocate for the function belong to ZIP for the life of the call; you must not manipulate them or alter their contents during the operation. The memory for these buffers and the parameter block belongs to the function until the function completes execution. <P>
 If you set the function's <CODE>async</CODE> Boolean parameter to <CODE>TRUE</CODE>, either you must provide a completion routine or your application must poll the parameter block's <CODE>ioResult</CODE> field to determine when the function completes the operation. See the chapter "Introduction to AppleTalk" in this book for a discussion of synchronous and asynchronous execution as it applies to the Boolean parameter.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Networking-87.html#HEADING87-0">Getting the Name of Your Application's Zone</A>
<DD>
<DT><A HREF="Networking-88.html#HEADING88-0">Getting a List of Zone Names for Your Local Network  or Its Internet</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-85.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-87.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

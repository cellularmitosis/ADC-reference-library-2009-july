<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>The Original Time Manager (IM: Pr)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING55></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Processes-54.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-56.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="Processes-2.html"><B>Processes</B></A><BR><DD><A HREF="Processes-53.html"><B>Chapter 3 - Time Manager</B></A> / <A HREF="Processes-54.html"><B>About the Time Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING55-0></A>
<H2>The Original Time Manager</H2>
 <A NAME=MARKER-2-4></A>The Time Manager was first introduced with the Macintosh Plus ROMs (which are also used in Macintosh 512K enhanced models) and was intended for use internally by the Operating System. The original Time Manager allows delays as small as 1 millisecond, resulting in a maximum range of about 24 days.<A NAME=MARKER-2-24></A><A NAME=MARKER-2-39></A><P>
 <A NAME=MARKER-2-99></A>To schedule a task for later execution, place an entry into the Time Manager queue and then activate it. All Time Manager routines manipulate elements of the Time Manager queue, which are stored in a <B>Time Manager task record.</B> The task record for the original Time Manager is defined by the <CODE>TMTask</CODE> data type.<A NAME=MARKER-2-12></A><A NAME=MARKER-2-17></A><P>
<PRE>
TYPE TMTask =     {original and revised Time Manager task record}
   RECORD 
      qLink:      QElemPtr;      {next queue entry}
      qType:      Integer;       {queue type}
      tmAddr:     ProcPtr;       {pointer to task}
      tmCount:    LongInt;       {reserved}
   END;
</PRE>
 Of the four fields in this record, you need to fill in only the <CODE>tmAddr</CODE> field, which contains a pointer to the routine that is to be executed at some time in the future. The remaining fields are used internally by the Time Manager or are reserved by Apple Computer, Inc. However, you should set the <CODE>tmCount</CODE> field to 0 when you set up a task record.<A NAME=MARKER-2-1></A><P>
 The original Time Manager includes three routines:<P>
<UL>
<LI>The <CODE>InsTime</CODE> procedure installs a task record into the Time Manager queue.<A NAME=MARKER-2-98></A>
<LI>The <CODE>PrimeTime</CODE> procedure schedules a previously queued task record for future execution.<A NAME=MARKER-2-13></A>
<LI>The <CODE>RmvTime</CODE> procedure removes a task record from the Time Manager queue.<A NAME=MARKER-9-84></A><P>
</UL>
 Note that installing a request into the Time Manager queue (by calling the <CODE>InsTime</CODE> procedure) does not by itself schedule the specified routine for future execution. After you queue a request, you still need to activate (or <B>prime</B>) the request by specifying the desired delay until execution (by calling the <CODE>PrimeTime</CODE> procedure). Note also that the task record is not automatically removed from the Time Manager queue after the routine is executed. For this reason, you can reactivate the task by subsequent calls to <CODE>PrimeTime</CODE>; you do not have to reinstall the task record.<A NAME=MARKER-2-10></A><A NAME=MARKER-2-40></A><A NAME=MARKER-2-114></A><A NAME=MARKER-2-36></A><P>
 To remove a task record from the queue, you must call the <CODE>RmvTime</CODE> procedure. The <CODE>RmvTime</CODE> procedure removes a task record from the Time Manager queue whether or not that task was ever activated and whether or not its specified time delay has expired.<A NAME=MARKER-2-25></A><A NAME=MARKER-9-34></A><A NAME=MARKER-2-39></A><A NAME=MARKER-9-121></A><A NAME=MARKER-2-3></A><P>
</BLOCKQUOTE><P>
<HR>
<center>
<A HREF="Processes-54.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-56.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Processes-3.html">&copy; Apple Computer, Inc.</A><br>17 JUN 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

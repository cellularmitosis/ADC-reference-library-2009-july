<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GDevice (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING275></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-274.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-276.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-270.html"><B>Chapter 5 - Graphics Devices</B></A> / <A HREF="QuickDraw-273.html"><B>Graphics Devices Reference</B></A><BR><DL><DD><A HREF="QuickDraw-274.html"><B>Data Structures</B></A> / <A HREF="QuickDraw-268.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING275-0></A>
<H3><A NAME=MARKER-9-39></A>GDevice</H3>
 <A NAME=MARKER-14-41></A><A NAME=MARKER-14-41></A><A NAME=MARKER-2-137></A>Color QuickDraw stores state information for video devices and offscreen graphics worlds in <CODE>GDevice</CODE> records. When the system starts up, it allocates and initializes one handle to a <CODE>GDevice</CODE> record for each video device it finds. When you use the <CODE>NewGWorld</CODE> function (described in the chapter "Offscreen Graphics Worlds" in this book), Color QuickDraw automatically creates a <CODE>GDevice</CODE> record for the new offscreen graphics world. The system links these <CODE>GDevice</CODE> records in a list, called the <I>device list</I>. (You can find a handle to the first element in the device list in the global variable <CODE>DeviceList</CODE>.) By default, the <CODE>GDevice</CODE> record corresponding to the first video device found is marked as the current device; all other graphics devices in the list are initially marked as inactive. <P>
<DL>
<DT><B>Note</B>
<DD>Printing graphics ports, described in the chapter "Printing Manager" in this book, do not have <CODE>GDevice</CODE> records.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 When the user moves a window or creates a window on another screen, and your application draws into that window, Color QuickDraw automatically makes the video device for that screen the current device. Color QuickDraw stores that information in the global variable <CODE>TheGDevice</CODE>. <P>
 <CODE>GDevice</CODE> records that correspond to video devices have drivers associated with them. These drivers can be used to change the mode of the video device from black and white to color and to change the pixel depth. The set of routines supported by a video driver is defined and described in <I>Designing Cards and Drivers for the Macintosh Family</I>, third edition. Application-created <CODE>GDevice</CODE> records usually don't require drivers. <P>
 A <CODE>GDevice</CODE> record is defined as follows:<P>
<PRE>
TYPE GDevice = 
RECORD
   gdRefNum:      Integer;       {reference number of screen }
                                 { driver}
   gdID:          Integer;       {reserved; set to 0}
   gdType:        Integer;       {device type--indexed or direct}
   gdITable:      ITabHandle;    {handle to inverse table for }
                                 { Color Manager}
   gdResPref:     Integer;       {preferred resolution}
   gdSearchProc:  SProcHndl;     {handle to list of search }
                                 { functions}
   gdCompProc:    CProcHndl;     {handle to list of complement }
                                 { functions}
   gdFlags:       Integer;       {graphics device flags}
   gdPMap:        PixMapHandle;  {handle to PixMap record for }
                                 { displayed image}
   gdRefCon:      LongInt;       {reference value}
   gdNextGD:      GDHandle;      {handle to next graphics device}
   gdRect:        Rect;          {graphics device's global bounds}
   gdMode:        LongInt;       {graphics device's current mode}
   gdCCBytes:     Integer;       {width of expanded cursor data}
   gdCCDepth:     Integer;       {depth of expanded cursor data}
   gdCCXData:     Handle;        {handle to cursor's expanded }
                                 { data}
   gdCCXMask:     Handle;        {handle to cursor's expanded }
                                 { mask}
   gdReserved:    LongInt;       {reserved for future use--must }
                                 { be 0}
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>gdRefNum</CODE>
<DD> The reference number of the driver for the screen associated with the video device. For most video devices, this information is set at system startup time. <A NAME=MARKER-2-54></A>
<DT><CODE>gdID</CODE>
<DD> Reserved. If you create your own <CODE>GDevice</CODE> record, set this field to 0. <A NAME=MARKER-2-59></A>
<DT><CODE>gdType</CODE>
<DD> The general type of graphics device. Values include
</DL>
<PRE>
               CONST
               clutType = 0;     {CLUT device--that is, one with }
                                 { colors mapped with a color }
                                 { lookup table}
               fixedType = 1;    {fixed colors--that is, the }
                                 { color lookup table can't }
                                 { be changed}
               directType = 2;   {direct RGB colors}
</PRE>
<DL>
<DT>
<DD> These types are described in more detail in the chapter "Color Manager" in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>.
<DT><CODE>gdITable</CODE>
<DD> A handle to the inverse table for color mapping; the inverse table is described in the chapter "Color Manager" in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>.<A NAME=MARKER-2-62></A>
<DT><CODE>gdResPref</CODE>
<DD> The preferred resolution for inverse tables. <A NAME=MARKER-2-63></A>
<DT><CODE>gdSearchProc</CODE>
<DD> A handle to the list of search functions, as described in the chapter "Color Manager" in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>; its value is <CODE>NIL</CODE> for the default function. <A NAME=MARKER-2-65></A>
<DT><CODE>gdCompProc</CODE>
<DD> A handle to a list of complement functions, as described in the chapter "Color Manager" in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>; its value is <CODE>NIL</CODE> for the default function. <A NAME=MARKER-2-64></A>
<DT><CODE>gdFlags</CODE>
<DD> The <CODE>GDevice</CODE> record's attributes. To set the attribute bits in the <CODE>gdFlags</CODE> field, use the <CODE>SetDeviceAttribute</CODE> procedure (described on <A HREF=QuickDraw-281.html#MARKER-9-80>page 5-21</A>)--do not set these flags directly in the <CODE>GDevice</CODE> record. The constants representing each bit are listed here.<A NAME=MARKER-2-68></A>
</DL>
<PRE>
CONST {flag bits for gdFlags field of GDevice record}
gdDevType      = 0;  {if bit is set to 0, graphics device is }
                     { black and white; if set to 1, }
                     { graphics device supports color}
burstDevice    = 7;  {if bit is set to 1, graphics device }
                     { supports block transfer}
ext32Device    = 8;  {if bit is set to 1, graphics device }
                     { must be used in 32-bit mode}
ramInit        = 10; {if bit is set to 1, graphics device has }
                     { been initialized from RAM}
mainScreen     = 11; {if bit is set to 1, graphics device is }
                     { the main screen}
allInit        = 12; {if bit is set to 1, all graphics devices }
                     { were initialized from 'scrn' resource}
screenDevice   = 13; {if bit is set to 1, graphics device is }
                     { a screen}
noDriver       = 14; {if bit is set to 1, GDevice }
                     { record has no driver}
screenActive   = 15; {if bit is set to 1, graphics device is }
                     { active}
</PRE>
<DL>
<DT><CODE>gdPMap</CODE>
<DD> A handle to a <CODE>PixMap</CODE> record giving the dimension of the image buffer, along with the characteristics of the graphics device (resolution, storage format, color depth, and color table). <CODE>PixMap</CODE> records are described in the chapter "Color QuickDraw" in this book. For <CODE>GDevice</CODE> records, the high bit of the global variable<BR><CODE>TheGDevice^^.gdPMap^^.pmTable^^.ctFlags<BR></CODE>is always set.<A NAME=MARKER-2-85></A>
<DT><CODE>gdRefCon</CODE>
<DD> A value used by system software to pass device-related parameters. Since a graphics device is shared, you shouldn't store data here.<A NAME=MARKER-2-77></A>
<DT><CODE>gdNextGD</CODE>
<DD> A handle to the next graphics device in the device list. If this is the last graphics device in the device list, the field contains 0. <A NAME=MARKER-2-92></A>
<DT><CODE>gdRect</CODE>
<DD> The boundary rectangle of the graphics device represented by the <CODE>GDevice</CODE> record. The main screen has the upper-left corner of the rectangle set to (0,0). All other graphics devices are relative to this point.<A NAME=MARKER-2-78></A>
<DT><CODE>gdMode</CODE>
<DD> The current setting for the graphics device mode. This value is passed to the video driver to set its pixel depth and to specify color or black and white; applications don't need this information. See <I>Designing Cards and Drivers for the Macintosh Family</I>, third edition, for more information about the modes specified in this field.<A NAME=MARKER-2-83></A>
<DT><CODE>gdCCBytes</CODE>
<DD> The <CODE>rowBytes</CODE> value of the expanded cursor. Your application should not change this field. Cursors are described in the chapter "Cursor Utilities."<A NAME=MARKER-2-80></A>
<DT><CODE>gdCCDepth</CODE>
<DD> The depth of the expanded cursor. Your application should not change this field.<A NAME=MARKER-2-82></A>
<DT><CODE>gdCCXData</CODE>
<DD> A handle to the cursor's expanded data. Your application should not change this field.<A NAME=MARKER-2-86></A>
<DT><CODE>gdCCXMask</CODE>
<DD> A handle to the cursor's expanded mask. Your application should not change this field.<A NAME=MARKER-2-93></A>
<DT><CODE>gdReserved</CODE>
<DD> Reserved for future expansion; it must be set to 0 for future compatibility.<A NAME=MARKER-2-87></A> <A NAME=MARKER-2-162></A><A NAME=MARKER-2-61></A>
</DL>
 Your application should never need to directly change the fields of a <CODE>GDevice</CODE> record. If you find it absolutely necessary for your application to so, immediately use the <CODE>GDeviceChanged</CODE> procedure to notify Color QuickDraw that your application has changed the <CODE>GDevice</CODE> record. The <CODE>GDeviceChanged</CODE> procedure is described in the chapter "Color QuickDraw" in this book.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-274.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-276.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Component Manager for QuickTime</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Component Manager for QuickTime"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000858-CH1g" title="Component Manager for QuickTime"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../1CompMgr4QTIntroduction/Introduction.html#//apple_ref/doc/uid/TP40000858-CH202-DontLinkElementID_2">Component Manager for QuickTime</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../1CompMgr4QTIntroduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../3CompMgr4QTRevHistory/revisionhistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000858-CH1g-ComponentManagerforQuickTime" title="Component Manager for QuickTime"></a>
<h1>Component Manager for QuickTime</h1>

<p>The Component Manager is used to open, communicate with, and close QuickTime components such as image compressors and movie exporters. QuickTime typically opens, configures, and closes components automatically as needed. The Component Manager provides direct access to components for situations where QuickTime's default behavior is not sufficient.</p>
<p>Another way to find a component of a particular type or inspect the capabilities of components, without actually opening components and interrogating them, is to use the component properties API or the component public resources.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentManagerOverview">Component Manager Overview</a>
				
			<br/>
			
        
			
			
				<a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-UsingtheComponentManager">Using the Component Manager</a>
				
			<br/>
			
        
			
			
				<a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentManagerFunctionsandDataStructuresforApplications">Component Manager Functions and Data Structures for Applications</a>
				
			<br/>
			
        
			
			
				<a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentPropertyFunctionsandSelectors">Component Property Functions and Selectors</a>
				
			<br/>
			
        
			
			
				<a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentResources">Component Resources</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-ComponentManagerOverview" title="Component Manager Overview"></a>
<h2>Component Manager Overview</h2>
<p>The Component Manager creates an interface between components and clients. Clients can be applications, other components, system extensions, and so on. The Component Manager provides a standard interface your application can use to communicate with all components of a given type.  Those components, in turn, provide the appropriate services to your client application.</p>
<p>All components of a given type share a common application interface and basic services. For example, all <code>'imdc'</code> components provide image decompression services using a common interface.</p>
<p>Individual components may also support additions to the defined application interface, but they must support the defined interface functions. Algorithm-dependent or implementation-dependent variations are implemented by components as extensions to the basic interface. For example, a decompressor component may support a unique compression technique or take advantage of special hardware, but all decompressor components support the <code><a href="../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCompressedImageSize" target="_top">GetCompressedImageSize</a></code> function.</p>
<p>The Component Manager defines three kinds of component functions: functions called by client applications, functions component authors need to implement to allow system access, and support functions provided by the system to simplify the process of creating components. This document focuses on functions used by client applications.</p>
<p>The Component Manager allows applications to find components of a particular kind, such as image compressors, and to choose within available components of a kind, such as a JPEG or Cinepak image compressor.</p>
<p>Components are identified primarily by <strong>type</strong> and <strong>subtype.</strong> Both type and subtype are four-character codes: 32-bit values that are usually best interpreted as a sequence of four ASCII characters.</p>
<p>For example, an image decompressor for JPEG images has type <code>'imdc'</code> and subtype <code>'jpeg'.</code> A component&#8217;s capabilities and characteristics can be further identified using the manufacturer&#8217;s code (also a four-character code, such as <code>'aapl'),</code> or by getting the component&#8217;s properties, or by interrogating the component directly.</p>
<p>Using the Component Manager, you can find out how many components of a specific type are available and get further details about a component&#8217;s capabilities, without having to open the components. The Component Manager keeps track of many component characteristics, such as a component&#8217;s name, icon, and information string.</p>
<p>The Component Manager allows a single component to serve multiple client applications at the same time. Each client application has a unique access path to the component. These access paths are called <strong>component</strong> <strong>connections.</strong> You identify a component connection by specifying a <strong>component</strong> <strong>instance.</strong>  The Component Manager provides this component instance to your application when you open a connection to a component. The component maintains separate status information for each open connection.</p>
<p>For example, multiple applications might each open a connection to an image decompression component. The Component Manager routes each application request to the component instance for that connection. Because a component can maintain separate storage for each connection, application requests do not interfere with each other and each application has full access to the services provided by the component.</p>
<p>A function that finds a component typically returns a component identifier, referred to simply as a component. A function that opens a connection to a component returns a connection identifier, also known as a component instance.</p>
<p>Most QuickTime functions that take a component instance as a parameter can accept a component, as a convenience to the programmer, because the instance can typically be inferred.</p>
<p>This situation becomes ambiguous in threaded programming models, however. If you are calling QuickTime from more than one thread, be careful to always distinguish the component from the component instance.</p>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-UsingtheComponentManager" title="Using the Component Manager"></a>
<h2>Using the Component Manager</h2>
<p>This section describes how you can use the Component Manager to:</p>
<ul class="ul">
<li class="li"><p>Gain access to components</p></li>
<li class="li"><p>Locate components and take advantage of their services</p></li>
<li class="li"><p>Get information about a component</p></li>
<li class="li"><p>Close a connection to a component</p></li>
</ul>
<a name="//apple_ref/doc/uid/TP40000858-CH1g-OpeningaConnectiontoaDefaultComponent" title="Opening a Connection to a Default Component"></a>
<h3>Opening a Connection to a Default Component</h3>
<p>You can allow the Component Manager to locate a suitable component for you. If you are interested in using a component of a particular type and subtype, and you do not need to specify any other characteristics of the component, use the <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenADefaultComponent" target="_top">OpenADefaultComponent</a></code> function. This technique is the easiest way to open a component connection.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000858-CH1g-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;This function replaces <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenDefaultComponent" target="_top">OpenDefaultComponent</a></code>. The older function returns the component instance. The new function passes the component instance as a parameter and returns an <code>OSErr</code> value. </p></div>
<p>The <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenADefaultComponent" target="_top">OpenADefaultComponent</a></code> function searches for available components and attempts to open a connection to a component with the specified type and subtype. If more than one component of the specified type and subtype is available, <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenADefaultComponent" target="_top">OpenADefaultComponent</a></code> selects the first one in the list. If successful, it passes back a component instance that identifies your connection to the component.</p>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-FindingandOpeningaSpecificComponent" title="Finding and Opening a Specific Component"></a>
<h3>Finding and Opening a Specific Component</h3>
<p>To open a connection to a component based on information more specific than the component type and subtype, you can set up a component description structure ( <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/tdef/ComponentDescription" target="_top">ComponentDescription</a></code>) and call <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/FindNextComponent" target="_top">FindNextComponent</a></code>, passing in <code>0</code> as the component identifier. <code>FindNextComponent</code> returns the first component it finds that matches the component description structure. Open the component using OpenAComponent.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000858-CH1g-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;The newer function <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenAComponent" target="_top">OpenAComponent</a></code> replaces the older <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenComponent" target="_top">OpenComponent</a></code>. The newer function passes the component instance back to the caller as a parameter and returns an <code>OSErr</code> value. </p></div>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-GettingInformationAboutComponents" title="Getting Information About Components"></a>
<h3>Getting Information About Components</h3>
<p>If you need to choose among several components that match the component description structure, you can use <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentInfo" target="_top">GetComponentInfo</a></code> to retrieve more information on each component. Follow these steps:</p>
<ol class="ol">
<li class="li"><p>Set up a component description structure that describes the component.</p></li>
<li class="li"><p>Use the <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CountComponents" target="_top">CountComponents</a></code> function to determine how many components, if any, match your description.</p></li>
<li class="li"><p>Use the <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/FindNextComponent" target="_top">FindNextComponent</a></code> function to iterate through the list, passing in <code>0</code> for the first component and the component ID of the previous component for each subsequent component, as shown in Listing&#160;1.</p></li>
<li class="li"><p>Call <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentInfo" target="_top">GetComponentInfo</a></code> to obtain further details on each component.</p></li>
<li class="li"><p>Open the component you want using the OpenAComponent function.</p></li>
</ol>
<a name="//apple_ref/doc/uid/TP40000858-CH1g-DontLinkElementID_5" title="Listing 1-1Iterating through a list of components"></a>
<p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Iterating through a list of components</p>
<div class="codesample"><table><tr><td scope="row"><pre>/*<span></span></pre></td></tr><tr><td scope="row"><pre>   An application-defined function, myImportFinder, fills out a<span></span></pre></td></tr><tr><td scope="row"><pre>   component description record to specify the search criteria for the<span></span></pre></td></tr><tr><td scope="row"><pre>   desired component, then calls FindNextComponent to find a component<span></span></pre></td></tr><tr><td scope="row"><pre>   with the specified characteristics--in this example, a movie<span></span></pre></td></tr><tr><td scope="row"><pre>   importer component (any component with the type MovieImportType)<span></span></pre></td></tr><tr><td scope="row"><pre>   that can open a particular file type  (subtype = someFileType).<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>   Begin by setting componentID to 0 and calling this function,<span></span></pre></td></tr><tr><td scope="row"><pre>   passing in the desired file type to import. The function returns 0<span></span></pre></td></tr><tr><td scope="row"><pre>   if a component is found, and componentID is set to the<span></span></pre></td></tr><tr><td scope="row"><pre>   component ID. Call this function again without modifying<span></span></pre></td></tr><tr><td scope="row"><pre>   omponentID to search for another matching component. The function<span></span></pre></td></tr><tr><td scope="row"><pre>   returns 0 if another matching component is found. Repeat until you<span></span></pre></td></tr><tr><td scope="row"><pre>   find the particular component that you want or until the function<span></span></pre></td></tr><tr><td scope="row"><pre>   return is nonzero (no more matching components).<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>*/<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>long componentID<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>pascal Boolean myImportFinder(OSType someFileType)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;ComponentDescription cd;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;Boolean result = true;      // true means no matching importer<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;cd.componentType = MovieImportType;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;cd.componentSubType = someFileType;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;cd.componentManufacturer = 0; //any manufacturer<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;cd.componentFlags = canMovieImportFiles;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;cd.componentFlagsMask = canMovieImportFiles;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;componentID = (FindNextComponent(componentID, &amp;cd))  // search for component to do the work<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;if componentID<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;result = false;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;return result;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

<p>Alternatively, you can use the component property functions to get the properties of components, though not all components support this. For more information, see <span class="content_text"><a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentPropertyFunctionsandSelectors">“Component Property Functions and Selectors.”</a></span></p>
<p>Some components also provide information about themselves in public resources. For details, see <span class="content_text"><a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentResources">“Component Resources.”</a></span></p>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-CallingComponentFunctions" title="Calling Component Functions"></a>
<h3>Calling Component Functions</h3>
<p>The specific component functions available to applications vary considerably with the component type. See the documentation for a given type of component to see what functions it provides that are unique.</p>
<p>The Component Manager defines a number of functions that all components should support, however, regardless of component type. For example, all components should support <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentInfo" target="_top">GetComponentInfo</a></code> and <code><a href="../../../../Carbon/Reference/Component_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/GetComponentVersion" target="_top">GetComponentVersion</a></code>. In addition, you can ask any component if it supports a given function by calling ComponentFunctionImplemented <code><a href="../../../../Carbon/Reference/Component_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/ComponentFunctionImplemented" target="_top"></a></code>.</p>
<p>For more information, see <span class="content_text"><a href="CompMgr4QT.html#//apple_ref/doc/uid/TP40000858-CH1g-ComponentManagerFunctionsandDataStructuresforApplications">“Component Manager Functions and Data Structures for Applications.”</a></span></p>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-ClosingComponentConnections" title="Closing Component Connections"></a>
<h3>Closing Component Connections</h3>
<p>When your application is done with a component, close the connection by calling <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CloseComponent" target="_top">CloseComponent</a></code>. When all component instances are closed, the component is released.</p>


<a name="//apple_ref/doc/uid/TP40000858-CH1g-ComponentManagerFunctionsandDataStructuresforApplications" title="Component Manager Functions and Data Structures for Applications"></a>
<h2>Component Manager Functions and Data Structures for Applications</h2>
<p>These are the Component Manager functions and data types commonly used by applications to work with components.</p>
<p>Additional functions that may be available to applications vary with the component type. See the documentation for a specific component to see what it does.</p>
<p>The functions listed here should be supported by all components, regardless of type. In addition, you can ask any component if it supports a given function by calling <code><a href="../../../../Carbon/Reference/Component_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/ComponentFunctionImplemented" target="_top">ComponentFunctionImplemented</a></code>.</p>
<p>For a complete list of Component Manager functions and data types, see <em><a href="../../../../Carbon/Reference/Component_Manager/index.html#//apple_ref/doc/uid/TP30000201" target="_top">Component Manager Reference</a></em>.</p>
<p>Finding components:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/FindNextComponent" target="_top">FindNextComponent</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CountComponents" target="_top">CountComponents</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentListModSeed" target="_top">GetComponentListModSeed</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentTypeModSeed" target="_top">GetComponentTypeModSeed</a></code></p></li>
</ul>
<p>Opening and closing components:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenADefaultComponent" target="_top">OpenADefaultComponent</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenAComponent" target="_top">OpenAComponent</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CloseComponent" target="_top">CloseComponent</a></code></p></li>
</ul>
<p>Getting information about components:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentInfo" target="_top">GetComponentInfo</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentIconSuite" target="_top">GetComponentIconSuite</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/GetComponentVersion" target="_top">GetComponentVersion</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/ComponentFunctionImplemented" target="_top">ComponentFunctionImplemented</a></code></p></li>
</ul>
<p>Retrieving component errors:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentInstanceError" target="_top">GetComponentInstanceError</a></code></p></li>
</ul>
<p>Data types used by applications:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/tdef/ComponentDescription" target="_top">ComponentDescription</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/tdef/ComponentInstanceRecord" target="_top">ComponentInstanceRecord</a></code></p></li>
<li class="li"><p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/tdef/ComponentRecord" target="_top">ComponentRecord</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-ComponentPropertyFunctionsandSelectors" title="Component Property Functions and Selectors"></a>
<h2>Component Property Functions and Selectors</h2>
<p>Component property functions, which are available in QuickTime 6.4 and later, provide another way to get information about components. They can also be used to configure components without a user dialog, to configure a component programmatically, and to set up callbacks that are called when something changes in a component.</p>
<p>The configuration interface to many components, such as those used for capture, export, and compression, involves a standard user dialog. QuickTime-based applications sometimes need to configure these operations from custom user interfaces or to configure them programmatically, with no user interaction at all.</p>
<p>The following functions are available to work with component properties:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTGetComponentPropertyInfo" target="_top">QTGetComponentPropertyInfo</a></code> gets information about a specified property of a component, such as the size and data format.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTGetComponentProperty" target="_top">QTGetComponentProperty</a></code> gets the value of a specific component property.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTSetComponentProperty" target="_top">QTSetComponentProperty</a></code> sets the value of a specific component property programmatically.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTAddComponentPropertyListener" target="_top">QTAddComponentPropertyListener</a></code> installs a callback to monitor a component property. Your callback function is called when the property value changes.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTRemoveComponentPropertyListener" target="_top">QTRemoveComponentPropertyListener</a></code> removes a component property monitoring callback.</p></li>
<li class="li"><p><code><a href="../../../../Darwin/Reference/IOKit/IOKitLib_h/index.html#//apple_ref/c/func/" target="_top">QTComponentPropertyListenerCollectionCreate</a></code> creates a collection of component property monitors, allowing you to manage groups of callback functions.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTComponentPropertyListenerCollectionCreate" target="_top">QTComponentPropertyListenerCollectionAddListener</a></code> adds a listener callback for a specified property class and ID to a property listener collection.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTComponentPropertyListenerCollectionRemoveListener" target="_top">QTComponentPropertyListenerCollectionRemoveListener</a></code> removes a listener callback with a specified property class and ID from a property listener collection.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTComponentPropertyListenerCollectionNotifyListeners" target="_top">QTComponentPropertyListenerCollectionNotifyListeners</a></code> calls all listener callbacks in a component property listener collection registered for a specified property class and ID.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTComponentPropertyListenerCollectionHasListenersForProperty" target="_top">QTComponentPropertyListenerCollectionHasListenersForProperty</a></code> determines if there are any listeners in a component property listener collection registered for a specified property class and ID.</p></li>
<li class="li"><p><code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/c/func/QTComponentPropertyListenerCollectionIsEmpty" target="_top">QTComponentPropertyListenerCollectionIsEmpty</a></code> determines if a listener collection is empty.</p></li>
</ul>
<p>Beginning with Quicktime 6.4, the Component Manager defines optional standard selectors for component properties. These selectors can be implemented by all components, regardless of type, that are written to work with the component properties mechanism. Components can adopt these functions on their own schedule. The Component Manager allows callers to discover safely whether components implement the property selectors and perform operations according to older mechanisms if support for the properties mechanism is unavailable.</p>
<p>As developers adopt the component property functions, it will be possible to configure most or all exporters, for example, by means of the same set of properties. Use of the component property functions allows support for richer scripting and simpler custom user interfaces.</p>

<a name="//apple_ref/doc/uid/TP40000858-CH1g-ComponentResources" title="Component Resources"></a>
<h2>Component Resources</h2>
<p>Component resources provide an alternate method of gathering detailed information about components, without opening them and interrogating them. This can be a great time saver when you need to get specific information about a lot of components.</p>
<p>Macintosh programmers should be familiar with the idea of resources, commonly a collection of static data bundled with an application, such as the text strings used in menus and the icon that represents the file. This bundling provides a convenient way to separate data that may be localized to a language, for example, from program code that can be modified only with extreme care.</p>
<p>Resources can be stored inside the file they belong to or in a parallel file, typically a file in the same directory and having the same name, but with a different filename extension. QuickTime provides support for both kinds of resource storage on Windows operating systems. In Mac&#160;OS&#160;X, resource files are not normally visible; they are bundled inside a folder represented by the parent file&#8217;s icon.</p>
<p>QuickTime components can contain resources, which are simply pieces of data.  Component resources are typically used as a way for components to store data that is accessed directly only by the component itself. QuickTime 4 and later also supports public resources, which can be accessed by the system and by application programs. Of course, a component can access its own public resources as well.</p>
<p>A component&#8217;s resources are identified by an <code>OSType</code> value and an ID. A private resource&#8217;s <code>OSType</code> value and ID are the same as the Mac OS resource type and ID that the resource is identified with in the component&#8217;s resource file.</p>
<p>A component&#8217;s public resources are also identified by an <code>OSType</code> value and an ID, but they do not have to be the same as the Mac OS resource type and ID that the resource is stored in.</p>
<p>A component that provides public component resources must provide a component resource map, which indicates the mapping between the public resource <code>OSType</code> and ID and the private <code>OSType</code> and ID. Listing 2 shows an example of a component resource map.</p>
<a name="//apple_ref/doc/uid/TP40000858-CH1g-DontLinkElementID_6" title="Listing 1-2Example of a component resource map"></a>
<p class="codesample"><strong>Listing 1-2&nbsp;&nbsp;</strong>Example of a component resource map</p>
<div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>resource 'thnr' (512) {<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;{<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;'PICT', 1, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;'pict', 128, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;'PICT', 2, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;'pict', 129, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

<p>This component resource map makes available two public resources, <code>'PICT'</code> <code>1</code> and <code>'PICT'</code> <code>2.</code> The map shows that these two public resources are stored in the component as Mac&#160;OS resources <code>'pict'</code> <code>128</code> and 'pict' <code>129.</code></p>
<p>An application can obtain a public resource from a component by using the <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResource" target="_top">GetComponentPublicResource</a></code> function, as shown in the following code snippet:</p>

<div class="codesample"><table><tr><td scope="row"><pre>err = GetComponentPublicResource (<span></span></pre></td></tr><tr><td scope="row"><pre>   (Component)store-&gt;self, 'PICT' , 1, &amp;resource);<span></span></pre></td></tr></table></div>

<p>For each call to <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResource" target="_top">GetComponentPublicResource</a></code>, the Component Manager may have to open the component&#8217;s resource file and load a resource. Resource caching makes this fast for repeated calls to the same resource, but if many components are to be accessed in turn, the first pass may be quite slow.</p>
<p>Often, however, multiple components of the same type are stored in a single file. QuickTime itself contains nearly a dozen movie exporters, for example. Storing components of the same type in one file makes significant optimization possible; to support this, QuickTime provides the function <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResourceList" target="_top">GetComponentPublicResourceList</a></code>.</p>
<p><code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResourceList" target="_top">GetComponentPublicResourceList</a></code> is a single optimized call to obtain a specified public resource from each component that matches a component description. Listing 3 is an example that shows how to get all the <code>'PICT'</code> <code>1</code> public resources from all installed movie exporters. The resources are passed back as an atom container, with each resource in its own atom.</p>
<a name="//apple_ref/doc/uid/TP40000858-CH1g-DontLinkElementID_7" title="Listing 1-3Getting a resource from all components of a type"></a>
<p class="codesample"><strong>Listing 1-3&nbsp;&nbsp;</strong>Getting a resource from all components of a type</p>
<div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>QTAtomContainer resources;<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentDescription cd;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>cd.componentType = MovieExportType;<span></span></pre></td></tr><tr><td scope="row"><pre>cd.componentSubType = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>cd.componentManufacturer = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>cd.componentFlags = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>cd.componentFlagsMask = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>err = GetComponentPublicResourceList ('PICT', 1, 0, &amp;cd, nil, nil, &amp;resources)<span></span></pre></td></tr></table></div>

<p>Once the call to <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResourceList" target="_top">GetComponentPublicResourceList</a></code> has completed, the QT atom container returned contains all the <code>'PICT'</code> <code>1</code> public resources for all movie exporters installed. Listing 4 shows how to access these resources.</p>
<a name="//apple_ref/doc/uid/TP40000858-CH1g-DontLinkElementID_8" title="Listing 1-4Accessing resources from a component resource list"></a>
<p class="codesample"><strong>Listing 1-4&nbsp;&nbsp;</strong>Accessing resources from a component resource list</p>
<div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>long i, count;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>count = QTCountChildrenOfType(resources,<span></span></pre></td></tr><tr><td scope="row"><pre>kParentAtomIsContainer, OSTypeConst('comp'));<span></span></pre></td></tr><tr><td scope="row"><pre>for (i=1; i&lt;=count; i++) {<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;QTAtom compAtom, resourceAtom;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Component c;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;compAtom = QTFindChildByIndex(<span></span></pre></td></tr><tr><td scope="row"><pre>   					resources, kParentAtomIsContainer,<span></span></pre></td></tr><tr><td scope="row"><pre>   					OSTypeConst('comp'), i, (long *)&amp;c);<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;resourceAtom = QTFindChildByID(<span></span></pre></td></tr><tr><td scope="row"><pre>   						resources, compAtom, 'PICT', 1, nil);<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if (resourceAtom) {<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Handle resource = NewHandle(0);<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;QTCopyAtomDataToHandle(<span></span></pre></td></tr><tr><td scope="row"><pre>   					resources, resourceAtom, resource);<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;// do something with the resource for Component c<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DisposeHandle(resource);<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>&#xA0;&#xA0;&#xA0;<span></span></pre></td></tr><tr><td scope="row"><pre>QTDisposeAtomContainer(resources);<span></span></pre></td></tr></table></div>

<p>Notice that the resource atom&#8217;s ID is returned as the component atom&#8217;s <code>compAtom</code> reference.</p>
<p>Although using <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResourceList" target="_top">GetComponentPublicResourceList</a></code> can take more code, it is often substantially faster than repeated calls to <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResource" target="_top">GetComponentPublicResource</a></code>.  You can use either approach, but using <code><a href="../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentPublicResourceList" target="_top">GetComponentPublicResourceList</a></code> is recommended as its performance is likely to remain high, especially as more components are added to QuickTime.</p>





        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../1CompMgr4QTIntroduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../3CompMgr4QTRevHistory/revisionhistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-04-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/Conceptual/ComponentMgr/2CompMgr4QT/CompMgr4QT.html%3Fid%3DTP40000858-3.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/Conceptual/ComponentMgr/2CompMgr4QT/CompMgr4QT.html%3Fid%3DTP40000858-3.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/Conceptual/ComponentMgr/2CompMgr4QT/CompMgr4QT.html%3Fid%3DTP40000858-3.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
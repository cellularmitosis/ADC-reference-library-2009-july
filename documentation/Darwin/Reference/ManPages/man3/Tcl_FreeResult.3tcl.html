<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_FreeResult(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_FreeResult" title="Mac OS X Developer Tools
 Manual Page for Tcl_FreeResult(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_FreeResult" title="Mac OS X Developer Tools
 Manual Page for Tcl_FreeResult(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_FreeResult"; name=Tcl_FreeResult(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_SetResult(3)                           Tcl Library Procedures                           <a href="Tcl_SetResult.3tcl.html#//apple_ref/doc/man/3/Tcl_SetResult">Tcl_SetResult(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_SetObjResult,  Tcl_GetObjResult, Tcl_SetResult, Tcl_GetStringResult, Tcl_AppendResult, Tcl_Appen-<font color="#ffffff" class="whiteout">dResultVA,&nbsp;Tcl_AppendResultVA,</font>
       dResultVA, Tcl_AppendElement, Tcl_ResetResult, Tcl_FreeResult - manipulate Tcl result

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       <b>Tcl_SetObjResult</b>(<u>interp,</u> <u>objPtr</u>)

       Tcl_Obj *
       <b>Tcl_GetObjResult</b>(<u>interp</u>)

       <b>Tcl_SetResult</b>(<u>interp,</u> <u>string,</u> <u>freeProc</u>)

       CONST char *
       <b>Tcl_GetStringResult</b>(<u>interp</u>)

       <b>Tcl_AppendResult</b>(<u>interp,</u> <u>string,</u> <u>string,</u> <u>...</u> <u>,</u> <b>(char</b> <b>*)</b> <b>NULL</b>)

       <b>Tcl_AppendResultVA</b>(<u>interp,</u> <u>argList</u>)

       <b>Tcl_AppendElement</b>(<u>interp,</u> <u>string</u>)

       <b>Tcl_ResetResult</b>(<u>interp</u>)

       <b>Tcl_FreeResult</b>(<u>interp</u>)

<b>ARGUMENTS</b>
       Tcl_Interp     <u>*interp</u>    (out)     Interpreter whose result is to be modified or read.

       Tcl_Obj        <u>*objPtr</u>    (in)      Object value to become result for <u>interp</u>.

       char           <u>*string</u>    (in)      String value to become result for <u>interp</u> or to be appended to the
                                           existing result.

       Tcl_FreeProc   <u>*freeProc</u>  (in)      Address  of  procedure  to  call to release storage at <u>string</u>, or
                                           <b>TCL_STATIC</b>, <b>TCL_DYNAMIC</b>, or <b>TCL_VOLATILE</b>.

       va_list        <u>argList</u>    (in)      An  argument  list  which  must  have  been   initialised   using
                                           <b>TCL_VARARGS_START</b>, and cleared using <b>va_end</b>.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       The  procedures  described here are utilities for manipulating the result value in a Tcl interpreter.
       The interpreter result may be either a Tcl object or a string.   For  example,  <b>Tcl_SetObjResult</b>  and
       <b>Tcl_SetResult</b>  set  the  interpreter  result  to,  respectively,  an object and a string.  Similarly,
       <b>Tcl_GetObjResult</b> and <b>Tcl_GetStringResult</b> return the interpreter result as an object and as a  string.
       The  procedures  always  keep  the string and object forms of the interpreter result consistent.  For
       example, if <b>Tcl_SetObjResult</b> is called to set the result to an object,  then  <b>Tcl_GetStringResult</b>  is
       called, it will return the object's string value.

       <b>Tcl_SetObjResult</b> arranges for <u>objPtr</u> to be the result for <u>interp</u>, replacing any existing result.  The
       result is left pointing to the object referenced by <u>objPtr</u>.  <u>objPtr</u>'s reference count is  incremented
       since  there is now a new reference to it from <u>interp</u>.  The reference count for any old result object
       is decremented and the old result object is freed if no references to it remain.

       <b>Tcl_GetObjResult</b> returns the result for <u>interp</u> as an object.  The object's  reference  count  is  not
       incremented;  if  the  caller  needs  to  retain  a  long-term  pointer to the object they should use
       <b>Tcl_IncrRefCount</b> to increment its reference count in order to keep it from being freed too  early  or
       accidently changed.

       <b>Tcl_SetResult</b>  arranges  for <u>string</u> to be the result for the current Tcl command in <u>interp</u>, replacing
       any existing result.  The <u>freeProc</u> argument specifies how to manage the storage for the <u>string</u>  argu-<font color="#ffffff" class="whiteout">ment;&nbsp;argument;</font>
       ment;  it is discussed in the section <b>THE</b> <b>TCL_FREEPROC</b> <b>ARGUMENT</b> <b>TO</b> <b>TCL_SETRESULT</b> below.  If <u>string</u> is
       <b>NULL</b>, then <u>freeProc</u> is ignored and <b>Tcl_SetResult</b> re-initializes <u>interp</u>'s result to point to an  empty
       string.

       <b>Tcl_GetStringResult</b>  returns  the result for <u>interp</u> as an string.  If the result was set to an object
       by a <b>Tcl_SetObjResult</b> call, the object form will be converted to  a  string  and  returned.   If  the
       object's  string representation contains null bytes, this conversion will lose information.  For this
       reason, programmers are encouraged to write their code to use the new object API  procedures  and  to
       call <b>Tcl_GetObjResult</b> instead.

       <b>Tcl_ResetResult</b>  clears  the  result for <u>interp</u> and leaves the result in its normal empty initialized
       state.  If the result is an object, its reference count is decremented and the result is left  point-<font color="#ffffff" class="whiteout">ing&nbsp;pointing</font>
       ing  to  an  unshared  object representing an empty string.  If the result is a dynamically allocated
       string, its memory is free*d and the result is left as a empty string.  <b>Tcl_ResetResult</b>  also  clears
       the error state managed by <b>Tcl_AddErrorInfo</b>, <b>Tcl_AddObjErrorInfo</b>, and <b>Tcl_SetErrorCode</b>.


<b>OLD</b> <b>STRING</b> <b>PROCEDURES</b>
       Use of the following procedures is deprecated since they manipulate the Tcl result as a string.  Pro-<font color="#ffffff" class="whiteout">cedures&nbsp;Procedures</font>
       cedures such as <b>Tcl_SetObjResult</b> that manipulate the result as an object can  be  significantly  more
       efficient.

       <b>Tcl_AppendResult</b>  makes it easy to build up Tcl results in pieces.  It takes each of its <u>string</u> argu-<font color="#ffffff" class="whiteout">ments&nbsp;arguments</font>
       ments and appends them in order to the current result associated with <u>interp</u>.  If the  result  is  in
       its  initialized  empty  state (e.g. a command procedure was just invoked or <b>Tcl_ResetResult</b> was just
       called), then <b>Tcl_AppendResult</b> sets  the  result  to  the  concatenation  of  its  <u>string</u>  arguments.
       <b>Tcl_AppendResult</b>  may  be  called  repeatedly  as  additional  pieces  of  the  result  are produced.
       <b>Tcl_AppendResult</b> takes care of all the storage management issues associated  with  managing  <u>interp</u>'s
       result,  such  as  allocating a larger result area if necessary.  It also converts the current inter-<font color="#ffffff" class="whiteout">preter&nbsp;interpreter</font>
       preter result from an object to a string, if necessary, before appending the argument  strings.   Any
       number  of  <u>string</u>  arguments may be passed in a single call; the last argument in the list must be a
       NULL pointer.

       <b>Tcl_AppendResultVA</b> is the same as <b>Tcl_AppendResult</b> except that instead of taking a variable number of
       arguments it takes an argument list.

       <b>Tcl_AppendElement</b>  is similar to <b>Tcl_AppendResult</b> in that it allows results to be built up in pieces.
       However, <b>Tcl_AppendElement</b> takes only a single <u>string</u> argument and it appends that  argument  to  the
       current  result as a proper Tcl list element.  <b>Tcl_AppendElement</b> adds backslashes or braces if neces-<font color="#ffffff" class="whiteout">sary&nbsp;necessary</font>
       sary to ensure that <u>interp</u>'s result can be parsed as a list and that <u>string</u> will be  extracted  as  a
       single  element.   Under  normal conditions, <b>Tcl_AppendElement</b> will add a space character to <u>interp</u>'s
       result just before adding the new list element, so that the list elements in the result are  properly
       separated.  However if the new list element is the first in a list or sub-list (i.e. <u>interp</u>'s current
       result is empty, or consists of the single character ``{'', or ends in the characters `` {'') then no
       space is added.

       <b>Tcl_FreeResult</b>  performs part of the work of <b>Tcl_ResetResult</b>.  It frees up the memory associated with
       <u>interp</u>'s result.  It also sets <u>interp-&gt;freeProc</u> to zero, but doesn't change <u>interp-&gt;result</u>  or  clear
       error  state.   <b>Tcl_FreeResult</b>  is most commonly used when a procedure is about to replace one result
       value with another.


<b>DIRECT</b> <b>ACCESS</b> <b>TO</b> <b>INTERP-&gt;RESULT</b> <b>IS</b> <b>DEPRECATED</b>
       It used to be legal for programs to directly read and write <u>interp-&gt;result</u> to manipulate  the  inter-<font color="#ffffff" class="whiteout">preter&nbsp;interpreter</font>
       preter  result.   Direct  access to <u>interp-&gt;result</u> is now strongly deprecated because it can make the
       result's string and object forms inconsistent.  Programs should always read the result using the pro-<font color="#ffffff" class="whiteout">cedures&nbsp;procedures</font>
       cedures  <b>Tcl_GetObjResult</b>  or  <b>Tcl_GetStringResult</b>,  and  write  the result using <b>Tcl_SetObjResult</b> or
       <b>Tcl_SetResult</b>.


<b>THE</b> <b>TCL_FREEPROC</b> <b>ARGUMENT</b> <b>TO</b> <b>TCL_SETRESULT</b>
       <b>Tcl_SetResult</b>'s <u>freeProc</u> argument specifies how the Tcl system is  to  manage  the  storage  for  the
       <u>string</u>  argument.   If  <b>Tcl_SetResult</b>  or  <b>Tcl_SetObjResult</b>  are called at a time when <u>interp</u> holds a
       string result, they do whatever is necessary to dispose of the old string result (see the  <b>Tcl_Interp</b>
       manual entry for details on this).

       If <u>freeProc</u> is <b>TCL_STATIC</b> it means that <u>string</u> refers to an area of static storage that is guaranteed
       not to be modified until at least the next call to <b>Tcl_Eval</b>.  If <u>freeProc</u>  is  <b>TCL_DYNAMIC</b>  it  means
       that  <u>string</u>  was  allocated  with  a  call  to  <b>Tcl_Alloc</b> and is now the property of the Tcl system.
       <b>Tcl_SetResult</b> will arrange for the string's storage to be released by calling <b>Tcl_Free</b> when it is  no
       longer  needed.  If <u>freeProc</u> is <b>TCL_VOLATILE</b> it means that <u>string</u> points to an area of memory that is
       likely to be overwritten when <b>Tcl_SetResult</b> returns (e.g. it points to something in a  stack  frame).
       In  this  case  <b>Tcl_SetResult</b>  will  make  a  copy of the string in dynamically allocated storage and
       arrange for the copy to be the result for the current Tcl command.

       If <u>freeProc</u> isn't one of the values <b>TCL_STATIC</b>, <b>TCL_DYNAMIC</b>, and <b>TCL_VOLATILE</b>, then it is the address
       of a procedure that Tcl should call to free the string.  This allows applications to use non-standard
       storage allocators.  When Tcl no longer needs the storage for the  string,  it  will  call  <u>freeProc</u>.
       <u>FreeProc</u> should have arguments and result that match the type <b>Tcl_FreeProc</b>:
              typedef void Tcl_FreeProc(char *<u>blockPtr</u>);
       When <u>freeProc</u> is called, its <u>blockPtr</u> will be set to the value of <u>string</u> passed to <b>Tcl_SetResult</b>.


<b>SEE</b> <b>ALSO</b>
       Tcl_AddErrorInfo, Tcl_CreateObjCommand, Tcl_SetErrorCode, Tcl_Interp


<b>KEYWORDS</b>
       append, command, element, list, object, result, return value, interpreter



Tcl                                                  8.0                                    <a href="Tcl_SetResult.3tcl.html#//apple_ref/doc/man/3/Tcl_SetResult">Tcl_SetResult(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_FreeResult.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_FreeResult.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_FreeResult.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head><title>Mac OS X Developer Tools
 Manual Page For lstat(2)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/2/lstat" title="Mac OS X Developer Tools
 Manual Page for lstat(2)"><!-- headerDoc=man; indexgroup=Section 2; uid="//apple_ref/doc/man/2/lstat"; name=lstat(2) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
STAT(2)                     BSD System Calls Manual                    <!-- a -->STAT(2)<!-- /a -->

<b>NAME</b>
     <b>fstat</b>, <b>fstat64</b>, <b>lstat</b>, <b>lstat64</b>, <b>stat</b>, <b>stat64</b> -- get file status

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/stat.h&gt;</b>

     <u>int</u>
     <b>fstat</b>(<u>int</u> <u>fildes</u>, <u>struct</u> <u>stat</u> <u>*buf</u>);

     <u>int</u>
     <b>fstat64</b>(<u>int</u> <u>fildes</u>, <u>struct</u> <u>stat64</u> <u>*buf</u>);

     <u>int</u>
     <b>lstat</b>(<u>const</u> <u>char</u> <u>*restrict</u> <u>path</u>, <u>struct</u> <u>stat</u> <u>*restrict</u> <u>buf</u>);

     <u>int</u>
     <b>lstat64</b>(<u>const</u> <u>char</u> <u>*restrict</u> <u>path</u>, <u>struct</u> <u>stat64</u> <u>*restrict</u> <u>buf</u>);

     <u>int</u>
     <b>stat</b>(<u>const</u> <u>char</u> <u>*restrict</u> <u>path</u>, <u>struct</u> <u>stat</u> <u>*restrict</u> <u>buf</u>);

     <u>int</u>
     <b>stat64</b>(<u>const</u> <u>char</u> <u>*restrict</u> <u>path</u>, <u>struct</u> <u>stat64</u> <u>*restrict</u> <u>buf</u>);

<b>DESCRIPTION</b>
     The <b>stat</b>() family of functions and their 64 bit variants obtain information about a file. The <b>stat</b>()
     function obtains information about the file pointed to by <u>path</u>.  Read, write or execute permission of
     the named file is not required, but all directories listed in the path name leading to the file must be
     searchable.

     <b>Lstat</b>() is like <b>stat</b>() except in the case where the named file is a symbolic link, in which case
     <b>lstat</b>() returns information about the link, while <b>stat</b>() returns information about the file the link
     references.  Unlike other filesystem objects, symbolic links do not have an owner, group, access mode,
     times, etc.  Instead, these attributes are taken from the directory that contains the link.  The only
     attributes returned from an <b>lstat</b>() that refer to the symbolic link itself are the file type (S_IFLNK),
     size, blocks, and link count (always 1).

     The <b>fstat</b>() obtains the same information about an open file known by the file descriptor <u>fildes</u>.

     The <u>buf</u> argument is a pointer to a <u>stat</u> or <u>stat64</u> structure as defined by &lt;<u>sys/stat.h&gt;</u> (both shown
     below) and into which information is placed concerning the file.

     struct stat {
         dev_t    st_dev;    /* device inode resides on */
         ino_t    st_ino;    /* inode's number */
         mode_t   st_mode;   /* inode protection mode */
         nlink_t  st_nlink;  /* number or hard links to the file */
         uid_t    st_uid;    /* user-id of owner */
         gid_t    st_gid;    /* group-id of owner */
         dev_t    st_rdev;   /* device type, for special file inode */
         struct timespec st_atimespec;  /* time of last access */
         struct timespec st_mtimespec;  /* time of last data modification */
         struct timespec st_ctimespec;  /* time of last file status change */
         off_t    st_size;   /* file size, in bytes */
         quad_t   st_blocks; /* blocks allocated for file */
         u_long   st_blksize;/* optimal file sys I/O ops blocksize */
         u_long   st_flags;  /* user defined flags for file */
         u_long   st_gen;    /* file generation number */
     };


     struct stat64 {
         dev_t           st_dev;           /* ID of device containing file */
         mode_t          st_mode;          /* Mode of file (see below) */
         nlink_t         st_nlink;         /* Number of hard links */
         ino64_t         st_ino;          /* File serial number */
         uid_t           st_uid;           /* User ID of the file */
         gid_t           st_gid;           /* Group ID of the file */
         dev_t           st_rdev;          /* Device ID */
         struct timespec st_atimespec;     /* time of last access */
         struct timespec st_mtimespec;     /* time of last data modification */
         struct timespec st_ctimespec;     /* time of last status change */
         struct timespec st_birthtimespec; /* time of file creation(birth) */
         off_t           st_size;          /* file size, in bytes */
         blkcnt_t        st_blocks;        /* blocks allocated for file */
         blksize_t       st_blksize;       /* optimal blocksize for I/O */
         uint32_t        st_flags;         /* user defined flags for file */
         uint32_t        st_gen;           /* file generation number */
         int32_t         st_lspare;        /* RESERVED: DO NOT USE! */
         int64_t         st_qspare[2];     /* RESERVED: DO NOT USE! */
     };



     The time-related fields of <u>struct</u> <u>stat</u> and <u>struct</u> <u>stat64</u> are as follows:

     st_atime         Time when file data last accessed.  Changed by the <a href="mknod.2.html#//apple_ref/doc/man/2/mknod">mknod(2)</a>, <a href="utimes.2.html#//apple_ref/doc/man/2/utimes">utimes(2)</a> and <a href="read.2.html#//apple_ref/doc/man/2/read">read(2)</a>
                      system calls.

     st_mtime         Time when file data last modified.  Changed by the <a href="mknod.2.html#//apple_ref/doc/man/2/mknod">mknod(2)</a>, <a href="utimes.2.html#//apple_ref/doc/man/2/utimes">utimes(2)</a> and <a href="write.2.html#//apple_ref/doc/man/2/write">write(2)</a>
                      system calls.

     st_ctime         Time when file status was last changed (inode data modification).  Changed by the
                      <a href="chmod.2.html#//apple_ref/doc/man/2/chmod">chmod(2)</a>, <a href="chown.2.html#//apple_ref/doc/man/2/chown">chown(2)</a>, <a href="link.2.html#//apple_ref/doc/man/2/link">link(2)</a>, <a href="mknod.2.html#//apple_ref/doc/man/2/mknod">mknod(2)</a>, <a href="rename.2.html#//apple_ref/doc/man/2/rename">rename(2)</a>, <a href="unlink.2.html#//apple_ref/doc/man/2/unlink">unlink(2)</a>, <a href="utimes.2.html#//apple_ref/doc/man/2/utimes">utimes(2)</a> and <a href="write.2.html#//apple_ref/doc/man/2/write">write(2)</a>
                      system calls.

     st_birthtime     Time of file creation. Only set once when the file is created. This field is only
                      available in the 64 bit variants. On filesystems where birthtime is not available,
                      this field holds the <u>ctime</u> instead.

     The size-related fields of the structures are as follows:

     st_blksize     The optimal I/O block size for the file.

     st_blocks      The actual number of blocks allocated for the file in 512-byte units.  As short symbolic
                    links are stored in the inode, this number may be zero.

     The status information word <u>st</u><b>_</b><u>mode</u> has the following bits:

     #define S_IFMT 0170000           /* type of file */
     #define        S_IFIFO  0010000  /* named pipe (fifo) */
     #define        S_IFCHR  0020000  /* character special */
     #define        S_IFDIR  0040000  /* directory */
     #define        S_IFBLK  0060000  /* block special */
     #define        S_IFREG  0100000  /* regular */
     #define        S_IFLNK  0120000  /* symbolic link */
     #define        S_IFSOCK 0140000  /* socket */
     #define        S_IFWHT  0160000  /* whiteout */
     #define S_ISUID 0004000  /* set user id on execution */
     #define S_ISGID 0002000  /* set group id on execution */
     #define S_ISVTX 0001000  /* save swapped text even after use */
     #define S_IRUSR 0000400  /* read permission, owner */
     #define S_IWUSR 0000200  /* write permission, owner */
     #define S_IXUSR 0000100  /* execute/search permission, owner */

     For a list of access modes, see &lt;<u>sys/stat.h&gt;</u>, <a href="access.2.html#//apple_ref/doc/man/2/access">access(2)</a> and <a href="chmod.2.html#//apple_ref/doc/man/2/chmod">chmod(2)</a>.

     For a list of the file flags in the <u>st</u><b>_</b><u>flags</u> field, see &lt;<u>sys/stat.h&gt;</u> and <a href="chflags.2.html#//apple_ref/doc/man/2/chflags">chflags(2)</a>.

<b>RETURN</b> <b>VALUES</b>
     Upon successful completion a value of 0 is returned.  Otherwise, a value of -1 is returned and <u>errno</u> is
     set to indicate the error.

<b>COMPATIBILITY</b>
     Previous versions of the system used different types for the st_dev, st_uid, st_gid, st_rdev, st_size,
     st_blksize and st_blocks fields.

<b>ERRORS</b>
     The <b>fstat</b>() system call will fail if:

     [EBADF]            <u>fildes</u> is not a valid open file descriptor.

     [EFAULT]           <u>Sb</u> points to an invalid address.

     [EIO]              An I/O error occurs while reading from or writing to the file system.

     The <b>lstat</b>() and <b>stat</b>() system calls will fail if:

     [EACCES]           Search permission is denied for a component of the path prefix.

     [EFAULT]           <u>Sb</u> or <u>name</u> points to an invalid address.

     [EIO]              An I/O error occurs while reading from or writing to the file system.

     [ELOOP]            Too many symbolic links are encountered in translating the pathname.  This is taken
                        to be indicative of a looping symbolic link.

     [ENAMETOOLONG]     A component of a pathname exceeds {NAME_MAX} characters, or an entire path name
                        exceeds {PATH_MAX} characters.

     [ENOENT]           The named file does not exist.

     [ENOTDIR]          A component of the path prefix is not a directory.

     The <b>fstat</b>(), <b>lstat</b>(), and <b>stat</b>() system calls will fail if:

     [EOVERFLOW]        The file size in bytes or the number of blocks allocated to the file or the file
                        serial number cannot be represented correctly in the structure pointed to by <u>buf</u>.

<b>CAVEATS</b>
     The file generation number, <u>st</u><b>_</b><u>gen</u>, is only available to the super-user.
     The fields in the stat structure currently marked <u>st</u><b>_</b><u>spare1</u>, <u>st</u><b>_</b><u>spare2</u>, and <u>st</u><b>_</b><u>spare3</u> are present in
     preparation for inode time stamps expanding to 64 bits.  This, however, can break certain programs that
     depend on the time stamps being contiguous (in calls to <a href="utimes.2.html#//apple_ref/doc/man/2/utimes">utimes(2)</a>).

<b>LEGACY</b> <b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/types.h&gt;</b>
     <b>#include</b> <b>&lt;sys/stat.h&gt;</b>

     The include file &lt;<u>sys/types.h&gt;</u> is necessary.

<b>SEE</b> <b>ALSO</b>
     <a href="chflags.2.html#//apple_ref/doc/man/2/chflags">chflags(2)</a>, <a href="chmod.2.html#//apple_ref/doc/man/2/chmod">chmod(2)</a>, <a href="chown.2.html#//apple_ref/doc/man/2/chown">chown(2)</a>, <a href="utimes.2.html#//apple_ref/doc/man/2/utimes">utimes(2)</a>, <a href="../man5/compat.5.html#//apple_ref/doc/man/5/compat">compat(5)</a>, <a href="../man7/symlink.7.html#//apple_ref/doc/man/7/symlink">symlink(7)</a>

<b>BUGS</b>
     Applying fstat to a socket (and thus to a pipe) returns a zero'd buffer, except for the blocksize
     field, and a unique device and inode number.

<b>STANDARDS</b>
     The <b>stat</b>() and <b>fstat</b>() function calls are expected to conform to IEEE Std 1003.1-1988 (``POSIX.1'').

<b>HISTORY</b>
     An <b>lstat</b>() function call appeared in 4.2BSD.  The <b>stat64</b>(), <b>fstat64</b>(), and <b>lstat64</b>() system calls first
     appeared in Mac OS X 10.5 (Leopard).

4th Berkeley Distribution       April 19, 1994       4th Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man2/lstat.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man2/lstat.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man2/lstat.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

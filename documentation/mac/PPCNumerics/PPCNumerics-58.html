<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>fesetround(IM:PN)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING58></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCNumerics-57.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-59.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCNumerics-2.html"><B>PowerPC Numerics </B></A> / <A HREF="PPCNumerics-48.html"><B>Part 2 - The PowerPC Numerics C Implementation</B></A><BR><DD><A HREF="PPCNumerics-55.html"><B>Chapter 8 - Environmental Control Functions</B></A> / <A HREF="PPCNumerics-56.html"><B>Controlling the Rounding Direction</B></A><BR><DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING58-0></A>
<H3>fesetround</H3>
 <A NAME=MARKER-2-37></A>You can use the <CODE>fesetround</CODE> function to change the rounding direction.<P>
<PRE>
int fesetround (int round);
</PRE>
<DL>
<DT><CODE>round</CODE>
<DD> One of the four rounding direction constants (see <A HREF=PPCNumerics-56.html#MARKER-9-1>Table 8-1</A>).
</DL>
<A NAME=HEADING58-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>fesetround</CODE> function sets the rounding direction to the mode specified by its argument. If the value of <CODE>round</CODE> does not match any of the rounding direction constants, the function returns 0 and does not change the rounding direction.<P>
 By convention, if you change the rounding direction inside a function, first save the rounding direction of the calling function using <CODE>fegetround</CODE> and restore the saved direction at the end of the function. This way, the function does not affect the rounding direction of its caller. If the function is to be reentrant, then storage for the caller's rounding direction must be local.<A NAME=MARKER-2-22></A><P>
 One reason to change the rounding direction would be to put bounds on errors (at least for the basic arithmetic operations and square root). Suppose you want to evaluate an expression such as<P>
 
<MATH>
x = (a&#215;b+c&#215;d)/(f+g)
</MATH>

<P>
 where <I>a</I>, <I>b</I>, <I>c</I>, <I>d</I>, <I>f</I>, and <I>g</I> are positive.<P>
 To make sure that the result is always larger than the exact value, you can change the expression such that all roundings cause errors in the same direction. The example that follows changes the rounding direction to compute an upper bound for the expression, and then restores the previous rounding.<P>
<A NAME=HEADING58-11></A>
<H5>EXAMPLES</H5>
<PRE>
double_t big_divide(void)
{
   double_t x_up, a, b, c, d, f, g;
   int r;               /* specifies rounding direction */

   r = fegetround();    /* save caller's rounding direction */
   fesetround(FE_DOWNWARD);
                        /* downward rounding for denominator */
   x_up = f + g; 
   fesetround(FE_UPWARD);
                        /* upward rounding for expression */
   x_up = (a * b + c * d) / x_up; 
   fesetround(r);
                        /* restore caller's rounding direction */
   return(x_up);
}
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="PPCNumerics-57.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-59.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="PPCNumerics-3.html">&copy; Apple Computer, Inc.</A><br>13 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>CFAllocator Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="CFAllocator Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001202-DontLinkChapterID_1" title="CFAllocator Reference"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/CoreFoundation/index.html#//apple_ref/doc/uid/TP30001281-TP30000421" target="_top">Core Foundation</a> &gt; <a href="../index.html" target="_top">CFAllocator Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/revisionCFAllocator.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/20001202-DontLinkChapterID_1-DontLinkElementID_10" title="CFAllocator Reference"></a><h1>CFAllocator Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span class="noWrap">Derived from</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">
<span class="content_text"><a href="../../CFTypeRef/index.html#//apple_ref/doc/uid/20001203" target="_top">CFType</a></span></span></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px"><a href="../../CoreFoundation_Collection/index.html#//apple_ref/doc/uid/TP40003849" target="_top">CoreFoundation</a>/CoreFoundation.h</div></td></tr><tr><td scope="row"><strong><span class="noWrap">Companion guide</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/index.html#//apple_ref/doc/uid/10000127i" target="_top">Memory Management Programming Guide for Core Foundation</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">CFBase.h</span><br/></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/20001202-CH203-DontLinkElementID_8" title="Overview"></a><h2>Overview</h2><p>CFAllocator is an opaque type that allocates and deallocates memory for you. You never have to allocate, reallocate, or deallocate memory directly for Core Foundation objects—and rarely should you. You pass CFAllocator objects into functions that create objects; these functions have “Create” embedded in their names, for example, <code><a href="../../CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringCreateWithPascalString" target="_top">CFStringCreateWithPascalString</a></code>. The creation functions use the allocators to allocate memory for the objects they create. </p>
<p></p>



<a name="//apple_ref/doc/uid/20001202-DontLinkChapterID_1-DontLinkElementID_9" title="Functions by Task"></a><h2>Functions by Task</h2>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_3" title="Creating an Allocator"></a>
    
    <h3 class="tasks">Creating an Allocator</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorCreate">CFAllocatorCreate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates an allocator object.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_4" title="Managing Memory with an Allocator"></a>
    
    <h3 class="tasks">Managing Memory with an Allocator</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorAllocate">CFAllocatorAllocate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Allocates memory using the specified allocator.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorDeallocate">CFAllocatorDeallocate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Deallocates a block of memory with a given allocator.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorGetPreferredSizeForSize">CFAllocatorGetPreferredSizeForSize</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains the number of bytes likely to be allocated upon a specific request.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorReallocate">CFAllocatorReallocate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Reallocates memory using the specified allocator.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_5" title="Getting and Setting the Default Allocator"></a>
    
    <h3 class="tasks">Getting and Setting the Default Allocator</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorGetDefault">CFAllocatorGetDefault</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Gets the default allocator object for the current thread.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorSetDefault">CFAllocatorSetDefault</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the given allocator as the default for the current thread.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_6" title="Getting an Allocator&#39;s Context"></a>
    
    <h3 class="tasks">Getting an Allocator's Context</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorGetContext">CFAllocatorGetContext</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Obtains the context of the specified allocator or of the default allocator.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_7" title="Getting the CFAllocator Type ID"></a>
    
    <h3 class="tasks">Getting the CFAllocator Type ID</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFAllocatorGetTypeID">CFAllocatorGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the type identifier for the CFAllocator opaque type.'/>
            </span></li>
    </ul>

<a name="//apple_ref/doc/uid/20001202-CH201-86071" title="Functions"></a><h2>Functions</h2>








<a name="//apple_ref/c/func/CFAllocatorAllocate" title="CFAllocatorAllocate"></a><a name="//apple_ref/doc/c_ref/CFAllocatorAllocate" title="CFAllocatorAllocate"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10937" title="CFAllocatorAllocate"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_12"></a><h3 class="tight">CFAllocatorAllocate</h3>
<p class="spaceabove">Allocates memory using the specified allocator.</p>
<p class="spaceabove"><pre>
void * CFAllocatorAllocate (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> size,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to use to allocate the memory. Pass <code><!--a  -->NULL<!--/a--></code> or <code><!--a target="_top" -->kCFAllocatorDefault<!--/a--></code> to use the current default allocator.</p></dd>
<dt><em>size</em></dt>
<dd><p>The size of the memory to allocate. </p></dd>
<dt><em>hint</em></dt>
<dd><p>A bitfield containing flags that suggest how memory is to be allocated. <code>0</code> indicates no hints. No hints are currently defined, so only <code>0</code> should be passed for this value.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A pointer to the newly allocated memory. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CarbonPorting/index.html#//apple_ref/doc/uid/DTS10003904" target="_top">Carbon Porting Tutorial</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/MoreIsBetter/index.html#//apple_ref/doc/uid/DTS10000732" target="_top">MoreIsBetter</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/MoreSCF/index.html#//apple_ref/doc/uid/DTS10000702" target="_top">MoreSCF</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/QISA/index.html#//apple_ref/doc/uid/DTS10000714" target="_top">QISA</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorCreate" title="CFAllocatorCreate"></a><a name="//apple_ref/doc/c_ref/CFAllocatorCreate" title="CFAllocatorCreate"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10940" title="CFAllocatorCreate"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_13"></a><h3 class="tight">CFAllocatorCreate</h3>
<p class="spaceabove">Creates an allocator object.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> CFAllocatorCreate (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator,
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorContext">CFAllocatorContext</a> *context
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The existing allocator to use to allocate memory for the new allocator. Pass the <code><a href="reference.html#//apple_ref/c/data/kCFAllocatorUseContext">kCFAllocatorUseContext</a></code> constant for this parameter to allocate memory using the appropriate function callback specified in the <code>context</code> parameter. Pass <code><!--a  -->NULL<!--/a--></code> or <span class="content_text"><a href="reference.html#//apple_ref/c/data/kCFAllocatorDefault">kCFAllocatorDefault</a></span> to allocate memory for the new allocator using the default allocator. </p></dd>
<dt><em>context</em></dt>
<dd><p>A structure of type <code><a href="reference.html#//apple_ref/c/tdef/CFAllocatorContext">CFAllocatorContext</a></code>. The fields of this structure hold (among other things) function pointers to callbacks used for allocating, reallocating, and deallocating memory. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The new allocator object, or <code><!--a  -->NULL<!--/a--></code> if there was a problem allocating memory. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p>
<h5 class="tight">Discussion</h5>
<p>You use this function to create custom allocators which you can then pass into various Core Foundation object-creation functions. You must implement a function callback that allocates memory and assign it to the <code>allocate</code> field of this structure. You typically also implement deallocate, reallocate, and preferred-size callbacks. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorDeallocate" title="CFAllocatorDeallocate"></a><a name="//apple_ref/doc/c_ref/CFAllocatorDeallocate" title="CFAllocatorDeallocate"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10941" title="CFAllocatorDeallocate"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_14"></a><h3 class="tight">CFAllocatorDeallocate</h3>
<p class="spaceabove">Deallocates a block of memory with a given allocator.</p>
<p class="spaceabove"><pre>
void CFAllocatorDeallocate (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator,
   void *ptr
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator that was used to allocate the block of memory pointed to by <code>ptr</code>. </p></dd>
<dt><em>ptr</em></dt>
<dd><p>An untyped pointer to a block of memory to deallocate using <code>allocator</code>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If the allocator does not specify a <code>deallocate</code> callback function, the memory is not deallocated. </p>
<h5 class="tight">Special Considerations</h5>
<p>You must use the same allocator to deallocate memory as was used to allocate it.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/MoreIsBetter/index.html#//apple_ref/doc/uid/DTS10000732" target="_top">MoreIsBetter</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/MoreSCF/index.html#//apple_ref/doc/uid/DTS10000702" target="_top">MoreSCF</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/QISA/index.html#//apple_ref/doc/uid/DTS10000714" target="_top">QISA</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorGetContext" title="CFAllocatorGetContext"></a><a name="//apple_ref/doc/c_ref/CFAllocatorGetContext" title="CFAllocatorGetContext"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10943" title="CFAllocatorGetContext"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_15"></a><h3 class="tight">CFAllocatorGetContext</h3>
<p class="spaceabove">Obtains the context of the specified allocator or of the default allocator.</p>
<p class="spaceabove"><pre>
void CFAllocatorGetContext (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator,
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorContext">CFAllocatorContext</a> *context
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to examine. Pass <code><!--a  -->NULL<!--/a--></code> to obtain the context of the default allocator. </p></dd>
<dt><em>context</em></dt>
<dd><p>On return, contains the context of <em>allocator</em>. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>An allocator's context, a structure of type <code>CFAllocatorContext</code>, holds pointers to various function callbacks (particularly those that allocate, reallocate, and deallocate memory for an object). The context also contains a version number and the <code>info</code> field for program-defined data. To obtain the value of the <code>info</code> field you usually first have to get an allocator's context. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorGetDefault" title="CFAllocatorGetDefault"></a><a name="//apple_ref/doc/c_ref/CFAllocatorGetDefault" title="CFAllocatorGetDefault"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10944" title="CFAllocatorGetDefault"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_16"></a><h3 class="tight">CFAllocatorGetDefault</h3>
<p class="spaceabove">Gets the default allocator object for the current thread.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> CFAllocatorGetDefault (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A reference to the default allocator for the current thread. If none has been explicitly set, returns the generic system allocator, <code><a href="reference.html#//apple_ref/c/data/kCFAllocatorSystemDefault">kCFAllocatorSystemDefault</a></code>. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Get Rule</a></span>.</p>
<h5 class="tight">Discussion</h5>
<p>See the discussion for <code><a href="reference.html#//apple_ref/c/func/CFAllocatorSetDefault">CFAllocatorSetDefault</a></code> for more detail on the default allocator and for advice on how and when to set a custom allocator as the default. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/BasicDataBrowser/index.html#//apple_ref/doc/uid/DTS10000557" target="_top">BasicDataBrowser</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorGetPreferredSizeForSize" title="CFAllocatorGetPreferredSizeForSize"></a><a name="//apple_ref/doc/c_ref/CFAllocatorGetPreferredSizeForSize" title="CFAllocatorGetPreferredSizeForSize"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10945" title="CFAllocatorGetPreferredSizeForSize"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_17"></a><h3 class="tight">CFAllocatorGetPreferredSizeForSize</h3>
<p class="spaceabove">Obtains the number of bytes likely to be allocated upon a specific request.</p>
<p class="spaceabove"><pre>
<a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> CFAllocatorGetPreferredSizeForSize (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> size,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to use, or <code><!--a  -->NULL<!--/a--></code> for the default allocator. </p></dd>
<dt><em>size</em></dt>
<dd><p>The number of bytes to allocate. If the value is <code>0</code> or less, the result is the same value.</p></dd>
<dt><em>hint</em></dt>
<dd><p>A bitfield of type <code>CFOptionsFlags</code>. Pass flags to the allocator that suggest how memory is to be allocated. <code>0</code> indicates no hints. No hints are currently defined, only <code>0</code> should be passed for this argument.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The number of bytes likely to be allocated upon a specific request. </p>
<h5 class="tight">Discussion</h5>
<p>The return value depends on the allocator's internal allocation strategy, and will be equal to or larger than <code>size</code>. Calling this function may help you better match your memory allocation or reallocation strategy to that of the allocator. </p>
<p>Note that the return value depends on the internal implementation of the allocator and the results may change from release to release or from platform to platform.</p>
<p>If no function callback is assigned to the <code>preferredSize</code> field of the allocator's context (see the <code>CFAllocatorContext</code> structure), then the value of <code>size</code> is returned. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorGetTypeID" title="CFAllocatorGetTypeID"></a><a name="//apple_ref/doc/c_ref/CFAllocatorGetTypeID" title="CFAllocatorGetTypeID"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10946" title="CFAllocatorGetTypeID"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_18"></a><h3 class="tight">CFAllocatorGetTypeID</h3>
<p class="spaceabove">Returns the type identifier for the CFAllocator opaque type.</p>
<p class="spaceabove"><pre>
<a href="../../CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> CFAllocatorGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>The type identifier for the CFAllocator opaque type.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorReallocate" title="CFAllocatorReallocate"></a><a name="//apple_ref/doc/c_ref/CFAllocatorReallocate" title="CFAllocatorReallocate"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10948" title="CFAllocatorReallocate"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_19"></a><h3 class="tight">CFAllocatorReallocate</h3>
<p class="spaceabove">Reallocates memory using the specified allocator.</p>
<p class="spaceabove"><pre>
void * CFAllocatorReallocate (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator,
   void *ptr,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> newsize,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to use for reallocating memory. Pass <code><!--a  -->NULL<!--/a--></code> to request the default allocator. </p></dd>
<dt><em>ptr</em></dt>
<dd><p>An untyped pointer to a block of memory to reallocate to a new size. If <code>ptr</code> is <code><!--a  -->NULL<!--/a--></code> and <code>newsize</code> is greater than 0, memory is allocated (using the <code>allocate</code> function callback of the allocator's context). If <code>ptr</code> is <code><!--a  -->NULL<!--/a--></code> and <code>newsize</code> is 0, the result is <code><!--a  -->NULL<!--/a--></code>.</p></dd>
<dt><em>newsize</em></dt>
<dd><p>The number of bytes to allocate. If you pass <code>0</code> and the <code>ptr</code> parameter is non-<code><!--a  -->NULL<!--/a--></code>, the block of memory that <code>ptr</code> points to is typically deallocated. If you pass 0 for this parameter and the <code>ptr</code> parameter is <code><!--a  -->NULL<!--/a--></code>, nothing happens and the result returned is <code><!--a  -->NULL<!--/a--></code>. </p></dd>
<dt><em>hint</em></dt>
<dd><p>A bitfield of type <code>CFOptionsFlags</code>. Pass flags to the allocator that suggest how memory is to be allocated. Zero indicates no hints. No hints are currently defined, only <code>0</code> should be passed for this argument.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>The <code>CFAllocatorReallocate</code> function's primary purpose is to reallocate a block of memory to a new (and usually larger) size. However, based on the values passed in certain of the parameters, this function can also allocate memory afresh or deallocate a given block of memory. The following summarizes the semantic combinations:</p>
<ul class="ul"><li class="li"><p>If the <code>ptr</code> parameter is non- <code><!--a  -->NULL<!--/a--></code> and the <code>newsize</code> parameter is greater than <code>0</code>, the behavior is to reallocate.</p></li>
<li class="li"><p>If the <code>ptr</code> parameter is <code><!--a  -->NULL<!--/a--></code> and the <code>newsize</code> parameter is greater than <code>0</code>, the behavior is to allocate.</p></li>
<li class="li"><p>If the <code>ptr</code> parameter is non- <code><!--a  -->NULL<!--/a--></code> and the <code>newsize</code> parameter is <code>0</code>, the behavior is to deallocate.</p></li></ul>
<p>The result of the <code>CFAllocatorReallocate</code> function is either an untyped pointer to a block of memory or <code><!--a  -->NULL<!--/a--></code>. A <code><!--a  -->NULL<!--/a--></code> result indicates either a failure to allocate memory or some other outcome, the precise interpretation of which is determined by the values of certain parameters and the presence or absence of callbacks in the allocator context. To summarize, a <code><!--a  -->NULL<!--/a--></code> result can mean one of the following:</p>
<ul class="ul"><li class="li"><p>An error occurred in the attempt to allocate memory, such as insufficient free space.</p></li>
<li class="li"><p>No <code>allocate</code>, <code>reallocate</code>, or <code>deallocate</code> function callback (depending on parameters) was defined in the allocator context.</p></li>
<li class="li"><p>The semantic operation is "deallocate" (that is, there is no need to return anything). </p></li>
<li class="li"><p>The <code>ptr</code> parameter is <code><!--a  -->NULL<!--/a--></code> and the requested size is 0. </p></li></ul>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/func/CFAllocatorSetDefault" title="CFAllocatorSetDefault"></a><a name="//apple_ref/doc/c_ref/CFAllocatorSetDefault" title="CFAllocatorSetDefault"></a><a name="//apple_ref/doc/uid/20001202-CH201-F10952" title="CFAllocatorSetDefault"></a>
<a name="//apple_ref/doc/uid/20001202-CH201-DontLinkElementID_20"></a><h3 class="tight">CFAllocatorSetDefault</h3>
<p class="spaceabove">Sets the given allocator as the default for the current thread.</p>
<p class="spaceabove"><pre>
void CFAllocatorSetDefault (
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> allocator
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to set as the default for the current thread. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>The <code>CFAllocatorSetDefault</code> function sets the allocator that is used in the current thread whenever <code><!--a  -->NULL<!--/a--></code> is specified as an allocator argument. Generally, most allocations use the default allocator. Because of this, the default allocator must be prepared to deal with arbitrary memory-allocation requests. In addition, the size and number of requests can change between releases.</p>
<p>A further characteristic of the default allocator is that it can never be released, even if another allocator replaces it as the default. Not only is it impractical to release a default allocator (because there might be caches created somewhere that refer to the allocator) but it is generally safer and more efficient to keep it around.</p>
<p>If you wish to use a custom allocator in a context, the best approach is to specify it in the first parameter of creation functions rather than to set it as the default. Generally, setting the default allocator is not encouraged. If you do set an allocator as the default, either do it for the life time of your application or do it in a nested fashion (that is, restore the previous allocator before you exit your context). The latter approach might be more appropriate for plug-ins or libraries that wish to set the default allocator. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib v1.0 and later.</li><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/doc/uid/20001202-CH1g-92118" title="Callbacks"></a><h2>Callbacks</h2>






<a name="//apple_ref/c/tdef/CFAllocatorAllocateCallBack" title="CFAllocatorAllocateCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorAllocateCallBack" title="CFAllocatorAllocateCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10938" title="CFAllocatorAllocateCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_21"></a><h3 class="tight">CFAllocatorAllocateCallBack</h3>
<p class="spaceabove">A prototype for a function callback that allocates memory of a requested size.</p>
<p class="spaceabove"><pre>
typedef void *(*CFAllocatorAllocateCallBack) (
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> allocSize,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint,
   void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void *MyCallBack (
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> allocSize,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint,
   void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocSize</em></dt>
<dd><p>This function allocates a block of memory of at least <code>allocSize</code> bytes (always greater than 0).</p></dd>
<dt><em>hint</em></dt>
<dd><p>A bitfield that is currently not used (always set to 0).</p></dd>
<dt><em>info</em></dt>
<dd><p>An untyped pointer to program-defined data. Allocate memory for the data and assign a pointer to it. This data is often control information for the allocator. It may be <code><!--a  -->NULL<!--/a--></code>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A pointer to the start of the block.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorCopyDescriptionCallBack" title="CFAllocatorCopyDescriptionCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorCopyDescriptionCallBack" title="CFAllocatorCopyDescriptionCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10939" title="CFAllocatorCopyDescriptionCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_22"></a><h3 class="tight">CFAllocatorCopyDescriptionCallBack</h3>
<p class="spaceabove">A prototype for a function callback that provides a description of the specified data.</p>
<p class="spaceabove"><pre>
typedef CFStringRef (*CFAllocatorCopyDescriptionCallBack) (
   const void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
CFStringRef MyCallBack (
   const void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>info</em></dt>
<dd><p>An untyped pointer to program-defined data.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A CFString object that describes the allocator. The caller is responsible for releasing this object.</p>
<h5 class="tight">Discussion</h5>
<p>A prototype for a function callback that provides a description of the data pointed to by the <code>info</code> field. In implementing this function, return a reference to a CFString object that describes your allocator, particularly some characteristics of your program-defined data.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorDeallocateCallBack" title="CFAllocatorDeallocateCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorDeallocateCallBack" title="CFAllocatorDeallocateCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10942" title="CFAllocatorDeallocateCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_23"></a><h3 class="tight">CFAllocatorDeallocateCallBack</h3>
<p class="spaceabove">A prototype for a function callback that deallocates a block of memory.</p>
<p class="spaceabove"><pre>
typedef void (*CFAllocatorDeallocateCallBack) (
   void *ptr,
   void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void MyCallBack (
   void *ptr,
   void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ptr</em></dt>
<dd><p>The block of memory to deallocate.</p></dd>
<dt><em>info</em></dt>
<dd><p>An untyped pointer to program-defined data.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>A prototype for a function callback that deallocates a given block of memory. In implementing this function, make the block of memory pointed to by <code>ptr</code> available for subsequent reuse by the allocator but unavailable for continued use by the program. The <code>ptr</code> parameter cannot be <code><!--a  -->NULL<!--/a--></code> and if the <code>ptr</code> parameter is not a block of memory that has been previously allocated by the allocator, the results are undefined; abnormal program termination can occur.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorPreferredSizeCallBack" title="CFAllocatorPreferredSizeCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorPreferredSizeCallBack" title="CFAllocatorPreferredSizeCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10947" title="CFAllocatorPreferredSizeCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_24"></a><h3 class="tight">CFAllocatorPreferredSizeCallBack</h3>
<p class="spaceabove">A prototype for a function callback that gives the size of memory likely to be allocated, given a certain request.</p>
<p class="spaceabove"><pre>
typedef CFIndex (*CFAllocatorPreferredSizeCallBack) (
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> size,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint,
   void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
CFIndex MyCallBack (
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> size,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint,
   void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>size</em></dt>
<dd><p>The amount of memory requested.</p></dd>
<dt><em>hint</em></dt>
<dd><p>A bitfield that is currently not used (always set to 0).</p></dd>
<dt><em>info</em></dt>
<dd><p>An untyped pointer to program-defined data.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The actual size the allocator is likely to allocate given this request.</p>
<h5 class="tight">Discussion</h5>
<p>A prototype for a function callback that determines whether there is enough free memory to satisfy a request. In implementing this function, return the actual size the allocator is likely to allocate given a request for a block of memory of size <code>size</code>. The <code>hint</code> argument is a bitfield that you should currently not use.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorReallocateCallBack" title="CFAllocatorReallocateCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorReallocateCallBack" title="CFAllocatorReallocateCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10949" title="CFAllocatorReallocateCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_25"></a><h3 class="tight">CFAllocatorReallocateCallBack</h3>
<p class="spaceabove">A prototype for a function callback that reallocates memory of a requested size for an existing block of memory.</p>
<p class="spaceabove"><pre>
typedef void *(*CFAllocatorReallocateCallBack) (
   void *ptr,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> newsize,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint,
   void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void *MyCallBack (
   void *ptr,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> newsize,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> hint,
   void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ptr</em></dt>
<dd><p>The block of memory to resize.</p></dd>
<dt><em>newsize</em></dt>
<dd><p>The size of the new allocation.</p></dd>
<dt><em>hint</em></dt>
<dd><p>A bitfield that is currently not used (always set to 0).</p></dd>
<dt><em>info</em></dt>
<dd><p>An untyped pointer to program-defined data.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>Pointer to the new block of memory.</p>
<h5 class="tight">Discussion</h5>
<p>In implementing this function, change the size of the block of memory pointed to by <code>ptr</code> to the size specified by <code>newsize</code> and return the pointer to the larger block of memory. Return <code><!--a  -->NULL<!--/a--></code> on any reallocation failure, leaving the old block of memory untouched. Also return <code><!--a  -->NULL<!--/a--></code> immediately if any of the following conditions if the ptr parameter is <code><!--a  -->NULL<!--/a--></code> or the <em>newsize</em> parameter is not greater than 0. Leave the contents of the old block of memory unchanged up to the lesser of the new or old sizes. If the <code>ptr</code> parameter is not a block of memory that has been previously allocated by the allocator, the results are undefined; abnormal program termination can occur. The <code>hint</code> argument is a bitfield that you should currently not use (that is, assign 0).</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorReleaseCallBack" title="CFAllocatorReleaseCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorReleaseCallBack" title="CFAllocatorReleaseCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10950" title="CFAllocatorReleaseCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_26"></a><h3 class="tight">CFAllocatorReleaseCallBack</h3>
<p class="spaceabove">A prototype for a function callback that releases the given data.</p>
<p class="spaceabove"><pre>
typedef void (*CFAllocatorReleaseCallBack) (
   const void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void MyCallBack (
   const void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>info</em></dt>
<dd><p>The data to be released.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>A prototype for a function callback that releases the data pointed to by the <code>info</code> field. In implementing this function, release (or free) the data you have defined for the allocator context.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorRetainCallBack" title="CFAllocatorRetainCallBack"></a><a name="//apple_ref/doc/c_ref/CFAllocatorRetainCallBack" title="CFAllocatorRetainCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-F10951" title="CFAllocatorRetainCallBack"></a><a name="//apple_ref/doc/uid/20001202-CH1g-DontLinkElementID_27"></a><h3 class="tight">CFAllocatorRetainCallBack</h3>
<p class="spaceabove">A prototype for a function callback that retains the given data.</p>
<p class="spaceabove"><pre>
typedef const void *(*CFAllocatorRetainCallBack) (
   const void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
const void *MyCallBack (
   const void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>info</em></dt>
<dd><p>The data to be retained.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>A prototype for a function callback that retains the data pointed to by the <code>info</code> field. In implementing this function, retain the data you have defined for the allocator context in this field. (This might make sense only if the data is a Core Foundation object.)</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/doc/uid/20001202-CH2g-92911" title="Data Types"></a><h2>Data Types</h2>


<a name="//apple_ref/c/tdef/CFAllocatorContext" title="CFAllocatorContext"></a><a name="//apple_ref/doc/c_ref/CFAllocatorContext" title="CFAllocatorContext"></a><a name="//apple_ref/doc/uid/20001202-CH2g-C007563" title="CFAllocatorContext"></a>
<a name="//apple_ref/doc/uid/20001202-CH2g-DontLinkElementID_28"></a><h3 class="tight">CFAllocatorContext</h3>
<p class="spaceabove">A structure that defines the context or operating environment for an allocator (CFAllocator) object. Every Core Foundation allocator object must have a context defined for it.</p>
<p class="spaceabove"><pre>
struct CFAllocatorContext {
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> version;
   void *info;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRetainCallBack">CFAllocatorRetainCallBack</a> retain;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorReleaseCallBack">CFAllocatorReleaseCallBack</a> release;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorCopyDescriptionCallBack">CFAllocatorCopyDescriptionCallBack</a> copyDescription;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorAllocateCallBack">CFAllocatorAllocateCallBack</a> allocate;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorReallocateCallBack">CFAllocatorReallocateCallBack</a> reallocate;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorDeallocateCallBack">CFAllocatorDeallocateCallBack</a> deallocate;
   <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorPreferredSizeCallBack">CFAllocatorPreferredSizeCallBack</a> preferredSize;
};
typedef struct CFAllocatorContext CFAllocatorContext;
</pre></p>
<h5 class="tight">Fields</h5><dl class="termdef">
<dt><code>version</code></dt>
<dd><p>An integer of type <code>CFIndex</code>. Assign the version number of the allocator. Currently the only valid value is 0. </p></dd>
<dt><code>info</code></dt>
<dd><p>An untyped pointer to program-defined data. Allocate memory for this data and assign a pointer to it. This data is often control information for the allocator. You may assign <code>NULL</code>.</p></dd>
<dt><code>retain</code></dt>
<dd><p>A prototype for a function callback that retains the data pointed to by the <code>info</code> field. In implementing this function, retain the data you have defined for the allocator context in this field. (This might make sense only if the data is a Core Foundation object.) You may set this function pointer to <code>NULL</code>. </p></dd>
<dt><code>release</code></dt>
<dd><p>A prototype for a function callback that releases the data pointed to by the <code>info</code> field. In implementing this function, release (or free) the data you have defined for the allocator context. You may set this function pointer to <code>NULL</code>, but doing so might result in memory leaks. </p></dd>
<dt><code>copyDescription</code></dt>
<dd><p>A prototype for a function callback that provides a description of the data pointed to by the <code>info</code> field. In implementing this function, return a reference to a CFString object that describes your allocator, particularly some characteristics of your program-defined data. You may set this function pointer to <code>NULL</code>, in which case Core Foundation will provide a rudimentary description. </p></dd>
<dt><code>allocate</code></dt>
<dd><p>A prototype for a function callback that allocates memory of a requested size. In implementing this function, allocate a block of memory of at least <code>size</code> bytes and return a pointer to the start of the block. The <code>hint</code> argument is a bitfield that you should currently not use (that is, assign 0). The <code>size</code> parameter should always be greater than 0. If it is not, or if problems in allocation occur, return <code>NULL</code>. This function pointer may not be assigned <code>NULL</code>. </p></dd>
<dt><code>reallocate</code></dt>
<dd><p>A prototype for a function callback that reallocates memory of a requested size for an existing block of memory. In implementing this function, change the size of the block of memory pointed to by <code>ptr</code> to the size specified by <code>newsize</code> and return the pointer to the larger block of memory. Return <code>NULL</code> on any reallocation failure, leaving the old block of memory untouched. Also return <code>NULL</code> immediately if any of the following conditions apply:</p><ul class="termdef"><li class="termdef"><p>The ptr parameter is <code><!--a  -->NULL<!--/a--></code>.</p></li>
<li class="termdef"><p>The newsize parameter is not greater than 0. </p><p>Leave the contents of the old block of memory unchanged up to the lesser of the new or old sizes. If the <code>ptr</code> parameter is not a block of memory that has been previously allocated by the allocator, the results are undefined; abnormal program termination can occur. The <code>hint</code> argument is a bitfield that you should currently not use (that is, assign 0). If you set this callback to <code><!--a  -->NULL<!--/a--></code> the <code><a href="reference.html#//apple_ref/c/func/CFAllocatorReallocate">CFAllocatorReallocate</a></code> function returns <code><!--a  -->NULL<!--/a--></code> in most cases when it attempts to use this allocator.</p></li></ul></dd>
<dt><code>deallocate</code></dt>
<dd><p>A prototype for a function callback that deallocates a given block of memory. In implementing this function, make the block of memory pointed to by <code>ptr</code> available for subsequent reuse by the allocator but unavailable for continued use by the program. The <code>ptr</code> parameter cannot be <code>NULL</code> and if the <code>ptr</code> parameter is not a block of memory that has been previously allocated by the allocator, the results are undefined; abnormal program termination can occur. You can set this callback to <code>NULL</code>, in which case the <code><a href="reference.html#//apple_ref/c/func/CFAllocatorDeallocate">CFAllocatorDeallocate</a></code> function has no effect. </p></dd>
<dt><code>preferredSize</code></dt>
<dd><p>A prototype for a function callback that determines whether there is enough free memory to satisfy a request. In implementing this function, return the actual size the allocator is likely to allocate given a request for a block of memory of size <code>size</code>. The <code>hint</code> argument is a bitfield that you should currently not use. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>See the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/index.html#//apple_ref/doc/uid/10000127i" target="_top">“Memory Management”</a></span> topic for information on creating a custom CFAllocator object and, as part of that procedure, the steps for creating a properly initialized <code>CFAllocatorContext</code> structure. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/c/tdef/CFAllocatorRef" title="CFAllocatorRef"></a><a name="//apple_ref/doc/c_ref/CFAllocatorRef" title="CFAllocatorRef"></a><a name="//apple_ref/doc/uid/20001202-CH2g-C007671" title="CFAllocatorRef"></a><a name="//apple_ref/doc/uid/20001202-CH2g-DontLinkElementID_29"></a><h3 class="tight">CFAllocatorRef</h3>
<p class="spaceabove">A reference to a CFAllocator object. </p>
<p class="spaceabove"><pre>
typedef const struct __CFAllocator *CFAllocatorRef;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The <code>CFAllocatorRef</code> type is a reference type used in many Core Foundation parameters and function results. It refers to a CFAllocator object, which allocates, reallocates, and deallocates memory for Core Foundation objects. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFBase.h</code><a name="//apple_ref/doc/uid/20001202-CH3g-104329" title="Constants"></a><h2>Constants</h2>

<a name="//apple_ref/doc/constant_group/Predefined_Allocators" title="Predefined Allocators" role="GlobalDataGroup"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_2" title="Predefined Allocators" role="GlobalDataGroup"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_30"></a><h3 class="tight">Predefined Allocators</h3>
<p class="spaceabove">CFAllocator provides the following predefined allocators. In general, you should use <code>kCFAllocatorDefault</code> unless one of the special circumstances exist below.</p>
<p class="spaceabove"><pre>
const <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kCFAllocatorDefault">kCFAllocatorDefault</a>;
const <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kCFAllocatorSystemDefault">kCFAllocatorSystemDefault</a>;
const <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kCFAllocatorMalloc">kCFAllocatorMalloc</a>;
const <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kCFAllocatorMallocZone">kCFAllocatorMallocZone</a>;
const <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kCFAllocatorNull">kCFAllocatorNull</a>;
const <a href="reference.html#//apple_ref/doc/c_ref/CFAllocatorRef">CFAllocatorRef</a> <a href="reference.html#//apple_ref/doc/c_ref/kCFAllocatorUseContext">kCFAllocatorUseContext</a>;
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/data/kCFAllocatorDefault" title="kCFAllocatorDefault"></a><a name="//apple_ref/doc/c_ref/kCFAllocatorDefault" title="kCFAllocatorDefault"></a><a name="//apple_ref/doc/uid/20001202-CH3g-BAJBGHAG" title="kCFAllocatorDefault"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_31"></a><dt><code>kCFAllocatorDefault</code></dt>
<dd><p>This is a synonym for <code>NULL</code>. </p><p>Available in Mac OS X v10.0 and later.</p><p>Declared in <code>CFBase.h</code>.</p></dd>
<a name="//apple_ref/c/data/kCFAllocatorSystemDefault" title="kCFAllocatorSystemDefault"></a><a name="//apple_ref/doc/c_ref/kCFAllocatorSystemDefault" title="kCFAllocatorSystemDefault"></a><a name="//apple_ref/doc/uid/20001202-CH3g-BAJGEEGE" title="kCFAllocatorSystemDefault"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_32"></a><dt><code>kCFAllocatorSystemDefault</code></dt>
<dd><p>Default system allocator.</p><p>You rarely need to use this.</p><p>Available in Mac OS X v10.0 and later.</p><p>Declared in <code>CFBase.h</code>.</p></dd><a name="//apple_ref/c/data/kCFAllocatorMalloc" title="kCFAllocatorMalloc"></a><a name="//apple_ref/doc/c_ref/kCFAllocatorMalloc" title="kCFAllocatorMalloc"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_33"></a><dt><code>kCFAllocatorMalloc</code></dt><dd><p>This allocator uses <code>malloc()</code>, <code>realloc()</code>, and <code>free()</code>. </p><p>Typically you should not use this allocator, use <code>kCFAllocatorDefault</code> instead. This allocator is useful as the <code>bytesDeallocator</code> in CFData or <code>contentsDeallocator</code> in CFString where the memory was obtained as a result  of <code>malloc</code> type functions.</p><p>Available in Mac OS X v10.0 and later.</p><p>Declared in <code>CFBase.h</code>.</p></dd><a name="//apple_ref/c/data/kCFAllocatorMallocZone" title="kCFAllocatorMallocZone"></a><a name="//apple_ref/doc/c_ref/kCFAllocatorMallocZone" title="kCFAllocatorMallocZone"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_34"></a><dt><code>kCFAllocatorMallocZone</code></dt><dd><p>This allocator explicitly uses the default malloc zone, returned by <code>malloc_default_zone()</code>.</p><p>You should only use this when an object is safe to be allocated in non-scanned memory.</p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>CFBase.h</code>.</p></dd>
<a name="//apple_ref/c/data/kCFAllocatorNull" title="kCFAllocatorNull"></a><a name="//apple_ref/doc/c_ref/kCFAllocatorNull" title="kCFAllocatorNull"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_35"></a><dt><code>kCFAllocatorNull</code></dt>
<dd><p>This allocator does nothing—it allocates no memory. </p><p>This allocator is useful as the <code>bytesDeallocator</code> in CFData or <code>contentsDeallocator</code> in CFString where the memory should not be freed.</p><p>Available in Mac OS X v10.0 and later.</p><p>Declared in <code>CFBase.h</code>.</p></dd>
<a name="//apple_ref/c/data/kCFAllocatorUseContext" title="kCFAllocatorUseContext"></a><a name="//apple_ref/doc/c_ref/kCFAllocatorUseContext" title="kCFAllocatorUseContext"></a><a name="//apple_ref/doc/uid/20001202-CH3g-BAJEBHDJ" title="kCFAllocatorUseContext"></a><a name="//apple_ref/doc/uid/20001202-CH3g-DontLinkElementID_36"></a><dt><code>kCFAllocatorUseContext</code></dt>
<dd><p>Special allocator argument to <code><a href="reference.html#//apple_ref/c/func/CFAllocatorCreate">CFAllocatorCreate</a></code>—it uses the functions given in the context to allocate the allocator.</p><p>Available in Mac OS X v10.0 and later.</p><p>Declared in <code>CFBase.h</code>.</p></dd></dl><h5 class="tight">Declared In</h5><code>CFBase.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/revisionCFAllocator.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-12-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/CoreFoundation/Reference/CFAllocatorRef/Reference/reference.html%3Fid%3D20001202-3.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/CoreFoundation/Reference/CFAllocatorRef/Reference/reference.html%3Fid%3D20001202-3.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/CoreFoundation/Reference/CFAllocatorRef/Reference/reference.html%3Fid%3D20001202-3.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
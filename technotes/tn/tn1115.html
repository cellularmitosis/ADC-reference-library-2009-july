<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN1115: LaserWriter 8.5.1: The Extended 'PAPA' Resource</title>       <meta name="keywords" content="Mac OS 8 LaserWriter PAPA resource defined tags type DTP">    <meta name="Description" content="Technical Note TN1115: This Technical Note discusses theadditional bytes of the 'PAPA' resource and                             in what way the LaserWriter 8.5.1 driveruses them."><meta name="categories" content="Printing"><meta name="week-posted" content="Sep 1, 1997 - Sep 5, 1997"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002955" title="LaserWriter 8.5.1: The Extended 'PAPA' Resource"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/HardwareDrivers/idxPrinting-date.html" target="_blank">Hardware & Drivers > Printing</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1115</div>
<div id="pageheadsub">LaserWriter 8.5.1: The Extended 'PAPA' Resource</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><center><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">          <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left><!-- begin_toc --><p id="menutext"><A HREF = "#Section1">The '<CODE>PAPA</CODE>' Resource</A><BR><BR><A HREF = "#Section2">Valid <CODE>TAG</CODE> types</A><BR><BR><A HREF = "#Summary">Summary</A><br><BR><A HREF="#References">References</a><BR><BR><A HREF="#Downloads">Downloadables</A></p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>            			<!-- begin_intro_text --><p id="introtext">Starting with LaserWriter 8.5.1,          in order to support different types of desktop printers, the '<CODE>PAPA</CODE>'          -8192 resource has been extended from 103 to 1024 bytes long. This Technote          discusses the additional bytes and in what way the LaserWriter 8.5.1          driver uses them.</p><BR><TABLE BORDER=0 WIDTH=300><TR><td bgcolor="#E6E6E6" align=left><P id="introtext"><B>Note:</B><BR> If your code relies on the size of the '<CODE>PAPA</CODE>'                   resource, it may crash with LaserWriter 8.5.1 unless you update it                   to support the extended '<CODE>PAPA</CODE>' resource.</P></TD></TR></TABLE><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Feb 06 1998]</h3><!-- end_date -->        </td>    </tr></table> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content -->         <A NAME="Section1"></A>                  <H2>The '<CODE>PAPA</CODE>' Resource</H2><BR>                  <P>The new '<CODE>PAPA</CODE>' looks just like an old style '<CODE>PAPA</CODE>'          at the front of the resource; that is, the '<CODE>PAPA</CODE>' resource begins          with three packed Pascal          strings representing the printer name, the network type (usually LaserWriter),          and the printer's zone. After these strings comes the 4-byte network address.</P>       <P>The new extended '<CODE>PAPA</CODE>' then adds desktop printer (DTP) data        beginning at the 104th byte in the resource. The data from bytes 104 to 1024        (1-based indices) is a series        of tagged blocks where each block contains a 4-byte tag, followed by a 2-byte length        value, and then the actual data. A series of these tagged blocks can reside in bytes        104 to 1024. </P>      <BR><P><A HREF="#top">Back to top</A></P>               <A NAME="Section2"></A>                  <H2>Tag Requirements</H2>                  <P>There are a few requirements for the tagged blocks that go into the          extended '<CODE>PAPA</CODE>'. They are:</P>       <UL TYPE=DISC>    <LI>The only required block in an extended '<CODE>PAPA</CODE>' is the '<CODE>TAGS</CODE>'     tag which     gives the number of valid tag blocks in the extended resource. The '<CODE>TAGS</CODE>'     block must be the first tag in the extended record and serves as a validity check.<BR><BR></li>        <LI>When the extended portion of the '<CODE>PAPA</CODE>' contains multiple tag blocks,     each block is required to start on a word (16-bit) boundary. Thus, if a tag     block has an odd length, there should be a byte of padding before the start     of the next tag block.<BR><BR></li>        <LI>In order to limit the number of clients that need to understand     the extended '<CODE>PAPA</CODE>' format, and to make it easier to change the format     in the future, the <CODE>SettingsLib</CODE> provides routines for creating and     accessing the extended '<CODE>PAPA</CODE>'. Relying on the extended '<CODE>PAPA</CODE>'     format     rather than using <CODE>SettingsLib</CODE> is a bad idea. For more information on     <CODE>SettingsLib</CODE>, please see Apple's     <a href="../index.html">Technote web site</A>.</li>    </UL>     <H3>Tag Types</H3>     <H4>Tag: '<CODE>TAGS</CODE>'</H4>     <P>Value Size: sizeof(UInt16), 2 bytes<BR><BR>     The value of the '<CODE>TAGS</CODE>' block provides the number of valid tag blocks in      the extended print record including itself. The '<CODE>TAGS</CODE>' block must be the      first tag in the extended print record; a valid extended print record must      therefore begin with the byte sequence: <CODE>0x5441 0x4753 0x0002</CODE>.</P>     <H4>Tag: '<CODE>TYPE</CODE>'</H4>     <P>This tag is optional as its contents are redundant given the <CODE>PAPA</CODE>      zone name string. If this tag does exists, then its value must match,      not literally but in meaning, the DTP type implied by the zone string.      Here are the zone string mappings to '<CODE>TYPE</CODE>' values:</p><TABLE BORDER=0 width="500">   <TR>      <td width=120 align=left>          <P><B>Zone Name String</B></p>      </TD><td width=100 align=left>         <P><B>'<CODE>Type</CODE>' tag value</B></p>         </TD><td width=200 align=left>         <P><B>Definition</B></p>      </TD></TR><TR>      <td width=120 align=left>          <P><CODE>=Hld</CODE></p>      </TD><td width=100 align=left>         <P><CODE>'=Hld'    </CODE></p>         </TD><td width=200 align=left>         <P>- Creates and holds spool files. The spool files are never processed and          the DTP is not connected to a real printer.</p>      </TD></TR><TR>      <td width=120 align=left>          <P><CODE>=Fil*</CODE></p>      </TD><td width=100 align=left>         <P><CODE>'=Fil'</CODE></p>         </TD><td width=200 align=left>         <P>- Creates PostScript or EPS files, is                 not connected to a real printer.</p>      </TD></TR><TR>      <td width=120 align=left>          <P><CODE>=Cst*</CODE></p>      </TD><td width=100 align=left>         <P><CODE>'=Cst'</CODE></p>         </TD><td width=200 align=left>         <P>- Creates a PostScript file and then                 launches an application to post-process                the file.</p>         </TD></TR><TR>      <td width=120 align=left>          <P><CODE>=LPR*</CODE></p>      </TD><td width=100 align=left>         <P><CODE>'=LPR'</CODE></p>         </TD><td width=200 align=left>         <P>- Sends a PostScript job using the LPR                protocol.</p>      </TD></TR><TR><td width=120 align=left>          <P><CODE>=Ird*</CODE></p>      </TD><td width=100 align=left>         <P><CODE>'=Ird'</CODE>  </p>           </TD><td width=200 align=left>         <P>- Sends a PostScript job over an irda,                infrared, channel.</p>         </TD></TR><TR>      <td width=120 align=left>          <P>Valid Zone string</p>      </TD><td width=100 align=left>         <P><CODE>'PAP'</CODE></p>         </TD><td width=200 align=left>         <P>- Uses the AppleTalk PAP protocol to             print the job.</p></TD></TR></table>      <P>In the preceding mapping, the '*' in the zone name string is a wildcard which can be replaced by zero or more characters of any value. The DTP Utility uses this part of the zone name string to differentiate between DTP printers of the same type with the same name located in different folders.</P><P>Beside the tag values '<CODE>=Hld</CODE>', '<CODE>=Fil</CODE>', '<CODE>=Cst</CODE>', '<CODE>=LPR</CODE>', '<CODE>=Ird</CODE>', and '<CODE>PAP</CODE>', other tag values may be added in the future for new DTP types.</P><H4>Tag: '<CODE>TCP</CODE>'</H4><P>Value Size: variable size string</P><P>If the DTP printer type requires a TCP/IP network address, it is placed in the extended PAPA using the '<CODE>TCP</CODE>' tag. The value of the tag block is the network address of the printer either as a fully qualified network address, such as colorlaser.apple.com, or in dot format, such as 204.188.109.151.</P><P>This tag is required for DTP printers of type '<CODE>=LPR</CODE>'.</P><P>The length of the string is determined from the block length.</P><H4>Tag: '<CODE>Q </CODE>'</H4><P>Value Size: variable size string.</P><P>If a DTP can use a print queue name, as can LPR DTPs, then the print queue name is placed in a tag value block of type '<CODE>Q </CODE>'.</P>The length of the string is determined from the block length.<P><B>Summary of DTP type, zone names, and tags.</B></P><TABLE BORDER=0 width="500">   <TR>      <td width=120 align=left>          <P><B>DTP Type</B></p>      </TD><td width=150 align=left>         <P><B>PAPA Zone String</B></p>         </TD><td width=200 align=left>         <P><B>Extended Data Tags</B></p>      </TD></TR><TR>      <td width=120 align=left>          <P><CODE>PAP</CODE></p>      </TD><td width=150 align=left>         <P>Actual Zone Name</p>         </TD><td width=200 align=left>         <P>'TYPE' is '<CODE>PAP</CODE> '</p>      </TD></TR><TR>      <td width=120 align=left>          <P><CODE>Hold</CODE></p>      </TD><td width=150 align=left>         <P>~</p>         </TD><td width=200 align=left>         <P>'TYPE' is '<CODE>=Hld/CODE</code>'</p>      </TD></TR><TR>      <td width=120 align=left>          <P>Save to File</p>      </TD><td width=150 align=left>         <P> <CODE>=Fil*</CODE></p>         </TD><td width=200 align=left>         <P>'TYPE' is '<CODE>=Fil</CODE>'</p>         </TD></TR><TR>      <td width=120 align=left>          <P><CODE>LPR</CODE></p>      </TD><td width=150 align=left>         <P><CODE>=LPR*</CODE></p>         </TD><td width=200 align=left>         <P>'TYPE' is '<CODE>=LPR</CODE>'</p>      </TD></TR><TR><td width=120 align=left>          <P>&nbsp;</p>      </TD><td width=150 align=left>         <P>&nbsp;</p>         </TD><td width=200 align=left>         <P>'<CODE>TCP</CODE> ' is printer's net address</p>         </TD></TR><TR>      <td width=120 align=left>          <P>&nbsp;</p>      </TD><td width=150 align=left>         <P>&nbsp;</p>         </TD><td width=200 align=left>         <P>'<CODE>Q </CODE>  ' is optional and is the name of the print spooler.</p></TD></TR><TR>      <td width=120 align=left>          <P><CODE>InfraRed</CODE></p>      </TD><td width=150 align=left>         <P><CODE>=Ird</CODE></p>         </TD><td width=200 align=left>         <P>'TYPE' is '<CODE>=Ird</CODE>'</p></TD></TR>       </TABLE><BR><P><A HREF="#top">Back to top</A></P>         <A NAME="Summary"></A>                  <H2>Summary</H2>                  <P>This has documented the changes in the '<CODE>PAPA</CODE>' resource in          LaserWriter 8.5.1. Please beware if your application depends          on the size of the '<CODE>PAPA</CODE>' as it may no longer work with          LaserWriter 8.5.1.</p>         <BR><P><A HREF="#top">Back to top</A></P>    <A NAME="References"></A><H2>References</h2><p><a href="../index.html">Apple's Technote web site</A></p><BR><P><A HREF="#top">Back to top</A></P>        <A NAME="Downloads"></A>         <br><h2>Downloadables</h2>        <center><TABLE BORDER=0 CELLPADDING=3 WIDTH="600">          <TR>             <td width=50 align=left>               <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P>            </TD>            <td align="left">               <p>Acrobat version of this Note (60K).</P>            </TD>            <td width=60 align=left>               <p><A HREF="pdf/tn1115.pdf">Download</A></P>            </TD>          </TR>        </TABLE></center><BR><BR>        </td></tr></table></center><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1115.html%3Fid%3DDTS10002955-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1115.html%3Fid%3DDTS10002955-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1115.html%3Fid%3DDTS10002955-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
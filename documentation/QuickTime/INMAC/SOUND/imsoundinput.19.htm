<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE>Recording Sounds Directly From Sound Input Devices (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.18.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.16.htm">Section top</A> | <A target="doc" HREF="imsoundinput.1a.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=775"> </A>Recording Sounds Directly From Sound Input Devices</H1><P CLASS="T0.Text0"><A NAME="pgfId=779"> </A>The Sound Input Manager provides a number of routines that allow you to begin, pause, resume, and stop recording directly from a sound input device. These low-level routines do not display the sound recording dialog box to the user.</P><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=780"> </A>SPBRecord<A NAME="marker=241"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=781"> </A><A NAME="marker=544"> </A><A NAME="marker=334"> </A>You can use the <TT CLASS="cv">SPBRecord</TT> function to record audio data into memory, either synchronously or asynchronously.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=13588"> </A>FUNCTION SPBRecord (inParamPtr: SPBPtr; asynchFlag: Boolean): <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6149"> </A><TT CLASS="cv">inParamPtr</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=783"> </A> A pointer to a sound input parameter block.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6159"> </A><TT CLASS="cv">asynchFlag</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=667"> </A> A Boolean value that specifies whether the recording occurs asynchronously (<TT CLASS="cv">TRUE</TT>) or synchronously (<TT CLASS="cv">FALSE</TT>).</BLOCKQUOTE><P CLASS="T1.Text1"><A NAME="pgfId=635"> </A>You specify values and receive return values in the sound input parameter block.</P><P CLASS="PH.ParamHd"><A NAME="pgfId=802"> </A>	<TT CLASS="cv"></TT></P><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=615"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=634"> </A>inRefNum</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=776"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=777"> </A>A reference number of a sound input device.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1446"> </A>&#180;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1447"> </A>count</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1448"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1449"> </A>The number of bytes of recording.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1450"> </A>&#180;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1451"> </A>milliseconds</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1452"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1453"> </A>The number of milliseconds of recording.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1454"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1455"> </A>bufferLength</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1456"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1457"> </A>The length of the buffer beginning at <TT CLASS="cv">bufferPtr</TT>.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1458"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1459"> </A>bufferPtr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1460"> </A>Ptr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1461"> </A>A pointer to a buffer for sampled-sound data.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1462"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1463"> </A>completionRoutine</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1464"> </A>ProcPtr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1465"> </A>A pointer to a completion routine.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1466"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1467"> </A>interruptRoutine</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1468"> </A>ProcPtr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1469"> </A>A pointer to an interrupt routine.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1470"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1471"> </A>userLong</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1472"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1473"> </A>Free for application's use.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1474"> </A>&#168;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1475"> </A>error</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1476"> </A>OSErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1477"> </A>The error value returned after recording.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1478"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1479"> </A>unused1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1480"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1481"> </A>Reserved.</P></TD></TR></TABLE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6169"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=784"> </A>The device reference number of the sound input device, as obtained from the <TT CLASS="cv">SPBOpenDevice</TT> function.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6178"> </A><TT CLASS="cv">count</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1184"> </A>On input, the number of bytes to record. If this field indicates a longer recording time than the <TT CLASS="cv">milliseconds</TT> field, then the <TT CLASS="cv">milliseconds</TT> field is ignored. On output, this field indicates the number of bytes actually recorded.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6187"> </A><TT CLASS="cv">milliseconds</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1185"> </A>On input, the number of milliseconds to record. If this field indicates a longer recording time than the <TT CLASS="cv">count</TT> field, then the <TT CLASS="cv">count</TT> field is ignored. On output, this field indicates the number of milliseconds actually recorded.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6196"> </A><TT CLASS="cv">bufferLength</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1186"> </A>The number of bytes in the buffer specified by the <TT CLASS="cv">bufferPtr</TT> parameter. If this buffer length is too small to contain the amount of sampled-sound data specified in the <TT CLASS="cv">count</TT> and <TT CLASS="cv">milliseconds</TT> fields, then recording time is truncated so that the sampled-sound data fits in the buffer.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6205"> </A><TT CLASS="cv">bufferPtr</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=673"> </A>A pointer to the buffer for the sampled-sound data, or <TT CLASS="cv">NIL</TT> if you wish to record sampled-sound data without saving it. On exit, this buffer contains the sampled-sound data, which is interleaved for stereo sound on a sample basis (or on a packet basis if the data is compressed). This buffer contains only sampled-sound data, so if you need a sampled sound header, you should set that up in a buffer before calling <TT CLASS="cv">SPBRecord</TT> and then record into the buffer following the sound header.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6214"> </A><TT CLASS="cv">completionRoutine</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1188"> </A> A pointer to a completion routine. This routine is called when the recording terminates (either after you call the <TT CLASS="cv">SPBStopRecording</TT> function or when the prescribed limit is reached). The completion routine is called only for asynchronous recording.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6224"> </A><TT CLASS="cv">interruptRoutine</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1189"> </A> A pointer to an interrupt routine. The interrupt routine specified in the <TT CLASS="cv">interruptRoutine</TT> field is called by asynchronous recording devices when their internal buffers are full.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6234"> </A><TT CLASS="cv">userLong</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1190"> </A>A long integer that your application can use to pass data to your application's completion or interrupt routines.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6243"> </A><TT CLASS="cv">error</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1191"> </A>On exit, a value greater than 0 while recording unless an error occurs, in which case it contains a value less than 0 that indicates an operating system error. Your application can poll this field to check on the status of an asynchronous recording. If recording terminates without an error, this field contains 0.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6252"> </A><TT CLASS="cv">unused1</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1192"> </A>Reserved. You should set this field to 0 before calling <TT CLASS="cv">SPBRecord</TT>.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=795"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=796"> </A>The <TT CLASS="cv">SPBRecord</TT> function starts recording into memory from a device specified in a sound input parameter block. The sound data recorded is stored in the buffer specified by the <TT CLASS="cv">bufferPtr</TT> and <TT CLASS="cv">bufferLength</TT> fields of the parameter block. Recording lasts the longer of the times specified by the <TT CLASS="cv">count</TT> and <TT CLASS="cv">milliseconds</TT> fields of the parameter block, or until the buffer is filled. Recording is asynchronous if the <TT CLASS="cv">asynchFlag</TT> parameter is <TT CLASS="cv">TRUE</TT> and the specified sound input device supports asynchronous recording.</P><P CLASS="T1.Text1"><A NAME="pgfId=794"> </A>If the <TT CLASS="cv">bufferPtr</TT> field of the parameter block contains <TT CLASS="cv">NIL</TT>, then the <TT CLASS="cv">count</TT>, <TT CLASS="cv">milliseconds</TT>, and <TT CLASS="cv">bufferLength</TT> fields are ignored, and the recording continues indefinitely until you call the <TT CLASS="cv">SPBStopRecording</TT> function. In this case, the audio data is not saved anywhere; this feature is useful only if you want to do something in your interrupt routine and do not want to save the audio data. However, if the recording is synchronous and <TT CLASS="cv">bufferPtr</TT> is <TT CLASS="cv">NIL</TT>, <TT CLASS="cv">SPBRecord</TT> returns the result code <TT CLASS="cv">siNoBufferSpecified</TT>.</P><P CLASS="T1.Text1"><A NAME="pgfId=800"> </A>The <TT CLASS="cv">SPBRecord</TT> function returns the value that the <TT CLASS="cv">error</TT> field of the parameter block contains when recording finishes.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=797"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=798"> </A>You can call the <TT CLASS="cv">SPBRecord</TT> function at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1180"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1181"> </A>The trap macro and routine selector for the <TT CLASS="cv">SPBRecord</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=792"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=793"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=785"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=786"> </A>$03200014</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=791"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=787"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=788"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=789"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=790"> </A>siNoSoundInHardware</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=803"> </A>-220</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1182"> </A>No sound input hardware available</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1183"> </A>siBadSoundInDevice</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1482"> </A>-221</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1483"> </A>Invalid sound input device</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1484"> </A>siNoBufferSpecified</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1485"> </A>-222</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1486"> </A>No buffer specified</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1487"> </A>siDeviceBusyErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1488"> </A>-227</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1489"> </A>Sound input device is busy</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=804"> </A>SEE ALSO</H3><P CLASS="T0.Text0"><A NAME="pgfId=1401"> </A>For an example of the use of the <TT CLASS="cv">SPBRecord</TT> function, see <A target="doc" HREF="imsoundinput.7.htm#14131" CLASS="XRef">Listing&nbsp;42</A>.<A NAME="marker=245"> </A></P></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=809"> </A>SPBRecordToFile<A NAME="marker=246"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=810"> </A>You can use the <TT CLASS="cv">SPBRecordToFile</TT> function to record audio data into a file, either synchronously or asynchronously.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=13592"> </A>FUNCTION SPBRecordToFile (fRefNum: Integer; inParamPtr: SPBPtr; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asynchFlag: Boolean): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6265"> </A><TT CLASS="cv">fRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=812"> </A>The file reference number of an open file in which to place the recorded sound data.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6274"> </A><TT CLASS="cv">inParamPtr</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=691"> </A> A pointer to a sound input parameter block.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6284"> </A><TT CLASS="cv">asynchFlag</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=813"> </A> A Boolean value that specifies whether the recording occurs asynchronously (<TT CLASS="cv">TRUE</TT>) or synchronously (<TT CLASS="cv">FALSE</TT>).</BLOCKQUOTE><P CLASS="PH.ParamHd"><A NAME="pgfId=1195"> </A><TT CLASS="cv"></TT>&nbsp;</P><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=805"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=806"> </A>inRefNum</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=807"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=808"> </A>A reference number of a sound input device.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=817"> </A>&#180;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=819"> </A>count</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1400"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1490"> </A>The number of bytes of recording.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1491"> </A>&#180;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1492"> </A>milliseconds</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1493"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1494"> </A>The number of milliseconds of recording.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1495"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1496"> </A>completionRoutine</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1497"> </A>ProcPtr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1498"> </A>A pointer to a completion routine.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1499"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1500"> </A>interruptRoutine</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1501"> </A>ProcPtr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1502"> </A>Unused.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1503"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1504"> </A>userLong</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1505"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1506"> </A>Free for application's use.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1507"> </A>&#168;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1508"> </A>error</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1509"> </A>OSErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1510"> </A>The error value returned after recording.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><H6 CLASS="MLSym.MLSymbol"><A NAME="pgfId=1511"> </A>&AElig;</H6></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1512"> </A>unused1</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1513"> </A>LongInt</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1514"> </A>Reserved.</P></TD></TR></TABLE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6294"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=801"> </A>The device reference number of the sound input device, as obtained from the <TT CLASS="cv">SPBOpenDevice</TT> function.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6303"> </A><TT CLASS="cv">count</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1196"> </A>On input, the number of bytes to record. If this field indicates a longer recording time than the <TT CLASS="cv">milliseconds</TT> field, then the <TT CLASS="cv">milliseconds</TT> field is ignored. On output, the number of bytes actually recorded.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6312"> </A><TT CLASS="cv">milliseconds</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=820"> </A>On input, the number of milliseconds to record. If this field indicates a longer recording time than the <TT CLASS="cv">count</TT> field, then the <TT CLASS="cv">count</TT> field is ignored. On output, the number of milliseconds actually recorded.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6321"> </A><TT CLASS="cv">completionRoutine</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=821"> </A> A pointer to a completion routine. This routine is called when the recording terminates (after you call the <TT CLASS="cv">SPBStopRecording</TT> function, when the prescribed limit is reached, or after an error occurs). The completion routine is called only for asynchronous recording.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6331"> </A><TT CLASS="cv">interruptRoutine</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1197"> </A> Unused. You should set this field to <TT CLASS="cv">NIL</TT> before calling <TT CLASS="cv">SPBRecordToFile</TT>.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6341"> </A><TT CLASS="cv">userLong</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1198"> </A>A long integer that your application can use to pass data to your application's completion or interrupt routines.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6350"> </A><TT CLASS="cv">error</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1203"> </A>On exit, the error that occurred during recording. This field contains the number 1 while recording unless an error occurs, in which case it contains a value less than 0 that indicates an operating system error. Your application can poll this field to check on the status of an asynchronous recording. If recording terminates without an error, this field contains 0.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6359"> </A><TT CLASS="cv">unused1</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1204"> </A>Reserved. You should set this field to 0 before calling the <TT CLASS="cv">SPBRecordToFile</TT> function.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=799"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=824"> </A>The <TT CLASS="cv">SPBRecordToFile</TT> function starts recording from the specified device into a file. The sound data recorded is simply stored in the file, so it is up to your application to insert whatever headers are needed to play the sound with the Sound Manager. Your application must open the file specified by the <TT CLASS="cv">fRefNum</TT> parameter with write access before calling <TT CLASS="cv">SPBRecordToFile</TT>, and it must eventually close that file.</P><P CLASS="T1.Text1"><A NAME="pgfId=823"> </A>The fields in the parameter block specified by the <TT CLASS="cv">inParamPtr</TT> parameter are identical to the fields in the parameter block passed to the <TT CLASS="cv">SPBRecord</TT> function, except that the <TT CLASS="cv">bufferLength</TT> and <TT CLASS="cv">bufferPtr</TT> fields are not used. The <TT CLASS="cv">interruptRoutine</TT> field is ignored by <TT CLASS="cv">SPBRecordToFile</TT> because <TT CLASS="cv">SPBRecordToFile</TT> copies data returned by the sound input device driver to disk during the sound input interrupt routine, but you should initialize this field to <TT CLASS="cv">NIL</TT>.</P><P CLASS="T1.Text1"><A NAME="pgfId=825"> </A>The <TT CLASS="cv">SPBRecordToFile</TT> function writes samples to disk in the same format that they are read in from the sound input device. If compression is enabled, then the samples written to the file are compressed. Multiple channels of sound are interleaved on a sample basis (or, for compressed sound data, on a packet basis). When you are recording 8-bit audio data to an <TT CLASS="cv">AIFF</TT> file, you must set the <TT CLASS="cv">siTwosComplementOnOff</TT> flag to so that the data is stored on disk in the two's-complement format. If you don't store the data in this format, it sounds distorted when you play it back.</P><P CLASS="T1.Text1"><A NAME="pgfId=826"> </A>If any errors occur during the file writing process, recording is suspended. All File Manager errors are returned through the function's return value if the routine is called synchronously. If the routine is called asynchronously and the completion routine is not <TT CLASS="cv">NIL</TT>, the completion routine is called and is passed a single parameter on the stack that points to the sound input parameter block; any errors are returned in the <TT CLASS="cv">error</TT> field of the sound input parameter block.</P><P CLASS="T1.Text1"><A NAME="pgfId=1161"> </A>The <TT CLASS="cv">SPBRecordToFile</TT> function returns the value that the <TT CLASS="cv">error</TT> field of the parameter block contains when recording finishes.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1199"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=1201"> </A>Because the <TT CLASS="cv">SPBRecordToFile</TT> function moves or purges memory, you should not call it at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1202"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1205"> </A>The trap macro and routine selector for the <TT CLASS="cv">SPBRecordToFile</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1206"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1207"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=814"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=815"> </A>$04240014</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1194"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=816"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=818"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=822"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=827"> </A>permErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1193"> </A>-54</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1515"> </A>Attempt to open locked file for writing</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1516"> </A>siNoSoundInHardware</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1517"> </A>-220</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1518"> </A>No sound input hardware available</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1519"> </A>siBadSoundInDevice</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1520"> </A>-221</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1521"> </A>Invalid sound input device</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1522"> </A>siHardDriveTooSlow</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1523"> </A>-224</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1524"> </A>Hard drive too slow to record<A NAME="marker=430"> </A><A NAME="marker=338"> </A><A NAME="marker=567"> </A></P></TD></TR></TABLE></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=828"> </A>SPBPauseRecording<A NAME="marker=248"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=835"> </A>You can use the <TT CLASS="cv">SPBPauseRecording</TT> function to pause recording from a sound input device.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=13596"> </A>FUNCTION SPBPauseRecording (inRefNum: LongInt): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6372"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=837"> </A>The device reference number of the sound input device, as obtained from the <TT CLASS="cv">SPBOpenDevice</TT> function.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1208"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=834"> </A>The <TT CLASS="cv">SPBPauseRecording</TT> function pauses recording from the device specified by the&nbsp;<TT CLASS="cv">inRefNum</TT> parameter. The recording must be asynchronous for this call to have any&nbsp;effect.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1209"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=1210"> </A>You can call the <TT CLASS="cv">SPBPauseRecording</TT> function at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1211"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1212"> </A>The trap macro and routine selector for the <TT CLASS="cv">SPBPauseRecording</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1214"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1530"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=841"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=842"> </A>$02280014</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1213"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=829"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=830"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=831"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=832"> </A>siBadSoundInDevice</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=833"> </A>-221</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1525"> </A>Invalid sound input device<A NAME="marker=431"> </A></P></TD></TR></TABLE></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=840"> </A>SPBResumeRecording<A NAME="marker=250"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=843"> </A>You can use the <TT CLASS="cv">SPBResumeRecording</TT> function to resume recording from a sound input device.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=13600"> </A>FUNCTION SPBResumeRecording (inRefNum: LongInt): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6385"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=845"> </A>The device reference number of the sound input device, as obtained from the <TT CLASS="cv">SPBOpenDevice</TT> function.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=846"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1221"> </A>The <TT CLASS="cv">SPBResumeRecording</TT> function resumes recording from the device specified by the <TT CLASS="cv">inRefNum</TT> parameter. Recording on that device must previously have been paused by a call to the <TT CLASS="cv">SPBPauseRecording</TT> function for <TT CLASS="cv">SPBResumeRecording</TT> to have any&nbsp;effect.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1215"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=1216"> </A>You can call the <TT CLASS="cv">SPBResumeRecording</TT> function at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1217"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1218"> </A>The trap macro and routine selector for the <TT CLASS="cv">SPBResumeRecording</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1220"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1532"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=839"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1526"> </A>$022C0014</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1219"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=848"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1527"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1528"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1529"> </A>siBadSoundInDevice</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1531"> </A>-221</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1533"> </A>Invalid sound input device<A NAME="marker=434"> </A></P></TD></TR></TABLE></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=849"> </A>SPBStopRecording<A NAME="marker=252"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=852"> </A>You can use the <TT CLASS="cv">SPBStopRecording</TT> function to end a recording from a sound input device.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=13604"> </A>FUNCTION SPBStopRecording (inRefNum: LongInt): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6398"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=854"> </A>The device reference number of the sound input device, as obtained from the <TT CLASS="cv">SPBOpenDevice</TT> function.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=855"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=856"> </A>The <TT CLASS="cv">SPBStopRecording</TT> function stops recording from the device specified by the <TT CLASS="cv">inRefNum</TT> parameter. The recording must be asynchronous for <TT CLASS="cv">SPBStopRecording</TT> to&nbsp;have any effect. When you call <TT CLASS="cv">SPBStopRecording</TT>, the sound input completion routine specified in the <TT CLASS="cv">completionRoutine</TT> field of the sound input parameter block is called and the <TT CLASS="cv">error</TT> field of that parameter block is set to <TT CLASS="cv">abortErr</TT>. If you are writing a device driver, you will receive a <TT CLASS="cv">KillIO</TT> <TT CLASS="cv">Status</TT> call. See the section <A target="doc" HREF="imsoundinput.b.htm#26409" CLASS="XRef">&quot;Writing a Sound Input Device Driver&quot;</A> for more information.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=597"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=871"> </A>You can call the <TT CLASS="cv">SPBStopRecording</TT> function at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=872"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=873"> </A>The trap macro and routine selector for the <TT CLASS="cv">SPBStopRecording</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1225"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1538"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=850"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=851"> </A>$02300014</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1224"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=857"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1534"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1535"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1536"> </A>siBadSoundInDevice</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1537"> </A>-221</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1539"> </A>Invalid sound input device<A NAME="marker=436"> </A></P></TD></TR></TABLE></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=858"> </A>SPBGetRecordingStatus<A NAME="marker=254"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=861"> </A>You can use <TT CLASS="cv">SPBGetRecordingStatus</TT> to obtain recording status information about a sound input device.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=13608"> </A>FUNCTION SPBGetRecordingStatus (inRefNum: LongInt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR recordingStatus: Integer; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR meterLevel: Integer; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR totalSamplesToRecord: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR numberOfSamplesRecorded: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR totalMsecsToRecord: LongInt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR numberOfMsecsRecorded: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt):<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6411"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=863"> </A>The device reference number of the sound input device, as obtained from the <TT CLASS="cv">SPBOpenDevice</TT> function.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6420"> </A><TT CLASS="cv">recordingStatus</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=864"> </A> The status of the recording. While the input device is recording, this parameter is set to a number greater than 0. When a recording terminates without an error, this parameter is set to 0. When an error occurs during recording or the recording has been terminated by a call to the <TT CLASS="cv">SPBStopRecording</TT> function, this parameter is less than 0 and contains an error code.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6430"> </A><TT CLASS="cv">meterLevel</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=865"> </A> The current input signal level. This level ranges from 0 to 255.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6440"> </A><TT CLASS="cv">totalSamplesToRecord</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=866"> </A> The total number of samples to record, including those samples already&nbsp;recorded.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6450"> </A><TT CLASS="cv">numberOfSamplesRecorded</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=867"> </A> The number of samples already recorded.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6460"> </A><TT CLASS="cv">totalMsecsToRecord</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=868"> </A> The total duration of recording time, including recording time already&nbsp;elapsed.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=6470"> </A><TT CLASS="cv">numberOfMsecsRecorded</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=869"> </A> The amount of recording time that has elapsed.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=870"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1223"> </A>The <TT CLASS="cv">SPBGetRecordingStatus</TT> function returns, in its second through seventh parameters, information about the recording on the device specified by the <TT CLASS="cv">inRefNum</TT> parameter.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1226"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=1227"> </A>You can call the <TT CLASS="cv">SPBGetRecordingStatus</TT> function at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1228"> </A>ASSEMBLY-LANGUAGE INFORMATION</H3><P CLASS="T0.Text0"><A NAME="pgfId=1229"> </A>The trap macro and routine selector for the <TT CLASS="cv">SPBGetRecordingStatus</TT> function are</P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1231"> </A>Trap macro</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=1544"> </A>Selector</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=859"> </A>_SoundDispatch</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=860"> </A>$0E340014</P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1230"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=874"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1540"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1541"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=1542"> </A>siBadSoundInDevice</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=1543"> </A>-221</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=1545"> </A>Invalid sound input device<A NAME="marker=438"> </A></P></TD></TR></TABLE></DIV></DIV><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.18.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.16.htm">Section top</A> | <A target="doc" HREF="imsoundinput.1a.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
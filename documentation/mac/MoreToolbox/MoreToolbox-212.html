<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Responding to Events Affecting a List (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING212></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-211.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-213.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-202.html"><B>Chapter 4 - List Manager</B></A> / <A HREF="MoreToolbox-209.html"><B>Using the List Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING212-0></A>
<H2><A NAME=MARKER-9-159></A>Responding to Events Affecting a List<A NAME=MARKER-2-257></A></H2>
 <A NAME=MARKER-2-274></A>Your application must respond to several different types of events involving a list by calling appropriate List Manager routines. If a mouse-down event occurs in a list, your application should call the <CODE>LClick</CODE> function. If your application receives an update event, and some part of the list is within the update region, then it should call the <CODE>LUpdate</CODE> procedure. If a window containing a list is activated or deactivated, your application should activate or deactivate the list by calling the <CODE>LActivate</CODE> procedure. Finally, if a key-down event occurs, your application may need to call its own internal procedures to scroll the list or select items as necessary. This section explains how to handle mouse-down, update, and activate events; for information on handling key-down events, see <A HREF=MoreToolbox-217.html#MARKER-9-228>"Supporting Keyboard Navigation of Lists" on page 4-36</A>.<P>
 <A NAME=MARKER-2-402></A><A NAME=MARKER-9-10></A>The <CODE>LClick</CODE> function automatically responds to a mouse-down event by handling user interaction until the user releases the mouse button. The List Manager performs any scrolling as necessary and changes the selection as appropriate. After handling the event, the <CODE>LClick</CODE> function returns <CODE>TRUE</CODE> if the click was a double click. <A HREF=#MARKER-9-164>Listing 4-5</A> shows an application-defined procedure that uses the <CODE>LClick</CODE> function to handle mouse-down events in a list.<P>
<B>Listing 4-5  <A NAME=MARKER-9-164></A>Responding to a mouse-down event in a list<A NAME=MARKER-2-165></A></B><P>
<PRE>
PROCEDURE MyHandleMouseDownInList (theEvent: EventRecord; 
                                  theList: ListHandle);
BEGIN
   SetPort(theList^^.port);
   GlobalToLocal(theEvent.where);
   IF LClick(theEvent.where, theEvent.modifiers, theList) THEN
      MyDoubleClick(theList);
END;
</PRE>
 In response to a double click, your application should simulate the selection of the default button if there is one. If your dialog box does not contain a default button, then your application can respond to a double click with some other appropriate behavior.<A NAME=MARKER-9-176></A><A NAME=MARKER-2-167></A><P>
 <A NAME=MARKER-2-168></A><A NAME=MARKER-2-177></A><A HREF=#MARKER-9-170>Listing 4-6</A> illustrates an application-defined procedure that responds to an update event affecting a list.<P>
<B>Listing 4-6  <A NAME=MARKER-9-170></A>Responding to an update event in a list<A NAME=MARKER-2-171></A></B><P>
<PRE>
PROCEDURE MyUpdateList (theList: ListHandle); 
BEGIN
   SetPort(theList^^.port);      {set up the drawing environment}
                                 {update list and scroll bars}
   LUpdate(theList^^.port^.visRgn, theList); 
   MyDrawListBorder(theList);    {draw border around list}
END;
</PRE>
 Your list update procedure might also do some other drawing appropriate to a <BR>particular list. For example, if your application supports multiple lists in a window, then your list-updating procedure should redraw an outline around the current list in response to an update event. For more information on outlining the current list, see <A HREF=MoreToolbox-466.html#MARKER-9-312>"Outlining the Current List" on page 4-44</A>.<A NAME=MARKER-9-182></A><P>
 Note that the call to the <CODE>LUpdate</CODE> procedure must be bracketed by calls to the <BR>Window Manager's <CODE>BeginUpdate</CODE> and <CODE>EndUpdate</CODE> procedures. See the <BR>chapter "Window Manager" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for more information.<A NAME=MARKER-2-371></A><A NAME=MARKER-9-105></A><P>
 <A NAME=MARKER-2-175></A>In response to an activate event, your application should call <CODE>LActivate</CODE> for each list in the window. For example, this code deactivates a list:<P>
<PRE>
LActivate (FALSE, myList);
</PRE>
 To activate a list, pass <CODE>TRUE</CODE> as the first parameter to <CODE>LActivate</CODE>.<A NAME=MARKER-2-50></A><A NAME=MARKER-2-260></A><A NAME=MARKER-2-179></A><A NAME=MARKER-2-36></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-211.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-213.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

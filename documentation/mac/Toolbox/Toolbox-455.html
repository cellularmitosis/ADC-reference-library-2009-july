<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Using Finder Information in the Catalog File(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING455></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-454.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-456.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-443.html"><B>Chapter 7 - Finder Interface</B></A> / <A HREF="Toolbox-446.html"><B>Using the Finder Interface</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING455-0></A>
<H2><A NAME=MARKER-9-356></A>Using Finder Information in the Catalog File</H2>
 <A NAME=MARKER-9-264></A><A NAME=MARKER-2-359></A>A catalog file exists on every volume to maintain relationships between the files and directories on that volume. (A volume is any storage medium formatted to contain files.) Although it's used mostly by the File Manager, the catalog file also contains information used by the Finder. The information for files is listed in file information records (data structures of type <CODE>FInfo</CODE>) and in extended file information records (data structures of type <CODE>FXInfo</CODE>). The information for directories is listed in directory information (<CODE>DInfo</CODE>) records and in extended (<CODE>DXInfo</CODE>) directory information records.<P>
<B>Figure 7-13  <A NAME=MARKER-9-360></A><A NAME=MARKER-21-361></A>The version data in the information window</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/FI-SL-06.jpg"><P>
 The Finder manipulates the fields in the file information, directory information, and extended directory information records; your application shouldn't have to directly check or set any of these fields.<P>
 Normally, your application sets the file type and the creator information in fields of the file's file information record when your application creates a new file; for example, the File Manager function <CODE>FSpCreate</CODE> (described in <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I>) takes a creator and a file type as parameters. The Finder manipulates the other fields in the file information record, which is shown here:<A NAME=MARKER-9-250></A><P>
<PRE>
TYPE  FInfo =
      RECORD
         fdType:     OSType;     {file type}
         fdCreator:  OSType;     {file creator}
         fdFlags:    Integer;    {Finder flags}
         fdLocation: Point;      {file's location in window}
         fdFldr:     Integer;    {directory that contains file}
      END;
</PRE>
 After you have created a file, you can use the File Manager function <CODE>FSpGetFInfo</CODE> to return the file information record, then change the <CODE>fdType</CODE> and <CODE>fdCreator</CODE> fields by using the File Manager function <CODE>FSpSetFInfo</CODE>.<P>
 You can check the information in this record by calling the File Manager function <CODE>FSpGetFInfo</CODE> or <CODE>PBGetCatInfo</CODE>. In particular, you may want to check the file type <BR>or creator for a file, or you may want to check or set one of your document's Finder flags. See <A HREF=Toolbox-464.html#MARKER-9-493>"File Information Record" beginning on page 7-44</A> for a list of all the Finder flags. The only Finder flags you might ever want to set are described here:<A NAME=MARKER-9-127></A><A NAME=MARKER-9-275></A><A NAME=MARKER-2-369></A><A NAME=MARKER-9-277></A>   <P>
<UL>
<LI><CODE>isInvisible</CODE>. This flag specifies that a file is invisible from the Finder and from the Standard File Package dialog boxes. Making a file invisible is generally not recommended. Not even temporary files need to be invisible because the Temporary Items folder into which they should be written is invisible. The Temporary Items folder is described in <A HREF=Toolbox-460.html#MARKER-9-442>"Using the System Folder and Its Related Directories" beginning on page 7-39</A>.<A NAME=MARKER-2-372></A>
<LI><CODE>hasBundle</CODE>. This flag specifies that a file has a bundle resource that associates the file with your own icons. When the Finder displays or manipulates a file, it checks the file's <CODE>hasBundle</CODE> bit (also called the <B>bundle bit</B>). If that bit is not set, the Finder displays a default icon for that file type. If the <CODE>hasBundle</CODE> bit is set, the Finder checks the <CODE>hasBeenInited</CODE> bit. If the <CODE>hasBeenInited</CODE> bit is set, the Finder uses the information in the desktop database to display that file's icon. If the <CODE>hasBeenInited</CODE> bit is not set, the Finder installs the information from the bundle resource in the desktop database and sets the <CODE>hasBeenInited</CODE> bit. Most development environments provide a simple tool for setting the bundle bit when you create your application.<A NAME=MARKER-2-373></A><A NAME=MARKER-2-374></A>
<LI><CODE>nameLocked</CODE>. This flag specifies that a file cannot be renamed from the Finder and that the file cannot have customized icons assigned to it by users.<A NAME=MARKER-2-375></A>
<LI><CODE>isStationery</CODE>. This flag specifies that a file is a stationery pad. To support <BR>stationery pads, your application should check this bit for every document passed to it by either the Finder or the Standard File Package. (The File Manager functions <CODE>StandardGetFile</CODE> and <CODE>CustomGetFile</CODE> return this flag in the <CODE>sfFlags</CODE> field of the standard file reply record.) If the <CODE>isStationery</CODE> bit is set for a file that a user wants to open, your application should copy the template's contents into a new document and open the document in an untitled window. Stationery pads are described in the next section.<A NAME=MARKER-2-376></A>
<LI><CODE>isShared</CODE>. This flag specifies that a file is an application that multiple users on a network can execute simultaneously.<A NAME=MARKER-2-377></A>
<LI><CODE>hasCustomIcon</CODE>. This flag specifies that a file has a customized icon. <A HREF=Toolbox-449.html#MARKER-9-213>"Creating Customized Document Icons" beginning on page 7-16</A> explains how users or your application can use customized icons.<A NAME=MARKER-2-378></A><A NAME=MARKER-2-10></A><A NAME=MARKER-2-170></A><A NAME=MARKER-2-381></A><A NAME=MARKER-2-382></A><P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-454.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-456.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

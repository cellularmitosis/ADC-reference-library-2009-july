<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>How the Font Manager Calculates Glyph Widths(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING197></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-196.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-198.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-181.html"><B>Chapter 4 - Font Manager</B></A> / <A HREF="Text-193.html"><B>About the Font Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING197-0></A>
<H2><A NAME=MARKER-9-170></A>How the Font Manager Calculates Glyph Widths</H2>
 <A NAME=MARKER-2-596></A><A NAME=MARKER-21-98></A>Integer glyph widths are measurements of a glyph's width that are in whole pixels. Fractional glyph widths are measurements that can include fractions of a pixel. For instance, instead of a glyph measuring exactly 5 pixels across, it may be 5.5 pixels across. Fractional glyph widths allow the sizes of glyphs as stored by the Font Manager to be closer in proportion to the original glyphs of the font than integer widths allow. Fractional widths also make it possible for high-resolution printers to print with better spacing.<P>
 You can enable or disable the use of fractional glyph widths in your application, as described in <A HREF=Text-208.html#MARKER-9-282>"Using Fractional Glyph Widths and Font Scaling" on page 4-34</A>. As a default, fractional widths are disabled to retain compatibility with older applications.<P>
 When using fractional glyph widths, the Font Manager stores the locations of glyphs more accurately than any actual screen can display: since screen glyphs are made up of whole pixels, QuickDraw cannot draw a glyph that is 5.5 pixels wide. The placement of glyphs on the screen matches the eventual placement of glyphs on a page printed by the high-resolution printers more closely, but the spacing between glyphs and words is uneven as QuickDraw rounds off the fractional parts. The extent of the distortion that is visible on the screen depends on the font point size relative to the resolution of the screen. <P>
 The Font Manager communicates fractional glyph widths to QuickDraw through the <B>global width table,</B> which is a data structure that is allocated in the system heap. The Font Manager fills in this table by accessing data from one of several places<A NAME=MARKER-2-45></A>:<A NAME=MARKER-2-174></A><P>
<UL>
<LI>Integer glyph widths are taken from the width/offset table of the bitmapped font resource and the horizontal device metrics table of the outline font resource.<A NAME=MARKER-2-175></A>
<LI>Fractional glyph widths are taken from the glyph-width table in the bitmapped font resource, the horizontal metrics table in the outline font resource, and the family glyph-width table in the font family resource.<P>
</UL>
 The Font Manager looks for width data in the following sequence:<P>
<OL>
<LI>For a bitmapped font, it first looks for a font glyph-width table in the font record, which is the record used to represent in memory the data in a bitmapped font resource. For an outline font, it first looks for data in the horizontal metrics table. The width table for bitmapped fonts is described in the section <A HREF=Text-250.html#MARKER-9-414>"The Bitmapped Font ('NFNT') Resource,"</A> which begins on <A HREF=Text-250.html#MARKER-9-414>page 4-62</A>. The width table for outline fonts is described in <A HREF=Text-259.html#MARKER-9-486>"The Horizontal Device Metrics Table" on page 4-74</A>.
<LI>If it doesn't find this table, the Font Manager looks in the font family record for a family glyph-width table. The font family record is used to represent in memory the data in a font family resource. This is described in <A HREF=Text-274.html#MARKER-9-563>"The Family Glyph-Width Table" on page 4-92</A>.<A NAME=MARKER-2-832></A>
<LI>If the Font Manager doesn't find a family glyph-width table, it derives the global character widths from the integer widths contained in the width/offset table in the bitmapped font record, as described in <A HREF=Text-250.html#MARKER-9-414>"The Bitmapped Font ('NFNT') Resource" on page 4-62</A>.<P>
</OL>
<DL>
<DT><B>Note</B>
<DD>If you need to use different widths than those returned by the global width table, you should change the values in the global width table only. You should never change any values in the font resources themselves.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 To use fractional glyph widths effectively, your application must get accurate widths when laying out text. Your application should obtain glyph widths either from the QuickDraw procedure <CODE>MeasureText</CODE> or by looking in the global width table. The <CODE>MeasureText</CODE> procedure is described in the chapter "QuickDraw Text" in this book. You can get a handle to the global width table by calling the <CODE>FontMetrics</CODE> procedure, which is described on <A HREF=Text-232.html#MARKER-9-365>page 4-50</A>.<A NAME=MARKER-2-100></A> <A NAME=MARKER-2-178></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-196.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-198.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

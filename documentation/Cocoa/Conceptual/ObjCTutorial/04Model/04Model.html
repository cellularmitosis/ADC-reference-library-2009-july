<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Application Tutorial: Defining the Model</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Defining the Model"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000863-CH6" title="Defining the Model"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../ObjectiveCLanguage-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000856" target="_top">Objective-C Language</a> &gt; <a href="../01Introduction/01Introduction.html#//apple_ref/doc/uid/TP40000863-CH13-DontLinkElementID_3">Cocoa Application Tutorial</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../03Project/03Project.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../05View/05View.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000863-CH6-SW2" title="Defining the Model"></a><h1>Defining the Model</h1><p>Model objects contain special knowledge and expertise. They hold data and define the logic that manipulates that data. For example, a customer object, common in business applications, is a model object. In Currency Converter, the model class you’re going to create is the converter class. In the MVC design pattern, instances of a model class do not communicate directly with the user interface.</p><p>In this chapter, you will create the model for your application. First, you will learn how to create a new class in Xcode. Then, you will define the interface for your model before implementing it. Finally, you will implement the entire functionality of the class. In the process, you will learn some of the syntax of Objective-C, including how to declare variables and methods. You will also be introduced to the concept of declared properties—a feature in Objective-C 2.0 that makes writing accessor methods incredibly quick and simple.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="04Model.html#//apple_ref/doc/uid/TP40000863-CH6-SW4">Specify the Model Class</a>
				
			<br/>
			
        
			
			
				<a href="04Model.html#//apple_ref/doc/uid/TP40000863-CH6-SW5">Declare the Model Interface</a>
				
			<br/>
			
        
			
			
				<a href="04Model.html#//apple_ref/doc/uid/TP40000863-CH6-SW9">Implementing the Model</a>
				
			<br/>
			
        
			
			
				<a href="04Model.html#//apple_ref/doc/uid/TP40000863-CH6-SW11">What’s Next?</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000863-CH6-SW4" title="Specify the Model Class"></a><h2>Specify the Model Class</h2><ol class="ol"><li class="li"><p>Select the Classes group in the Groups &amp; Files list.</p></li><li class="li"><p>Choose File > New File.</p></li><li class="li"><p>Choose to create a new Objective-C Class and name it <code>Converter</code>.</p></li><li class="li"><p>In Xcode, select both <code>Converter.h</code> and <code>Converter.m</code> by holding down command and clicking on each.</p></li><li class="li"><p>Click-and-drag both files into the Classes group in the Groups &amp; Files list.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40000863-CH6-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;Organizing your project files in the various groups in the Groups &amp; Files list is simply good practice. The default location for all .h and .m files is the Other Sources group in the Groups &amp; Files list. It is a good idea to separate classes from non-classes (like <code>main.m</code>), especially in larger projects. However, the organization of your project makes no difference to the compiler.</p></div></li></ol><a name="//apple_ref/doc/uid/TP40000863-CH6-SW5" title="Declare the Model Interface"></a><h2>Declare the Model Interface</h2><p>The model for the Currency Converter is a simple class that encapsulates two variables: the amount in US dollars and the exchange rate. The model’s job is to multiply these two numbers and return the result. This means the model needs:</p><ul class="ul"><li class="li"><p>One class: Converter</p></li><li class="li"><p>Two variables of type <code>float</code>: <code>sourceCurrencyAmount</code> and <code>rate</code></p></li><li class="li"><p>One method: <code>(float)convertCurrency</code></p></li></ul><a name="//apple_ref/doc/uid/TP40000863-CH6-SW6" title="Declare Member Variables"></a><h3>Declare Member Variables</h3><p>The two variables are defined between the braces of the converter class. Define the variables: </p><ol class="ol"><li class="li"><p>If <code>Converter.h</code> is not already open for editing, double-click <code>Converter.h</code> in the Classes group of the Groups &amp; Files menu. This opens the file in an editor window.</p></li><li class="li"><p>Insert the highlighted line in <span class="content_text">Listing 3-1</span> into <code>Converter.h</code></p></li></ol><a name="//apple_ref/doc/uid/TP40000863-CH6-SW3" title="Listing 3-1Declaration of the member variables in Converter.h"></a><p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong>Declaration of the member variables in <code>Converter.h</code></p><div class="codesample"><table><tr><td scope="row"><pre>#import &lt;Cocoa/Cocoa.h><span></span></pre></td></tr><tr><td scope="row"><pre>@interface Converter : NSObject {<span></span></pre></td></tr><tr><td scope="row"><pre class="bold">    float sourceCurrencyAmount, rate;</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40000863-CH6-SW7" title="Declared Properties and Accessor Methods"></a><h3>Declared Properties and Accessor Methods</h3><p>Objects encapsulate data, as explained in <span class="content_text"><a href="../02Essence/02Essence.html#//apple_ref/doc/uid/TP40000863-CH3-SW3">“Classes and Objects.”</a></span> The scope of variables in an object is limited to that particular object—that is, the instance of that class. One instance of a customer class, for example, can only see its own data, not the data of any customer object. But say a specific customer needs to compare itself with another customer. In order for this to be possible, classes supply <strong>accessor methods</strong> to read and write to the data an object encapsulates. This gives the classes the discretion of what data they wish to share. For example, if a specific class does not want to share certain variables it encapsulates with another class, and only wants to use them for internal use, it can simply not have accessor methods for that variable. This is also true if a class wants external entities to have read-only access to its variables. In that case, a class will have methods that get values, but no methods that set values.</p><p>Objective-C 2.0 provides a feature called <strong>declared properties</strong>. A property declaration is, effectively, a shorthand for declaring the setter and getter for an attribute of an instance of a class. In addition to the declaration itself, there are directives to instruct the compiler to synthesize the accessors and to inform the compiler that you will provide the methods yourself at runtime. There are two parts to a property, its declaration and its implementation.</p><p>You declare a property as follows:</p><p><code>@property(attributes) Type variableNameList;</code></p><p>where <em>attributes</em> is a comma-separated list of keywords such as <code>readwrite</code> and <code>copy</code>, for example:</p><p><code>@property(copy) NSString *name;</code></p><p>For the purposes of Currency Converter, add the following line after the closing brace of the converter class in <code>Converter.h</code>:</p><div class="codesample"><table><tr><td scope="row"><pre class="bold">@property(readwrite) float sourceCurrencyAmount, rate;</pre><pre><span></span></pre></td></tr></table></div><p>At compile time, the compiler treats this as if you had declared the following methods:</p><div class="codesample"><table><tr><td scope="row"><pre>- (float)sourceCurrencyAmount;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)setSourceCurrencyAmount:(float)newSourceCurrencyAmount;<span></span></pre></td></tr><tr><td scope="row"><pre>- (float)rate;<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)setRate:(float)newRate;<span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40000863-CH6-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;Objective-C 2.0 features are not compatible with a system running any operating system prior to Mac OS X 10.5. If you are on Mac OS X 10.4 or below, you must declare these methods manually.</p></div><p>There is currently no implementation for these methods. In the next section, you will implement the methods.</p><a name="//apple_ref/doc/uid/TP40000863-CH6-SW8" title="Declare the Model Method: convertCurrency"></a><h3>Declare the Model Method: convertCurrency</h3><p>The one method the model requires is a simple function to multiply two the two values encapsulated by the converter class.</p><p>Add the following line as the next line of code in <code>Converter.h</code>:</p><div class="codesample"><table><tr><td scope="row"><pre class="bold">- (float)convertCurrency;</pre><pre><span></span></pre></td></tr></table></div><p>Although this method takes no arguments, it multiplies two values that are not passed to the method, nor are they instantiated in the method. This is possible because the method is part of the converter class, and it has access to the converter class’s member variables. It gets to treat those variables as if they were already defined as local variables. It is common practice to use accessor methods even when the variable is in scope, but for this application you will access them using the command <code>self.variableName</code> (where <code>self</code> is a keyword that is a pointer to the current instance of the object). In the next section, you will define the behavior of the converter and get to see how this works.</p><a name="//apple_ref/doc/uid/TP40000863-CH6-SW9" title="Implementing the Model"></a><h2>Implementing the Model</h2><p>Now it’s time to define the behavior of the functions you declared in <code>Converter.h</code>. </p><ol class="ol"><li class="li"><p>In the Classes group of the Groups &amp; Files menu, double-click <code>Converter.m</code> to open the file for editing.</p></li><li class="li"><p>Create the getters and setters for the two member variables—<code>sourceCurrencyAmount</code> and <code>rate</code>.</p><p>Remember you used <code>@property</code> to create the prototypes for the getter and setter methods in <code>Converter.h</code>. If you provide a getter and setter (or just a getter in the case of a read-only property) method implementation for a property, you don’t need to do anything more. Commonly, however, you use the <code>@synthesize</code> directive in <code>@implementation</code> blocks to trigger the compiler to generate accessor methods for you.</p><p>Add the following line into <code>Converter.m</code> after the <code>@implementation Converter</code> line:</p><div class="codesample"><table><tr><td scope="row"><pre class="bold">@synthesize sourceCurrencyAmount, rate;</pre><pre><span></span></pre></td></tr></table></div><p>This line defines the body of the getter and setter methods for the variables <code>sourceCurrencyAmount</code> and <code>rate</code> based on the properties you set in the <code>Converter.h</code> file.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40000863-CH6-DontLinkElementID_6" title="Note"></a><p><strong>Note:</strong>&nbsp;For more information on properties and the various options available, read “Properties” in <em><a href="../../ObjectiveC/index.html#//apple_ref/doc/uid/TP30001163" target="_top">The Objective-C 2.0 Programming Language</a></em>.</p></div></li></ol><a name="//apple_ref/doc/uid/TP40000863-CH6-SW10" title="Define the convertCurrency Method"></a><h3>Define the convertCurrency Method</h3><p>Insert the highlighted lines in <span class="content_text">Listing 3-2</span> into <code>Converter.m</code>.</p><a name="//apple_ref/doc/uid/TP40000863-CH6-SW1" title="Listing 3-2Definition of the convertCurrency method in Converter.m"></a><p class="codesample"><strong>Listing 3-2&nbsp;&nbsp;</strong>Definition of the <code>convertCurrency</code> method in <code>Converter.m</code></p><div class="codesample"><table><tr><td scope="row"><pre>#import "Converter.h"<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@implementation Converter<span></span></pre></td></tr><tr><td scope="row"><pre>@synthesize sourceCurrencyAmount, rate;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre class="bold">- (float)convertCurrency {</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">    return self.sourceCurrencyAmount * self.rate;</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre class="bold">}</pre><pre><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>The <code>convertCurrency</code> method multiplies the values of the converter class’s two member variables and returns the result.</p><a name="//apple_ref/doc/uid/TP40000863-CH6-SW11" title="What&acirc;&#128;&#153;s Next?"></a><h2>What’s Next?</h2><p>You just defined and implemented the basic functionality of your application by creating the model. In the next chapter, you will create the view, which is the user interface for the application.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../03Project/03Project.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../05View/05View.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/ObjCTutorial/04Model/04Model.html%3Fid%3DTP40000863-5.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/ObjCTutorial/04Model/04Model.html%3Fid%3DTP40000863-5.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/ObjCTutorial/04Model/04Model.html%3Fid%3DTP40000863-5.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Resources (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING400></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-399.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-401.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-333.html"><B>Chapter 6 - Component Manager</B></A> / <A HREF="MoreToolbox-346.html"><B>Component Manager Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING400-0></A>
<H2><A NAME=MARKER-9-391></A><A NAME=MARKER-21-438></A><A NAME=MARKER-9-393></A><A NAME=MARKER-21-394></A>Resources</H2>
 <A NAME=MARKER-2-395></A>This section describes the resource you use to define your component. If you are developing a component, you should be familiar with the format and content of a component resource.<P>
<A NAME=HEADING400-2></A>
<H3><A NAME=MARKER-9-396></A><A NAME=MARKER-21-397></A>The Component Resource </H3>
 <A NAME=MARKER-2-217></A><A NAME=MARKER-2-252></A><A NAME=MARKER-9-89></A>A component resource (a resource of type <CODE>'thng'</CODE>) stores all of the information about a component in a single file. The component resource contains all the information needed to register a code resource as a component. Information in the component resource tells the Component Manager where to find the code for the component.<P>
 If you are developing an application that uses components, you do not need to know about component resources.<P>
 <A NAME=MARKER-2-64></A>If you are developing a component or an application that registers components, you should be familiar with component resources. The Component Manager automatically registers any components that are stored in component files in the Extensions folder. The file type for component files must be set to <CODE>'thng'</CODE>. If you store your component in a component file in the Extensions folder, you do not need to create an application to register the component.<P>
 The Component Manager provides routines that register components. The <CODE>RegisterComponent</CODE> function registers components that are not stored in resource files. The <CODE>RegisterComponentResource</CODE> and <CODE>RegisterComponentResourceFile</CODE> functions register components that are stored as component resources in a component file. If you are developing an application that registers components, you should use the routine that is appropriate to the storage format of the component. For more information about how your application can register components, see <A HREF=MoreToolbox-367.html#MARKER-9-276>"Registering Components" beginning on page 6-55</A>.<P>
 This section describes the component resource, which must be provided by all components stored in a component file. Applications that register a component using the <CODE>RegisterComponent</CODE> function must also provide the same information as that contained in a component resource.<A NAME=MARKER-9-65></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>For compatibility with early versions of the Component Manager, a component resource must be locked.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 <A NAME=MARKER-21-146></A>The <CODE>ComponentResource</CODE> data type defines the structure of a component resource. (You can also optionally append to the end of this structure the information defined by the <CODE>ComponentResourceExtension</CODE> data type, as shown in <A HREF=#MARKER-9-412>Figure 6-5 on page 6-81</A>.)<P>
<PRE>
ComponentResource = 
   RECORD
      cd:                           {registration information}
                     ComponentDescription;
      component:     ResourceSpec;  {code resource}
      componentName: ResourceSpec;  {name string resource}
      componentInfo: ResourceSpec;  {info string resource}
      componentIcon: ResourceSpec;  {icon resource}
   END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>cd</CODE>
<DD> A component description record that specifies the characteristics of the component. For a complete description of this record, see <A HREF=MoreToolbox-365.html#MARKER-9-246>page 6-50</A>.
<DT><CODE><A NAME=MARKER-9-155></A>component</CODE> 
<DD> A resource specification record that specifies the type and ID of the component code resource. The <CODE>resType</CODE> field of the resource specification record may contain any value. The component's main entry point must be at offset 0 in the resource.
<DT><CODE><A NAME=MARKER-2-6></A>componentName</CODE>
<DD> A resource specification record that specifies the resource type and ID for the name of the component. This is a Pascal string. Typically, the component name is stored in a resource of type <CODE>'STR '</CODE>. 
<DT><CODE><A NAME=MARKER-2-406></A>componentInfo</CODE>
<DD> A resource specification record that specifies the resource type and ID for the information string that describes the component. This is a Pascal string. Typically, the information string is stored in a resource of type <CODE>'STR '</CODE>. You might use the information stored in this resource in a Get Info dialog box. 
<DT><CODE>componentIcon</CODE>
<DD> A resource specification record that specifies the resource type and ID for the icon for a component. Component icons are stored as 32-by-32 bit maps. Typically, the icon is stored in a resource of type <CODE>'ICON'</CODE>. Note that this icon is not used by the Finder; you supply an icon only so that other components or applications can display your component's icon in a dialog box if needed. <A NAME=MARKER-2-408></A>
</DL>
 <A NAME=MARKER-9-37></A>A resource specification record, defined by the data type <CODE>ResourceSpec</CODE>, describes the resource type and resource ID of the component's code, name, information string, or icon. The resources specified by the resource specification records must reside in the same resource file as the component resource itself.<P>
<PRE>
ResourceSpec = 
   RECORD
      resType:       OSType;        {resource type}
      resId:         Integer;       {resource ID}
   END;
</PRE>
 You can optionally include in your component resource the information defined by the <CODE>ComponentResourceExtension</CODE> data type:<P>
<PRE>
ComponentResourceExtension = 
   RECORD
      componentVersion:       LongInt; {version of component}
      componentRegisterFlags: LongInt; {additional flags}
      componentIconFamily:    Integer; {resource ID of icon }
                                       { family}
   END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>componentVersion</CODE>
<DD> <BR>The version number of the component. If you specify the <CODE>componentDoAutoVersion</CODE> flag in <CODE>componentRegisterFlags</CODE>, the Component Manager must obtain the version number of your component when your component is registered. Either you can provide a version number in your component's resource, or you can specify a value of 0 for its version number. If you specify 0, the Component Manager sends your component a version request to get the version number of your component.
<DT><CODE>componentRegisterFlags</CODE>
<DD> A set of flags containing additional registration information. You can use these constants as flags:
</DL>
<PRE>
               CONST
                  componentDoAutoVersion           = 1;
                  componentWantsUnregister         = 2;
                  componentAutoVersionIncludeFlags = 4;
</PRE>
<DL>
<DT>
<DD> Specify the <CODE>componentDoAutoVersion</CODE> flag if you want the Component Manager to resolve conflicts between different versions of the same component. If you specify this flag, the Component Manager registers your component only if there is no later version available. If an older version is already registered, the Component Manager unregisters it. If a newer version of the same component is registered after yours, the Component Manager automatically unregisters your component. You can use this automatic version control feature to make sure that the most recent version of your component is registered, regardless of the number of versions that are installed.
<DT>
<DD> Specify the <CODE>componentWantsUnregister</CODE> flag if you want your component to receive an unregister request when it is unregistered. 
<DT>
<DD> Specify the flag <CODE>componentAutoVersionIncludeFlags</CODE> if you want the Component Manager to include the <CODE>componentFlags</CODE> field of the component description record when it searches for identical components in the process of performing automatic version control for your component. If you do not specify this flag, the Component Manager searches only the <CODE>componentType</CODE>, <CODE>componentSubType</CODE>, and <CODE>componentManufacturer</CODE> fields.
<DT>
<DD> When the Component Manager performs automatic version control for your component, it searches for components with identical values in the <CODE>componentType</CODE>, <CODE>componentSubType</CODE>, and <CODE>componentManufacturer</CODE> fields (and optionally, in <BR>the <CODE>componentFlags</CODE> field). If it finds a matching component, it compares version numbers and registers the most recent version of the component. Note that the setting of the <CODE>componentAutoVersionIncludeFlags</CODE> flag affects automatic version control only and does not affect the search operations performed by <CODE>FindNextComponent</CODE> and <CODE>CountComponents</CODE>.
<DT><CODE>componentIconFamily</CODE>
<DD> The resource ID of an icon family. You can provide an icon family in addition to the icon provided in the <CODE>componentIcon</CODE> field. Note that members of this icon family are not used by the Finder; you supply an icon family only so that other components or applications can display your component's icon in a dialog box if needed.
</DL>
 <A NAME=MARKER-2-2></A>You store a component resource, along with other resources for the component, in the resource fork of a component file. <A HREF=#MARKER-9-410>Figure 6-4</A> shows the structure of a component file.<P>
<B>Figure 6-4  <A NAME=MARKER-9-410></A>Format of a component file<A NAME=MARKER-2-3></A></B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CM-L-03.jpg">
 You can also store other resources for your component in your component file. For example, you should include <CODE>'FREF'</CODE>, <CODE>'BNDL'</CODE>, and icon family resources so that the Finder can associate the icon identifying your component with your component file. When designing the icon for your component file, you should follow the same guidelines as those for system extension icons. See <I>Macintosh Human Interface Guidelines</I> for information on designing an icon. See the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for information on the <CODE>'FREF'</CODE>and <CODE>'BNDL'</CODE> resources.<P>
 <A HREF=#MARKER-9-412>Figure 6-5</A> shows the structure of a component resource.<P>
<B>Figure 6-5  <A NAME=MARKER-9-412></A>Structure of a compiled component (<CODE>'thng'</CODE>) resource<A NAME=MARKER-9-359></A><A NAME=MARKER-9-12></A><A NAME=MARKER-2-10></A><A NAME=MARKER-9-220></A><A NAME=MARKER-2-223></A></B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/CM-L-04.jpg">

</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-399.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-401.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

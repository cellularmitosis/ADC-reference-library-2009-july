<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><!-- Template 03-24-01 --><!--Includes revisions to code listings--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN1006: A Technique for Figuring Out a Resource's Base Value</title>    <meta name="keywords" content="Mac OS 8 Resource Manager base value GetResBase">    <meta name="Description" content="Technical Note TN1006: This Technical Note details how tofigure out a resource's base value in C, Pascal, or ASM."><meta name="categories" content="Runtime Architecture"><meta name="week-posted" content="Sep 25, 1995 - Oct 6, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002849" title="A Technique for Figuring Out a Resource's Base Value"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxTools-date.html">Tools</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Java/idxTools-date.html" target="_blank">Reference Library > Tools</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1006</div>
<div id="pageheadsub">A Technique for Figuring Out a Resource's Base Value</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">         <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <BR>                            <BR>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc --><p id="menutext"><A HREF = "#RTFToC1">A Shortcut for Figuring Out a Resource's Base Value</a><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Changes">Change History</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                 <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">In the chapter on the Resource Manager in <a href="http://developer.apple.com/documentation/mac/MoreToolbox/MoreToolbox-9.html#HEADING9-0"><cite>Inside Macintosh: More Macintosh Toolbox</cite></A>, owned resources are explained, but the chapterdoes not include a sample of how to actually figure out the resource's basevalue. This Technote includes a shortcut in C, Pascal and ASM toaccomplish this task.</p><p id="introtext">This Technote is specifically aimed at those developers who need to knowabout a resource's ownership, such as developers working on DeskAccessories or Control Panels.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>&nbsp;[Oct 1 1995]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>                   <!-- begin_content --><a name="RTFToC1"></a><h2>A Shortcut for Figuring Out a Resource's Base Value</h2><P>The function <code>GetResBase</code> takes the driver number and returnsthe ID of the first resource owned by that driver. This is according to the private resource numbering conventiondocumented in the Resource Manager chapter on page 1-48 of <a href="http://developer.apple.com/documentation/mac/MoreToolbox/MoreToolbox-28.html#HEADING28-0"><cite>Inside Macintosh: More Macintosh Toolbox</cite></A>.</p><P>In C, you can use this macro:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>#define GetResBase(id) (0xC000 | (((-(id)) - 1) &lt;&lt; 5))</pre>	</TD></TR></TABLE></CENTER><P>and in Pascal, you can use this function:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>function GetResBase(resID: integer):integer;begin    GetResBase := BOR($C000, BSL(longint(((-resID)-1)),5));end;</pre>	</TD></TR></TABLE></CENTER><P>and for those who still program in 68k asm, you can use this function:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>   ;FUNCTION GetResBase(driverNumber: INTEGER): INTEGER;    ;    GetResBase  FUNC        MOVE.L  (SP)+,A0    ; Get return address        MOVE.W  (SP)+,D0    ; Get driver number        NOT.W   D0          ; Change to unit number        ASL.W   #5,D0       ; Move it over in the word        ORI.W   #$C000,D0   ; Add the magic bits        MOVE.W  D0,(SP)     ; Return function result        JMP (A0)            ; and return        END</pre>	</TD></TR></TABLE></CENTER><BR><a name="References"></a><h2>References</h2><p><a href="http://developer.apple.com/documentation/mac/MoreToolbox/MoreToolbox-28.html#HEADING28-0"><cite>Inside Macintosh: More Macintosh Toolbox</cite></A>, The Resource Manager, 1-48</p><P><A HREF="#top">Back to top</A></P><a name="Changes"></a><H2>Change History</h2><TABLE BORDER=0 CELLPADDING=3 WIDTH=544>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-May-1986</P>               </TD>               <td align="left">                  <P>Originally written.</P>               </TD>            </TR>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-October-1995</P>               </TD>               <td align="left">                  <P>Revised to include Pascal and Cversions of the shortcut.</P>               </TD>            </TR>            </table>           <P><A HREF="#top">Back to top</A></P>                           <A NAME=Downloads></A>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (52K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn1006.pdf">Download</A></P>               </TD>            </TR>         </TABLE>         <BR><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1006.html%3Fid%3DDTS10002849-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1006.html%3Fid%3DDTS10002849-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1006.html%3Fid%3DDTS10002849-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
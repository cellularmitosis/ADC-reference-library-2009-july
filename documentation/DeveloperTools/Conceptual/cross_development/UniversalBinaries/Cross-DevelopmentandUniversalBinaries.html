<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cross-Development Programming Guide: Cross-Development and Universal Binaries</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Cross-Development and Universal Binaries"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002983" title="Cross-Development and Universal Binaries"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../Xcode-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000557" target="_top">Xcode</a> &gt; <a href="../Introduction/CrossDevelopment.html#//apple_ref/doc/uid/10000163-BCICHGIE">Cross-Development Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Using/cd_overview.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DetermineFrameworkVersion.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002983-SW2" title="Cross-Development and Universal Binaries"></a><h1>Cross-Development and Universal Binaries</h1><p>Beginning with Xcode 2.1, you can take advantage of cross-development to create universal binaries—executable files containing object code for both Intel-based and PowerPC-based Macintosh computers. For more information on creating universal binaries, see <em><a href="../../../../MacOSX/Conceptual/universal_binary/index.html#//apple_ref/doc/uid/TP40002217" target="_top">Universal Binary Programming Guidelines, Second Edition</a></em>.</p><p>To compile code for an Intel-based Macintosh, you must compile using GCC 4.0 and target the Mac OS X 10.4 (Universal) SDK. If you can require Mac OS X v10.4 or later, you can use the same cross-development settings to build for either architecture. However, you may want to support Mac OS X v10.3 and later for PowerPC-based Macintosh computers. </p><p>If you're creating a universal binary version of a kernel extension (a generic KEXT or an I/O Kit driver), be aware that some I/O Kit classes in an Intel-based Macintosh running Mac OS X v10.4 are intentionally not binary compatible with the same classes in a PowerPC-based Macintosh running Mac OS X v10.4. If your KEXT needs to run in both versions, be sure to target the Mac OS X 10.4.0 (or earlier) SDK for the PowerPC build and the Mac OS X 10.4 (Universal) SDK for the Intel-based build. For more details on building universal I/O Kit device drivers, see Technical Note <span class="content_text"><a href="http://developer.apple.com/technotes/tn2006/tn2163.html" target="_top">TN2163</a></span>. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002983-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;The Mac OS X 10.4.0 SDK—which is distinct from the Mac OS X 10.4 (Universal) SDK—no longer ships with Xcode Tools. You can download it from the Downloads section of the <span class="content_text"><a href="https://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/promo?source=NAVLOG&amp;code=NAVLOG-NEX" target="_blank">ADC Member Site</a></span>.  </p></div><p>Xcode provides per-architecture variants for a number of build settings to allow you to specify different cross-development settings for Intel and PowerPC-based builds. These variants take the form <code>BUILD_SETTING_($arch)</code> where <code>BUILD_SETTING</code> is the usual name of the build setting and <code>($arch)</code> is a suffix denoting the architecture for which the build setting applies. The <code>i386</code> suffix indicates the architecture for Intel-based Macintosh computers, and the <code>ppc</code> suffix indicates the PowerPC architecture. For example, to specify that Xcode use GCC 4.0 when building for Intel, set the <code>GCC_VERSION_i386</code> build setting to 4.0. The build settings that have per-architecture variants related to cross-development are listed in  <span class="content_text"><a href="Cross-DevelopmentandUniversalBinaries.html#//apple_ref/doc/uid/TP40002983-SW1">Table 3-1</a></span>. For more on build settings in Xcode, see <em><!--a target="_top" -->Xcode 2.2 User Guide<!--/a--></em>.</p><a name="//apple_ref/doc/uid/TP40002983-SW1" title="Table 3-1Xcode cross-development settings with per-architecture variants"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 3-1&nbsp;&nbsp;</strong>Xcode cross-development settings with per-architecture variants</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Build setting</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>SDKROOT</code></p></td><td ><p>The SDK to develop for.</p></td></tr><tr><td  scope="row"><p><code>MACOSX_DEPLOYMENT_TARGET</code></p></td><td ><p>The deployment target, which specifies the earliest version of Mac OS X on which your software can run.</p></td></tr><tr><td  scope="row"><p><code>GCC_VERSION</code></p></td><td ><p>The version of GCC to use when building.</p></td></tr></table></div><div class="importantbox"><a name="//apple_ref/doc/uid/TP40002983-DontLinkElementID_16" title="Important:"></a><p><strong>Important:</strong>&nbsp;Per-architecture build settings are supported only in Xcode 2.2 and later.</p><p></p></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40002983-DontLinkElementID_17" title="Note"></a><p><strong>Note:</strong>&nbsp;By default, the Build pane of the target and project inspectors contains only the general version of each build setting, without any architecture-specific suffix. You must manually create entries in the build settings table for any per-architecture variants you wish to add.  To learn more about adding build settings in Xcode, see <em><!--a target="_top" -->Xcode 2.2 User Guide<!--/a--></em>.</p></div><p>Using these per-architecture settings, you can create a single target that creates a universal binary and builds for Mac OS X v10.4 on Intel-based Macintosh computers while supporting Mac OS X v10.3 and later for PowerPC. The basic steps for configuring your project or target are the same as those described in <span class="content_text"><a href="../Using/cd_overview.html#//apple_ref/doc/uid/20002000-1114254">“Configuring Your Project for Cross Development”</a></span>:</p><ol class="ol"><li class="li"><p>Choose a target SDK. </p><p>To target Mac OS X v10.4 for both Intel- and PowerPC-based builds, choose the Mac OS X 10.4 (Universal) SDK from the Cross-Develop Using Target SDK menu.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002983-DontLinkElementID_18" title="Note"></a><p><strong>Note:</strong>&nbsp;You can specify different target SDKs for Intel and PowerPC builds. For example, when building for PowerPC, you may want to ensure that your code doesn't use features from versions of Mac OS X later than Mac OS X v10.3.9. </p>To do so, add new entries for the <code>SDKROOT_ppc</code> and <code>SDKROOT_i386</code> build settings to the table in the Build pane of the target or project inspector. Set <code>SDKROOT_ppc</code> to point to the Mac OS X 10.3.9 SDK and set <code>SDKROOT_i386</code> to point to the Mac OS X 10.4 Universal SDK. You can type the full path to each SDK or simply drag the SDK folder from the Finder to the Value column. </p></div></li><li class="li"><p>Set the deployment target. </p><p>To support versions of Mac OS X prior to Mac OS X v10.4 for PowerPC, you can specify separate deployment OS versions for Intel and PowerPC-based builds. To do so, use the per-architecture variants of the <code>MACOSX_DEPLOYMENT_TARGET</code> build setting:</p><ol class="ol"><li class="ol ol"><p>In the target or project inspector, add entries for the <code>MACOSX_DEPLOYMENT_TARGET_ppc</code> and <code>MACOSX_DEPLOYMENT_TARGET_i386</code> build settings. </p></li><li class="ol ol"><p>Set  <code>MACOSX_DEPLOYMENT_TARGET_i386</code> to <code>10.4</code>. </p></li><li class="ol ol"><p>Set <code>MACOSX_DEPLOYMENT_TARGET_ppc</code> to the earliest system version that you want to support for PowerPC. For example, to support Mac OS X v10.3 and later, set <code>MACOSX_DEPLOYMENT_TARGET_ppc</code> to <code>10.3</code>. </p></li></ol></li><li class="li"><p>Select the appropriate compiler. </p><p>As mentioned, you must use GCC 4.0 to compile for Mac OS X v10.4 and for Intel-based Macintosh computers. However, code built with GCC 4.0 will not run on versions of  Mac OS X earlier than 10.3.0. Furthermore, due to changes in the C++ ABI between the GCC 4.0 and GCC 3.3 compilers, C++ or Objective-C++ code built with GCC 4.0 does not run on versions of Mac OS X prior to Mac OS X v10.3.9.</p><p>If you can require Mac OS X 10.3.9 or later (10.3.0 or later if you do not have C++ or Objective-C++ code), you can use the same version of GCC to build for both Intel- and PowerPC-based Macintosh computers. Otherwise, you must use different versions of the GCC compiler to build for each platform. To do so, use the per-architecture variants of the <code>GCC_VERSION</code> build setting:</p><ol class="ol"><li class="ol ol"><p>In the Build pane of the target or project inspector, add entries to the build settings table for the <code>GCC_VERSION_ppc</code> and <code>GCC_VERSION_i386</code> build settings.</p></li><li class="ol ol"><p>Set <code>GCC_VERSION_ppc</code> to <code>3.3</code>.</p></li><li class="ol ol"><p>Set <code>GCC_VERSION_i386</code> to <code>4.0</code>.</p></li></ol><div class="notebox"><a name="//apple_ref/doc/uid/TP40002983-DontLinkElementID_19" title="Note"></a><p><strong>Note:</strong>&nbsp;Xcode also has per-architecture build setting variants for the <code>LD</code> and <code>LDPLUSPLUS</code> build settings; this lets you specify different linker versions for PowerPC and Intel builds.</p></div></li></ol><p>Although it is easiest to build universal binaries from Xcode, you can also build them from the command line. For an example of how to build from the command-line targeting the same SDK for both Intel and PowerPC-based builds, see <span class="content_text"><a href="../../../../Porting/Conceptual/PortingUnix/compiling/compiling.html#//apple_ref/doc/uid/TP40002850" target="_top">Compiling Your Code in Mac OS X</a></span> in <em><a href="../../../../Porting/Conceptual/PortingUnix/index.html#//apple_ref/doc/uid/TP30001003" target="_top">Porting UNIX/Linux Applications to Mac OS X</a></em>.</p><p>If you need to target different SDKs for Intel and PowerPC-based builds—for example if you need to support versions of Mac OS X prior to Mac OS X v10.4 for PowerPC-based builds—you will need to compile for each architecture separately and then use the <code>lipo</code> tool to create a single executable file. To build a binary for Intel-based Macintosh computers, use the settings described in <span class="content_text"><a href="../Using/cd_overview.html#//apple_ref/doc/uid/20002000-1114311">“Configuring a Makefile-Based Project”</a></span> to specify the target SDK and the deployment target. For instructions on using <code>lipo</code>, see <code><a href="../../../../Darwin/Reference/ManPages/man1/lipo.1.html#//apple_ref/doc/man/1/lipo" target="_top">lipo(1)</a></code>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Using/cd_overview.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DetermineFrameworkVersion.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-11-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/cross_development/UniversalBinaries/Cross-DevelopmentandUniversalBinaries.html%3Fid%3D10000163i-2.7&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/cross_development/UniversalBinaries/Cross-DevelopmentandUniversalBinaries.html%3Fid%3D10000163i-2.7&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/cross_development/UniversalBinaries/Cross-DevelopmentandUniversalBinaries.html%3Fid%3D10000163i-2.7&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
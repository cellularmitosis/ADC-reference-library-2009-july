<HTML>		<HEAD>		<TITLE>					</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../webobjects.html" target="_top">WebObjects 4.5 Documentation</a> <b>&gt;</b>EOControl Reference</font><br><br><!--end of path --><a href="../../EOControlTOC.html"><img src="../../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <a name = "EOClassDescription"><h1><FONT COLOR="#000066"><a name="//apple_ref/occ/cl/EOClassDescription">EOClassDescription</a></FONT></h1><br></a><br><a name = "BGGCGBEI"><h2>How Does It Work?</h2></a><p>As noted above, Enterprise Objects Framework implements adefault subclass of EOClassDescription in EOAccess, EOEntityClassDescription.In the typical scenario in which an enterprise object has a correspondingmodel file, a particular operation (such as validating a value)results in the broadcast of an EOClassDescriptionNeeded... notification(an  <a frame= "conv" href="../../Classes/EOClassDescription.html#BAAEBFBI">EOClassDescriptionNeededForClassNotification</a> oran  <a frame= "conv" href="../../Classes/EOClassDescription.html#BAADCFDA">EOClassDescriptionNeededForEntityNameNotification</a>).When an EOModel object receives such a notification, it registersthe metadata (class description) for the EOEntity on which the enterpriseobject is based. (EOModel and EOEntity are defined in EOAccess.)</p><p>An enterprise object takes advantage of the metadata registeredfor it by using the EOClassDescription-related methods defined inthe EOEnterpriseObject informal protocol (and implemented in a categoryof NSObject). Primary among these methods is  <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/classDescription">classDescription</a>, which returns theclass description associated with the enterprise object. Throughthis class description the enterprise object has access to all ofthe information relating to its entity in a model file.</p><p>In addition to methods that return information based on anenterprise object's class description, the EOClassDescription-relatedmethods the  <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#BABBCHJH">EOEnterpriseObject</a> informalprotocol defines include methods that are automatically invokedwhen a particular operation occurs. These include validation methodsand methods that are invoked whenever an enterprise object is insertedor fetched.</p><p>All of this comes together in your running application. Whena user tries to perform a particular operation on an enterpriseobject (such as attempting to delete it), the EOEditingContext sendsthese validation messages to your enterprise object, which in turn(by default) forwards them to its EOClassDescription. Based on theresult, the operation is either accepted or refused. For example, referentialintegrity constraints in your model might state that you can'tdelete a department object that has employees. If a user attemptsto delete a department that has employees, an exception is returned andthe deletion is refused.</p><br><a name = "BGGCHAGF"><h2>Using EOClassDescription</h2></a><p>For the most part, you don't need to programmatically interactwith EOClassDescription. It extends the behavior of your enterpriseobjects transparently. However, there are two cases in which youdo need to programmatically interact with it: </p><ul><li>When you override EOClassDescription-relatedEOEnterpriseObject methods in an enterprise object class. Thesemethods are used to perform validation and to intervene when enterpriseobjects based on EOModels are created and fetched. (The EOModelclass is defined in EOAccess.) For objects that don't have EOModels,you can override a different set of EOEnterpriseObject methods; thisis described in more detail in the section  <a frame= "conv" href="#BAABFICB">"Working with Objects That Don't Have EOModels" on page 35</a>.</li><li>When you create a subclass of EOClassDescription</li></ul><br><h2>Overriding Methods in an Enterprise Object</h2><p>As described above, EOEnterpriseObject defines several EOClassDescription-relatedmethods. It's common for enterprise object classes to overridethe following methods to either perform validation, to assign defaultvalues ( <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/awakeFromInsertionInEditingContext:">awakeFromInsertionInEditingContext:</a>),or to provide additional initialization to newly fetched objects( <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/awakeFromFetchInEditingContext:">awakeFromFetchInEditingContext:</a>):</p><ul><li> <a frame= "conv" href="../../Protocols/EOValidation.html#//apple_ref/occ/intfm/EOValidation/validateForSave">validateForSave</a></li><li> <a frame= "conv" href="../../Protocols/EOValidation.html#//apple_ref/occ/intfm/EOValidation/validateForDelete">validateForDelete</a></li><li> <a frame= "conv" href="../../Protocols/EOValidation.html#//apple_ref/occ/intfm/EOValidation/validateForInsert">validateForInsert</a></li><li> <a frame= "conv" href="../../Protocols/EOValidation.html#//apple_ref/occ/intfm/EOValidation/validateForUpdate">validateForUpdate</a></li><li> <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/awakeFromInsertionInEditingContext:">awakeFromInsertionInEditingContext:</a>:</li><li> <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/awakeFromFetchInEditingContext:">awakeFromFetchInEditingContext:</a></li><li> <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/userPresentableDescription">userPresentableDescription</a></li></ul><p>For example, an enterprise object class can implement a <b>validateForSave</b> methodthat checks the values of salary and jobLevel properties beforeallowing the values to be saved to the database:</p><blockquote><pre>- (NSException *)validateForSave{    if (salary &gt; 1500 && jobLevel &lt; 2)        return [NSException validationExceptionWithFormat:            @"The salary is too high for that position!"];    // pass the check on to the EOClassDescription    return [super validateForSave]; }</pre></blockquote><br><p>For more discussion of this subject, see the chapter "DesigningEnterprise Objects" in the <i>Enterprise Objects FrameworkDeveloper's Guide</i>, and the  <a frame= "conv" href="../../Protocols/EOEnterpriseObject.html#BABBCHJH">EOEnterpriseObject</a> informalprotocol specification.</p><br><a name = "BAABFICB"><h2>Working with Objects ThatDon't Have EOModels</h2></a><p>Although an EOModel is the most common source of an EOClassDescriptionfor a class, it isn't the only one. Objects that don't havean EOModel can implement EOClassDescription methods directly as instancemethods, and the rest of the Framework will treat them just as itdoes enterprise objects that have this information provided by anexternal EOModel.</p><p>There are a few reasons you might want to do this. First ofall, if your object implements the methods  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/instm/EOClassDescription/entityName">entityName</a>,  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/instm/EOClassDescription/attributeKeys">attributeKeys</a>,  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/instm/EOClassDescription/toOneRelationshipKeys">toOneRelationshipKeys</a>,and  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/instm/EOClassDescription/toOneRelationshipKeys">toOneRelationshipKeys</a>,EOEditingContexts can snapshot the object and thereby provide undofor it.</p><p>For example, the following code excerpt shows an implementationof attributeKeys for a Circle class:</p><blockquote><pre>- (NSArray *)attributeKeys {    static NSArray *array = nil;    if (!array)        array = [[NSArray alloc] initWithObjects:@"radius", @"x",            @"y", @"color", nil];    return array;}</pre></blockquote><br><p>Secondly, you might want to implement EOClassDescription'svalidation or referential integrity methods to add these featuresto your classes.</p><p>Implementing EOClassDescription methods on a per-class basisin this way is a good alternative to creating a subclass of EOClassDescription. </p><br><h2>Creating a Subclass of EOClassDescription</h2><p>You create a subclass of EOClassDescription when you wantto use an external source of information other than an EOModel toextend your objects. Another possible scenario is if you've added informationto an EOModel (such as in its user dictionary) and you want thatinformation to become part of your class description-in that case,you'd probably want to create a subclass of the access layer'sEOEntityClassDescription.</p><p>When you create a subclass of EOClassDescription, you onlyneed to implement the methods that have significance for your subclass.</p><p>If you're using an external source of information otherthan an EOModel, you need to decide when to register class descriptions,which you do by invoking the method  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/clm/EOClassDescription/registerClassDescription:forClass:">registerClassDescription:forClass:</a>.You can either register class descriptions in response to a EOClassDescriptionNeeded...notification (an  <a frame= "conv" href="../../Classes/EOClassDescription.html#BAAEBFBI">EOClassDescriptionNeededForClassNotification</a> oran  <a frame= "conv" href="../../Classes/EOClassDescription.html#BAADCFDA">EOClassDescriptionNeededForEntityNameNotification</a>),or you can register class descriptions at the time you initializeyour application (in other words, you can register all potentialclass descriptions ahead of time). The default implementation inEnterprise Objects Framework is based on responding to the EOClassDescriptionNeeded...notifications. When an EOModel receives one of these notifications,it supplies a class description for the specified class or entityname by invoking  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/clm/EOClassDescription/registerClassDescription:forClass:">registerClassDescription:forClass:</a></p><br><a name = "BGGBDFJI"><h2>EOEntityClassDescription</h2></a><p>There are only three methods in EOClassDescription that havemeaningful implementations (that is, that don't either return nil orsimply return without doing anything):  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/clm/EOClassDescription/invalidateClassDescriptionCache">invalidateClassDescriptionCache</a>,  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/clm/EOClassDescription/registerClassDescription:forClass:">registerClassDescription:forClass:</a>,and  <a frame= "conv" href="../../Classes/EOClassDescription.html#//apple_ref/occ/instm/EOClassDescription/propagateDeleteForObject:editingContext:">propagateDeleteForObject:editingContext:</a>.The default behavior of the rest of the methods in Enterprise ObjectsFramework comes from the implementation in the access layer's EOClassDescriptionsubclass EOEntityClassDescription. For more information, see the EOEntityClassDescriptionclass specification.</p><br><a name = "BGGCCHCB"><h2>The EOClassDescription'sDelegate</h2></a><p>You can assign a delegate to the EOClassDescription class.EOClassDescription sends the message  <a frame= "conv" href="../../Protocols/EOClassDescClassDelegate.html#//apple_ref/occ/intfm/EOClassDescription ClassDelegate/shouldPropagateDeleteForObject:inEditingContext:forRelationshipKey:">shouldPropagateDeleteForObject:inEditingContext:forRelationshipKey:</a> toits delegate when delete propagation is about to take place fora particular object. The delegate can either allow or deny the operationfor a specified relationship key. For more information, see themethod description for  <a frame= "conv" href="../../Protocols/EOClassDescClassDelegate.html#//apple_ref/occ/intfm/EOClassDescription ClassDelegate/shouldPropagateDeleteForObject:inEditingContext:forRelationshipKey:">shouldPropagateDeleteForObject:inEditingContext:forRelationshipKey:</a>.</p><br><a href="../../EOControlTOC.html"><img src="../../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>FxPlug SDK Overview</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="FxPlug SDK Overview"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002180-CH235" title="FxPlug SDK Overview"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../FinalCutProFinalCutExpress-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP30000510" target="_top">Final Cut Pro/Final Cut Express</a> &gt; <a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-TPXREF101">FxPlug SDK Overview</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory/RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002180-CH235-TPXREF101" title="FxPlug SDK Overview"></a><h1>FxPlug SDK Overview</h1><p>Developed by Apple’s Professional Applications group, FxPlug is a compact yet powerful image processing plug-in architecture that lets you create new effects for Final Cut Pro, Final Cut Express, and Motion.</p><p>Leveraging technologies such as OpenGL, Quartz, Quartz Composer, and Core Image, you can develop unique plug-ins that include on-screen controls and custom UI elements—all running seamlessly in the host application. FxPlug supports both hardware-accelerated and CPU-based effects.  </p><p>To write an FxPlug plug-in, you need to use the FxPlug SDK. The bulk of this SDK consists of Objective-C protocol definitions. You create a plug-in by writing code in Objective-C or Objective-C++ that conforms to these protocols. That is, you implement the methods declared by the protocols.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_101" title="Note"></a><p><strong>Note:</strong>&nbsp;After reading this document, an excellent way of learning the FxPlug framework is to study the examples installed in /Developer/Examples/FxPlug.</p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_1">Versions of the FxPlug SDK</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-BAJHJEAA">Plug-in Concepts</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_5">Bundling and Installing a Plug-in</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_8">API Overview</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-SW1">Features of FxPlug SDK 1.2</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-SW2">Features of FxPlug SDK 1.2.1</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-SW3">Features of FxPlug SDK 1.2.2</a>
				
			<br/>
			
        
			
			
				<a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_91">FAQs</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_1" title="Versions of the FxPlug SDK"></a><h2>Versions of the FxPlug SDK</h2><p>FxPlug SDK 1.0 was introduced together with Motion 2.0 in April, 2005. A few months later, version 1.0.2 was released with support for Universal Binary plug-ins but no API changes.</p><p>Version 1.1 of the FxPlug SDK was the first version that worked with Final Cut Pro 5.1.2 . Version 1.1 added a number of new features, including:</p><ul class="ul"><li class="li"><p>Transitions.</p></li><li class="li"><p>New FxBaseEffect parent protocol for filters, generators, and transitions. </p></li><li class="li"><p>String parameters.</p></li><li class="li"><p>A new <code>-properties</code> method that returns a dictionary describing plug-in attributes.</p></li><li class="li"><p>8-bit and floating-point YUV ('r408' and 'r4fl') bitmaps.</p></li><li class="li"><p>Rowbytes support in bitmaps.</p></li><li class="li"><p>SMPTE wipe equivalents for transitions.</p></li><li class="li"><p>A new FxHostCapabilities class for determining the capabilities of the host application.</p></li></ul><p>Version 1.2 of the FxPlug SDK was released with Final Cut Pro 6.0 and Motion 3.0. The features in this version of the SDK are detailed below in the section <span class="content_text"><a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-SW1">“Features of FxPlug SDK 1.2.”</a></span></p><p>Version 1.2.1 of the FxPlug SDK was released with Final Cut Pro 6.0.1 and Motion 3.0.1. The features of this version of the SDK are described below in the section <span class="content_text"><a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-SW2">“Features of FxPlug SDK 1.2.1”</a></span></p><p>Version 1.2.2 of the FxPlug SDK was released with Final Cut Pro 6.0.2 and Motion 3.0.3. The features of this version of the SDK are described below in the section <span class="content_text"><a href="Overview.html#//apple_ref/doc/uid/TP40002180-CH235-SW3">“Features of FxPlug SDK 1.2.2”</a></span></p><p>Version 1.2.3 of the FxPlug SDK provides minor bug fixes and documentation corrections.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_2" title="Backward Compatability "></a><h3>Backward Compatability
</h3><p>In general, to make your plug-in work with any version of a host application, have the plug-in first check for availability of a host API for an SDK feature, and then only use that feature if the API is available. If a particular host API is not available, your plug-in needs to fall back to an alternative behavior.</p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-BAJHJEAA" title="Plug-in Concepts"></a><h2>Plug-in Concepts</h2>
<p>An FxPlug plug-in is a type of ProPlug, which in turn is a flavor of CFBundle. ProPlug is a generalized Apple architecture for writing plug-ins that can interact with a host application and extend its functionality.</p>
<p>When a plug-in needs to access host application functionality—such as requesting video stream information—it uses methods in a host API. A host API is an object, provided by the host application, that implements methods that can be called by a plug-in. It is analogous to a callback suite in other plug-in architectures, but is implemented as an Objective-C protocol. For more information about protocols, see the Protocols section in <em><a href="../../../../Cocoa/Conceptual/ObjectiveC/index.html#//apple_ref/doc/uid/TP30001163" target="_top">The Objective-C 2.0 Programming Language</a></em>.</p>
<p>For example, the FxPlug SDK defines host protocols that include methods for requesting layer information, converting between canvas and object coordinate spaces, building a list of plug-in parameters, getting and setting parameter values, and evaluating input images at arbitrary times. Not all hosts are guaranteed to support all host-API protocols specified in FxPlug, so a plug-in must request the host API object before invoking its methods.</p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_3" title="SDK Headers"></a><h3>SDK Headers</h3>
<p>The principal header for the FxPlug SDK is <code>FxPlugSDK.h</code>, which is located in <code>/Library/Frameworks/FxPlug.framework/Headers</code>. It imports all of the other FxPlug headers. The comments in the header files generate the reference documentation for the FxPlug SDK.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_4" title="Types of Plug-ins"></a><h3>Types of Plug-ins</h3><p>You can write three types of plug-ins with the FxPlug SDK: video filters, video generators, and video transitions. A filter operates on an input video image to produce an output video image. A generator does not require an input image. A transition combines two input video images to yield an output video image. In each case, the video images may be traditional RAM-based bitmaps or hardware-accelerated OpenGL buffers. A single plug-in can support either software rendering or hardware rendering, or both. Implementing a software path is always recommended to provide compatibility with older machines that may not have Quartz-Extreme-compatible video hardware.</p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_5" title="Bundling and Installing a Plug-in"></a><h2>Bundling and Installing a Plug-in</h2>
<p>The easiest way to build a new FxPlug plug-in is to create a New Project in Xcode and use one of the FxPlug templates in the Standard Apple-Plug-ins category: FxPlug Filter, FxPlug Generator, or FxPlug Transition.</p><p>For examples of complete FxPlug plug-ins, see the directory<code> /Developer/Examples/FxPlug</code>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_102" title="Note"></a><p><strong>Note:</strong>&nbsp;To avoid plug-in conflicts, you must edit the UUID entries in the <code>Info.plist</code> file. You can create unique UUIDs by issuing the <code>uuidgen</code> command in the Terminal application. (See the “Frequently Asked Questions” section below for details on using <code>uuidgen</code>.)</p></div>
<p>Two Mac OS X folders are reserved for FxPlug installation. When scanning for plug-ins, host applications recursively search the folder hierarchy from these locations:</p><ul class="simple"><li><p><code>/Library/Plug-Ins/FxPlug/</code></p></li><li><p><code>~/Library/Plug-Ins/FxPlug/</code></p></li></ul>
<p>As you develop your plug-in and test it with the host application, you may find it convenient to perform the installation via a Copy Files build phase. Alternatively, you can create a symbolic link inside<code> /Library/Plug-Ins/FxPlug/</code>, pointing to the build-product directory specified in Xcode’s Project Preferences. Depending on your settings, you can create the symbolic link in the Terminal application like this:</p><ul class="simple"><li><p><code>% ln -s ~/build/MyPlug.fxplug /Library/Plug-Ins/FxPlug/MyPlug.fxplug</code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_6" title="Packaging"></a><h3>Packaging</h3>
<p>A completed FxPlug plug-in is packaged in a CFBundle. Each bundle contains one or more plug-ins. A bundle also contains an <code>Info.plis</code>t property-list file that describes the plug-ins in the bundle. This description can be static or dynamic. With a static list, the plug-ins are recognized and loaded automatically; for a dynamic list, the bundle’s principal class is asked to register the plug-ins. The distinction depends on the value of a Boolean tag <code>ProPlugDynamicRegistration</code> in the property list. Dynamic registration incurs a plug-in scanning performance hit. So you should ordinarily use static registration. You can find more information about dynamic registration in <code>&lt;PluginManager/PROPlugInBundleRegistration.h>.</code></p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_7" title="Registration"></a><h3>Registration</h3>
<p>Before a host application can display a list of available plug-ins, it recursively scans the plug-in folders for available CFBundles that conform to the FxFilter, FxGenerator, or FxTransition protocol. Plug-in properties such as name, group name, description, and so on are specified in the bundle’s property list for statically registered plug-ins. The host application can display the list of grouped plug-ins in its UI, and allow the user to choose and apply particular plug-ins to particular tracks.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_8" title="API Overview"></a><h2>API Overview</h2>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_9" title="Protocols"></a><h3>Protocols</h3>
<p>The primary protocols defined by the FxPlug SDK are FxFilter, FxGenerator, and FxTransition. Each plug-in conforms to one of these protocols. For more information about the methods in these protocols, see the reference documentation for the header files <code>FxFilter.h, FxGenerator.h</code>, and <code>FxTransition.h</code>. Note that these protocols inherit methods from a superprotocol FxBaseEffect, which is defined in<code> FxBaseEffect.h</code>.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_10" title="Properties"></a><h3>Properties</h3><p>The FxPlug SDK 1.1 introduced the plug-in properties dictionary. One of the methods defined by the new FxBaseEffect protocol was <code>-properties</code>. From this method, a plug-in returns an NSDictionary with key-value pairs that describe the capabilities of a plug-in. </p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_11" title="Parameters"></a><h3>Parameters</h3>
<p>Once a plug-in is applied, the host application asks for its parameter list by calling the <code>-addParameters</code> method. This method is declared in the FxBaseEffect protocol, which is inherited by the FxGenerator, FxFilter, and FxTransition protocols. The host application then displays the parameters with the appropriate UI. </p>
<p>In the <code>-addParameters</code> method, a plug-in adds its parameters, one by one, using methods in the FxParameterCreation protocol. First, the plug-in calls the <code>-apiForProtocol</code>: method, defined by the PluginManager framework, to obtain the host’s API object that implements the protocol. Then it calls the parameter creation methods to add the parameters. For example, this is an <code>-addParameters</code> method from a simple opacity filter:</p>
<div class="codesample"><table><tr><td scope="row"><pre>-(  BOOL  ) addParameters<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>   id  &lt;FxParameterCreation> paramsApi =<span></span></pre></td></tr><tr><td scope="row"><pre>   [_apiManager apiForProtocol:@protocol(FxParameterCreationAPI)];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>   if  ( paramsApi != NULL  )<span></span></pre></td></tr><tr><td scope="row"><pre>   {<span></span></pre></td></tr><tr><td scope="row"><pre>       [paramsApi addFloatSliderWithName:@"Opacity"<span></span></pre></td></tr><tr><td scope="row"><pre>                            parmId:  OPACITY_ID<span></span></pre></td></tr><tr><td scope="row"><pre>                      defaultValue:  1.0<span></span></pre></td></tr><tr><td scope="row"><pre>                      parameterMin:  0.0<span></span></pre></td></tr><tr><td scope="row"><pre>                      parameterMax:  3.0<span></span></pre></td></tr><tr><td scope="row"><pre>                         sliderMin:  0.0<span></span></pre></td></tr><tr><td scope="row"><pre>                         sliderMax:  1.0<span></span></pre></td></tr><tr><td scope="row"><pre>                             delta:  0.01<span></span></pre></td></tr><tr><td scope="row"><pre>                         parmFlags:  kFxParameterFlag_DEFAULT];<span></span></pre></td></tr><tr><td scope="row"><pre>        return YES;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>         return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>You can find more information about adding parameters in the reference documentation for   the header files<code> FxParameterAPI.h</code>, <code>FxOptionalParameterAPI.h</code>,  and <code> FxOptionalParameterAPI.h</code>. </p>
<p>Protocols in these headers include methods for adding these standard types of parameters:</p>
<ul class="spaceabove"><li class="li"><p>Floating-point slider</p></li>
<li class="li"><p>Integer slider</p></li>
<li class="li"><p>Angle slider</p></li>
<li class="li"><p>Toggle button (checkbox)</p></li>
<li class="li"><p>RGB color</p></li>
<li class="li"><p>RGBA color</p></li>
<li class="li"><p>Point</p></li>
<li class="li"><p>Popup menu</p></li>
<li class="li"><p>Image reference</p></li>
<li class="li"><p>Group start</p></li>
<li class="li"><p>Group end</p></li><li class="li"><p>String</p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_103" title="Note"></a><p><strong>Note:</strong>&nbsp;String parameter support was added in FxPlug SDK 1.1. The methods for creating string parameters and retrieving and setting their values are defined in new protocols FxParameterCreationAPI_v2, FxParameterRetrievalAPI_v2, and FxParameterSettingAPI_v2. These new “_v2” protocols inherit all of the methods in their parent protocols, FxParameterCreationAPI, FxParameterRetrievalAPI, and FxParameterSettingAPI. If you are using string parameters, you should use the new _v2 protocols. Otherwise, you should use the older parent protocols, so that your plug-in will work in host applications that don’t support the _v2 protocols.</p></div>
<p>There are also optional parameters that may be supported by some host applications but not by others:</p>
<ul class="spaceabove"><li class="li"><p>Histogram</p></li>
<li class="li"><p>Gradient</p></li></ul>
<p>In addition to the standard parameter types, you may create a custom parameter with an opaque data type, using the method:</p><ul class="simple"><li><p><code>-addCustomParameterWithName:parmId:defaultValue:parmFlags </code></p></li></ul>
<p>Each custom parameter must be associated with a custom parameter view, which is defined by the methods in <code>FxCustomParameterUI.h</code>. More details about custom parameter UI can be found in the reference documentation. </p>
<p>Other protocols in these headers include accessor methods for getting and setting parameter values.</p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_12" title="Rendering"></a><h3>Rendering</h3>
<p>In order to render an output frame for a filter plug-in, the host application calls the following sequence of plug-in methods:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    -(BOOL)frameSetup:(FxRenderInfo)renderInfo<span></span></pre></td></tr><tr><td scope="row"><pre>        inputInfo:(FxImageInfo)inputInfo<span></span></pre></td></tr><tr><td scope="row"><pre>        hardware:(BOOL*)canRenderHardware<span></span></pre></td></tr><tr><td scope="row"><pre>        software:(BOOL*)canRenderSoftware;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    -(BOOL)renderOutput:(FxImage *)output<span></span></pre></td></tr><tr><td scope="row"><pre>        withInput:(FxImage*)inputImage<span></span></pre></td></tr><tr><td scope="row"><pre>        withInfo:(FxRenderInfo)renderInfo;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    -(BOOL)frameCleanup;<span></span></pre></td></tr></table></div>
<p>Generator and transition plug-ins render with a similar sequence, but with different numbers of inputs passed to their <code>-frameSetup</code> and <code>-renderOutput methods</code>.</p>
<p>In its implementation of the method <code>-renderOutput:...withInfo:</code> , a plug-in requests parameter values and renders an output frame. The output object is an instance of one of two subclasses of the FxImage  class: FxBitmap  or FxTexture.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_104" title="Note"></a><p><strong>Note:</strong>&nbsp;In floating-point rendering, it is important to avoid clipping values to the 0.0-1.0 range. The superblack and superwhite pixel values outside this range are valid in digital video.</p></div><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_13" title="Images"></a><h3>Images</h3><p>In its implementation of the method <code>-frameSetup:</code>, a plug-in specifies whether it can render in software on the CPU, in hardware on the GPU, or in both. If the plug-in requests both kinds of rendering, the host application decides which to use. For example, Motion is more likely to choose a hardware path, while Final Cut Pro tends to prefer software rendering.</p><p>When rendering in software, input and output images are FxBitmap objects; in hardware, FxTexture objects. You can find more information about these image classes in the reference documentation for the header files <code>FxImage.h, FxBitmap.h</code>, and <code>FxTexture.h</code>.</p>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_14" title="Parameter Interaction"></a><h3>Parameter Interaction</h3>
<p>When a user changes a parameter control for an FxPlug plug-in, the host application calls the plug-in method <code>-parameterChanged:</code>.  In response, the plug-in can change the state of other parameters. For example, if the value of a toggle button changes, the plug-in can hide or reveal other parameter controls, or change their values. </p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_105" title="Note"></a><p><strong>Note:</strong>&nbsp; In FxPlug 1.0, the <code>-parameterChanged:</code> method was included in the FxFilter protocol, but not in the FxGenerator protocol. In FxPlug 1.1, the<code> -parameterChanged:</code> method was moved to the FxBaseEffect protocol and is now inherited by all three types of FxPlug plug-ins. For applications such as Motion 2.0 through 2.1.x that do not support this new feature in FxPlug SDK 1.1, you can use custom parameter UI to create a generator plug-in that responds to parameter changes.</p></div>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_15" title="Custom Parameter UI"></a><h3>Custom Parameter UI</h3>
<p>For a custom UI parameter, user interaction is handled differently. In this case,the plug-in conforms to theFxParameterViewHost protocol by implementing a  <code>-createViewForParm: </code> method, to provide an NSView subclass to the host app. Like any other NSView subclass, that custom view draws itself in a window, and receives notification of user actionssuch as mouse, key, and tablet events. </p>
<p>In response to user events, a plug-in custom view can notify the host application that a parameter value has changed. A plug-in can create a custom view object programmatically, or may retrieve it from a NIB file created in Interface Builder and placed in the plug-in’s Resources folder. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_106" title="Note"></a><p><strong>Note:</strong>&nbsp;In the plug-in's custom view methods, you must call the FxParameterAction host API method <code>-beginAction:</code> before your plug-in accesses any parameter values, and <code>-endAction:</code> after it has finished accessing them. This lets the host application set up and restore the internal state. See the reference documentation for the header file <code>FxCustomParameterUI.h </code>for more details about user interaction with custom parameters. </p></div>
<a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_16" title="On-Screen Controls"></a><h3>On-Screen Controls</h3>
<p>In addition to standard and custom parameter UI, a plug-in can also implement custom on-screen controls that are composited directly onto the host application’s canvas window using OpenGL. Examples of on-screen controls can be found in the SimplePaint example <code>(/Developer/Examples/FxPlug</code>) and in some of Motion’s built-in filters such as Kaleidoscope and Basic 3D.</p>
<p>To create an on-screen control, you create a second ProPlug plug-in class that conforms to the FxOnScreenControl protocol. You package this class in the same bundle as its associated filter, generator, or transition plug-in.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_107" title="Note"></a><p><strong>Note:</strong>&nbsp;On-screen controls are supported by Motion 2.0 through Motion 2.1.x, but not by the new version of Final Cut Pro. To work around this limitation, you might check at runtime for the availability of the FxOnScreenControl API. If it is unavailable, you can use a custom parameter UI instead.</p></div><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_17" title="Host Capabilities"></a><h3>Host Capabilities</h3><p>A new class in FxPlug 1.1 defines methods that your plug-in can use to identify key capabilities in the host application. The FxHostCapabilities class is specified in the new header file <code>FxHostCapabilities.h</code>.  Using the methods in this class, you can tailor the behavior of your plug-in to the context in which it is operating. Example methods include <code>-upscalesFields</code> and -supportsHiddenParameters. For more details, see the reference documentation for the <code>FxHostCapabilities.h</code> header.</p><p>Note that this new class was not implemented in earlier versions of the FxPlug framework. If you reference the FxHostCapabilities symbol in your plug-in, the plug-in will only link if the version of the installed FxPlug framework is 1.1 or later. Your plug-in installer should check that FxPlug 1.1 or later is present. (If it’s not, you can alert the user to run Software Update). Alternatively, you can retrieve the class by name using a string literal, as in this example:</p><div class="codesample"><table><tr><td scope="row"><pre>Class class = NSClassFromString( @"FxHostCapabilities" );<span></span></pre></td></tr><tr><td scope="row"><pre>id hostCaps = [[class alloc] initWithAPIManager:_apiManager];<span></span></pre></td></tr><tr><td scope="row"><pre>if ( ![hostCaps supportsDisabledParameters] )<span></span></pre></td></tr><tr><td scope="row"><pre>    ; // Do something<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002180-CH235-SW1" title="Features of FxPlug SDK 1.2"></a><h2>Features of FxPlug SDK 1.2</h2><p>The focus of FxPlug SDK 1.2 is improved consistency between Motion and Final Cut Pro, and better support for timing information. In addition to the changes in the FxPlug framework itself, there are other FxPlug-related changes in Plug-in Manager 1.7, Final Cut Pro 6, and Motion 3.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_18" title="The FxPlug 1.2 Framework"></a><h3>The FxPlug 1.2 Framework</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_19" title="Timing information"></a><h4>Timing information</h4><p>A FxTimingAPI protocol defines the methods provided by the host that allow a plug-in to query the timing properties of its input image(s), image parameters, effect, timeline, and in/out points. This protocol is the most significant change in FxPlug SDK 1.2.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_20" title="Field and Field Order Information"></a><h4>Field and Field Order Information</h4><p>FxImage objects now respond to <code>-field</code> and <code>-fieldOrder</code> accessors. These accessors provide information about fields in interlaced images: the field identifier for an image, and the field order of an image. The incorrectly named field <code>FxRenderInfo.field</code> has been renamed <code>FxRenderInfo.fieldOrder</code>. But you should use the FxImage accessors instead.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_21" title="Progress and Cancellation"></a><h4>Progress and Cancellation</h4><p>A FxProgressAPI protocol defines methods for plug-ins that render slowly to update a progress bar and support user cancellation.
</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_22" title="Image Retiming in Transitions"></a><h4>Image Retiming in Transitions</h4><p><strong>Final Cut Pro only:</strong> A FxTemporalTransitionImageAPI protocol allows a plug-in to retrieve its A or B input images at different times. In FxPlug 1.1, retiming was only enabled for images from filter inputs and image wells, not for transition input images.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_23" title="Absolute versus Relative Times"></a><h4>Absolute versus Relative Times</h4><p>A<code> [FxHostCapabilities timeBase]</code> method allows a plug-in to determine whether the host application measures times as frame offsets from the start of the timeline, or from the start of a clip, generator, filter, or transition.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_24" title="Getting Angle Values"></a><h4>Getting Angle Values</h4><p>The <code>-getAngle:fromParm:atTime:</code> method is deprecated. Plug-ins should use <code>-getFloatValue:</code> instead.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_25" title="Plug-in Manager 1.7"></a><h3>Plug-in Manager 1.7</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_26" title="Free Access to Host APIs"></a><h4>Free Access to Host APIs</h4><p>The Plug-in Manager no longer requires a plug-in Info.plist file to declare which host APIs the plug-in might use. However, for a plug-in to load on a system with an older version of the Plug-in Manager, the plug-in should still list these APIs in the ProPlugProtocolList—as illustrated by the example projects and Xcode templates.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_27" title="Final Cut Pro 6"></a><h3>Final Cut Pro 6</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_28" title="Support for Hidden and Disabled Parameters"></a><h4>Support for Hidden and Disabled Parameters</h4><p>Final Cut Pro 6 respects <code>kFxParameterFlag_HIDDEN</code> and  <code>kFxParameterFlag_DISABLED</code>. A plug-in can specify these flags when it creates parameters, and change them dynamically with the<code> -setParameterFlags:</code> selector of FxParameterSettingAPI. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_29" title="Support for Non-Animatable Parameters"></a><h4>Support for Non-Animatable Parameters</h4><p>Final Cut 6 respects the <code>kFxParameterFlag_NOT_ANIMATABLE</code> flag if it is set when a parameter is created. A plug-in cannot change this flag dynamically once a parameter is created.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_30" title="Support for Parameter Groups"></a><h4>Support for Parameter Groups</h4><p>Final Cut 6 provides some support for parameter groups. Parameter groups are implemented as labels separating the parameters, similar to After Effects plug-ins in Final Cut Pro. The groups cannot be collapsed or nested. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_31" title="Support for FxParameterSettingAPI"></a><h4>Support for FxParameterSettingAPI</h4><p>Final Cut Pro 5.1.2 did not implement the FxParameterSettingAPI and a plug-in could not set the values of its parameters after creation. Final Cut 6 supports this API. Plug-ins can now change the values of their parameters dynamically. For example, an effect might want to implement a “presets” functionality by changing some parameter values when the user makes a choice from a popup menu. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_32" title="Parameters Sampled at Arbitrary Times&Acirc;&nbsp;"></a><h4>Parameters Sampled at Arbitrary Times </h4><p>A plug-in running under Final Cut Pro 5.1.2 could only sample parameters at the current render time. The only exception to this was image parameters. In Final Cut Pro 6, a plug-in can sample any type of parameter at any time. This allows an effect to examine the values of keyframed parameters at multiple times. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_33" title="Plug-ins Only Instantiated Once at Startup&Acirc;&nbsp;"></a><h4>Plug-ins Only Instantiated Once at Startup </h4><p>At startup, Final Cut Pro 5.1.2 instantiated each installed plug-in multiple times, sometimes sending the plug-in an <code>-initWithAPIManager:</code> message, sometimes sending the plug-in an<code> -init</code> message. At startup, Final Cut Pro 6 instantiates a plug-in once via <code>-initWithAPIManager:</code>, sends the instance the following messages:</p><ul class="spaceabove"><li class="li"><p><code>-addParameters</code></p></li><li class="li"><p><code>-variesOverTime</code></p></li><li class="li"><p><code>-properties</code></p></li></ul><p>and releases the plug-in instance. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_34" title="Plug-ins No Longer Instantiated Multiple Times&Acirc;&nbsp;"></a><h4>Plug-ins No Longer Instantiated Multiple Times </h4><p>Final Cut Pro 5.1.2 created two instances of a plug-in when the plug-in was added to a timeline, using one instance for rendering and the other instance for parameter management. Final Cut Pro 6 creates one instance when a plug-in is added to a timeline and uses this single instance for both rendering and parameter management. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_35" title="Initial Value of Point Controls Respected"></a><h4>Initial Value of Point Controls Respected</h4><p>Final Cut Pro 5.1.2 always set the initial value of point controls at the center of the image. Final Cut Pro 6 uses the value specified by the plug-in.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_36" title="Software Rendering Preferred in More Cases"></a><h4>Software Rendering Preferred in More Cases</h4><p>Final Cut Pro 5.1.2 asked a plug-in to render on the GPU unless the plug-in returned <code>canDoHardware = NO</code> from <code>-frameSetup</code>. Final Cut Pro 6 asks a plug-in to render in software if: </p><ul class="simple"><li><p>The plug-in returns <code>canDoSoftware=YES</code> from <code>-frameSetup</code></p></li><li><p>AND</p></li><li><p>The plug-in specifies <code>kFxPropertyKey_SupportsRowBytes = YES</code></p></li></ul><p>Otherwise, Final Cut Pro 6 asks the plug-in to render in hardware. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_37" title="Consistent Parameter Change Notification"></a><h4>Consistent Parameter Change Notification</h4><p>Final Cut Pro 5.1.2 sent plug-ins the <code>-parameterChanged:</code> message only if the parameter change caused a render. If the playhead was not on the item with the effect, Final Cut Pro 5.1.2 did not send the message. Final Cut Pro 6 sends a plug-in this message immediately when a parameter changes, whether the change causes a render or not. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_38" title="Requesting a Nonexistent Parameter"></a><h4>Requesting a Nonexistent Parameter</h4><p>In Final Cut Pro 5.1.2, a plug-in request for the value of a parameter that had not been added created an Objective-C exception and left Final Cut Pro in an inconsistent state. In Final Cut Pro 6, a request  for a parameter that does not exist simply returns NO.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_39" title="Output Pixel Aspect Ratio Reported Correctly"></a><h4>Output Pixel Aspect Ratio Reported Correctly</h4><p>In Final Cut Pro 5.1.2, if an FxPlug effect was rendering in software and did not change the size of the output image, the output image would always have a pixel aspect ratio of 1.0. In Final Cut Pro 6, the pixel aspect ratio is reported correctly.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_40" title="Remaining Issues in Final Cut Pro 6"></a><h3>Remaining Issues in Final Cut Pro 6</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_41" title="No Support for Onscreen Controls"></a><h4>No Support for Onscreen Controls</h4><p>Final Cut Pro 6 does not support onscreen controls.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_42" title="No Support for Resizing Output Images"></a><h4>No Support for Resizing Output Images</h4><p>Final Cut Pro 6 does not allow a filter to resize its output image. In addition, it no longer calls the <code>-getOutputWidth:height:</code> method.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_43" title="Some APIs Available Only During Render&Acirc;&nbsp;"></a><h4>Some APIs Available Only During Render </h4><p>In Final Cut Pro 6, the FxTimingAPI and FxTemporalImageAPI only work correctly if called during one of the following selectors: </p><ul class="spaceabove"><li class="li"><p><code>-getOutputWidth: height:</code> </p></li><li class="li"><p><code>-frameSetup</code></p></li><li class="li"><p><code>-renderOutput</code></p></li><li class="li"><p><code>-frameCleanup</code></p></li></ul><p>As well, sampling keyframed parameters at arbitrary times only works during these selectors.
</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_44" title="Motion 3"></a><h3>Motion 3</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_45" title="Now Notifying Parameter Changes"></a><h4>Now Notifying Parameter Changes</h4><p>Motion 2.1 did not call <code>-parameterChanged:</code> when the value of a compound parameter (e.g. point, color, histogram, gradient) changed. Motion 3 does.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_46" title="Fixed Pixel Aspect of Textures from Image Wells"></a><h4>Fixed Pixel Aspect of Textures from Image Wells</h4><p>Motion 2.1 did not provide the correct pixelAspect value for FxTexture images retrieved from image well parameters. Motion 3 corrects this problem.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_47" title="Float Images pixelFormat Correction"></a><h4>Float Images pixelFormat Correction</h4><p>Motion 2.1 ordered pixel components RGBA in floating-point images, but the <code>-pixelFormat</code> method returned ARGB. Motion 3 corrects this problem. You can determine whether floating-point images are mislabeled by querying <code>[FxHostCapabilities formatsFloatRGBABitmapsAsARGB]</code>.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_48" title="Temporal Image Retrieval for Image Wells"></a><h4>Temporal Image Retrieval for Image Wells</h4><p>Motion 2.1 had problems retrieving images from image well parameters at arbitrary times. The resulting images were at incorrect times and upside-down.  Motion 3 retrieves these images correctly.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_49" title="Support for Non-Animated Parameters"></a><h4>Support for Non-Animated Parameters</h4><p>Motion 3 adds support for the<code> kFxParameterFlag_NOT_ANIMATABLE</code> flag.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_50" title="Scale Factor and Resizing Reconciled"></a><h4>Scale Factor and Resizing Reconciled</h4><p>Motion 3 corrects an issue in Motion 2.1 that produced incorrect results when resizing either via <code>-getOutputWidth:height:</code> or down-sampling for low quality render.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-SW2" title="Features of FxPlug SDK 1.2.1"></a><h2>Features of FxPlug SDK 1.2.1</h2><p>The FxPlug SDK 1.2.1 includes two new protocols, one for managing 3D camera and layer information in Motion, and another that allows plug-ins to manage backward compatibility issues. The host applications Final Cut Pro 6.0.1 and Motion 3.0.1 also contain fixes related to the FxPlug APIs.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_51" title="The FxPlug 1.2.1 Framework"></a><h3>The FxPlug 1.2.1 Framework</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_52" title="3D Support"></a><h4>3D Support</h4><p><strong>Motion only:</strong> Plug-ins can use the new Fx3DAPI protocol to get the 3D transforms for the camera and for the plug-in's layer.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_53" title="Versioning Support"></a><h4>Versioning Support</h4><p>Plug-ins that include a "version" key in their Info.plist files can use the new FxVersioningAPI protocol to determine what version of their plug-in was used when a project was created.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_54" title="Angle Units"></a><h4>Angle Units</h4><p>For angle parameters, <code>-getFloatValue</code> and <code>-setFloatValue</code> now use degrees in all host applications.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_55" title="New Examples"></a><h3>New Examples</h3><p>In addition to SimpleMatte and SimplePaint, the FxPlug SDK 1.2 provided new example plug-in projects installed in /Developer/Examples/FxPlug:</p><ul class="spaceabove"><li class="li"><p>DirectionalBlurExample</p></li><li class="li"><p>Options Dialog</p></li><li class="li"><p>ScrollingRichText</p></li><li class="li"><p>Slow SolidColor</p></li></ul><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_56" title="Final Cut Pro 6.0.1 Changes"></a><h3>Final Cut Pro 6.0.1 Changes</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_57" title="Correct Duration for Transition Effects"></a><h4>Correct Duration for Transition Effects</h4><p>The method <code>[FxTimingAPI durationForEffect]</code> returns the correct duration of FxPlug transition effects.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_58" title="Correct Start Time and Duration for Untrimmed Media"></a><h4>Correct Start Time and Duration for Untrimmed Media</h4><p>The methods <code>[FxTimingAPI startTimeOfImageParm]</code> and <code>[FxTimingAPI durationOfImageParm] </code>return the correct start time and duration for image parameters, even if the media in the image wells do not have in and out points set.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_59" title="Group Parameters Can Be Hidden"></a><h4>Group Parameters Can Be Hidden</h4><p>The <code>kFxParameterFlag_HIDDEN</code> flag works correctly with group start and end markers.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_60" title="Parameter List No Longer Scrolls Inappropriately"></a><h4>Parameter List No Longer Scrolls Inappropriately</h4><p>Hiding or showing a parameter no longer causes the parameter list to scroll to the top. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_61" title="No Artifacts in Parameter List"></a><h4>No Artifacts in Parameter List</h4><p>Hiding a parameter no longer causes a spurious horizontal line to be drawn in the parameter list.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_62" title="Correct Channel Order"></a><h4>Correct Channel Order</h4><p>Previously, the output images for RGB-only generators would be labeled as RGBA, but the results would be interpreted as ARGB in 8-bit.  The images are now correctly labeled as ARGB in 8-bit and RGBA in float.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_63" title="Motion 3.0.1 Changes"></a><h3>Motion 3.0.1 Changes</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_64" title="No Gamma Shift"></a><h4>No Gamma Shift</h4><p>Retrieving bitmap images using the temporal image API no longer causes a gamma shift in the retrieved image.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_65" title="Correct Rendering"></a><h4>Correct Rendering</h4><p>Retrieving bitmap images from a group no longer causes the group to render upside down.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_66" title="Correct Memory Management"></a><h4>Correct Memory Management</h4><p>Motion now properly releases custom NSViews when a filter is deleted.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_67" title="Proper Bit Setting"></a><h4>Proper Bit Setting</h4><p>Retrieving bitmap images from 16-bit per channel footage now returns proper 32-bit per channel footage.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_68" title="Avoid Unnecessary Rendering"></a><h4>Avoid Unnecessary Rendering</h4><p>Repeated renders are no longer queued up when a custom control calls <code>-startAction</code> and <code>-endAction</code> during its -<code>drawRect:</code> method. This keeps the control and the current frame from constantly rerendering.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_69" title="Fix Crash Bug"></a><h4>Fix Crash Bug</h4><p>Motion no longer crashes  under certain circumstances when calling <code>-currentTime:</code> in the FxCustomParameterActionAPI protocol.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_70" title="Parameters Updated Correctly"></a><h4>Parameters Updated Correctly</h4><p>Parameters are now properly updated in the inspector when their enabled-disabled or hidden-shown state is changed.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-SW3" title="Features of FxPlug SDK 1.2.2"></a><h2>Features of FxPlug SDK 1.2.2</h2><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_71" title="The FxPlug 1.2.2 Framework"></a><h3>The FxPlug 1.2.2 Framework</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_72" title="FxImageColorInfo Enumeration"></a><h4>FxImageColorInfo Enumeration</h4><p>The new <code>FxImageColorInfo</code> enumerated type identifies some basic color properties of an FxImage.  For YUV images, this enumeration tells you whether you should use the Rec. 601 or Rec. 709 color matrix to convert an image to RGB.  For RGB images, it describes the gamma level of the image.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_73" title="Xcode Template Location"></a><h4>Xcode Template Location</h4><p>FxPlug SDK 1.2.2 installs its Xcode templates in the location expected by Xcode 2.5 and later. Symbolic links are installed into the legacy location, so you can still open the templates using an earlier version of Xcode.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_74" title="Final Cut Pro 6.0.2 Changes"></a><h3>Final Cut Pro 6.0.2 Changes</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_75" title="Parameter Value Retrieval"></a><h4>Parameter Value Retrieval</h4><p>Plug-ins can now evaluate their parameter values at any time during <code>-parameterChanged</code>, or from within custom UI code.  Previously, parameters could be evaluated at any time during <code>-renderOutput</code>, but otherwise only at the current time.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_76" title="Collapsible Groups"></a><h4>Collapsible Groups</h4><p>Parameter groups now contain disclosure triangles that allow a group to be collapsed and expanded.  The <code>kFxParameterFlag_COLLAPSED</code> flag is also respected; plug-ins can use this flag to create groups that are initially collapsed, or to programmatically collapse or expand groups in response to other parameter changes.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_77" title="Start Point, End Point and Reverse Transitions"></a><h4>Start Point, End Point and Reverse Transitions</h4><p>The start point, end point, and reverse controls in the Transition Viewer are now respected when rendering FxPlug transitions.  These three controls affect the "time fraction" passed to the transition's render method; the "reverse" control will also swap the A and B images.  You should not have to change your plug-in to take advantage of these controls.
</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_78" title="Undo and Copy/Paste Crashes"></a><h4>Undo and Copy/Paste Crashes</h4><p>Fixed a bug that could result in crashes when undoing the addition of a filter, or when copying and pasting filters.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_79" title="Nested Groups"></a><h4>Nested Groups</h4><p>Hiding and disabling groups now work correctly with nested groups.  However, there is still no visual indication that the groups are nested.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_80" title="YUV Images"></a><h4>YUV Images</h4><p>Plug-ins can use the new <code>FxImageColorInfo</code> API to determine if a YUV image is Rec. 601 or Rec. 709.  This allows for improved YUV support, or accurate conversion to high-precision RGB within the plug-in.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_81" title="FxTemporalTransitionImage"></a><h4>FxTemporalTransitionImage</h4><p>Previously, the <code>FxTemporalTransitionImage</code> API interpreted the times passed as relative to the requested source clip.  Now the times are interpreted as relative to the transition item. This is consistent with all other uses of time in Final Cut Pro. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_82" title="Multiple Monitors"></a><h4>Multiple Monitors</h4><p>Fixed a bug where custom UI could appear in the wrong location if the filter viewer was dragged to a second monitor.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_83" title="Legacy Non-Real-Time Display Path"></a><h4>Legacy Non-Real-Time Display Path</h4><p>Fixed a bug where input images in the legacy non-real-time display path were not tagged with the correct aspect ratio.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_84" title="Transition Input images now have the correct field order"></a><h4>Transition Input images now have the correct field order</h4><p>Fixed a bug where input images for transitions were not labeled with the correct field order.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_85" title="Hidden Groups"></a><h4>Hidden Groups</h4><p>Final Cut no longer ignores the <code>kFxParameterFlag_HIDDEN</code> flag when creating groups.  However, groups must be disabled after the parameters they contain have been added.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_86" title="Motion 3.0.2 Changes"></a><h3>Motion 3.0.2 Changes</h3><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_87" title="Custom Control Saving"></a><h4>Custom Control Saving</h4><p>Previously, when a user changed a document with a custom control, Motion did not flag the document as changed and could close it without saving the changes. Motion now properly flags the document as changed. It also fixes a crash that could occur during an undo.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_88" title="Image Well Gamma Shift"></a><h4>Image Well Gamma Shift</h4><p>When you retrieve a bitmap from an image well parameter, the image now has the proper gamma setting that matches the gamma setting it would have if you had dropped it directly into the timeline.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_89" title="API Object Refactoring"></a><h4>API Object Refactoring</h4><p>The various API Objects have been refactored to make them accessible at more times and to reduce the number of thread related problems. Plug-in developers should test to be sure that the APIs all still work as expected.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_90" title="Interpolation for Upsampling"></a><h4>Interpolation for Upsampling</h4><p>Motion now uses interpolation rather than line doubling to upsample fields to frame size.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_91" title="FAQs"></a><h2>FAQs</h2><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_92" title="How can I debug my plug-in?"></a><h3>How can I debug my plug-in?</h3><p>To test your plug-in code in a target application, you can choose Project > New Custom Executable in Xcode and select Final Cut or Motion. Then choose Run > Debug to launch the selected host in the Xcode debugger.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_93" title="How can I retrieve resource files from my plug-in bundle?"></a><h3>How can I retrieve resource files from my plug-in bundle?</h3>
<p>You can put the file in the Resources folder for the plug-in. Then you can access the bundle from a method of one of the classes in your plug-in, like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>  NSBundle *bundle = [NSBundle bundleForClass:[self  class]];<span></span></pre></td></tr></table></div>
<p>(The FxPlug Xcode templates does this to get localized strings.) To get data from a file called “filename.extension” in your Resources folder, you can use this snippet:</p>
<div class="codesample"><table><tr><td scope="row"><pre>NSBundle *bundle = [NSBundle bundleForClass:[  self  class]];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *path = [bundle pathForResource:  @"filename"<span></span></pre></td></tr><tr><td scope="row"><pre>ofType:  @"extension"  ];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> NSString *dataString = [NSString stringWithContentsOfFile:path];<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_94" title="Copying and pasting UUIDs from Terminal is tedious. How can I simplify this step?"></a><h3>Copying and pasting UUIDs from Terminal is tedious. How can I simplify this step?</h3>
<p>You can create an Xcode script to speed this up. To do this in Xcode 3.0, follow these steps:</p><ol class="ol"><li class="li"><p>Select <code>Edit User Scripts</code> from the <code>User Scripts</code> menu (identified by the script icon in the Xcode menu bar). </p></li><li class="li"><p>Select <code>Code</code> from the list of script types.</p></li><li class="li"><p>Click the <code>Add</code> button and select <code>Shell Script</code>.</p></li><li class="li"><p>Double click the name <code>Shell Script</code> and revise it to <code>GenUUID</code> or some other appropriate name.</p></li><li class="li"><p>Add the line <code>echo -n `uuidgen`</code> to the script .</p></li><li class="li"><p>Change the <code>Output</code> option to <code>Replace Selection</code>.</p></li><li class="li"><p>Close the <code>Edit User Scripts</code> window.</p></li></ol><p>You can now generate a UUID in Xcode by choosing your new script from the <code>Code</code> submenu of the <code>User Scripts</code> menu.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_95" title="How can I determine if an input frame is interlaced?"></a><h3>How can I determine if an input frame is interlaced?</h3><p>If a frame is interlaced, you’ll know in your <code>-renderOutput:</code> method, because the<code> FxRenderInfo</code> structure that’s passed in will have the “field” member set to either <code>kFxField_UPPER</code> or <code>kFxField_LOWE</code>R. Note that it doesn’t tell you the field you have, but rather what the field order is. If a frame is not interlaced, then the “field” member will have the value <code>kFxField_NONE</code>.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_96" title="How can I access a single field from an interlaced frame?"></a><h3>How can I access a single field from an interlaced frame?</h3><p>First, get the FxTemporalImageAPI and call one of these two methods:</p><div class="codesample"><table><tr><td scope="row"><pre>-getInputBitmap:withInfo:atTime:<span></span></pre></td></tr></table></div><p>or</p><div class="codesample"><table><tr><td scope="row"><pre>-getInputTexture:withInfo:atTime:<span></span></pre></td></tr></table></div><p>For the first field of frame <em>t</em>, use time <em>t</em>, and for the second field, use time <em>t + 0.5</em>.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_97" title="How can I determine what application my plug-in is running in?"></a><h3>How can I determine what application my plug-in is running in?</h3><p>The following code snippet returns a string, <code>appIdentity</code>, which specifies the host application:</p><div class="codesample"><table><tr><td scope="row"><pre>CFBundleRef appBundle = CFBundleGetMainBundle();<span></span></pre></td></tr><tr><td scope="row"><pre>CFStringRef appIdentity = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>if ( appBundle != NULL )<span></span></pre></td></tr><tr><td scope="row"><pre>    appIdentity = CFBundleGetIdentifier( appBundle );<span></span></pre></td></tr></table></div><p>Motion’s bundle identifier is <code>com.apple.motion</code>; Final Cut Pro’s is <code>com.apple.finalcutpro</code>.</p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_98" title="How can I specify another clip as input?"></a><h3>How can I specify another clip as input?</h3><p>In FxPlug parlance, a reference to another clip or external media file is called an image reference. So, using the FxParameterCreationAPI protocol, call the following method to create the parameter:</p><div class="codesample"><table><tr><td scope="row"><pre>-addImageReferenceWithName:parmId:parmFlags:<span></span></pre></td></tr></table></div><p>To get the parameter’s value, use either:</p><div class="codesample"><table><tr><td scope="row"><pre>-getBitmap:layerOffsetX:layerOffsetY:requestInfo:fromParm:atTime:<span></span></pre></td></tr></table></div><p>or</p><div class="codesample"><table><tr><td scope="row"><pre>-getTexture:layerOffsetX:layerOffsetY:requestInfo:fromParm:atTime:<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_99" title="How can I get the current time?"></a><h3>How can I get the current time?</h3><p>In your<code> -parameterChanged:</code> method, and in response to an event in a custom parameter view or on-screen control, you’ll need to determine the current time. You can do this by calling the <code>-currentTime</code> method in the FxCustomParameterAPI protocol. </p><a name="//apple_ref/doc/uid/TP40002180-CH235-DontLinkElementID_100" title="Can I define multiple plug-in bundles that populate the same group?"></a><h3>Can I define multiple plug-in bundles that populate the same group?</h3><p>Yes, but the Plug-in Manager places a restriction on how you do this. If you create multiple FxPlug effects in different bundles, and assign them to the same groups, the different bundles must use different group UUIDs, but the same group name. If you use the same group UUID in two bundles, the plug-ins in only one of the two bundles are loaded.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory/RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-07-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Conceptual/FXPlug_overview/Overview/Overview.html%3Fid%3DTP40002180-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Conceptual/FXPlug_overview/Overview/Overview.html%3Fid%3DTP40002180-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Conceptual/FXPlug_overview/Overview/Overview.html%3Fid%3DTP40002180-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
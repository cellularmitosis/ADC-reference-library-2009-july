<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Distributing Software With Internet-Enabled Disk Images</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Distributing Software With Internet-Enabled Disk Images"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001759" title="Distributing Software With Internet-Enabled Disk Images"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_guidelines.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_install_quick_look.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001759-BCIHFACA" title="Distributing Software With Internet-Enabled Disk Images"></a><hr /><H1>Distributing Software With Internet-Enabled Disk Images</H1><p>Disk images have become the preferred transport mechanism for downloading files in Mac OS X. Starting with Mac OS X version 10.2.3, the Disk Copy application (located in <code>/Applications/Utilities</code>) supports “internet-enabled” disk images, which help create a better user experience when installing from disk images. This section describes that process and how you can take advantage of it.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001759-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;Starting in Mac OS X version 10.3, the features of the Disk Copy application were integrated into the Disk Utility application, also located in <code>/Applications/Utilities</code>.</p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_disk_images.html#//apple_ref/doc/uid/20001759-97989-TPXREF3">Improving the User Experience</a>
				
			<br/>
			
        
			
			
				<a href="sd_disk_images.html#//apple_ref/doc/uid/20001759-97785-TPXREF4">Creating An Internet-Enabled Disk Image</a>
				
			<br/>
			
        
			
			
				<a href="sd_disk_images.html#//apple_ref/doc/uid/20001759-102552-TPXREF1">Adding a License Agreement to a Disk Image</a>
				
			<br/>
			
        
			
			
				<a href="sd_disk_images.html#//apple_ref/doc/uid/20001759-97706-TPXREF5">How Disk Copy Handles an Internet-Enabled Disk Image</a>
				
			<br/>
			
        
			
			
				<a href="sd_disk_images.html#//apple_ref/doc/uid/20001759-101817-TPXREF2">Caveats for Internet-Enabled Disk Images</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001759-97989" title="Improving the User Experience"></a><a name="//apple_ref/doc/uid/20001759-97989-TPXREF3" title="Improving the User Experience"></a><h2>Improving the User Experience</h2><p>Currently, the typical user-experience for Mac OS X software installation looks something like the following:</p><ol class="ol"><li class="li"><p>The user uses a browser to download a disk image file (a file with a <code>.dmg</code> extension) that has been archived in Stuffit or MacBinary format.</p></li><li class="li"><p>The browser launches StuffIt Expander to expand the downloaded file. The user watches a progress bar.</p></li><li class="li"><p>StuffIt Expander launches Disk Copy to mount the disk image. The user watches another progress bar.</p></li><li class="li"><p>The user locates the mounted image, opens a Finder window (if one isn’t set to open automatically), and copies the contents out of the disk image.</p></li><li class="li"><p>The user unmounts the disk image.</p></li><li class="li"><p>The user throws away the <code>.dmg</code> file.</p></li><li class="li"><p>The user throws away the compressed <code>.dmg</code> file, if StuffIt Expander is not configured to delete compressed files automatically.</p></li></ol><p>However, it is now possible to eliminate many of these steps. Because read-only <code>.dmg</code> files use a flat file format and Disk Copy can create compressed disk images, it is unnecessary to convert a <code>.dmg</code> file to either StuffIt format or MacBinary format. As a result, steps 2 and 7 can be eliminated. New internet-enabled disk images eliminate most of the remaining steps, and the user experience is simplified as follows:</p><ol class="ol"><li class="li"><p>The user downloads a <code>.dmg</code> file using a browser.</p></li><li class="li"><p>The browser launches Disk Copy with the <code>.dmg</code> file. The user watches a progress bar while Disk Copy mounts the disk image, copies the contents out of the image, unmounts the image, and moves the <code>.dmg</code> file to the Trash.</p></li><li class="li"><p>The user locates the downloaded files and perhaps moves them to their final destination.</p></li></ol><p>In the new model, the user never needs to handle or see the <code>.dmg</code> file or the mounted disk image. Instead, the user sees only the files contained within the disk image. In other words, the <code>.dmg</code> file becomes an implementation detail that is transparent and irrelevant to the user; the included files appear at the download location as if they were downloaded directly.</p><p>When it moves the <code>.dmg</code> file to the trash, Disk Copy clears the internet-enabled flag, so that if the user decides to remove the file from the trash for future use, it will operate as a standard disk image.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001759-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp;If necessary, you can use PackageMaker to package your software, then distribute the package via internet-enabled disk image. After receiving the software, the user must install it with Installer (and delete the package file, if they don’t want to keep it around). For information on when you might want to do this, see <span class="content_text"><a href="sd_guidelines.html#//apple_ref/doc/uid/20001758-1020242">“Reasons for Using PackageMaker and Installer.”</a></span></p></div><a name="//apple_ref/doc/uid/20001759-97785" title="Creating An Internet-Enabled Disk Image"></a><a name="//apple_ref/doc/uid/20001759-97785-TPXREF4" title="Creating An Internet-Enabled Disk Image"></a><h2>Creating An Internet-Enabled Disk Image</h2><p>An internet-enabled disk image is identical to a regular disk image except that it has a special flag set. You create the disk image normally and then set the internet-enabled flag with the following command, executed in a Terminal window, where <code>&lt;pathToDmg></code> is the path to the image file:</p><div class="codesample"><table><tr><td scope="row"><pre>hdiutil internet-enable -yes|-no|-query &lt;pathToDMG><span></span></pre></td></tr></table></div><p>Use <code>-yes</code> to enable the flag, <code>-no</code> to disable the flag, and <code>-query</code> to test whether the <code>.dmg</code> file is already internet-enabled.</p><p>You can set the internet-enabled flag only for read-only disk images. Read-write disk images cannot be internet enabled. Older <code>.img</code> and <code>.smi</code> files also cannot be internet enabled.</p><p>Disk Copy clears the internet-enabled flag after it processes a disk image. For this reason, if you need to test the file before putting it online, you must make a copy of the disk image first and test the copy. You cannot retrieve a processed disk image from the Trash and then place it online—it will no longer be internet-enabled.</p><p>The internet-enabled flag does not interfere with previous versions of Disk Copy. Previous versions of Disk Copy will simply ignore the flag and treat the disk image as it would a non-internet-enabled disk image.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001759-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;For a brief tutorial on creating a disk image, see <em><a href="../../../../Porting/Conceptual/PortingUnix/index.html#//apple_ref/doc/uid/TP30001003" target="_top">Porting UNIX/Linux Applications to Mac OS X</a></em> in <span class="content_text"><a href="../../../../Darwin/index.html#//apple_ref/doc/uid/TP30000422" target="_top">Darwin Documentation</a></span>.</p></div><a name="//apple_ref/doc/uid/20001759-102552" title="Adding a License Agreement to a Disk Image"></a><a name="//apple_ref/doc/uid/20001759-102552-TPXREF1" title="Adding a License Agreement to a Disk Image"></a><h2>Adding a License Agreement to a Disk Image</h2><p>The Disk Copy application has the ability to display a multi-lingual software license agreement before mounting a disk image. The image will not be mounted unless the user indicates agreement with the license. You can obtain a software development kit (Software License Agreements for UDIFs) that explains how to add license agreements to Mac OS X-native UDIF disk images at <span class="content_text"><a href="http://developer.apple.com/sdk/index.html" target="_top">http://developer.apple.com/sdk/index.html</a></span>.</p><a name="//apple_ref/doc/uid/20001759-97706" title="How Disk Copy Handles an Internet-Enabled Disk Image"></a><a name="//apple_ref/doc/uid/20001759-97706-TPXREF5" title="How Disk Copy Handles an Internet-Enabled Disk Image"></a><h2>How Disk Copy Handles an Internet-Enabled Disk Image</h2><p>Disk Copy processes an internet-enabled disk image a little differently than a regular disk image, although the differences are mostly additional behavior. The disk image can still contain a software license agreement or it can be encrypted and require a password. The following are the new and modified Disk Copy behaviors when handling an internet-enabled disk image:</p><ul class="ul"><li class="li"><p>Disk Copy mounts the disk image in a hidden location so that it is not displayed on the Desktop or in Finder windows.</p></li><li class="li"><p>After mounting the image, Disk Copy copies the contents of the disk image out of the image and into the same directory in which the <code>.dmg</code> file is stored, which is usually the user’s download folder. If there is only one file visible to the user in the disk image, that file is copied directly to the destination. Any hidden files, such as a <code>.DS_Store</code> file or a folder background image, are not copied. If there are multiple files visible to the user at the root of the disk image, a new directory is created at the destination and the visible files are copied into it. If present, the disk image’s <code>.DS_Store</code> file is also copied to the new directory, thereby preserving icon positions; other hidden files are not copied. The new directory’s name is the same as the disk image’s, but without the <code>.dmg</code> extension.</p></li><li class="li"><p>After copying the disk image’s contents, Disk Copy unmounts the image, clears the internet-enabled flag in the <code>.dmg</code> file, and moves the <code>.dmg</code> file into the Trash. Disk Copy does not delete the <code>.dmg</code> file. If the user wants to keep the <code>.dmg</code> file of a download, perhaps for archival purposes, the user can retrieve the file from the Trash. Because Disk Copy has cleared the internet-enabled flag, however, the <code>.dmg</code> file now behaves like a regular disk image file. In other words, the internet-enabled behavior occurs only when the disk image is initially downloaded.</p></li></ul><a name="//apple_ref/doc/uid/20001759-101817" title="Caveats for Internet-Enabled Disk Images"></a><a name="//apple_ref/doc/uid/20001759-101817-TPXREF2" title="Caveats for Internet-Enabled Disk Images"></a><h2>Caveats for Internet-Enabled Disk Images</h2><p>Although supplying an internet-enabled disk image can reduce the number of steps a user has to perform to install your software, there are some issues you should be aware of:</p><ul class="ul"><li class="li"><p>To ensure optimum launch time for your application, be sure you address possible prebinding issues described in <span class="content_text"><a href="sd_guidelines.html#//apple_ref/doc/uid/20001758-1036551">“Drag-and-Drop Installation”</a></span> and <span class="content_text"><a href="sd_install_features.html#//apple_ref/doc/uid/20001763-1023356">“Prebinding.”</a></span> In brief, you should provide users with information on why they might need to update prebinding for your application and how to to so.</p></li><li class="li"><p>Some users may be confused when they double-click a disk image file and it then “goes away” (to the Trash).</p></li><li class="li"><p>A user who finds and retrieves the image file from the Trash may again be confused that double-clicking it a second time doesn’t produce the same behavior.</p></li><li class="li"><p>Some users may not be experienced with the use of disk images, whether these images are internet enabled or otherwise.</p></li></ul><p>If you are concerned about any of these issues, you can provide instruction at your download site or through a Read Me file or other mechanism. You can tailor the information you provide to the sophistication of your target audience.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_guidelines.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_install_quick_look.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_disk_images.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_disk_images.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_disk_images.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<html><head><title>Mac OS X
 Manual Page For yp(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/yp" title="Mac OS X
 Manual Page for yp(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/yp"; name=yp(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
YP(8)                     BSD System Manager's Manual                    YP(8)

<b>NAME</b>
     <b>yp</b> -- description of the YP/NIS system

<b>SYNOPSIS</b>
     <b>yp</b>

<b>DESCRIPTION</b>
     The <b>YP</b> subsystem allows network management of passwd, group, netgroup, hosts, services, rpc, bootparams
     and ethers file entries through the functions <a href="../man3/getpwent.3.html#//apple_ref/doc/man/3/getpwent">getpwent(3)</a>, <a href="../man3/getgrent.3.html#//apple_ref/doc/man/3/getgrent">getgrent(3)</a>, <a href="../man3/getnetgrent.3.html#//apple_ref/doc/man/3/getnetgrent">getnetgrent(3)</a>, <a href="../man3/gethostent.3.html#//apple_ref/doc/man/3/gethostent">gethostent(3)</a>,
     <a href="../man3/getnetent.3.html#//apple_ref/doc/man/3/getnetent">getnetent(3)</a>, <a href="../man3/getrpcent.3.html#//apple_ref/doc/man/3/getrpcent">getrpcent(3)</a>, and <a href="../man3/ethers.3.html#//apple_ref/doc/man/3/ethers">ethers(3)</a>.  The <a href="bootparamd.8.html#//apple_ref/doc/man/8/bootparamd">bootparamd(8)</a> daemon makes direct NIS library calls
     since there are no functions in the standard C library for reading bootparams.  NIS support is enabled
     in <!-- a -->nsswitch.conf(5)<!-- /a -->.

     The <b>YP</b> subsystem is started automatically in <u>/etc/rc</u> if it has been initialized in <u>/etc/rc.conf</u> and if
     the directory <u>/var/yp</u> exists (which it does in the default distribution).  The default NIS domain must
     also be set with the <a href="../man1/domainname.1.html#//apple_ref/doc/man/1/domainname">domainname(1)</a> command, which will happen automatically at system startup if it is
     specified in <u>/etc/rc.conf</u>.

     NIS is an RPC-based client/server system that allows a group of machines within an NIS domain to share
     a common set of configuration files.  This permits a system administrator to set up NIS client systems
     with only minimal configuration data and add, remove or modify configuration data from a single loca-<font color="#ffffff" class="whiteout">tion.&nbsp;location.</font>
     tion.

     The canonical copies of all NIS information are stored on a single machine called the NIS <u>master</u>
     <u>server</u>.  The databases used to store the information are called NIS <u>maps</u>.  In FreeBSD, these maps are
     stored in <u>/var/yp/&lt;domainname&gt;</u> where &lt;<u>domainname&gt;</u> is the name of the NIS domain being served.  A single
     NIS server can support several domains at once, therefore it is possible to have several such directo-<font color="#ffffff" class="whiteout">ries,&nbsp;directories,</font>
     ries, one for each supported domain.  Each domain will have its own independent set of maps.

     In FreeBSD, the NIS maps are Berkeley DB hashed database files (the same format used for the <a href="../man5/passwd.5.html#//apple_ref/doc/man/5/passwd">passwd(5)</a>
     database files).  Other operating systems that support NIS use old-style <b>ndbm</b> databases instead
     (largely because Sun Microsystems originally based their NIS implementation on <b>ndbm</b>, and other vendors
     have simply licensed Sun's code rather than design their own implementation with a different database
     format).  On these systems, the databases are generally split into <u>.dir</u> and <u>.pag</u> files which the <b>ndbm</b>
     code uses to hold separate parts of the hash database.  The Berkeley DB hash method instead uses a sin-<font color="#ffffff" class="whiteout">gle&nbsp;single</font>
     gle file for both pieces of information.  This means that while you may have <u>passwd.byname.dir</u> and
     <u>passwd.byname.pag</u> files on other operating systems (both of which are really parts of the same map),
     FreeBSD will have only one file called <u>passwd.byname</u>.  The difference in format is not significant:
     only the NIS server, <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a>, and related tools need to know the database format of the NIS maps.
     Client NIS systems receive all NIS data in ASCII form.

     There are three main types of NIS systems:

     1.   NIS clients, which query NIS servers for information.

     2.   NIS master servers, which maintain the canonical copies of all NIS maps.

     3.   NIS slave servers, which maintain backup copies of NIS maps that are periodically updated by the
          master.

     A NIS client establishes what is called a <u>binding</u> to a particular NIS server using the <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> dae-<font color="#ffffff" class="whiteout">mon.&nbsp;daemon.</font>
     mon.  The <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> utility checks the system's default domain (as set by the <a href="../man1/domainname.1.html#//apple_ref/doc/man/1/domainname">domainname(1)</a> command)
     and begins broadcasting RPC requests on the local network.  These requests specify the name of the
     domain for which <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> is attempting to establish a binding.  If a server that has been configured
     to serve the requested domain receives one of the broadcasts, it will respond to <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a>, which will
     record the server's address.  If there are several servers available (a master and several slaves, for
     example), <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> will use the address of the first one to respond.  From that point on, the client
     system will direct all of its NIS requests to that server.  The <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> utility will occasionally
     ``ping'' the server to make sure it is still up and running.  If it fails to receive a reply to one of
     its pings within a reasonable amount of time, <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> will mark the domain as unbound and begin
     broadcasting again in the hopes of locating another server.

     NIS master and slave servers handle all NIS requests with the <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> daemon.  The <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> utility
     is responsible for receiving incoming requests from NIS clients, translating the requested domain and
     map name to a path to the corresponding database file and transmitting data from the database back to
     the client.  There is a specific set of requests that <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> is designed to handle, most of which
     are implemented as functions within the standard C library:

     <b>yp_order</b>()   check the creation date of a particular map

     <b>yp_master</b>()  obtain the name of the NIS master server for a given map/domain

     <b>yp_match</b>()   lookup the data corresponding to a given in key in a particular map/domain

     <b>yp_first</b>()   obtain the first key/data pair in a particular map/domain

     <b>yp_next</b>()    pass <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> a key in a particular map/domain and have it return the key/data pair imme-<font color="#ffffff" class="whiteout">diately&nbsp;immediately</font>
                  diately following it (the functions <b>yp_first</b>() and <b>yp_next</b>() can be used to do a sequen-<font color="#ffffff" class="whiteout">tial&nbsp;sequential</font>
                  tial search of an NIS map)

     <b>yp_all</b>()     retrieve the entire contents of a map

     There are a few other requests which <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> is capable of handling (i.e., acknowledge whether or not
     you can handle a particular domain (YPPROC_DOMAIN), or acknowledge only if you can handle the domain
     and be silent otherwise (YPPROC_DOMAIN_NONACK)) but these requests are usually generated only by
     <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> and are not meant to be used by standard utilities.

     On networks with a large number of hosts, it is often a good idea to use a master server and several
     slaves rather than just a single master server.  A slave server provides the exact same information as
     a master server: whenever the maps on the master server are updated, the new data should be propagated
     to the slave systems using the <a href="yppush.8.html#//apple_ref/doc/man/8/yppush">yppush(8)</a> command.  The NIS <u>Makefile</u> (<u>/var/yp/Makefile</u>) will do this
     automatically if the administrator comments out the line which says ``NOPUSH=true'' (<u>NOPUSH</u> is set to
     true by default because the default configuration is for a small network with only one NIS server).
     The <a href="yppush.8.html#//apple_ref/doc/man/8/yppush">yppush(8)</a> command will initiate a transaction between the master and slave during which the slave
     will transfer the specified maps from the master server using <a href="ypxfr.8.html#//apple_ref/doc/man/8/ypxfr">ypxfr(8)</a>.  (The slave server calls
     <a href="ypxfr.8.html#//apple_ref/doc/man/8/ypxfr">ypxfr(8)</a> automatically from within <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a>; therefore it is not usually necessary for the administra-<font color="#ffffff" class="whiteout">tor&nbsp;administrator</font>
     tor to use it directly.  It can be run manually if desired, however.)  Maintaining slave servers helps
     improve NIS performance on large networks by:

     <b></b><b><u>oo</u></b>   Providing backup services in the event that the NIS master crashes or becomes unreachable

     <b></b><b><u>oo</u></b>   Spreading the client load out over several machines instead of causing the master to become over-<font color="#ffffff" class="whiteout">loaded&nbsp;overloaded</font>
         loaded

     <b></b><b><u>oo</u></b>   Allowing a single NIS domain to extend beyond a local network (the <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> daemon might not be
         able to locate a server automatically if it resides on a network outside the reach of its broad-<font color="#ffffff" class="whiteout">casts.&nbsp;broadcasts.</font>
         casts.  It is possible to force <a href="ypbind.8.html#//apple_ref/doc/man/8/ypbind">ypbind(8)</a> to bind to a particular server with <a href="ypset.8.html#//apple_ref/doc/man/8/ypset">ypset(8)</a> but this is
         sometimes inconvenient.  This problem can be avoided simply by placing a slave server on the local
         network.)

     The FreeBSD <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> is specially designed to provide enhanced security (compared to other NIS imple-<font color="#ffffff" class="whiteout">mentations)&nbsp;implementations)</font>
     mentations) when used exclusively with FreeBSD client systems.  The FreeBSD password database system
     (which is derived directly from 4.4BSD) includes support for <u>shadow</u> <u>passwords</u>.  The standard password
     database does not contain users' encrypted passwords: these are instead stored (along with other infor-<font color="#ffffff" class="whiteout">mation)&nbsp;information)</font>
     mation) in a separate database which is accessible only by the super-user.  If the encrypted password
     database were made available as an NIS map, this security feature would be totally disabled, since any
     user is allowed to retrieve NIS data.

     To help prevent this, FreeBSD's NIS server handles the shadow password maps (<u>master.passwd.byname</u> and
     <u>master.passwd.byuid</u>) in a special way: the server will only provide access to these maps in response to
     requests that originate on privileged ports.  Since only the super-user is allowed to bind to a privi-<font color="#ffffff" class="whiteout">leged&nbsp;privileged</font>
     leged port, the server assumes that all such requests come from privileged users.  All other requests
     are denied: requests from non-privileged ports will receive only an error code from the server.  Addi-<font color="#ffffff" class="whiteout">tionally,&nbsp;Additionally,</font>
     tionally, FreeBSD's <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> includes support for Wietse Venema's tcp wrapper package; with tcp wrap-<font color="#ffffff" class="whiteout">per&nbsp;wrapper</font>
     per support enabled, the administrator can configure <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> to respond only to selected client
     machines.

     While these enhancements provide better security than stock NIS, they are by no means 100% effective.
     It is still possible for someone with access to your network to spoof the server into disclosing the
     shadow password maps.

     On the client side, FreeBSD's <a href="../man3/getpwent.3.html#//apple_ref/doc/man/3/getpwent">getpwent(3)</a> functions will automatically search for the <u>master.passwd</u>
     maps and use them if they exist.  If they do, they will be used, and all fields in these special maps
     (class, password age and account expiration) will be decoded.  If they are not found, the standard
     <u>passwd</u> maps will be used instead.

<b>COMPATIBILITY</b>
     When using a non-FreeBSD NIS server for <a href="../man5/passwd.5.html#//apple_ref/doc/man/5/passwd">passwd(5)</a> files, it is unlikely that the default MD5-based for-<font color="#ffffff" class="whiteout">mat&nbsp;format</font>
     mat that FreeBSD uses for passwords will be accepted by it.  If this is the case, the value of the
     <u>passwd</u><b>_</b><u>format</u> setting in <!-- a -->login.conf(5)<!-- /a --> should be changed to "des" for compatibility.

     Some systems, such as SunOS 4.x, need NIS to be running in order for their hostname resolution func-<font color="#ffffff" class="whiteout">tions&nbsp;functions</font>
     tions (<b>gethostbyname</b>(), <b>gethostbyaddr</b>(), etc.) to work properly.  On these systems, <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> performs
     DNS lookups when asked to return information about a host that does not exist in its <u>hosts.byname</u> or
     <u>hosts.byaddr</u> maps.  FreeBSD's resolver uses DNS by default (it can be made to use NIS, if desired),
     therefore its NIS server does not do DNS lookups by default.  However, <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> can be made to perform
     DNS lookups if it is started with a special flag.  It can also be made to register itself as an NIS v1
     server in order to placate certain systems that insist on the presence of a v1 server (FreeBSD uses
     only NIS v2, but many other systems, including SunOS 4.x, search for both a v1 and v2 server when bind-<font color="#ffffff" class="whiteout">ing).&nbsp;binding).</font>
     ing).  FreeBSD's <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> does not actually handle NIS v1 requests, but this ``kludge mode'' is useful
     for silencing stubborn systems that search for both a v1 and v2 server.

     (Please see the <a href="ypserv.8.html#//apple_ref/doc/man/8/ypserv">ypserv(8)</a> manual page for a detailed description of these special features and flags.)

<b>HISTORY</b>
     The <b>YP</b> subsystem was written from the ground up by Theo de Raadt to be compatible to Sun's implementa-<font color="#ffffff" class="whiteout">tion.&nbsp;implementation.</font>
     tion.  Bug fixes, improvements and NIS server support were later added by Bill Paul.  The server-side
     code was originally written by Peter Eriksson and Tobias Reber and is subject to the GNU Public
     License.  No Sun code was referenced.

<b>BUGS</b>
     While FreeBSD now has both NIS client and server capabilities, it does not yet have support for
     <!-- a -->ypupdated(8)<!-- /a --> or the <b>yp_update</b>() function.  Both of these require secure RPC, which FreeBSD does not
     support yet either.

     The <a href="../man3/getservent.3.html#//apple_ref/doc/man/3/getservent">getservent(3)</a> and <a href="../man3/getprotoent.3.html#//apple_ref/doc/man/3/getprotoent">getprotoent(3)</a> functions do not yet have NIS support.  Fortunately, these files
     do not need to be updated that often.

     Many more manual pages should be written, especially <a href="../man3/ypclnt.3.html#//apple_ref/doc/man/3/ypclnt">ypclnt(3)</a>.  For the time being, seek out a local
     Sun machine and read the manuals for there.

     Neither Sun nor this author have found a clean way to handle the problems that occur when ypbind cannot
     find its server upon bootup.

BSD                              April 5, 1993                             BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/yp.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/yp.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/yp.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

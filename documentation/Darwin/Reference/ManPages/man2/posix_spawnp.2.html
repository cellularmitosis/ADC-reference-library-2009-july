<html><head><title>Mac OS X Developer Tools
 Manual Page For posix_spawnp(2)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/2/posix_spawnp" title="Mac OS X Developer Tools
 Manual Page for posix_spawnp(2)"><!-- headerDoc=man; indexgroup=Section 2; uid="//apple_ref/doc/man/2/posix_spawnp"; name=posix_spawnp(2) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
POSIX_SPAWN(2)              BSD System Calls Manual             <!-- a -->POSIX_SPAWN(2)<!-- /a -->

<b>NAME</b>
     <b>posix_spawn</b> <b>posix_spawnp</b> -- spawn a process

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;spawn.h&gt;</b>

     <u>int</u>
     <b>posix_spawn</b>(<u>pid</u><b>_</b><u>t</u> <u>*restrict</u> <u>pid</u>, <u>const</u> <u>char</u> <u>*restrict</u> <u>path</u>,
         <u>const</u> <u>posix</u><b>_</b><u>spawn</u><b>_</b><u>file</u><b>_</b><u>actions</u><b>_</b><u>t</u> <u>*file</u><b>_</b><u>actions</u>, <u>const</u> <u>posix</u><b>_</b><u>spawnattr</u><b>_</b><u>t</u> <u>*restrict</u> <u>attrp</u>,
         <u>char</u> <u>*const</u> <u>argv[restrict]</u>, <u>char</u> <u>*const</u> <u>envp[restrict]</u>);

     <u>int</u>
     <b>posix_spawnp</b>(<u>pid</u><b>_</b><u>t</u> <u>*restrict</u> <u>pid</u>, <u>const</u> <u>char</u> <u>*restrict</u> <u>file</u>,
         <u>const</u> <u>posix</u><b>_</b><u>spawn</u><b>_</b><u>file</u><b>_</b><u>actions</u><b>_</b><u>t</u> <u>*file</u><b>_</b><u>actions</u>, <u>const</u> <u>posix</u><b>_</b><u>spawnattr</u><b>_</b><u>t</u> <u>*restrict</u> <u>attrp</u>,
         <u>char</u> <u>*const</u> <u>argv[restrict]</u>, <u>char</u> <u>*const</u> <u>envp[restrict]</u>);

<b>DESCRIPTION</b>
     The <b>posix_spawn</b>() function creates a new process from the executable file, called the <u>new</u> <u>process</u> <u>file</u>,
     specified by <u>path</u>, which is an absolute or relative path to the file.  The <b>posix_spawnp</b>() function is
     identical to the <b>posix_spawn</b>() function if the <u>file</u> specified contains a slash character; otherwise,
     the <u>file</u> parameter is used to construct a pathname, with its path prefix being obtained by a search of
     the path specified in the environment by the ``PATH variable''.  If this variable isn't specified, the
     default path is set according to the _PATH_DEFPATH definition in &lt;<u>paths.h&gt;</u>, which is set to
     ``/usr/bin:/bin''.  This pathname either refers to an executable object file, or a file of data for an
     interpreter; <a href="execve.2.html#//apple_ref/doc/man/2/execve">execve(2)</a> for more details.

     The argument <u>pid</u> is a pointer to a pid_t variable to receive the pid of the spawned process; if this is
     NULL, then the pid of the spawned process is not returned.  If this pointer is non-NULL, then on suc-<font color="#ffffff" class="whiteout">cessful&nbsp;successful</font>
     cessful completion, the variable will be modified to contain the pid of the spawned process.  The value
     is undefined in the case of a failure.

     The argument <u>file</u><b>_</b><u>actions</u> is either NULL, or it is a a pointer to a file actions object that was ini-<font color="#ffffff" class="whiteout">tialized&nbsp;initialized</font>
     tialized by a call to <a href="../man3/posix_spawn_file_actions_init.3.html#//apple_ref/doc/man/3/posix_spawn_file_actions_init">posix_spawn_file_actions_init(3)</a> and represents zero or more file actions.

     File descriptors open in the calling process image remain open in the new process image, except for
     those for which the close-on-exec flag is set (see <a href="close.2.html#//apple_ref/doc/man/2/close">close(2)</a> and <a href="fcntl.2.html#//apple_ref/doc/man/2/fcntl">fcntl(2)</a>).  Descriptors that remain
     open are unaffected by <b>posix_spawn</b>() unless their behaviour is modified by a file action; see
     <a href="../man3/posix_spawn_file_actions_init.3.html#//apple_ref/doc/man/3/posix_spawn_file_actions_init">posix_spawn_file_actions_init(3)</a> for more information.

     The argument <u>attrp</u> is either NULL, or it is a pointer to an attributes object that was initialized by a
     call to <a href="../man3/posix_spawnattr_init.3.html#//apple_ref/doc/man/3/posix_spawnattr_init">posix_spawnattr_init(3)</a> and represents a set of spawn attributes to apply.  If NULL, then the
     default attributes are applied; otherwise, these attributes can control various aspects of the spawned
     process, and are applied prior to the spawned process beginning execution; see <a href="../man3/posix_spawnattr_init.3.html#//apple_ref/doc/man/3/posix_spawnattr_init">posix_spawnattr_init(3)</a>
     for more information.

     The argument <u>argv</u> is a pointer to a null-terminated array of character pointers to null-terminated
     character strings.  These strings construct the argument list to be made available to the new process.
     At least <u>argv[0]</u> must be present in the array, and should contain the file name of the program being
     spawned, e.g. the last component of the <u>path</u> or <u>file</u> argument.

     The argument <u>envp</u> is a pointer to a null-terminated array of character pointers to null-terminated
     strings.  A pointer to this array is normally stored in the global variable <u>environ.</u> These strings pass
     information to the new process that is not directly an argument to the command (see <a href="../man7/environ.7.html#//apple_ref/doc/man/7/environ">environ(7)</a>).

     Signals set to be ignored in the calling process are set to be ignored in the new process, unless the
     behaviour is modified by user specified <u>spawn</u> <u>attributes</u>.  Signals which are set to be caught in the
     calling process image are set to default action in the new process image.  Blocked signals remain
     blocked regardless of changes to the signal action, unless the mask is overridden by user specified
     <u>spawn</u> <u>attributes</u>.  The signal stack is reset to be undefined (see <a href="sigaction.2.html#//apple_ref/doc/man/2/sigaction">sigaction(2)</a> for more information).

     By default, the effective user ID and group ID will be the same as those of the calling process image;
     however, this may be overridden to force them to be the real user ID and group ID of the parent process
     by user specified <u>spawn</u> <u>attributes</u> (see <a href="../man3/posix_spawnattr_init.3.html#//apple_ref/doc/man/3/posix_spawnattr_init">posix_spawnattr_init(3)</a> for more information).

     If the set-user-ID mode bit of the new process image file is set (see <a href="chmod.2.html#//apple_ref/doc/man/2/chmod">chmod(2)</a>), the effective user ID
     of the new process image is set to the owner ID of the new process image file.  If the set-group-ID
     mode bit of the new process image file is set, the effective group ID of the new process image is set
     to the group ID of the new process image file.  (The effective group ID is the first element of the
     group list.)  The real user ID, real group ID and supplementary group IDs of the new process image
     remain the same as the calling process image.  After any set-user-ID and set-group-ID processing, the
     effective user ID is recorded as the saved set-user-ID, and the effective group ID is recorded as the
     saved set-group-ID.  These values may be used in changing the effective IDs later (see <a href="setuid.2.html#//apple_ref/doc/man/2/setuid">setuid(2)</a>).

     The new process also inherits the following attributes from the calling process:

           parent process ID    see <a href="getppid.2.html#//apple_ref/doc/man/2/getppid">getppid(2)</a>
           process group ID     see <a href="getpgrp.2.html#//apple_ref/doc/man/2/getpgrp">getpgrp(2)</a>, <a href="../man3/posix_spawnattr_init.3.html#//apple_ref/doc/man/3/posix_spawnattr_init">posix_spawnattr_init(3)</a>
           access groups        see <a href="getgroups.2.html#//apple_ref/doc/man/2/getgroups">getgroups(2)</a>
           working directory    see <a href="chdir.2.html#//apple_ref/doc/man/2/chdir">chdir(2)</a>
           root directory       see <a href="chroot.2.html#//apple_ref/doc/man/2/chroot">chroot(2)</a>
           control terminal     see <a href="../man4/termios.4.html#//apple_ref/doc/man/4/termios">termios(4)</a>
           resource usages      see <a href="getrusage.2.html#//apple_ref/doc/man/2/getrusage">getrusage(2)</a>
           interval timers      see <a href="getitimer.2.html#//apple_ref/doc/man/2/getitimer">getitimer(2)</a>
           resource limits      see <a href="getrlimit.2.html#//apple_ref/doc/man/2/getrlimit">getrlimit(2)</a>
           file mode mask       see <a href="umask.2.html#//apple_ref/doc/man/2/umask">umask(2)</a>
           signal mask          see <a href="sigaction.2.html#//apple_ref/doc/man/2/sigaction">sigaction(2)</a>, <a href="sigsetmask.2.html#//apple_ref/doc/man/2/sigsetmask">sigsetmask(2)</a>, <a href="../man3/posix_spawnattr_init.3.html#//apple_ref/doc/man/3/posix_spawnattr_init">posix_spawnattr_init(3)</a>

     When a program is executed as a result of a <b>posix_spawn</b>() or <b>posix_spawnp</b>() call, it is entered as fol-<font color="#ffffff" class="whiteout">lows:&nbsp;follows:</font>
     lows:

           main(argc, argv, envp)
           int argc;
           char **argv, **envp;

     where <u>argc</u> is the number of elements in <u>argv</u> (the ``arg count'') and <u>argv</u> points to the array of char-<font color="#ffffff" class="whiteout">acter&nbsp;character</font>
     acter pointers to the arguments themselves.

<b>RETURN</b> <b>VALUES</b>
     If the <u>pid</u> argument is NULL, no pid is returned to the calling process; if it is non-NULL, then
     <b>posix_spawn</b>() and <b>posix_spawnp</b>() functions return the process ID of the child process into the pid_t
     variable pointed to by the <u>pid</u> argument and return a 0 on success.  If an error occurs, they return a
     non-zero error code as the function return value, and no child process is created.

<b>ERRORS</b>
     The <b>posix_spawn</b>() and <b>posix_spawnp</b>() functions will fail and return to the calling process if:

     [EINVAL]           The value specified by <u>file</u><b>_</b><u>actions</u> or <u>attrp</u> is invalid.

     [E2BIG]            The number of bytes in the new process's argument list is larger than the system-<font color="#ffffff" class="whiteout">imposed&nbsp;systemimposed</font>
                        imposed limit.  This limit is specified by the <a href="../man3/sysctl.3.html#//apple_ref/doc/man/3/sysctl">sysctl(3)</a> MIB variable KERN_ARGMAX.

     [EACCES]           Search permission is denied for a component of the path prefix.

     [EACCES]           The new process file is not an ordinary file.

     [EACCES]           The new process file mode denies execute permission.

     [EACCES]           The new process file is on a filesystem mounted with execution disabled (MNT_NOEXEC
                        in &lt;<u>sys/mount.h&gt;</u>).

     [EFAULT]           The new process file is not as long as indicated by the size values in its header.

     [EFAULT]           <u>Path</u>, <u>argv</u>, or <u>envp</u> point to an illegal address.

     [EIO]              An I/O error occurred while reading from the file system.

     [ELOOP]            Too many symbolic links were encountered in translating the pathname.  This is taken
                        to be indicative of a looping symbolic link.

     [ENAMETOOLONG]     A component of a pathname exceeded {NAME_MAX} characters, or an entire path name
                        exceeded {PATH_MAX} characters.

     [ENOENT]           The new process file does not exist.

     [ENOEXEC]          The new process file has the appropriate access permission, but has an unrecognized
                        format (e.g., an invalid magic number in its header).

     [ENOMEM]           The new process requires more virtual memory than is allowed by the imposed maximum
                        <a href="getrlimit.2.html#//apple_ref/doc/man/2/getrlimit">(getrlimit(2)</a>).

     [ENOTDIR]          A component of the path prefix is not a directory.

     [ETXTBSY]          The new process file is a pure procedure (shared text) file that is currently open
                        for writing or reading by some process.

<b>CAVEAT</b>
     If a program is <u>setuid</u> to a non-super-user, but is executed when the real <u>uid</u> is ``root'', then the
     program has some of the powers of a super-user as well.

<b>SEE</b> <b>ALSO</b>
     <!-- a -->exit(2)<!-- /a -->, <a href="fork.2.html#//apple_ref/doc/man/2/fork">fork(2)</a>, <a href="../man3/execl.3.html#//apple_ref/doc/man/3/execl">execl(3)</a>, <a href="../man3/sysctl.3.html#//apple_ref/doc/man/3/sysctl">sysctl(3)</a>, <a href="../man7/environ.7.html#//apple_ref/doc/man/7/environ">environ(7)</a>, <a href="../man3/posix_spawnattr_init.3.html#//apple_ref/doc/man/3/posix_spawnattr_init">posix_spawnattr_init(3)</a>, <!-- a -->posix_file_actions_init(3)<!-- /a -->

<b>STANDARDS</b>
     Version 3 of the Single UNIX Specification (``SUSv3'') [SPN]

<b>HISTORY</b>
     The <b>posix_spawn</b>() and <b>posix_spawnp</b>() function calls appeared in Version 3 of the Single UNIX
     Specification (``SUSv3'') [SPN].

Mac OS X                        August 9, 2007                        Mac OS X
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man2/posix_spawnp.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man2/posix_spawnp.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man2/posix_spawnp.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

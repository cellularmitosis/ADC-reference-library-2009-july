<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>About Parameter RAM (IM: U)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" ="A" NAME="HEADING159"></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="OSUtilities-158.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="OSUtilities-160.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="OSUtilities-2.html"><B>Operating System Utilities</B></A> / <BR><DD><A HREF="OSUtilities-158.html"><B>Chapter 7 - Parameter RAM Utilities</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING159-0"></A>
<H1><A NAME="MARKER-9-7"></A><A NAME="MARKER-2-23"></A>About Parameter RAM</H1>
 Most user settings that need to be present at system startup are stored in <B>parameter RAM</B>.<B> </B>Parameter RAM takes up 256 bytes of battery-powered RAM: 20 bytes are documented in this chapter, and 236 bytes are reserved by the system software. The 236 bytes of parameter RAM are also known as <B>extended parameter RAM</B>. The parameter RAM is located in the computer's real-time clock chip, together with the date and time setting. No matter what system disk is used at system startup, parameter RAM ensures that certain settings remain the same on a given computer from one session to another.<P>
 Much of the information stored in parameter RAM is used exclusively by the system software. For example, system software uses 2 bits of parameter RAM to keep track of how many times menu items should blink after being selected.<A NAME="MARKER-2-27"></A> Other values stored in parameter RAM are useful to applications. For example, parameter RAM stores the suggested time interval that your application should use when determining whether two mouse clicks constitute a double-click. You can access this double-click time indirectly by using the Toolbox Event Manager's <CODE>GetDblTime</CODE> function. Whenever possible, you should use Toolbox routines to access parameter RAM values.<P>
<DL>
<DT><B>WARNING</B>
<DD>The operating-system routines described in this chapter let you directly manipulate values in parameter RAM; however, because the organization of parameter RAM is subject to change, you should rarely use them. Instead, use the appropriate Toolbox routines to <I>indirectly</I> manipulate values in parameter RAM.<EM></EM>  <IMG ALIGN="BOTTOM" SRC="graphics/triangle.gif">
</DL>
 <A NAME="MARKER-9-86"></A>The 20 bytes of parameter RAM that are commonly accessible by applications are copied into low memory at system startup. <A HREF="#MARKER-9-11">Figure 7-1</A> illustrates the interaction between parameter RAM and low memory. Parameter RAM is read into low memory at system startup, and any modifications to this low-memory copy of parameter RAM are written back to the clock chip. <P>
<B>Figure 7-1  <A NAME="MARKER-9-11"></A>Interaction between parameter RAM and low memory</B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PRAM-L-02.jpg"><P>
 The 20 accessible bytes of parameter RAM are described by the <B>system parameters record</B>, which is defined by a data structure of type <CODE>SysParmType</CODE>.<P>
 <A HREF="#MARKER-9-12">Figure 7-2</A> shows the general structure of the system parameters record, which contains 11 fields.<P>
<B>Figure 7-2  <A NAME="MARKER-9-12"></A><A NAME="MARKER-9-1"></A>The format of the system parameter record</B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PRAM-L-01.jpg"><P>
 A system parameters record contains 11 fields. See <A HREF="OSUtilities-159.html"></A><A HREF="OSUtilities-159.html">page 7-31</A> for the exact structure of each field.<P>
 The first field of the system parameters record contains information about the validity status of the clock chip. Whenever a write to the clock chip is successful, the value $A8 is stored in this field. The status is examined when the clock chip is read at system startup.<A NAME="MARKER-9-1"></A><A NAME="MARKER-2-13"></A><P>
 The second and third fields contain information about the node ID for the modem port and printer port.<A NAME="MARKER-2-30"></A><A NAME="MARKER-2-30"></A><A NAME="MARKER-2-57"></A><P>
 The fourth field tells which device or devices may use each of the serial ports.<A NAME="MARKER-9-27"></A><P>
 The fifth field contains the baud rate, data bits, stop bits, and parity for the modem port. Bits 0-9 define the baud rate; bits 10 and 11 define the number of data bits; bits 12 and 13 define the parity; and bits 14 and 15 define the number of stop bits.<A NAME="MARKER-9-42"></A><A NAME="MARKER-2-43"></A><P>
 The sixth field contains the baud rate, data bits, stop bits, and parity for the printer port. As with the modem port, bits 0-9 define the baud rate; bits 10 and 11 define the number of data bits; bits 12 and 13 define the parity; and bits 14 and 15 define the number of stop bits.<A NAME="MARKER-2-22"></A><A NAME="MARKER-0-54"></A><P>
 The seventh field contains the time at which the alarm clock should sound. The time is defined in terms of seconds since midnight, January 1, 1904.<A NAME="MARKER-2-24"></A><A NAME="MARKER-2-3"></A><P>
 The eighth field contains the default application font number minus 1.<A NAME="MARKER-2-26"></A><A NAME="MARKER-2-87"></A><P>
 The ninth field contains the settings for the printer and for the keyboard. Bit 0 designates whether the currently chosen printer (if any) is connected to the printer port (0) or the modem port (1). Bits 1-7 are reserved for future use. Bits 8-11 of this field contain the <B>auto-key rate</B>, the rate at which a character key repeats when it's held down; this value is stored in 2-tick units. Bits 12-15 contain the <B>auto-key threshold</B>, the length of time a key must be held down before it begins to repeat; this value is stored in 4-tick units.<A NAME="MARKER-2-28"></A><A NAME="MARKER-9-28"></A><A NAME="MARKER-9-47"></A><P>
 The tenth field contains miscellaneous user settings. Bits 0-3 contain the caret-blink time, and bits 4-7 contain the double-click time; both values are stored in four-tick units. The <B>caret-blink time</B> is the interval between blinks of a caret that marks the insertion point in text. The <B>double-click time</B> is the greatest interval between a mouse-up and mouse-down event that would qualify two mouse clicks as a double click. Bits 8-10 contain the speaker volume setting, which ranges from silent (0) to loud (7).<A NAME="MARKER-2-140"></A><A NAME="MARKER-2-24"></A><A NAME="MARKER-2-33"></A><A NAME="MARKER-2-123"></A><P>
 The last field contains more miscellaneous user settings. Bits 2 and 3 contain a value from 0 to 3 designating the <B>menu-blink time</B>, which is how many times a menu item blinks when the user chooses it. Because system software automatically calls both standard and nonstandard menu definition procedures the appropriate number of times, you should not need to worry about that value in parameter RAM. Bit 4 indicates whether the preferred system startup disk is in an internal (0) or external (1) drive. If there is any problem using the disk in the specified drive, the other drive is used. Bit 6 designates whether mouse scaling is on (1) or off (0). If mouse scaling is on, cursor movement doubles if the user moves the mouse more than a certain number of pixels between vertical retrace interrupts.<A NAME="MARKER-2-3"></A><A NAME="MARKER-0-25"></A><A NAME="MARKER-9-105"></A><A NAME="MARKER-2-22"></A><P>
 The global variable <CODE>SysParam</CODE> contains the address of the start of the system parameters record. Other global variables allow you to access individual fields of the system parameters record directly. These global variables all begin with the letters <CODE>SP</CODE> and point directly into the system parameters record stored in low memory. Other global variables referencing memory locations outside of the system parameters record are used to store copies of individual fields of the system parameters record. <P>
<DL>
<DT><B>WARNING</B>
<DD>The default values for parameter RAM vary depending on the version of the system software. Therefore, do not rely on any one default value being the same for all machines.<EM></EM>  <IMG ALIGN="BOTTOM" SRC="graphics/triangle.gif">
</DL>
 Though default values can vary, most of the U.S. system software "shares" default values. The default values for parameter RAM, for U.S. system software, are shown in <A HREF="#MARKER-9-1">Table 7-1</A>.
<TABLE BORDER="0" CELLPADDING="3">
<CAPTION><A NAME="MARKER-9-1"></A><B>Table 7-1 Default values for parameter RAM (for U.S. system software)</B></CAPTION>
<TH><A NAME="MARKER-2-4"></A>Description<TH>Default value<TR>
<TD>Validity status<TD>$A8<TR>
<TD>Node ID hint for modem port<TD>0<TR>
<TD>Node ID hint for printer port<TD>0<TR>
<TD>Serial port use<TD>0 (both ports)<TR>
<TD>Modem port configuration<TD>9600 baud, 8 data bits, no parity, 2 stop bits<TR>
<TD>Printer port configuration<TD>9600 baud, 8 data bits, no parity, 2 stop bits<TR>
<TD>Alarm setting<TD>0 (midnight, January 1, 1904)<TR>
<TD>Application font minus 1<TD>2 (indicating Geneva)<TR>
<TD>Auto-key threshold<TD>6 (24 ticks)<TR>
<TD>Auto-key rate<TD>3 (6 ticks)<TR>
<TD>Printer connection<TD>0 (printer port)<TR>
<TD>Caret-blink time<TD>8 (32 ticks)<TR>
<TD>Double-click time<TD>8 (32 ticks)<TR>
<TD>Speaker volume<TD>3 (medium)<TR>
<TD>Menu-blink time<TD>3<TR>
<TD>Preferred system start-up disk<TD>0 (internal drive)<TR>
<TD>Mouse scaling<TD>1 (on)<A NAME="MARKER-9-54"></A></TABLE>
<P>
 In System 7, a user can clear the current settings in the parameter RAM and restore the default values by holding down the x-Option-P-R keys at system startup. When system software detects this key combination, it resets parameter RAM to the default values and then restarts the computer again. Clearing the current settings in the parameter RAM also causes system software to change other settings not stored in parameter RAM to default values. These settings include the desktop pattern and the color depth of the default monitor.<A NAME="MARKER-2-178"></A><A NAME="MARKER-2-27"></A><A NAME="MARKER-2-117"></A><P>



</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="OSUtilities-158.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="OSUtilities-160.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="OSUtilities-3.html">&copy; Apple Computer, Inc.</A><BR>6 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

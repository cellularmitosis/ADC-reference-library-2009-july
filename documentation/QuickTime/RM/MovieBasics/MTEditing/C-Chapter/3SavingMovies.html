<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Movie Basics: Saving Movies</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Saving Movies"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000908-SavingMovies" title="Saving Movies"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../MovieBasics-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000545" target="_top">Movie Basics</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000908-IntroductiontoQuickTimeMovieBasics-DontLinkElementID_83">QuickTime Movie Basics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../B-Chapter/2EditingMovies.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../D-Chapter/4OverviewofApplicati.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000908-SavingMovies-SW1" title="Saving Movies"></a>
<h1>Saving Movies</h1>

<p>This chapter briefly describes saving movies into movie files. Saving a movie into a new movie file and saving movie contents to an existing movie file are both discussed.</p>
<p>Your application can gain access to existing movies with either the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromFile" target="_top">NewMovieFromFile</a></code> function or the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code> function. Once you have loaded the movie, your application uses the functions that are described in this section to save any changes you have made to the movie.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="3SavingMovies.html#//apple_ref/doc/uid/TP40000908-SavingMovies-DontLinkElementID_17">Movie File Functions</a>
				
			<br/>
			
        
			
			
				<a href="3SavingMovies.html#//apple_ref/doc/uid/TP40000908-SavingMovies-DontLinkElementID_18">Movie Files</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000908-SavingMovies-DontLinkElementID_17" title="Movie File Functions"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-SavingMovies-MovieFileFunctions" title="Movie File Functions"></a>Movie File Functions</h2>
<p>The Movie Toolbox provides a set of functions that allow your application to create, access, and convert movie files, which files contain data for QuickTime movies. You can also use the Movie Toolbox to load movies into memory, in preparation for working with the movie. These functions differ based on where the movie is stored.</p>
<p>The following functions are used when saving a movie to a file.</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/HasMovieChanged" target="_top">HasMovieChanged</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/ClearMovieChanged" target="_top">ClearMovieChanged</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/UpdateMovieResource" target="_top">UpdateMovieResource</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/RemoveMovieResource" target="_top">RemoveMovieResource</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/PutMovieIntoHandle" target="_top">PutMovieIntoHandle</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovieData" target="_top">FlattenMovieData</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/PutMovieIntoDataFork" target="_top">PutMovieIntoDataFork</a></code></p></li>
</ul>
<p>Before your application can play a movie, you must first open the file that contains the movie. Your application can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/OpenMovieFile" target="_top">OpenMovieFile</a></code> function to open a movie file. Once you are done with the file, your application releases the file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/CloseMovieFile" target="_top">CloseMovieFile</a></code> function. Your application can create and open a new movie file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/CreateMovieFile" target="_top">CreateMovieFile</a></code> function. Your application can delete a movie file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/DeleteMovieFile" target="_top">DeleteMovieFile</a></code> function.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewMovie" target="_top">NewMovie</a></code> function to create a new empty movie. If your application is loading a movie from an existing file, use either the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromFile" target="_top">NewMovieFromFile</a></code> function or the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code> function. The <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromFile" target="_top">NewMovieFromFile</a></code> function works with the file reference number you obtain from the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/OpenMovieFile" target="_top">OpenMovieFile</a></code> function. The <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code> function works with movies stored in your document file&#8217;s data fork. Your application can then use the functions described in <span class="content_text"><a href="3SavingMovies.html#//apple_ref/doc/uid/TP40000908-SavingMovies-SW1">Saving Movies</a></span> to load and store movies.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/ConvertFileToMovieFile" target="_top">ConvertFileToMovieFile</a></code> function to specify an input file and convert it to a movie file. The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/ConvertMovieToFile" target="_top">ConvertMovieToFile</a></code> takes a specified movie (or a single track within that movie) and converts it into an output file.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code> function to add a new movie resource to a movie file. Your application can also use this function to save a movie that it created. You can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/UpdateMovieResource" target="_top">UpdateMovieResource</a></code> function to replace an existing movie resource in a movie file. You can remove a movie resource by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/RemoveMovieResource" target="_top">RemoveMovieResource</a></code> function.</p>
<p>The movie resources that your application creates with the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/UpdateMovieResource" target="_top">UpdateMovieResource</a></code> functions may contain references to movie data. These references identify the data that constitute the movie. However, the movie data can be stored outside of the movie file. If you want to create a movie file that contains all of its movie data, use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code> or <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovieData" target="_top">FlattenMovieData</a></code> function.  These functions can also be used to store the movie data in the movie file&#8217;s data fork, or to interleave the media data to optimize performance.</p>
<p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/PutMovieIntoHandle" target="_top">PutMovieIntoHandle</a></code> function places a QuickTime movie into a handle. You can then convert the movie into specialized data formats.</p>
<p>The <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/HasMovieChanged" target="_top">HasMovieChanged</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/ClearMovieChanged" target="_top">ClearMovieChanged</a></code> functions allow your application to work with the movie changed flag that is maintained by the Movie Toolbox. You can use this flag to determine whether a movie has been changed.</p>
<p>The movie changed flag indicates whether you have changed the movie. Such actions as editing the movie, adding samples to a media, or changing a data reference cause the flag to indicate that the movie has changed. There are several operations that the movie changed flag does not reflect, including changing the volume, rate, or time settings for the movie. These settings change frequently when a movie is played. Your application must monitor these settings itself.</p>
<p>The Movie Toolbox also supplies functions for storing and retrieving movies that are stored in the data fork of a file. These functions provide robust data reference resolution and improve low memory performance. The <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code> function enables you to retrieve a movie that is stored anywhere in the data fork of a file. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/PutMovieIntoDataFork" target="_top">PutMovieIntoDataFork</a></code> function to store an atom version of a specified movie in the data fork of a file.</p>
<p>Once you are finished working with a movie, you should release the resources used by the movie by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeMovie" target="_top">DisposeMovie</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000908-SavingMovies-DontLinkElementID_18" title="Movie Files"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-SavingMovies-MovieFiles" title="Movie Files"></a>Movie Files</h2>
<p>The Movie Toolbox allows you to save movies in movie files. Movie files have a file type of <code>'MooV'Movie</code> Toolbox. Typically, the movie itself is stored in the resource fork of the movie file. The movie can also be stored in data fork, for use on systems that do not support resource forks. The movie&#8217;s data may reside in the data fork of the movie file, or in other files.</p>
<p>When you create a new movie, you must create a file to contain the movie data. Use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/CreateMovieFile" target="_top">CreateMovieFile</a></code> function to create a new movie file. This function returns a file system reference number that you must use to identify the file to other Movie Toolbox functions. You can add your movie to the file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code> function. When you are done with the file, you close it by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/CloseMovieFile" target="_top">CloseMovieFile</a></code> function. Your movie is now safely stored in the movie file.</p>
<p>If you are working with an existing movie, you must read that movie from a movie file or choose a movie from the scrap. You first open the movie file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/OpenMovieFile" target="_top">OpenMovieFile</a></code> function. You then load the movie from that file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromFile" target="_top">NewMovieFromFile</a></code> function. Alternatively, you can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromHandle" target="_top">NewMovieFromHandle</a></code> function. After you have edited the movie, you must store it in your file if you want to save your changes. If you want to replace the old movie, use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/UpdateMovieResource" target="_top">UpdateMovieResource</a></code> function. If you want to keep the old movie, create a new movie by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code> function. A movie file may contain more than one movie resource. You should then close the movie file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/CloseMovieFile" target="_top">CloseMovieFile</a></code> function.</p>
<p>The Movie Toolbox maintains a <code>changed</code> flag for each movie your application loads. You can use this flag to determine when to save your movie. The Movie Toolbox sets this flag to <code>true</code> whenever you make a change to a movie that should be saved. You can read this flag by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/HasMovieChanged" target="_top">HasMovieChanged</a></code> function. You can set the flag to <code>false</code> by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/ClearMovieChanged" target="_top">ClearMovieChanged</a></code> function.</p>
<p>The Movie Toolbox provides two functions for deleting movies: <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/DeleteMovieFile" target="_top">DeleteMovieFile</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/RemoveMovieResource" target="_top">RemoveMovieResource</a></code>. Use <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/DeleteMovieFile" target="_top">DeleteMovieFile</a></code> to delete a movie file. Use <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/RemoveMovieResource" target="_top">RemoveMovieResource</a></code> to delete a movie from a movie file. Don&#8217;t use the corresponding standard Macintosh Toolbox routines (<code>FSpDelete</code> and <code>RmveResourceMovie</code> Toolbox). The Movie Toolbox maintains movie references between files correctly whereas these routines do not.</p>
<p>The Movie Toolbox allows you to create movie files that contain all of their movie data, rather than containing references to data in other files. This is often desirable when creating a version of a movie that will be moved to another computer. You can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code> or <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovieData" target="_top">FlattenMovieData</a></code> functions to resolve all of the data references and create a self-contained movie.</p>
<p>The Movie Toolbox also accommodates operating systems that do not recognize files that contain more than one fork. You can create a movie file that contains the movie and all of its data in the data fork of the movie file. You can then use that file on operating systems that do not recognize resource forks. You can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code> or <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovieData" target="_top">FlattenMovieData</a></code> functions to put the movie in the data fork at the same time it creates a self-contained movie file. This would be the usual approach when creating a movie on a Macintosh computer that you want to store on a Unix web server. You can also create a single-fork movie file by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/CreateMovieFile" target="_top">CreateMovieFile</a></code> function with the flag <code>createMovieFileDontCreateResFileMovie</code> Toolbox. This would be the usual approach when creating movies using QuickTime for Windows.</p>
<p>Your application may allow the user to decide how to save the movie. In this case, you can use a Save As dialog box similar to the one shown in Figure 2-1. In this dialog box, the user can elect to create a movie file that contains all of the data for a movie by clicking the &#8220;Make movie self-contained&#8221; radio button.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000908-SavingMovies-DontLinkElementID_86" title="Figure 2-1A sample movie Save As dialog box"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>A sample movie Save As dialog box</p><img src = "../Art/movie_save_as_box.gif" alt = "" width="399" height="186"></div><br/>




        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../B-Chapter/2EditingMovies.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../D-Chapter/4OverviewofApplicati.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-01-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/MovieBasics/MTEditing/C-Chapter/3SavingMovies.html%3Fid%3DTP40000908-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/MovieBasics/MTEditing/C-Chapter/3SavingMovies.html%3Fid%3DTP40000908-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/MovieBasics/MTEditing/C-Chapter/3SavingMovies.html%3Fid%3DTP40000908-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Troubleshooting Packages and Installation</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Troubleshooting Packages and Installation"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001946" title="Troubleshooting Packages and Installation"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_pre_post_processing.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001946-TPXREF8" title="Troubleshooting Packages and Installation"></a><hr /><H1>Troubleshooting Packages and Installation</H1><p>This section provides tips for working with executable script files, as well as a question-and-answer section to help troubleshoot common problems.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001946-DontLinkElementID_70" title="Important:"></a><p><strong>Important:</strong>&nbsp;This section is still under construction. However, it contains some information that can be of use.</p><p></p></div><p>For additional information that may aid in troubleshooting, see <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1015807">“Test the Package.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_trouble_shooting.html#//apple_ref/doc/uid/20001946-1015028-TPXREF21">Frequently Asked Questions</a>
				
			<br/>
			
        
			
			
				<a href="sd_trouble_shooting.html#//apple_ref/doc/uid/20001946-1010598-BABCFFGG">Working With Script Files</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001946-1015028" title="Frequently Asked Questions"></a><a name="//apple_ref/doc/uid/20001946-1015028-TPXREF21" title="Frequently Asked Questions"></a><h2>Frequently Asked Questions</h2><p>The following are some frequently asked questions in troubleshooting installation packages.</p><a name="//apple_ref/doc/uid/20001946-1015179" title="I changed my package, so why don&acirc;&#128;&#153;t the changes show up in Installer?"></a><a name="//apple_ref/doc/uid/20001946-1015179-TPXREF9" title="I changed my package, so why don&acirc;&#128;&#153;t the changes show up in Installer?"></a><h3>I changed my package, so why don’t the changes show up in Installer?</h3><p>This happens very commonly when an installation is canceled during testing, but you don’t quit from Installer. In this situation, Installer remains open with its current (invalid) state. As a result, you can modify the package, double-click it to launch Installer again, and see the same error because Installer is still running with its saved state.</p><p>A similar situation can occur when you modify a package definition file (<code>.pmsp</code>) to use a different <code>Package_contents</code> directory. If you don’t modify the save location, when you re-create the package it will still be in a previous directory. As a result, you may be launching an old package in the current directory, rather than the modified package in some other directory.</p><a name="//apple_ref/doc/uid/20001946-1015193" title="Why won&acirc;&#128;&#153;t my package install in Mac OS X Version 10.1?"></a><a name="//apple_ref/doc/uid/20001946-1015193-TPXREF10" title="Why won&acirc;&#128;&#153;t my package install in Mac OS X Version 10.1?"></a><h3>Why won’t my package install in Mac OS X Version 10.1?</h3><p>Packages created with the version of PackageMaker that shipped with the Mac OS X version 10.2 (Jaguar) Developer Tools will work only with Jaguar and later versions of the system. However, packages created with PackageMaker 1.1.10 (which first shipped with the December 2002 Developer Tools CD) will work with any version of Mac OS X. For more information, see <span class="content_text"><a href="sd_install_features.html#//apple_ref/doc/uid/20001763-1019314">“Limitations of PackageMaker and Installer.”</a></span></p><a name="//apple_ref/doc/uid/20001946-1015207" title="Why doesn&acirc;&#128;&#153;t my background picture appear?"></a><a name="//apple_ref/doc/uid/20001946-1015207-TPXREF11" title="Why doesn&acirc;&#128;&#153;t my background picture appear?"></a><h3>Why doesn’t my background picture appear?</h3><p>Case is important, so be sure your image file is named <code>background.ext</code>, where the extension is one of the following: <code>.jpg</code>, <code>.tif</code>, <code>.tiff</code>, <code>.gif</code>, <code>.pict</code>, <code>.eps</code>, and <code>.pdf</code>.</p><p>Your background image may not appear because it’s in the wrong place (for example, you put it in the <code>Content</code> directory instead of the <code>Resources</code> directory). Or it may not appear because you supplied some localized images, but not one for the user’s current Languages preference. To avoid the latter problem, you can place a default image at the highest level in the <code>Resources</code> directory.</p><p>Localization behavior is similar, but not identical, for the welcome, Read Me, and license files. For details, see <span class="content_text"><a href="sd_modify_install_ui.html#//apple_ref/doc/uid/20001766-1028542">“Localizing the Welcome, Read Me, and License Files.”</a></span></p><a name="//apple_ref/doc/uid/20001946-1016066" title="A user deleted my software, but still can&acirc;&#128;&#153;t reinstall it"></a><a name="//apple_ref/doc/uid/20001946-1016066-TPXREF12" title="A user deleted my software, but still can&acirc;&#128;&#153;t reinstall it"></a><h3>A user deleted my software, but still can’t reinstall it</h3><p>Installer looks for a receipt with the same name as your current installation package (for example <code>MyApp.pkg</code>) in <code>/Library/Receipts</code>. If the receipt is still present, the user may not be able to reinstall the software.</p><a name="//apple_ref/doc/uid/20001946-1024358" title="Why doesn&acirc;&#128;&#153;t my metapackage work?"></a><h3>Why doesn’t my metapackage work?</h3><p>A common reason your metapackage doesn’t work is that the packages it contains are not in the location it expects them to be. For more information, see <span class="content_text"><a href="sd_mpkg_anatomy.html#//apple_ref/doc/uid/20001768-TPXREF3">“Anatomy of a Metapackage.”</a></span></p><a name="//apple_ref/doc/uid/20001946-1024630" title="Why does my package fail in Mac OS X version 10.1 but not in version 10.2?"></a><a name="//apple_ref/doc/uid/20001946-1024630-CHDGBGHB" title="Why does my package fail in Mac OS X version 10.1 but not in version 10.2?"></a><h3>Why does my package fail in Mac OS X version 10.1 but not in version 10.2?</h3><p>A package created on Mac OS X version 10.2 with PackageMaker 1.1.10 may fail to install on Mac OS X version 10.1 if the package requires Admin Authorization (which it might require, for example, to install an application in <code>/Applications</code>). The install will not authenticate and will halt with the message “You do not have enough privileges to install...”</p><p>PackageMaker 1.1.10 creates an <code>Info.plist</code> in the package's <code>Contents</code> directory, as well as a <code>&lt;PackageName>.info</code> file in the package's <code>/Contents/Resources</code> directory. The <code>&lt;PackageName>.info</code> file provides information needed to install on Mac OS X version 10.1, but in this case, the information is wrong, because the key <code>NeedsAuthorization</code> has the value <code>NO</code> instead of <code>YES</code>.</p><p>When this happens, you can fix your package to request authorization, and to install correctly, on Mac OS X version 10.1 by editing the <code>&lt;PackageName>.info</code> file and changing the value of the key to <code>YES</code>. You can examine the contents of a package in the Finder by Control-clicking it and choosing Show Package Contents from the contextual menu. Once you’ve located the file in the <code>/Contents/Resources</code> directory, you can edit it with a text editor.</p><p></p><p></p><p></p><p></p><a name="//apple_ref/doc/uid/20001946-1024973" title="Why is Installer ignoring the version.plist information in my package?"></a><a name="//apple_ref/doc/uid/20001946-1024973-TPXREF13" title="Why is Installer ignoring the version.plist information in my package?"></a><h3>Why is Installer ignoring the version.plist information in my package?</h3><p>This can happen with PackageMaker 1.1.10, because it incorrectly adds the package’s Default Location to paths in the <code>BundleVersions.plist</code> file (which is described in <span class="content_text"><a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1007952">“The BundleVersions.plist File”</a></span>). Your package will only have a <code>BundleVersions.plist</code> file if the package includes software that contains version information in a <code>version.plist</code> file, as described in <span class="content_text"><a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1007759">“Supplying Version Information for Your Software.”</a></span>)</p><p>Once you have created a package with PackageMaker, you can check for this problem, and correct it if necessary, with the following steps:</p><ul class="spaceabove"><li class="li"><p>In a Terminal window, use the <code>find</code> command to find the <code>Archive.bom</code> file and the <code>BundleVersions.plist</code> file (which you’ll use in a later step) in the package:</p><p><code>find /Volumes/HD/MyPackage.pkg</code></p><p>The output of this command is a listing of all the items in the package. The lines for the two files might look something like this:</p><p><code>/Volumes/HD/MyPackage.pkg/Contents/Archive.bom</code></p><p><code>/Volumes/HD/MyPackage.pkg/Contents/Resources/BundleVersions.plist</code></p></li><li class="li"><p>In a Terminal window, use the <code>lsbom</code> command to show, from the package’s <code>Archive.bom</code> file, all the paths for the items to be installed. (The <code>Archive.bom</code> file is described in <span class="content_text"><a href="sd_pkg_anatomy.html#//apple_ref/doc/uid/20001767-1020380">“High-Level Package Structure.”</a></span>)</p><p><code>lsbom -p MUGsf '/Volumes/HD/MyPackage.pkg/Contents/Archive.bom'</code></p><p>Depending on the package, this may result in a large listing of files, each shown with its path. Among the lines, you should see at least one like the following:</p><p><code>drwxrwxr-x root admin ./MyApp.app/Contents/version.plist</code></p></li><li class="li"><p>You can display the contents of the <code>BundleVersions.plist</code> file with a command like the following (using the path you obtained in a previous step):</p><p><code>cat /Volumes/HD/MyPackage.pkg/Contents/Resources/BundleVersions.plist</code></p><p>The resulting output should show a structure of dictionaries and keys, including one or more lines showing a path for the <code>version.plist</code> file:</p><p><code>&lt;key>./MyApp.app/Contents/version.plist&lt;/key></code></p><p>The path should be the same as the paths in the <code>Archive.bom</code> file. However, if it looks like the following (that is, it has extra information in front of the expected path), then the <code>BundleVersions.plist</code> file is incorrect.</p><p><code>&lt;key>./Applications/MyApp.app/Contents/version.plist&lt;/key></code></p></li><li class="li"><p>To correct this problem, edit the <code>BundleVersions.plist</code> file and change any paths for the <code>version.plist</code> file to match the paths in the <code>Archive.bom</code> file. To do so, you delete the part of the path that comes from the Default Location, which in this case is <code>/Applications</code>.</p></li></ul><a name="//apple_ref/doc/uid/20001946-1010598" title="Working With Script Files"></a><a name="//apple_ref/doc/uid/20001946-1010598-BABCFFGG" title="Working With Script Files"></a><h2>Working With Script Files</h2><p>This section provides some tips for working with script files or other executable files. The primary documentation for these files is located in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-TPXREF6">“Checking the Installation With InstallationCheck,”</a></span> <span class="content_text"><a href="sd_volume_check_ref.html#//apple_ref/doc/uid/20001944-TPXREF9">“Checking the Installation Volume With VolumeCheck,”</a></span> and <span class="content_text"><a href="sd_pre_post_processing.html#//apple_ref/doc/uid/20001945-TPXREF8">“Modifying an Installation With Scripts.”</a></span></p><p>The following tips address some common issues.</p><a name="//apple_ref/doc/uid/20001946-1015568" title="Make sure the script is executable"></a><a name="//apple_ref/doc/uid/20001946-1015568-TPXREF14" title="Make sure the script is executable"></a><h3>Make sure the script is executable</h3><p>If you assemble a package with PackageMaker, it will automatically set correctly named scripts to be executable. If you modify a package file directly, it’s your responsibility to ensure the executable bit is set.</p><p>And while you’re at it, make sure your script has adequate permissions (usually at least 555). For more information, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040759">“Setting File Ownership and Permissions.”</a></span></p><a name="//apple_ref/doc/uid/20001946-1016125" title="Don&acirc;&#128;&#153;t get control characters in the script file"></a><a name="//apple_ref/doc/uid/20001946-1016125-TPXREF22" title="Don&acirc;&#128;&#153;t get control characters in the script file"></a><h3>Don’t get control characters in the script file</h3><p>If you edit a script file with a GUI editor, it may insert control characters that interfere with proper execution of the script.</p><a name="//apple_ref/doc/uid/20001946-1015596" title="Quote script arguments and environment variables when you use them in a script"></a><a name="//apple_ref/doc/uid/20001946-1015596-TPXREF15" title="Quote script arguments and environment variables when you use them in a script"></a><h3>Quote script arguments and environment variables when you use them in a script</h3><p>The paths and filenames obtained from arguments and environment variables often include spaces, so it’s a good idea to quote them in your scripts. For example, without the quotation marks around <code>$path</code> in the last line shown in <span class="content_text">Listing 1</span>, the script could get an error for a volume name that included a space.</p><a name="//apple_ref/doc/uid/20001946-1016444-CHDHGCCA" title="Listing 1A partial VolumeCheck script that shows quoting"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001946-1016444" title="Listing 1A partial VolumeCheck script that shows quoting"></a><strong>Listing 1&nbsp;&nbsp;</strong>A partial VolumeCheck script that shows quoting</p><div class="codesample"><table><tr><td scope="row"><pre>path=$1<span></span></pre></td></tr><tr><td scope="row"><pre># (Some steps omitted.)<span></span></pre></td></tr><tr><td scope="row"><pre>if ([ "$path" = "Jaguar" ]) then<span></span></pre></td></tr></table></div><p>This full script is shown in <span class="content_text"><a href="sd_volume_check_ref.html#//apple_ref/doc/uid/20001944-1004405-CHEHJCFJ">Listing 3</a></span>.</p><a name="//apple_ref/doc/uid/20001946-1015710" title="Spell script names correctly"></a><a name="//apple_ref/doc/uid/20001946-1015710-TPXREF16" title="Spell script names correctly"></a><h3>Spell script names correctly</h3><p>Case matters, so be sure you match the required names (such as VolumeCheck) exactly.</p><a name="//apple_ref/doc/uid/20001946-1015746" title="Look for output in the right places"></a><a name="//apple_ref/doc/uid/20001946-1015746-TPXREF17" title="Look for output in the right places"></a><h3>Look for output in the right places</h3><p>Output from InstallationCheck and VolumeCheck scripts is redirected to the Installer Log window. Output from other installation scripts is redirected to the Console window. Some scripts redirect their own output, such as to a log file. For more details, see <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1021220">“Viewing the Installer Log and Script Output.”</a></span></p><a name="//apple_ref/doc/uid/20001946-1015724" title="Specify a shell"></a><a name="//apple_ref/doc/uid/20001946-1015724-TPXREF18" title="Specify a shell"></a><h3>Specify a shell</h3><p>Make sure the first line of your shell script specifies a shell, such as:</p><p><code>#!/bin/sh</code></p><a name="//apple_ref/doc/uid/20001946-1015910" title="Make sure your script returns a value"></a><a name="//apple_ref/doc/uid/20001946-1015910-TPXREF19" title="Make sure your script returns a value"></a><h3>Make sure your script returns a value</h3><p>For success, use <code>exit 0</code>. For an error return, use <code>exit &lt;errorNumber></code>.</p><a name="//apple_ref/doc/uid/20001946-1015955" title="Make sure you quit Installer between tests"></a><a name="//apple_ref/doc/uid/20001946-1015955-TPXREF20" title="Make sure you quit Installer between tests"></a><h3>Make sure you quit Installer between tests</h3><p>This one needs repeating. If an installation is canceled during testing but you don’t quit from Installer, Installer remains open with its current (invalid) state. As a result, you can modify a script, recreate the package, double-click it to launch Installer again, and see the same error because Installer is still running with its saved state.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_pre_post_processing.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_trouble_shooting.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_trouble_shooting.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_trouble_shooting.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

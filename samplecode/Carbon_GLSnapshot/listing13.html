<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>Carbon GLSnapshot - /C Source/CarbonEventHandlers.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/GraphicsImaging/index.html">Graphics & Imaging</a> &gt; <a href="../../samplecode/GraphicsImaging/idxOpenGL-date.html">OpenGL</a> &gt; <A HREF="javascript:location.replace('index.html');">Carbon GLSnapshot</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">Carbon GLSnapshot</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/C Source/CarbonEventHandlers.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/C Headers/CameraControl.h</option>
<option value="listing2.html">/C Headers/CarbonEventHandlers.h</option>
<option value="listing3.html">/C Headers/CarbonHead.h</option>
<option value="listing4.html">/C Headers/ControlInfo.h</option>
<option value="listing5.html">/C Headers/DataTypes.h</option>
<option value="listing6.html">/C Headers/GLDataStructs.h</option>
<option value="listing7.html">/C Headers/GLHeaders.h</option>
<option value="listing8.html">/C Headers/GLMain.h</option>
<option value="listing9.html">/C Headers/MenuInfo.h</option>
<option value="listing10.html">/C Headers/Utilities.h</option>
<option value="listing11.html">/C Headers/WindowControl.h</option>
<option value="listing12.html">/C Source/CameraControl.c</option>
<option value="listing13.html">/C Source/CarbonEventHandlers.c</option>
<option value="listing14.html">/C Source/GLMain.c</option>
<option value="listing15.html">/C Source/Utilities.c</option>
<option value="listing16.html">/C Source/WindowControl.c</option>
<option value="listing17.html">/Docs/ReadMe.txt</option></select>
				</p>
				</form>
				<p><strong><a href="Carbon_GLSnapshot.zip">Download Sample</a></strong> (&#147;Carbon_GLSnapshot.zip&#148;, 100.3K)<BR>
<strong><a href="Carbon_GLSnapshot.dmg">Download Sample</a></strong> (&#147;Carbon_GLSnapshot.dmg&#148;, 146.2K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">//////////////////////////////////////////////////////////////////////////////////
/*
  File:    CarbonEventHandlers.c

  Project:  CarbonEvent Shell

  Contains:  Implementation of Carbon event handlers &amp; associated
      functions. 
  
  Author:   Todd Previte
  
  Copyright:  2001 Apple Computer, Inc., All Rights Reserved

  Copyright:  (c) 2002 Apple Computer, Inc., All Rights Reserved
  
  Disclaimer:  

  IMPORTANT: This Apple software is supplied to you by Apple Computer, Inc.
  (&quot;Apple&quot;) in consideration of your agreement to the following terms, and your
  use, installation, modification or redistribution of this Apple software
  constitutes acceptance of these terms.  If you do not agree with these terms,
  please do not use, install, modify or redistribute this Apple software.

  In consideration of your agreement to abide by the following terms, and subject
  to these terms, Apple grants you a personal, non-exclusive license, under Apple's
  copyrights in this original Apple software (the &quot;Apple Software&quot;), to use,
  reproduce, modify and redistribute the Apple Software, with or without
  modifications, in source and/or binary forms; provided that if you redistribute
  the Apple Software in its entirety and without modifications, you must retain
  this notice and the following text and disclaimers in all such redistributions of
  the Apple Software.  Neither the name, trademarks, service marks or logos of
  Apple Computer, Inc. may be used to endorse or promote products derived from the
  Apple Software without specific prior written permission from Apple.  Except as
  expressly stated in this notice, no other rights or licenses, express or implied,
  are granted by Apple herein, including but not limited to any patent rights that
  may be infringed by your derivative works or by other works in which the Apple
  Software may be incorporated.

  The Apple Software is provided by Apple on an &quot;AS IS&quot; basis.  APPLE MAKES NO
  WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE IMPLIED
  WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE, REGARDING THE APPLE SOFTWARE OR ITS USE AND OPERATION ALONE OR IN
  COMBINATION WITH YOUR PRODUCTS.

  IN NO EVENT SHALL APPLE BE LIABLE FOR ANY SPECIAL, INDIRECT, INCIDENTAL OR
  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  ARISING IN ANY WAY OUT OF THE USE, REPRODUCTION, MODIFICATION AND/OR DISTRIBUTION
  OF THE APPLE SOFTWARE, HOWEVER CAUSED AND WHETHER UNDER THEORY OF CONTRACT, TORT
  (INCLUDING NEGLIGENCE), STRICT LIABILITY OR OTHERWISE, EVEN IF APPLE HAS BEEN
  ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      

*/
//////////////////////////////////////////////////////////////////////////////////

#include &quot;CarbonEventHandlers.h&quot;


//////////////////////////////////////////////////////////////////////////////////
// Global Variable Declarations              //
//////////////////////////////////////////////////////////////////////////////////

EventHandlerUPP   appCommandProcessor;
EventHandlerUPP   windowEventProcessor;
EventHandlerUPP    menuEventProcessor;
EventHandlerUPP    controlEventProcessor;

EventLoopTimerRef   renderTimer;
EventLoopTimerUPP  renderTimerUPP;

EventLoopTimerRef   snapshotTimer;
EventLoopTimerUPP  snapshotTimerUPP;

// Global Variables
bool      appQuit;
WindowRef     pMainWindow;
MenuHandle    pMainMenu;
GLWindow    mainWindow;
MenuRef      theMenu;

ControlRef    buttonSnapshot;
ControlRef    buttonSequence;
ControlRef    buttonStart;

ControlRef    sequenceTimeInterval;
ControlRef    sequenceFrameCount;

ControlRef    movieTimeLimit;
ControlRef    movieFrameCount;
ControlRef    movieFramesCapturedCounter;
ControlRef    movieProgressBar;
ControlRef    movieSwitchUseTimeLimit;
ControlRef    movieSwitchUseFrameLimit;
ControlRef    movieFrameRate;

int      movieUseFrameLimit;
int      movieUseTimeLimit;
long      seqTimeInt;
long      seqFrameCount;
long      movTimeLimit;
long      movFrameCount;
long      fps;
long       movFramesCaptured;

GWorldPtr    *gwBuffer;
long      imageCount;

//////////////////////////////////////////////////////////////////////////////////
//  InstallEventHandlers              //
//////////////////////////////////////////////////////////////////////////////////
void InstallEventHandlers(void)
{
    OSStatus err = noErr;
    InitCursor();

    theMenu = AcquireRootMenu();

    // Register for standard event handlers
    InstallStandardEventHandler(GetWindowEventTarget(pMainWindow));
    InstallStandardEventHandler(GetApplicationEventTarget());
    InstallStandardEventHandler(GetMenuEventTarget(theMenu));
    InstallStandardEventHandler(GetWindowEventTarget(mainWindow.supportWindow));
    
    // Render Timed event handler installer
    renderTimerUPP = NewEventLoopTimerUPP(RenderTimedEventProcessor);
    err = InstallEventLoopTimer(GetCurrentEventLoop(),
        0,
        kEventDurationMillisecond,
        renderTimerUPP,
        NULL, // User Data
        &amp;renderTimer);

    // Application-level event handler installer
    appCommandProcessor = NewEventHandlerUPP(MainAppEventHandler);  
    err = InstallApplicationEventHandler(appCommandProcessor,
          GetEventTypeCount(appEventList),
          appEventList,
          0,
          NULL);

    // Window-level event handler installer
    windowEventProcessor = NewEventHandlerUPP(MainWindowEventHandler);  
    err = InstallWindowEventHandler(pMainWindow,
            windowEventProcessor,
            GetEventTypeCount(windowEventList),
            windowEventList,
            0,
            NULL);

    // Note: We're handling all our controls in this window through 1 routine
    controlEventProcessor = NewEventHandlerUPP(ControlEventHandler);  
    err = InstallWindowEventHandler(mainWindow.supportWindow,
            controlEventProcessor,
            GetEventTypeCount(supportWindowEventList),
            supportWindowEventList,
            0,
            NULL);
}

//////////////////////////////////////////////////////////////////////////////////
//  MainAppEventHandler                //
//////////////////////////////////////////////////////////////////////////////////
pascal OSStatus MainAppEventHandler(EventHandlerCallRef appHandler, EventRef theEvent, void* appData)
{
    #pragma unused (appHandler, appData)

    HICommand  aCommand;
    OSStatus  result;
    Point  mDelta;
    double  dx, dy, dz;

    switch(GetEventClass(theEvent))
    {
        case kEventClassMouse:        // 'mous'
            GetEventParameter(theEvent,      // the event itself
                              kEventParamMouseDelta,   // symbolic parameter name
                              typeQDPoint,     // expected type 
                              NULL,       // actual type (NULL is valid)
                              sizeof(mDelta),     // buffer size
                              NULL,       // actual buffer size (Can be NULL)
                              &amp;mDelta);      // variable to hold data
            switch(GetEventKind(theEvent))
            {
                case kEventMouseDown:
                    break;
                case kEventMouseUp:
                    break;
                case kEventMouseMoved:
                    break;
                case kEventMouseDragged:
        dz = 0.0;
        
        if(mDelta.h &gt; 0)
      dx = 1.0;
        else
      dx = -1.0;
        
        if(mDelta.v &gt; 0)
      dy = 1.0;
        else
      dy = -1.0;

        cameraRotate(&amp;mainWindow.glCam, mDelta.v, mDelta.h);

//        cameraRotate(&amp;mainWindow.glCam, 1.0, 
//            mDelta.h, //mainWindow.glCam.camPosition.x, 
//            mDelta.v, //mainWindow.glCam.camPosition.y, 
//            0.0);//mainWindow.glCam.camPosition.z);
                    break;
                case kEventMouseWheelMoved:
                    break;
                default:
        result = eventNotHandledErr;
                    break;
            }
      break;
  case kEventClassCommand:
      result = GetEventParameter(theEvent, kEventParamDirectObject, 
               typeHICommand, NULL, sizeof(HICommand), 
               NULL, &amp;aCommand);
      switch (aCommand.commandID)
      {
    case kHICommandOK:    // 'ok  '
    case kHICommandCancel:    // 'not!'
        result = eventNotHandledErr;
        break;
    case kHICommandQuit:
        QuitApplicationEventLoop();
                    appQuit = true;
        result = noErr;
        break;
    case kHICommandUndo:    // 'undo'
    case kHICommandRedo:    // 'redo'
    case kHICommandCut:    // 'cut '
    case kHICommandCopy:    // 'copy'
    case kHICommandPaste:    // 'past'
    case kHICommandClear:    // 'clea'
    case kHICommandSelectAll:  // 'sall'
    case kHICommandHide:    // 'hide'
    case kHICommandPreferences:  // 'pref'
    case kHICommandZoomWindow:  // 'zoom'
    case kHICommandMinimizeWindow:  // 'mini'
    case kHICommandArrangeInFront:  // 'frnt'
    case kHICommandAbout:    // 'abou'
        result = eventNotHandledErr;
        break;
    case kCEVSMenuEventsCommandDriver:  // 'CMDR'
    case kCEVSMenuEventsLog:    // 'LOG'
    case kCEVSMenuEventsPause:    // 'PAUS'
    case kCEVSMenuEventsEventClasses:  // 'EVCL'
             default:
        result = eventNotHandledErr;
        break;
      }
      break;
  default:
      result = eventNotHandledErr;
      break;
    }
     return result;
}

//////////////////////////////////////////////////////////////////////////////////
//  MainWindowEventHandler              //
//////////////////////////////////////////////////////////////////////////////////
pascal OSStatus MainWindowEventHandler(EventHandlerCallRef windowHandler, EventRef theEvent, void* winData)
{
#pragma unused (windowHandler, winData)
    WindowRef      theWind;
    Rect      bounds;
    OSStatus      result = eventNotHandledErr;
    UInt32      keyMods;
    UInt32      keyCode;
    char      macKeyCode;
    EventHotKeyID    hotKeyID;

    switch(GetEventClass(theEvent))
    {
        case kEventClassMouse:    // 'mous'
      break;
        case kEventClassKeyboard:  // 'keyb'
      // When we get a keyboard event, yank all these params
      // Mac Character Code
            GetEventParameter(theEvent, kEventParamKeyMacCharCodes, typeChar,
          NULL, sizeof(macKeyCode), NULL, &amp;macKeyCode);
      // Raw Key Code
            GetEventParameter(theEvent,  kEventParamKeyCode, typeUInt32,
          NULL, sizeof(keyCode), NULL, &amp;keyCode);
      // Key Modifiers (shift, ctrl, cmd, etc)
            GetEventParameter(theEvent, kEventParamKeyModifiers, typeUInt32, 
          NULL, sizeof(keyMods), NULL, &amp;keyMods);

            switch(GetEventKind(theEvent))
            {
                case kEventRawKeyDown:
        switch(macKeyCode)
        {
      case 's':
      case 'S':
          break;
      case 'x':
      case 'X':
          break;
        }
                    break;
                case kEventRawKeyRepeat:
        switch(macKeyCode)
        {
      case 's':
      case 'S':
      break;
      case 'x':
      case 'X':
          break;
        }
                    break;
                case kEventRawKeyUp:
                    break;
                case kEventRawKeyModifiersChanged:
        break;
                case kEventHotKeyPressed:
                case kEventHotKeyReleased:
        // Hotkey Event ID
        GetEventParameter(theEvent, kEventParamDirectObject, typeEventHotKeyID,
            NULL, sizeof(hotKeyID), NULL, &amp;hotKeyID);
        break;
    // These two events are Mac OS X only
                case kEventKeyModifierNumLockBit: 
                case kEventKeyModifierFnBit:
        break;
                default:
                    break;
            }
            break;
        case kEventClassTextInput:  // 'text'
            break;
        case kEventClassApplication:  // 'appl'
            break;
        case kEventClassAppleEvent:  // 'eppc'
            break;
        case kEventClassMenu:    // 'menu'
            break;
        case kEventClassWindow:    // 'wind'
            GetEventParameter(theEvent,      // the event itself
                              kEventParamDirectObject,   // symbolic parameter name
                              typeWindowRef,     // expected type 
                              NULL,       // actual type (NULL is valid)
                              sizeof(theWind),     // buffer size
                              NULL,       // actual buffer size (Can be NULL)
                              &amp;theWind);    // variable to hold data
            switch(GetEventKind(theEvent))
            {
                case kEventWindowDrawContent:
                    // handle window updates here
                    result = noErr;
                    break;
    case kEventWindowBoundsChanging:
                case kEventWindowBoundsChanged:
        GetEventParameter(theEvent, kEventParamCurrentBounds, typeQDRectangle,
              NULL, sizeof(bounds), NULL, &amp;bounds);
                    InvalWindowRect(theWind, GetWindowPortBounds(theWind, &amp;bounds));
                    result = noErr;
                    break;
                case kEventWindowClose:
                    DisposeEventHandlerUPP(windowEventProcessor);
                    DisposeWindow(pMainWindow);
                    result = noErr;
                    break;
                default:
                    break;
            }
            break;
        case kEventClassControl:  // 'cntl'
            break;
        case kEventClassCommand:  // 'cmds'
            break;
        case kEventClassTablet:    // 'tblt'
            break;
        case kEventClassVolume:   // 'vol '
            break;
        default:
            break;
    }
    return result;
}

//////////////////////////////////////////////////////////////////////////////////
//  ControlEventHandler                //
//////////////////////////////////////////////////////////////////////////////////
pascal OSStatus ControlEventHandler(EventHandlerCallRef windowHandler, EventRef theEvent, void* ctrlData)
{
#pragma unused (windowHandler, winData)
    OSStatus result = noErr;
    ControlRef whichControl;
    ControlID ctrlID;
    
    switch(GetEventClass(theEvent))
    {
        case kEventClassControl:    // 'cntl'
            switch(GetEventKind(theEvent))
            {
                case kEventControlHit:
        GetEventParameter(theEvent,
            kEventParamDirectObject,
            typeControlRef,
            NULL,
            sizeof(whichControl),
            NULL,
            &amp;whichControl);
        GetControlID(whichControl, &amp;ctrlID);
        
        switch(ctrlID.signature)
        {
      case 'SNAP':
          // IMPORTANT: Must initialize imageCount here
          imageCount = 0;
          windowSnapshot(&amp;mainWindow);
          break;
      case 'SEQU':
          // IMPORTANT: Must initialize imageCount here
          imageCount = 0;
          windowSnapshotSequence(&amp;mainWindow);
          break;
      case 'STRT':
          // IMPORTANT: Must initialize imageCount here
          imageCount = 0;
          windowCaptureFrames(&amp;mainWindow);
          break;
      case 'STOP':
          break;
      default:
          break;
        }
        break;
                case kEventControlSetData:
                case kEventControlGetData:
                default:
        printf(&quot;Control: Event received.&quot;);
                    break;
            }
  default:
      break;
    }
    return result;
}
//////////////////////////////////////////////////////////////////////////////////
//  TimedEventProcessor                //
//////////////////////////////////////////////////////////////////////////////////
pascal void RenderTimedEventProcessor(EventLoopTimerRef inTimer, void* timeData)
{
    #pragma unused(inTimer, timeData)
    // Call the main rendering loop here
    Render(&amp;mainWindow);
}


//////////////////////////////////////////////////////////////////////////////////
//  TimedEventProcessor                //
//////////////////////////////////////////////////////////////////////////////////
pascal void SnapshotTimedEventProcessor(EventLoopTimerRef inTimer, void* timeData)
{
    #pragma unused(inTimer, timeData)
    if(seqFrameCount &gt; 0)
    {
  windowSnapshot(&amp;mainWindow);
  seqFrameCount--;
    }
    else
    {
  // placeholder for param to MP function
  void *noData = NULL;

  // Stop the timer from firing here and return NULL
  RemoveEventLoopTimer(snapshotTimer);
  DisposeEventLoopTimerUPP(snapshotTimerUPP);
  snapshotTimer = NULL;
  snapshotTimerUPP = NULL;
  // Now process the images we've stored
  //ProcessImageArray(imageCount, gwBuffer);
  MPProcessImageAsync(noData);
    }
}

pascal void MovieCaptureTimedEventProcessor(EventLoopTimerRef inTimer, void* timeData)
{
    #pragma unused(inTimer, timeData)
    static time_t startTime;
    static time_t endTime;
    static time_t timeNow;
    
    if(gwBuffer)
    {
  free(gwBuffer);
  gwBuffer = NULL;
    }

    startTime = time(&amp;startTime);
    endTime = startTime + movTimeLimit;
    
    // Allocate enough memory for our frames
    gwBuffer = malloc(movFrameCount * sizeof(GWorldPtr));
    
    // check to see if we're using frame or time limits
    if(movieUseTimeLimit)
    {
  timeNow = time(&amp;timeNow);
  // Check to see if we've hit our time limit
  if(timeNow &gt;= endTime)
      goto EndOfMovie;
    }

    if(movieUseFrameLimit &amp;&amp; movFrameCount &lt;= 0)
    {
  goto EndOfMovie;
    }
    else
    {  
  // FIXME: This isn't working yet. 
  //windowAddFrameToMovie(&amp;mainWindow, gwBuffer);
    }
    
EndOfMovie:
  // Stop the timer from firing here and return NULL
  RemoveEventLoopTimer(snapshotTimer);
  DisposeEventLoopTimerUPP(snapshotTimerUPP);
  snapshotTimer = NULL;
  snapshotTimerUPP = NULL;

}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/Carbon_GLSnapshot/listing13.html%3Fid%3DDTS10000514-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/Carbon_GLSnapshot/listing13.html%3Fid%3DDTS10000514-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/Carbon_GLSnapshot/listing13.html%3Fid%3DDTS10000514-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>TEFeatureFlag(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING120></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-119.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-121.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-40.html"><B>Chapter 2 - TextEdit</B></A> / <A HREF="Text-56.html"><B>TextEdit Reference</B></A><BR><DL><DD><A HREF="Text-67.html"><B>Routines</B></A> / <A HREF="Text-119.html"><B>Additional TextEdit Features</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING120-0></A>
<H3><A NAME=MARKER-9-542></A>TEFeatureFlag</H3>
 The <A NAME=MARKER-2-207></A><CODE>TEFeatureFlag</CODE> function turns a specified feature on or off or returns the current status of that feature. Features supported are automatic scrolling, text buffering, outline highlighting, inline input, and text services.<P>
<PRE>
FUNCTION TEFeatureFlag (feature: Integer; action: Integer;
                        hTE: TEHandle): Integer;
</PRE>
<DL>
<DT><CODE>feature</CODE>
<DD> The feature for which the action is to be performed.
<DT><CODE>action</CODE>
<DD> A selector stipulating that the feature, specified by the <CODE>feature</CODE> parameter, is to be turned on or off, or that the current status of the feature is to be returned.
<DT><CODE>hTE</CODE> 
<DD> A handle to the edit record for which the action should be performed.
</DL>
<A NAME=HEADING120-6></A>
<H5>DESCRIPTION</H5>
 You can use the <CODE>TEFeatureFlag</CODE> function to check the status of additional TextEdit features--automatic scrolling, outline highlighting, and text buffering--and to enable or disable the feature. You can also use this function to disable inline input in a particular edit record and to enable several features that have been provided so that inline input works correctly with TextEdit.<P>
 To identify a feature, you specify one of the following constants as the value of the <CODE>feature</CODE> parameter.
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TH>Description<TR>
<TD><A NAME=MARKER-2-439></A>teFAutoScr<CODE>oll</CODE><TD> 0<TD>Automatic scrolling<TR>
<TD><A NAME=MARKER-2-372></A>teFTextBufferin<CODE>g</CODE><TD>1<TD>Text buffering<TR>
<TD><A NAME=MARKER-2-709></A>teFOutlineHilit<CODE>e</CODE><TD> 2<TD>Outline highlighting<TR>
<TD>teFInlineInput<TD>3<TD>Inline input<TR>
<TD><A NAME=MARKER-2-707></A>teFUseTextService<CODE>s</CODE><TD>4<TD>Use inline input service</TABLE>
<P>
 You specify the <CODE>action</CODE> to be performed on a feature through the following constants.
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TH>Description<TR>
<TD><A NAME=MARKER-2-246></A>teBitClear<TD>0<TD>Disables the specified feature<TR>
<TD><A NAME=MARKER-2-449></A>teBitSet<TD>1<TD>Enables the specified feature<TR>
<TD><A NAME=MARKER-9-269></A>teBitTest<TD>-1<TD>Returns the current setting of the specified feature</TABLE>
<P>
 If <CODE>teBitTest</CODE> returns <CODE>teBitSet</CODE>, the feature is enabled; if it returns <CODE>teBitClear</CODE>, it is disabled.<P>
 You can use the <CODE>TEFeatureFlag</CODE> function to turn automatic scrolling on and off as an alternative to calling <CODE>TEAutoView</CODE>. The effect is the same.<P>
 The <CODE>teFOutlineHilite</CODE> selector specifies <A NAME=MARKER-2-22></A>outline <A NAME=MARKER-2-123></A>highlighting as the feature for which an action is to be performed. If a highlighted region exists in an edit record and the window is inactive, then the highlighted region is outlined or framed.<P>
 In the case that <A NAME=MARKER-2-169></A>outline highlighting is enabled and the current selection range is an insertion point, the caret is then drawn in a gray pattern so that it appears dimmed. To do the framing and caret dimming, TextEdit temporarily replaces the current address in the <CODE>highHook</CODE> and <CODE>caretHook</CODE> fields of the edit record, redraws the caret or the highlighted region, and then immediately restores the hooks to their previous addresses.<P>
 The <CODE>teFTextBuffering</CODE> selector enables or disables text buffering for performance improvements of 2-byte scripts. This is a global buffer, as opposed to the <CODE>TEKey</CODE> procedure's internal 2-byte buffer, and it is used across all active edit records. When using text buffering, take the following precautions:<P>
<UL>
<LI>Exercise care when you enable the text-buffering capability in more than one active record; otherwise, the bytes that are buffered from one edit record may appear in another edit record.
<LI>Ensure that buffering is not turned off in the middle of processing a 2-byte character. To guarantee the integrity of your record, it is important that you wait for an idle event before you disable buffering or enable buffering in a second edit record.
<LI>When text buffering is enabled, ensure that <CODE>TEIdle</CODE> is called before any pause of more than a few ticks--for example, before the Event Manager procedure <CODE>WaitNextEvent</CODE>. A possibility of a long delay before characters appear on the screen exists, especially in non-Roman systems. If you do not call <CODE>TEIdle</CODE>, the characters can end up in the edit record of another application. For more information, see <A HREF=Text-83.html#MARKER-9-443>"TEIdle" on page 2-79</A>.<P>
</UL>
 If <A NAME=MARKER-2-209></A>text buffering is enabled on a non-Roman script system and the keyboard has changed, TextEdit flushes the text of the current script from the buffer before bringing characters of the new script into the buffer.<P>
 If your application follows the guidelines for <A NAME=MARKER-2-537></A>inline input available from Macintosh Developer Technical Support, then you should set the <CODE>useTextEditServices</CODE> flag in the Size resource in your application. This allows inline input to work with your application. <B>Inline input</B> is a keyboard input method (often used for double-byte script systems) in which conversion from a phonetic to an ideographic representation of a character takes place at the current line position where the text is intended to appear. This allows the user to type text directly in the line as opposed to a special conversion window. If inline input is installed and the <CODE>useTextEditServices</CODE> flag in the Size resource is set, inline input sets TextEdit's <CODE>teFUseTextServices</CODE> feature bit whenever an edit record is created. TextEdit does not use this bit.<P>
 Inline input checks the <CODE>teFUseTextServices</CODE> bit during text editing to determine if an inline session should begin. If you want to disable inline input for a particular edit record, your application can clear this bit after the edit record is created. You can also clear this bit to disable inline input temporarily and then restore it, but the edit record must always be deactivated before the state of the bit is changed.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>You <I>must</I> deactivate an edit record (using <CODE>TEDeactivate</CODE>) before changing the state of the feature bits or any fields in the edit record.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 In the future, other text services may use this same mechanism. If you follow the guidelines specified here, your application should also work with future text services. When an inline edit session begins, inline input also sets the <CODE>teFInlineInput</CODE> bit to provide the following features so that inline input works correctly with TextEdit:<P>
<UL>
<LI>disabling font and keyboard synchronization
<LI>forcing a multiple-line selection to be highlighted line by line using a separate rectangle for each line rather than using a minimum number of rectangles for optimization
<LI>highlighting a line only to the edge of the text rather than beyond the text to the edge of the view rectangle<P>
</UL>
<DL>
<DT><B>IMPORTANT</B>
<DD>The <CODE>teFInlineInput</CODE> bit is cleared by inline input when an inline session ends. Use the <CODE>teFInlineInput</CODE> constant in the feature parameter of <CODE>TEFeatureFlag</CODE> to include these features in your application even when inline input is not installed. Be careful about changing the state of this bit if the <CODE>teFUseTextServices</CODE> bit is set. Again, the edit record should always be deactivated before you change the state of the <CODE>teFInlineInput</CODE> bit. If you clear the <CODE>teFUseTextServices</CODE> bit and you set the <CODE>teFInlineInput</CODE> bit, inline input is disabled, but your application retains the features listed above.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 To test for the availability of these features, you can call the <CODE>Gestalt</CODE> function with the <CODE>gestaltTextEditVersion</CODE> selector. A result of <CODE>gestaltTE4</CODE> or greater returned in the response parameter indicates that outline highlighting and text buffering are available. A result of <CODE>gestaltTE5</CODE> or greater returned in the response parameter indicates that the two inline input features are available.<P>
 The inline input features are also available on version 6.0.7 systems with non-Roman script systems installed. However, there is no Gestalt constant that indicates this availability.<P>
<A NAME=HEADING120-29></A>
<H5>SEE ALSO</H5>
 For a description of the <CODE>WaitNextEvent</CODE> function, see the chapter "Event Manager" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>.<A NAME=MARKER-9-329></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-119.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-121.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE>Application-Defined Routines</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="RH2.RoutineHd2"><A NAME="pgfId=3901"> </A><A NAME="marker=3419"> </A>Application-Defined Routines</H1><P CLASS="T1.Text1"><A NAME="pgfId=3903"> </A><A NAME="marker=3902"> </A>This section describes the routines you might need to define when using the routines in the QuickDraw&nbsp;3D Pointing Device Manager.</P><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3908"> </A><A NAME="37131"> </A>TQ3ChannelGetMethod</H3><P CLASS="T1.Text1"><A NAME="pgfId=3913"> </A><A NAME="marker=3909"> </A>You can define a function that QuickDraw&nbsp;3D calls to get a channel of a controller.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=8772"> </A>typedef TQ3Status (*TQ3ChannelGetMethod) (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ControllerRef controllerRef, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long channel, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *data, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long *dataSize);<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8774"> </A><TT CLASS="cv">controllerRef</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3915"> </A>A reference to a controller.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8783"> </A><TT CLASS="cv">channel</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3916"> </A>An index into the list of channels associated with the specified controller. This value is always greater than or equal to 0 and less than the channel count specified at the time <TT CLASS="cv">Q3Controller_New</TT> was called.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8792"> </A><TT CLASS="cv">data</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3917"> </A>On entry, a pointer to a buffer. You should put the current value of the specified controller channel into this buffer.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8801"> </A><TT CLASS="cv">dataSize</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3918"> </A>On exit, the number of bytes of data written to the specified buffer.</DD></DL COMPACT><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3919"> </A>DESCRIPTION</H4><P CLASS="T1.Text1"><A NAME="pgfId=1771"> </A>Your <TT CLASS="cv">TQ3ChannelGetMethod</TT> function should return, in the buffer pointed to by the <TT CLASS="cv">data</TT> parameter, the current value of the controller channel specified by the <TT CLASS="cv">controllerRef</TT> and <TT CLASS="cv">channel</TT> parameters. Your function should also return, in the <TT CLASS="cv">dataSize</TT> parameter, the size of that data. QuickDraw&nbsp;3D allocates memory for the data buffer before it calls your function and deallocates the memory after your function has returned. The maximum number of bytes that the data buffer can hold is defined by a constant:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=8812"> </A>#define kQ3ControllerSetChannelMaxDataSize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;256<BR></CODE></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1776"> </A>SPECIAL CONSIDERATIONS</H4><P CLASS="T1.Text1"><A NAME="pgfId=3926"> </A>You need to define a channel-getting method only if you are writing a device driver for a controller. You can, however, call <TT CLASS="cv">Q3Controller_GetChannel</TT> at any time to invoke a controller's channel-getting method.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3927"> </A>RESULT CODES</H4><P CLASS="T1.Text1"><A NAME="pgfId=3928"> </A>Your channel-getting method should return <TT CLASS="cv">kQ3Success</TT> if it is able to return the requested information and <TT CLASS="cv">kQ3Failure</TT> otherwise.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3929"> </A>SEE ALSO</H4><P CLASS="T1.Text1"><A NAME="pgfId=3933"> </A>See the description of <TT CLASS="cv">Q3Controller_GetChannel</TT> on <A HREF="qd3dpointdevmgr.c.htm#17313" CLASS="XRef">[link]</A> for information on getting a controller's channels.</P></DIV></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3935"> </A><A NAME="26556"> </A>TQ3ChannelSetMethod</H3><P CLASS="T1.Text1"><A NAME="pgfId=3940"> </A><A NAME="marker=3936"> </A>You can define a function that QuickDraw&nbsp;3D calls to set a channel of a controller.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=8818"> </A>typedef TQ3Status (*TQ3ChannelSetMethod) (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ControllerRef controllerRef, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long channel, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void *data, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned long dataSize);<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8820"> </A><TT CLASS="cv">controllerRef</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3942"> </A>A reference to a controller.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8829"> </A><TT CLASS="cv">channel</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3943"> </A>An index into the list of channels associated with the specified controller. This value is always greater than or equal to 0 and less than the channel count specified at the time <TT CLASS="cv">Q3Controller_New</TT> was called.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8838"> </A><TT CLASS="cv">data</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3944"> </A>On entry, a pointer to a buffer that contains the desired value of the specified controller channel. If this field contains the value <TT CLASS="cv">NULL</TT>, you should reset the specified channel to a default or inactive value.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8847"> </A><TT CLASS="cv">dataSize</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3945"> </A>On entry, the number of bytes of data in the specified buffer.</DD></DL COMPACT><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3946"> </A>DESCRIPTION</H4><P CLASS="T1.Text1"><A NAME="pgfId=3947"> </A>Your <TT CLASS="cv">TQ3ChannelSetMethod</TT> function should set the controller channel specified by the <TT CLASS="cv">controllerRef</TT> and <TT CLASS="cv">channel</TT> parameters to the value specified by the <TT CLASS="cv">data</TT> parameter. The <TT CLASS="cv">dataSize</TT> parameter specifies the number of bytes in the data buffer. QuickDraw&nbsp;3D allocates memory for the data buffer before it calls your function and deallocates the memory after your function has returned. The maximum number of bytes that the data buffer can hold is defined by a constant:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=8858"> </A>#define kQ3ControllerSetChannelMaxDataSize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;256<BR></CODE></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3952"> </A>SPECIAL CONSIDERATIONS</H4><P CLASS="T1.Text1"><A NAME="pgfId=3953"> </A>You need to define a channel-setting method only if you are writing a device driver for a controller. You can, however, call <TT CLASS="cv">Q3Controller_SetChannel</TT> at any time to invoke a controller's channel-setting method.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3954"> </A>RESULT CODES</H4><P CLASS="T1.Text1"><A NAME="pgfId=3955"> </A>Your channel-setting method should return <TT CLASS="cv">kQ3Success</TT> if it is able to set the specified channel to the specified value and <TT CLASS="cv">kQ3Failure</TT> otherwise.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3956"> </A>SEE ALSO</H4><P CLASS="T1.Text1"><A NAME="pgfId=3960"> </A>See the description of <TT CLASS="cv">Q3Controller_SetChannel</TT> on <A HREF="qd3dpointdevmgr.c.htm#20948" CLASS="XRef">[link]</A> for information on setting a controller's channels.</P></DIV></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3962"> </A><A NAME="17290"> </A>TQ3TrackerNotifyFunc</H3><P CLASS="T1.Text1"><A NAME="pgfId=3967"> </A><A NAME="marker=3963"> </A>You can define a tracker notify function that QuickDraw&nbsp;3D calls when a controller associated with a tracker has new data.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=8862"> </A>typedef TQ3Status (*TQ3TrackerNotifyFunc) (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3TrackerObject trackerObject, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TQ3ControllerRef controllerRef);<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8864"> </A><TT CLASS="cv">trackerObject</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3969"> </A>A tracker object.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=8873"> </A><TT CLASS="cv">controllerRef</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3970"> </A>A reference to a controller.</DD></DL COMPACT><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3971"> </A>DESCRIPTION</H4><P CLASS="T1.Text1"><A NAME="pgfId=3972"> </A>Your <TT CLASS="cv">TQ3TrackerNotifyFunc</TT> function is called whenever any controller associated with a tracker has new data to be processed and the data meets or exceeds the current position and orientation thresholds for the tracker. The affected controller and tracker are passed in the <TT CLASS="cv">controllerRef</TT> and <TT CLASS="cv">trackerObject</TT> parameters. Your tracker notify function might, for example, schedule your application to awaken and redraw the scene.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3973"> </A>SPECIAL CONSIDERATIONS</H4><P CLASS="T1.Text1"><A NAME="pgfId=3974"> </A>Your tracker notify function might be called at interrupt time, but it is never called reentrantly.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3975"> </A>RESULT CODES</H4><P CLASS="T1.Text1"><A NAME="pgfId=3976"> </A>Your tracker notify function should return <TT CLASS="cv">kQ3Success</TT> if it is successful and <TT CLASS="cv">kQ3Failure</TT> otherwise.</P></DIV><DIV><H4 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3977"> </A>SEE ALSO</H4><P CLASS="T1.Text1"><A NAME="pgfId=3981"> </A>See the description of <TT CLASS="cv">Q3Tracker_New</TT> <A HREF="qd3dpointdevmgr.e.htm#27411" CLASS="XRef">[link]</A> for information on setting the notify function of a tracker.</P></DIV></DIV><H2 CLASS="RH3.RoutineHd3TOC"><A HREF="qd3dpointdevmgr.10.htm#pgfId=5051" CLASS="Hypertext">Cursor Tracker Routines</A></H2><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
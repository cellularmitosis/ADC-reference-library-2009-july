<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Switching Contexts(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING34></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-33.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-35.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A> / <A HREF="Toolbox-29.html"><B>Introduction to Events</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING34-0></A>
<H2>Switching Contexts</H2>
 <A NAME=MARKER-2-378></A>Processes running in the background receive processing time when the foreground process makes an event call (that is, calls <CODE>WaitNextEvent</CODE> or <CODE>EventAvail</CODE>) and there are no events pending for that foreground process. A process running in the background should relinquish the CPU regularly to ensure a timely return to the foreground process when necessary.<P>
 In System 7 (or with MultiFinder in earlier versions), the available processing time is distributed among multiple processes through a procedure known as context switching (or just switching). All switching occurs at a well-defined time, namely, when an application calls <CODE>WaitNextEvent</CODE>. When a context switch occurs, the Process Manager allocates processing time to a process other than the one that had been receiving processing time. Two types of context switching may occur: major and minor. <A NAME=MARKER-2-65></A><A NAME=MARKER-2-89></A><A NAME=MARKER-2-1></A><P>
 A <B>major switch</B> is a complete context switch: an application's windows are moved from the back to the front, or vice versa. In a major switch, two applications are involved, the one being switched to the foreground and the one being switched to the background. The Process Manager switches the A5 worlds of both applications, as well as the relevant low-memory environments. If those applications receive suspend and resume events, they are so notified at the time that a major switch occurs. <A NAME=MARKER-2-2></A><A NAME=MARKER-2-104></A> <P>
 A <B>minor switch</B> occurs when the Process Manager gives time to a background process without bringing the background process to the front. The two processes involved in a minor switch can be two background processes or a foreground process and a background process. As in a major switch, the Process Manager switches the A5 worlds and the low-memory environments of the two processes. However, the order of windows is not switched, and neither process receives either suspend or resume events. <A NAME=MARKER-9-275></A><P>
 When the frontmost window is an alert box or a modal dialog box, major switching does not occur, although minor switching can. To determine whether major switching can occur, the Operating System checks (among other things) to see if the window definition procedure of the frontmost window is <CODE>dBoxProc</CODE>, because the type <CODE>dBoxProc</CODE> is specifically reserved for alert boxes and modal dialog boxes. (If the frontmost window is a movable modal dialog box, major switching can still occur.)<A NAME=MARKER-2-276></A><P>
<DL>
<DT><B>Note</B>
<DD>Your application can also get switched out if it calls a system software routine that makes an event call. For example, when your application calls <CODE>ModalDialog</CODE>, a minor switch can occur. <EM>u</EM>   <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Your application can receive processing time and perform tasks in the background, <BR>but your application should not interact with the user or perform tasks that would slow down the responsiveness of the foreground process.<P>
 <A NAME=MARKER-2-193></A>Your application indicates scheduling options to the Operating System, such as whether the application can use null-event processing time when in the background, whether it can accept suspend and resume events, and so forth, by setting flags in its <B>size</B> (<CODE>'SIZE'</CODE>) <B>resource.</B> Every application executing in System 7, as well as every application executing in System 6 with MultiFinder, should contain a <CODE>'SIZE'</CODE> resource. See <A HREF=Toolbox-39.html#MARKER-9-127>"Creating a Size Resource" beginning on page 2-30</A> for details on how to specify this information.<A NAME=MARKER-21-443></A><A NAME=MARKER-2-542></A><A NAME=MARKER-2-389></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-33.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-35.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

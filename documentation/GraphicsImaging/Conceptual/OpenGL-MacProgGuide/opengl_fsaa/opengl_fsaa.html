<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>OpenGL Programming Guide for Mac OS X: Techniques for Scene Anti-Aliasing</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Techniques for Scene Anti-Aliasing"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001987-CH405" title="Techniques for Scene Anti-Aliasing"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../OpenGL-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000549" target="_top">OpenGL</a> &gt; <a href="../opengl_intro/opengl_intro.html#//apple_ref/doc/uid/TP40001987-CH207-TP9">OpenGL Programming Guide for Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../opengl_texturedata/opengl_texturedata.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../opengl_threading/opengl_threading.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001987-CH405-SW7" title="Techniques for Scene Anti-Aliasing"></a><h1>Techniques for Scene Anti-Aliasing</h1><p>Aliasing is the bane of the digital domain. In the early days of the personal computer, jagged edges and blocky graphics were accepted by the user simply because not much could be done to correct them. Now that hardware is faster and displays are higher in resolution, there are several anti-aliasing techniques that can smooth edges to achieve a more realistic scene. </p><p>OpenGL supports anti-aliasing that operates at the level of lines and polygons as well as at the level of the full scene. This chapter discusses techniques for full scene anti-aliasing (FSAA). The three anti-aliasing techniques in use today are multisampling, supersampling, and alpha channel blending:</p><ul class="ul"><li class="li"><p><strong>Multisampling</strong> defines a technique for sampling pixel content at multiple locations for each pixel. This is a good technique to use if you want to smooth polygon edges.</p></li><li class="li"><p><strong>Supersampling</strong> renders at a much higher resolution than what's needed for the display. Prior to drawing the content to the display, OpenGL scales  and filters  the content to the appropriate resolution. This is a good technique to use when you want to smooth texture interiors in addition to polygon edges.</p></li><li class="li"><p><strong>Alpha channel blending</strong> uses the alpha value of a fragment to control how to blend the fragment  with the pixel values that are already in the framebuffer. It's a good technique to use when you want to ensure that foreground and background images are composited smoothly.</p></li></ul><p>The  <code>ARB_multisample</code> extension defines a specification for full scene anti-aliasing. It describes multisampling and alpha channel sampling. The specification does not specifically mention supersampling but its wording doesn't preclude supersampling. The anti-aliasing methods that are available depend on the hardware and the actual implementation depends on the vendor. Some graphics cards support anti-aliasing using a mixture of multisampling and supersampling. The methodology used to select the samples can vary as well. Your best approach is to query the renderer to find out exactly what is supported. OpenGL lets you provide a hint  to the renderer as to which anti-aliasing technique you prefer. Hints are available starting in Mac OS X v10.4 as renderer attributes that you supply when you create a pixel format object.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW8">Guidelines</a>
				
			<br/>
			
        
			
			
				<a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW9">General Approach</a>
				
			<br/>
			
        
			
			
				<a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW3">Hinting for a Specific Anti-Aliasing Technique</a>
				
			<br/>
			
        
			
			
				<a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW2">Setting Up Full Scene Anti-Aliasing</a>
				
			<br/>
			
        
			
			
				<a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW10">See Also</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001987-CH405-SW8" title="Guidelines"></a><h2>Guidelines</h2><p>You'll want to keep the following in mind when you set up full scene anti-aliasing:</p><ul class="ul"><li class="li"><p>Although a system may have enough VRAM to accommodate a multisample buffer, a large buffer can affect the ability of OpenGL to maintain a properly working texture set. Keep in mind that the buffers associated with the rendering context—depth and stencil—increase in size by a factor equal to number of samples per pixel. </p></li><li class="li"><p>The OpenGL driver allocates the memory needed for the multisample buffer; your application should not allocate this memory.</p></li><li class="li"><p>Any anti-aliasing algorithm that operates on the full scene requires a fair amount of computing resources. In some cases, there is a tradeoff between performance and quality. For that reason, developers sometimes provide a user interface element  that allows the user to enable and disable FSAA, or to choose the level of quality for anti-aliasing.</p></li><li class="li"><p>The commands <code>glEnable(GL_MULTISAMPLE)</code> and <code>glDisable(GL_MULTISAMPLE)</code> are ignored on some hardware because some graphics cards have the feature enabled all the time. That doesn't mean that you should not call these commands because you'll certainly need them on hardware that doesn't ignore them. </p></li><li class="li"><p>A hint  as to the variant of sampling you want is a suggestion, not a command. Not all hardware supports all types of anti-aliasing. Other hardware mixes multisampling with supersampling techniques. The driver dictates the type of anti-aliasing that's actually used in your application.</p></li><li class="li"><p>The best way to find out which sample modes are supported is to call the CGL function <code>CGLDescribeRenderer</code> with the renderer property <code>kCGLRPSampleModes</code> or <code>kCGLRPSampleAlpha</code>.</p></li></ul><a name="//apple_ref/doc/uid/TP40001987-CH405-SW9" title="General Approach"></a><h2>General Approach</h2><p>The general approach to setting up full scene anti-aliasing is as follows:</p><ol class="ol"><li class="li"><p>Check to see what's supported. Not all hardware is capable of supporting the ARB multisample extension, so you need to check for this functionality (see <span class="content_text"><a href="../opengl_general/opengl_gen_tasks.html#//apple_ref/doc/uid/TP40001987-CH211-SW1">“Detecting Functionality”</a></span>). </p><p>To find out what type of anti-aliasing a specific renderer supports, call the function <code>CGLDescribeRenderer</code>. Supply the renderer property <code>kCGLRPSampleModes</code> to find out whether the renderer supports multisampling and supersampling. Supply <code>kCGLRPSampleAlpha</code> to see whether the renderer supports alpha sampling.</p><p>You can choose to exclude unsupported hardware from the pixel format search by specifying only the hardware that supports multisample anti-aliasing. Keep in mind that if you exclude unsupported hardware, the unsupported displays will not render anything. If you instead choose to include unsupported hardware, OpenGL uses normal aliased rendering to the unsupported displays and multisampled rendering to supported displays.</p></li><li class="li"><p>Include these buffer attributes in the attributes array:</p><ul class="ul"><li class="li"><p>The appropriate sample buffer attribute constant (<code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOpenGLPFASampleBuffers" target="_top">NSOpenGLPFASampleBuffers</a></code>,  <code>AGL_SAMPLE_BUFFERS_ARB</code>, or <code>kCGLPFASampleBuffers</code>) along with  the number of multisample buffers. At this time the specification allows only one multisample buffer.</p></li><li class="li"><p>The appropriate samples constant (,<code>NSOpenGLPFASamples</code>, <code>AGL_SAMPLES_ARB</code>, or <code>kCGLPFASamples</code>) along with the number of samples per pixel. You can supply 2, 4, 6, or more depending on what the renderer supports and the amount of VRAM available. The value that you supply affects the quality, memory use, and speed of the multisampling operation. For fastest performance, and to use the least amount of video memory, specify 2 samples. When you need more quality, specify 4 or more.</p></li><li class="li"><p>The no recovery attribute ( <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOpenGLPFANoRecovery" target="_top">NSOpenGLPFANoRecovery</a></code>, <code><a href="../../../Reference/AGL_OpenGL/Reference/reference.html#//apple_ref/doc/c_ref/AGL_NO_RECOVERY" target="_top">AGL_NO_RECOVERY</a></code>, or <code>kCGLPFANoRecovery</code>). Although enabling this attribute is not mandatory, it's recommended to prevent OpenGL from using software fallback as a renderer. The software renderer does not support multisample antialiasing prior to Mac OS X v10.4. In versions that the software renderer does support  multisampling (4, 9, or 16 samples), antialiasing performance is slow.</p></li></ul></li><li class="li"><p>Optionally provide a hint for the type of anti-aliasing you want—multisampling, supersampling, or alpha sampling. See <span class="content_text"><a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW3">“Hinting for a Specific Anti-Aliasing Technique.”</a></span></p></li><li class="li"><p>Enable multisampling with the following command: </p><p><code>glEnable(GL_MULTISAMPLE)</code>;</p><p>Regardless of the enabled state, OpenGL always uses the multisample buffer if you supply the appropriate buffer attributes when you set up the pixel format object. If you haven't supplied the appropriate attributes, enabling multisampling has no effect. </p><p>When multisampling is disabled, all coverage values are set to <code>1</code>, which gives the appearance of  rendering without multisampling.</p><p>Some graphics hardware leaves multisampling enabled all the time. However, don't rely on hardware to have multisampling enabled; use <code><!--a-->glEnable<!--/a--></code> to programmatically turn on this feature.</p></li><li class="li"><p>Optionally provide hints for the rendering algorithm. You perform this optional step only if you want OpenGL to compute coverage values by a method other than uniformly weighting samples and averaging them.</p><p>Some hardware supports a multisample filter hint  through an OpenGL extension—<code>GL_NV_multisample_filter_hint</code>. This hint allows an OpenGL implementation to use an alternative method of resolving the color of multisampled pixels. </p><p>You can specify that OpenGL uses faster or nicer rendering by calling the OpenGL function <code>glHint</code>, passing the constant <code>GL_MULTISAMPLE_FILTER_HINT_NV</code> as the target parameter and <code>GL_FASTEST</code> or <code>GL_NICEST</code> as the mode parameter. Hints allow the hardware to optimize  the output if it can. There is no performance penalty or returned error for issuing a hint that's not supported.</p><p>For more information, see the <span class="content_text"><a href="http://oss.sgi.com/projects/ogl-sample/registry/NV/multisample_filter_hint.txt" target="_blank">OpenGL extension registry for NV_multisample_filter_hint</a></span>.</p></li></ol><p><span class="content_text"><a href="opengl_fsaa.html#//apple_ref/doc/uid/TP40001987-CH405-SW2">“Setting Up Full Scene Anti-Aliasing”</a></span> provides specific code examples. </p><a name="//apple_ref/doc/uid/TP40001987-CH405-SW3" title="Hinting for a Specific Anti-Aliasing Technique"></a><h2>Hinting for a Specific Anti-Aliasing Technique</h2><p>In Mac OS X v10.4 and later, when you set up your renderer and buffer attributes for full scene antialiasing, you can specify a hint to prefer one anti-aliasing technique over the others.  If the underlying renderer does not have sufficient resources to support what you request, OpenGL ignores the hint. If you do not supply the appropriate buffer attributes when you create a pixel format object, then the hint does nothing. <span class="content_text">Table 10-1</span> lists the hinting constants available for the <code>NSOpenGLPixelFormat</code> class, AGL, and CGL. </p><a name="//apple_ref/doc/uid/TP40001987-CH405-SW1" title="Table 10-1Anti-aliasing hints available starting in Mac OS X v10.4"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 10-1&nbsp;&nbsp;</strong>Anti-aliasing hints available starting in Mac OS X v10.4</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Multisampling</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Supersampling</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Alpha blending</p></th></tr><tr><td  scope="row"><p><code>NSOpenGLPFAMultisample</code></p></td><td ><p><code>NSOpenGLPFASupersample</code></p></td><td ><p><code>NSOpenGLPFASampleAlpha</code></p></td></tr><tr><td  scope="row"><p><code>AGL_MULTISAMPLE</code></p></td><td ><p><code>AGL_SUPERSAMPLE</code></p></td><td ><p><code>AGL_SAMPLE_ALPHA</code></p></td></tr><tr><td  scope="row"><p><code>kCGLPFAMultisample</code></p></td><td ><p><code>kCGLPFASupersample</code></p></td><td ><p><code>kCGLPFASampleAlpha</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001987-CH405-SW2" title="Setting Up Full Scene Anti-Aliasing"></a><h2>Setting Up Full Scene Anti-Aliasing</h2><p> The code listings in this section show how to set up full scene anti-aliasing using the <code>NSOpenGLPixelFormat</code> class, AGL, and CGL. You'll see that the code to set buffer and renderer attributes and to create  a context looks similar to what you'd normally use to set up any rendering context. Regardless of the API that you use, you need to specify the appropriate attributes. Although you need to specify the context slightly differently for each of the APIs, the outcome is the same—a pixel format and context that supports full-scene anti-aliased rendering.</p><p><span class="content_text">Listing 10-1</span> sets up full scene anti-aliasing using  the <code>NSOpenGLPixelFormat</code> class, but does not provide a hint, which is optional. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH405-SW4" title="Listing 10-1Using NSOpenGLPixelFormat to set up full scene anti-aliasing"></a><p class="codesample"><strong>Listing 10-1&nbsp;&nbsp;</strong>Using <code>NSOpenGLPixelFormat</code> to set up full scene anti-aliasing</p><div class="codesample"><table><tr><td scope="row"><pre>#import &lt;Cocoa/Cocoa.h><span></span></pre></td></tr><tr><td scope="row"><pre>@implementation BasicOpenGLView<span></span></pre></td></tr><tr><td scope="row"><pre>+ (NSOpenGLPixelFormat*)defaultPixelFormat<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSOpenGLPixelFormatAttribute attributes [] = { <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>            NSOpenGLPFAWindow,<span></span></pre></td></tr><tr><td scope="row"><pre>            NSOpenGLPFADoubleBuffer,<span></span></pre></td></tr><tr><td scope="row"><pre>            NSOpenGLPFASampleBuffers, 1,<span></span></pre></td></tr><tr><td scope="row"><pre>            NSOpenGLPFASamples, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>            NSOpenGLPFANoRecovery,<span></span></pre></td></tr><tr><td scope="row"><pre>            (NSOpenGLPixelFormatAttribute)nil<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>    return [[[NSOpenGLPixelFormat alloc]<span></span></pre></td></tr><tr><td scope="row"><pre>            initWithAttributes:attributes] autorelease]; <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>-(id) initWithFrame: (NSRect) frameRect<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSOpenGLPixelFormat *pixelFormat = [BasicOpenGLView<span></span></pre></td></tr><tr><td scope="row"><pre>                                defaultPixelFormat]; <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>    self = [super initWithFrame: frameRect<span></span></pre></td></tr><tr><td scope="row"><pre>                pixelFormat: pixelFormat]; <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>   return self;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>// Define  other class methods  here.<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>Here's what the code in  <span class="content_text">Listing 10-1</span> does:</p><ol class="ol"><li class="li"><p>Sets up attributes for OpenGL to use for choosing the pixel format. The attributes include the two required for multisampling: <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOpenGLPFASampleBuffers" target="_top">NSOpenGLPFASampleBuffers</a></code> and <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOpenGLPFASamples" target="_top">NSOpenGLPFASamples</a></code>, along with those to support a Cocoa window, double buffering, and no recovery. </p></li><li class="li"><p>Allocates and initializes an <code>NSOpenGLPixelFormat</code> object with the requested multisampling (and other) attributes. </p></li><li class="li"><p>Creates an <code>NSOpenGLPixelFormat</code> object for a custom <code>NSOpenGLView</code> class (<code>BasicOpenGLView</code>) that was previously created by the application using Interface Builder  but is not shown in this example.</p></li><li class="li"><p>Initializes the view with the newly created pixel format.</p></li></ol><p><span class="content_text">Listing 10-2</span> sets up full scene anti-aliasing in Carbon and provides a hint for supersampling. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH405-SW5" title="Listing 10-2Using AGL  to set up full scene anti-aliasing with a hint for supersampling"></a><p class="codesample"><strong>Listing 10-2&nbsp;&nbsp;</strong>Using AGL  to set up full scene anti-aliasing with a hint for supersampling</p><div class="codesample"><table><tr><td scope="row"><pre>#include &lt;AGL/agl.h><span></span></pre></td></tr><tr><td scope="row"><pre>GLint attribs[] = { AGL_RGBA,  <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>                    AGL_DOUBLEBUFFER,<span></span></pre></td></tr><tr><td scope="row"><pre>                    AGL_SAMPLE_BUFFERS_ARB, 1,<span></span></pre></td></tr><tr><td scope="row"><pre>                    AGL_SAMPLES_ARB, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>                    AGL_SUPERSAMPLE,<span></span></pre></td></tr><tr><td scope="row"><pre>                    AGL_NO_RECOVERY,<span></span></pre></td></tr><tr><td scope="row"><pre>                    AGL_NONE };<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>AGLPixelFormat pixelFormat = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>AGLContext context = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>pixelFormat = aglChoosePixelFormat (NULL, 0, attribs); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>if (pixelFormat) {<span></span></pre></td></tr><tr><td scope="row"><pre>    context = aglCreateContext (pixelFormat, NULL); <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>    aglDestroyPixelFormat (pixelFormat);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p></p><p>Here's what the code in <span class="content_text">Listing 10-2</span> does:</p><ol class="ol"><li class="li"><p>Sets up attributes for OpenGL to use for creating an AGL pixel format object. The attributes include the two required for multisampling (<code>AGL_SAMPLE_BUFFERS_ARB</code> and <code>AGL_SAMPLES_ARB</code>) along with those to support RGBA pixels, double buffering, and no recovery.</p></li><li class="li"><p>Creates a pixel format object. Prior to this call you can optionally provide a list of <code>GDHandle</code> values that specify the  supported displays.</p></li><li class="li"><p>Creates a rendering context based on the newly created pixel format object that is set up to support full scene antialiasing.</p></li></ol><p><span class="content_text">Listing 10-3</span> sets up full scene anti-aliasing using the CGL API and provides a hint for multisampling. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH405-SW6" title="Listing 10-3Using CGL to set up full scene anti-aliasing with a hint for multisampling"></a><p class="codesample"><strong>Listing 10-3&nbsp;&nbsp;</strong>Using CGL to set up full scene anti-aliasing with a hint for multisampling</p><div class="codesample"><table><tr><td scope="row"><pre>#include &lt;OpenGL/OpenGL.h><span></span></pre></td></tr><tr><td scope="row"><pre>CGLPixelFormatAttribute attribs[] = {   kCGLPFADisplayMask, 0, <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>                                        kCGLPFAFullScreen,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kCGLPFADoubleBuffer,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kCGLPFASampleBuffers, 1,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kCGLPFASamples, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kCGLPFAMultisample<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kCGLPFANoRecovery,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        0 };<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CGLPixelFormatObj pixelFormat = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>CGLContextObj context = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>long numPixelFormats = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>attribs[1] = CGDisplayIDToOpenGLDisplayMask (CGMainDisplayID ()); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>CGLChoosePixelFormat (attribs, &amp;pixelFormat, &amp;numPixelFormats)); <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>if (pixelFormat) {<span></span></pre></td></tr><tr><td scope="row"><pre>        CGLCreateContext (pixelFormat, NULL, &amp;context); <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>        CGLDestroyPixelFormat (pixelFormat);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code in <span class="content_text">Listing 10-3</span> does:</p><ol class="ol"><li class="li"><p>Sets up attributes for OpenGL to use for creating a  CGL pixel format object. The attributes include the two multisampling attributes: <code><a href="../../../Reference/CGL_OpenGL/Reference/reference.html#//apple_ref/doc/c_ref/kCGLPFASampleBuffers" target="_top">kCGLPFASampleBuffers</a></code> and <code><a href="../../../Reference/CGL_OpenGL/Reference/reference.html#//apple_ref/doc/c_ref/kCGLPFASamples" target="_top">kCGLPFASamples</a></code>, along with those to support full-screen drawing, double buffering, and no recovery. The associated value for <code><a href="../../../Reference/CGL_OpenGL/Reference/reference.html#//apple_ref/doc/c_ref/kCGLPFASamples" target="_top">kCGLPFASamples</a></code> is the number of samples per multisample buffer, which in this case is <code>2</code>. The associated value for <code><a href="../../../Reference/CGL_OpenGL/Reference/reference.html#//apple_ref/doc/c_ref/kCGLPFASampleBuffers" target="_top">kCGLPFASampleBuffers</a></code> is a nonnegative integer that indicates the number of existing independent sample buffers, which in this case is <code>1</code>.</p></li><li class="li"><p>Sets the value of the display mask attribute to the main display. (Note that this code example does not capture the main display. See <span class="content_text"><a href="../opengl_fullscreen/opengl_cgl.html#//apple_ref/doc/uid/TP40001987-CH210-SW3">Listing 3-3</a></span>.)</p></li><li class="li"><p>Creates a pixel format object with the requested attributes.</p></li><li class="li"><p>Creates a context for the pixel format  that isn't shared. </p></li></ol><a name="//apple_ref/doc/uid/TP40001987-CH405-SW10" title="See Also"></a><h2>See Also</h2><p>You can find the complete specification for the  <code>GL_ARB_multisample</code> extension in the OpenGL extensions registry at <span class="content_text"><a href="http://oss.sgi.com/projects/ogl-sample/registry/" target="_blank">http://oss.sgi.com/projects/ogl-sample/registry/</a></span>.</p><p>If your application needs point or line anti-aliasing instead of full scene anti-aliasing, use the built in OpenGL point and line anti-aliasing functions. These are described in Section 3.4.2 in the OpenGL Specification.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../opengl_texturedata/opengl_texturedata.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../opengl_threading/opengl_threading.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-06-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_fsaa/opengl_fsaa.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_fsaa/opengl_fsaa.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_fsaa/opengl_fsaa.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<html><head><title>Mac OS X
 Manual Page For kadmin.local(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/kadmin.local" title="Mac OS X
 Manual Page for kadmin.local(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/kadmin.local"; name=kadmin.local(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
KADMIN(8)                                                                                          <!-- a -->KADMIN(8)<!-- /a -->



<b>NAME</b>
       kadmin - Kerberos V5 database administration program

<b>SYNOPSYS</b>
       <b>kadmin</b> [<b>-O</b> | <b>-N</b>] [<b>-r</b> <u>realm</u>] [<b>-p</b> <u>principal</u>] [<b>-q</b> <u>query</u>]
              [[<b>-c</b> <u>cache</u><b>_</b><u>name</u>] | [<b>-k</b> [<b>-t</b> <u>keytab</u>]]] [<b>-w</b> <u>password</u>] [<b>-s</b> <u>admin</u><b>_</b><u>server</u>[<u>:port</u>]

       <b>kadmin.local</b>    [<b>-r</b> <u>realm</u>] [<b>-p</b> <u>principal</u>] [<b>-q</b> <u>query</u>]
                       [<b>-d</b> <u>dbname</u>] [<b>-e</b> <u>"enc:salt</u> <u>..."</u><b>]</b> <b>[-m]</b> <b>[-x</b> <u>db</u><b>_</b><u>args</u><b>]</b>

<b>DESCRIPTION</b>
       <b>kadmin</b>  and  <b>kadmin.local</b> are command-line interfaces to the Kerberos V5 KADM5 administration system.
       Both <b>kadmin</b> and <b>kadmin.local</b> provide identical functionalities; the difference is  that  <b>kadmin.local</b>
       runs  on the master KDC if the database is db2 and does not use Kerberos to authenticate to the data-<font color="#ffffff" class="whiteout">base.&nbsp;database.</font>
       base. Except as explicitly noted otherwise, this man page will use <b>kadmin</b> to refer to both  versions.
       <b>kadmin</b>  provides  for  the maintenance of Kerberos principals, KADM5 policies, and service key tables
       (keytabs).

       The remote version uses Kerberos authentication and an encrypted RPC, to operate securely  from  any-<font color="#ffffff" class="whiteout">where&nbsp;anywhere</font>
       where on the network.  It authenticates to the KADM5 server using the service principal <u>kadmin/admin</u>.
       If the credentials cache contains a ticket  for  the  <u>kadmin/admin</u>  principal,  and  the  <b>-c</b>  <u>creden</u>-<font color="#ffffff" class="whiteout">tials_cache&nbsp;credentials_cache</font>
       <u>tials</u><b>_</b><u>cache</u> option is specified, that ticket is used to authenticate to KADM5.  Otherwise, the <b>-p</b> and
       <b>-k</b> options are used to specify the client Kerberos principal name used to authenticate.  Once  <b>kadmin</b>
       has  determined  the principal name, it requests a <u>kadmin/admin</u> Kerberos service ticket from the KDC,
       and uses that service ticket to authenticate to KADM5.

       If the database is db2, the local client <b>kadmin.local</b>, is intended to run directly on the master  KDC
       without  Kerberos  authentication.   The  local  version provides all of the functionality of the now
       obsolete <!-- a --><u>kdb5</u><b>_</b><u>edit</u>(8)<!-- /a -->, except for database dump and load, which is now provided by  the  <a href="kdb5_util.8.html#//apple_ref/doc/man/8/kdb5_util"><u>kdb5</u><b>_</b><u>util</u>(8)</a>
       utility.

       If the database is LDAP, kadmin.local need not be run on the KDC.

<b>OPTIONS</b>
       <b>-r</b> <u>realm</u>
              Use <u>realm</u> as the default database realm.

       <b>-p</b> <u>principal</u>
              Use  <u>principal</u> to authenticate.  Otherwise, kadmin will append "/admin" to the primary princi-<font color="#ffffff" class="whiteout">pal&nbsp;principal</font>
              pal name of the default ccache, the value of the USER environment variable, or the username as
              obtained with getpwuid, in order of preference.

       <b>-k</b>     Use  a  keytab to decrypt the KDC response instead of prompting for a password on the TTY.  In
              this case, the default principal will be host/<u>hostname</u>.  If there is not  a  keytab  specified
              with the <b>-t</b> option, then the default keytab will be used.

       <b>-t</b> <u>keytab</u>
              Use <u>keytab</u> to decrypt the KDC response.  This can only be used with the <b>-k</b> option.

       <b>-c</b> <u>credentials</u><b>_</b><u>cache</u>
              Use  <u>credentials</u><b>_</b><u>cache</u>  as the credentials cache.  The <u>credentials</u><b>_</b><u>cache</u> should contain a ser-<font color="#ffffff" class="whiteout">vice&nbsp;service</font>
              vice ticket for the <u>kadmin/admin</u> service; it can be acquired with the  <a href="../man1/kinit.1.html#//apple_ref/doc/man/1/kinit"><u>kinit</u>(1)</a>  program.   If
              this option is not specified, <b>kadmin</b> requests a new service ticket from the KDC, and stores it
              in its own temporary ccache.

       <b>-w</b> <u>password</u>
              Use <u>password</u> instead of prompting for one on the TTY.  Note:  placing the password for a  Ker-<font color="#ffffff" class="whiteout">beros&nbsp;Kerberos</font>
              beros  principal  with  administration access into a shell script can be dangerous if unautho-<font color="#ffffff" class="whiteout">rized&nbsp;unauthorized</font>
              rized users gain read access to the script.

       <b>-q</b> <u>query</u>
              pass <u>query</u> directly to <b>kadmin</b>, which will perform <u>query</u> and then exit.  This can be useful for
              writing scripts.

       <b>-d</b> <u>dbname</u>
              Specifies the name of the Kerberos database.  This option does not apply to the LDAP database.

       <b>-s</b> <u>admin</u><b>_</b><u>server[:port]</u>
              Specifies the admin server which kadmin should contact.

       <b>-m</b>     Do not authenticate using a keytab.  This option will cause kadmin to prompt  for  the  master
              database password.

       <b>-e</b> <u>enc:salt</u><b>_</b><u>list</u>
              Sets the list of encryption types and salt types to be used for any new keys created.

       <b>-O</b>     Force use of old AUTH_GSSAPI authentication flavor.

       <b>-N</b>     Prevent fallback to AUTH_GSSAPI authentication flavor.

       <b>-x</b> <u>db</u><b>_</b><u>args</u>
              Specifies the database specific arguments.

              Options supported for LDAP database are:

              -x host=&lt;hostname&gt;
                     specifies the LDAP server to connect to by a LDAP URI.

              -x binddn=&lt;bind_dn&gt;
                     specifies  the  DN  of the object used by the administration server to bind to the LDAP
                     server.  This object should have the read and write  rights  on  the  realm  container,
                     principal container and the subtree that is referenced by the realm.

              -x bindpwd=&lt;bind_password&gt;
                     specifies  the  password  for  the above mentioned binddn. It is recommended not to use
                     this option.  Instead, the password can be stashed  using  the  stashsrvpw  command  of
                     kdb5_ldap_util.

<b>DATE</b> <b>FORMAT</b>
       Various  commands  in  kadmin  can  take  a variety of date formats, specifying durations or absolute
       times.  Examples of valid formats are:

              1 month ago
              2 hours ago
              400000 seconds ago
              last year
              this Monday
              next Monday
              yesterday
              tomorrow
              now
              second Monday
              a fortnight ago
              3/31/92 10:00:07 PST
              January 23, 1987 10:05pm
              22:00 GMT

       Dates which do not have the "ago" specifier default to being absolute dates, unless they appear in  a
       field where a duration is expected.  In that case the time specifier will be interpreted as relative.
       Specifying "ago" in a duration may result in unexpected behavior.


<b>COMMANDS</b>
       <b>add_principal</b> [<u>options</u>] <u>newprinc</u>
              creates the principal <u>newprinc</u>, prompting twice for a password.  If  no  policy  is  specified
              with  the  -policy option, and the policy named "default" exists, then that policy is assigned
              to the principal; note that the assignment of the policy "default" only  occurs  automatically
              when  a principal is first created, so the policy "default" must already exist for the assign-<font color="#ffffff" class="whiteout">ment&nbsp;assignment</font>
              ment to occur.  This assignment of "default" can be suppressed with the  -clearpolicy  option.
              This  command requires the <u>add</u> privilege.  This command has the aliases <b>addprinc</b> and <b>ank</b>.  The
              options are:

              <b>-x</b> <u>db</u><b>_</b><u>princ</u><b>_</b><u>args</u>
                     Denotes the database specific options. The options for LDAP database are:

                     -x dn=&lt;dn&gt;
                            Specifies the LDAP object that will contain the Kerberos  principal  being  cre-<font color="#ffffff" class="whiteout">ated.&nbsp;created.</font>
                            ated.

                     -x linkdn=&lt;dn&gt;
                            Specifies  the  LDAP object to which the newly created Kerberos principal object
                            will point to.

                     -x containerdn=&lt;container_dn&gt;
                            Specifies the container object under which the Kerberos principal is to be  cre-<font color="#ffffff" class="whiteout">ated.&nbsp;created.</font>
                            ated.

                     -x tktpolicy=&lt;policy&gt;
                            Associates a ticket policy to the Kerberos principal.

              <b>-expire</b> <u>expdate</u>
                     expiration date of the principal

              <b>-pwexpire</b> <u>pwexpdate</u>
                     password expiration date

              <b>-maxlife</b> <u>maxlife</u>
                     maximum ticket life for the principal

              <b>-maxrenewlife</b> <u>maxrenewlife</u>
                     maximum renewable life of tickets for the principal

              <b>-kvno</b> <u>kvno</u>
                     explicity set the key version number.

              <b>-policy</b> <u>policy</u>
                     policy  used by this principal.  If no policy is supplied, then if the policy "default"
                     exists and the -clearpolicy is not also specified, then the policy "default"  is  used;
                     otherwise, the principal will have no policy, and a warning message will be printed.

              <b>-clearpolicy</b>
                     <b>-clearpolicy</b>  prevents  the  policy  "default"  from being assigned when <b>-policy</b> is not
                     specified.  This option has no effect if the policy "default" does not exist.

              {<b>-</b>|<b>+</b>}<b>allow_postdated</b>
                     <b>-allow_postdated</b> prohibits this principal from obtaining postdated tickets.  (Sets  the
                     KRB5_KDB_DISALLOW_POSTDATED flag.)  <b>+allow_postdated</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>allow_forwardable</b>
                     <b>-allow_forwardable</b>  prohibits this principal from obtaining forwardable tickets.  (Sets
                     the KRB5_KDB_DISALLOW_FORWARDABLE flag.)  <b>+allow_forwardable</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>allow_renewable</b>
                     <b>-allow_renewable</b> prohibits this principal from obtaining renewable tickets.  (Sets  the
                     KRB5_KDB_DISALLOW_RENEWABLE flag.)  <b>+allow_renewable</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>allow_proxiable</b>
                     <b>-allow_proxiable</b>  prohibits this principal from obtaining proxiable tickets.  (Sets the
                     KRB5_KDB_DISALLOW_PROXIABLE flag.)  <b>+allow_proxiable</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>allow_dup_skey</b>
                     <b>-allow_dup_skey</b> Disables user-to-user authentication for this principal by  prohibiting
                     this  principal from obtaining a session key for another user.  (Sets the KRB5_KDB_DIS-<font color="#ffffff" class="whiteout">ALLOW_DUP_SKEY&nbsp;KRB5_KDB_DISALLOW_DUP_SKEY</font>
                     ALLOW_DUP_SKEY flag.)  <b>+allow_dup_skey</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>requires_preauth</b>
                     <b>+requires_preauth</b> requires this principal to preauthenticate before  being  allowed  to
                     kinit.   (Sets  the  KRB5_KDB_REQUIRES_PRE_AUTH  flag.)   <b>-requires_preauth</b> clears this
                     flag.

              {<b>-</b>|<b>+</b>}<b>requires_hwauth</b>
                     <b>+requires_hwauth</b> requires this principal to preauthenticate  using  a  hardware  device
                     before   being   allowed   to   kinit.    (Sets  the  KRB5_KDB_REQUIRES_HW_AUTH  flag.)
                     <b>-requires_hwauth</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>allow_svr</b>
                     <b>-allow_svr</b> prohibits the issuance of service tickets for  this  principal.   (Sets  the
                     KRB5_KDB_DISALLOW_SVR flag.)  <b>+allow_svr</b> clears this flag.

              {<b>-</b>|<b>+</b>}<b>allow_tgs_req</b>
                     <b>-allow_tgs_req</b>  specifies  that  a  Ticket-Granting Service (TGS) request for a service
                     ticket for this principal is not permitted.  This option is useless  for  most  things.
                     <b>+allow_tgs_req</b>   clears   this  flag.   The  default  is  <b>+allow_tgs_req</b>.   In  effect,
                     <b>-allow_tgs_req</b> sets the KRB5_KDB_DISALLOW_TGT_BASED flag on the principal in the  data-<font color="#ffffff" class="whiteout">base.&nbsp;database.</font>
                     base.

              {<b>-</b>|<b>+</b>}<b>allow_tix</b>
                     <b>-allow_tix</b>  forbids  the issuance of any tickets for this principal.  <b>+allow_tix</b> clears
                     this flag.  The default is <b>+allow_tix</b>.  In effect, <b>-allow_tix</b> sets the  KRB5_KDB_DISAL-<font color="#ffffff" class="whiteout">LOW_ALL_TIX&nbsp;KRB5_KDB_DISALLOW_ALL_TIX</font>
                     LOW_ALL_TIX flag on the principal in the database.

              {<b>-</b>|<b>+</b>}<b>needchange</b>
                     <b>+needchange</b>  sets  a  flag  in attributes field to force a password change; <b>-needchange</b>
                     clears  it.   The  default  is  <b>-needchange</b>.    In   effect,   <b>+needchange</b>   sets   the
                     KRB5_KDB_REQUIRES_PWCHANGE flag on the principal in the database.

              {<b>-</b>|<b>+</b>}<b>password_changing_service</b>
                     <b>+password_changing_service</b>  sets a flag in the attributes field marking this as a pass-<font color="#ffffff" class="whiteout">word&nbsp;password</font>
                     word change service principal (useless for  most  things).   <b>-password_changing_service</b>
                     clears  the  flag.   This  flag  intentionally  has a long name.  The default is <b>-pass</b>-<font color="#ffffff" class="whiteout">word_changing_service.&nbsp;-password_changing_service.</font>
                     <b>word_changing_service</b>.     In    effect,    <b>+password_changing_service</b>     sets     the
                     KRB5_KDB_PWCHANGE_SERVICE flag on the principal in the database.

              <b>-randkey</b>
                     sets the key of the principal to a random value

              <b>-pw</b> <u>password</u>
                     sets  the  key of the principal to the specified string and does not prompt for a pass-<font color="#ffffff" class="whiteout">word.&nbsp;password.</font>
                     word.  Note:  using this option in a shell script  can  be  dangerous  if  unauthorized
                     users gain read access to the script.

              <b>-e</b> <u>"enc:salt</u> <u>..."</u>
                     uses the specified list of enctype-salttype pairs for setting the key of the principal.
                     The quotes are necessary if there are multiple enctype-salttype pairs.  This  will  not
                     function against kadmin daemons earlier than krb5-1.2.

              EXAMPLE:
                     kadmin: addprinc tlyu/admin
                     WARNING: no policy specified for "tlyu/admin@BLEEP.COM";
                     defaulting to no policy.
                     Enter password for principal tlyu/admin@BLEEP.COM:
                     Re-enter password for principal tlyu/admin@BLEEP.COM:
                     Principal "tlyu/admin@BLEEP.COM" created.
                     kadmin:

                     kadmin: addprinc -x dn=cn=mwm_user,o=org mwm_user
                     WARNING: no policy specified for "mwm_user@BLEEP.COM";
                     defaulting to no policy.
                     Enter password for principal mwm_user@BLEEP.COM:
                     Re-enter password for principal mwm_user@BLEEP.COM:
                     Principal "mwm_user@BLEEP.COM" created.
                     kadmin:


              ERRORS:
                     KADM5_AUTH_ADD (requires "add" privilege)
                     KADM5_BAD_MASK (shouldn't happen)
                     KADM5_DUP (principal exists already)
                     KADM5_UNK_POLICY (policy does not exist)
                     KADM5_PASS_Q_* (password quality violations)

       <b>delete_principal</b> [<b>-force</b>] <u>principal</u>
              deletes  the specified principal from the database.  This command prompts for deletion, unless
              the <b>-force</b> option is given. This command requires the <u>delete</u> privilege.  Aliased to  <b>delprinc.</b>


              EXAMPLE:
                     kadmin: delprinc mwm_user
                     Are you sure you want to delete the principal
                     "mwm_user@BLEEP.COM"? (yes/no): yes
                     Principal "mwm_user@BLEEP.COM" deleted.
                     Make sure that you have removed this principal from
                     all ACLs before reusing.
                     kadmin:

              ERRORS:
                     KADM5_AUTH_DELETE (reequires "delete" privilege)
                     KADM5_UNK_PRINC (principal does not exist)

       <b>modify_principal</b> [<u>options</u>] <u>principal</u>
              modifies  the specified principal, changing the fields as specified.  The options are as above
              for <b>add_principal</b>, except that password changing and flags related to  password  changing  are
              forbidden by this command.  In addition, the option <b>-clearpolicy</b> will clear the current policy
              of a principal.  This command requires the <u>modify</u> privilege.  Aliased to <b>modprinc</b>.

              <b>-x</b> <u>db</u><b>_</b><u>princ</u><b>_</b><u>args</u>
                     Denotes the database specific options. The options for LDAP database are:

                     -x tktpolicy=&lt;policy&gt;
                            Associates a ticket policy to the Kerberos principal.

                     -x linkdn=&lt;dn&gt;
                            Associates a Kerberos principal with a LDAP object. This option is honored  only
                            if the Kerberos principal is not already associated with a LDAP object.

              ERRORS:
                     KADM5_AUTH_MODIFY  (requires  "modify"  privilege)  KADM5_UNK_PRINC (principal does not
                     exist) KADM5_UNK_POLICY (policy does not exist) KADM5_BAD_MASK (shouldn't happen)

       <b>change_password</b> [<u>options</u>] <u>principal</u>
              changes the password of <u>principal</u>.  Prompts for a new password if neither <b>-randkey</b> or  <b>-pw</b>  is
              specified.  Requires the <u>changepw</u> privilege, or that the principal that is running the program
              to be the same as the one changed.  Aliased to <b>cpw</b>.  The following options are available:

              <b>-randkey</b>
                     sets the key of the principal to a random value

              <b>-pw</b> <u>password</u>
                     set the password to the specified string.  Not recommended.

              <b>-e</b> <u>"enc:salt</u> <u>..."</u>
                     uses the specified list of enctype-salttype pairs for setting the key of the principal.
                     The  quotes  are necessary if there are multiple enctype-salttype pairs.  This will not
                     function against kadmin daemons earlier than krb5-1.2.

              <b>-keepold</b>
                     Keeps the previous kvno's keys around.  There is no easy way to delete  the  old  keys,
                     and  this  flag  is  usually not necessary except perhaps for TGS keys.  Don't use this
                     flag unless you know what you're doing. This option is not supported for the LDAP data-<font color="#ffffff" class="whiteout">base.&nbsp;database.</font>
                     base.

              EXAMPLE:
                     kadmin: cpw systest
                     Enter password for principal systest@BLEEP.COM:
                     Re-enter password for principal systest@BLEEP.COM:
                     Password for systest@BLEEP.COM changed.
                     kadmin:

              ERRORS:
                     KADM5_AUTH_MODIFY (requires the modify privilege)
                     KADM5_UNK_PRINC (principal does not exist)
                     KADM5_PASS_Q_* (password policy violation errors)
                     KADM5_PADD_REUSE (password is in principal's password
                     history)
                     KADM5_PASS_TOOSOON (current password minimum life not
                     expired)

       <b>get_principal</b> [<b>-terse</b>] <u>principal</u>
              gets  the attributes of <u>principal</u>.  Requires the <u>inquire</u> privilege, or that the principal that
              is running the the program to be the same as the one being listed.  With  the  <b>-terse</b>  option,
              outputs fields as quoted tab-separated strings.  Alias <b>getprinc</b>.


              EXAMPLES:
                     kadmin: getprinc tlyu/admin
                     Principal: tlyu/admin@BLEEP.COM
                     Expiration date: [never]
                     Last password change: Mon Aug 12 14:16:47 EDT 1996
                     Password expiration date: [none]
                     Maximum ticket life: 0 days 10:00:00
                     Maximum renewable life: 7 days 00:00:00
                     Last modified: Mon Aug 12 14:16:47 EDT 1996 (bjaspan/admin@BLEEP.COM)
                     Last successful authentication: [never]
                     Last failed authentication: [never]
                     Failed password attempts: 0
                     Number of keys: 2
                     Key: vno 1, DES cbc mode with CRC-32, no salt
                     Key: vno 1, DES cbc mode with CRC-32, Version 4
                     Attributes:
                     Policy: [none]
                     kadmin: getprinc -terse systest
                     systest@BLEEP.COM   3    86400     604800    1
                     785926535 753241234 785900000
                     tlyu/admin@BLEEP.COM     786100034 0    0
                     kadmin:

              ERRORS:
                     KADM5_AUTH_GET (requires the get (inquire) privilege)
                     KADM5_UNK_PRINC (principal does not exist)

       <b>list_principals</b> [<u>expression</u>]
              Retrieves  all  or some principal names.  <u>Expression</u> is a shell-style glob expression that can
              contain the wild-card characters ?, *, and []'s.  All principal names matching the  expression
              are  printed.   If no expression is provided, all principal names are printed.  If the expres-<font color="#ffffff" class="whiteout">sion&nbsp;expression</font>
              sion does not contain an "@" character, an "@"  character  followed  by  the  local  realm  is
              appended  to the expression.  Requires the <u>list</u> priviledge.  Alias <b>listprincs</b>, <b>get_principals</b>,
              <b>get_princs</b>.

              EXAMPLES:
                     kadmin:  listprincs test*
                     test3@SECURE-TEST.OV.COM
                     test2@SECURE-TEST.OV.COM
                     test1@SECURE-TEST.OV.COM
                     testuser@SECURE-TEST.OV.COM
                     kadmin:

       <b>add_policy</b> [<u>options</u>] <u>policy</u>
              adds the named policy to the policy database.  Requires the <u>add</u> privilege.  Aliased to <b>addpol</b>.
              The following options are available:

              <b>-maxlife</b> <u>time</u>
                     sets the maximum lifetime of a password

              <b>-minlife</b> <u>time</u>
                     sets the minimum lifetime of a password

              <b>-minlength</b> <u>length</u>
                     sets the minimum length of a password

              <b>-minclasses</b> <u>number</u>
                     sets the minimum number of character classes allowed in a password

              <b>-history</b> <u>number</u>
                     sets  the  number  of  past keys kept for a principal. This option is not supported for
                     LDAP database


              EXAMPLES:
                     kadmin: add_policy -maxlife "2 days" -minlength 5 guests
                     kadmin:

              ERRORS:
                     KADM5_AUTH_ADD (requires the add privilege)
                     KADM5_DUP (policy already exists)

       <b>delete_policy</b> <b>[-force]</b> <u>policy</u>
              deletes the named policy.  Prompts for confirmation before deletion.  The command will fail if
              the policy is in use by any principals.  Requires the <u>delete</u> privilege.  Alias <b>delpol</b>.


              EXAMPLE:
                     kadmin: del_policy guests
                     Are you sure you want to delete the policy "guests"?
                     (yes/no): yes
                     kadmin:

              ERRORS:
                     KADM5_AUTH_DELETE (requires the delete privilege)
                     KADM5_UNK_POLICY (policy does not exist)
                     KADM5_POLICY_REF (reference count on policy is not zero)

       <b>modify_policy</b> [<u>options</u>] <u>policy</u>
              modifies  the  named policy.  Options are as above for <b>add_policy</b>.  Requires the <u>modify</u> privi-<font color="#ffffff" class="whiteout">lege.&nbsp;privilege.</font>
              lege.  Alias <b>modpol</b>.


              ERRORS:
                     KADM5_AUTH_MODIFY (requires the modify privilege)
                     KADM5_UNK_POLICY (policy does not exist)

       <b>get_policy</b> [<b>-terse</b>] <u>policy</u>
              displays the values of the named policy.  Requires the <u>inquire</u>  privilege.   With  the  <b>-terse</b>
              flag, outputs the fields as quoted strings separated by tabs.  Alias <b>getpol</b>.

              EXAMPLES:
                     kadmin: get_policy admin
                     Policy: admin
                     Maximum password life: 180 days 00:00:00
                     Minimum password life: 00:00:00
                     Minimum password length: 6
                     Minimum number of password character classes: 2
                     Number of old keys kept: 5
                     Reference count: 17
                     kadmin: get_policy -terse admin
                     admin     15552000  0    6    2    5    17
                     kadmin:

              ERRORS:
                     KADM5_AUTH_GET (requires the get privilege)
                     KADM5_UNK_POLICY (policy does not exist)

       <b>list_policies</b> [<u>expression</u>]
              Retrieves all or some policy names.  <u>Expression</u> is a shell-style glob expression that can con-<font color="#ffffff" class="whiteout">tain&nbsp;contain</font>
              tain the wild-card characters ?, *, and []'s.  All policy names matching  the  expression  are
              printed.   If  no expression is provided, all existing policy names are printed.  Requires the
              <u>list</u> priviledge.  Alias <b>listpols</b>, <b>get_policies</b>, <b>getpols</b>.


              EXAMPLES:
                     kadmin:  listpols
                     test-pol
                     dict-only
                     once-a-min
                     test-pol-nopw
                     kadmin:  listpols t*
                     test-pol
                     test-pol-nopw
                     kadmin:

       <b>ktadd</b> [<b>-k</b> <u>keytab</u>] [<b>-q</b>] [<b>-e</b> <u>keysaltlist</u>]
              [<u>principal</u> | <b>-glob</b> <u>princ-exp</u>] [<u>...</u>]
              Adds a principal or all principals matching <u>princ-exp</u> to a keytab,  randomizing  each  princi-<font color="#ffffff" class="whiteout">pal's&nbsp;principal's</font>
              pal's key in the process.  Requires the <u>inquire</u> and <u>changepw</u> privileges.  An entry for each of
              the principal's unique encryption types is added, ignoring multiple keys with the same encryp-<font color="#ffffff" class="whiteout">tion&nbsp;encryption</font>
              tion  type  but different salt types.  If the <b>-k</b> argument is not specified, the default keytab
              <u>/etc/krb5.keytab</u> is used.  If the <b>-q</b> option is specified, less verbose status  information  is
              displayed.

              The  <b>-glob</b> option requires the <u>list</u> privilege.  <u>princ-exp</u> follows the same rules described for
              the <b>list_principals</b> command.


              EXAMPLE:
                     kadmin: ktadd -k /tmp/foo-new-keytab host/foo.mit.edu
                     Entry for principal host/foo.mit.edu@ATHENA.MIT.EDU with
                          kvno 3, encryption type DES-CBC-CRC added to keytab
                          WRFILE:/tmp/foo-new-keytab
                     kadmin:

       <b>ktremove</b> [<b>-k</b> <u>keytab</u>] [<b>-q</b>] <u>principal</u> [<u>kvno</u> | <b>all</b> | <b>old</b>]
              Removes entries for the specified principal from a keytab.   Requires  no  permissions,  since
              this does not require database access.  If the string "all" is specified, all entries for that
              principal are removed; if the string "old" is specified, all entries for that principal except
              those with the highest kvno are removed.  Otherwise, the value specified is parsed as an inte-<font color="#ffffff" class="whiteout">ger,&nbsp;integer,</font>
              ger, and all entries whose kvno match that integer are removed.  If the  <b>-k</b>  argument  is  not
              specifeid,  the  default keytab <u>/etc/krb5.keytab</u> is used.  If the <b>-q</b> option is specified, less
              verbose status information is displayed.


              EXAMPLE:
                     kadmin: ktremove -k /var/db/krb5kdc/kadmind.keytab kadmin/admin
                     Entry for principal kadmin/admin with kvno 3 removed
                          from keytab WRFILE:/db/var/krb5kdc/kadmind.keytab.
                     kadmin:

<b>FILES</b>
       principal.db         default name for Kerberos principal database

       &lt;dbname&gt;.kadm5       KADM5 administrative database.  (This would be "principal.kadm5", if you use the
                            default database name.)  Contains policy information.

       &lt;dbname&gt;.kadm5.lock  lock file for the KADM5 administrative database.  This file works backwards from
                            most other lock files.  I.e., <b>kadmin</b> will exit with an error if this  file  does
                            <u>not</u> exist.

       <b>Note:</b>                The above three files are specific to db2 database.

       kadm5.acl            file  containing  list of principals and their <b>kadmin</b> administrative privileges.
                            See <a href="kadmind.8.html#//apple_ref/doc/man/8/kadmind"><u>kadmind</u>(8)</a> for a description.

       kadm5.keytab         keytab file for <u>kadmin/admin</u> principal.

       kadm5.dict           file containing dictionary of strings explicitly disallowed as passwords.

<b>HISTORY</b>
       The <b>kadmin</b> prorgam was originally written by Tom Yu at MIT, as an interface to  the  OpenVision  Ker-<font color="#ffffff" class="whiteout">beros&nbsp;Kerberos</font>
       beros administration program.

<b>SEE</b> <b>ALSO</b>
       <a href="../man1/kerberos.1.html#//apple_ref/doc/man/1/kerberos"><u>kerberos</u>(1)</a>, <a href="../man1/kpasswd.1.html#//apple_ref/doc/man/1/kpasswd"><u>kpasswd</u>(1)</a>, <a href="kadmind.8.html#//apple_ref/doc/man/8/kadmind"><u>kadmind</u>(8)</a>

<b>BUGS</b>
       Command output needs to be cleaned up.

       There  is no way to delete a key kept around from a "-keepold" option to a password-changing command,
       other than to do a password change without the "-keepold" option, which will of course cause problems
       if the key is a TGS key.  There will be more powerful key-manipulation commands in the future.



                                                                                                   <!-- a -->KADMIN(8)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/kadmin.local.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/kadmin.local.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/kadmin.local.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<HTML>
	<HEAD>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="XML_Publisher">
		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">
        <title>Prepare
Application for Business Logic</title>
		</HEAD>
	<BODY bgcolor="#ffffff">
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --> <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Generate_Source_Files.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="Add_Custom_Code.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerTop -->  
<!-- apple_doc: pageHeadingStart --><a name = "TPXREF118"></a><a name="-644379"></a><h3><font face="Lucida Grande,Helvetica,Arial">Prepare
Application for Business Logic</font></h3><!-- apple_doc: pageHeadingEnd -->

<p>The business logic you'll add is quite simple: It calculates
a rating for a student by aggregating the three scores in the database:
ACT, SAT, and GPA. You can use Assistant to prepare the application
for this new business logic.</p>
<p>Here's how:</p>
<ol><li>Build and
run the application and open Assistant. You have to build the application again
since you changed the model.</font></li>
<li>In the Properties pane, add a new property key path called
"rating" for Task=form, Entity=Student using the Additional
Property Key Path text field and the Add button as shown in  <a href="#BCIJACJC">Figure 5-12</a>.<br>
<a name = "BCIJACJC"></a><a name="-644426"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
5-12 Add a property key for the form task</font></b></p>
 <img src = "../Art/addkeytoformtask.gif" alt = "[image: ../Art/addkeytoformtask.gif]">
</font></li>
<li>Since you'd like to see the rating displayed in the list
view of a query window, you also need to add the additional property
for the list task. Switch Task to list and click Add, as shown in  <a href="#BCIHCGIH">Figure 5-13</a>.<br>
<a name = "BCIHCGIH"></a><a name="-644456"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
5-13 Additional property key for list
task</font></b></p> <img src = "../Art/addkeytolisttask.gif" alt = "[image: ../Art/addkeytolisttask.gif]">
</font></li>
<li>The new property will be associated (via an EOAssociation,
see  <a href="../BasicConcepts/iAssociation_PXREF99.html" target="_top">"Associations"</a>) with a method
of the same name in a client-side business logic class for the entity (<code>businesslogic.client.Student</code> in
this case). To make this association, switch to the Widgets pane
and select Task=form, Entity=Student, Property Key=rating. From
the Widget Type pop-up menu, select EOTextFieldController if it
is not already selected. Doing this binds the association aspect
of the EOTextFieldController widget (rating) with the <code>rating</code> method,
which you'll define in a few steps.<br><a name = "TPXREF120"></a><a name="-644553"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
5-14 Change the widget type to make the
association.</font></b></p> <img src = "../Art/widgetforratinginform.gif" alt = "[image: ../Art/widgetforratinginform.gif]">
</font></li>
<li>Since the rating is calculated on the server side, the text
field should be marked as not editable by the user. So, while in
the Widgets pane, select Never in the Editability pop-up menu.</font></li>
<li>Finally, you should apply a number formatter to the widget
so the number displayed is more meaningful. Change the Format Class
field to read "com.webobjects.foundation.NSNumberFormatter".
Formatters need a pattern, and since the rating is a decimal number,
the Format Pattern field should be "#,##0.00" as shown in  <a href="#TPXREF120">Figure 5-14</a>. See
the class reference documentation for NSNumberFormatter for more
information on format patterns.</font></li>
<li>Since the rating also appears as a column in list views, switch
the task to list and set the format options for the EOTableColumnController
as shown in  <a href="#BCIGGGFF">Figure 5-15</a>.<br><a name = "BCIGGGFF"></a><a name="-644625"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure 5-15 Change
formatter for property in list view</font></b></p> <img src = "../Art/widgetforratinginlist.gif" alt = "[image: ../Art/widgetforratinginlist.gif]">
</font></li>
<li>Save changes and quit the client and server applications.</font></li></ol>

<br>
    <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Generate_Source_Files.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="Add_Custom_Code.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerBottom --> <br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated May 1, 2002)</font></p><!-- start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->
</body>
</html>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NSpInitialize (GameSprockets)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" ="A" NAME="HEADING261"></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GameSprockets-260.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-262.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GameSprockets-2.html"><B>Apple Game Sprockets Guide</B></A> / <BR><DD><A HREF="GameSprockets-229.html"><B>Chapter 4 - NetSprocket</B></A> / <A HREF="GameSprockets-232.html"><B>NetSprocket Reference</B></A><BR><DL><DD><A HREF="GameSprockets-259.html"><B>NetSprocket Functions</B></A> / <A HREF="GameSprockets-260.html"><B>Initializing NetSprocket</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING261-0"></A>
<H3>NSpInitialize<A NAME="MARKER-11-98"></A></H3>
 You can use the <CODE>NSpInitialize</CODE> function to initialize the NetSprocket library. <P>
<PRE>
OSStatus NSpInitialize (
	UInt32 inStandardMessageSize,
	UInt32 inBufferSize,
	UInt32 inQElements,
	NSpGameID inGameID,
	UInt32 inTimeout);
</PRE>
<DL>
<DT><CODE>inStandardMessageSize</CODE>
<DD> This value is the maximum size (in bytes) of each message you expect to send regularly. For example, if your game is sending keyboard state most of the time and the keyboard state message is 40 bytes long (including the <CODE>NSpMessageHeader</CODE>) then you should set this value to 40. NetSprocket uses this value to optimize the message receipt buffers. Typically, games send messages that are either relatively constant in size, or the size of the message is proportional to the number of players. If your game doesn't have a typical message size, or if you want NetSprocket to choose a size for you, set this parameter to 0. Setting this value greater than 586 bytes while using AppleTalk may force NetSprocket to use multiple packets for sending the message and potentially decrease game performance.
<DT><CODE>inBufferSize</CODE>
<DD> The number of bytes that NetSprocket will allocate in its interrupt-safe memory pool for networking during initialization. Usually, 200 KB or more is recommended for most games. You can approximate the networking pool with this formula: ((size of standard message * (send frequency or get frequency)) * max players) + fudge factor of 50 KB). NetSprocket cannot allocate memory at interrupt time. If you do not plan to call NetSprocket functions at interrupt time or use the asynchronous functions, or if you want NetSprocket to allocate the default amount (currently 400 KB), set this value to 0. Because NetSprocket is unable to grow its buffer after initialization, it is important to allocate enough memory in NetSprocket to send, receive, and queue the messages your game will be using.
<DT><CODE>inQElements</CODE>
<DD> The maximum number of queue elements that NetSprocket will allocate. The queue elements are used to store messages until you receive them from NetSprocket. If you get messages frequently from NetSprocket, you can allocate fewer queue elements than if you do not get them frequently. NetSprocket can automatically expand its message queue, if necessary, but this will degrade performance. Specifying a small number (&lt; 10) will use less memory, but may cause messages to be discarded due to lack of buffer space. Specifying a larger number (&gt; 20) will allow you to call <CODE>NSpMessage_Get</CODE> less often and more efficiently. If you do not specify the size of a standard message, you should use the equation described for the <CODE>inBufferSize</CODE> parameter.
<DT>inGameID
<DD> A unique identifier for your game. For instance, if you choose not to specify an NBP type to NetSprocket when registering a game on an AppleTalk network, it will use this ID. You should use your application's creator ID.
<DT>inTimeout
<DD> The default time-out value you want NetSprocket to use when sending guaranteed messages and performing other network tasks that may require a time-out. Some NetSprocket functions require NetSprocket to keep attempting some action until a response is received. In order to prevent NetSprocket from waiting forever, it uses this value to determine when it should stop trying. If you pass 0 here, NetSprocket will use default timeouts, which vary depending on the operation.
<DT><I>function result</I>
<DD> A result code of <CODE>noErr</CODE>, or a NetSprocket or Open Transport result code.
</DL>
<A NAME="HEADING261-9"></A>
<H5>DESCRIPTION</H5>
 NetSprocket must be initialized once in your application before making function calls from the NetSprocket library.<P>
 This function may fail under a variety of circumstances, including the failure to allocate enough application memory, insufficient system memory, or failure to initialize networking in the Mac OS.<P>
</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="GameSprockets-260.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-262.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="GameSprockets-3.html">&copy; Apple Computer, Inc.</A><BR>2 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

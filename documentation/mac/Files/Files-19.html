<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Using Files (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING19></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-18.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-20.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-12.html"><B>Chapter 1 - Introduction to File Management</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING19-0></A>
<H1><A NAME=MARKER-9-90></A>Using Files</H1>
 This section describes how to perform typical file operations using some of the services provided by the Standard File Package, the File Manager, the Finder, and other system software components. <A HREF=#MARKER-9-104>Figure 1-6</A> shows the typical appearance of an application's <BR>File menu.<A NAME=MARKER-2-91></A><A NAME=MARKER-2-369></A><A NAME=MARKER-8-115></A><A NAME=MARKER-2-162></A><A NAME=MARKER-2-161></A><A NAME=MARKER-2-160></A><A NAME=MARKER-2-159></A><P>
<B>Figure 1-6  <A NAME=MARKER-9-104></A>A typical File menu</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/File_menu.jpg"> <p>
 Note that all the commands in this menu, except for the Quit and Page Setup commands, manipulate files. Your application's File menu should resemble the menu shown in <A HREF=#MARKER-9-104>Figure 1-6</A> as closely as possible. In general, whenever the user creates or manipulates information that is stored in a document, you need to implement all the commands shown in <A HREF=#MARKER-9-104>Figure 1-6</A>.<P>
<DL>
<DT><B>Note</B>
<DD>Some applications allow the user to create or edit information that is not stored in a document. In those cases, it is inappropriate to put the commands that create or manipulate that information in the File menu. Instead, group those commands together in a separate menu.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 <A HREF=#MARKER-9-106>Listing 1-1</A> shows one way to handle some of the typical commands in a File menu. Most of the techniques described in this section are illustrated by means of definitions of the functions called in <A HREF=#MARKER-9-106>Listing 1-1</A>.<A NAME=MARKER-9-193></A><P>
<B>Listing 1-1  <A NAME=MARKER-9-106></A>Handling the File menu commands<A NAME=MARKER-2-107></A></B><P>
<PRE>
PROCEDURE DoHandleFileCommand (menuItem: Integer);
VAR
   myErr: OSErr;
BEGIN
   CASE menuItem OF
      iNew:
         myErr := DoNewCmd;      {create a new document}
      iOpen:
         myErr := DoOpenCmd;     {open an existing document}
      iClose:
         myErr := DoCloseCmd;    {close the current document}
      iSave:
         myErr := DoSaveCmd;     {save the current document}
      iSaveAs:
         myErr := DoSaveAsCmd;   {save document under new name}
      iRevert:
         myErr := DoRevertCmd;   {revert to last saved version}
      OTHERWISE
         ;
   END;
END;
</PRE>
 Your application should deactivate any menu commands that do not apply to the frontmost window. For example, if the frontmost window is not a document window belonging to your application, then the Close, Save, Save As, and Revert commands should be dimmed when the menu appears. Similarly, if the document in the frontmost window does belong to your application but contains data that has not changed since it was last saved, then the Save menu command should be dimmed. See <A HREF=Files-31.html#MARKER-9-231>"Adjusting the File Menu" on page 1-37</A> for details on implementing this feature. The definitions of the application-defined functions used in <A HREF=#MARKER-9-106>Listing 1-1</A> assume that this feature has been implemented.<A NAME=MARKER-2-436></A><A NAME=MARKER-2-458></A><A NAME=MARKER-2-164></A><A NAME=MARKER-2-163></A><P>
 The techniques described in this chapter for manipulating files assume that you identify files and directories by using file system specification records. Because the routines that accept <CODE>FSSpec</CODE> records are not available on all versions of system software, you may need to test for the availability of those routines before actually calling any of them. See the next section, <A HREF=Files-20.html#MARKER-9-120>"Testing for File Management Routines,"</A> for details.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Files-20.html#HEADING20-0">Testing for File Management Routines</A>
<DD>
<DT><A HREF="Files-21.html#HEADING21-0">Defining a Document Record</A>
<DD>
<DT><A HREF="Files-22.html#HEADING22-0">Creating a New File</A>
<DD>
<DT><A HREF="Files-23.html#HEADING23-0">Opening a File</A>
<DD>
<DT><A HREF="Files-24.html#HEADING24-0">Reading File Data</A>
<DD>
<DT><A HREF="Files-25.html#HEADING25-0">Writing File Data</A>
<DD>
<DT><A HREF="Files-26.html#HEADING26-0">Saving a File</A>
<DD>
<DT><A HREF="Files-27.html#HEADING27-0">Reverting to a Saved File</A>
<DD>
<DT><A HREF="Files-28.html#HEADING28-0">Closing a File</A>
<DD>
<DT><A HREF="Files-29.html#HEADING29-0">Opening Files at Application Startup Time</A>
<DD>
<DT><A HREF="Files-30.html#HEADING30-0">Using a Preferences File</A>
<DD>
<DT><A HREF="Files-31.html#HEADING31-0">Adjusting the File Menu</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Files-18.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-20.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

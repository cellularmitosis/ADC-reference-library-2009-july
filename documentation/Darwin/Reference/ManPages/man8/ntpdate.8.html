<html><head><title>Mac OS X
 Manual Page For ntpdate(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/ntpdate" title="Mac OS X
 Manual Page for ntpdate(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/ntpdate"; name=ntpdate(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
NTPDATE(8)                BSD System Manager's Manual               NTPDATE(8)

<b>NAME</b>
     <b>ntpdate</b> -- set the date and time via NTP

<b>SYNOPSIS</b>
     <b>ntpdate</b> [<b>-bBdoqsuv</b>] [<b>-a</b> <u>key</u>] [<b>-e</b> <u>authdelay</u>] [<b>-k</b> <u>keyfile</u>] [<b>-o</b> <u>version</u>] [<b>-p</b> <u>samples</u>] [<b>-t</b> <u>timeout</u>] <u>server</u>
             <u>...</u>

<b>DESCRIPTION</b>
     <u>Note</u>: The functionality of this program is now available in the <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> program.  See the <b>-q</b> command
     line option in the <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> page.  After a suitable period of mourning, the <b>ntpdate</b> utility is to be
     retired from this distribution.

     The <b>ntpdate</b> utility sets the local date and time by polling the Network Time Protocol (NTP) <!-- a -->server(s)<!-- /a -->
     given as the <u>server</u> arguments to determine the correct time.  It must be run as root on the local host.
     A number of samples are obtained from each of the servers specified and a subset of the NTP clock fil-<font color="#ffffff" class="whiteout">ter&nbsp;filter</font>
     ter and selection algorithms are applied to select the best of these.  Note that the accuracy and reli-<font color="#ffffff" class="whiteout">ability&nbsp;reliability</font>
     ability of <b>ntpdate</b> depends on the number of servers, the number of polls each time it is run and the
     interval between runs.

     The following options are available:

     <b>-a</b> <u>key</u>  Enable the authentication function and specify the key identifier to be used for authentication
             as the argument <u>key</u>.  The keys and key identifiers must match in both the client and server key
             files.  The default is to disable the authentication function.

     <b>-B</b>      Force the time to always be slewed using the <a href="../man2/adjtime.2.html#//apple_ref/doc/man/2/adjtime">adjtime(2)</a> system call, even if the measured off-<font color="#ffffff" class="whiteout">set&nbsp;offset</font>
             set is greater than +-128 ms.  The default is to step the time using <a href="../man2/settimeofday.2.html#//apple_ref/doc/man/2/settimeofday">settimeofday(2)</a> if the
             offset is greater than +-128 ms.  Note that, if the offset is much greater than +-128 ms in
             this case, it can take a long time (hours) to slew the clock to the correct value.  During this
             time, the host should not be used to synchronize clients.

     <b>-b</b>      Force the time to be stepped using the <a href="../man2/settimeofday.2.html#//apple_ref/doc/man/2/settimeofday">settimeofday(2)</a> system call, rather than slewed
             (default) using the <a href="../man2/adjtime.2.html#//apple_ref/doc/man/2/adjtime">adjtime(2)</a> system call.  This option should be used when called from a
             startup file at boot time.

     <b>-d</b>      Enable the debugging mode, in which <b>ntpdate</b> will go through all the steps, but not adjust the
             local clock.  Information useful for general debugging will also be printed.

     <b>-e</b> <u>authdelay</u>
             Specify the processing delay to perform an authentication function as the value <u>authdelay</u>, in
             seconds and fraction (see <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a> for details).  This number is usually small enough to be neg-<font color="#ffffff" class="whiteout">ligible&nbsp;negligible</font>
             ligible for most purposes, though specifying a value may improve timekeeping on very slow
             CPU's.

     <b>-k</b> <u>keyfile</u>
             Specify the path for the authentication key file as the string <u>keyfile</u>.  The default is
             <u>/etc/ntp.keys</u>.  This file should be in the format described in <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>.

     <b>-o</b> <u>version</u>
             Specify the NTP version for outgoint packets as the integer <u>version</u>, which can be 1 or 2.  The
             default is 3.  This allows <b>ntpdate</b> to be used with older NTP versions.

     <b>-p</b> <u>samples</u>
             Specify the number of samples to be acquired from each server as the integer <u>samples</u>, with val-<font color="#ffffff" class="whiteout">ues&nbsp;values</font>
             ues from 1 to 8 inclusive.  The default is 4.

     <b>-q</b>      Query only - don't set the clock.

     <b>-s</b>      Divert logging output from the standard output (default) to the system <a href="../man3/syslog.3.html#//apple_ref/doc/man/3/syslog">syslog(3)</a> facility.
             This is designed primarily for convenience of <a href="cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a> scripts.

     <b>-t</b> <u>timeout</u>
             Specify the maximum time waiting for a server response as the value <u>timeout</u>, in seconds and
             fraction.  The value is rounded to a multiple of 0.2 seconds.  The default is 1 second, a value
             suitable for polling across a LAN.

     <b>-u</b>      Direct <b>ntpdate</b> to use an unprivileged port for outgoing packets.  This is most useful when
             behind a firewall that blocks incoming traffic to privileged ports, and you want to synchronise
             with hosts beyond the firewall.  Note that the <b>-d</b> option always uses unprivileged ports.

     <b>-v</b>      Be verbose.  This option will cause <b>ntpdate</b>'s version identification string to be logged.

     The <b>ntpdate</b> utility can be run manually as necessary to set the host clock, or it can be run from the
     host startup script to set the clock at boot time.  This is useful in some cases to set the clock ini-<font color="#ffffff" class="whiteout">tially&nbsp;initially</font>
     tially before starting the NTP daemon <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>.  It is also possible to run <b>ntpdate</b> from a <a href="cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a>
     script.  However, it is important to note that <b>ntpdate</b> with contrived <a href="cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a> scripts is no substitute
     for the NTP daemon, which uses sophisticated algorithms to maximize accuracy and reliability while min-<font color="#ffffff" class="whiteout">imizing&nbsp;minimizing</font>
     imizing resource use.  Finally, since <b>ntpdate</b> does not discipline the host clock frequency as does
     <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>, the accuracy using <b>ntpdate</b> is limited.

     Time adjustments are made by <b>ntpdate</b> in one of two ways.  If <b>ntpdate</b> determines the clock is in error
     more than 0.5 second it will simply step the time by calling the system <a href="../man2/settimeofday.2.html#//apple_ref/doc/man/2/settimeofday">settimeofday(2)</a> routine.  If
     the error is less than 0.5 seconds, it will slew the time by calling the system <a href="../man2/adjtime.2.html#//apple_ref/doc/man/2/adjtime">adjtime(2)</a> routine.
     The latter technique is less disruptive and more accurate when the error is small, and works quite well
     when <b>ntpdate</b> is run by <a href="cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a> every hour or two.

     The <b>ntpdate</b> utility will decline to set the date if an NTP server daemon (e.g., <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>) is running on
     the same host.  When running <b>ntpdate</b> on a regular basis from <a href="cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a> as an alternative to running a
     daemon, doing so once every hour or two will result in precise enough timekeeping to avoid stepping the
     clock.

     If NetInfo support is compiled into <b>ntpdate</b>, then the <b>server</b> argument is optional if <b>ntpdate</b> can find a
     time server in the NetInfo configuration for <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>.

<b>FILES</b>
     /etc/ntp.keys  contains the encryption keys used by <b>ntpdate</b>.

<b>SEE</b> <b>ALSO</b>
     <a href="ntpd.8.html#//apple_ref/doc/man/8/ntpd">ntpd(8)</a>

<b>BUGS</b>
     The slew adjustment is actually 50% larger than the measured offset, since this (it is argued) will
     tend to keep a badly drifting clock more accurate.  This is probably not a good idea and may cause a
     troubling hunt for some values of the kernel variables <u>kern.clockrate.tick</u> and <u>kern.clockrate.tickadj</u>.

BSD                             January 6, 2000                            BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/ntpdate.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/ntpdate.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/ntpdate.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

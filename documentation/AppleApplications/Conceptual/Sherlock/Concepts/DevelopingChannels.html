<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Sherlock Channels (Legacy): Developing Channels</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Developing Channels"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001083" title="Developing Channels"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/InternetWeb-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000526" target="_top">Internet &amp; Web</a> &gt; <a href="../index.html" target="_top">Sherlock Channels (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ChannelArchitecture.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="Languages.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
Sherlock is unsupported in Mac OS X v10.5 and later.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001083-SW1" title="Developing Channels"></a><hr /><H1><a name="//apple_ref/doc/uid/20001083-CJBGADFF" title="Developing Channels"></a>Developing Channels</H1><p>This article describes the contents of a Sherlock channel. Channels are implemented using a combination of XML code, script code, and various resources. A standard Sherlock channel consists of the following files:</p><ul class="ul"><li class="li"><p>A nib file containing the channel user interface. </p></li><li class="li"><p>A TIFF or icon file containing an image to display in the Sherlock toolbar. </p></li><li class="li"><p>One or more XML files containing the script code for the channel’s triggers</p></li><li class="li"><p>An XML configuration file to tell Sherlock how to use the channel</p></li><li class="li"><p>Localized versions of resources (including the Nib file, icons, and strings)</p></li></ul><p>When you deploy your channel on a web server, you can organize these files in virtually any way you want. Your XML configuration file acts as a pointer to individual files, telling Sherlock where to find them. However, the section <span class="content_text"><a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-117109">“Configuring Your Channel For Use”</a></span> provides some general guidelines on how to organize your files in an efficient way. </p><p>The sections that follow describe the contents of these files and how you use them to define your channel.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-113606-CJBCEICH">The Channel’s Interface</a>
				
			<br/>
			
        
			
			
				<a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-116390-CJBJBHGF">Writing Your Channel Code</a>
				
			<br/>
			
        
			
			
				<a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-121606-CJBEJECI">Localizing Resources</a>
				
			<br/>
			
        
			
			
				<a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-117109-CJBHDDAA">Configuring Your Channel For Use</a>
				
			<br/>
			
        
			
			
				<a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-120201">Deploying Your Channel</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001083-113606" title="The Channel&acirc;&#128;&#153;s Interface"></a><a name="//apple_ref/doc/uid/20001083-113606-CJBCEICH" title="The Channel&acirc;&#128;&#153;s Interface"></a><h2>The Channel’s Interface</h2><p>The first step in creating a Sherlock channel is deciding the layout of your channel’s interface. Unlike previous versions of Sherlock, you can now define a custom interface for your channel using the Interface Builder application and Aqua-style controls. With these tools, you can display search results in a more intuitive and user-friendly way. And because it is implemented using Cocoa, your channel’s interface is much more responsive and flexible than before. </p><p>The main purpose of your channel’s nib file is to provide the layout and path information for your interface. Unlike traditional Cocoa applications, Sherlock channels do not use much of the resource information provided by Interface Builder. For example, channels do not rely on outlets or actions. Instead, Sherlock identifies your views and controls using path names, which you assign in Interface Builder. As a result, you can use an empty project file for any new channels you create in Interface Builder.</p><p>The main interface for a channel is always a custom view you create in Interface Builder. Because it hosts several channels, the Sherlock application provides the main window for the channel content. This window displays the Sherlock toolbar and contains an area in which to display the currently selected channel. When a new channel is selected, Sherlock looks for a custom view in the channel’s nib file, and when it finds it, loads that view into the main window. </p><p>Your channel interface is not limited to a single view. You can define additional views for printing or for other versions of your channel. You can also define windows to implement sheets. However, if your channel’s nib file contains multiple views, Sherlock needs to know which one to use in the main window. You tell Sherlock which channel you want to use by assigning the name of the main view to the path <code>mainViewIdentifier</code> in your channel’s initialization code. Sherlock checks this path and uses the value to load the view with the matching name. See <span class="content_text"><a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-116838">“Initializing Your Channel”</a></span> for more information on channel initialization. </p><p>It is important to provide path names for each of the relevant views and controls in your channel interface. You assign path names to controls using the Sherlock tab of the Info Window in Interface Builder. You must provide path names for each top-level view and for any controls or subviews that you plan to use. The path of each top-level view defines the context for identifying the view and its contained controls in the data store. When referring to a control, the path name of the control always includes the name of the top-level view. </p><p><span class="content_text">Figure 1</span> shows a sample Interface Builder project file with a custom channel view. The channel view contains a text field, button, and table used to gather search criteria and display the results. The Info Window on the right shows the path name information for the currently selected control. You need only enter the name of the individual control. Interface Builder constructs the full path name for you and displays it below the control name.</p><br/><div><a name="//apple_ref/doc/uid/20001083-114018-CJBGAJFC" title="Figure 1Creating your channel interface in Interface Builder"></a><p><a name="//apple_ref/doc/uid/20001083-114018" title="Figure 1Creating your channel interface in Interface Builder"></a><strong>Figure 1&nbsp;&nbsp;</strong>Creating your channel interface in Interface Builder</p><img src = "art/ib_screen.gif" alt = "Creating your channel interface in Interface Builder" width="410" height="308"></div><br/><p>You do not need to add a path name for static text or image controls unless you plan to change the information displayed by that control from within your channel. Similarly, you do not need to assign path names to any views that do not contain additional controls. However, you should always remember to assign a name to the top-level view containing your channel interface. </p><div class="notebox"><a name="//apple_ref/doc/uid/20001083-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;When assigning path names to controls, make sure you assign the name to the actual control and not to any parent view in which it’s nested. For example, when naming an NSTableView, you must apply the path name to the NSTableView object, not its enclosing NSScrollView.</p></div><p>As you implement your channel interface, keep in mind how information flows in the interface. Channel script code reacts to changes in a control’s data, so it is a good idea to spend time laying out the flow of information from one control to the next. Knowing this flow ahead of time makes it easier to implement your script code. </p><p>Once you are satisfied with your user interface, you can save your nib file and exit Interface Builder. The next stage in channel development is writing the XML and script code that defines the runtime behavior of your channel interface. This process is described in the section <span class="content_text"><a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-116390">“Writing Your Channel Code.”</a></span> </p><p>For an example of how to build a simple channel interface, see the article <span class="content_text"><a href="../Tasks/CreatingChannels.html#//apple_ref/doc/uid/20001086-BCIIDJDC">“Creating a New Channel.”</a></span> </p><a name="//apple_ref/doc/uid/20001083-116390" title="Writing Your Channel Code"></a><a name="//apple_ref/doc/uid/20001083-116390-CJBJBHGF" title="Writing Your Channel Code"></a><h2>Writing Your Channel Code</h2><p>Once you have defined the interface for your channel, you need to write the code to respond to events in that interface. Sherlock provides most of the infrastructure for managing your interface and informing your channel of changes. However, you are still responsible for implementing the specific behavior of your channel such as performing queries, organizing the resulting data, and updating the data store. You do this using triggers, which are described in the following sections. </p><a name="//apple_ref/doc/uid/20001083-116403" title="About Triggers"></a><h3>About Triggers</h3><p>Triggers make up the bulk of your channel’s code. While you can use web services to perform specific tasks, triggers are how you receive notifications from Sherlock that something has happened. It is up to you to decide how you want to respond to each notification you receive.</p><p>The controls of your channel interface have properties that you can access from your triggers to get information about the control. You can gather information from these properties and use it to determine what actions to perform. You can write data to these properties to update your channel’s interface. You can use these properties as targets for notifications and use them to execute other triggers.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001083-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;It is possible to supress the execution of triggers when you modify the data at a path. In JavaScript, you can call the <code>SetNoNotify</code> method of the <code>DataStore</code> object. In XQuery, you can add the <code>noNotify</code> attribute to your trigger tag. For information on the <code>DataStore</code> object, see <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-BAJBFIAE">“Sherlock Reference.”</a></span> . </p></div><p>Sherlock supports trigger scripts written using either JavaScript or XQuery. You can use one language or the other or you can mix calls between the languages using the objects and functions provided by Apple. For information on these languages, see <span class="content_text"><a href="Languages.html#//apple_ref/doc/uid/20001084-BBCCGFCG">“Sherlock Scripting Language Support.”</a></span> For information on the JavaScript and XQuery language extensions, see <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-BAJBFIAE">“Sherlock Reference.”</a></span></p><p>For more information about triggers, see <span class="content_text"><a href="ChannelArchitecture.html#//apple_ref/doc/uid/20001082-116469">“Understanding Triggers”</a></span></p><a name="//apple_ref/doc/uid/20001083-120974" title="The XML Trigger File"></a><a name="//apple_ref/doc/uid/20001083-120974-CJBFACBB" title="The XML Trigger File"></a><h3>The XML Trigger File</h3><p>Each channel has one main code file that contains the triggers for the channel. The content of this file is a set of structured XML tags organizing the triggers and initialization code. A basic channel definition file has the following structure:</p><a name="//apple_ref/doc/uid/20001083-134633" title="Listing 1Contents of a channel definition file"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>Contents of a channel definition file</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;channel><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;initialize language="JavaScript"><span></span></pre></td></tr><tr><td scope="row"><pre>        // Initialize any data store variables here.<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/initialize><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;triggers><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;trigger language="JavaScript" path="URL.search"><span></span></pre></td></tr><tr><td scope="row"><pre>            // Trigger script code<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/trigger><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;trigger language="XQuery" path="Control.action"><span></span></pre></td></tr><tr><td scope="row"><pre>            {-- Trigger script code --}<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/trigger><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;!-- Additional trigger definitions --><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/triggers><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/channel><span></span></pre></td></tr></table></div><p>The <code>&lt;channel></code> tag is the top-level tag for your code file. All of your code must be nested inside this tag. The channel tag can contain an <code>&lt;initialize></code> tag with the channel’s initialization code and a <code>&lt;triggers</code>> tag with the channel’s triggers. </p><p>The <code>&lt;initialize></code> tag provides a convenient way to initialize data store paths and configure your channel for first use. Sherlock executes the code in your initialization block the first time your channel is loaded in a new window. You can initialize data values, send notifications, read in values from persistent storage, or perform any other actions you need to prepare the channel for use. See <span class="content_text"><a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-116838">“Initializing Your Channel”</a></span> for more information.</p><p>The <code>&lt;triggers</code>> tag marks the beginning of the channel’s trigger definitions. Nested inside this tag are one or more <code>&lt;trigger></code> tags defining the triggers for your channel. Each trigger has a path attribute specifying the data store path monitored by the trigger. Changes to the data at a path cause Sherlock to execute the trigger with the matching path attribute. Similarly, notifications sent by your script code to that path result in the execution of any matching triggers. See <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-134716">“Trigger Tag Syntax”</a></span> for more information. </p><a name="//apple_ref/doc/uid/20001083-116838" title="Initializing Your Channel"></a><a name="//apple_ref/doc/uid/20001083-116838-CJBBICCC" title="Initializing Your Channel"></a><h3>Initializing Your Channel</h3><p>When Sherlock first loads your channel, it executes a special block of code in your XML Trigger file. This block is identified by the <code>&lt;initialize></code> XML tag and contains script code to execute during the loading of your channel. You can use this initialization block to perform any initial setup required by your channel. For example, you can initialize the values of any controls or data variables. If your channel uses multiple views, you can also use this block to specify the channel’s main view. </p><p>Sherlock executes your channel’s initialization code the first time your channel is loaded into a window. Sherlock does not call your initialization code when the user toggles between channels in the same window. However, Sherlock does call your initialization code again if the user opens a new window. </p><p>The following example shows the initialization code for the Yellow Pages channel. The code enables printing for the channel and then proceeds to adjust the controls to their initial values. The code sets some display parameters, sets some button images, and tells the data store to send notifications whenever the main search attributes change. The code also sets the temporary variable <code>Defaults.cityStateZip</code> to its initial state. The value in this variable is used by the channel’s triggers when the user does not specify a zip code, city, or state information. </p><a name="//apple_ref/doc/uid/20001083-134626" title="Listing 2Initializing a channel"></a><p class="codesample"><strong>Listing 2&nbsp;&nbsp;</strong>Initializing a channel</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;initialize language="JavaScript"><span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("mainViewIdentifier", "YellowPages");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /* set up the data store to indicate that we want to handle printing */<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("customPrint", 1);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.minViewSize", "{width=780; height=490}");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("Defaults.cityStateZip", "Cupertino, CA");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.CityStateZipField.updateValueOnTextChanged",<span></span></pre></td></tr><tr><td scope="row"><pre>            true);<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.MainQueryField.updateValueOnTextChanged",<span></span></pre></td></tr><tr><td scope="row"><pre>            true);<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.SearchButton.imageURL",<span></span></pre></td></tr><tr><td scope="row"><pre>            "../shared/search.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.SearchButton.altImageURL",<span></span></pre></td></tr><tr><td scope="row"><pre>            "../shared/searchDown.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.OpenLocations", false);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanX", 0);<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanY", 0);<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.MapZoom", 3);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanUp.imageURL", "panUp.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanDown.imageURL", "panDown.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanRight.imageURL", "panRight.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanLeft.imageURL", "panLeft.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.PanCenter.imageURL", "panCenter.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /* Attribution */<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.infousaImageButton.imageURL",<span></span></pre></td></tr><tr><td scope="row"><pre>            "infousa.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>    DataStore.Set("YellowPages.SwitchboardImageButton.imageURL",<span></span></pre></td></tr><tr><td scope="row"><pre>            "Switchboard.tiff");<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/initialize><span></span></pre></td></tr></table></div><p>For more information on printing, see the article <span class="content_text"><a href="../Tasks/Printing.html#//apple_ref/doc/uid/20001088-BCIIDJDC">“Printing Your Channel’s Content.”</a></span> For information on the DataStore object, see <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-160663">“DataStore Object.”</a></span> </p><a name="//apple_ref/doc/uid/20001083-121067" title="Factoring Your Trigger Code"></a><a name="//apple_ref/doc/uid/20001083-121067-CJBEGFJJ" title="Factoring Your Trigger Code"></a><h3>Factoring Your Trigger Code</h3><p>An important consideration when writing your trigger code is reuse. If you have a complex channel, you may want to be able to initiate a particular action in several different ways. For example, a user could trigger the action using a control in your channel interface while an HTML page could trigger the action using a Sherlock URL. It is a good idea to separate out reusable pieces of code into separate functions that you can call from multiple triggers. </p><p>When you factor code, you do not have to include all of your subroutines in your channel’s main code file. Instead, you can declare your functions in a separate file and include it from your XML Trigger file. The content of an include file is usually only script code. To make it easy to include the file anywhere, you should always surround your code with a <code>&lt;script></code> tag containing a <code>language</code> attribute. The script tag ensures that the proper language is specified for your code. For example, if you create a file called <code>moreCode.xml</code> and use it to store some XQuery functions, the outline of your code file would look something like the following: </p><div class="codesample"><table><tr><td scope="row"><pre>&lt;scripts><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;script language="XQuery"><span></span></pre></td></tr><tr><td scope="row"><pre>        define function MyFunction($param1, $param2)<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            {-- Your code here. --}<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/script><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/scripts><span></span></pre></td></tr></table></div><p>To include this file in your XML Trigger file, you use the <code>&lt;scripts></code> tag in your <code>&lt;triggers></code> code block. You specify the file you want to load using the <code>src</code> attribute of the tag. The <code>src</code> attribute specifies the path to the include file, which can be a relative or fixed path. For example, to load the file <code>moreCode.xml</code> located in the subdirectory <code>services</code>, you would use the following code:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;triggers><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;scripts src="services/moreCode.xml" /><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;!-- Additional triggers. --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/triggers><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001083-121606" title="Localizing Resources"></a><a name="//apple_ref/doc/uid/20001083-121606-CJBEJECI" title="Localizing Resources"></a><h2>Localizing Resources</h2><p>Sherlock supports channel localization using a mechanism similar to Mac OS X bundles. At the root level of your channel folder, you create subfolders for each of the localizations you support. The name of each subfolder consists of the two-letter ISO 639 language code followed by the <code>.lproj</code> extension. For example, the folder for English localized resources would be called <code>en.lproj</code>. Inside of each folder, you put the localized resources needed by your channel, including nib files, string resources, and image files. </p><p>When a user accesses your channel, Sherlock automatically checks the language preferences of that user and loads the appropriate nib file from your channel. To load localized resources from your script code, you can use the XQuery functions <code>localized-resource</code> and <code>localized-url</code>. To load localized resources from JavaScript, you must call these same functions using the XMLQuery object. See <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-160934">“XMLQuery Object.”</a></span> </p><p>String resources reside in a property list file called <code>LocalizedResources.plist</code> inside of each localized resource directory. Sherlock requires that the name of your channel be included in this file as a localized string with the key <code>CHANNEL_NAME</code>. You can include additional strings, dictionaries, and arrays as needed by your channel. The following listing shows the strings defined by the Dictionary channel. </p><a name="//apple_ref/doc/uid/20001083-134619" title="Listing 3Defined strings from the Dictionary channel"></a><p class="codesample"><strong>Listing 3&nbsp;&nbsp;</strong>Defined strings from the Dictionary channel</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist SYSTEM<span></span></pre></td></tr><tr><td scope="row"><pre>        "file://localhost/System/Library/DTDs/PropertyList.dtd"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="0.9"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>CHANNEL_NAME&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>Dictionary&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>SPELLING_SUGGESTIONS&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>Spelling Suggestions&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>AMERICAN_HERITAGE_DICTIONARY&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>American Heritage Dictionary&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist><span></span></pre></td></tr></table></div><p>To load a localized string, you use the <code>localized-resource</code> routine in XQuery. This routine accepts a key name and returns the string appropriate for the user’s current locale settings. The following code load shows how to use this routine in your XQuery code. </p><div class="codesample"><table><tr><td scope="row"><pre>let $columnTitle = localized-resource("SPELLING_SUGGESTIONS")<span></span></pre></td></tr></table></div><p>If you are writing your channel code using JavaScript, you can use the XMLQuery object to evaluate any XQuery expressions, as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>columnTitle = XMLQuery.localized_resource(""SPELLING_SUGGESTIONS");<span></span></pre></td></tr></table></div><p>For more information, see the description for <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-160934">“XMLQuery Object.”</a></span> </p><a name="//apple_ref/doc/uid/20001083-117109" title="Configuring Your Channel For Use"></a><a name="//apple_ref/doc/uid/20001083-117109-CJBHDDAA" title="Configuring Your Channel For Use"></a><h2>Configuring Your Channel For Use</h2><p>In order to make your channel available, you must tell Sherlock where to find it. Sherlock channels are distributed over the Web to make them easier to maintain and update. However, in order to distribute a channel over the web, Sherlock needs to know the location of your channel’s code and resources. You do this by specifying a channel configuration file. Links that refer to your channel point to this file so that Sherlock can load the information it needs.</p><p>The channel configuration file is an XML file containing a single <code>&lt;channel_info></code> XML tag. The attributes of this tag identify the location of your channel’s resource files relative to the configuration file itself. <span class="content_text">Listing 4</span> shows a sample channel directory structure with the channel’s code and resource files. In this listing the <code>MyChannel.xml</code> file is the channel configuration file while <code>channel.xml</code> is the main code file containing the channel’s triggers.</p><a name="//apple_ref/doc/uid/20001083-134591-CJBJJIJH" title="Listing 4Channel directory structure"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001083-134591" title="Listing 4Channel directory structure"></a><strong>Listing 4&nbsp;&nbsp;</strong>Channel directory structure</p><div class="codesample"><table><tr><td scope="row"><pre>MyChannel/<span></span></pre></td></tr><tr><td scope="row"><pre>    channel.xml<span></span></pre></td></tr><tr><td scope="row"><pre>    en.lproj/<span></span></pre></td></tr><tr><td scope="row"><pre>        channel.nib<span></span></pre></td></tr><tr><td scope="row"><pre>        help/<span></span></pre></td></tr><tr><td scope="row"><pre>            help.html<span></span></pre></td></tr><tr><td scope="row"><pre>        localizedResources.plist<span></span></pre></td></tr><tr><td scope="row"><pre>    mychannel.icns<span></span></pre></td></tr><tr><td scope="row"><pre>    mychannel.tiff<span></span></pre></td></tr><tr><td scope="row"><pre>MyChannel.xml<span></span></pre></td></tr></table></div><p>The following code listing shows the complete contents of the file <code>MyChannel.xml</code>. Sherlock loads this file and automatically interprets it as an XML tag. The attributes of the tag provide Sherlock with a way of uniquely identifying the channel, along with the location of the channel’s resources, here shown as relative paths on the Web server. See <span class="content_text"><a href="ScriptExtensions.html#//apple_ref/doc/uid/20001085-133218">“Channel Information Tag Syntax”</a></span> for a complete description of the <code>channel_info</code> tag and attributes.</p><a name="//apple_ref/doc/uid/20001083-134614" title="Listing 5Channel info tag"></a><p class="codesample"><strong>Listing 5&nbsp;&nbsp;</strong>Channel info tag</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;!-- My channel info file --><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;channel_info<span></span></pre></td></tr><tr><td scope="row"><pre>    identifier="com.company.MyChannel"<span></span></pre></td></tr><tr><td scope="row"><pre>    icon_url="MyChannel/mychannel.tiff"<span></span></pre></td></tr><tr><td scope="row"><pre>    channel_url="MyChannel/channel.xml"<span></span></pre></td></tr><tr><td scope="row"><pre>    localized_base_url="MyChannel/"<span></span></pre></td></tr><tr><td scope="row"><pre>    nib_url="channel.nib/objects.nib"<span></span></pre></td></tr><tr><td scope="row"><pre>    icns_icon_url="MyChannel/mychannel.icns"<span></span></pre></td></tr><tr><td scope="row"><pre>    help_file="help/help.html"<span></span></pre></td></tr><tr><td scope="row"><pre>/><span></span></pre></td></tr></table></div><p>In addition to configuring your channel, you may also want to provide a description of your channel for the channel management portion of the Sherlock window. To specify this string, add the <code>CHANNEL_DESCRIPTION</code> key to the <code>LocalizedResources.plist</code> file in each of your localized directories. The value of this key is the description of your channel. See <span class="content_text"><a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-121606">“Localizing Resources”</a></span> for more information on localizing strings.</p><p>Once you have organized your project and created your configuration file, you can proceed to install your channel and debug it. For more information, see <span class="content_text"><a href="../Tasks/InstallingAccessing.html#//apple_ref/doc/uid/20001087-BCIIDJDC">“Accessing Channels.”</a></span> </p><a name="//apple_ref/doc/uid/20001083-120201" title="Deploying Your Channel"></a><h2>Deploying Your Channel</h2><p>The first step in using a channel is to make it accessible to users. Because Sherlock channels are small, they are ideally suited for deployment over the web. The minimal channel consists of two XML files, a nib file, a property list, and a TIFF image. </p><p>For testing purposes, you can deploy your web on your local machine using the personal web sharing feature of Mac OS X. With personal web sharing, you just need to drag your channel files into the current user’s <code>Sites</code> folder to make the files accessible on the web. When you are satisfied that your channel works as expected, you can deploy it to a more public server and establish links to the channel’s configuration file. For information on loading a channel from a URL, see <span class="content_text"><a href="../Tasks/InstallingAccessing.html#//apple_ref/doc/uid/20001087-110203">“Loading a Channel From a URL.”</a></span> </p><p>Regardless of where you deploy your channel, the channel configuration file must contain valid paths to the files of your channel. For more information on creating a channel configuration file, see <span class="content_text"><a href="DevelopingChannels.html#//apple_ref/doc/uid/20001083-117109">“Configuring Your Channel For Use.”</a></span> </p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ChannelArchitecture.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="Languages.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-04-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Conceptual/Sherlock/Concepts/DevelopingChannels.html%3Fid%3D10000121i-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Conceptual/Sherlock/Concepts/DevelopingChannels.html%3Fid%3D10000121i-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Conceptual/Sherlock/Concepts/DevelopingChannels.html%3Fid%3D10000121i-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

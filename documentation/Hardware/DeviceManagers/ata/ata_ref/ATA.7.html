<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> ATA Disk Driver </TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b>	<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> <a href="../../devicemgrs.html">Device Managers and Drivers</a>	<b>&gt;</b> <a href="../ata.html" target="_top">ATA Devices</a>	<b>&gt;</b> ATA Device Software Guide		</font></td>	</tr>	</table><br><!-- end of path --><DIV><!-- top navigation --><P><A HREF="ATA.6.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.6.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.8.html"><img src="images/next.gif" border="0"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><H1 CLASS="H2.Heading2"><A NAME="pgfId=340"> </A>ATA Disk Driver <A NAME="marker=338"> </A><A NAME="marker=339"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=341"> </A>The ATA disk driver has the following features:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=342"> </A>Uses the ATA Manager for system and bus independence.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=343"> </A>Supports multiple partitions (volumes).</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=344"> </A>Recognizes both Macintosh partitioned and non-partitioned media.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=345"> </A>Adheres to the New Driver Rules described in <I CLASS="italics">Designing PCI Cards and Drivers for the Macintosh Family</I>.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=346"> </A>Supports both synchronous and asynchronous requests from the file system.</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=347"> </A>The ATA disk driver supports all ATA drives that adhere to the ANSI ATA-2 and ATA-3 specifications. </P><P CLASS="T1.Text1"><A NAME="pgfId=348"> </A>The ATA disk driver relies on the services of the ATA Manager, which provides the ATA protocol engine and relieves the driver of system and bus dependencies. The main functions of the driver are managing the media and monitoring the status of the drive. </P><P CLASS="T1.Text1"><A NAME="pgfId=349"> </A>The ATA disk driver is responsible for providing block-oriented access to the storage media. The file systems treat the media as one or more logical partitions or volumes in which data at any address can be read or written indefinitely. </P><P CLASS="T1.Text1"><A NAME="pgfId=350"> </A>The ATA disk driver provides operating system-dependent services through a set of driver routines required to interface with the Macintosh Operating System. In addition, it provides additional control and status functions that are specific to this implementation of the ATA disk driver. The required disk driver routines, as specified in <I CLASS="italics">Inside Macintosh: Devices</I>, are <TT CLASS="cv">open</TT>, <TT CLASS="cv">close</TT>, <TT CLASS="cv">prime</TT>, <TT CLASS="cv">control</TT>, and <TT CLASS="cv">status</TT>. </P><P CLASS="T1.Text1"><A NAME="pgfId=351"> </A>There are two versions of the ATA disk driver, a RAM-based version which is installed on the drive media by the Drive Setup application, and a ROM-resident version. At system startup time, if a RAM-based driver is not found on the ATA drive media by the ATA Manager, the ATA disk driver in the ROM is selected as the driver for the drive. Note that this is different from the SCSI driver loading sequence, which always requires a RAM-based driver be installed on the media. The ATA disk driver in ROM is a subset of the ATA disk driver on the media and should not be used for normal operation. It provides emergency access to the ATA drive. The ATA disk driver installed on the media by the Drive Setup application provides the latest features and optimal performance.</P><P CLASS="T1.Text1"><A NAME="pgfId=352"> </A>The RAM-based ATA disk driver supports all modes of PIO and DMA operations as defined in the ANSI ATA-2 and ATA-3 Specifications. When the driver is opened for an ATA drive, the ATA disk driver configures the ATA Manager and the drive for optimal performance based upon both the system and drive capabilities. Typically, DMA modes are selected over PIO modes. </P><P CLASS="T1.Text1"><A NAME="pgfId=353"> </A>The ATA disk driver supports conservation of system power by spinning down the disk drive to reduce power consumption. Spinning down the drive also flushes the drive write cache to prevent data loss. The ATA disk driver spins down the disk drive in response to a Sleep demand, the &quot;Set Power Mode&quot; control call (csCode 70), system shutdown and restart, and when no access has been made to the drive within the time specified in the Energy Saver Control Panel.</P><P CLASS="T1.Text1"><A NAME="pgfId=354"> </A>The ATA disk driver usually has a driver reference number of -54 (decimal), but may also have a different reference number if -54 is taken when the driver is loaded. The driver name is <TT CLASS="cv">.ATADisk</TT>. Like all Macintosh device drivers, the ATA disk driver can be called by using either the driver reference number or the driver name <TT CLASS="cv">.ATADisk</TT>. <A NAME="marker=355"> </A> <A NAME="marker=356"> </A><A NAME="marker=357"> </A></P><DIV><BLOCKQUOTE><P><A NAME="pgfId=10563"> </A><B>Note</B><BR><A NAME="pgfId=461"> </A>You should never rely on the reference number being the same. Use the openDriver call with the driver name to retrieve the current reference number for that driver. Then use the driver reference number returned by the OpenDriver call for all subsequent driver calls.  </P></BLOCKQUOTE><P CLASS="T1.Text1"><A NAME="pgfId=358"> </A>The ATA disk driver does not provide request queuing. All driver requests are either completed immediately or are passed to the ATA Manager for further processing. However, the driver does process asynchronous requests using the ATA Manager to notify it when an operation has completed. </P></DIV><HR>&#169 1999 Apple Computer, Inc. &#151; (Last Updated 9 Mar 99) <P><A HREF="ATA.6.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.6.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.8.html"><img src="images/next.gif" border="0"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script></a><!-- end Show/Hide frames --></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QA1146: Illustrating document window changes in Swing</title><meta name="keywords" content="close save document change swing java"><meta name="Description" content="Technical Q&amp;A QA1146: Use the Aqua close button dot to indicateyour documents have changed."><meta name="categories" content="Java"><meta name="week-posted" content="Jun 17, 2002 - Jun 21, 2002"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001691" title="Illustrating document window changes in Swing"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/Java/index.html">Java</a> &gt; <a href="../../technicalqas/Java/idxUserExperience-date.html">User Experience</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1146</div>
<div id="pageheadsub">Illustrating document window changes in Swing</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR> <td align="left"><!-- begin_content --><hr width=500 align=center>                  <P id=p2>Q:      I want to indicate that document windows have changed in      my Java application.  How can I draw the dot that appears      in the window's close button, similar to Carbon and Cocoa      applications?</p>            	<BR><P><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=200>			<TR>				<TD ALIGN="CENTER" align="left"><pre><img src="images/qa1146_1.jpg" alt="Modified Document" width=64 height=48>   <img src="images/qa1146_2.jpg" alt="Unchanged Document" width=64 height=48></pre></TD>			</TR>			<TR>				<td nowrap align=left><B>Figure 1</B>. Close buttons for windows with and without new/unsaved changes.</TD>			</TR>		</TABLE></CENTER>                  <P id=p4>A:      If you are using Swing with the Aqua look and feel under Java 1.3.1 for Mac OS X, there      is a pure Java way of painting the modified indicator onto      the close button.  It is a simple Swing client property that      can be set using the <CODE>putClientProperty()</CODE> method available to all subclasses of <CODE>JComponent</CODE>.  The property is &quot;<CODE>windowModified</CODE>&quot;,      and needs to be set with a <CODE>Boolean</CODE> object for its value.       This can be set directly on a <CODE>JInternalFrame</CODE>, or on the      rootPane of a <CODE>JFrame</CODE> (<CODE>JFrame</CODE> extends the AWT <CODE>Frame</CODE> class and does not have clientProperty      support).  Listing 1 illustrates how this could be used in      a text editor application:</p><BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>import java.awt.event.*;import javax.swing.*;import javax.swing.event.*;import javax.swing.text.*;public class Editor extends JFrame  implements DocumentListener, ActionListener {    final static String WINDOW_MODIFIED = &quot;windowModified&quot;;    JEditorPane jp;    JMenuBar jmb;    JMenu file;    JMenuItem save;    public Editor(String title) {        super(title);        jp = new JEditorPane();        jp.getDocument().addDocumentListener(this);        getContentPane().add(jp);        jmb = new JMenuBar();        file = new JMenu(&quot;File&quot;);        save = new JMenuItem(&quot;Save&quot;);        save.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S,          java.awt.Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()));        save.addActionListener(this);        file.add(save);        jmb.add(file);        setJMenuBar(jmb);        setSize(400,600);        setVisible(true);    }    // doChange() and actionPerformed() handle the "windowModified" state    public void doChange() {        getRootPane().putClientProperty(WINDOW_MODIFIED, Boolean.TRUE);    }    public void actionPerformed(ActionEvent e) {        // save functionality here...        getRootPane().putClientProperty(WINDOW_MODIFIED, Boolean.FALSE);    }    // DocumentListener implementations    public void changedUpdate(DocumentEvent e) { doChange(); }    public void insertUpdate(DocumentEvent e)  { doChange(); }    public void removeUpdate(DocumentEvent e)  { doChange(); }    public static void main(String[] args) {        new Editor(&quot;test&quot;);    }}</pre></TD></TR><TR><td align="left"><P><B>Listing 1</B>.       Text editor with &quot;windowModified&quot; status.</P></TD></TR></TABLE></CENTER><BR><BR>          <hr width=500 align=center> <!-- begin_date --><H4 ALIGN=center>[Jun 18 2002]</H4><!-- end_date --></TD> </TR> </TABLE></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1146.html%3Fid%3DDTS10001691-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1146.html%3Fid%3DDTS10001691-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1146.html%3Fid%3DDTS10001691-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE>Sound Header Records (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.42.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.3d.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.44.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=2770"> </A><A NAME="35802"> </A>Sound Header Records</H1><P CLASS="T0.Text0"><A NAME="pgfId=2825"> </A><A NAME="marker=299"> </A><A NAME="marker=287"> </A>Sound resources often contain sampled-sound data as well as sound commands. The sound data is contained in the last field of the sound header. You can access a sound header record to find information about sampled-sound data. The standard sound header is used only for simple monophonic sounds. The <TT CLASS="cv">SoundHeader</TT> data type defines a sampled sound header record.<A NAME="marker=301"> </A></P><CODE CLASS="Cv.Code"><A NAME="pgfId=11286"> </A>TYPE SoundHeader =<BR>PACKED RECORD<BR>&nbsp;&nbsp;&nbsp;&nbsp;samplePtr:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{if NIL, samples in sampleArea}<BR>&nbsp;&nbsp;&nbsp;&nbsp;length:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of samples in array}<BR>&nbsp;&nbsp;&nbsp;&nbsp;sampleRate:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fixed;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample rate}<BR>&nbsp;&nbsp;&nbsp;&nbsp;loopStart:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{loop point beginning}<BR>&nbsp;&nbsp;&nbsp;&nbsp;loopEnd:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{loop point ending}<BR>&nbsp;&nbsp;&nbsp;&nbsp;encode:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample's encoding option}<BR>&nbsp;&nbsp;&nbsp;&nbsp;baseFrequency:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{base frequency of sample}<BR>&nbsp;&nbsp;&nbsp;&nbsp;sampleArea:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PACKED ARRAY[0..0] OF Byte;<BR>END;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11290"> </A><TT CLASS="cv">samplePtr</TT><A NAME="marker=11294"> </A></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1992"> </A>A pointer to the sampled-sound data. If the sampled sound is located in memory immediately after the <TT CLASS="cv">baseFrequency</TT> field, then this field should be set to <TT CLASS="cv">NIL</TT>. Otherwise, this field is a pointer to the memory location of the sampled-sound data. (This might be useful if you want to change some fields of a sound header but do not want to modify a handle to a sound resource directly.)<A NAME="marker=324"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11300"> </A><TT CLASS="cv">length</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1993"> </A>The number of bytes of sound data.<A NAME="marker=325"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11309"> </A><A NAME="marker=11313"> </A><TT CLASS="cv">sampleRate</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2065"> </A>The rate at which the sample was originally recorded. The Sound Manager can play sounds sampled at any rate up to 64&nbsp;kHz. The values corresponding to the three most common sample rates (11&nbsp;kHz, 22&nbsp;kHz, and 44&nbsp;kHz) are defined by constants:</BLOCKQUOTE><CODE CLASS="Cv.Code"><A NAME="pgfId=11321"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rate44khz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $AC440000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{44100.00000 Fixed}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rate22khz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $56EE8BA3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{22254.54545 Fixed}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rate11khz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $2B7745D1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{11127.27273 Fixed}<BR></CODE><BLOCKQUOTE CLASS="DD.DefinitionDefCont"><A NAME="pgfId=2773"> </A>Note that the sample rate is declared as a <TT CLASS="cv">Fixed</TT> data type, but the most significant bit is not treated as a sign bit; instead, that bit is interpreted as having the value 32,768.<A NAME="marker=370"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11325"> </A><TT CLASS="cv">loopStart</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2776"> </A>The starting point of the portion of the sampled sound header that is to be used by the Sound Manager when determining the duration of <TT CLASS="cv">freqDurationCmd</TT>. These loop points specify the byte numbers in the sampled data to be used as the beginning and end points to cycle through when playing the sound. The loop starting and ending points are 0-based.<A NAME="marker=1217"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11334"> </A><TT CLASS="cv">loopEnd</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2777"> </A>The end point of the portion of the sampled sound header that is to be used by the Sound Manager when determining the duration of <TT CLASS="cv">freqDurationCmd</TT>. If no looping is desired, set both <TT CLASS="cv">loopStart</TT> and <TT CLASS="cv">loopEnd</TT> to 0.<A NAME="marker=1221"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11343"> </A><TT CLASS="cv">encode</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2778"> </A>The method of encoding used to generate the sampled-sound data. The current encoding option values are</BLOCKQUOTE><CODE CLASS="Cv.Code"><A NAME="pgfId=11354"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stdSH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $00;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{standard sound header}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extSH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $FF;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{extended sound header}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmpSH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $FE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{compressed sound header}<BR></CODE><BLOCKQUOTE CLASS="DD.DefinitionDefCont"><A NAME="pgfId=2780"> </A>	For a standard sound header, you should specify the constant <TT CLASS="cv">stdSH</TT>. Encode option values in the ranges 0 through 63 and 128 to 255 are reserved for use by Apple. You are free to use numbers in the range 64 through 127 for your own encode options.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11360"> </A><TT CLASS="cv">baseFrequency</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2781"> </A>The pitch at which the original sample was taken. This value must be in the range 1 through 127. <A target="doc" HREF="imsoundmgr.1b.htm#17380" CLASS="XRef">Table 1-3</A> lists the possible <TT CLASS="cv">baseFrequency</TT> values. The <TT CLASS="cv">baseFrequency</TT> value allows the Sound Manager to calculate the proper playback rate of the sample when an application uses the <TT CLASS="cv">freqDurationCmd</TT> command. Applications should not alter the <TT CLASS="cv">baseFrequency</TT> field of a sampled sound; to play the sample at different pitches, use <TT CLASS="cv">freqDurationCmd</TT> or <TT CLASS="cv">freqCmd</TT>.<A NAME="marker=1235"> </A><A NAME="marker=1236"> </A><A NAME="marker=1237"> </A><A NAME="marker=1517"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11369"> </A><TT CLASS="cv">sampleArea</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2782"> </A>If the value of <TT CLASS="cv">samplePtr</TT> is <TT CLASS="cv">NIL</TT>, this field is an array of bytes, each of which contains a value similar to the values in a wave-table description. These values are interpreted as offset values, where $80 represents an amplitude of 0. The value $00 is the most negative amplitude, and $FF is the largest positive amplitude. The samples are numbered 1 through the value in the <TT CLASS="cv">length</TT> parameter.<A NAME="marker=1241"> </A></BLOCKQUOTE><P CLASS="T1.Text1"><A NAME="pgfId=2827"> </A>If you need to create a sound header for sampled-sound data that your application has recorded, then you should use the <TT CLASS="cv">SetupSndHeader</TT> function, described in the chapter <A target="doc" HREF="imsoundinput.htm" CLASS="XRef">&quot;Sound Input Manager&quot;</A> in this book.<A NAME="marker=1469"> </A><A NAME="marker=323"> </A><A NAME="marker=1218"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.42.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.3d.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.44.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
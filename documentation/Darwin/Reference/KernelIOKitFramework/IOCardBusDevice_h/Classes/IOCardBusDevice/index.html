<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>IOCardBusDevice</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/class/IOCardBusDevice" title="IOCardBusDevice"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOCardBusDevice">IOCardBusDevice</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../../../IOPCIDevice_h/Classes/IOPCIDevice/index.html#//apple_ref/cpp/cl/IOPCIDevice" target="_top">IOPCIDevice</a>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOCardBusDevice.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>Class that represents a 32-bit CardBus device.
<!-- end abstract --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p><b>Introduction</b>    
</p>
<p>After the discovery of a 32-bit PC Card, the PC Card Family creates
and publishes an instance of the IOCardBusDevice provider nub.
</p>
<p>The same driver should work for CardBus cards and PCI cards in most
cases.  For more information on writing CardBus drivers please refer
to the documentation for writing PCI device drivers.  It is recommended
that CardBus drivers list their provider as IOPCIDevice instead of
IOCardBusDevice to avoid having to pull in the PC Card Family if it is
not required.
</p>
<p>CardBus cards can be shut down from the menu bar or physically
ejected.  The driver will first receive a Card Services event through
its message method before being terminated.  If your driver can handle
being unloaded by using the shell command "kextunload" it should also
be ready and able to handle being ejected.
</p>
<p><b>Types of Driver Matching Supported by IOCardBusDevice</b>
</p>
<p>Matching is done by comparing the driver's matching properties against
information retrieved from the Configuration Space and its CIS
information.  In addition to what is provided by IOService and
IOPCIDevice, the following matching is also supported:
</p>
<p><b>"VersionOneInfo"</b>
</p>
<p>The "VersionOneInfo" property match is based on the CISTPL_VERS_1
tuple.  It matches against an array of strings, where each string is
one of the entries from the version one tuple.  Trailing entries that are
omitted from the driver's matching entry are treated as wild matches.
<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOCardBusDevice/cardServices/int/(int,void*,void*,void*)" target="_top">cardServices</a></tt></dt>
<dd><p>Makes a call to Card Services.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOCardBusDevice/getCardServicesHandle/client_handle_t/()" target="_top">getCardServicesHandle</a></tt></dt>
<dd><p>Returns the Card Services client handle for this card.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOCardBusDevice/getState/u_int/()" target="_top">getState</a></tt></dt>
<dd><p>Returns the current state of the card.
</p></dd>
</dl>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOCardBusDevice/cardServices/int/(int,void*,void*,void*);  indexgroup=PCCard ;   name=IOCardBusDevice::cardServices --><a name="//apple_ref/cpp/instm/IOCardBusDevice/cardServices/int/(int,void*,void*,void*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="cardServices">cardServices</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Makes a call to Card Services.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">int</span><!-- /a --> <!-- a --><span class="function">cardServices</span><!-- /a -->(
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">func</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg1</span><!-- /a --> = <span class="number">0</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg2</span><!-- /a --> = <span class="number">0</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg3</span><!-- /a --> = <span class="number">0</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>func</code></dt>
<dd><p>The Card Services function index.</p></dd>
<dt><code>arg1</code></dt>
<dd><p>Argument number one.</p></dd>
<dt><code>arg2</code></dt>
<dd><p>Argument number two.</p></dd>
<dt><code>arg3</code></dt>
<dd><p>Argument number three.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->See "IOKit/pccard/cs.h" for return codes.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method is used to directly make calls to Card Services.  You should always call Card Services using this method.  This will ensure that it is run on the correct IOPCCardBridge workloop.  See the file "doc/PCMCIA-PROG" in the IOPCCardFamily Darwin project and header file "IOKit/pccard/cs.h" for more info.<br><br><i>In most cases, you should never need to use this method and its misuse will cause problems.</i>
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOCardBusDevice/getCardServicesHandle/client_handle_t/();  indexgroup=PCCard ;   name=IOCardBusDevice::getCardServicesHandle --><a name="//apple_ref/cpp/instm/IOCardBusDevice/getCardServicesHandle/client_handle_t/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getCardServicesHandle">getCardServicesHandle</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns the Card Services client handle for this card.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">client_handle_t</span><!-- /a --> <!-- a --><span class="function">getCardServicesHandle</span><!-- /a -->(
    <span class="param">void</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns Card Services client handle. This should always be successful.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method returns the Card Services client handle for this card.  This handle is created for the driver when the card was bound to Card Services.  This handle is needed to make most Card Services calls.  In most cases you should not need to use this method.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOCardBusDevice/getState/u_int/();  indexgroup=PCCard ;   name=IOCardBusDevice::getState --><a name="//apple_ref/cpp/instm/IOCardBusDevice/getState/u_int/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getState">getState</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns the current state of the card.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">u_int</span><!-- /a --> <!-- a --><span class="function">getState</span><!-- /a -->(
    <span class="param">void</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Current state of card.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method returns the current state of the card.
<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOCardBusDevice_h/Classes/IOCardBusDevice/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOCardBusDevice_h/Classes/IOCardBusDevice/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOCardBusDevice_h/Classes/IOCardBusDevice/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=cl; uid=//apple_ref/cpp/cl/IOCardBusDevice; indexgroup=PCCard ; name=IOCardBusDevice--><a name="//apple_ref/cpp/cl/IOCardBusDevice"></a>
</body>
</html>

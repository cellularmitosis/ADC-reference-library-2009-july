<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><!-- <script language="JavaScript" src="frametest.js"></script> --><TITLE> Bindings in the Editing Part</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b> Getting Started With WebObjects</font><br><br><!--end of path --><hr><DIV><a name="top"></a><A HREF="GettingStarted.35.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.37.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.39.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><HR></DIV><H1><A NAME="pgfId=26133"> </A>Bindings in the Editing Part</H1><A NAME="pgfId=14699"> </A>The text fields in the editing part are all bound to attributes of the <B>movieDisplayGroup </B>object's<B> selectedObject</B>--the movie on which the user clicked. Typing&nbsp;new values into these fields updates the Movie enterprise object. To actually save the updated values to the database, the user must click the &quot;Save to database&quot; button.</P><DIV><IMG SRC="images/EditPrt.gif"></DIV><P><OL><LI><A NAME="pgfId=26114"> </A>Inspect the middle image button.<P><A NAME="pgfId=14703"> </A>Its <B>action</B> attribute is bound to the action method <B>saveChanges</B>.<P><LI><A NAME="pgfId=14701"> </A>Look in the <B>Main.java</B> class to see how <B>saveChanges</B> is implemented.<P><A NAME="pgfId=14702"> </A>The method (shown below with comments omitted) simply saves any changes that have been made to <B>movieDisplayGroup</B>'s objects to the database.<P><TT><A NAME="pgfId=14705"> </A>	public void saveChanges() throws Exception {<BR><A NAME="pgfId=14706"> </A>&nbsp;&nbsp;&nbsp;try {<BR><A NAME="pgfId=14707"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.session().defaultEditingContext().saveChanges();<BR><A NAME="pgfId=14708"> </A>&nbsp;&nbsp;&nbsp;}<BR><A NAME="pgfId=14709"> </A>&nbsp;&nbsp;&nbsp;catch (Exception exception) {<BR><A NAME="pgfId=14713"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.err.println(&quot;Cannot save changes &quot;);<BR><A NAME="pgfId=14714"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw exception;<BR><A NAME="pgfId=14715"> </A><A NAME="pgfId=14716"> </A>	}</P><A NAME="pgfId=14731"> </A></TT><B>this.session()</B> returns a Session object that represents a connection to the application by a single user. A Session object provides access to an EOEditingContext object. The expression<P><TT><A NAME="pgfId=14748"> </A>	this.session().defaultEditingContext().saveChanges();</P></TT><A NAME="pgfId=14735"> </A>sends a <B>saveChanges</B> message to the Session's <B>defaultEditingContext</B>. This default EOEditingContext object manages graphs of objects fetched from the database, and all changes to the database are saved through it. For more information, see the EOEditingContext class specification in the <I>Enterprise Objects Framework Reference</I>.<P><A NAME="pgfId=14736"> </A>An EOEditingContext's <B>saveChanges</B> method uses other Enterprise Objects Framework objects to analyze its network of enterprise objects (Movie objects referenced by the application) for changes and then to perform a set of corresponding operations in the database. If an error occurs during this process, <B>saveChanges</B> throws an exception. The <B>Main.java</B> <B>saveChanges</B> method simply raises the exception, having the effect of returning a diagnostic page. You could return an error page that explains the reason for the save failure instead, but the application in this tutorial uses the default behavior.<P><LI><A NAME="pgfId=14793"> </A>Inspect the first and third image buttons to see what their <B>action</B> attributes are bound to.<P><A NAME="pgfId=14799"> </A>They are bound to the <B>movieDisplayGroup.insert</B> and <B>movieDisplayGroup.delete</B> methods respectively. The WODisplayGroup <B>insert</B> method creates a new enterprise object, then inserts it into the display group's list of objects just past the current selection. The WODisplayGroup <B>delete</B> method deletes the display group's selected object. These changes happen only in memory--not in the database. To actually insert a new row in the database (or delete a row), the user must click the &quot;Save to database&quot; button, invoking <B>saveChanges</B> on the session's EOEditingContext. The editing context analyzes the enterprise objects in memory; determines if any objects have been added, updated, or deleted; and then executes database operations to sync the database with the application.<P></OL><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 24 Aug 99)<P><A HREF="GettingStarted.35.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.37.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.39.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
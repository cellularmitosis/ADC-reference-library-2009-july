<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Designating a Default Palette for Your Application </TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING23></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACI-22.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACI-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACI-122.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACI-24.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACI-2.html"><B>Advanced Color Imaging on the Mac OS</B></A> / <BR><DD><A HREF="ACI-14.html"><B>Chapter 1 - Palette Manager</B></A> / <A HREF="ACI-21.html"><B>Using the Palette Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING23-0></A>
<H2><A NAME=MARKER-9-122></A>Designating a Default Palette for Your Application </H2>
 <A NAME=MARKER-2-123></A><A NAME=MARKER-2-124></A><A NAME=MARKER-2-125></A>You can define a default palette for the Operating System to use whenever your application creates a color window or displays a dialog box without an associated palette. Defining a default palette is especially useful in the following cases:<P>
<UL>
<LI>All the windows in an application use the same palette.
<LI>A color application uses basic QuickDraw dialog and alert boxes.<P>
</UL>
 If your application does not define a default palette, the system will use its own default palette to define the color environment for the old-style dialogs and alerts. If the system palette does not contain appropriate colors, unsuitable colors will be displayed.<P>
 There are two ways that you can define a default palette for your application: by creating a palette resource that the Palette Manager can then use to create the default palette or by using the <CODE>SetPalette</CODE> or <CODE>NSetPalette</CODE> function to assign a default palette. <P>
 <A NAME=MARKER-9-138></A>You set a palette resource (a resource of type <CODE>'pltt'</CODE>) as your application's default by assigning it a resource ID of <CODE>0</CODE>. The Palette Manager loads the application default palette and stores it in a low-memory global variable called <CODE>AppPalette</CODE>. When your application opens a new color window, the Palette Manager automatically looks for a palette resource from which to create a palette to assign to the window. It looks in the resource fork for a palette resource with the same ID as that of the window. If you haven't created a specific resource for the window and if you haven't assigned a palette to the window with the <CODE>SetPalette</CODE> or <CODE>NSetPalette</CODE> function, the Palette Manager creates a palette from the default application resource and assigns this palette to the window. If the Palette Manager cannot find the default application resource, it uses the system default palette resource (<CODE>'pltt'</CODE> ID = 0 in the System file). If the System file has no default palette, the Palette Manager creates a special two-entry palette (black and white) and assigns this palette to the window.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD><A NAME=MARKER-9-127></A>If you are running an application from a development environment, such as MPW, you could have trouble automatically assigning the default application palette. The Palette Manager loads the default palette when a call is made to <CODE>InitPalettes</CODE> (generally, <CODE>InitWindows</CODE> makes this call). Then <CODE>InitPalettes</CODE> uses <CODE>Get1Resource</CODE> rather than <CODE>GetResource</CODE> to load the <CODE>'pltt'</CODE> resource with ID equal to 0. The problem is that <CODE>Get1Resource</CODE> assumes your application is at the top of the resource chain and retrieves the resource only if it is in the first file. However, because the development environment, not your application, is at the top of the resource chain, the Palette Manager will be unable to load the default application resource. In this case, it loads the default system resource, if it exists, or the special two-entry palette instead.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 The other way to assign a default palette is to create a palette and then assign it with the <CODE>SetPalette</CODE> or <CODE>NSetPalette</CODE> function as follows:<P>
<PRE>
defPalette = NewPalette (numcolor, mycolors, pmAnimated, 0x1500);
SetPalette ((WindowPtr) -1, defPalette, TRUE);
</PRE>
 This method of assigning a default palette is useful if, for example, you give the user an opportunity in a menu or preference file to change the palette to another setting. <P>
 <A NAME=MARKER-2-128></A>Once your application has set its color environment by calling <CODE>InitWindows</CODE> (or <CODE>InitPalettes</CODE> in unusual instances when there are no menus), you can find the default palette for your application by using the <CODE>GetPalette</CODE> function:<P>
<PRE>
myPaletteHndl = GetPalette ((WindowPtr) -1); 
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACI-22.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACI-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACI-122.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACI-24.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACI-3.html">&copy; Apple Computer, Inc.</A><br>13 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

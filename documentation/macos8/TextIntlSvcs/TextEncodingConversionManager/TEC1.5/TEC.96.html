<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<script language="JavaScript" src="frametest.js"></script>
<TITLE> QueryUnicodeMappings</TITLE><LINK REL="stylesheet" TYPE="text/css" HREF="../../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../../Resources/JavaScript/page.js"></script>
</head>
<body bgcolor="#ffffff">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<DIV>
<a name="top"></a>
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --><A HREF="TEC.95.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.95.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.97.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A><br>
<font face="Geneva,Helvetica,Arial" size="1"><b><br>
		PATH<spacer type="horizontal" size="5">&nbsp;</b></font><a href="../../../mac8.html"><font face="Geneva,Helvetica,Arial" size="1">Mac OS 8 and 9 Developer Documentation</a>  <b>&gt;</b> Text Encoding Conversion Manager<br>
		<img src="images/im_smblue.gif" width="116" height="8"><img src="images/space.gif" width="6" height="11">Programming With the Text Encoding Conversion Manager</font><br>
		<br>
		<hr>

</DIV>
<H1>
<A NAME="pgfId=3930">
 </A>
<A NAME="13201">
 </A>
QueryUnicodeMappings</H1>
<P>
<A NAME="pgfId=3931">
 </A>
Returns a list of the conversion mappings available on the system that meet specified matching criteria and returns the number of mappings found. </P>
<TT>
<A NAME="pgfId=27086">
 </A>
pascal OSStatus QueryUnicodeMappings (<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptionBits iFilter, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstUnicodeMappingPtr iFindMapping, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ItemCount iMaxCount, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ItemCount *oActualCount, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UnicodeMappingPtr oReturnedMappings);</TT>
<DL COMPACT>
<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27090">
 </A>
<TT>iFilter</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3934">
 </A>
Filter control flags representing the six values given in the Unicode mapping structure that this function uses to match against in determining which mappings on the system to return to your application. The filter control flag enumerations, described in <A HREF="TEC.6f.html" CLASS="XRef">
Filter Control Flags</A>
, define the constants for the flags and their masks. You can include in the search criteria any of the three text encoding values--base, variant, and format--for both the Unicode encoding and the other specified encoding. For any flag not turned on, the value is ignored; the function does not check the corresponding value of the mapping tables on the system. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27100">
 </A>
<TT>iFindMapping</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3935">
 </A>
 A structure of type <A HREF="TEC.72.html" CLASS="XRef"><TT>UnicodeMapping</TT></A> containing the text encodings whose values are to be matched. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27110">
 </A>
<TT>iMaxCount</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3939">
 </A>
The maximum number of mappings that can be returned. You provide this value to identify the number of elements in the array pointed to by the <TT>oReturnedMappings</TT> parameter that your application allocated. If the function identifies more matching mappings than the array can hold, it returns as many of them as fit. The function also returns a <TT>kTECArrayFullErr</TT> in this case.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27119">
 </A>
<TT>oActualCount</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3940">
 </A>
A pointer to a value of type <TT>ItemCount</TT>. On output, the number of matching mappings found. This number may be greater than the number of mappings specified by <TT>iMaxCount</TT> if more matching mappings are found than can fit in the <TT>oReturnedMappings</TT> array. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27128">
 </A>
<TT>oReturnedMappings</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3941">
 </A>
 A pointer to an array of structures of type <A HREF="TEC.72.html" CLASS="XRef"><TT>UnicodeMapping</TT></A>. On input, this pointer refers to an array for the matching mappings returned by the function. To allocate sufficient elements for the array, you can use the function <A HREF="TEC.97.html" CLASS="XRef"><TT>CountUnicodeMappings</TT></A> to determine the number of mappings returned for given values of the <TT>iFilter</TT> and <TT>iFindMapping</TT> parameters. On output, this array holds the matching mappings. If there are more matches than the array can hold, the function returns as many of them as will fit and a <TT>kTECBufferBelowMinimumSizeErr</TT> error result. The <TT>oActualCount</TT> parameter identifies the number of matching mappings actually found, which may be greater than the number returned. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27138">
 </A>
<I CLASS="italics">
function result</I>
</DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14452">
 </A>
A result code. See <A HREF="TEC.20.html" CLASS="XRef">
Text Encoding Conversion Manager Result Codes</A>
 in the chapter <A HREF="TEC.18.html" CLASS="XRef">
Basic Text Types Reference</A>
</DD><P>

</DL COMPACT>
<DIV>
<H5 CLASS="RSb.RoutineSbhd">
<A NAME="pgfId=3946">
 </A>
DISCUSSION</H5>
<P>
<A NAME="pgfId=3947">
 </A>
You can use the <TT>QueryUnicodeMappings</TT> function to obtain all mappings on the system up to the number allowed by your <TT>oReturnedMappings</TT> array by specifying a value of zero for the <TT>iFilter</TT> field. <P>


<A NAME="pgfId=3949">
 </A>
You can use the function to obtain very specific mappings by setting individual filter control flags. You can filter on any of the three text encoding subfields of the Unicode mapping structure's <TT>unicodeEncoding</TT> specification and on any of the three text encoding subfields of the mapping's <TT>otherEncoding</TT> specification. The <TT>iFilter</TT> parameter consists of a set of six control flags that you set to identify which of the corresponding six subfields to include in the match. The list provided in the <TT>oReturnedMappings</TT> parameter will contain only mappings that match the fields of the Unicode mapping structure whose text encodings subfields you identify in the filter control flags. No filtering is performed on subfields for which you do not set the corresponding filter control flag. <P>


<A NAME="pgfId=3950">
 </A>
For example, to obtain a list of all mappings in which one of the encodings is the default variant and default format of the Unicode 1.1 base encoding and the other encoding is the default variant and default format of a base encoding other than Unicode, you would set up the <TT>iFilter</TT> and <TT>iFindMappings</TT> parameter as follows. To set up these parameters, you use the constants defined for the text encoding bases, the text encoding default variants, the text encoding default formats, and the filter control flag bitmasks. For information on text encoding bases, text encoding default variants, and text encoding default formats and their constants, see the chapter  <A HREF="TEC.18.html" CLASS="XRef">
Basic Text Types Reference</A>
 In this example, the text encoding base field of the Unicode mapping structure's <TT>otherEncoding</TT> field is ignored, so you can specify any value for it. When you call <TT>QueryUnicodeMappings</TT>, passing it these parameters, the function will return a list of mappings between the Unicode encoding you specified and every other available encoding in which each non-Unicode base encoding shows up once because you specified its default variant and default format. </P>
<TT>
<A NAME="pgfId=27149">
 </A>
iFindMapping.unicodeMapping = CreateTextEncoding(<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTextEncodingUnicodeV1_1,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTextEncodingDefaultVariant,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTextEncodingDefaultFormat);<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iFindMapping.otherEncoding = CreateTextEncoding(<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTextEncodingMacRoman,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTextEncodingDefaultVariant,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTextEncodingDefaultFormat);<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iFilter = kUnicodeMatchUnicodeBaseMask&nbsp;|<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kUnicodeMatchUnicodeVariantMask&nbsp;|<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kUnicodeMatchUnicodeFormatMask&nbsp;|<BR> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kUnicodeMatchOtherVariantMask&nbsp;|<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kUnicodeMatchOtherFormatMask;</TT>
<P>
<A NAME="pgfId=4623">
 </A>
If the function returns a <TT>noErr</TT> result code, the value retuned in the <TT>oActualCount</TT> parameter is less than or equal to the value returned in the <TT>iMaxCount</TT> parameter and the <TT>oReturnedMappings</TT> parameter contains all of the matching mappings found. If the function returns a <TT>kTECArrayFullErr</TT>, the function found more mappings than your <TT>oReturnedMappings</TT> array could accommodate.</P>
</DIV>
<HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 13 Dec 99)<P><A HREF="TEC.95.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.95.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.97.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A>

<!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY>
</HTML>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>HandToHand (IM: M)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING106></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Memory-105.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-107.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Memory-2.html"><B>Memory</B></A> / <BR><DD><A HREF="Memory-56.html"><B>Chapter 2 - Memory Manager</B></A> / <A HREF="Memory-60.html"><B>Memory Manager Reference</B></A><BR><DL><DD><A HREF="Memory-62.html"><B>Memory Manager Routines</B></A> / <A HREF="Memory-102.html"><B>Manipulating Blocks of Memory</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING106-0></A>
<H3><A NAME=MARKER-11-391></A><A NAME=MARKER-9-392></A>HandToHand<A NAME=MARKER-9-140></A><A NAME=MARKER-2-394></A></H3>
 Use the <CODE>HandToHand</CODE> function to copy all of the data from one relocatable block to a new relocatable block.<P>
<PRE>
FUNCTION HandToHand (VAR theHndl: Handle): OSErr;
</PRE>
<DL>
<DT><CODE>theHndl</CODE>
<DD> On entry, a handle to the relocatable block whose data is to be copied. On exit, a handle to a new relocatable block whose data duplicates that of <BR>the original.
</DL>
<A NAME=HEADING106-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>HandToHand</CODE> function attempts to copy the information in the relocatable block to which <CODE>theHndl</CODE> is a handle; if successful, <CODE>HandToHand</CODE> returns a handle to the new relocatable block in <CODE>theHndl</CODE>. The new relocatable block is created in the same heap zone as the original block (which might not be the current heap zone).<P>
 Because <CODE>HandToHand</CODE> replaces its input parameter with the new handle, you should retain the original value of the input parameter somewhere else, or you won't be able to access it. Here is an example:<P>
<PRE>
VAR 
   original, copy: Handle; 
   myErr: OSErr;
...
   copy := original;          {both handles access same block}
   myErr := HandToHand(copy); {copy now points to copy of block}
</PRE>
<A NAME=HEADING106-8></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 If successful in creating a new relocatable block, the <CODE>HandToHand</CODE> function does not duplicate the properties of the original block. The new block is unlocked, unpurgeable, and not a resource. You might need to call <CODE>HLock</CODE>, <CODE>HPurge</CODE>, or <CODE>HSetRBit</CODE> (or the combination of <CODE>HGetState</CODE> and <CODE>HSetState</CODE>) to adjust the properties of the new block.<P>
 Because <CODE>HandToHand</CODE> allocates memory, you should not call it at interrupt time.<P>
<A NAME=HEADING106-11></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The registers on entry and exit for <CODE>HandToHand</CODE> are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on entry<TR>
<TD>A0<TD>Handle to original data</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on exit<TR>
<TD>A0<TD>Handle to copy of data<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING106-13></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>memFullErr<TD>-108<TD>Not enough memory<TR>
<TD>nilHandleErr<TD>-109<TD><CODE>NIL</CODE> master pointer<TR>
<TD>memWZErr<TD>-111<TD>Attempt to operate on a free block</TABLE>
</H5>
<A NAME=HEADING106-14></A>
<H5>SEE ALSO</H5>
 If you want to copy only part of a relocatable block into a new relocatable block, use the <CODE>PtrToHand</CODE> function, described on <A HREF=Memory-104.html#MARKER-9-386>page 2-60</A>, after locking and dereferencing a handle to the relocatable block to be copied.<A NAME=MARKER-9-174></A><A NAME=MARKER-2-396></A><A NAME=MARKER-2-133></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Memory-105.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-107.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Memory-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Event-Handling Guide: Using Tracking-Area Objects</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Tracking-Area Objects"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/10000060i-CH8" title="Using Tracking-Area Objects"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../EventsOtherInput-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000447" target="_top">Events &amp; Other Input</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/10000060i-CH1-SW1">Cocoa Event-Handling Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../HandlingKeyEvents/HandlingKeyEvents.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../HandlingTabletEvents/HandlingTabletEvents.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/10000060i-CH8-SW1" title="Using Tracking-Area Objects"></a><h1>Using Tracking-Area Objects</h1><p>An instance of the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/occ/cl/NSTrackingArea" target="_top">NSTrackingArea</a></code> class defines an area of a view that is responsive to the movements of the mouse. When the mouse cursor enters this area, moves around in it, and leaves it, the Application Kit sends (depending on the options specified) mouse-tracking, mouse-moved, and cursor-update messages to a designated object. </p><div class="importantbox"><a name="//apple_ref/doc/uid/10000060i-CH8-DontLinkElementID_9" title="Important:"></a><p><strong>Important:</strong>&nbsp;The <code>NSTrackingArea</code> class was introduced in Mac OS X v10.5. For a discussion of the API used for mouse tracking and cursor updating in earlier releases, see the appendix <span class="content_text"><a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW1">“Using Tracking-Area Objects.”</a></span> Also see <span class="content_text"><a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW4">“Compatibility Issues,”</a></span> below, for a discussion of the current behavior of deprecated methods.</p><p></p></div><p>The Application Kit sends the mouse-tracking messages <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseEntered:" target="_top">mouseEntered:</a></code> and <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseExited:" target="_top">mouseExited:</a></code> to an object when the mouse cursor enters and exits a region of a window. Mouse tracking enables the view owning the region to respond, for example, by drawing a highlight color or displaying a tool tip. The Application Kit also sends <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseMoved:" target="_top">mouseMoved:</a></code> messages to the object if <code><a href="../../../Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/c/econst/NSMouseMoved" target="_top">NSMouseMoved</a></code> types of events are requested. Cursor-update events are a special kind of mouse-tracking event that the Application Kit handles automatically. When the mouse pointer enters a cursor rectangle, the Application Kit displays a cursor image appropriate to the type of view under the rectangle; for example, when a mouse pointer enters a text view, an I-beam cursor is displayed.</p><p>The sections in this chapter describe how to create <code>NSTrackingArea</code> objects, attach them to views, respond to related events, and manage the objects when changes in view geometry occur. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW7">Creating an NSTrackingArea Object</a>
				
			<br/>
			
        
			
			
				<a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW3">Managing a Tracking-Area Object</a>
				
			<br/>
			
        
			
			
				<a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW8">Responding to Mouse-Tracking Events</a>
				
			<br/>
			
        
			
			
				<a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW10">Managing Cursor-Update Events</a>
				
			<br/>
			
        
			
			
				<a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW4">Compatibility Issues</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/10000060i-CH8-SW7" title="Creating an NSTrackingArea Object"></a><h2>Creating an NSTrackingArea Object</h2><p>An <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/occ/cl/NSTrackingArea" target="_top">NSTrackingArea</a></code> object defines a region of a view that is sensitive to the movements of the mouse. When the mouse enters, moves about, and exits that region, the Application Kit sends mouse-tracking, mouse-moved, and cursor-update messages. The region is a rectangle specified in the local coordinate system of its associated view. The recipient of the messages (the <em>owner</em>) is specified when the tracking-area object is created; although the owner can be any object, it is often the view associated with the tracking-area object. </p><p>When you create an <code>NSTrackingArea</code> object you must specify one or more options. These options, which are enumerated constants declared by the class, configure various aspects of tracking-area behavior. They fall into three general categories: </p><ul class="ul"><li class="li"><p><strong>The type of event message sent</strong></p><p>You can request <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseEntered:" target="_top">mouseEntered:</a></code> and <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseExited:" target="_top">mouseExited:</a></code> messages (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingMouseEnteredAndExited" target="_top">NSTrackingMouseEnteredAndExited</a></code>); you can request <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseMoved:" target="_top">mouseMoved:</a></code> messages (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingMouseMoved" target="_top">NSTrackingMouseMoved</a></code>); and you can request <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/cursorUpdate:" target="_top">cursorUpdate:</a></code> messages (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingCursorUpdate" target="_top">NSTrackingCursorUpdate</a></code>).</p><p>You are not limited to a single option from this set; you can perform a bitwise-OR operation to request multiple types of messages.</p></li><li class="li"><p><strong>The active scope of tracking-area messages</strong></p><p>You must specify <em>one</em> of the following options to request when the tracking area should actively generate events:</p><ul class="nested"><li class="nested li"><p>When the associated view is first responder (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingActiveWhenFirstResponder" target="_top">NSTrackingActiveWhenFirstResponder</a></code>)</p></li><li class="nested li"><p>When the associated view is in the key window (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingActiveInKeyWindow" target="_top">NSTrackingActiveInKeyWindow</a></code>)</p></li><li class="nested li"><p>When the associated view in in the active application (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingActiveInActiveApp" target="_top">NSTrackingActiveInActiveApp</a></code>)</p></li><li class="nested li"><p>At all times regardless of application activation (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingActiveAlways" target="_top">NSTrackingActiveAlways</a></code>)</p></li></ul></li><li class="li"><p><strong>Refinements of tracking-area behavior</strong></p><p>You can request that the first message be sent when the mouse cursor first leaves the tracking area (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingAssumeInside" target="_top">NSTrackingAssumeInside</a></code>); you can request the tracking area to be the same as the visible rectangle of the associated view (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingInVisibleRect" target="_top">NSTrackingInVisibleRect</a></code>); and you can request that mouse drags into and out of the tracking area generate <code>mouseEntered:</code> and <code>mouseExited:</code> events (<code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingEnabledDuringMouseDrag" target="_top">NSTrackingEnabledDuringMouseDrag</a></code>).</p><p>You are not limited to a single option from this set; you can perform a bitwise-OR operation to request multiple refinements on behavior.</p></li></ul><p>You initialize an allocated instance of <code>NSTrackingArea</code> with the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/occ/instm/NSTrackingArea/initWithRect:options:owner:userInfo:" target="_top">initWithRect:options:owner:userInfo:</a></code> method. After creating the object, you must associate it with a view by invoking the <code>NSView</code> method <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/addTrackingArea:" target="_top">addTrackingArea:</a></code>. You can create an <code>NSTrackingArea</code> instance and add it to a view at any point because (unlike the mouse-tracking API in earlier releases), successful creation does not depend on the view being added to a window. <span class="content_text">Listing 6-1</span> shows the creation and addition of an <code>NSTrackingArea</code> instance in a custom view’s <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/initWithFrame:" target="_top">initWithFrame:</a></code> method; in this case, the owning view is requesting that the Application Kit send <code>mouseEntered:</code>, <code>mouseExited:</code> and <code>mouseMoved:</code> messages whenever its window is the key window.</p><a name="//apple_ref/doc/uid/10000060i-CH8-SW6" title="Listing 6-1Initializing an NSTrackingArea instance"></a><p class="codesample"><strong>Listing 6-1&nbsp;&nbsp;</strong>Initializing an <code>NSTrackingArea</code> instance</p><div class="codesample"><table><tr><td scope="row"><pre>- (id)initWithFrame:(NSRect)frame {<span></span></pre></td></tr><tr><td scope="row"><pre>    self = [super initWithFrame:frame];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (self) {<span></span></pre></td></tr><tr><td scope="row"><pre>        trackingArea = [[NSTrackingArea alloc] initWithRect:eyeBox<span></span></pre></td></tr><tr><td scope="row"><pre>            options: (NSTrackingMouseEnteredAndExited | NSTrackingMouseMoved | NSTrackingActiveInKeyWindow )<span></span></pre></td></tr><tr><td scope="row"><pre>            owner:self userInfo:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>        [self addTrackingArea:trackingArea];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return self;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The last parameter of <code>initWithRect:options:owner:userInfo:</code> is a dictionary that you can use to pass arbitrary data to the recipient of mouse-tracking and cursor-update messages. The receiving object can access the dictionary by sending <code><a href="../../../Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/userData" target="_top">userData</a></code> to the <code><a href="../../../Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/cl/NSEvent" target="_top">NSEvent</a></code> object passed into the <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseEntered:" target="_top">mouseEntered:</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseExited:" target="_top">mouseExited:</a></code>, or <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/cursorUpdate:" target="_top">cursorUpdate:</a></code> method. Sending <code>userData</code> messages in <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseMoved:" target="_top">mouseMoved:</a></code> methods causes an assertion failure. (In the example in <span class="content_text">Listing 6-1</span>, the <em>userInfo</em> parameter is set to <code>nil</code>.)</p><p>Tracking rectangle bounds are inclusive for the top and left edges, but not for the bottom and right edges. Thus, if you have a unflipped view with a tracking rectangle covering its bounds, and the view’s frame has the geometry <code>frame.origin = (100, 100), frame.size = (200, 200)</code>, then the area for which the tracking rectangle is active is <code>frame.origin = (100, 101), frame.size = (199, 199</code>), in frame coordinates. </p><a name="//apple_ref/doc/uid/10000060i-CH8-SW3" title="Managing a Tracking-Area Object"></a><h2>Managing a Tracking-Area Object</h2><p>Because <code>NSTrackingArea</code> objects are owned by their views, the Application Kit can automatically recompute the tracking-area regions when the view is added or removed from a window or when the view changes position within its window. But in situations where the Application Kit cannot recompute an affected tracking area (or areas), it sends <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/updateTrackingAreas" target="_top">updateTrackingAreas</a></code> to the associated view, asking it to recompute and reset the areas. One such situation is when a change in view location affects the view’s visible rectangle (<code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/visibleRect" target="_top">visibleRect</a></code>)—unless the <code>NSTrackingArea</code> object for that view was created with the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingInVisibleRect" target="_top">NSTrackingInVisibleRect</a></code> option, in which case the Application Kit handles the recomputation. Note that the Application Kit sends <code>updateTrackingAreas</code> to every view whether it has a tracking area or not. </p><p>You can override the <code>updateTrackingAreas</code> method as shown in <span class="content_text">Listing 6-2</span> to remove the current tracking areas from their views, release them, and then add new <code>NSTrackingArea</code> objects to the same views with recomputed regions.</p><a name="//apple_ref/doc/uid/10000060i-CH8-SW2" title="Listing 6-2Resetting a tracking-area object"></a><p class="codesample"><strong>Listing 6-2&nbsp;&nbsp;</strong>Resetting a tracking-area object</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)updateTrackingAreas {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSRect eyeBox;<span></span></pre></td></tr><tr><td scope="row"><pre>    [self removeTrackingArea:trackingArea];<span></span></pre></td></tr><tr><td scope="row"><pre>    [trackingArea release];<span></span></pre></td></tr><tr><td scope="row"><pre>    eyeBox = [self resetEye];<span></span></pre></td></tr><tr><td scope="row"><pre>    trackingArea = [[NSTrackingArea alloc] initWithRect:eyeBox<span></span></pre></td></tr><tr><td scope="row"><pre>        options: (NSTrackingMouseEnteredAndExited | NSTrackingMouseMoved | NSTrackingActiveInKeyWindow)<span></span></pre></td></tr><tr><td scope="row"><pre>        owner:self userInfo:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    [self addTrackingArea:trackingArea];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>If your class is not a custom view class, you can register your class instance as an observer for the notification<code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/c/data/NSViewFrameDidChangeNotification" target="_top">NSViewFrameDidChangeNotification</a></code> and have it reestablish the tracking rectangles on receiving the notification.</p><a name="//apple_ref/doc/uid/10000060i-CH8-SW8" title="Responding to Mouse-Tracking Events"></a><h2>Responding to Mouse-Tracking Events</h2><p>The owner of an <code>NSTrackingArea</code> object created with the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingMouseEnteredAndExited" target="_top">NSTrackingMouseEnteredAndExited</a></code> option receives a <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseEntered:" target="_top">mouseEntered:</a></code> whenever the mouse cursor enters the region of a view defined by the tracking-area object; subsequently, it receives a  <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseExited:" target="_top">mouseExited:</a></code> messages when the mouse leaves that region.  If the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingMouseMoved" target="_top">NSTrackingMouseMoved</a></code> option is also specified for the tracking-area object, the owner also receives one or more  <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseMoved:" target="_top">mouseMoved:</a></code> messages between each <code>mouseEntered:</code> and <code>mouseExited:</code> message. You override the corresponding <code>NSResponder</code> methods to handle these messages to perform such tasks as highlighting the view, displaying a custom tool tip, or displaying related information in another view. </p><div class="importantbox"><a name="//apple_ref/doc/uid/10000060i-CH8-DontLinkElementID_10" title="Important:"></a><p><strong>Important:</strong>&nbsp;The proper order of mouse-entered and mouse-exited events received by tracking-area objects in an application cannot be guaranteed. For example, if you move the mouse cursor between from one tracking area to another tracking area and back, the order of events (as messages) could be: <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseEntered:" target="_top">mouseEntered:</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseEntered:" target="_top">mouseEntered:</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseExited:" target="_top">mouseExited:</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/mouseExited:" target="_top">mouseExited:</a></code>. </p><p></p></div><p>The tracking code in <span class="content_text">Listing 6-2</span> is used in making an “eyeball” follow the movement of the mouse pointer when it enters a tracking rectangle.  </p><a name="//apple_ref/doc/uid/10000060i-CH8-SW9" title="Listing 6-3Handling mouse-entered, mouse-moved, and mouse-exited events"></a><p class="codesample"><strong>Listing 6-3&nbsp;&nbsp;</strong>Handling mouse-entered, mouse-moved, and mouse-exited events</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)mouseEntered:(NSEvent *)theEvent {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSPoint eyeCenter = [self convertPoint:[theEvent locationInWindow] fromView:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    eyeBox = NSMakeRect((eyeCenter.x-10.0), (eyeCenter.y-10.0), 20.0, 20.0);<span></span></pre></td></tr><tr><td scope="row"><pre>    [self setNeedsDisplayInRect:eyeBox];<span></span></pre></td></tr><tr><td scope="row"><pre>    [self displayIfNeeded];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)mouseMoved:(NSEvent *)theEvent {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSPoint eyeCenter = [self convertPoint:[theEvent locationInWindow] fromView:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    eyeBox = NSMakeRect((eyeCenter.x-10.0), (eyeCenter.y-10.0), 20.0, 20.0);<span></span></pre></td></tr><tr><td scope="row"><pre>    [self setNeedsDisplayInRect:eyeBox];<span></span></pre></td></tr><tr><td scope="row"><pre>    [self displayIfNeeded];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)mouseExited:(NSEvent *)theEvent {<span></span></pre></td></tr><tr><td scope="row"><pre>    [self resetEye];<span></span></pre></td></tr><tr><td scope="row"><pre>    [self setNeedsDisplayInRect:eyeBox];<span></span></pre></td></tr><tr><td scope="row"><pre>    [self displayIfNeeded];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Just as you can with mouse-down and mouse-up messages, you can query the passed-in <code><a href="../../../Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/cl/NSEvent" target="_top">NSEvent</a></code> objects to get information related to the event.</p><a name="//apple_ref/doc/uid/10000060i-CH8-SW10" title="Managing Cursor-Update Events"></a><h2>Managing Cursor-Update Events</h2><p>One common use of <code>NSTrackingArea</code> objects is to change the cursor image over different types of views. Text, for example, typically requires an I-beam cursor. Many Application Kit classes provide cursor images appropriate to their view instances; you get this behavior “for free.“ However, you may want to specify a specific (or different) cursor image for instances of your custom view subclasses.</p><p>You change the cursor image for your view in an override of the <code>NSResponder</code> method <code><a href="../../../Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/cursorUpdate:" target="_top">cursorUpdate:</a></code>. To receive this message, you must create an <code>NSTrackingArea</code> object by invoking the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/occ/instm/NSTrackingArea/initWithRect:options:owner:userInfo:" target="_top">initWithRect:options:owner:userInfo:</a></code> initializer with an option of <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/c/econst/NSTrackingCursorUpdate" target="_top">NSTrackingCursorUpdate</a></code> (along with any other desired options). Then add the created object to a view with <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/addTrackingRect:owner:userData:assumeInside:" target="_top">addTrackingRect:owner:userData:assumeInside:</a></code>. Thereafter, the entry of the mouse into the tracking area generates an <code><a href="../../../Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/c/econst/NSCursorUpdate" target="_top">NSCursorUpdate</a></code> event; the <code>NSWindow</code> object handles this event by sending a <code>cursorUpdate:</code> message to the owner of the tracking area (which is typically the view itself). The implementation of <code>cursorUpdate:</code> should use the appropriate <code><a href="../../../Reference/ApplicationKit/Classes/NSCursor_Class/Reference/Reference.html#//apple_ref/occ/cl/NSCursor" target="_top">NSCursor</a></code> methods to set a standard or custom cursor image.</p><p>Cursor rectangles may overlap or be completely nested, one within the other. Arbitration of cursor updates follows the normal responder chain mechanism. The cursor rectangle of the view under the mouse cursor first receives the <code>cursorUpdate:</code> message. It may either display a cursor or pass the message up the responder chain, where a view with an overlapped cursor rectangle can then respond to the message.</p><p><span class="content_text">Listing 6-4</span> shows an implementation of <code>cursorUpdate:</code> that sets the cursor of the view to a cross-hair image. Note that it is not necessary to reset the cursor image back to what it was when the mouse exits the tracking area. The Application Kit handles this automatically for you by sending a <code>cursorUpdate:</code> message to the view over which the mouse cursor moves as it exits the cursor rectangle.</p><a name="//apple_ref/doc/uid/10000060i-CH8-SW5" title="Listing 6-4Handling a cursor-update event"></a><p class="codesample"><strong>Listing 6-4&nbsp;&nbsp;</strong>Handling a cursor-update event</p><div class="codesample"><table><tr><td scope="row"><pre>-(void)cursorUpdate:(NSEvent *)theEvent<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [[NSCursor crosshairCursor] set];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>If the responder owning the tracking-area object does not implement the <code>cursorUpdate:</code> method, the default implementation forwards the message up the responder chain. If the responder implements <code>cursorUpdate:</code> but decides not to handle the current event, it should invoke the superclass implementation of <code>cursorUpdate:</code>.</p><p>As with any other kind of <code>NSTrackingArea</code> object, you might occasionally need to recompute and recreate a tracking-area object used for cursor updates when the associated view has changes in its location or size. See <span class="content_text"><a href="TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW3">“Managing a Tracking-Area Object”</a></span> for more information.</p><a name="//apple_ref/doc/uid/10000060i-CH8-SW4" title="Compatibility Issues"></a><h2>Compatibility Issues</h2><p>Beginning with Mac OS X v10.5, the <code><a href="../../../Reference/NSTrackingArea_class/Reference/Reference.html#//apple_ref/occ/cl/NSTrackingArea" target="_top">NSTrackingArea</a></code> class and the related <code>NSView</code> methods <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/addTrackingArea:" target="_top">addTrackingArea:</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/removeTrackingArea:" target="_top">removeTrackingArea:</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/updateTrackingAreas" target="_top">updateTrackingAreas</a></code>, and <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/trackingAreas" target="_top">trackingAreas</a></code> replace the following methods of <code>NSView</code>, which are deprecated but supported for compatibility:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/addTrackingRect:owner:userData:assumeInside:" target="_top">addTrackingRect:owner:userData:assumeInside:</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/removeTrackingRect:" target="_top">removeTrackingRect:</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/addCursorRect:cursor:" target="_top">addCursorRect:cursor:</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/removeCursorRect:cursor:" target="_top">removeCursorRect:cursor:</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/discardCursorRects" target="_top">discardCursorRects</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/resetCursorRects" target="_top">resetCursorRects</a></code></p></td></tr></table></div><p>The <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/c/tdef/NSTrackingRectTag" target="_top">NSTrackingRectTag</a></code> type, returned by the <code>addTrackingRect:owner:userData:assumeInside:</code> and passed into the  <code>removeTrackingRect:</code> methods, is also deprecated. Internally this type is treated the same as <code>NSTrackingArea *</code>.</p><p>The underlying implementation for the deprecated methods is based on <code>NSTrackingArea</code>, resulting in the following implications:</p><ul class="ul"><li class="li"><p>An invocation of the <code>addTrackingRect:owner:userData:assumeInside:</code> method creates an <code>NSTrackingArea</code> object with the options <code>NSTrackingMouseEnteredAndExited</code> and <code>NSTrackingActiveAlways</code> set. It also includes the <code>NSTrackingAssumeInside</code> option if the last parameter of the function is <code>YES</code>. After creating the object, it adds it to the receiver (<code>addTrackingArea:</code>) and returns it as a tag.  </p></li><li class="li"><p>The <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/resetCursorRects" target="_top">resetCursorRects</a></code> method is invoked after <code><a href="../../../Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/updateTrackingAreas" target="_top">updateTrackingAreas</a></code>. </p></li></ul><p>In addition, the following <code>NSWindow</code> cursor-related methods are deprecated, but maintained for compatibility:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/discardCursorRects" target="_top">discardCursorRects</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/invalidateCursorRectsForView:" target="_top">invalidateCursorRectsForView:</a></code></p></td></tr><tr><td  scope="row"><p><code><a href="../../../Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/resetCursorRects" target="_top">resetCursorRects</a></code></p></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../HandlingKeyEvents/HandlingKeyEvents.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../HandlingTabletEvents/HandlingTabletEvents.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html%3Fid%3D10000060i-5.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html%3Fid%3D10000060i-5.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html%3Fid%3D10000060i-5.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
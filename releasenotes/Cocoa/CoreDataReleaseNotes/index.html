<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Core Data Release Notes</title>
	<meta name="Generator" content="Gutenberg"/>
	<meta name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta name = "Copyright" content="Copyright 2009 AppleInc. All Rights Reserved."/>
	<meta name="IndexTitle" content="Core Data Release Notes"/>
	<meta name="xcode-display" content="render"/>
	<meta id="RESOURCES" content="../../../documentation/Resources" />
	<link rel="stylesheet" type="text/css" href="../../../documentation/Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/pedia.js"></script>
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006503" title="Core Data Release Notes"></a>
        <a name="top"></a>
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../index.html#//apple_ref/doc/uid/TP30000872-TP30000416" target="_top">Cocoa</a> &gt; <a href="../idxDataManagement-date.html#//apple_ref/doc/uid/TP30000872-TP30000416-TP30000445">Data Management</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
                
        
        <a name="//apple_ref/doc/uid/TP40006503-DontLinkElementID_1" title="Core Data Release Notes"></a>
    <h1>Core Data Release Notes</h1>
    
        
            <p>This article summarizes some of the new features and changes in functionality in Core Data on Mac OS X v10.5 (Leopard). 
            </p>
        
    
    
        
<!-- This template is being used for both PDF and HTML. -->
<!-- TopicBook.pm currently relies on the element name bmini_toc. -->

    <h4>Contents:</h4>
    
    <p class="blockquote">

        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW2" target="_top">Taking Advantage of New Features: Linking</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW3" target="_top">Store Versioning and Migration</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW4" target="_top">Persistent Store API</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW5" target="_top">64-bit and Garbage Collection</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW6" target="_top">NSManagedObject</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW10" target="_top">Fetching</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW11" target="_top">Performance and Multi-Threading</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW12" target="_top">Performance Analysis</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW13" target="_top">Deleting Objects</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW14" target="_top">SQLite Store Options</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW15" target="_top">NSErrorMergePolicy and Optimistic Locking Records</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40006503-SW16" target="_top">Managed Object Context, save:, and commitEditing</a>
                
            <br/>
            
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40006503-SW2" title="Taking Advantage of New Features: Linking"></a>
            <h2>Taking Advantage of New Features: Linking</h2>
            <p>Core Data provides a number of major new features and enhancements on Mac OS X v10.5. You can take advantage of these on Mac OS X v10.5 while still maintaining backwards compatibility with Mac OS X v10.4 provided that you link your application appropriately.</p>
            <p>There are two ways you can build (on Mac OS X v10.5) a project that runs on both Mac OS X v10.4 and Mac OS X v10.5:
</p>
            <ol class="ol">
                <li class="li">
                    <p>Build a Tiger project against the Mac OS X v10.4 SDK.</p>
                </li>
                <li class="li">
                    <p>Build a Leopard project against the Mac OS X v10.5 SDK and set the "Mac OS X Deployment Target" to Mac OS X v10.4.</p>
                </li>
            </ol>
            <p>The first option is what most developers do by default. This means, however, that even on Mac OS X v10.5 the application runs as a Mac OS X v10.4 application and cannot use new features or exclusive bug fixes. To take advantage of the new features and bug fixes, you must build your project against the Mac OS X v10.5 SDK and set the "Mac OS X Deployment Target" to Mac OS X v10.4.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW3" title="Store Versioning and Migration"></a>
            <h2>Store Versioning and Migration</h2>
            <p>One of the major new Leopard features is an architecture to support versioning and migration—see <em><a href="../../../documentation/Cocoa/Conceptual/CoreDataVersioning/index.html#//apple_ref/doc/uid/TP40004399" target="_top">Core Data Model Versioning and Data Migration Programming Guide</a></em>
                 for more details.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW4" title="Persistent Store API"></a>
            <h2>Persistent Store API</h2>
            <p>One of the major new Leopard features is a way that you can create your own persistent store type. You use the new <code>NSPersistentStore</code>
                 and <code>NSAtomicStore</code>
                 classes—see <em><a href="../../../documentation/Cocoa/Conceptual/AtomicStore_Concepts/index.html#//apple_ref/doc/uid/TP40004521" target="_top">Atomic Store Programming Topics</a></em>
                 for more details. Persistent stores in general are discussed in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875" target="_top">Persistent Stores</a></span>
                 and <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingPersistentStores.html#//apple_ref/doc/uid/TP40006453" target="_top">Using Persistent Stores</a></span>
                .</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW5" title="64-bit and Garbage Collection"></a>
            <h2>64-bit and Garbage Collection</h2>
            <p>On Mac OS X v10.5, Core Data is fully 64-bit compliant and fully GC-compliant.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW6" title="NSManagedObject"></a>
            <h2>NSManagedObject</h2>
            <p>On Mac OS X v10.5, <code>NSManagedObject</code>
                 is a class cluster. In practice, this should typically make no difference to the code you write. It does mean, however, that you <em>must</em>
                 use the proper Cocoa patterns if you override an initializer—that is, you must ensure that you set <code>self</code>
                 to the return value from invocation of super’s implementation, as shown in the following example:</p>
            
                <div class="codesample"><table><tr><td scope="row"><pre>- (id)initWithEntity:(NSEntityDescription*)entityinsertIntoManagedObjectContext:(NSManagedObjectContext*)context<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (self = [super initWithEntity:entity insertIntoManagedObjectContext:context])<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        // perform additional initialization<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return self;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
            
            <p>
                <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/primitiveValueForKey:" target="_top">primitiveValueForKey:</a></code>
                 no longer supports unmodeled properties—there is no support for undefined keys.</p>
            <p>
                <code>NSManagedObject</code>
                 uses dynamic class generation to support the Objective-C 2 properties feature (see <span class="content_text"><a href="index.html#//apple_ref/doc/uid/TP40006503-SW1" target="_top">“Objective-C 2 Support”</a></span>
                ) by automatically creating a subclass of your class appropriate for your entity. This is also typically transparent to you, however whereas <code>NSManagedObject</code>
                ’s <code>class</code>
                 method returns your class, the Objective-C function <code><a href="../../../documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/object_getClass" target="_top">object_getClass</a></code>
                 returns the dynamically-generated class.</p>
            <p>As a class cluster, <code>NSManagedObject</code>
                's <code>alloc</code>
                /<code>initWithEntity:insertIntoManagedObjectContext:</code>
                 pair will always return an instance of correct class for the entity you pass as the parameter. The dynamically-generated subclass will be based on the class specified by the entity, so specifying a custom class in your model will supersede the class passed to <code>alloc</code>
                .</p>
            <a name="//apple_ref/doc/uid/TP40006503-SW7" title="Transformable Attributes"></a>
                <h3>Transformable Attributes</h3>
                <p>There's a new "transformable" type for <code>NSManagedObject</code>
                     attributes that allows you more easiliy support attribute types that Core Data doesn't support natively. You access an attribute as a non-standard type, but behind the scenes Core Data uses an instance of <code><a href="../../../documentation/Cocoa/Reference/Foundation/Classes/NSValueTransformer_Class/Reference/Reference.html#//apple_ref/occ/cl/NSValueTransformer" target="_top">NSValueTransformer</a></code>
                     to convert the attribute to and from an instance of <code>NSData</code>
                    . Core Data then stores the data instance to the persistent store.  </p>
                <p>If you don't specify a transformer, transformable attributes to use keyed archiving (<code><a href="../../../documentation/Cocoa/Reference/Foundation/Classes/NSValueTransformer_Class/Reference/Reference.html#//apple_ref/c/data/NSKeyedUnarchiveFromDataTransformerName" target="_top">NSKeyedUnarchiveFromDataTransformerName</a></code>
                    ). Note that this is a change from pre-release Leopard seeds which instead used serial archiving.</p>
                <p>For more details, see <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html#//apple_ref/doc/uid/TP40001919" target="_top">Non-Standard Attributes</a></span>
                    .</p>
            
            <a name="//apple_ref/doc/uid/TP40006503-SW1" title="Objective-C 2 Support"></a>
                <h3>Objective-C 2 Support</h3>
                <p>You can use Objective-C declared properties (see <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17" target="_top">Properties</a></span>
                    ) in custom subclasses of <code>NSManagedObject</code>
                    . </p>
                <a name="//apple_ref/doc/uid/TP40006503-SW8" title="Accessor methods"></a>
                    <h4>Accessor methods</h4>
                    <p>On Mac OS X v10.5, Core Data will dynamically generate extremely efficient public and primitive get and set attribute accessor methods and relationship accessor methods for managed object classes. These are described in detail in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/ModelObjects/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154" target="_top">Managed Object Accessor Methods</a></span>
                        , but this is a summary of the most important points:</p>
                    <ul class="spaceabove">
                        <li class="li">
                            <p>On Mac OS X v10.5, an instance of <code>NSManagedObject</code>
                                 always responds to accessor methods for all its modeled properties. Accessor methods are the recommended way of accessing properties of a managed object. </p>
                            <p>You are encouraged to use the Objective-C <code>dynamic</code>
                                <code>@property</code>
                                 declaration for compiler support and type checking, but this is not required to use this feature.</p>
                        </li>
                        <li class="li">
                            <p>If you do need to write custom accessor methods, instead of <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/primitiveValueForKey:" target="_top">primitiveValueForKey:</a></code>
                                 and <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/setPrimitiveValue:forKey:" target="_top">setPrimitiveValue:forKey:</a></code>
                                 you should use <code>primitive&lt;PropertyName></code>
                                 and <code>setPrimitive&lt;PropertyName>:</code>
                                 (the latter are considerably more efficient).</p>
                            <p>Note that on Mac OS X v10.5, <code>primitiveValueForKey:</code>
                                 no longer supports unmodeled keys. </p>
                        </li>
                        <li class="li">
                            <p>In addition to standard getter/setter methods, the accessors support the KVC mutable proxy names for to-many relationships.</p>
                        </li>
                    </ul>
                
                <a name="//apple_ref/doc/uid/TP40006503-SW9" title="Subclassing"></a>
                    <h4>Subclassing</h4>
                    <p>If you have two subclasses of <code>NSManagedObject</code>
                        , and the parent class implements a dynamic property, and its subclass (the grandchild of <code>NSManagedObject</code>
                        ) overrides the methods for the property, those overrides cannot call super.</p>
                    
                        <div class="codesample"><table><tr><td scope="row"><pre>@interface Parent : NSManagedObject<span></span></pre></td></tr><tr><td scope="row"><pre>@property(retain) NSString* foo;<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@implementation Parent<span></span></pre></td></tr><tr><td scope="row"><pre>@dynamic foo;<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@interface Child : Parent<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@implementation Child<span></span></pre></td></tr><tr><td scope="row"><pre>- (NSString*) foo<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    // this throws: selector not found<span></span></pre></td></tr><tr><td scope="row"><pre>    return super.foo;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div>	
                    
                
            
        
        <a name="//apple_ref/doc/uid/TP40006503-SW10" title="Fetching"></a>
            <h2>Fetching</h2>
            <p>When you create a fetch request, you can use <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFetchRequest/setRelationshipKeyPathsForPrefetching:" target="_top">setRelationshipKeyPathsForPrefetching:</a></code>
                 to specify key paths for relationships that should be fetched with the target entity. There are numerous other new configuration options for fetch requests—see <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFetchRequest" target="_top">NSFetchRequest</a></code>
                 for full details.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW11" title="Performance and Multi-Threading"></a>
            <h2>Performance and Multi-Threading</h2>
            <p>
                
                The new API for <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFetchRequest" target="_top">NSFetchRequest</a></code>
                 can be extremely helpful in working with data between threads. For example, you can configure a fetch request to return object IDs but exclude the row data (and update the row cache)—this can be useful if you're just going to pass those object IDs from a background thread to another thread. You can also pre-fetch relationships (which avoids the issue described in “Pre-fetching” in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468" target="_top">Performance</a></span>
                ) and pre-populate managed objects (that is, disable lazy initialization—which avoids the issue described in “Batch faulting” in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468" target="_top">Performance</a></span>
                ).</p>
            <p>On Mac OS X v10.5, <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/executeFetchRequest:error:" target="_top">executeFetchRequest:error:</a></code>
                 intrinsically scales its behavior appropriately for the hardware and work load. If necessary, the Core Data will create additional private threads to optimize fetching performance. You will not now improve absolute fetching speed by creating background threads (although it may still be appropriate to fetch in a background thread for enhanced responsiveness—that is, to prevent your application from blocking).</p>
            <p>Core Data now tries to optimize stack tear down (destruction of the persistent store coordinator, persistent stores, and so on). When a stack is torn down, the <code>dealloc</code>
                 method of the component objects may not be called. You should therefore not do resource cleanup (such as removal of temporary files) in a <code>dealloc</code>
                 method, instead you should invalidate resources when they are no longer needed (for a discussion of this subject as it pertains to garbage collection, see <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/GarbageCollection/Articles/gcAdoption.html#//apple_ref/doc/uid/TP40002457" target="_top">Adopting Garbage Collection</a></span>
                 in <em><a href="../../../documentation/Cocoa/Conceptual/GarbageCollection/index.html#//apple_ref/doc/uid/TP40002431" target="_top">Garbage Collection Programming Guide</a></em>
                ).
            </p>
            <p>Changes have been made to the merge policies to improve robustness and avoid resurrecting certain objects. On Mac OS X v10.4, there were issues with objects that have with relationships to deleted objects, when the delete rules would have cascaded had all the changes been made in the same context.  On Mac OS X v10.5, merge policies handle delete propagation cascades correctly even between processes with disparate updates.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW12" title="Performance Analysis"></a>
            <h2>Performance Analysis</h2>
            <p>Core Data now provides support for various <code>dtrace</code>
                 probes, which can also be used with Instruments—see “Analyzing Performance” in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468" target="_top">Performance</a></span>
                 for more information.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW13" title="Deleting Objects"></a>
            <h2>Deleting Objects</h2>
            <p>On Mac OS X v10.4, you could not call <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/deleteObject:" target="_top">deleteObject:</a></code>
                 in a set accessor method; on Mac OS X v10.5 you can.</p>
            <p>On Mac OS X v10.4, you could not delete an object if it was a fault that could not be fulfilled (that is, already deleted by another context or process). On Mac OS X v10.5, you can always delete faults to missing records.</p>
            <p>
                
                On Mac OS X v10.5, Core Data won’t let you save the object graph if 
                in the validation stage it contains a reference to a deleted object. For example, during a save operation Core Data will generate a deny error if a deleted object has a relationship to another object. This may happen especially if you haven’t specified a relationship without an inverse, or if after propagating deletions you add a reference to a deleted object. This is a change in behavior from Mac OS X v10.4 (Mac OS X v10.4 would not generate deny errors). Note that if you manually perform validation, you may need to call <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/processPendingChanges" target="_top">processPendingChanges</a></code>
                 first so that deletions and other coalesced operations cascade completely to purge any references to pending deletions from the graph.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW14" title="SQLite Store Options"></a>
            <h2>SQLite Store Options</h2>
            <p>On Mac OS X v10.4, there are only two settings to control the way in which data in a SQLite-based store is written to disk. In order to provide finer granularity of control over the tradeoff between performance and reliability, on Mac OS X v10.5 Core Data uses two independent pragmas to control these options.</p>
            <p>Note that the default <code>fsync</code>
                 behavior on Tiger was <code>fcntl(F_FULLFSYNC)</code>
                 but on Leopard it is now a standard <code>fsync</code>
                . (This affects all SQLite databases on Leopard, not just Core Data.) The pragma allows you to toggle this value. See “Configuring a SQLite Store’s Save Behavior” in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875" target="_top">Persistent Stores</a></span>
                 for a full discussion.</p>
            <p>In addition, the SQLite store now supports:</p>
            <ul class="ul">
                <li class="li">
                    <p>Additional SQL generation for predicates including ANY and IN operators and sub-queries;</p>
                </li>
                <li class="li">
                    <p>A time-out option on the persistent store coordinator.</p>
                </li>
            </ul>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW15" title="NSErrorMergePolicy and Optimistic Locking Records"></a>
            <h2>NSErrorMergePolicy and Optimistic Locking Records</h2>
            <p>
                
                The <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/c/data/NSErrorMergePolicy" target="_top">NSErrorMergePolicy</a></code>
                 policy causes a save to fail if there are any merge conflicts (see “Conflict Detection and Optimistic Locking” and “Conflict Resolution” in <span class="content_text"><a href="../../../documentation/Cocoa/Conceptual/CoreData/Articles/cdChangeManagement.html#//apple_ref/doc/uid/TP30001201" target="_top">Change Management</a></span>
                ). In the case of failure, the <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/save:" target="_top">save:</a></code>
                 method returns with an error with a user info dictionary that contains the key <code>@"conflictList"</code>
                ; the corresponding value is an array of conflict records. </p>
            <p>On Mac OS X v10.4, all relationship values in the records are managed objects; on Mac OS X v10.5, all relationship values in the records to be objectIDs. This change is backwards binary compatible, so this only affects compiled on Mac OS X v10.5 and using the <code>NSErrorMergePolicy</code>
                 to perform some kind of custom recovery.</p>
        
        <a name="//apple_ref/doc/uid/TP40006503-SW16" title="Managed Object Context, save:, and commitEditing"></a>
            <h2>Managed Object Context, save:, and commitEditing</h2>
            <p>
                
                The behavior of <code>NSManagedObjectContext</code>
                ’s <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/save:" target="_top">save:</a></code>
                 method has changed in Mac OS X v10.5. On Mac OS X v10.4, the <code>save:</code>
                 method erroneously caused bound text views to commit their pending edits ; on Mac OS X v10.5 this error has been fixed.</p>
            <p>This means that, for example, in Core Data non-document template based applications linked on or after Mac OS X v10.5, to replicate the behavior of a Mac OS X v10.4 application, the application delegate needs to send the managed object context a <code>commitEditing</code>
                 message when saving.</p>
            <p>The CoreData application template provided with Xcode includes an application delegate that implements some basic Core Data and application functionality, including a save action. The implementation of the <code>saveAction:</code>
                 method is simple—it just tells the delegate's managed object context to save. For user interfaces created with Cocoa Bindings and linked on Mac OS X v10.5, this has the effect of discarding editing before doing the actual save. For applications linked on Mac OS X v10.4, this behavior triggered a bug where bound text views would have their pending edits <em>committed</em>
                 instead of discarded. </p>
            <p>This has been fixed for applications linked on or after Mac OS X v10.5. However, this does mean that if you want pending edits in bound text views to be committed during a save you need to modify the <code>saveAction:</code>
                 method to first call <code>[[self managedObjectContext] commitEditing]</code>
                 (or use the <code><a href="../../../documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/commitEditingWithDelegate:didCommitSelector:contextInfo:" target="_top">commitEditingWithDelegate:didCommitSelector:contextInfo:</a></code>
                 variant) before saving. Otherwise the pending edits will be discarded.</p>
        
    


        <br/><br/> 
        
        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-12-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/releasenotes/Cocoa/CoreDataReleaseNotes/index.html%3Fid%3DTP40006503-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/releasenotes/Cocoa/CoreDataReleaseNotes/index.html%3Fid%3DTP40006503-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/releasenotes/Cocoa/CoreDataReleaseNotes/index.html%3Fid%3DTP40006503-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
</body>
</html>
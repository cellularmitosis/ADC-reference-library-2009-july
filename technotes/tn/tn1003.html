<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><!-- Template 03-24-01 --><!--Includes revisions to code listings--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN1003: On the Deferred Task Manager</title>    <meta name="keywords" content="Mac OS 8 Deferred Task manager DTInstall record">    <meta name="Description" content="Technical Note TN1003: This Technical Note highlights twopoints - interrupt latency, and task record ownership - thatmight be unclear after reading the chapter Deferred TaskManager in Inside Macintosh:Processes. This Note is intendedfor all developers who need to install a lengthy interrupttask capable of running with all interrupts enabled."><meta name="categories" content="Processes"><meta name="week-posted" content="Sep 25, 1995 - Oct 6, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002846" title="On the Deferred Task Manager"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxProcessManagement-date.html" target="_blank">Carbon > Process Management</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1003</div>
<div id="pageheadsub">On the Deferred Task Manager</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">         <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <BR>                            <BR>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext"><a href="#RTFToC1">About Deferred Task Latency</a><BR><BR>					<A href="#RTFToC2">About the Ownership of the DeferredTask Record</a><BR><BR>				<A HREF="#References">References</A><BR><BR>				<A HREF="#Changes">Change History</A><BR><BR>                  <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                 <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>            <!-- begin_intro_text --><p id="introtext">This Note highlights two points - interrupt latency, and task recordownership - that might be unclear after reading the chapter <a href="../../documentation/mac/Processes/Processes-120.html#HEADING120-0">"Deferred Task Manager" in Inside Macintosh:Processes.</A></p><p id="introtext">This Note is intended for all developers who need to install a lengthyinterrupt task capable of running with all interrupts enabled.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>&nbsp;[Oct 1 1995]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>                   <!-- begin_content --><br><a name="RTFToC1"></a><h2>About Deferred Task Latency</h2><P>There may be significant latency incurred between installing a deferredtask with <code>DTInstall</code> and when that task is performed. Thistime is not deterministic and cannot be controlled. Real-time responsecannot be guaranteed on Macintosh computers with or without the use ofdeferred tasks.</p> <P><A HREF="#top">Back to top</A></P> <A NAME="RTFToC2"></A><h2>About the Ownership of the DeferredTask Record</h2><P>When you install a deferred task with <code>DTInstall</code>, you aregiving your <code>DeferredTask</code> record to the system; the systemowns the record until the routine designated by the<code>DeferredTask</code> record's <code>dtAddr</code> field is entered.During the time the system owns a <code>DeferredTask</code> record, youmust not change any of the fields of that record. </p><p>Similarly, you must not depend on the contents of the record when it isowned by the system. The system is free to alter the record in anyfashion while it has ownership and restores the record to its originalstate prior to invoking the deferred task. You must not install a<code>DeferredTask</code> record which is already owned by the system.Finally, you must not use the dtReserved field for any purpose; itshould be set to zero prior to installing a deferred task with<code>DTInstall</code>.</p> <P><A HREF="#top">Back to top</A></P> <a name="References"></a><h2>References</h2><p><a href="../../documentation/mac/Processes/Processes-120.html#HEADING120-0"><cite>Inside Macintosh: Processes</cite>, Chapter 6, The Deferred Task Manager</A></p><p><a href="http://developer.apple.com/dev/techsupport/develop/issue13toc.shtml"><cite>develop</cite>, Issue 13, Asynchronous Routines on the Macintosh</A></p> <P><A NAME=Changes></A></P>                  <H2 ALIGN=left>Change History</H2>                          <TABLE BORDER=0 CELLPADDING=3 WIDTH=544>            <TR>               <td width=100 align=left>                  <P ALIGN=center>July-01-1992</P>               </TD>               <td align="left">                  <P>Originally written. Mostof the original information has been incorporated into <cite>Inside Macintosh:Processes.</cite></p>               </TD>            </TR>            <TR>               <td width=100 align=left>                  <P ALIGN=center>October-01-1995</P>               </TD>               <td align="left">                  <p>The references section has been updated. Information found in thechapter "Deferred Task Manager" in <cite>InsideMacintosh:Processes</cite>, has been deleted.</p>               </TD>            </TR>            </table> <P><A HREF="#top">Back to top</A></P>                                    <A NAME=Downloads></A>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (44K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn1003.pdf">Download</A></P>               </TD>            </TR>         </TABLE>         <BR><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1003.html%3Fid%3DDTS10002846-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1003.html%3Fid%3DDTS10002846-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1003.html%3Fid%3DDTS10002846-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
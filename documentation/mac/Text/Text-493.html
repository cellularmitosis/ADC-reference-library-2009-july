<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Locating Records in a Dictionary(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING493></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-492.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-494.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-483.html"><B>Chapter 8 - Dictionary Manager</B></A> / <A HREF="Text-489.html"><B>Using the Dictionary Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING493-0></A>
<H2><A NAME=MARKER-2-207></A>Locating Records in a Dictionary</H2>
 This section tells you how to use a dictionary--that is, how to extract records from it. You can obtain records from a dictionary in two general ways: by key (search string) and by index (position in the file).<P>
<A NAME=HEADING493-2></A>
<H3><A NAME=MARKER-9-71></A>Locating Records by Key</H3>
 <A NAME=MARKER-9-84></A>You can use the <CODE>FindRecordInDictionary</CODE> function to search for dictionary records that match specified keys. Matching keys is perhaps the most standard dictionary search method: the user types in a key, and you search the dictionary for the data associated with that key.<P>
 <A NAME=MARKER-2-73></A>You can provide a <I>requested attributes table</I> to narrow the search to only certain types of entries within the record that matches the search key. <A HREF=#MARKER-9-74>Figure 8-7</A> shows its format. You can request<P>
<UL>
<LI>only the entries with the specified attributes
<LI>the raw data of all the entries in the record without any attributes
<LI>everything in the record<P>
</UL>
<B>Figure 8-7  <A NAME=MARKER-9-74></A>The requested attributes table</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-04.jpg">
 For example, you can use the requested attributes table to select only the verbs or nouns in the dictionary that match a key. The currently defined attribute types and their constants are listed in <A HREF=Text-506.html#MARKER-9-8>Table 8-2 on page 8-27</A>.<P>
 Here is an example of how to use <CODE>FindRecordInDictionary</CODE>. Suppose the following entries are all the entries that match the key "hunch" in a dictionary record:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Raw data<TH>Attribute type<TH>Value<TH>Optional attribute data<TR>
<TD>'guess'<TD>kNoun<TD>-1<TD>&nbsp;<TR>
<TD>&nbsp;<TD>kVerb<TD>-2<TD>&nbsp;<TR>
<TD>'push'<TD>kVerb<TD>-2<TD>&nbsp;<TR>
<TD>&nbsp;<TD>kMyType1<TD>127<TD>MyType1Data<TR>
<TD>'bend'<TD>kMyType2<TD>126<TD>MyType2Data</TABLE>
<P>
 Now suppose you call <CODE>FindRecordInDictionary</CODE> and pass a pointer to a requested attributes table that specifies two types: <CODE>kNoun</CODE> (-1) and <CODE>kMyType1</CODE> (127). <CODE>FindRecordInDictionary</CODE> returns the data shown in <A HREF=#MARKER-9-1>Table 8-1</A>.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-1></A>Sample data returned by <CODE>FindRecordInDictionary</CODE> (Continued)</CAPTION>
<TH>Offset<TH>Value<TH>Explanation<TR>
<TD>00<TD>2<TD>Number of entries found<TR>
<TD colspan=3>(first entry starts here)<TR>
<TD>01<TD>8<TD>Length of entry<TR>
<TD>02<TD>5<TD>Length of raw data<TR>
<TD>03<TD>'guess'<TD>The raw data<TR>
<TD>08<TD>1<TD>Length of first attribute<TR>
<TD>09<TD>-1<TD>Attribute type ( = <CODE>kNoun</CODE>)<TR>
<TD colspan=3>(second entry starts here)<TR>
<TD>10<TD>18<TD>Length of entry<TR>
<TD>11<TD>4<TD>Length of raw data<TR>
<TD>12<TD>'push'<TD>The raw data<TR>
<TD>16<TD>12<TD>Length of first attribute<TR>
<TD>17<TD>127<TD>Attribute type ( = <CODE>kMyType1</CODE>)<TR>
<TD>18<TD>'MyType1Data'<TD>Optional data for first attribute<A NAME=MARKER-2-693></A></TABLE>
<P>
<A NAME=HEADING493-13></A>
<H3>Locating Records by Index</H3>
 <A NAME=MARKER-2-86></A>You can use the <CODE>FindRecordByIndexInDictionary</CODE> function to retrieve record data within a dictionary file by index rather than by matching key strings. In this way you can examine a specific record or sequence of records, to look for the information you need.<P>
 As with <CODE>FindRecordInDictionary</CODE>, you can provide a requested attributes table to narrow the search to certain types of entries. If you want to get all records with entries of a particular attribute type, you can call <CODE>FindRecordByIndexInDictionary</CODE> repeatedly. In <A HREF=#MARKER-9-76>Listing 8-4</A>, the routine loops through the entire dictionary, displaying the key and the raw data of the first entry of each record in turn. (The application routine <CODE>GetIndexedDataStringFromRecord</CODE> converts the raw data from each record into <BR>a string for display.)<P>
<B>Listing 8-4  <A NAME=MARKER-9-76></A>Displaying all records in a dictionary by index</B><P>
<PRE>
PROCEDURE ShowAllEntries (dictionaryReference: LONGINT);
VAR
   err:                       OSErr;
   dictionaryInfo:            DictionaryInformation;
   index:                     Integer;
   keyString, descriptionStr: Str255;
   entriesHandle:             Handle;
   txtDialog:                 DialogPtr;
   finalTick:                 LongInt;
BEGIN
   IF dictionaryReference &lt;&gt; 0 THEN BEGIN
      {first find out how many records there are}
      err := GetDictionaryInformation(gDictionaryReference, 
                                       dictionaryInfo);
      IF err = noErr THEN BEGIN
         entriesHandle := NewHandle(0);
         IF entriesHandle &lt;&gt; NIL THEN BEGIN
            descriptionStr := 'Displaying names in dictionary';
            txtDialog := ShowTextDialog(@descriptionStr[1], 
                                       LENGTH(descriptionStr));
            Delay(60, finalTick);
            FOR index := 1 TO dictionaryInfo.numberOfRecords
            DO BEGIN
               {return raw data for all entries of each record}
               err := FindRecordByIndexInDictionary 
                                       (dictionaryReference, 
                                       index - 1, NIL, 
                                       keyString, entriesHandle);
               {we only care about the first description string }
               GetIndexedDataStringFromRecord(entriesHandle, 1, 
                                             descriptionStr);

               {format as &quot;key: description&quot;}
               keyString := CONCAT(keyString, ': ');
               keyString := CONCAT(keyString, descriptionStr);
               SetTextDialog(txtDialog, @keyString[1], 
                              LENGTH(keyString));
               Delay(60, finalTick);
            END;
            CloseTextDialog(txtDialog);
            DisposeHandle(entriesHandle);
         END;
      END;
   END;
END;  {ShowAllEntries}  
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-492.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-494.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NewServiceWindow(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING462></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-461.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-463.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-409.html"><B>Chapter 7 - Text Services Manager</B></A> / <A HREF="Text-425.html"><B>Text Services Manager Reference</B></A><BR><DL><DD><A HREF="Text-458.html"><B>Text Services Manager Routines for Components</B></A> / <A HREF="Text-461.html"><B>Opening Floating Utility Windows</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING462-0></A>
<H3><A NAME=MARKER-9-309></A>NewServiceWindow</H3>
 <A NAME=MARKER-2-76></A>The <CODE>NewServiceWindow</CODE> function opens a floating utility window in the floating window service layer, in front of the current application. The text service component may use the window for interaction with the user or other purposes.<A NAME=MARKER-2-311></A><P>
<PRE>
FUNCTION NewServiceWindow (wStorage: Ptr; boundsRect: Rect; 
                           title: Str255; visible: Boolean; 
                           theProc: Integer; behind: WindowPtr; 
                           goAwayFlag: Boolean; 
                           ts: ComponentInstance; 
                           VAR window: WindowPtr): OSErr;
</PRE>
<DL>
<DT><CODE>wStorage</CODE>
<DD> A pointer to the location in memory of the window record. Do not allocate the window record on the stack. Always be sure to allocate the window in the heap, or else pass <CODE>NIL</CODE> for this parameter.
<DT><CODE>boundsRect</CODE>
<DD> A rectangle given in global coordinates that determines the size and location of the new floating window. This rectangle becomes the <CODE>portRect</CODE> field of the graphics port record (defined by the QuickDraw <CODE>GrafPort</CODE> data type) for this window.
<DT><CODE>title</CODE>
<DD> A Pascal string that contains the title of the window.
<DT><CODE>visible</CODE>
<DD> A Boolean value to determine whether the window is to be drawn. If <CODE>TRUE</CODE>, <CODE>NewServiceWindow</CODE> draws the window. First it calls the window definition procedure defined in the <CODE>theProc</CODE> parameter to draw the window frame. Then it generates an update event for the entire window contents.
<DT><CODE>theProc</CODE>
<DD> The window definition procedure for the floating window.
<DT><CODE>behind</CODE>
<DD> A window pointer (defined by the Window Manager <CODE>WindowPtr</CODE> data type) that determines the plane of the floating window. <CODE>NewServiceWindow</CODE> inserts the new window behind the window pointed to by this parameter. To put the new window behind all other windows, use <CODE>behind = NIL</CODE>. To place it in front of all other windows, <CODE>use behind = POINTER(-1)</CODE>.
<DT><CODE>goAwayFlag</CODE>
<DD> A Boolean value that determines whether the go-away region should be drawn in the window. If this parameter is <CODE>TRUE</CODE> and the window is frontmost (as specified by the <CODE>behind</CODE> parameter), <CODE>NewServiceWindow</CODE> draws a go-away region in the frame.
<DT><CODE>ts</CODE>
<DD> A component instance returned by a prior call to the Component Manager <CODE>OpenComponent</CODE> function. This value is stored in the <CODE>refcon</CODE> field of the window record; text service components should not change the value of the window's <CODE>refcon</CODE> field.
<DT><B>Client applications</B>
<DD>If you are a client application making this call, pass the Process Manager constant <CODE>kCurrentProcess</CODE> in this parameter so that events in the new window will be forwarded to you. After you have created the window, you can use its <CODE>refcon</CODE> field for private storage as usual.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DT><CODE>window</CODE>
<DD> A pointer to the newly allocated floating window.
</DL>
<A NAME=HEADING462-14></A>
<H5>DESCRIPTION</H5>
 This function calls the Window Manager <CODE>NewWindow</CODE> function. If a floating window is successfully allocated, <CODE>NewServiceWindow</CODE> returns a pointer to that window as the function result. Otherwise, it returns <CODE>NIL</CODE>.<P>
 A text service component can open multiple windows in this layer. When a text service component receives an event, it determines whether the event belongs to one of its text service component windows by calling <CODE>FindServiceWindow</CODE>.<P>
 If you are an application that uses <CODE>NewServiceWindow</CODE> to open a floating window, be sure to hide the floating window when you are switched out; that is, when another application's windows become active.<P>
<DL>
<DT><B>Balloon Help</B>
<DD>If you are writing a text service component and want the service window to have custom Balloon Help, place an <CODE>'hwin'</CODE> resource (with references to <CODE>'hcrt'</CODE> and <CODE>'STR#'</CODE> resources) in your component resource fork, with a name equal to the window title. The Text Services Manager will then open the resources automatically when needed. If you are writing a client application, you need not follow anything other than normal procedures to have Balloon Help.<EM></EM><A NAME=MARKER-2-312></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING462-20></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>No error<TR>
<TD>memFullErr<TD>Insufficient memory to open the window</TABLE>
</H5>
<A NAME=HEADING462-21></A>
<H5>SEE ALSO</H5>
 Window definition procedures and the <CODE>NewWindow</CODE> function are described in the Window Manager chapter of <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>.<P>
 Balloon Help is described in the Help Manager chapter of <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-461.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-463.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

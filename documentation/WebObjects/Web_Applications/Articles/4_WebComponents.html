<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Web Applications Programming Guide: Creating Web Components</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating Web Components"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40003271" title="Creating Web Components"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../DeveloperTools/index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../DeveloperTools/WebObjects-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000592" target="_top">WebObjects</a> &gt; <a href="../index.html" target="_top">WebObjects Web Applications Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="3_CreatingModels.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="5_AppAndSession.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40003271-SW1" title="Creating Web Components"></a><hr /><H1>Creating Web Components</H1><p>Web components are fundamental to how dynamic content works in WebObjects. Typically, you choose WebObjects if the information on your website changes frequently or varies based on some conditions. Examples of dynamic websites include online news, stores, polls and statistics. WebObjects is also ideal for any website that tracks user sessions and offers personal services such as authoring content and custom pages. Dynamic content can be tuned to user preferences and search criteria.</p><p>You use web components to represent webpages or partial webpages generated by your website. Web components are actually templates for generating HTML pages. Web components are constructed from static and dynamic elements. You use dynamic elements to bind HTML counterparts to variables and methods in your web component class. Some elements are abstract and are used just to control the generation of HTML—for example, conditionals and repetitions.</p><p>Although you can create a web application without using Enterprise Objects, typically, your website renders HTML pages that are populated with data obtained from your enterprise objects stored in a back-end database. Hence, web components behave similarly to controllers in the MVC design pattern by being the intermediary between the views (dynamic elements) and your models (enterprise objects). You can also use abstract elements and display groups—controllers that manipulate many enterprise objects—in interesting ways to create smart webpages.</p><p>Web components benefit from all the advantages of object-oriented systems. Web components are reusable, extensible, and maintainable. Web components can contain other web components–those that represent partial pages—as well as dynamic elements, static elements, and plain text. Any HTML tag can be added to a web component's HTML template.</p><p>Web components are folders you add to your Xcode project. Each folder contains an HTML, WOD, API and Java file. The HTML file represents the template, the WOD file contains the dynamic element bindings, the API file contains any bindings that your component exports, and the Java file is the class that implements controller logic. You add your controller logic—variables and methods—to the Java class using Xcode. You can edit the other files directly but typically, you use WebObjects Builder, a graphical editor, to design your web components. WebObjects Builder creates the files located in the web component folder.</p><p>This section describes how to reuse and extend web components from a Java programmer's perspective. For a complete guide on how to create web components graphically, read <em><a href="../../Conceptual/WO53_WOBuilderGuide/index.html#//apple_ref/doc/uid/TP40002340" target="_top">WebObjects Builder User Guide</a></em>.</p><p>If you use a back-end database to store your enterprise objects, you should create your EO Model first and then your Xcode project before you create web components. Read <span class="content_text"><a href="3_CreatingModels.html#//apple_ref/doc/uid/TP40003270-SW1">“Creating Enterprise Objects”</a></span> to create an EO model and custom enterprise objects. Read <span class="content_text"><a href="2_CreatingProjects.html#//apple_ref/doc/uid/TP40003269-SW3">“Creating Projects”</a></span> for how to create an Xcode project.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-DontLinkElementID_33">Main Component</a>
				
			<br/>
			
        
			
			
				<a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-DontLinkElementID_34">Java Files</a>
				
			<br/>
			
        
			
			
				<a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-SW7">HTML and WOD Files</a>
				
			<br/>
			
        
			
			
				<a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-DontLinkElementID_35">How Dynamic Elements Work</a>
				
			<br/>
			
        
			
			
				<a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-DontLinkElementID_36">Maintaining State</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_33" title="Main Component"></a><h2>Main Component</h2><p>By default, every WebObjects application includes a Main component. This component, initially empty, is the first page displayed to users unless you specify otherwise. It is the tunnel or login page for the rest of your application.</p><p>For example, if you select the Web Applications template when creating your Xcode project, <code>Main.wo</code> appears in the Web Components group as shown in <span class="content_text">Figure 1</span>. Double-click <code>Main.wo</code> to open the Main component in WebObjects Builder.</p><br/><div><a name="//apple_ref/doc/uid/TP40003271-SW10" title="Figure 1Web component files"></a><p><strong>Figure 1&nbsp;&nbsp;</strong>Web component files</p><img src = "../Art/xc_webcomponents.gif" alt = "Web component files" width="220" height="294"></div><br/><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_34" title="Java Files"></a><h2>Java Files</h2><p>Every web component contains a Java file that you use to add controller and business logic.</p><p>For example, if your Main component is a login page, it might contain a user and password field to allow the user to log in to your website, then you might have <code>username</code> and <code>password</code> variables to store the text that the user enters. You also need an action method when the user enters Return or clicks the Login button. You add these variables and methods to <code>Main.java</code> which is in the Web Components group, as shown in <span class="content_text"><a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-SW10">Figure 1</a></span>. Then you bind the dynamic elements, the WOTextField, WOPasswordField, and WOSubmitButton elements, to your variables and methods using WebObjects Builder.</p><p>Alternatively, you can add variables and methods to your component using WebObjects Builder which will edit the Java file for you.</p><a name="//apple_ref/doc/uid/TP40003271-SW7" title="HTML and WOD Files"></a><h2>HTML and WOD Files</h2><p>Occasionally, you might need to edit one of the web component files directly. However, since these files are created by WebObjects Builder, you should be aware of their file formats before doing so. If you change the format of these files, the component may not validate or open in WebObjects Builder.</p><p>For example, suppose you create a main component using WebObjects Builder that contains a text string, "The current time is", followed by a WOString element that displays the current time. In addition, you bind the WOString element to the <code>currentTime</code> method in your main component that returns the current time. This information is stored in the web component's HTML and WOD files that you can view in Xcode.</p><p>The HTML file shown in <span class="content_text">Listing 1</span>, contains a <code>WEBOBJECT</code> element that represents the location where the WOString inserts the value returned by the <code>currentTime</code> method. Notice that the element is defined as <code>&lt;WEBOBJECT NAME=String1>&lt;/WEBOBJECT></code>. There's a corresponding entry in the WOD file that uses the same name, <code>String1</code>.</p><a name="//apple_ref/doc/uid/TP40003271-SW3" title="Listing 1Sample HTML file"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>Sample HTML file</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;BODY><span></span></pre></td></tr><tr><td scope="row"><pre>    The current time is &lt;WEBOBJECT NAME=String1>&lt;/WEBOBJECT><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/BODY><span></span></pre></td></tr></table></div><p>The connection between the WOString element and the <code>currentTime</code> method is declared in the WOD file shown in <span class="content_text">Listing 2</span>. The entry has only one binding listed, the connection between the <code>value</code> attribute and the <code>currentTime</code> method. This method is called whenever the WOString element needs to display its value. The WOD file can contain other element settings that do not appear in WebObjects Builder.</p><a name="//apple_ref/doc/uid/TP40003271-SW4" title="Listing 2Sample WOD file"></a><p class="codesample"><strong>Listing 2&nbsp;&nbsp;</strong>Sample WOD file</p><div class="codesample"><table><tr><td scope="row"><pre>String1: WOString {<span></span></pre></td></tr><tr><td scope="row"><pre>    value = currentTime;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p></p><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_35" title="How Dynamic Elements Work"></a><h2>How Dynamic Elements Work</h2><p>When programming with web components, it helps to understand how dynamic elements work in the context of the request-response loop.</p><p>When you run a simple application that displays the current time on the main page as described in <span class="content_text"><a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-SW7">“HTML and WOD Files,”</a></span> the page displayed by the web browser replaces the WOString element you added to the Main component with the current time. If you reload the page, the time gets updated. WebObjects assembles the page dynamically during the request-response loop.</p><p>When you access the URL corresponding to your application in a web browser, the web server hands control to the <strong>WebObjects adaptor</strong>—a process that connects WebObjects application instances to web servers. This program goes through a couple of steps in generating the response:</p><ol class="ol"><li class="li"><p>Read the HTML file</p><p>Much like a regular web server, WebObjects first reads an HTML file.</p></li><li class="li"><p>Render WebObjects elements</p><p>Unlike a regular web server, WebObjects parses <code>WEBOBJECT</code> elements before handing the file to the web server.</p><p>When WebObjects encounters a <code>WEBOBJECT</code> element, it consults the WOD file for the corresponding web component. All the <code>WEBOBJECT</code> elements in the HTML file of a web component template are named, and each one is listed by its name in the WOD file as shown in <span class="content_text"><a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-SW4">Listing 2</a></span>.</p><p>Each type of WebObjects element has special logic for constructing the HTML code to return to the web server. Customization of this process is done with attributes defined by the web component’s developer. Each binding in a WOD file can be either static or dynamic. If a binding is static, the value supplied is used directly.</p><p>If a binding is dynamic—that is, an attribute is bound to a method or instance variable—WebObjects invokes the method or accesses the instance variable to obtain the value at runtime. For example, when the WOString element is evaluated, it invokes the method named in its <code>value</code> binding, <code><!--a-->currentTime<!--/a--></code>, to get the value to display. The implementation of WOString turns the NSTimestamp object into text that’s incorporated into the webpage returned to the web browser. Before returning the webpage to the browser, WebObjects converts the component’s HTML code shown in <span class="content_text">Listing 3</span> to a markup similar to the one shown in <span class="content_text">Listing 4</span>.</p><a name="//apple_ref/doc/uid/TP40003271-SW5" title="Listing 3HTML code interpreted by WebObjects"></a><br/><br/><p class="codesample"><strong>Listing 3&nbsp;&nbsp;</strong>HTML code interpreted by WebObjects</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;HTML><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;HEAD><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;META NAME="generator" CONTENT="WebObjects 5"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;TITLE>Untitled&lt;/TITLE><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/HEAD><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;BODY><span></span></pre></td></tr><tr><td scope="row"><pre>        The current time is &lt;WEBOBJECT NAME=String1>&lt;/WEBOBJECT><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/BODY><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/HTML><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003271-SW6" title="Listing 4HTML code WebObjects sends to web browser"></a><br/><br/><p class="codesample"><strong>Listing 4&nbsp;&nbsp;</strong>HTML code WebObjects sends to web browser</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;HTML><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;HEAD><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;META NAME="generator" CONTENT="WebObjects 5"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;TITLE>Untitled&lt;/TITLE><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/HEAD><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;BODY><span></span></pre></td></tr><tr><td scope="row"><pre>        The current time is 01:19:47 PM<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/BODY><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/HTML><span></span></pre></td></tr></table></div></li></ol><p>This process takes place each time a web browser requests the Main page. If you reload the page, the method is invoked again and a new time value is displayed.</p><p>For more information on the request-response loop, read <span class="content_text"><a href="1_Architecture.html#//apple_ref/doc/uid/TP40003268-SW10">“Request-Response Loop.”</a></span></p><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_36" title="Maintaining State"></a><h2>Maintaining State</h2><p>Understanding the connection between a web component’s HTML, WOD, and Java files is an important part of WebObjects development. Not only do you add variables and methods to your component to bind dynamic elements, but you can also add variables and methods to maintain state of a component.</p><p>When you add methods to a component in WebObjects Builder, you are actually editing the component’s Java source file. When you modify how the component looks by adding elements, you modify its HTML file. When you bind dynamic elements to your component variables, you modify its WOD file. </p><p>Typically, after using WebObjects Builder to define the major parts of a web component, you can add details by editing the HTML and Java files directly (you rarely need to edit a WOD file). To edit the HTML file of a web component in WebObjects Builder, simply use the Source mode—click the Source button on the toolbar to use the HTML editor. You can edit the Java file using Xcode.</p><p>When you deploy your application and users connect to your website via a web browser, webpages are created from web components as needed. In programming terms, web components are all subclasses of WOComponent and instantiated as needed. For example, when the user requests the main component described in <span class="content_text"><a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-SW7">“HTML and WOD Files,”</a></span> a Main instance is created. When it’s time for WebObjects to add the content for the WOString, it looks up the element’s <code>value</code> binding in the WOD file. The <code>value</code> binding is set to the <code>currentTime</code> method. Therefore, WebObjects sends <code><!--a-->currentTime<!--/a--></code> to the web component instance, which returns the current time.</p><p>An instance of a web component lives for at least two cycles of the request-response loop: In the first cycle the webpage is rendered, and in the second cycle the component determines which page to display next. If the page is not the same as the previous page, WebObjects creates an instance of the new component. The old component is then discarded or stored in a server cache to allow users to backtrack to previous pages. However, if the component to display is the same, the instance lives on. In this case, the previous version of the component is stored in the backtracking cache. Read <span class="content_text"><a href="8_Backtracking.html#//apple_ref/doc/uid/TP40003273-SW1">“Backtracking and Cache Management”</a></span> for more information on backtracking. </p><p>Another way to use variables and methods in your Java source file is to maintain other state—for example, tracking user actions as they interact with your application.</p><p></p><a name="//apple_ref/doc/uid/TP40003271-SW12" title="Example: Displaying the Page Count"></a><h3>Example: Displaying the Page Count</h3><p>The following sections show how to maintain state in your web component by implementing a simple web application that counts the number of times the main component is displayed by a single user. This example adds a counter and page refresh hyperlink to the main component. It uses the web component to maintain the state of the counter for the duration of the session.</p><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_37" title="Create Your Project"></a><h4>Create Your Project</h4><p>Create a simple web application as follows:</p><ol class="ol"><li class="li"><p>Launch Xcode and choose File > New Project.</p></li><li class="li"><p>Select the WebObjects Application template and click Next.</p></li><li class="li"><p>Click Next on all the remaining assistant panes to select all the default values.</p></li><li class="li"><p>Click Finish on the final pane to create the project.</p></li></ol><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_38" title="Add Variables to Your Component"></a><h4>Add Variables to Your Component</h4><p>First you add a variable and code to the Main component to increment a counter each time the page is displayed.</p><ol class="ol"><li class="li"><p>Open <code>Main.wo</code> in WebObjects Builder by double-clicking it in Xcode.</p></li><li class="li"><p>Choose Add Key from the Interface menu on the toolbar of the <code>Main.wo</code> window.</p></li><li class="li"><p>Add a key of type <code>int</code> named <code>loadCount</code> and click the Add button as shown in <span class="content_text">Figure 2</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40003271-SW13" title="Figure 2Adding a key"></a><p><strong>Figure 2&nbsp;&nbsp;</strong>Adding a key</p><img src = "../Art/wc_newkey.jpg" alt = "Adding a key" ></div></li><li class="li"><p>Examine the <code>Main.java</code> file in Xcode to confirm that the variable was added. Modify the code to initialize <code>loadCount</code> to <code>1</code> as shown in <span class="content_text">Listing 5</span>:</p><a name="//apple_ref/doc/uid/TP40003271-SW2" title="Listing 5Adding a variable"></a><br/><br/><p class="codesample"><strong>Listing 5&nbsp;&nbsp;</strong>Adding a variable</p><div class="codesample"><table><tr><td scope="row"><pre>public class Main extends WOComponent {<span></span></pre></td></tr><tr><td scope="row"><pre>        public int loadCount = 1;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public Main(WOContext context) {<span></span></pre></td></tr><tr><td scope="row"><pre>        super(context);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li></ol><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_39" title="Add Dynamic Elements to Your Component"></a><h4>Add Dynamic Elements to Your Component</h4><p>Next you use the variable to display the number of times the page is loaded. To display the load count in the webpage, you need to add a WOString element to the Main component using WebObjects Builder.</p><ol class="ol"><li class="li"><p>Add a label and a WOString element to <code>Main.wo</code>.</p><ol class="ol"><li class="ol ol"><p>Enter <code>This page has been viewed</code>.</p></li><li class="ol ol"><p>Add a space and a WOString element to the right of the label.</p></li><li class="ol ol"><p>Add a space and <code>times.</code> to the right of the WOString element.</p></li></ol></li><li class="li"><p>Drag from <code>loadCount</code> in the object browser to the WOString element to bind it to the <code>value</code> attribute of the WOString element as shown in <span class="content_text">Figure 3</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40003271-SW14" title="Figure 3Binding a WOString"></a><p><strong>Figure 3&nbsp;&nbsp;</strong>Binding a WOString</p><img src = "../Art/wc_bindingcount.jpg" alt = "Binding a WOString" ></div></li></ol><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_40" title="Add Methods to Your Component"></a><h4>Add Methods to Your Component</h4><p>Now, you need to add a way to reload the page using a hyperlink. </p><p>In WebObjects, regular hyperlinks, WOHyperlink elements, can call web component methods—methods defined in the component’s Java source file. These methods are called <strong>action methods</strong>. All action methods return a web component representing the next page. If an action method returns <code>null</code>, then the same page is redisplayed. Action methods are covered in greater detail in <span class="content_text"><a href="1_Architecture.html#//apple_ref/doc/uid/TP40003268-SW6">“Processing the Request.”</a></span></p><p>Follow these steps to add a <code>refreshTime</code> action method:</p><ol class="ol"><li class="li"><p>Add the action method.</p><p>Open the Main component template in WebObjects Builder and choose Add Action from the Interface menu on the toolbar.</p><ol class="ol"><li class="ol ol"><p>Name the action <code>refreshTime</code>.</p></li><li class="ol ol"><p>Select <code>null</code> from the Component pop-up menu as shown in <span class="content_text">Figure 4</span>.</p><p>The value returned by an action method represents the next page (web component) to be displayed. When you return <code>null</code>, the current page is redrawn.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40003271-SW15" title="Figure 4Adding an action"></a><p><strong>Figure 4&nbsp;&nbsp;</strong>Adding an action</p><img src = "../Art/wc_newaction.jpg" alt = "Adding an action" ></div></li><li class="ol ol"><p>Click Add.</p></li></ol></li><li class="li"><p>Add a hyperlink.</p><p>Position the cursor below the line where the load count is displayed.</p><p>Choose Dynamic > WOHyperlink.</p><p>By default, the text for a new link is <code>Hyperlink</code>. You can replace this by selecting the text and typing something more appropriate over it, such as <code>Refresh Time</code>.</p></li><li class="li"><p>Connect the <code>refreshTime</code> method to the WOHyperlink element.</p><p>Much like a WOString element, a WOHyperlink element has several attributes. Bind the <code><!--a-->refreshTime<!--/a--></code> method to the <code>action</code> attribute of WOHyperlink.</p><p>Drag from the <code>refreshTime</code> method in the Main list to the WOHyperlink element. When you release the mouse button, a pop-up list of attributes appears. Choose the <code>action</code> attribute to indicate that you want the <code>refreshTime</code> method called when the link is clicked.</p></li><li class="li"><p>Save <code>Main.wo</code>.</p></li></ol><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_41" title="Add Logic to Your Methods"></a><h4>Add Logic to Your Methods</h4><p>Finally, modify the <code>refreshTime</code> method using Xcode so that it increments the <code>loadCount</code> variable each time it is invoked as shown in <span class="content_text">Listing 6</span>.</p><a name="//apple_ref/doc/uid/TP40003271-SW11" title="Listing 6Implementing an action method"></a><p class="codesample"><strong>Listing 6&nbsp;&nbsp;</strong>Implementing an action method</p><div class="codesample"><table><tr><td scope="row"><pre>public WOComponent refreshTime() {<span></span></pre></td></tr><tr><td scope="row"><pre>    loadCount++;<span></span></pre></td></tr><tr><td scope="row"><pre>    return null;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003271-DontLinkElementID_42" title="How Maintaining State Works"></a><h3>How Maintaining State Works</h3><p>If you build and run the application created in <span class="content_text"><a href="4_WebComponents.html#//apple_ref/doc/uid/TP40003271-SW12">“Example: Displaying the Page Count,”</a></span> and click Refresh Time, the time and the load count are updated. The load count increments every time a specific user displays the page. This is accomplished using the Session object, an object that represents a connection between an application and a particular client. </p><p>Each time the user clicks the hyperlink WebObjects creates a Main object and associates it with your web browser window through a session object. Each time you interact with the application, by clicking Refresh Time, the same Main object is used. If you open another browser window and connect to the application again using the URL shown in Xcode’s Run pane, a separate instance of Main is created and associated with that window. From then on, you can work with both windows individually. As a matter of fact, not only is a new instance of Main created, a new Session object is created as well.</p><p>WebObjects determines that a new session needs to be created when the incoming URL does not contain a session ID. The first time you connect to the application using a URL like the one in <span class="content_text">Listing 7</span>, WebObjects creates a session and assigns it a session ID and other information. That information is added to the URL returned to your browser together with the webpage to be displayed (see <span class="content_text">Listing 8</span>). When you send another request from your browser—for example, by clicking Refresh Time—WebObjects uses the session ID encoded in the URL to locate the session that will process the request. This is the default mechanism WebObjects uses to keep track of the state of each user. </p><p>For more on managing state using application and session objects, read <span class="content_text"><a href="5_AppAndSession.html#//apple_ref/doc/uid/TP40003272-SW2">“Using the Application and Session Objects.”</a></span></p><a name="//apple_ref/doc/uid/TP40003271-SW9" title="Listing 7URL that causes the instantiation of a Session object"></a><p class="codesample"><strong>Listing 7&nbsp;&nbsp;</strong>URL that causes the instantiation of a Session object</p><div class="codesample"><table><tr><td scope="row"><pre>http://foo.com:49361/cgi-bin/WebObjects/WebApp<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003271-SW8" title="Listing 8URL with session ID"></a><p class="codesample"><strong>Listing 8&nbsp;&nbsp;</strong>URL with session ID</p><div class="codesample"><table><tr><td scope="row"><pre>http://foo.com:49361/cgi-bin/WebObjects/WebApp.woa/wo/whcV5sauLNtG8Tfh6xCuvM/0.1<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="3_CreatingModels.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="5_AppAndSession.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Web_Applications/Articles/4_WebComponents.html%3Fid%3DTP30001010-5.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Web_Applications/Articles/4_WebComponents.html%3Fid%3DTP30001010-5.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Web_Applications/Articles/4_WebComponents.html%3Fid%3DTP30001010-5.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

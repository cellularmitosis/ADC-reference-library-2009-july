<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Apple Help Programming Guide: Help Book Registration</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Help Book Registration"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000903-CH207" title="Help Book Registration"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../UserExperience/index.html#//apple_ref/doc/uid/TP30000440-TP30000437" target="_top">User Experience</a> &gt; <a href="../../../../UserExperience/HelpTechnologies-date.html#//apple_ref/doc/uid/TP30000440-TP30000437-TP30000520" target="_top">Help Technologies</a> &gt; <a href="../user_help_intro/user_assistance_intro.html#//apple_ref/doc/uid/TP30000903-CH204-CHDIDJFE">Apple Help Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../authoring_help/authoring_help_book.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../using_ah_functions/using_ah_functions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000903-CH207-CHDGHHDF" title="Help Book Registration"></a><h1>Help Book Registration</h1><p>This chapter describes how to make sure your completed help book is registered so that users—and your application—can access it. When a help book has been registered, it becomes available from the Library menu and from the application Help menu. If the help book is listed in the application’s <code>Info.plist</code> file, it is registered automatically when the user chooses application help from the Help menu or from a help button. You can also register your help book by calling the <code>AHRegisterHelpBook</code> function during application startup. If you are creating a tool or application for Mac OS X, you should read this chapter to learn how to add your help book to your software product.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="registering_help.html#//apple_ref/doc/uid/TP30000903-CH207-TPXREF101">Where to Place Your Help Book Folder</a>
				
			<br/>
			
        
			
			
				<a href="registering_help.html#//apple_ref/doc/uid/TP30000903-CH207-BHAHHAAE">How to Register Your Help Book</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000903-CH207-TPXREF101" title="Where to Place Your Help Book Folder"></a><h2>Where to Place Your Help Book Folder</h2><p>Help books, like other resources that are language or region-specific, are kept in localized resource directories, named for their language or region and identified by the <code>.lproj</code> extension. These localized resource directories are placed in the <code>Resources</code> directory of your software bundle. </p><p>For example, if your application is localized for English, French, and Japanese audiences, your application bundle should contain a localized resource directory for each language. You should place a help book folder with your application’s help content, localized for the target region, in each directory.</p><p><span class="content_text">Figure 3-1</span> shows the contents of an application bundle. The folder containing the English-language version of the application help book is located in the <code>English.lproj</code> subdirectory of the <code>Resources</code> directory. For more information on localization of resources, naming conventions for <code>.lproj</code> directories, and bundle structure, see <em><a href="../../../../CoreFoundation/Conceptual/CFBundles/index.html#//apple_ref/doc/uid/10000123i" target="_top">Bundle Programming Guide</a></em>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000903-CH207-CHDIEHFJ" title="Figure 3-1The location of an English-language help book in the application bundle."></a><p><strong>Figure 3-1&nbsp;&nbsp;</strong>The location of an English-language help book in the application bundle.</p><img src = "../Art/bundle_structure.jpg" alt = "The location of an English-language help book in the application bundle." ></div><br/><p>Apple strongly recommends that you place your help book in your software bundle. When your help book is bundled with your software, it is installed and moved along with your software. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH207-DontLinkElementID_19" title="Note"></a><p><strong>Note:</strong>&nbsp;It is not necessary to place the help book in an application bundle (<code>*.app</code>); any bundle will do. For example, printer drivers sometimes include help books. As long as you register the help book properly (see <span class="content_text"><a href="registering_help.html#//apple_ref/doc/uid/TP30000903-CH207-BHAHHAAE">“How to Register Your Help Book”</a></span>), Help Viewer can find it. </p></div><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH207-DontLinkElementID_20" title="Important:"></a><p><strong>Important:</strong>&nbsp;The <code>.help</code> bundles and the directories <code>~/Library/Documentation/Help</code> and <code>/Library/Documentation/Help</code> are reserved for use by Apple; use by third-party developers is not supported.</p><p></p></div><p>You can use the following procedure to install the help folder in the <code>.lproj</code> directory using Xcode:</p><ol class="ol"><li class="li"><p>In the main project window, select Resources in the Groups &amp; Files pane.</p></li><li class="li"><p>From the Action menu, choose Add > Existing files (<span class="content_text">Figure 3-2</span>).</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000903-CH207-SW1" title="Figure 3-2Adding help files in Xcode"></a><p><strong>Figure 3-2&nbsp;&nbsp;</strong>Adding help files in Xcode</p><img src = "../Art/add_file_xcode.jpg" alt = "Adding help files in Xcode" ></div></li><li class="li"><p>Select the help folder in the Add Files dialog and click Add.</p></li><li class="li"><p>Select the “Create Folder References for any added folders” radio button and click Add (<span class="content_text">Figure 3-3</span>).</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP30000903-CH207-DontLinkElementID_21" title="Important:"></a><p><strong>Important:</strong>&nbsp;If you neglect to perform this step, your help book will work as expected on your development system, but will not work when you transfer the help book to another system.</p><p></p></div><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000903-CH207-SW2" title="Figure 3-3Create folder references in Xcode"></a><p><strong>Figure 3-3&nbsp;&nbsp;</strong>Create folder references in Xcode</p><img src = "../Art/create_folder_ref_xcode.jpg" alt = "Creating folder references in Xcode" ></div></li></ol><a name="//apple_ref/doc/uid/TP30000903-CH207-BHAHHAAE" title="How to Register Your Help Book"></a><h2>How to Register Your Help Book</h2><p>For Cocoa and Java applications, you can take advantage of automatic help book registration by adding the help book name and location to your information property list (<code>Info.plist</code>) file. For Carbon applications, you must take the additional step of calling the Apple Help registration function, <code>AHRegisterHelpBook</code>.</p><p>You must register your help book to get the automatic help book support provided by the system. When you register your help book, the system creates a Help menu for your application, populates it with an application help item, and opens your help book when a user chooses this item. In addition, your help book must be registered for it to appear in the Library menu.</p><p>Cocoa and Java applications that use the Apple Help API to access their help book content must also call the <code>AHRegisterHelpBook</code> function before making any calls to other Apple Help functions.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH207-DontLinkElementID_22" title="Note"></a><p><strong>Note:</strong>&nbsp;Apple strongly recommends that you add your help book to your <code>Info.plist</code> file or call <code>AHRegisterHelpBook</code> to register your help book. If you do not do so, you are responsible for handling all access to your help book yourself, as described in the <em><a href="../../../Reference/Apple_Help/index.html#//apple_ref/doc/uid/TP30000169" target="_top">Apple Help Reference</a></em>.</p></div><a name="//apple_ref/doc/uid/TP30000903-CH207-BHAIEBDH" title="Editing the Information Property List File"></a><h3>Editing the Information Property List File</h3><p>To register a help book, you need to include the <code>CFBundleHelpBookFolder</code> and <code>CFBundleHelpBookName</code> keys in your <code>Info.plist</code> file. The <code>CFBundleHelpBookFolder</code> key identifies the help book folder; the value associated with this key should be a string specifying the folder name. For example, here is how you would enter the name of the SurfWriter help book folder:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>CFBundleHelpBookFolder&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>SurfWriter Help&lt;/string><span></span></pre></td></tr></table></div><p>The <code>CFBundleHelpBookName</code> key identifies the help book. The value associated with this key should be a string specifying the help book title, as defined by the <code>AppleTitle</code> tag in the title page of the book. For example, here is how you would enter the title of the SurfWriter Help book:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>CFBundleHelpBookName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>SurfWriter Help&lt;/string><span></span></pre></td></tr></table></div><p>If you are using Xcode to develop your software product, you can add these keys to your <code>Info.plist</code> file with the following steps:</p><ol class="ol"><li class="li"><p>From the main project window, select the name of the project in the Groups &amp; Files pane.</p></li><li class="li"><p>Select the <code>Info.plist</code> file in the right pane</p></li><li class="li"><p>Add the help book folder and help book name keys to the <code>Info.plist</code> file, as shown in  <span class="content_text">Figure 3-4</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30000903-CH207-CHDCBGBI" title="Figure 3-4Editing the info.plist file in Xcode"></a><p><strong>Figure 3-4&nbsp;&nbsp;</strong>Editing the info.plist file in Xcode</p><img src = "../Art/edit_plist_in_xcode.jpg" alt = "The Expert settings in the Targets pane of Project Builder" ></div></li></ol><p>If you have more than one help book, you can set the value of each of the <code>CFBundleHelpBookName</code> and <code>CFBundleHelpBookFolder</code> keys to an array of strings. However, if you use an array for the value of these two keys, you do not get automatic support for your application help item in the Help menu.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH207-DontLinkElementID_23" title="Note"></a><p><strong>Note:</strong>&nbsp;If you are localizing your help book, you should provide localized values for the <code>CFBundleHelpBookName</code> key. For each language or region you are targeting, add an entry for the <code>CFBundleHelpBookName</code> key to the <code>InfoPlist.strings</code> file in the appropriate <code>.lproj</code> directory. The value associated with the key should be a string specifying the localized help book title for the target language. For example, here is how you would specify the German localized help book title for SurfWriter Help in the <code>InfoPlist.strings</code> file in the <code>German.lproj</code> directory:</p><code>CFBundleHelpBookName = "SurfWriter Hilfe";</code></p>For more information on the <code>InfoPlist.strings</code> file and other localized strings files, see <em><a href="../../../../MacOSX/Conceptual/BPInternational/index.html#//apple_ref/doc/uid/10000171i" target="_top">Internationalization Programming Topics</a></em>. </p></div><p>Note that your <code>Info.plist</code> file must also contain a valid <code>CFBundleIdentifier</code> entry. For more information on application packaging and property lists, see <em><a href="../../../../CoreFoundation/Conceptual/CFBundles/index.html#//apple_ref/doc/uid/10000123i" target="_top">Bundle Programming Guide</a></em>.</p><a name="//apple_ref/doc/uid/TP30000903-CH207-TPXREF102" title="Using the Apple Help Registration Function"></a><h3>Using the Apple Help Registration Function</h3><p>Applications that call Apple Help functions must first call the Apple Help function <code><a href="../../../Reference/Apple_Help/Reference/reference.html#//apple_ref/c/func/AHRegisterHelpBook" target="_top">AHRegisterHelpBook</a></code> to register their help book. You would typically do this during application initialization. Once your application has called <code>AHRegisterHelpBook</code>, your help content is accessible through the use of the Apple Help functions. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000903-CH207-DontLinkElementID_24" title="Note"></a><p><strong>Note:</strong>&nbsp;Carbon applications must call <code>AHRegisterHelpBook</code> even if they do not use any other Apple Help. If a Carbon application does not call <code>AHRegisterHelpBook</code>, the application’s help book does not open when the user chooses the application help item from the Help menu. In addition, Help Viewer does not include the help book in the Library menu. (Cocoa applications that call the <code>NSHelpManager</code> equivalents to <code>AHLookupAnchor</code> and <code>AHSearch</code> (see <span class="content_text"><a href="../user_help_concepts/apple_help_concepts.html#//apple_ref/doc/uid/TP30000903-CH205-CHDBDCFJ">Table 1-1</a></span>) do not need to call the <code>AHRegisterHelpBook</code> function, as those methods register the help book if necessary.)</p></div><p><span class="content_text">Listing 3-1</span> shows an example of how to register a help book using <code>AHRegisterHelpBook</code>.</p><a name="//apple_ref/doc/uid/TP30000903-CH207-CHDCHFHJ" title="Listing 3-1Registering a help book with AHRegisterHelpBook"></a><p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong>Registering a help book with <code>AHRegisterHelpBook</code></p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus RegisterMyHelpBook(void)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    CFBundleRef myApplicationBundle;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFURLRef myBundleURL;<span></span></pre></td></tr><tr><td scope="row"><pre>    FSRef myBundleRef;<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    myApplicationBundle = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    myBundleURL = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    myApplicationBundle = CFBundleGetMainBundle();<span>// 1</span></pre></td></tr><tr><td scope="row"><pre>    if (myApplicationBundle == NULL) {err = fnfErr; goto bail;}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    myBundleURL = CFBundleCopyBundleURL(myApplicationBundle);<span>// 2</span></pre></td></tr><tr><td scope="row"><pre>    if (myBundleURL == NULL) {err = fnfErr; goto bail;}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (!CFURLGetFSRef(myBundleURL, &amp;myBundleRef)) err = fnfErr;<span>// 3</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (err == noErr) err = AHRegisterHelpBook(&amp;myBundleRef);<span>// 4</span></pre></td></tr><tr><td scope="row"><pre>    return err;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here is what the code in <span class="content_text">Listing 3-1</span> does:</p><ol class="ol"><li class="li"><p>Calls the Core Foundation function <code>CFBundleGetMainBundle</code> to retrieve a reference to the application’s main bundle.</p></li><li class="li"><p>Calls the Core Foundation function <code>CFBundleCopyBundleURL</code> to get the path to the application bundle.</p></li><li class="li"><p>Calls the Core Foundation function <code>CFURLGetFSRef</code> to convert the path obtained in Step 2 into a file system reference (an <code>FSRef</code> structure).</p></li><li class="li"><p>Calls <code>AHRegisterHelpBook</code>, passing the file system reference obtained in the last step. Apple Help finds the help book located in the bundle and caches the name and location of the help book. Apple Help chooses which localized version of the help book to use based upon the current language of the system.</p></li></ol>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../authoring_help/authoring_help_book.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../using_ah_functions/using_ah_functions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/registering_help/registering_help.html%3Fid%3DTP30000903-3.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/registering_help/registering_help.html%3Fid%3DTP30000903-3.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/registering_help/registering_help.html%3Fid%3DTP30000903-3.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<html>	<head>		<title>EODatabaseContext.Delegate (Java) </title>	</head><BODY bgcolor=#ffffff>		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path -->		<a href="../EOAccessTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <br>		<h1><font color="#000066"><a name="//apple_ref/java/intf/EODatabaseContext.Delegate">EODatabaseContext.Delegate</a></font></h1>		<br>		<blockquote>			<b>(informal interface)</b></blockquote>		<blockquote>			<dt><b>Package: </b>			<dd>com.webobjects.eoaccess</blockquote>		<hr size="4">		<h2>Interface Description</h2>		<hr alt="">		<p>An EODatabaseContext shares its delegate with its EODatabaseChannels. These delegate methods are actually sent from EODatabaseChannel, but they're defined in EODatabaseContext for ease of access:</p>		<dd><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextDidSelectObjects">databaseContextDidSelectObjects</a> 		<dd><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldSelectObjects">databaseContextShouldSelectObjects</a> 		<dd><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldUpdateCurrentSnapshot">databaseContextShouldUpdateCurrentSnapshot</a> 		<dd><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldUsePessimisticLock">databaseContextShouldUsePessimisticLock</a> 		<p>You can use the EODatabaseContext delegate methods to intervene when objects are created and when they're fetched from the database. This gives you more fine-grained control over such issues as how an object's primary key is generated ( <a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextNewPrimaryKey">databaseContextNewPrimaryKey</a>), how and if objects are locked ( <a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldLockObjectWithGlobalID">databaseContextShouldLockObjectWithGlobalID</a>), what fetch specification is used to fetch objects ( <a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldSelectObjects">databaseContextShouldSelectObjects</a>), how batch faulting is performed ( <a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchArrayFault">databaseContextShouldFetchArrayFault</a> and <a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchObjectFault">databaseContextShouldFetchObjectFault</a>), and so on. For more information, see the individual delegate method descriptions.</p>		<a name="CFBBBAJG"></a><br>		<br>		<h2>Instance Methods</h2>		<hr alt="">		<a name="databaseContextDidFetchObjectsdatabaseContext_didFetchObjects_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextDidFetchObjects">databaseContextDidFetchObjects</a></h3>		<p><code>public abstract void <b>databaseContextDidFetchObjects</b>( EODatabaseContext <em>aDatabaseContext</em>, NSArray <em>objects</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpecification</em>, com.webobjects.eocontrol.EOEditingContext <em>anEditingContext</em>)</code></p>		Invoked from objectsWithFetchSpecification after <em>aDatabaseContext</em> fetches <em>objects</em> using the criteria defined in <em>fetchSpecification</em> on behalf of <em>anEditingContext</em>. 		<p><b>See Also: </b><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchObjectFault">databaseContextShouldFetchObjectFault</a></p>		<hr width="25%" align="LEFT">		<a name="databaseContext_didSelectObjectsWithFetchSpecification_databaseChannel_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextDidSelectObjects">databaseContextDidSelectObjects</a></h3>		<p><code>public abstract void <b>databaseContextDidSelectObjects</b>( EODatabaseContext <em>aDatabaseContext</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpecification</em>, EODatabaseChannel <em>channel</em>)</code></p>		Invoked from the EODatabaseChannel method selectObjectsWithFetchSpecification to tell the delegate that <em>channel</em> selected the objects on behalf of <em>aDatabaseContext</em> as specified by <em>fetchSpecification</em>. 		<p><b>See Also: </b><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldSelectObjects">databaseContextShouldSelectObjects</a></p>		<hr width="25%" align="LEFT">		<a name="CJDDIBEE"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextFailedToFetchObject">databaseContextFailedToFetchObject</a></h3>		<p><code>public abstract boolean <b>databaseContextFailedToFetchObject</b>( EODatabaseContext <em>aDatabaseContext</em>, Object <em>object</em>, com.webobjects.eocontrol.EOGlobalID <em>globalID</em>)</code></p>		Sent when a to-one fault cannot find its data in the database. The <em>object</em> is a cleared fault identified by <em>globalID</em>. If this method returns <code>true</code>, <em>aDatabaseContext</em> assumes that the delegate has handled the situation to its satisfaction, in whatever way it deemed appropriate (for example, by displaying an alert panel or initializing a fault object with new values). If it returns <code>false</code> or if the delegate method is not implemented, <em>aDatabaseContext</em> tracks the globalID of the offending object. If the tracked globalID is in the list of updated objects when prepareForSaveWithCoordinator is invoked, <em>aDatabaseContext</em> throws an exception. 		<p>To get a list of the objects that failed to fetch, see the method missingObjectGlobalIDs.</p>		<hr width="25%" align="LEFT">		<a name="databaseContextNewPrimaryKeyForObjectdatabaseContext_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextNewPrimaryKey">databaseContextNewPrimaryKey</a></h3>		<p><code>public abstract NSDictionary <b>databaseContextNewPrimaryKey</b>( EODatabaseContext <em>aDatabaseContext</em>, Object <em>object</em>, EOEntity <em>anEntity</em>)</code></p>		Sent when a newly inserted enterprise <em>object</em> doesn't already have a primary key set. This delegate method can be used to implement custom primary key generation. If the delegate is not implemented or returns <code>null</code>, then <em>aDatabaseContext</em> will send an EOAdaptorChannel a primaryKeyForNewRowWithEntity message in an attempt to generate the key. 		<p>The dictionary you return from this delegate method contains the attribute or attributes (if <em>object</em> has a compound primary key) that make up <em>object</em>'s primary key.</p>		<hr width="25%" align="LEFT">		<a name="databaseContext_shouldFetchArrayFault_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchArrayFault">databaseContextShouldFetchArrayFault</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldFetchArrayFault</b>( EODatabaseContext <em>databaseContext</em>, Object <em>fault</em>)</code></p>		Invoked when a fault is fired, this delegate method lets you fine-tune the behavior of batch faulting. Delegates can fetch the array themselves (for example, by using the EODatabaseContext method batchFetchRelationship) and return <code>false</code>, or return <code>true</code> to allow the <em>databaseContext</em> to do the fetch itself. If <em>databaseContext</em> performs the fetch it will batch fault according to the batch count on the relationship being fetched. 		<p><b>See Also: </b><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchObjectFault">databaseContextShouldFetchObjectFault</a></p>		<hr width="25%" align="LEFT">		<a name="databaseContext_shouldFetchObjectFault_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchObjectFault">databaseContextShouldFetchObjectFault</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldFetchObjectFault</b>( EODatabaseContext <em>databaseContext</em>, Object <em>fault</em>)</code></p>		Invoked when a fault is fired, this delegate method lets you fine-tune the behavior of batch faulting. Delegates can fetch the fault themselves (for example, by using the EODatabaseContext method objectsWithFetchSpecification) and return <code>false</code>, or return <code>true</code> to allow <em>databaseContext</em> to perform the fetch. If <em>databaseContext</em> performs the fetch, it will batch fault according to the batch count on the entity being fetched. 		<p><b>See Also: </b><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchArrayFault">databaseContextShouldFetchArrayFault</a></p>		<hr width="25%" align="LEFT">		<br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldFetchObjects">databaseContextShouldFetchObjects</a></h3>		<p><code>public abstract NSArray <b>databaseContextShouldFetchObjects</b>( EODatabaseContext <em>aDatabaseContext</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpecification</em>, com.webobjects.eocontrol.EOEditingContext <em>anEditingContext</em>)</code></p>		Invoked from objectsWithFetchSpecification to give the delegate the opportunity to satisfy <em>anEditingContext</em>'s fetch request (using the criteria specified in <em>fetchSpecification</em>) from a local cache. If the delegate returns <code>null</code>, <em>aDatabaseContext</em> performs the fetch. Otherwise, the returned array is returned as the fetch result. 		<p><b>See Also: </b><a href="#//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextDidFetchObjects">databaseContextDidFetchObjects</a></p>		<hr width="25%" align="LEFT">		<br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldInvalidateObjectWithGlobalID">databaseContextShouldInvalidateObjectWithGlobalID</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldInvalidateObjectWithGlobalID</b>( EODatabaseContext <em>aDatabaseContext</em>, com.webobjects.eocontrol.EOGlobalID <em>globalID</em>, NSDictionary <em>snapshot</em>)</code></p>		Invoked from invalidateObjectsWithGlobalIDs. Delegate can cause <em>aDatabaseContext</em>'s object as identified by <em>globalID</em> to not be invalidated and that object's <em>snapshot</em> to not be cleared by returning <code>false</code>. 		<hr width="25%" align="LEFT">		<a name="databaseContextShouldLockObjectWithGlobalIDdatabaseContext_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldLockObjectWithGlobalID">databaseContextShouldLockObjectWithGlobalID</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldLockObjectWithGlobalID</b>( EODatabaseContext <em>aDatabaseContext</em>, com.webobjects.eocontrol.EOGlobalID <em>globalID</em>, NSDictionary <em>snapshot</em>)</code></p>		Invoked from lockObjectWithGlobalID. The delegate should return <code>true</code> if it wants the operation to proceed or <code>false</code> if it doesn't. Values from <em>snapshot</em> are used to create a qualifier from the attributes used for locking specified for the object's entity (that is, the object identified by <em>globalID</em>). Delegates can override the locking mechanism by implementing their own locking procedure and returning <code>false</code>. Methods that override the locking mechanism should throw an exception on the failure to lock exactly one object. 		<hr width="25%" align="LEFT">		<a name="databaseContextShouldRaiseExceptionForLockFailuredatabaseContext_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldRaiseExceptionForLockFailure">databaseContextShouldRaiseExceptionForLockFailure</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldRaiseExceptionForLockFailure</b>( EODatabaseContext <em>aDatabaseContext</em>, Throwable <em>exception</em>)</code></p>		Invoked from lockObjectWithGlobalID. This method allows the delegate to suppress an <em>exception</em> that has occurred during <em>aDatabaseContext</em>'s attempt to lock the object. 		<hr width="25%" align="LEFT">		<a name="databaseContext_shouldSelectObjectsWithFetchSpecification_databaseChannel_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldSelectObjects">databaseContextShouldSelectObjects</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldSelectObjects</b>( EODatabaseContext <em>aDatabaseContext</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpecification</em>, EODatabaseChannel <em>channel</em>)</code></p>		Invoked from the EODatabaseChannel method selectObjectsWithFetchSpecification to tell the delegate that <em>channel</em> will select objects on behalf of <em>aDatabaseContext</em> as specified by <em>fetchSpecification</em>. The delegate should not modify <em>fetchSpecification</em>'s qualifier or fetch order. If the delegate returns <code>true</code> the channel will go ahead and select the object; if the delegate returns <code>false</code> (possibly after issuing custom SQL against the adaptor) the <em>channel</em> will skip the select and return. 		<hr width="25%" align="LEFT">		<a name="databaseContext_shouldUpdateCurrentSnapshot_newSnapshot_globalID_channel_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldUpdateCurrentSnapshot">databaseContextShouldUpdateCurrentSnapshot</a></h3>		<p><code>public abstract NSDictionary <b>databaseContextShouldUpdateCurrentSnapshot</b>( EODatabaseContext <em>aDatabaseContext</em>, NSDictionary <em>currentSnapshot</em>, NSDictionary <em>newSnapshot</em>, com.webobjects.eocontrol.EOGlobalID <em>globalID</em>, EODatabaseChannel <em>channel</em>)</code></p>		Invoked from the EODatabaseChannel method fetchObject when <em>aDatabaseContext</em> already has a snapshot (<em>currentSnapshot</em>) for a row fetched from the database. This method is invoked without first checking whether the snapshots are equivalent (the check would be too expensive to do in the common case), so the receiver may be passed equivalent snapshots. The default behavior is to not update an older snapshot with <em>newSnapshot</em>. The delegate can override this behavior by returning a dictionary (possibly <em>newSnapshot</em>) that will be recorded as the updated snapshot. This results in <em>aDatabaseContext</em> broadcasting an <code>EOObjectsChangedInStoreNotification</code>, causing the object store hierarchy to invalidate existing objects (as identified by <em>globalID</em>) built from the obsolete snapshot. You can use this method to achieve the same effect as using a EOFetchSpecification with <b>setRefreshesRefetchedObjects:</b> set to <code>true</code>-that is, it allows you to overwrite in-memory object values with values from the database that may have been changed by someone else. 		<p>Returning <em>currentSnapshot</em> (or <code>null</code>) causes the <em>aDatabaseContext</em> to perform the default behavior (that is, not updating the older snapshot). </p>		<hr width="25%" align="LEFT">		<a name="databaseContext_shouldUsePessimisticLockWithFetchSpecification_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextShouldUsePessimisticLock">databaseContextShouldUsePessimisticLock</a></h3>		<p><code>public abstract boolean <b>databaseContextShouldUsePessimisticLock</b>( EODatabaseContext <em>databaseContext</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpecification</em>, EODatabaseChannel <em>channel</em>)</code></p>		Invoked from the EODatabaseChannel method selectObjectsWithFetchSpecification regardless of the update strategy specified on <em>channel</em>'s <em>databaseContext</em>. The delegate should not modify the qualifier or fetch order contained in <em>fetchSpecification</em>. If the delegate returns <code>true</code> the channel locks the rows being selected; if the delegate returns <code>false</code> the channel selects the rows without locking. 		<hr width="25%" align="LEFT">		<br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextWillFireArrayFaultForGlobalID">databaseContextWillFireArrayFaultForGlobalID</a></h3>		<p><code>public abstract void <b>databaseContextWillFireArrayFault</b>ForGlobalID( EODatabaseContext <em>dbContext</em>, com.webobjects.eocontrol.EOGlobalID <em>globalID</em>, EORelationship <em>relationship</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpec</em>, com.webobjects.eocontrol.EOEditingContext <em>edContext</em>)</code></p>		Invoked just before the Framework-generated fetch specification, <em>fetchSpec</em>, is used to clear the fault for the specified globalID and relationship.<br>		<table border="0" bgcolor="#E6E6E6">			<tr>				<td scope="row"><b>Note: </b>It is very dangerous to modify the fetch specification.</td>			</tr>		</table><br>		<hr width="25%" align="LEFT">		<br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextWillFireObjectFaultForGlobalID">databaseContextWillFireObjectFaultForGlobalID</a></h3>		<p><code>public abstract void <b>databaseContextWillFireObjectFault</b>ForGlobalID( EODatabaseContext <em>dbContext</em>, com.webobjects.eocontrol.EOGlobalID <em>globalID</em>, com.webobjects.eocontrol.EOFetchSpecification <em>fetchSpec</em>, com.webobjects.eocontrol.EOEditingContext <em>edContext</em>)</code></p>		Invoked just before the Framework-generated fetch specification, <em>fetchSpec</em>, is used to clear the fault for the specified globalID.<br>		<table border="0" bgcolor="#E6E6E6">			<tr>				<td scope="row"><b>Note: </b>It is very dangerous to modify the fetch specification.</td>			</tr>		</table><br>		<hr width="25%" align="LEFT">		<a name="databaseContextWillOrderAdaptorOperationsFromDatabaseOperationsdatabaseCo"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextWillOrderAdaptorOperations">databaseContextWillOrderAdaptorOperations</a></h3>		<p><code>public abstract NSArray <b>databaseContextWillOrderAdaptorOperations</b>( EODatabaseContext <em>aDatabaseContext</em>, NSArray <em>databaseOperations</em>)</code></p>		Sent from ownsGlobalID. If the delegate responds to this message, it must return an array of EOAdaptorOperations that <em>aDatabaseContext</em> can then submit to an EOAdaptorChannel for execution. The delegate can fabricate its own array by asking each of the <em>databaseOperations</em> for its list of EOAdaptorOperations, and adding them to the array which will eventually be returned by this method. The delegate is free to optimize, order, or transform the list in whatever way it deems necessary. This method is useful for applications that need a special ordering of the EOAdaptorOperations so as not to violate any database referential integrity constraints. 		<hr width="25%" align="LEFT">		<a name="databaseContext_willPerformAdaptorOperations_adaptorChannel_"></a><br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextWillPerformAdaptorOperations">databaseContextWillPerformAdaptorOperations</a></h3>		<p><code>public abstract NSArray <b>databaseContextWillPerformAdaptorOperations</b>( EODatabaseContext <em>aDatabaseContext</em>, NSArray <em>adaptorOperations</em>, EOAdaptorChannel <em>adaptorChannel</em>)</code></p>		Sent from ownsGlobalID. The delegate can return a new <em>adaptorOperations</em> array which <em>aDatabaseContext</em> will hand to <em>adaptorChannel</em> for execution in place of the old array of EOAdaptorOperations. This method is useful for applications that need a special ordering of the EOAdaptorOperations so as not to violate any database referential integrity constraints. 		<hr width="25%" align="LEFT">		<br>		<h3><a name="//apple_ref/java/intfm/EODatabaseContext.Delegate/databaseContextWillRunLoginPanelToOpenDatabaseChannel">databaseContextWillRunLoginPanelToOpenDatabaseChannel</a></h3>		<p><code>public abstract boolean <b>databaseContextWillRunLoginPanelToOpenDatabaseChannel</b>( EODatabaseContext <em>aDatabaseContext</em>, NSArray <em>adaptorOperations</em>, EOAdaptorChannel <em>adaptorChannel</em>)</code></p>		When <em>aDatabaseContext</em> is about to use a <em>channel</em>, it checks to see if the <em>channel</em>'s corresponding EOAdaptorChannel is open. If it isn't, it attempts to open the EOAdaptorChannel by sending it an openChannel message. If that doesn't succeed, <em>aDatabaseContext</em> asks the EOAdaptorChannel's adaptor to run the login panel and open the channel. <em>aDatabaseContext</em> gives the delegate a chance to intervene in this by invoking this delegate method. The delegate can return false to stop <em>aDatabaseContext</em> from running the login panel. In this case, the delegate is responsible for opening the channel. If the delegate returns true, <em>aDatabaseContext</em> runs the login panel. 		<hr width="25%" align="LEFT">		<br>		<p>&copy; 2001 Apple Computer, Inc. (Last Published April 13, 2001)</p>		<br>		<a href="../EOAccessTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <!-- start of footer -->		<!--#include virtual="/includes/framesetfooter" -->		<!-- end of footer -->	</body></html>
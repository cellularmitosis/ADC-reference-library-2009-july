<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>IOKernelDebugger</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/class/IOKernelDebugger" title="IOKernelDebugger"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOKernelDebugger">IOKernelDebugger</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top">IOService</a>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOKernelDebugger.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>Kernel debugger nub.
<!-- end abstract --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This object interfaces with the KDP
(kernel debugger protocol) module and dispatches KDP requests to its
target (provider). The target, designated as the debugger device, must 
implement a pair of handler functions that are called to handle KDP 
transmit and receive requests during a debugging session. Only a single
IOKernelDebugger in the system can be active at a given time. The
active IOKernelDebugger is the one that has an IOKDP object attached
as a client.
</p>
<p>The debugger device is usually a subclass of IOEthernetController.
However, any IOService can service an IOKernelDebugger client,
implement the two polled mode handlers, and transport the KDP
packets through a data channel. However, KDP assumes that the
debugger device is an Ethernet interface and therefore it will
always send, and expect to receive, an Ethernet frame. <!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/debugger/IOKernelDebugger*/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler)" target="_top">debugger</a></tt></dt>
<dd><p>Factory method that performs allocation and initialization
of an IOKernelDebugger object.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/free/void/()" target="_top">free</a></tt></dt>
<dd><p>Frees the IOKernelDebugger instance. </p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/handleClose/void/(IOService*,IOOptionBits)" target="_top">handleClose</a></tt></dt>
<dd><p>Handles a client close.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/handleIsOpen/bool/(constIOService*)" target="_top">handleIsOpen</a></tt></dt>
<dd><p>Queries whether a client has an open on this object.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/handleOpen/bool/(IOService*,IOOptionBits,void*)" target="_top">handleOpen</a></tt></dt>
<dd><p>Handles a client open.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/init/bool/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler)" target="_top">init</a></tt></dt>
<dd><p>Initializes an IOKernelDebugger instance.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/kdpReceiveDispatcher/void/(void*,UInt32*,UInt32)" target="_top">kdpReceiveDispatcher</a></tt></dt>
<dd><p>The KDP receive dispatch function.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/kdpTransmitDispatcher/void/(void*,UInt32)" target="_top">kdpTransmitDispatcher</a></tt></dt>
<dd><p>The KDP transmit dispatch function.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/lock/IODebuggerLockState/(IOService*)" target="_top">lock</a></tt></dt>
<dd><p>Takes the debugger lock conditionally.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/nullRxHandler/void/(IOService*,void*,UInt32*,UInt32)" target="_top">nullRxHandler</a></tt></dt>
<dd><p>Null receive handler.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/nullTxHandler/void/(IOService*,void*,UInt32)" target="_top">nullTxHandler</a></tt></dt>
<dd><p>Null transmit handler.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/powerStateDidChangeTo/IOReturn/(IOPMPowerFlags,UInt32,IOService*)" target="_top">powerStateDidChangeTo</a></tt></dt>
<dd><p>Handles notification that the network controller did change
power state.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOKernelDebugger/powerStateWillChangeTo/IOReturn/(IOPMPowerFlags,UInt32,IOService*)" target="_top">powerStateWillChangeTo</a></tt></dt>
<dd><p>Handles notification that the network controller will change
power state.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/registerHandler/void/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler)" target="_top">registerHandler</a></tt></dt>
<dd><p>Registers the target and the handler functions.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOKernelDebugger/unlock/void/(IODebuggerLockState)" target="_top">unlock</a></tt></dt>
<dd><p>Releases the debugger lock.
</p></dd>
</dl>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/debugger/IOKernelDebugger*/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler);   name=IOKernelDebugger::debugger --><a name="//apple_ref/cpp/clm/IOKernelDebugger/debugger/IOKernelDebugger*/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="debugger">debugger</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Factory method that performs allocation and initialization
of an IOKernelDebugger object.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="index.html#//apple_ref/cpp/cl/IOKernelDebugger" target="_top" class="type"><span class="type">IOKernelDebugger</span></a> <span class="type">*</span> <!-- a --><span class="function">debugger</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerTxHandler" target="_top" class="type"><span class="type">IODebuggerTxHandler</span></a> <span class="param">txHandler</span>, 
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerRxHandler" target="_top" class="type"><span class="type">IODebuggerRxHandler</span></a> <span class="param">rxHandler</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>target</code></dt>
<dd><p>The target object that implements the debugger handlers.</p></dd>
<dt><code>txHandler</code></dt>
<dd><p>The target's transmit handler. A pointer to a 'C' function.</p></dd>
<dt><code>rxHandler</code></dt>
<dd><p>The target's receive handler. A pointer to a 'C' function.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns an IOKernelDebugger instance on success, 0 otherwise. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/free/void/();   name=IOKernelDebugger::free --><a name="//apple_ref/cpp/instm/IOKernelDebugger/free/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="free">free</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Frees the IOKernelDebugger instance. <!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">free</span><!-- /a -->(); </pre>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/handleClose/void/(IOService*,IOOptionBits);   name=IOKernelDebugger::handleClose --><a name="//apple_ref/cpp/instm/IOKernelDebugger/handleClose/void/(IOService*,IOOptionBits)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleClose">handleClose</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Handles a client close.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">handleClose</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">forClient</span>, 
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>forClient</code></dt>
<dd><p>The client (IOKDP) requesting the close.</p></dd>
<dt><code>options</code></dt>
<dd><p>Options passed to the close() call. Not used.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method is called by IOService::close() to handle a
close from a client with the arbitration lock held.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/handleIsOpen/bool/(constIOService*);   name=IOKernelDebugger::handleIsOpen --><a name="//apple_ref/cpp/instm/IOKernelDebugger/handleIsOpen/bool/(constIOService*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleIsOpen">handleIsOpen</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Queries whether a client has an open on this object.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">handleIsOpen</span><!-- /a -->(
    <span class="keyword">const</span> <!-- a --><span class="var">IOService</span><!-- /a --> <span class="var">*</span> <!-- a --><span class="var">forClient</span><!-- /a --> ) <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if the specified client, or any client if none (0) is
specified, presently has an open on this object. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method is called by IOService::isOpen() with the
arbitration lock held.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/handleOpen/bool/(IOService*,IOOptionBits,void*);   name=IOKernelDebugger::handleOpen --><a name="//apple_ref/cpp/instm/IOKernelDebugger/handleOpen/bool/(IOService*,IOOptionBits,void*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleOpen">handleOpen</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Handles a client open.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">handleOpen</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">forClient</span>, 
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">arg</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>forClient</code></dt>
<dd><p>The client (IOKDP) requesting the open.</p></dd>
<dt><code>options</code></dt>
<dd><p>Options passed to the open() call. Not used.</p></dd>
<dt><code>arg</code></dt>
<dd><p>A family defined argument passed to the open() call. Not used.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true on success, false otherwise. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method is called by IOService::open() to handle an
open from a client (IOKDP) with the arbitration lock held.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/init/bool/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler);   name=IOKernelDebugger::init --><a name="//apple_ref/cpp/instm/IOKernelDebugger/init/bool/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="init">init</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Initializes an IOKernelDebugger instance.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <a href="../../../IOFWPhysicalAddressSpace_h/index.html#//apple_ref/c/func/init" target="_top" class="function"><span class="function">init</span></a>(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerTxHandler" target="_top" class="type"><span class="type">IODebuggerTxHandler</span></a> <span class="param">txHandler</span>, 
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerRxHandler" target="_top" class="type"><span class="type">IODebuggerRxHandler</span></a> <span class="param">rxHandler</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>target</code></dt>
<dd><p>The target object that implements the debugger handlers.</p></dd>
<dt><code>txHandler</code></dt>
<dd><p>The target's transmit handler. A pointer to a 'C' function.</p></dd>
<dt><code>rxHandler</code></dt>
<dd><p>The target's receive handler. A pointer to a 'C' function.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if the instance initialized successfully, false otherwise. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/kdpReceiveDispatcher/void/(void*,UInt32*,UInt32);   name=IOKernelDebugger::kdpReceiveDispatcher --><a name="//apple_ref/cpp/clm/IOKernelDebugger/kdpReceiveDispatcher/void/(void*,UInt32*,UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="kdpReceiveDispatcher">kdpReceiveDispatcher</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>The KDP receive dispatch function.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">kdpReceiveDispatcher</span><!-- /a -->(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buffer</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="type">*</span><span class="param">length</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">timeout</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>buffer</code></dt>
<dd><p>KDP receive buffer. The buffer allocated by KDP has room
for 1518 bytes. The receive handler must not overflow this buffer.</p></dd>
<dt><code>length</code></dt>
<dd><p>The amount of data received and placed into the buffer.
Set to 0 if a frame was not received during the poll interval.</p></dd>
<dt><code>timeout</code></dt>
<dd><p>The amount of time to poll in milliseconds while waiting
for a frame to arrive.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Field KDP receives requests, then dispatches the call to the
registered receiver handler.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/kdpTransmitDispatcher/void/(void*,UInt32);   name=IOKernelDebugger::kdpTransmitDispatcher --><a name="//apple_ref/cpp/clm/IOKernelDebugger/kdpTransmitDispatcher/void/(void*,UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="kdpTransmitDispatcher">kdpTransmitDispatcher</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>The KDP transmit dispatch function.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">kdpTransmitDispatcher</span><!-- /a -->(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buffer</span>,
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">length</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>buffer</code></dt>
<dd><p>KDP transmit buffer. This buffer contains a KDP frame to
be sent on the network.</p></dd>
<dt><code>length</code></dt>
<dd><p>The number of bytes in the transmit buffer.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Field KDP transmit requests, then dispatches the call to the
registered transmit handler.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/lock/IODebuggerLockState/(IOService*);   name=IOKernelDebugger::lock --><a name="//apple_ref/cpp/clm/IOKernelDebugger/lock/IODebuggerLockState/(IOService*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="lock">lock</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Takes the debugger lock conditionally.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="../../index.html#//apple_ref/c/tdef/IODebuggerLockState" target="_top" class="type"><span class="type">IODebuggerLockState</span></a> <!-- a --><span class="function">lock</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">target</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>target</code></dt>
<dd><p>The target or provider of an IOKernelDebugger object.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIODebuggerLockTaken if the lock was taken, or 0 otherwise. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method takes the debugger lock if the object given matches the
target registered by registerHandler().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/nullRxHandler/void/(IOService*,void*,UInt32*,UInt32);   name=IOKernelDebugger::nullRxHandler --><a name="//apple_ref/cpp/clm/IOKernelDebugger/nullRxHandler/void/(IOService*,void*,UInt32*,UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="nullRxHandler">nullRxHandler</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Null receive handler.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">nullRxHandler</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buffer</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="type">*</span><span class="param">length</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">timeout</span> ); </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This function is registered as the receive handler when an
IOKernelDebugger object surrenders its status as the active debugger nub.
Until another IOKernelDebugger object gets promoted, this function will
handle polled receive requests from KDP. This function does nothing
except to log a warning message. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/nullTxHandler/void/(IOService*,void*,UInt32);   name=IOKernelDebugger::nullTxHandler --><a name="//apple_ref/cpp/clm/IOKernelDebugger/nullTxHandler/void/(IOService*,void*,UInt32)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="nullTxHandler">nullTxHandler</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Null transmit handler.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">nullTxHandler</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">buffer</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">length</span> ); </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This function is registered as the transmit handler when an
IOKernelDebugger object surrenders its status as the active debugger nub.
Until another IOKernelDebugger object gets promoted, this function will
handle polled transmit requests from KDP. This function does nothing
useful. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/powerStateDidChangeTo/IOReturn/(IOPMPowerFlags,UInt32,IOService*);   name=IOKernelDebugger::powerStateDidChangeTo --><a name="//apple_ref/cpp/instm/IOKernelDebugger/powerStateDidChangeTo/IOReturn/(IOPMPowerFlags,UInt32,IOService*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="powerStateDidChangeTo">powerStateDidChangeTo</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Handles notification that the network controller did change
power state.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">powerStateDidChangeTo</span><!-- /a -->(
    <a href="../../../IOPM_h/index.html#//apple_ref/c/tdef/IOPMPowerFlags" target="_top" class="type"><span class="type">IOPMPowerFlags</span></a> <span class="param">flags</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">stateNumber</span>, 
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">policyMaker</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>flags</code></dt>
<dd><p>Description of the capability of the controller in the new power 
state.</p></dd>
<dt><code>stateNumber</code></dt>
<dd><p>The number of the state in the state array that the 
controller is switching to.</p></dd>
<dt><code>policyMaker</code></dt>
<dd><p>The policy maker that manages the controller's
power state.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the constant 3000000, to indicate a maximum of 3 seconds for the 
preparation to complete, and an acknowledgement delivered to the
policy maker. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>If the controller became usable, then the controller is 
re-enabled, and the controller's handlers are re-registered.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOKernelDebugger/powerStateWillChangeTo/IOReturn/(IOPMPowerFlags,UInt32,IOService*);   name=IOKernelDebugger::powerStateWillChangeTo --><a name="//apple_ref/cpp/instm/IOKernelDebugger/powerStateWillChangeTo/IOReturn/(IOPMPowerFlags,UInt32,IOService*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="powerStateWillChangeTo">powerStateWillChangeTo</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Handles notification that the network controller will change
power state.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">powerStateWillChangeTo</span><!-- /a -->(
    <a href="../../../IOPM_h/index.html#//apple_ref/c/tdef/IOPMPowerFlags" target="_top" class="type"><span class="type">IOPMPowerFlags</span></a> <span class="param">flags</span>, 
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">stateNumber</span>, 
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">policyMaker</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>flags</code></dt>
<dd><p>Describe the capability of the controller in the new power 
state.</p></dd>
<dt><code>stateNumber</code></dt>
<dd><p>The number of the state in the state array that the 
controller is switching to.</p></dd>
<dt><code>policyMaker</code></dt>
<dd><p>The policy maker that manages the controller's
power state.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the constant 3000000, to indicate a maximum of 3 seconds for the 
preparation to complete, and an acknowledgement delivered to the
policy maker. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>If the controller is about to become unusable, then the
controller's handlers are unregistered, and the controller is disabled.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/registerHandler/void/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler);   name=IOKernelDebugger::registerHandler --><a name="//apple_ref/cpp/clm/IOKernelDebugger/registerHandler/void/(IOService*,IODebuggerTxHandler,IODebuggerRxHandler)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="registerHandler">registerHandler</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Registers the target and the handler functions.
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">registerHandler</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerTxHandler" target="_top" class="type"><span class="type">IODebuggerTxHandler</span></a> <!-- a --><span class="type">txHandler</span><!-- /a --> = <span class="number">0</span>, 
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerRxHandler" target="_top" class="type"><span class="type">IODebuggerRxHandler</span></a> <!-- a --><span class="type">rxHandler</span><!-- /a --> = <span class="number">0</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>target</code></dt>
<dd><p>The target object.</p></dd>
<dt><code>txHandler</code></dt>
<dd><p>The transmit handler function. The null handler is
registered if the argument is zero.</p></dd>
<dt><code>rxHandler</code></dt>
<dd><p>The receive handler function. The null handler is
registered if the argument is zero.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method is called by handleOpen() and handleClose()
to register or unregister the target and its handler functions.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOKernelDebugger/unlock/void/(IODebuggerLockState);   name=IOKernelDebugger::unlock --><a name="//apple_ref/cpp/clm/IOKernelDebugger/unlock/void/(IODebuggerLockState)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="unlock">unlock</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Releases the debugger lock.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">unlock</span><!-- /a -->(
    <a href="../../index.html#//apple_ref/c/tdef/IODebuggerLockState" target="_top" class="type"><span class="type">IODebuggerLockState</span></a> <span class="param">state</span> ); </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This method releases the debugger lock if the kIODebuggerLockTaken flag is
set in the argument. 
<!-- end discussion -->
</p>
<p></p>
<h2>Member Data</h2>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOKernelDebugger/_reserved;   name=IOKernelDebugger::_reserved --><a name="//apple_ref/cpp/data/IOKernelDebugger/_reserved"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="_reserved">_reserved</a></h3>
</td></tr></table>
<hr>
<p></p>
<b>See Also:</b><blockquote><dl>
<dt>
<a href="index.html#//apple_ref/doc/title:data/IOKernelDebugger/reserved" target="_top"><p>reserved</p></a>
</dt>
<dd></dd>
</dl></blockquote>
<pre><tt>protected</tt>
<br><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> <span class="type">*</span> <a href="../../../IOHIDElement_h/index.html#//apple_ref/c/data/_reserved" target="_top" class="var"><span class="var">_reserved</span></a>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Reserved for future use.  (Internal use only)<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=title:data;  uid=//apple_ref/doc/title:data/IOKernelDebugger/reserved;   name=IOKernelDebugger::reserved --><a name="//apple_ref/doc/title:data/IOKernelDebugger/reserved"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="reserved">reserved</a></h3>
</td></tr></table>
<hr>
<p></p>
<b>See Also:</b><blockquote><dl>
<dt>
<a href="index.html#//apple_ref/cpp/data/IOKernelDebugger/_reserved" target="_top"><p>_reserved</p></a>
</dt>
<dd></dd>
</dl></blockquote>
<pre><tt>protected</tt>
<br><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> <span class="type">*</span> <a href="../../../IOHIDElement_h/index.html#//apple_ref/c/data/_reserved" target="_top" class="var"><span class="var">_reserved</span></a>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Reserved for future use.  (Internal use only)<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOKernelDebugger_h/Classes/IOKernelDebugger/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOKernelDebugger_h/Classes/IOKernelDebugger/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOKernelDebugger_h/Classes/IOKernelDebugger/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=cl; uid=//apple_ref/cpp/cl/IOKernelDebugger;  name=IOKernelDebugger--><a name="//apple_ref/cpp/cl/IOKernelDebugger"></a>
</body>
</html>

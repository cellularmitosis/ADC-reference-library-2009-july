<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_CreateCommand(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_CreateCommand" title="Mac OS X Developer Tools
 Manual Page for Tcl_CreateCommand(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_CreateCommand" title="Mac OS X Developer Tools
 Manual Page for Tcl_CreateCommand(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_CreateCommand"; name=Tcl_CreateCommand(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_CreateCommand(3)                       Tcl Library Procedures                       Tcl_CreateCommand(3)



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_CreateCommand - implement new commands in C

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Command
       <b>Tcl_CreateCommand</b>(<u>interp,</u> <u>cmdName,</u> <u>proc,</u> <u>clientData,</u> <u>deleteProc</u>)

<b>ARGUMENTS</b>
       Tcl_Interp          <u>*interp</u>           (in)      Interpreter in which to create new command.           |

       CONST char          <u>*cmd-</u>                                                                             |
       <u>Name</u>          (in)                                                            |                       |
                                                       Name of command.

       Tcl_CmdProc         <u>*proc</u>             (in)      Implementation of new command:  <u>proc</u> will  be  called
                                                       whenever <u>cmdName</u> is invoked as a command.

       ClientData          <u>clientData</u>        (in)      Arbitrary   one-word   value  to  pass  to  <u>proc</u>  and
                                                       <u>deleteProc</u>.

       Tcl_CmdDeleteProc   <u>*deleteProc</u>       (in)      Procedure to call before <u>cmdName</u> is deleted from  the
                                                       interpreter; allows for command-specific cleanup.  If
                                                       NULL, then no procedure is called before the  command
                                                       is deleted.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       <b>Tcl_CreateCommand</b>  defines  a  new  command in <u>interp</u> and associates it with procedure <u>proc</u> such that
       whenever <u>cmdName</u> is invoked as a Tcl command (via a call to <b>Tcl_Eval</b>) the Tcl interpreter  will  call
       <u>proc</u> to process the command.  It differs from <b>Tcl_CreateObjCommand</b> in that a new string-based command
       is defined; that is, a command procedure is defined that takes an array of argument  strings  instead
       of  objects.  The object-based command procedures registered by <b>Tcl_CreateObjCommand</b> can execute sig-<font color="#ffffff" class="whiteout">nificantly&nbsp;significantly</font>
       nificantly faster than the string-based command procedures defined  by  <b>Tcl_CreateCommand</b>.   This  is
       because  they  take  Tcl objects as arguments and those objects can retain an internal representation
       that can be manipulated more efficiently.  Also, Tcl's interpreter now uses objects  internally.   In
       order  to  invoke  a string-based command procedure registered by <b>Tcl_CreateCommand</b>, it must generate
       and fetch a string representation from each argument object before the call  and  create  a  new  Tcl
       object to hold the string result returned by the string-based command procedure.  New commands should
       be defined using <b>Tcl_CreateObjCommand</b>.  We support <b>Tcl_CreateCommand</b> for backwards compatibility.

       The procedures <b>Tcl_DeleteCommand</b>, <b>Tcl_GetCommandInfo</b>, and <b>Tcl_SetCommandInfo</b> are used in  conjunction
       with <b>Tcl_CreateCommand</b>.

       <b>Tcl_CreateCommand</b>  will  delete  an  existing  command <u>cmdName</u>, if one is already associated with the
       interpreter.  It returns a token that may be used to refer to the  command  in  subsequent  calls  to
       <b>Tcl_GetCommandName</b>.   If  <u>cmdName</u>  contains any <b>::</b> namespace qualifiers, then the command is added to
       the specified namespace; otherwise the command is added to the global namespace.   If  <b>Tcl_CreateCom</b>-<font color="#ffffff" class="whiteout">mand&nbsp;Tcl_CreateCommand</font>
       <b>mand</b>  is called for an interpreter that is in the process of being deleted, then it does not create a
       new command and it returns NULL.  <u>Proc</u> should have arguments and result that match the type  <b>Tcl_Cmd</b>-<font color="#ffffff" class="whiteout">Proc:&nbsp;Tcl_CmdProc:</font>
       <b>Proc</b>:
              typedef int Tcl_CmdProc(
                ClientData <u>clientData</u>,
                Tcl_Interp *<u>interp</u>,
                int <u>argc</u>,
                CONST char *<u>argv</u>[]);
       When <u>proc</u> is invoked the <u>clientData</u> and <u>interp</u> parameters will be copies of the <u>clientData</u> and <u>interp</u>
       arguments given to <b>Tcl_CreateCommand</b>.  Typically, <u>clientData</u> points to an  application-specific  data
       structure  that  describes  what to do when the command procedure is invoked.  <u>Argc</u> and <u>argv</u> describe
       the arguments to the command, <u>argc</u> giving the number of arguments (including the  command  name)  and
       <u>argv</u>  giving  the values of the arguments as strings.  The <u>argv</u> array will contain <u>argc</u>+1 values; the
       first <u>argc</u> values point to the argument strings, and the last value is NULL.  Note that the  argument |
       strings  should  not  be  modified  as they may point to constant strings or may be shared with other |
       parts of the interpreter.

       Note that the argument strings are encoded in normalized UTF-8 since version 8.1 of Tcl.              |

       <u>Proc</u> must return an integer code that is either <b>TCL_OK</b>, <b>TCL_ERROR</b>, <b>TCL_RETURN</b>, <b>TCL_BREAK</b>, or <b>TCL_CON</b>-<font color="#ffffff" class="whiteout">TINUE.&nbsp;TCL_CONTINUE.</font>
       <b>TINUE</b>.   See  the  Tcl  overview man page for details on what these codes mean.  Most normal commands
       will only return <b>TCL_OK</b> or <b>TCL_ERROR</b>.  In addition, <u>proc</u> must set the interpreter result to point  to
       a  string value; in the case of a <b>TCL_OK</b> return code this gives the result of the command, and in the
       case of <b>TCL_ERROR</b> it gives an error message.  The <b>Tcl_SetResult</b> procedure provides an easy  interface
       for  setting  the return value;  for complete details on how the the interpreter result field is man-<font color="#ffffff" class="whiteout">aged,&nbsp;managed,</font>
       aged, see the <b>Tcl_Interp</b> man page.  Before invoking a command procedure,  <b>Tcl_Eval</b>  sets  the  inter-<font color="#ffffff" class="whiteout">preter&nbsp;interpreter</font>
       preter  result  to  point  to an empty string, so simple commands can return an empty result by doing
       nothing at all.

       The contents of the <u>argv</u> array belong to Tcl and are not guaranteed to  persist  once  <u>proc</u>  returns:
       <u>proc</u>  should  not  modify them, nor should it set the interpreter result to point anywhere within the
       <u>argv</u> values.  Call <b>Tcl_SetResult</b> with status <b>TCL_VOLATILE</b> if you want to return  something  from  the
       <u>argv</u> array.

       <u>DeleteProc</u>  will  be  invoked  when  (if)  <u>cmdName</u>  is  deleted.   This  can  occur through a call to
       <b>Tcl_DeleteCommand</b> or <b>Tcl_DeleteInterp</b>, or by replacing <u>cmdName</u> in another call to  <b>Tcl_CreateCommand</b>.
       <u>DeleteProc</u>  is  invoked  before  the  command is deleted, and gives the application an opportunity to
       release any structures associated with the command.  <u>DeleteProc</u> should have arguments and result that
       match the type <b>Tcl_CmdDeleteProc</b>:
              typedef void Tcl_CmdDeleteProc(ClientData <u>clientData</u>);
       The <u>clientData</u> argument will be the same as the <u>clientData</u> argument passed to <b>Tcl_CreateCommand</b>.



<b>SEE</b> <b>ALSO</b>
       Tcl_CreateObjCommand,  Tcl_DeleteCommand, Tcl_GetCommandInfo, Tcl_SetCommandInfo, Tcl_GetCommandName,
       Tcl_SetObjResult


<b>KEYWORDS</b>
       bind, command, create, delete, interpreter, namespace



Tcl                                                                                     Tcl_CreateCommand(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_CreateCommand.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_CreateCommand.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_CreateCommand.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

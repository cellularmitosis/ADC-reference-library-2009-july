<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Low-Level Routines(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING325></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-324.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-326.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-312.html"><B>Chapter 7 - Serial Driver</B></A> / <A HREF="Devices-316.html"><B>Serial Driver Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING325-0></A>
<H2><A NAME=MARKER-9-77></A>Low-Level Routines</H2>
 This section describes the low-level Serial Driver routines that you can call using the Device Manager control and status functions. These calls should be made to the output device driver--they affect the input driver as well.<P>
<A NAME=HEADING325-2></A>
<H4>Serial Driver Version [status code 9]</H4>
 <CODE>csCode</CODE> = 9    <CODE>csParam</CODE> = word<P>
 This status routine returns the version number of the Serial Driver in the <CODE>csParam</CODE> field. The version number is an integer value.<P>
<A NAME=HEADING325-5></A>
<H4><A NAME=MARKER-2-78></A>Set Baud Rate [control code 13]</H4>
 <CODE>csCode</CODE> = 13    <CODE>csParam</CODE> = word<P>
 This control routine provides an additional method (besides the <CODE>SerReset</CODE> function) of setting the baud rate. You specify the baud rate value as an integer in the <CODE>csParam</CODE> field (for example, 9600). The Serial Driver attempts to set the serial port to the specified baud rate, or the closest baud rate supported by the hardware. The actual baud rate selected is returned in the <CODE>csParam</CODE> field.<P>
<A NAME=HEADING325-8></A>
<H4><A NAME=MARKER-2-79></A>Set Handshaking Options [control code 14]</H4>
 <CODE>csCode</CODE> = 14    <CODE>csParam</CODE> = <CODE>SerShk</CODE> record<P>
 This control routine is identical to the <CODE>SerHShake</CODE> function (control code 10) with the additional specification of the <CODE>fDTR</CODE> flag in the eighth byte of the <CODE>SerShk</CODE> record. You enable DTR input flow control by setting this flag to a non-zero value. See the description of the <CODE>SerHShake</CODE> function on <A HREF=Devices-320.html#MARKER-9-49>page 7-21</A> for information about the other fields of the <CODE>SerShk</CODE> record.<P>
<A NAME=HEADING325-11></A>
<H4><A NAME=MARKER-2-80></A>Set Miscellaneous Options [control code 16]</H4>
 <CODE>csCode</CODE> = 16    <CODE>csParam</CODE> = byte<P>
 This control routine sets miscellaneous control options. Bits 0-5 are reserved and should be set to 0 for compatibility with future options. Bit 6 enables external clocking through the CTS handshake line (the HSKi signal on pin 2 of the serial port). Set bit 6 to 1 to allow an external device to drive the serial data clock. Set bit 6 to 0 to restore internal clocking. Bit 7 controls the state of the DTR signal when the driver is closed. When bit 7 is 0 (the default) the DTR signal is automatically negated when the driver closes. Set bit 7 to 1 if you want the DTR signal to be left unchanged when the driver is closed. This can be used to prevent a modem from hanging up or a printer from going offline when the driver closes.<P>
<A NAME=HEADING325-14></A>
<H4>Assert DTR [control code 17]</H4>
 <CODE>csCode</CODE> = 17<P>
 This control routine asserts the DTR signal.<P>
<A NAME=HEADING325-17></A>
<H4>Negate DTR [control code 18]</H4>
 <CODE>csCode</CODE> = 18<P>
 This control routine negates the DTR signal.<P>
<A NAME=HEADING325-20></A>
<H4>Simple Parity Error Replacement [control code 19]</H4>
 <CODE>csCode</CODE> = 19    <CODE>csParam</CODE> = char<P>
 This control routine enables simple parity error replacement, in which incoming characters with parity errors are replaced by the ASCII character specified in <CODE>csParam</CODE> (for example, $FF). If a valid incoming character matches the replacement character, the most significant bit of the character is cleared. Therefore, if it is possible for your replacement character to appear in the data stream, you should use control code 20 instead. Set <CODE>csParam</CODE> to 0 to disable parity error replacement.<P>
<A NAME=HEADING325-23></A>
<H4>Extended Parity Error Replacement [control code 20]</H4>
 <CODE>csCode</CODE> = 20    <CODE>csParam[0]</CODE> = char    <CODE>csParam[1]</CODE> = char<P>
 This control routine enables extended parity error replacement. Incoming characters with parity errors are replaced by the ASCII character specified in <CODE>csParam[0]</CODE>. The difference between this routine and the simple version (control code 19) is that if a valid incoming character matches the parity replacement character, it is replaced by the alternate character specified in <CODE>csParam[1]</CODE>. Set <CODE>csParam[0]</CODE> to 0 to disable parity error replacement.<P>
<DL>
<DT><B>Note</B>
<DD>The ASCII NUL character ($00) can be used as the alternate character but not as the parity replacement.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING325-27></A>
<H4>Set XOFF State [control code 21]</H4>
 <CODE>csCode</CODE> = 21<P>
 This control routine unconditionally sets the <CODE>xOffHold<A NAME=MARKER-2-142></A></CODE> flag, which is equivalent to receiving an XOFF character. If software handshaking is enabled, data transmission is halted until an XON character is received, or until you clear the XOFF state using control code 22.<P>
<A NAME=HEADING325-30></A>
<H4>Clear XOFF State [control code 22]</H4>
 <CODE>csCode</CODE> = 22<P>
 This control routine unconditionally clears the <CODE>xOffHold<A NAME=MARKER-2-82></A></CODE> flag, which is equivalent to receiving an XON character. If software handshaking is enabled, data transmission is resumed.<P>
<A NAME=HEADING325-33></A>
<H4>Send XON Conditional [control code 23]</H4>
 <CODE>csCode</CODE> = 23<P>
 This control routine sends an XON character for input flow control if the last input flow control character sent was XOFF.<P>
<A NAME=HEADING325-36></A>
<H4>Send XON Unconditional [control code 24]</H4>
 <CODE>csCode</CODE> = 24<P>
 This control routine unconditionally sends an XON character for input flow control, regardless of the current state of input flow control.<P>
<A NAME=HEADING325-39></A>
<H4>Send XOFF Conditional [control code 25]</H4>
 <CODE>csCode</CODE> = 25<P>
 This control routine sends an XOFF character for input flow control if the last input flow control character sent was XON.<P>
<A NAME=HEADING325-42></A>
<H4>Send XOFF Unconditional [control code 26]</H4>
 <CODE>csCode</CODE> = 26<P>
 This control routine unconditionally sends an XOFF character for input flow control, regardless of the current state of input flow control.<P>
<A NAME=HEADING325-45></A>
<H4>Serial Hardware Reset [control code 27]</H4>
 <CODE>csCode</CODE> = 27<P>
 This control routine resets the serial port hardware for a channel. Because this routine may leave the serial port in an unknown state, you must call the <CODE>SerReset</CODE> function before you use the port. <A NAME=MARKER-2-83></A><P>

<HR>
<center>
<A HREF="Devices-324.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-326.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Executing Routines Synchronously or Asynchronously(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING34></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-33.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-35.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-15.html"><B>Chapter 1 - Introduction to AppleTalk</B></A> / <A HREF="Networking-33.html"><B>The AppleTalk Pascal Interface</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING34-0></A>
<H2>Executing Routines Synchronously or Asynchronously</H2>
 <A NAME=MARKER-2-24></A>Your program can execute the routines that make up the interface to the AppleTalk protocols either synchronously or asynchronously. <A NAME=MARKER-2-217></A><B>Synchronous execution</B> means that your program is prevented from doing any other processing until the current operation completes. <A NAME=MARKER-2-115></A><B>Asynchronous execution</B> means that the system returns control to your program after your program calls the routine so that your program can continue with other processing while the asynchronous operation completes. <P>
 If you execute a routine synchronously, the call does not return until the operation completes; you do not have to use a completion routine that runs at interrupt level or poll a result field to determine when the operation completes; on the other hand, your program cannot continue running until the call returns, which causes the system to come to a standstill. Synchronous calls are useful for operations that execute and return to the calling program quickly, such as opening or closing sockets. On an AppleTalk internet, data is transferred between sockets, which must be opened before they can be used and closed when they are no longer needed.<P>
 Calling a routine asynchronously directs the system software to begin the operation process now, return control to the calling program, then complete execution of the routine as soon as possible. Asynchronous execution eliminates program execution delay time, but it requires that your application provide a means of determining when the operation has completed execution. There are two methods an application can use to determine when an operation completes execution: <P>
<UL>
<LI>An application can provide a completion routine to be called at interrupt level.
<LI>An application can poll the routine's parameter block result field. <P>
</UL>
 The parameter block that is used to contain input and output information for <BR>a function includes a result field called <CODE>ioResult</CODE>. When your application calls a <BR>function asynchronously, <P>
<UL>
<LI>the driver executes the function, if possible. 
<LI>if the driver is busy, the driver queues the function and sets the <CODE>ioResult</CODE> field to 1. <P>
</UL>
 When the function completes execution, the driver sets the result field to a value that indicates either that no error occurred (<CODE>noErr</CODE>) or an error condition code value that identifies the type of error. <A NAME=MARKER-2-99></A><P>
<A NAME=HEADING34-10></A>
<H3>Polling the Result Field</H3>
 Your application can poll the result field to determine when the result value changes. Your application can use the polling process to inform the user that the system is still busy performing the operation that handles the request; for processes that may take a long time, your application can display a progress dialog box to the user. <P>
<DL>
<DT><B>Note</B>
<DD>If you use polling, you must set the call's parameter block <CODE>ioCompletion</CODE> field to <CODE>NIL</CODE>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING34-13></A>
<H3>Using a Completion Routine</H3>
 <A NAME=MARKER-2-233></A>Instead of polling the result field, your application can supply a <A NAME=MARKER-2-96></A>completion routine to <BR>be executed at interrupt level when the operation completes. You provide the address <BR>of the completion routine in the call's parameter block <CODE>ioCompletion</CODE> field. Because completion routines are executed at interrupt level, they cannot call any routines that move memory. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-33.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-35.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

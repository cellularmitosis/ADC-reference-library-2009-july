<html><head><title>Mac OS X
 Manual Page For racoon.conf(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/racoon.conf" title="Mac OS X
 Manual Page for racoon.conf(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/racoon.conf"; name=racoon.conf(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
RACOON.CONF(5)              BSD File Formats Manual             RACOON.CONF(5)

<b>NAME</b>
     <b>racoon.conf</b> -- configuration file for racoon

<b>DESCRIPTION</b>
     <b>racoon.conf</b> is the configuration file for the <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> ISAKMP daemon.  <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> negotiates security
     associations for itself (ISAKMP SA, or phase 1 SA) and for kernel IPsec (IPsec SA, or phase 2 SA).  The
     file consists of a sequence of directives and statements.  Each directive is composed by a tag and
     statements, enclosed by `{' and `}'.  Lines beginning with `#' are comments.

   <b>Meta</b> <b>Syntax</b>
     Keywords and special characters that the parser expects exactly are displayed using <b>this</b> font.  Parame-<font color="#ffffff" class="whiteout">ters&nbsp;Parameters</font>
     ters are specified with <u>this</u> font.  Square brackets (`[' and `]') are used to show optional keywords
     and parameters.  Note that you have to pay attention when this manual is describing <u>port</u> numbers.  The
     <u>port</u> number is always enclosed by `[' and `]'.  In this case, the port number is not an optional key-<font color="#ffffff" class="whiteout">word.&nbsp;keyword.</font>
     word.  If it is possible to omit the <u>port</u> number, the expression becomes [[<u>port</u>]].  The vertical bar
     (`|') is used to indicate a choice between optional parameters.  Parentheses (`(' and `)') are used to
     group keywords and parameters when necessary.  Major parameters are listed below.

     <u>number</u>    means a hexadecimal or a decimal number.  The former must be prefixed with `0x'.
     <u>string</u>
     <u>path</u>
     <u>file</u>      means any string enclosed in `"' (double quotes).
     <u>address</u>   means IPv6 and/or IPv4 address.
     <u>port</u>      means a TCP/UDP port number.  The port number is always enclosed by `[' and `]'.
     <u>timeunit</u>  is one of following: <b>sec</b>, <b>secs</b>, <b>second</b>, <b>seconds</b>, <b>min</b>, <b>mins</b>, <b>minute</b>, <b>minutes</b>, <b>hour</b>, <b>hours</b>.

   <b>Privilege</b> <b>separation</b>
     <b>privsep</b> <b>{</b> <u>statements</u> <b>}</b>
             specifies privilege separation parameters.  When enabled, these enable <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> to operate
             with an unprivileged instance doing most of the work, while a privileged instance takes care of
             performing the following operations as root: reading PSK and private keys, launching hook
             scripts, and validating passwords against system databases or against PAM.

             <b>user</b> <u>user</u>;
                     The user to which the unprivileged instance of <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a>, should switch.  This can be a
                     quoted user name or a numeric UID.
             <b>group</b> <u>group</u>;
                     The group to which the unprivileged instance of <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a>, should switch.  This can be
                     a quoted group name or a numeric GID.
             <b>chroot</b> <u>path</u>;
                     A directory to which the unprivileged instance of <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> should <a href="../man2/chroot.2.html#//apple_ref/doc/man/2/chroot">chroot(2)</a>.  This
                     directory should hold a tree where the following files must be reachable:
                     <u>/dev/random</u>
                     <u>/dev/urandom</u>
                     the certificates
                     the file containing the Xauth banner

                     The PSK file, the private keys, and the hook scripts are accessed through the privi-<font color="#ffffff" class="whiteout">leged&nbsp;privileged</font>
                     leged instance of <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> and do not need to be reachable in the <a href="../man2/chroot.2.html#//apple_ref/doc/man/2/chroot">chroot(2)</a>'ed tree.

   <b>Path</b> <b>Specification</b>
     This section specify various paths used by racoon.  When running in privilege separation mode,
     <b>certificate</b> and <b>script</b> paths are mandatory.
     <b>path</b> <b>include</b> <u>path</u>;
             specifies a path to include a file.  See <u>File</u> <u>Inclusion</u>.
     <b>path</b> <b>pre_shared_key</b> <u>file</u>;
             specifies a file containing pre-shared <!-- a -->key(s)<!-- /a --> for various <!-- a -->ID(s)<!-- /a -->.  See <u>Pre-shared</u> <u>key</u> <u>File</u>.
     <b>path</b> <b>certificate</b> <u>path</u>;
             <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will search this directory if a certificate or certificate request is received.  If
             you run with privilege separation, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will refuse to use a certificate stored outside of
             this directory.
     <b>path</b> <b>backupsa</b> <u>file</u>;
             specifies a file to which SA information which is negotiated by racoon should be stored.
             <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will install <!-- a -->SA(s)<!-- /a --> from the file when started with the <b>-B</b> flag.  The file is growing
             because <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> simply adds SAs to it.  You should maintain the file manually.
     <b>path</b> <b>script</b> <u>path</u>;
             <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will search this directory for scripts hooks.  If you run with privilege separation,
             <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will refuse to execute a script stored outside of this directory.
     <b>path</b> <b>pidfile</b> <u>file</u>;
             specifies file where to store PID of process.  If path starts with <u>/</u> it is treated as an abso-<font color="#ffffff" class="whiteout">lute&nbsp;absolute</font>
             lute path, otherwise relative to VARRUN directory specified at compilation time.  Default is
             <u>racoon.pid</u>.
     <b>path</b> <b>logfile</b> <u>file</u>;
             specifies log file path.

   <b>File</b> <b>Inclusion</b>
     <b>include</b> <u>file</u>
             other configuration files can be included.

   <b>Identifier</b> <b>Specification</b>
     is obsolete.  It must be defined at each <b>remote</b> directive.

   <b>Timer</b> <b>Specification</b>
     <b>timer</b> <b>{</b> <u>statements</u> <b>}</b>
             specifies various timer values.

             <b>counter</b> <u>number</u>;
                     the maximum number of retries to send.  The default is 5.
             <b>interval</b> <u>number</u> <u>timeunit</u>;
                     the interval to resend, in seconds.  The default time is 10 seconds.
             <b>persend</b> <u>number</u>;
                     the number of packets per send.  The default is 1.
             <b>phase1</b> <u>number</u> <u>timeunit</u>;
                     the maximum time it should take to complete phase 1.  The default time is 15 seconds.
             <b>phase2</b> <u>number</u> <u>timeunit</u>;
                     the maximum time it should take to complete phase 2.  The default time is 10 seconds.
             <b>natt_keepalive</b> <u>number</u> <u>timeunit</u>;
                     interval between sending NAT-Traversal keep-alive packets.  The default time is 20 sec-<font color="#ffffff" class="whiteout">onds.&nbsp;seconds.</font>
                     onds.  Set to 0s to disable keep-alive packets.

   <b>Listening</b> <b>Port</b> <b>Specification</b>
     <b>listen</b> <b>{</b> <u>statements</u> <b>}</b>
             If no <u>listen</u> directive is specified, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will listen on all available interface
             addresses.  The following is the list of valid statements:

             <b>isakmp</b> <u>address</u> [[<u>port</u>]];
                     If this is specified, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will only listen on <u>address</u>.  The default port is 500,
                     which is specified by IANA.  You can provide more than one address definition.
             <b>isakmp_natt</b> <u>address</u> [<u>port</u>];
                     Same as <b>isakmp</b> but also sets the socket options to accept UDP-encapsulated ESP traffic
                     for NAT-Traversal.  If you plan to use NAT-T, you should provide at least one address
                     with port 4500, which is specified by IANA.  There is no default.
             <b>strict_address</b>;
                     require that all addresses for ISAKMP must be bound.  This statement will be ignored if
                     you do not specify any address.
             The <u>listen</u> section can also be used to specify the admin socket mode and ownership, if racoon
             was built with support for admin port.
             <b>adminsock</b> <u>path</u> [<u>owner</u> <u>group</u> <u>mode</u>];
                     <u>path</u>, <u>owner</u>, and <u>group</u> are the socket path, owner, and group; they must be quoted.
                     Defaults are <u>/var/racoon/racoon.sock</u>, UID 0, and GID 0.  <u>mode</u> is the access mode in
                     octal, default is 0600.
             <b>adminsock</b> <b>disabled</b>;
                     This directive tells racoon to not listen on the admin socket.

   <b>Miscellaneous</b> <b>Global</b> <b>Parameters</b>
     <b>gss_id_enc</b> <u>enctype</u>;
             Older versions of <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> used ISO-Latin-1 as the encoding of the GSS-API identifier
             attribute.  For interoperability with Microsoft Windows' GSS-API authentication scheme, the
             default encoding has been changed to UTF-16LE.  The <b>gss_id_enc</b> parameter allows <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> to be
             configured to use the old encoding for compatibility with existing <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> installations.
             The following are valid values for <u>enctype</u>:

             <b>utf-16le</b>
                     Use UTF-16LE to encode the GSS-API identifier attribute.  This is the default encoding.
                     This encoding is compatible with Microsoft Windows.
             <b>latin1</b>  Use ISO-Latin-1 to encode the GSS-API identifier attribute.  This is the encoding used
                     by older versions of <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a>.

   <b>Remote</b> <b>Nodes</b> <b>Specifications</b>
     <b>remote</b> (<u>address</u> | <b>anonymous</b>) [[<u>port</u>]] [<b>inherit</b> <u>parent</u>] <b>{</b> <u>statements</u> <b>}</b>
             specifies the parameters for IKE phase 1 for each remote node.  The default port is 500.  If
             <b>anonymous</b> is specified, the statements apply to all peers which do not match any other <b>remote</b>
             directive.

             Sections with <b>inherit</b> <u>parent</u> statements (where <u>parent</u> is either <u>address</u> or a keyword <b>anonymous</b>)
             have all values predefined to those of a given <u>parent</u>.  In these sections it is enough to rede-<font color="#ffffff" class="whiteout">fine&nbsp;redefine</font>
             fine only the changed parameters.

             The following are valid statements.

             <b>exchange_mode</b> (<b>main</b> | <b>aggressive</b> | <b>base</b>);
                     defines the exchange mode for phase 1 when racoon is the initiator.  It also means the
                     acceptable exchange mode when racoon is responder.  More than one mode can be specified
                     by separating them with a comma.  All of the modes are acceptable.  The first exchange
                     mode is what racoon uses when it is the initiator.
             <b>doi</b> <b>ipsec_doi</b>;
                     means to use IPsec DOI as specified in RFC 2407.  You can omit this statement.
             <b>situation</b> <b>identity_only</b>;
                     means to use SIT_IDENTITY_ONLY as specified in RFC 2407.  You can omit this statement.
             <b>identifier</b> <u>idtype</u>;
                     is obsolete.  Instead, use <b>my_identifier</b>.
             <b>my_identifier</b> <u>idtype</u> <u>...</u>;
                     specifies the identifier sent to the remote host and the type to use in the phase 1
                     negotiation.  <b>address,</b> <b>fqdn</b>, <b>user_fqdn</b>, <b>keyid</b>, and <b>asn1dn</b> can be used as an <u>idtype</u>.
                     Use them in the following way:
                     <b>my_identifier</b> <b>address</b> [<u>address</u>];
                             the type is the IP address.  This is the default type if you do not specify an
                             identifier to use.
                     <b>my_identifier</b> <b>user_fqdn</b> <u>string</u>;
                             the type is a USER_FQDN (user fully-qualified domain name).
                     <b>my_identifier</b> <b>fqdn</b> <u>string</u>;
                             the type is a FQDN (fully-qualified domain name).
                     <b>my_identifier</b> <b>keyid</b> <u>file</u>;
                             the type is a KEY_ID.
                     <b>my_identifier</b> <b>asn1dn</b> [<u>string</u>];
                             the type is an ASN.1 distinguished name.  If <u>string</u> is omitted, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will
                             get the DN from the Subject field in the certificate.
             <b>xauth_login</b> [<u>string</u>];
                     specifies the login to use in client-side Hybrid authentication.  It is available only
                     if <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> has been built with this option.  The associated password is looked up in
                     the pre-shared key files, using the login <b>string</b> as the key id.
             <b>peers_identifier</b> <u>idtype</u> <u>...</u>;
                     specifies the peer's identifier to be received.  If it is not defined then <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a>
                     will not verify the peer's identifier in ID payload transmitted from the peer.  If it
                     is defined, the behavior of the verification depends on the flag of <b>verify_identifier</b>.
                     The usage of <u>idtype</u> is the same as <b>my_identifier</b> except that the individual component
                     values of an <b>asn1dn</b> identifier may specified as <b>*</b> to match any value (e.g. "C=XX,
                     O=MyOrg, OU=*, CN=Mine").  Alternative acceptable peer identifiers may be specified by
                     repeating the <b>peers_identifier</b> statement.
             <b>verify_identifier</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     If you want to verify the peer's identifier, set this to on.  In this case, if the
                     value defined by <b>peers_identifier</b> is not the same as the peer's identifier in the ID
                     payload, the negotiation will failed.  The default is off.
             <b>certificate_type</b> <u>certspec</u>;
                     specifies a certificate specification.  <u>certspec</u> is one of followings:
                     <b>x509</b> <u>certfile</u> <u>privkeyfile</u>;
                             <u>certfile</u> means a file name of a certificate.  <u>privkeyfile</u> means a file name of
                             a secret key.
             <b>ca_type</b> <u>cacertspec</u>;
                     specifies a root certificate authority specification.  <u>cacertspec</u> is one of followings:
                     <b>x509</b> <u>cacertfile</u>;
                             <u>cacertfile</u> means a file name of the root certificate authority.  Default is
                             <u>/etc/openssl/cert.pem</u>
             <b>mode_cfg</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     Gather network information through ISAKMP mode configuration.  Default is off.
             <b>peers_certfile</b> (<b>dnssec</b> | <u>certfile</u>);
                     If <b>dnssec</b> is defined, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will ignore the CERT payload from the peer, and try to
                     get the peer's certificate from DNS instead.  If <u>certfile</u> is defined, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will
                     ignore the CERT payload from the peer, and will use this certificate as the peer's cer-<font color="#ffffff" class="whiteout">tificate.&nbsp;certificate.</font>
                     tificate.
             <b>script</b> <u>script</u> <b>phase1_up</b>
             <b>script</b> <u>script</u> <b>phase1_down</b>
                     Shell scripts that get executed when a phase 1 SA goes up or down.  Both scripts get
                     either <b>phase1_up</b> or <b>phase1_down</b> as first argument, and the following variables are set
                     in their environment:
                     LOCAL_ADDR
                             The local address of the phase 1 SA.
                     LOCAL_PORT
                             The local port used for IKE for the phase 1 SA.
                     REMOTE_ADDR
                             The remote address of the phase 1 SA.
                     REMOTE_PORT
                             The remote port used for IKE for the phase 1 SA.
                     The following variables are only set if <b>mode_cfg</b> was enabled:
                     INTERNAL_ADDR4
                             An IPv4 internal address obtained by ISAKMP mode config.
                     INTERNAL_NETMASK4
                             An IPv4 internal netmask obtained by ISAKMP mode config.
                     INTERNAL_DNS4
                             Internal DNS server IPv4 address obtained by ISAKMP mode config.
                     INTERNAL_NBNS4
                             Internal WINS server IPv4 address obtained by ISAKMP mode config.
             <b>send_cert</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     If you do not want to send a certificate for some reason, set this to off.  The default
                     is on.
             <b>send_cr</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     If you do not want to send a certificate request for some reason, set this to off.  The
                     default is on.
             <b>verify_cert</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     If you do not want to verify the peer's certificate for some reason, set this to off.
                     The default is on.
             <b>lifetime</b> <b>time</b> <u>number</u> <u>timeunit</u>;
                     Define a lifetime of a certain time which will be proposed in the phase 1 negotiations.
                     Any proposal will be accepted, and the <!-- a -->attribute(s)<!-- /a --> will be not proposed to the peer if
                     you do not specify it (them).  They can be individually specified in each proposal.
             <b>ike_frag</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     Enable receiver-side IKE fragmentation, if <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> has been built with this feature.
                     This extension is there to work around broken firewalls that do not work with frag-<font color="#ffffff" class="whiteout">mented&nbsp;fragmented</font>
                     mented UDP packets.  IKE fragmentation is always enabled on the sender-side, and it is
                     used if the peer advertises itself as IKE fragmentation capable.
             <b>esp_frag</b> <u>fraglen</u>;
                     This option is only relevant if you use NAT traversal in tunnel mode.  Its purpose is
                     to work around broken DSL routers that reject UDP fragments, by fragmenting the IP
                     packets before ESP encapsulation.  The result is ESP over UDP of fragmented packets
                     instead of fragmented ESP over UDP packets (i.e., IP:UDP:ESP:frag(IP) instead of
                     frag(IP:UDP:ESP:IP)).  <u>fraglen</u> is the maximum size of the fragments.  552 should work
                     anywhere, but the higher <u>fraglen</u> is, the better is the performance.

                     Note that because PMTU discovery is broken on many sites, you will have to use MSS
                     clamping if you want TCP to work correctly.
             <b>initial_contact</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     enable this to send an INITIAL-CONTACT message.  The default value is <b>on</b>.  This message
                     is useful only when the implementation of the responder chooses an old SA when there
                     are multiple SAs with different established time, and the initiator reboots.  If racoon
                     did not send the message, the responder would use an old SA even when a new SA was
                     established.  The KAME stack has the switch in the system wide value net.key.pre-<font color="#ffffff" class="whiteout">ferred_oldsa.&nbsp;net.key.preferred_oldsa.</font>
                     ferred_oldsa.  when the value is zero, the stack always uses a new SA.
             <b>passive</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     If you do not want to initiate the negotiation, set this to on.  The default value is
                     <b>off</b>.  It is useful for a server.
             <b>proposal_check</b> <u>level</u>;
                     specifies the action of lifetime length and PFS of the phase 2 selection on the respon-<font color="#ffffff" class="whiteout">der&nbsp;responder</font>
                     der side, and the action of lifetime check in phase 1.  The default level is <b>strict</b>.
                     If the <u>level</u> is:
                     <b>obey</b>    the responder will obey the initiator anytime.
                     <b>strict</b>  If the responder's length is longer than the initiator's one, the responder
                             uses the initiator's one.  Otherwise it rejects the proposal.  If PFS is not
                             required by the responder, the responder will obey the proposal.  If PFS is
                             required by both sides and if the responder's group is not equal to the initia-<font color="#ffffff" class="whiteout">tor's&nbsp;initiator's</font>
                             tor's one, then the responder will reject the proposal.
                     <b>claim</b>   If the responder's length is longer than the initiator's one, the responder
                             will use the initiator's one.  If the responder's length is shorter than the
                             initiator's one, the responder uses its own length AND sends a RESPONDER-LIFE-<font color="#ffffff" class="whiteout">TIME&nbsp;RESPONDER-LIFETIME</font>
                             TIME notify message to an initiator in the case of lifetime (phase 2 only).
                             For PFS, this directive behaves the same as <b>strict</b>.
                     <b>exact</b>   If the initiator's length is not equal to the responder's one, the responder
                             will reject the proposal.  If PFS is required by both sides and if the respon-<font color="#ffffff" class="whiteout">der's&nbsp;responder's</font>
                             der's group is not equal to the initiator's one, then the responder will reject
                             the proposal.
             <b>support_proxy</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     If this value is set to on, then both values of ID payloads in the phase 2 exchange are
                     always used as the addresses of end-point of IPsec-SAs.  The default is off.
             <b>generate_policy</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     This directive is for the responder.  Therefore you should set <b>passive</b> to on in order
                     that <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> only becomes a responder.  If the responder does not have any policy in
                     SPD during phase 2 negotiation, and the directive is set to on, then <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will
                     choose the first proposal in the SA payload from the initiator, and generate policy
                     entries from the proposal.  It is useful to negotiate with clients whose IP address is
                     allocated dynamically.  Note that an inappropriate policy might be installed into the
                     responder's SPD by the initiator, so other communications might fail if such policies
                     are installed due to a policy mismatch between the initiator and the responder.  This
                     directive is ignored in the initiator case.  The default value is <b>off</b>.
             <b>nat_traversal</b> <b>(on</b> <b>|</b> <b>off</b> <b>|</b> <b>force)</b>;
                     This directive enables use of the NAT-Traversal IPsec extension (NAT-T).  NAT-T allows
                     one or both peers to reside behind a NAT gateway (i.e., doing address- or port-transla-<font color="#ffffff" class="whiteout">tion).&nbsp;port-translation).</font>
                     tion).  Presence of NAT gateways along the path is discovered during phase 1 handshake
                     and if found, NAT-T is negotiated.  When NAT-T is in charge, all ESP and AH packets of
                     a given connection are encapsulated into UDP datagrams (port 4500, by default).  Possi-<font color="#ffffff" class="whiteout">ble&nbsp;Possible</font>
                     ble values are:
                     <b>on</b>      NAT-T is used when a NAT gateway is detected between the peers.
                     <b>off</b>     NAT-T is not proposed/accepted.  This is the default.
                     <b>force</b>   NAT-T is used regardless if a NAT is detected between the peers or not.
                     Please note that NAT-T support is a compile-time option.  Although it is enabled in the
                     source distribution by default, it may not be available in your particular build.  In
                     that case you will get a warning when using any NAT-T related config options.
             <b>dpd_delay</b> <u>delay</u>;
                     This option activates the DPD and sets the time (in seconds) allowed between 2 proof of
                     liveness requests.  The default value is <b>0</b>, which disables DPD monitoring, but still
                     negotiates DPD support.
             <b>dpd_retry</b> <u>delay</u>;
                     If <b>dpd_delay</b> is set, this sets the delay (in seconds) to wait for a proof of liveness
                     before considering it as failed and send another request.  The default value is <b>5</b>.
             <b>dpd_maxfail</b> <u>number</u>;
                     If <b>dpd_delay</b> is set, this sets the maximum number of proof of liveness to request
                     (without reply) before considering the peer is dead.  The default value is <b>5</b>.
             <b>nonce_size</b> <u>number</u>;
                     define the byte size of nonce value.  Racoon can send any value although RFC2409 speci-<font color="#ffffff" class="whiteout">fies&nbsp;specifies</font>
                     fies that the value MUST be between 8 and 256 bytes.  The default size is 16 bytes.
             <b>proposal</b> <b>{</b> <u>sub-substatements</u> <b>}</b>
                     <b>encryption_algorithm</b> <u>algorithm</u>;
                             specify the encryption algorithm used for the phase 1 negotiation.  This direc-<font color="#ffffff" class="whiteout">tive&nbsp;directive</font>
                             tive must be defined.  <u>algorithm</u> is one of following: <b>des</b>, <b>3des</b>, <b>blowfish</b>,
                             <b>cast128</b>, <b>aes</b> for Oakley.  For other transforms, this statement should not be
                             used.
                     <b>hash_algorithm</b> <u>algorithm</u>;
                             define the hash algorithm used for the phase 1 negotiation.  This directive
                             must be defined.  <u>algorithm</u> is one of following: <b>md5,</b> <b>sha1,</b> <b>sha256,</b> <b>sha384,</b>
                             <b>sha512</b> for Oakley.
                     <b>authentication_method</b> <u>type</u>;
                             defines the authentication method used for the phase 1 negotiation.  This
                             directive must be defined.  <u>type</u> is one of: <b>pre_shared_key</b>, <b>rsasig</b>, <b>gssapi_krb</b>,
                             <b>hybrid_rsa_server</b>, or <b>hybrid_rsa_client</b>.
                     <b>dh_group</b> <u>group</u>;
                             define the group used for the Diffie-Hellman exponentiations.  This directive
                             must be defined.  <u>group</u> is one of following: <b>modp768</b>, <b>modp1024</b>, <b>modp1536</b>,
                             <b>modp2048</b>, <b>modp3072</b>, <b>modp4096</b>, <b>modp6144</b>, <b>modp8192</b>.  Or you can define 1, 2, 5,
                             14, 15, 16, 17, or 18 as the DH group number.  When you want to use aggressive
                             mode, you must define the same DH group in each proposal.
                     <b>lifetime</b> <b>time</b> <u>number</u> <u>timeunit</u>;
                             define lifetime of the phase 1 SA proposal.  Refer to the description of the
                             <b>lifetime</b> directive defined in the <b>remote</b> directive.
                     <b>gss_id</b> <u>string</u>;
                             define the GSS-API endpoint name, to be included as an attribute in the SA, if
                             the <b>gssapi_krb</b> authentication method is used.  If this is not defined, the
                             default value of `host/hostname' is used, where hostname is the value returned
                             by the <a href="../man1/hostname.1.html#//apple_ref/doc/man/1/hostname">hostname(1)</a> command.

   <b>Policy</b> <b>Specifications</b>
     The policy directive is obsolete, policies are now in the SPD.  <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will obey the policy config-<font color="#ffffff" class="whiteout">ured&nbsp;configured</font>
     ured into the kernel by <a href="../man8/setkey.8.html#//apple_ref/doc/man/8/setkey">setkey(8)</a>, and will construct phase 2 proposals by combining <b>sainfo</b> specifica-<font color="#ffffff" class="whiteout">tions&nbsp;specifications</font>
     tions in <b>racoon.conf</b>, and policies in the kernel.

   <b>Sainfo</b> <b>Specifications</b>
     <b>sainfo</b> (<u>source</u><b>_</b><u>id</u> <u>destination</u><b>_</b><u>id</u> | <b>anonymous</b>) [<b>from</b> <u>idtype</u> [<u>string</u>]] <b>{</b> <u>statements</u> <b>}</b>
             defines the parameters of the IKE phase 2 (IPsec-SA establishment).  <u>source</u><b>_</b><u>id</u> and
             <u>destination</u><b>_</b><u>id</u> are constructed like:

             <b>address</b> <u>address</u> [<b>/</b> <u>prefix</u>] [[<u>port</u>]] <u>ul</u><b>_</b><u>proto</u>

             or

             <b>subnet</b> <u>address</u> [<b>/</b> <u>prefix</u>] [[<u>port</u>]] <u>ul</u><b>_</b><u>proto</u>

             or

             <u>idtype</u> <u>string</u>

             It means exactly the content of ID payload.  This is not like a filter rule.  For example, if
             you define 3ffe:501:4819::/48 as <u>source</u><b>_</b><u>id</u>.  3ffe:501:4819:1000:/64 will not match.

             In case of longest prefix (selecting single host) <u>address</u> instructs to send ID type of ADDRESS,
             while <u>subnet</u> instructs to send ID type of SUBNET.  Otherwise these instructions are identical.

             <b>pfs_group</b> <u>group</u>;
                     define the group of Diffie-Hellman exponentiations.  If you do not require PFS then you
                     can omit this directive.  Any proposal will be accepted if you do not specify one.
                     <u>group</u> is one of following: <b>modp768</b>, <b>modp1024</b>, <b>modp1536</b>, <b>modp2048</b>, <b>modp3072</b>, <b>modp4096</b>,
                     <b>modp6144</b>, <b>modp8192</b>.  Or you can define 1, 2, 5, 14, 15, 16, 17, or 18 as the DH group
                     number.
             <b>lifetime</b> <b>time</b> <u>number</u> <u>timeunit</u>;
                     define how long an IPsec-SA will be used, in timeunits.  Any proposal will be accepted,
                     and no <!-- a -->attribute(s)<!-- /a --> will be proposed to the peer if you do not specify it(them).  See
                     the <b>proposal_check</b> directive.
             <b>my_identifier</b> <u>idtype</u> <u>...</u>;
                     is obsolete.  It does not make sense to specify an identifier in the phase 2.

             <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> does not have a list of security protocols to be negotiated.  The list of security
             protocols are passed by SPD in the kernel.  Therefore you have to define all of the potential
             algorithms in the phase 2 proposals even if there are algorithms which will not be used.  These
             algorithms are define by using the following three directives, with a single comma as the sepa-<font color="#ffffff" class="whiteout">rator.&nbsp;separator.</font>
             rator.  For algorithms that can take variable-length keys, algorithm names can be followed by a
             key length, like ``blowfish 448''.  <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will compute the actual phase 2 proposals by com-<font color="#ffffff" class="whiteout">puting&nbsp;computing</font>
             puting the permutation of the specified algorithms, and then combining them with the security
             protocol specified by the SPD.  For example, if <b>des</b>, <b>3des</b>, <b>hmac_md5</b>, and <b>hmac_sha1</b> are speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
             fied as algorithms, we have four combinations for use with ESP, and two for AH.  Then, based on
             the SPD settings, <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> will construct the actual proposals.  If the SPD entry asks for ESP
             only, there will be 4 proposals.  If it asks for both AH and ESP, there will be 8 proposals.
             Note that the kernel may not support the algorithm you have specified.
             <b>encryption_algorithm</b> <u>algorithms</u>;
                     <b>des</b>, <b>3des</b>, <b>des_iv64</b>, <b>des_iv32</b>, <b>rc5</b>, <b>rc4</b>, <b>idea</b>, <b>3idea</b>, <b>cast128</b>, <b>blowfish</b>, <b>null_enc</b>,
                     <b>twofish</b>, <b>rijndael</b>, <b>aes</b> (used with ESP)
             <b>authentication_algorithm</b> <u>algorithms</u>;
                     <b>des</b>, <b>3des</b>, <b>des_iv64</b>, <b>des_iv32</b>, <b>hmac_md5</b>, <b>hmac_sha1</b>, <b>hmac_sha256,</b> <b>hmac_sha384,</b>
                     <b>hmac_sha512,</b> <b>non_auth</b> (used with ESP authentication and AH)
             <b>compression_algorithm</b> <u>algorithms</u>;
                     <b>deflate</b> (used with IPComp)

   <b>Logging</b> <b>level</b>
     <b>log</b> <u>level</u>;
             define logging level.  <u>level</u> is one of following: <b>notify</b>, <b>debug</b>, and <b>debug2</b>.  The default is
             <b>notify</b>.  If you set the logging level too high on slower machines, IKE negotiation can fail due
             to timing constraint changes.

   <b>Specifying</b> <b>the</b> <b>way</b> <b>to</b> <b>pad</b>
     <b>padding</b> <b>{</b> <u>statements</u> <b>}</b>
             specified padding format.  The following are valid statements:
             <b>randomize</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     enable using a randomized value for padding.  The default is on.
             <b>randomize_length</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     the pad length is random.  The default is off.
             <b>maximum_length</b> <u>number</u>;
                     define a maximum padding length.  If <b>randomize_length</b> is off, this is ignored.  The
                     default is 20 bytes.
             <b>exclusive_tail</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     means to put the number of pad bytes minus one into the last part of the padding.  The
                     default is on.
             <b>strict_check</b> <b>(on</b> <b>|</b> <b>off)</b>;
                     means to constrain the peer to set the number of pad bytes.  The default is off.

   <b>ISAKMP</b> <b>mode</b> <b>configuration</b> <b>settings</b>
     <b>mode_cfg</b> <b>{</b> <u>statements</u> <b>}</b>
             Defines the information to return for remote hosts' ISAKMP mode config requests.  Also defines
             the authentication source for remote peers authenticating through hybrid auth.

             The following are valid statements:
             <b>auth_source</b> <b>(system</b> <b>|</b> <b>radius</b> <b>|</b> <b>pam)</b>;
                     Specify the source for authentication of users through hybrid auth.  <u>system</u> means to
                     use the Unix user database.  This is the default.  <u>radius</u> means to use a RADIUS server.
                     It works only if <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> was built with libradius support, and the configuration is
                     done in <!-- a -->radius.conf(5)<!-- /a -->.  <u>pam</u> means to use PAM.  It works only if <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> was built
                     with libpam support.
             <b>conf_source</b> <b>(local</b> <b>|</b> <b>radius)</b>;
                     Specify the source for IP addresses and netmask allocated through ISAKMP mode config.
                     <u>local</u> means to use the local IP pool defined by the <b>network4</b> and <b>pool_size</b> keywords.
                     This is the default.  <u>radius</u> means to use a RADIUS server.  It works only if <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a>
                     was built with libradius support, and the configuration is done in <!-- a -->radius.conf(5)<!-- /a -->.
                     RADIUS configuration requires RADIUS authentication.
             <b>accounting</b> <b>(none</b> <b>|</b> <b>radius</b> <b>|</b> <b>pam)</b>;
                     Enable or disable accounting for Xauth logins and logouts.  Default is <u>none</u>, which dis-<font color="#ffffff" class="whiteout">able&nbsp;disable</font>
                     able accounting.  <u>radius</u> enable RADIUS accounting.  It works only if <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> was
                     built with libradius support, and the configuration is done in <!-- a -->radius.conf(5)<!-- /a -->.  RADIUS
                     accounting require RADIUS authentication.  <u>pam</u> enable PAM accounting.  It works only if
                     <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> was built with libpam support.  PAM accounting requires PAM authentication.
             <b>pool_size</b> <u>size</u>
                     Specify the size of the IP address pool, either local or allocated through RADIUS.
                     <b>conf_source</b> selects the local pool or the RADIUS configuration, but in both configura-<font color="#ffffff" class="whiteout">tions,&nbsp;configurations,</font>
                     tions, you cannot have more than <u>size</u> users connected at the same time.  The default is
                     255.
             <b>network4</b> <u>address</u>;
             <b>netmask4</b> <u>address</u>;
                     The local IP pool base address and network mask from which dynamically allocated IPv4
                     addresses should be taken.  This is used if <b>conf_source</b> is set to <u>local</u> or if the
                     RADIUS server returned <u>255.255.255.254</u>.  Default is <u>0.0.0.0/0.0.0.0</u>.
             <b>dns4</b> <u>address</u>;
                     The IPv4 address for a DNS server.
             <b>nbns4</b> <u>address</u>;
                     The IPv4 address for a WINS server.
             <b>banner</b> <u>path</u>;
                     The path of a file displayed on the client at connection time.  Default is <u>/etc/motd</u>.
             <b>auth_throttle</b> <u>delay</u>;
                     On each failed Xauth authentication attempt, refuse new attempts for <u>delay</u> more sec-<font color="#ffffff" class="whiteout">onds.&nbsp;seconds.</font>
                     onds.  This is to avoid dictionary attacks on Xauth passwords.  Default is one second.
                     Set to zero to disable authentication delay.
             <b>pfs_group</b> <u>group</u>;
                     Sets the PFS group used in the client proposal (Cisco VPN client only).  Default is 0.
             <b>save_passwd</b> <b>(on</b> | <b>off)</b>;
                     Allow the client to save the Xauth password (Cisco VPN client only).  Default is off.

   <b>Special</b> <b>directives</b>
     <b>complex_bundle</b> <b>(on</b> <b>|</b> <b>off)</b>;
             defines the interpretation of proposal in the case of SA bundle.  Normally ``IP AH ESP IP
             payload'' is proposed as ``AH tunnel and ESP tunnel''.  The interpretation is more common to
             other IKE implementations, however, it allows very limited set of combinations for proposals.
             With the option enabled, it will be proposed as ``AH transport and ESP tunnel''.  The default
             value is <b>off</b>.

   <b>Pre-shared</b> <b>key</b> <b>File</b>
     The pre-shared key file defines pairs of identifiers and corresponding shared secret keys which are
     used in the pre-shared key authentication method in phase 1.  The pair in each line is separated by
     some number of blanks and/or tab characters like in the <a href="hosts.5.html#//apple_ref/doc/man/5/hosts">hosts(5)</a> file.  Key can include blanks because
     everything after the first blanks is interpreted as the secret key.  Lines starting with `#' are
     ignored.  Keys which start with `0x' are interpreted as hexadecimal strings.  Note that the file must
     be owned by the user ID running <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> (usually the privileged user), and must not be accessible by
     others.

<b>EXAMPLES</b>
     The following shows how the remote directive should be configured.

     path pre_shared_key "/usr/local/v6/etc/psk.txt" ;
     remote anonymous
     {
             exchange_mode aggressive,main,base;
             lifetime time 24 hour;
             proposal {
                     encryption_algorithm 3des;
                     hash_algorithm sha1;
                     authentication_method pre_shared_key;
                     dh_group 2;
             }
     }

     sainfo anonymous
     {
             pfs_group 2;
             lifetime time 12 hour ;
             encryption_algorithm 3des, blowfish 448, twofish, rijndael ;
             authentication_algorithm hmac_sha1, hmac_md5 ;
             compression_algorithm deflate ;
     }

     The following is a sample for the pre-shared key file.

     10.160.94.3     mekmitasdigoat
     172.16.1.133    0x12345678
     194.100.55.1    whatcertificatereally
     3ffe:501:410:ffff:200:86ff:fe05:80fa    mekmitasdigoat
     3ffe:501:410:ffff:210:4bff:fea2:8baa    mekmitasdigoat
     foo@kame.net    mekmitasdigoat
     foo.kame.net    hoge

<b>SEE</b> <b>ALSO</b>
     <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a>, <a href="../man8/racoonctl.8.html#//apple_ref/doc/man/8/racoonctl">racoonctl(8)</a>, <a href="../man8/setkey.8.html#//apple_ref/doc/man/8/setkey">setkey(8)</a>

<b>HISTORY</b>
     The <b>racoon.conf</b> configuration file first appeared in the ``YIPS'' Yokogawa IPsec implementation.

<b>BUGS</b>
     Some statements may not be handled by <a href="../man8/racoon.8.html#//apple_ref/doc/man/8/racoon">racoon(8)</a> yet.

     Diffie-Hellman computation can take a very long time, and may cause unwanted timeouts, specifically
     when a large D-H group is used.

<b>SECURITY</b> <b>CONSIDERATIONS</b>
     The use of IKE phase 1 aggressive mode is not recommended, as described in
     <a href="http://www.kb.cert.org/vuls/id/886601">http://www.kb.cert.org/vuls/id/886601</a>

BSD                            November 23, 2004                           BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/racoon.conf.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/racoon.conf.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/racoon.conf.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

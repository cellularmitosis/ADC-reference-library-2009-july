<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>Server Remote Control - /ServerControlIntf.p</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; <A HREF="javascript:location.replace('index.html');">Server Remote Control</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxInterapplicationCommunication-date.html" target="_blank">Carbon > Interapplication Communication</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">Server Remote Control</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/ServerControlIntf.p</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/Remote Control.p</option>
<option value="listing2.html">/Server Controller.p</option>
<option value="listing3.html">/Server_Remote_Control_1.1.txt</option>
<option value="listing4.html">/ServerControlIntf.p</option></select>
				</p>
				</form>
				<p><strong><a href="Server_Remote_Control.zip">Download Sample</a></strong> (&#147;Server_Remote_Control.zip&#148;, 251.3K)<BR>
<strong><a href="Server_Remote_Control.dmg">Download Sample</a></strong> (&#147;Server_Remote_Control.dmg&#148;, 324.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">{Created: Monday, April 27, 1992 at 2:50 PM    ServerControlIntf.p    Pascal Interface to the Macintosh Libraries        Copyright Apple Computer, Inc. 1990-1992        All rights reserved}UNIT ServerControlIntf;INTERFACE  USES    AppleTalk;  CONST    ServerDispatch = $A094;  { The server control dispatch trap. }    { scCode values }    SCStartServer        = 0;    SCShutDown          = 2;    SCCancelShutDown      = 3;    SCDisconnect        = 4;    SCPollServer        = 5;    SCGetExpFldr        = 6;    SCGetSetupInfo        = 7;    SCSetSetupInfo        = 8;    SCSendMessage        = 9;    SCGetServerStatus      = 10;    SCInstallServerEventProc  = 11;    SCRemoveServerEventProc    = 12;    SCGetServerEventProc    = 13;    SCServerVersion        = 14;    SCSetCopyProtect      = 16;    SCClrCopyProtect      = 17;    SCDisconnectVolUsers    = 18;    SCGetUserNameRec      = 19;    SCGetUserMountInfo      = 20;    SCWakeServer        = 21;    SCSleepServer        = 22;    { all other values of scCode are reserved }    { scFlags bits and masks for disconnectPB }    bUNRFSendMsg        = 13;    { send a message }    UNRFSendMsgMask        = $2000;  { send a message }    { These are error codes that are returned from an SCDisconnect trap }    AlreadyShuttingDown      = -1;    { the server is already shutting down }    AlreadyDisconnecting    = -2;    { the server is already disconnecting }    { scServerType contains the server type, which is interpreted as follows: }    MFSType            = $0000;  { Macintosh File Sharing }    AFSType            = $0001;  { AppleShare File Server }    { scServerVersion is the server version, which is currently interpreted as follows: }    {  $0030 : File Sharing Extension, versions 7.0 and 7.0.1 }    {  $0031 : File Server Extension, version 3.0 }    {  $0032 : File Sharing Extension, version 7.0.2 }    { These are some random constants for SCStartServer }    kCurInstalled        = 0;    { the currently installed server }    kFinderExtn          = 0;    { send high level events to the finder extension }    { scServerFlags bits returned by SCGetServerStatus }    bJBSEnabled         = 12;    { Set if Apple II boot service is enabled }    { These &quot;SCPS&quot; integers are passed back from a SCPollServer call in scServerState: }    { 0 means: 0 &lt;= seconds left &lt; 30 and Network Setup says : &quot;Less than a minute&quot;}    { 1 means: 30 &lt;= seconds left &lt; 90 and Network Setup says : &quot;About a minute&quot;}    { 2 thru 4094: x*60-30 &lt;= seconds left &lt; x*60+30 and NS says: &quot;About X minutes&quot; }    SCPSRunning          = -1;    { Server running normally }    SCPSStartingUp        = -2;    { Server is in the process of starting up }    SCPSJustDisabled      = -3;    { Server is just disabled and there was no startup error }    SCPSDisabledwErr      = -4;    { Server is disabled and there is an &quot;SE&quot; error in scServerError }    SCPSSleeping        = -5;    { Server is temporarily disabled }    { These &quot;SCPD&quot; integers are passed back from a SCPollServer call in scDisconnectState: }    { 0 means: 0 &lt;= seconds left &lt; 30 and FileShare Monitor says : &quot;Less than a minute&quot;}    { 1 means: 30 &lt;= seconds left &lt; 90 and FileShare Monitor says : &quot;About a minute&quot;}    { 2 thru 4094: x*60-30 &lt;= seconds left &lt; x*60+30 and FM says: &quot;About X minutes&quot; }    SCPDNotDisconnecting    = -1;    { Server not disconnecting some one or some group of users }    { These are Server Errors (&quot;SE&quot;) error codes returned in scServerError by }    { a SCPollServer call }    SENoUGFileOpenErr      = 1;     { &quot;The Users &amp; Groups file could not be opened.&quot; }    SENoRealVolsErr        = 2;    { &quot;There are no volumes for AppleShare to use.&quot; }    SEInsuffMFMemErr      = 4;    { &quot;There was not enough memory available to start AppleShare File Service.&quot; }    SECantRegNameErr      = 5;    { &quot;The File Server's name could not be registered on the AppleTalk Network.&quot; }    SECantFindExtnFolder    = 6;    { &quot;The File Server could not be started because the Extensions folder could not be found&quot; }    SEUnExATalkErr        = 7;    { &quot;An unexpected AppleTalk error occurred.&quot; }    SENoMachineName        = 8;    { &quot;You must have a machine name.&quot; }    SECantFindFSExtn      = 9;    { &quot;The File Server could not be started because the File Sharing Extension could not be found&quot; }    SEATalkOffErr        = 10;    { &quot;Appletalk is turned off.&quot; }    SEAppleTalkErr        = 11;    { &quot;AppleTalk could not be activated.&quot; }    SENoInitRunErr        = 12;    { &quot;AppleShare Setup file is not installed in the Server Folder.&quot; }    SESysTooOldErr        = 13;    { &quot;The System File is too old for AppleShare (v3.0).&quot; }    SEInsuffAppMemErr      = 14;    { &quot;There was not enough memory for FileShare to startup.&quot; }    SEBadConfigErr        = 15;    { &quot;AppleShare encountered a problem with the current configuration.&quot; }    SENoDTOnStartupErr      = 16;    { &quot;The Desktop database on volume the startup volume could not be opened.&quot; }    SEDupNameErr        = 17;    { &quot;Duplicate name error when registering.  Please choose another name.&quot; }  TYPE    { The SetupInfoRec used by the SCGetSetupInfo and SCSetSetupInfo calls. }    tLoginMsg = STRING[199];    SetupInfoRecPtr = ^SetupInfoRec;    SetupInfoRec = RECORD        SIVersion: Integer;      { SetupInfoRec version: 1 for File Sharing and AppleShare 3.0 }        SIFlags: Integer;      { 0 for File Sharing and AppleShare 3.0 }        SIMaxLogins: Integer;    { 1..11 for File Sharing; 1..121 for AppleShare 3.0 }        SISrvrUsageLimit: Integer;  { 10 to 100 (percent) }        { All remaining fields in record are only used by the AppleShare file server }        SIVolInfoLocation: Point;  { location of Volume Info window (default is -1,-1) }        SIVolInfoVisible: Boolean;  { is Volume Info window visible (default is TRUE) }        SIUserInfoLocation: Point;  { location of Connected Users window (default is -1,-1) }        SIUserInfoVisible: Boolean;  { is Connected Users window visible (default is TRUE) }        SIShutDownMins: Integer;  { default minutes until shutdown }        SISpare: ARRAY[1..17] OF Integer;  { reserved }        SILoginMsg: tLoginMsg;    { the current Login message }      END;    startParam = RECORD        reserved: LongInt;        reserved2: Integer;        reserved3: Integer;        scCode: Integer;        scStartSelect: Integer;        scEventSelect: Integer;        reserved4: ARRAY[1..4] OF LongInt;      END;    disconnectParam = RECORD        scDiscArrayPtr: LongIntPtr;        scArrayCount: Integer;        reserved: Integer;        scCode: Integer;        scNumMinutes: Integer;        scFlags: Integer;        scMessagePtr: StringPtr;      END;    pollServerParam = RECORD        reserved: LongInt;        reserved2: Integer;        reserved3: Integer;        scCode: Integer;        scServerState: Integer;        scDisconnectState: Integer;        scServerError: Integer;        scSecondsLeft: LongInt;      END;    standardParam = RECORD        scNamePtr: StringPtr;        scVRefNum: Integer;        scLogins: Integer;        scCode: Integer;        scIndex: Integer;        scDirID: LongInt;      END;    setupParam = RECORD        scSetupPtr: SetupInfoRecPtr;        scMaxVolumes: Integer;        scMaxExpFolders: Integer;        scCode: Integer;        scCurMaxSessions: Integer;      END;    statusParam = RECORD        scNamePtr: StringPtr;        reserved2: Integer;        reserved3: Integer;        scCode: Integer;        scServerFlags: Integer;        scNumSessions: Integer;        scUserListModDate: LongInt;        scActivity: Integer;        scVolListModDate: LongInt;      END;    serverEventParam = RECORD        scSEQEntryPtr: Ptr;        reserved2: Integer;        reserved3: Integer;        scCode: Integer;      END;    versionParam = RECORD        scExtNamePtr: StringPtr;        reserved2: Integer;        reserved3: Integer;        scCode: Integer;        scServerType: Integer;        scServerVersion: Integer;      END;    userInfoParam = RECORD        scNamePtr: StringPtr;        reserved2: Integer;        reserved3: Integer;        scCode: Integer;        scPosition: LongInt;        scUNRecID: LongInt;        scUserID: LongInt;        scLoginTime: LongInt;        scLastUseTime: LongInt;        scSocketNum: AddrBlock;      END;    volMountedParam = RECORD        reserved: Ptr;        scVRefNum: Integer;        reserved3: Integer;        scCode: Integer;        scFilesOpen: Integer;        scWriteableFiles: Integer;        scUNRecID: LongInt;        scMounted: Boolean;        scMountedAsOwner: Boolean;      END;    SCParamBlockPtr = ^SCParamBlockRec;    SCParamBlockRec = RECORD        qLink: QElemPtr;        qType: INTEGER;        ioTrap: INTEGER;        ioCmdAddr: Ptr;        ioCompletion: ProcPtr;        ioResult: OSErr;        CASE Integer OF          1: (              startPB: startParam          );          2: (              disconnectPB: disconnectParam          );          3: (              pollServerPB: pollServerParam          );          4: (              standardPB: standardParam          );          5: (              setupPB: setupParam          );          6: (              statusPB: statusParam          );          7: (              serverEventPB: serverEventParam          );          8: (              versionPB: versionParam          );          9: (              userInfoPB: userInfoParam          );          10: (              volMountedPB: volMountedParam          );      END;  { ServerDispatch can be called synchronously only.  Asynchronous server control }  { calls are not supported. }  { Inputs:   A0 points to the SCParamBlockRec. }  {      D0 must be zero. }  {      SCParamBlockRec.scCode indicates the server control call. }  { Outputs:  D0.w and SCParamBlockRec.ioResult contain the result code. }  { Note:    Macintosh File Sharing does not return the result in D0.w }  {      so the glue code below moves it there for you. }  { The glue to call the ServerDispatch trap }  FUNCTION SyncServerDispatch (PBPtr: SCParamBlockPtr): OSErr;  INLINE    $205F,      { MOVEA.L    (A7)+,A0     }    $7000,      { MOVEQ      #$00,D0      }    $A094,      { _ServerDispatch         }    $3028, $0010,  { MOVE.W  ioResult(A0),D0  }    $3E80;      { MOVE.W     D0,(A7)      }IMPLEMENTATIONEND.</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/Server_Remote_Control/listing4.html%3Fid%3DDTS10000211-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/Server_Remote_Control/listing4.html%3Fid%3DDTS10000211-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/Server_Remote_Control/listing4.html%3Fid%3DDTS10000211-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
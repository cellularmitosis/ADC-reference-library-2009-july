<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>TruncText(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING326></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-325.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-327.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-279.html"><B>Chapter 5 - Text Utilities</B></A> / <A HREF="Text-292.html"><B>Text Utilities Reference</B></A><BR><DL><DD><A HREF="Text-299.html"><B>Routines</B></A> / <A HREF="Text-324.html"><B>Truncating Strings</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING326-0></A>
<H3><A NAME=MARKER-2-272></A>TruncText</H3>
 The <CODE>TruncText</CODE> function ensures that a text string fits into the specified pixel width, by truncating the string as necessary. This function makes use of the current script and font. The text string can be up to 32 KB long.<P>
 You can use the <CODE>TruncText</CODE> function to ensure that a string defined by a pointer and a byte length fits into the specified pixel width, by truncating the string in a manner dependent on the font script.<P>
<PRE>
FUNCTION TruncText (width: Integer; textPtr: Ptr; 
                    VAR length: Integer; 
                    truncWhere: TruncCode): Integer;
</PRE>
<DL>
<DT><CODE>width</CODE>
<DD> The number of pixels in which the text string must be displayed in the current script and font.
<DT><CODE>textPtr</CODE>
<DD> A pointer to the text string to be truncated.
<DT><CODE>length</CODE>
<DD> On input, the number of bytes in the text string to be truncated. On output, this value is updated to reflect the length of the (possibly) truncated text.
<DT><CODE>truncWhere</CODE>
<DD> A constant that indicates where the text string should be truncated. <BR>You must set this parameter to one of the constants <CODE>truncEnd</CODE> <BR>or <CODE>truncMiddle</CODE>.
</DL>
<A NAME=HEADING326-8></A>
<H5>DESCRIPTION</H5>
 The <CODE>TruncText</CODE> function ensures that a text string fits into the pixel width specified by the <CODE>width</CODE> parameter by modifying the string, if necessary, through truncation. <CODE>TruncText</CODE> uses the font script to determine how to perform truncation. If truncation occurs, <CODE>TruncText</CODE> inserts a truncation indicator which is the ellipsis (...) in the Roman script system. You can specify which token to use for indicating truncation as the <CODE>tokenEllipsis</CODE> token type in the untoken table of a tokens resource.<P>
 The <CODE>truncWhere</CODE> parameter specifies where truncation is performed. If you supply the <CODE>truncEnd</CODE> value, characters are truncated off the end of the string. If you supply the <CODE>truncMiddle</CODE> value, characters are truncated from the middle of the string; this is useful when displaying pathnames.<A NAME=MARKER-2-224></A><P>
 The <CODE>TruncText</CODE> function returns a result code that indicates whether the string <BR>was truncated.<P>
<A NAME=HEADING326-12></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 <CODE>TruncText</CODE> may move memory; your application should not call this function at interrupt time.<P>
<A NAME=HEADING326-14></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>TruncText</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_ScriptUtil<TD>$820C FFDE</TABLE>
<P>
<A NAME=HEADING326-16></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>Truncated<TD>1<TD>Truncation performed<TR>
<TD>NotTruncated<TD>0<TD>No truncation necessary<TR>
<TD>TruncErr<TD>-1<TD>Truncation necessary, but cannot be performed within the specified width<TR>
<TD>resNotFound<TD>-192<TD>Cannot get the correct <CODE>'itl4'</CODE> resource or resource is not in current format</TABLE>
</H5>
<A NAME=HEADING326-17></A>
<H5>SEE ALSO</H5>
 To determine the width of a string in the current font and script, use the QuickDraw <CODE>StringWidth</CODE> function, which is described in the chapter "QuickDraw Text" in <BR>this book.<A NAME=MARKER-2-123></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-325.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-327.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

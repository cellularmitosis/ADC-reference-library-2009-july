<html><head><title>Mac OS X Developer Tools
 Manual Page For BIO_set_conn_hostname(3ssl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3ssl/BIO_set_conn_hostname" title="Mac OS X Developer Tools
 Manual Page for BIO_set_conn_hostname(3ssl)"><a name="//apple_ref/doc/man/3/BIO_set_conn_hostname" title="Mac OS X Developer Tools
 Manual Page for BIO_set_conn_hostname(3ssl)"><!-- headerDoc=man; indexgroup=Section 3ssl; uid="//apple_ref/doc/man/3ssl/BIO_set_conn_hostname"; name=BIO_set_conn_hostname(3ssl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
BIO_s_connect(3)                                   OpenSSL                                  <a href="BIO_s_connect.3ssl.html#//apple_ref/doc/man/3/BIO_s_connect">BIO_s_connect(3)</a>



<b>NAME</b>
       BIO_s_connect, BIO_set_conn_hostname, BIO_set_conn_port, BIO_set_conn_ip, BIO_set_conn_int_port,
       BIO_get_conn_hostname, BIO_get_conn_port, BIO_get_conn_ip, BIO_get_conn_int_port, BIO_set_nbio,
       BIO_do_connect - connect BIO

<b>SYNOPSIS</b>
        #include &lt;openssl/bio.h&gt;

        BIO_METHOD * BIO_s_connect(void);

        BIO *BIO_new_connect(char *name);

        long BIO_set_conn_hostname(BIO *b, char *name);
        long BIO_set_conn_port(BIO *b, char *port);
        long BIO_set_conn_ip(BIO *b, char *ip);
        long BIO_set_conn_int_port(BIO *b, char *port);
        char *BIO_get_conn_hostname(BIO *b);
        char *BIO_get_conn_port(BIO *b);
        char *BIO_get_conn_ip(BIO *b, dummy);
        long BIO_get_conn_int_port(BIO *b, int port);

        long BIO_set_nbio(BIO *b, long n);

        int BIO_do_connect(BIO *b);

<b>DESCRIPTION</b>
       <u>BIO</u><b>_</b><u>s</u><b>_</b><u>connect()</u> returns the connect BIO method. This is a wrapper round the platform's TCP/IP socket
       connection routines.

       Using connect BIOs, TCP/IP connections can be made and data transferred using only BIO routines. In
       this way any platform specific operations are hidden by the BIO abstraction.

       Read and write operations on a connect BIO will perform I/O on the underlying connection. If no
       connection is established and the port and hostname (see below) is set up properly then a connection
       is established first.

       Connect BIOs support <u>BIO</u><b>_</b><u>puts()</u> but not <u>BIO</u><b>_</b><u>gets()</u>.

       If the close flag is set on a connect BIO then any active connection is shutdown and the socket
       closed when the BIO is freed.

       Calling <u>BIO</u><b>_</b><u>reset()</u> on a connect BIO will close any active connection and reset the BIO into a state
       where it can connect to the same host again.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>fd()</u> places the underlying socket in <b>c</b> if it is not NULL, it also returns the socket . If <b>c</b>
       is not NULL it should be of type (int *).

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u> uses the string <b>name</b> to set the hostname.  The hostname can be an IP address.
       The hostname can also include the port in the form hostname:port . It is also acceptable to use the
       form "hostname/any/other/path" or "hostname:port/any/other/path".

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>port()</u> sets the port to <b>port</b>. <b>port</b> can be the numerical form or a string such as "http".
       A string will be looked up first using <u>getservbyname()</u> on the host platform but if that fails a
       standard table of port names will be used. Currently the list is http, telnet, socks, https, ssl,
       ftp, gopher and wais.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>ip()</u> sets the IP address to <b>ip</b> using binary form, that is four bytes specifying the IP
       address in big-endian form.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u> sets the port using <b>port</b>. <b>port</b> should be of type (int *).

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u> returns the hostname of the connect BIO or NULL if the BIO is initialized but
       no hostname is set.  This return value is an internal pointer which should not be modified.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>port()</u> returns the port as a string.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>ip()</u> returns the IP address in binary form.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u> returns the port as an int.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>nbio()</u> sets the non blocking I/O flag to <b>n</b>. If <b>n</b> is zero then blocking I/O is set. If <b>n</b> is 1
       then non blocking I/O is set. Blocking I/O is the default. The call to <u>BIO</u><b>_</b><u>set</u><b>_</b><u>nbio()</u> should be made
       before the connection is established because non blocking I/O is set during the connect process.

       <u>BIO</u><b>_</b><u>new</u><b>_</b><u>connect()</u> combines <u>BIO</u><b>_</b><u>new()</u> and <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u> into a single call: that is it
       creates a new connect BIO with <b>name</b>.

       <u>BIO</u><b>_</b><u>do</u><b>_</b><u>connect()</u> attempts to connect the supplied BIO. It returns 1 if the connection was established
       successfully. A zero or negative value is returned if the connection could not be established, the
       call <u>BIO</u><b>_</b><u>should</u><b>_</b><u>retry()</u> should be used for non blocking connect BIOs to determine if the call should
       be retried.

<b>NOTES</b>
       If blocking I/O is set then a non positive return value from any I/O call is caused by an error
       condition, although a zero return will normally mean that the connection was closed.

       If the port name is supplied as part of the host name then this will override any value set with
       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>port()</u>. This may be undesirable if the application does not wish to allow connection to
       arbitrary ports. This can be avoided by checking for the presence of the ':' character in the passed
       hostname and either indicating an error or truncating the string at that point.

       The values returned by <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u>, <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>port()</u>, <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>ip()</u> and
       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u> are updated when a connection attempt is made. Before any connection attempt
       the values returned are those set by the application itself.

       Applications do not have to call <u>BIO</u><b>_</b><u>do</u><b>_</b><u>connect()</u> but may wish to do so to separate the connection
       process from other I/O processing.

       If non blocking I/O is set then retries will be requested as appropriate.

       It addition to <u>BIO</u><b>_</b><u>should</u><b>_</b><u>read()</u> and <u>BIO</u><b>_</b><u>should</u><b>_</b><u>write()</u> it is also possible for
       <u>BIO</u><b>_</b><u>should</u><b>_</b><u>io</u><b>_</b><u>special()</u> to be true during the initial connection process with the reason
       BIO_RR_CONNECT. If this is returned then this is an indication that a connection attempt would block,
       the application should then take appropriate action to wait until the underlying socket has connected
       and retry the call.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u>, <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>port()</u>, <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>ip()</u>, <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u>,
       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u>, <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>port()</u>, <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>ip()</u>, <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u>,
       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>nbio()</u> and <u>BIO</u><b>_</b><u>do</u><b>_</b><u>connect()</u> are macros.

<b>RETURN</b> <b>VALUES</b>
       <u>BIO</u><b>_</b><u>s</u><b>_</b><u>connect()</u> returns the connect BIO method.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>fd()</u> returns the socket or -1 if the BIO has not been initialized.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u>, <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>port()</u>, <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>ip()</u> and <u>BIO</u><b>_</b><u>set</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u> always
       return 1.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>hostname()</u> returns the connected hostname or NULL is none was set.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>port()</u> returns a string representing the connected port or NULL if not set.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>ip()</u> returns a pointer to the connected IP address in binary form or all zeros if not
       set.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>conn</u><b>_</b><u>int</u><b>_</b><u>port()</u> returns the connected port or 0 if none was set.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>nbio()</u> always returns 1.

       <u>BIO</u><b>_</b><u>do</u><b>_</b><u>connect()</u> returns 1 if the connection was successfully established and 0 or -1 if the
       connection failed.

<b>EXAMPLE</b>
       This is example connects to a webserver on the local host and attempts to retrieve a page and copy
       the result to standard output.

        BIO *cbio, *out;
        int len;
        char tmpbuf[1024];
        ERR_load_crypto_strings();
        cbio = BIO_new_connect("localhost:http");
        out = BIO_new_fp(stdout, BIO_NOCLOSE);
        if(BIO_do_connect(cbio) &lt;= 0) {
               fprintf(stderr, "Error connecting to server\n");
               ERR_print_errors_fp(stderr);
               /* whatever ... */
               }
        BIO_puts(cbio, "GET / HTTP/1.0\n\n");
        for(;;) {
               len = BIO_read(cbio, tmpbuf, 1024);
               if(len &lt;= 0) break;
               BIO_write(out, tmpbuf, len);
        }
        BIO_free(cbio);
        BIO_free(out);

<b>SEE</b> <b>ALSO</b>
       TBA



0.9.7l                                           2000-10-19                                 <a href="BIO_s_connect.3ssl.html#//apple_ref/doc/man/3/BIO_s_connect">BIO_s_connect(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/BIO_set_conn_hostname.3ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/BIO_set_conn_hostname.3ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/BIO_set_conn_hostname.3ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head>
<script language="JavaScript" src="../../../../../../../../../../frametest.js"></script>
<title>WORequest<</title></head>
<body bgcolor=#ffffff>

<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header -->

<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="../frameset.html" target="_top">WebObjects Framework Reference</a>
</font>
<br><br>
<!--end of path -->

<!-- start of navigation -->
<a href="WOMailDelivery.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="WORequestHandler.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<!-- end of navigation -->


<hr><br>
 
<h1><a name="//apple_ref/java/cl/WORequest">WORequest</a>
 <BR>
</h1>
<p><B>Inherits From:</B><BR>  
NSObject</a>

<p><B>Inherits From:</B><BR>  
com.apple.yellow.webobjects

<p><a name="36">
<hr width=50% align=left>
<h2>Class Description  </h2>
</a>A WORequest object typically represents an HTTP request and thus constitutes an event that requires a reaction from a WebObjects application.  WORequest objects encapsulate the data transmitted to a HTTP server in a request. Requests originate from user actions in a browser, such as the submission of a URL or a mouse click on a hyperlink, button, or active image in a page; from the perspective of WebObjects, the URL identifies a WebObjects application and the click on a control usually results in the display of a page of a WebObjects application.  Such actions cause the browser to send an HTTP request to an HTTP server, which forwards the request to a WebObjects adaptor, which converts it to a WORequest object and sends that object to the appropriate request handler.<p>
WORequest objects can also be created from HTTP requests sent by client-side components (Java applets specially modified to interact with the server side of a WebObjects application), and from HTTP requests submitted by custom client-side programs that don't use the Java client-side components. More rarely, WORequest objects can originate from custom adaptors that handle HTTP requests<em> or</em> non-HTTP events. (All the adaptors shipped with WebObjects handle HTTP events only).<p>
Since adaptors usually create WORequest objects, and since you can usually use WebObjects' adaptors without modifications, you probably won't have to create your own instances of WORequest in your code (although you can if you need to).  More typically, your code will obtain information from WORequest objects as they become available during certain points in the request-response loop.  The application supplies WORequest objects as arguments in the <code>takeValuesFromRequest:inContext:</code> and <code>invokeActionForRequest:inContext:</code> methods, which are implementable by WOApplication, <a href="WOSession.html">WOSession</a>, <a href="WOComponent.html">WOComponent</a>, and <a href="WOElement.html">WOElement</a> objects. You can also obtain the current WORequest object at any time during request handling through WOContext's <a href="WOContext.html#105"><code>request</code></a> method. <p>
<B>Note:	</B>
Because WORequest objects usually correspond to HTTP requests, the data they encapsulate is 
almost the same as what you would find in an HTTP request.  Thus an understanding of HTTP 
requests is important for understanding the data vended by WORequest objects. A recommended 
prerequisite therefore is to review the current HTTP specification or HTTP documentation. 
<p><a name="40">
<hr width=50% align=left>
<h2>Method Types  </h2>
</a><dl><dt>Constructors
<dl><dt><a href="WORequest.html#13478">WORequest</a>
</dl><dt>Working with cookies
<dl><dt><a href="WORequest.html#63">cookieValueForKey</a>
<dt><a href="WORequest.html#67">cookieValues</a>
<dt><a href="WORequest.html#71">cookieValuesForKey</a>
</dl><dt>Form values
<dl><dt><a href="WORequest.html#75">defaultFormValueEncoding</a>
<dt><a href="WORequest.html#79">formValueEncoding</a>
<dt><a href="WORequest.html#83">formValueForKey</a>
<dt><a href="WORequest.html#87">formValueKeys</a>
<dt><a href="WORequest.html#91">formValues</a>
<dt><a href="WORequest.html#95">formValuesForKey</a>
<dt><a href="WORequest.html#119">isFormValueEncodingDetectionEnabled</a>
</dl><dt>Headers
<dl><dt><a href="WORequest.html#99">headerForKey</a>
<dt><a href="WORequest.html#103">headerKeys</a>
<dt><a href="WORequest.html#107">headersForKey</a>
</dl><dt>Request handling
<dl><dt><a href="WORequest.html#131">requestHandlerKey</a>
<dt><a href="WORequest.html#4232">requestHandlerPath</a>
<dt><a href="WORequest.html#139">requestHandlerPathArray</a>
</dl><dt>Form Values
<dl><dt><a href="WORequest.html#5371">setDefaultFormValueEncoding</a>
<dt><a href="WORequest.html#147">setFormValueEncodingDetectionEnabled</a>
</dl><dt>Obtaining attributes
<dl><dt><a href="WORequest.html#43">adaptorPrefix</a>
<dt><a href="WORequest.html#47">applicationName</a>
<dt><a href="WORequest.html#51">applicationNumber</a>
<dt><a href="WORequest.html#55">browserLanguages</a>
<dt><a href="WORequest.html#59">content</a>
<dt><a href="WORequest.html#111">httpVersion</a>
<dt><a href="WORequest.html#123">isFromClientComponent</a>
<dt><a href="WORequest.html#127">method</a>
<dt><a href="WORequest.html#151">uri</a>
<dt><a href="WORequest.html#155">userInfo</a>
</dl></dl><a name="13476">
<hr width=50% align=left>
<h2>Constructors </h2>
</a><a name="13478">
<hr width=25% align=left>
<h3> WORequest</h3>
</a>public <code>WORequest</code>()<p>
public <code>WORequest</code>(java.lang.String <em>aMethod</em>, <br>java.lang.String <em>anURL</em>, <br>java.lang.String <em>anHTTPVersion</em>, <br>NSDictionary <em>someHeaders</em>,<br>NSData <em>aContent</em>,<br>NSDictionary <em>userInfo</em>)<p>
Returns a WORequest object initialized with the specified parameters. The first two arguments are required:<p>
<ul><li><em>aMethod</em> must be either "GET" or "POST"; anything else causes an exception to be thrown.
<li><em>aURL</em> must be a valid URL; if the URL is invalid, an exception is thrown.
</ul>If either argument is omitted, the constructor throws an exception.<p>
The remaining arguments are optional; if you specify<code> null</code> for these, the constructor substitutes default values or initializes them to<code> null</code>. The<em> someHeaders</em> argument (if not<code> null</code>) should be a dictionary whose String keys correspond to header names and whose values are arrays of one or more strings corresponding to the values of each header. The<em> userInfo</em> dictionary can contain any information that the WORequest object wants to pass along to other objects involved in handling the request.<p>
For more information on each argument, see the description of the corresponding accessor method.<p>
<B>See also: </B>  
<a href="WORequest.html#127"><code>method</code></a>, <a href="WORequest.html#111"><code>httpVersion</code></a>, <a href="WORequest.html#59"><code>content</code></a>, <a href="WORequest.html#155"><code>userInfo</code></a>
<p><a name="5359">
<hr width=50% align=left>
<h2>Instance Methods </h2>
</a><a name="43">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/adaptorPrefix">adaptorPrefix</a></h3>
</a>public java.lang.String <code>adaptorPrefix</code>()<p>
Returns the part of the request's URI that is specific to a particular  adaptor.  This is typically a URL ending in "/WebObjects",  "/WebObjects.exe", "/WebObjects.dll", or uppercase versions of these strings. WebObjects uses a request's adaptor prefix to set the adaptor prefix  in the generated response's URL.  A WORequest must always have an adaptor prefix.<p>
<B>See also: </B>  
<a href="WORequest.html#47"><code>applicationName</code></a>, <a href="WORequest.html#51"><code>applicationNumber</code></a>, <a href="WORequest.html#151"><code>uri</code></a> 
<p><a name="47">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/applicationName">applicationName</a></h3>
</a>public java.lang.String <code>applicationName</code>()<p>
Returns the part of the request's URI that identifies the application  the request is intended for.  This name does not include the ".woa"  extension of an application directory.  A WORequest must always  have an application name specified.<p>
<B>See also: </B>  
<a href="WORequest.html#43"><code>adaptorPrefix</code></a>, <a href="WORequest.html#51"><code>applicationNumber</code></a>, <code><a href="WORequest.html#151">uri</a>
</code><p><a name="51">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/applicationNumber">applicationNumber</a></h3>
</a>public int <code>applicationNumber</code>()<p>
Returns the part of the request's URI that identifies the particular  application instance the request is intended for.  This attribute is -1 if the request can be handled by any instance of the application,  which is always the case for the first request in a session.<p>
<B>See also: </B>  
<a href="WORequest.html#47"><code>applicationName</code></a>, <a href="WORequest.html#151"><code>uri</code></a>
<p><a name="55">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/browserLanguages">browserLanguages</a></h3>
</a>public NSArray <code>browserLanguages</code>()<p>
Returns the language preference list from the user's browser.<p>
<a name="59">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/content">content</a></h3>
</a>public NSData <code>content</code>()<p>
Returns the content the WORequest was initialized with (which defaults to <code>null</code>).  The format of the data is undefined, but you can usually  identify it by the value of the "content-type" header.<p>
<B>See also: </B>  
<a href="WORequest.html#111"><code>httpVersion</code></a>, <a href="WORequest.html#127"><code>method</code></a> 
<p><a name="63">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/cookieValueForKey">cookieValueForKey</a></h3>
</a>public java.lang.String <code>cookieValueForKey</code>(java.lang.String <em>aKey</em>)<p>
Returns a string value for the cookie key specified by <em>aKey</em>.<p>
<B>See also: </B>  
<a href="WORequest.html#67"><code>cookieValues</code></a>, <a href="WORequest.html#71"><code>cookieValuesForKey</code></a>, <a href="WOCookie.html">WOCookie</a> class specification
<p><a name="67">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/cookieValues">cookieValues</a></h3>
</a>public NSDictionary <code>cookieValues</code>()<p>
Returns a dictionary of cookie values and cookie keys.<p>
<B>See also: </B>  
<a href="WORequest.html#63"><code>cookieValueForKey</code></a>, <a href="WORequest.html#71"><code>cookieValuesForKey</code></a>, <a href="WOCookie.html">WOCookie</a> class specification
<p><a name="71">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/cookieValuesForKey">cookieValuesForKey</a></h3>
</a>public NSArray <code>cookieValuesForKey</code>(java.lang.String <em>aKey</em>)<p>
Returns an array of values for the cookie key specified by <em>aKey</em>. Use this method to retrieve information stored in a cookie in an HTTP header. Valid keys are specified in the cookie specification.<p>
<B>See also: </B>  
<a href="WORequest.html#63"><code>cookieValueForKey</code></a>, <a href="WORequest.html#67"><code>cookieValues</code></a>, <a href="WOCookie.html">WOCookie</a> class specification
<p><a name="75">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/defaultFormValueEncoding">defaultFormValueEncoding</a></h3>
</a>public int <code>defaultFormValueEncoding</code>()<p>
Returns the <em>default</em> string encoding the WORequest object uses for converting  form values from ASCII to Unicode. It uses the default encoding only when it can detect no encoding from the ASCII form values or if encoding detection is disabled.  If no default form-value encoding is set, NSISOLatin1StringEncoding is used.<p>
<B>See also: </B>  
<code><a href="WORequest.html#5371">setDefaultFormValueEncoding</a>
</code><p><a name="79">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/formValueEncoding">formValueEncoding</a></h3>
</a>public int <code>formValueEncoding</code>()<p>
Returns the encoding last used to convert form values from ASCII to  Unicode.  This encoding is either the result of an earlier detection of form-value encoding or the default form value encoding.<p>
<B>See also: </B>  
<a href="WORequest.html#75"><code>defaultFormValueEncoding</code></a>, <code><a href="WORequest.html#119">isFormValueEncodingDetectionEnabled</a>
</code><p><a name="83">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/formValueForKey">formValueForKey</a></h3>
</a>public java.lang.Object <code>formValueForKey</code>(java.lang.String <em>aKey</em>)<p>
Returns a form value identified by the name <em>aKey</em>.  If there are multiple form values identified by the same name, only one of the values is returned, and which of these values is not defined.  You should use this method for  names that you know occur only once in the name/value pairs of form data.<p>
<a name="87">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/formValueKeys">formValueKeys</a></h3>
</a>public NSArray <code>formValueKeys</code>()<p>
Returns an array of NSStrings corresponding to the names (or keys) used to access values of a form.  The array is not sorted in any particular order, and is  not necessarily sorted in the same order on successive invocations of this  method.<p>
<a name="91">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/formValues">formValues</a></h3>
</a>public NSDictionary <code>formValues</code>()<p>
Returns an NSDictionary containing all of the form data name/value pairs.<p>
<a name="95">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/formValuesForKey">formValuesForKey</a></h3>
</a>public NSArray <code>formValuesForKey</code>(java.lang.String <em>aKey</em>)<p>
Returns an array of all values (as Strings) of the form identified by the name <em>aKey</em>.  This array is not sorted in any particular order, and is not  necessarily sorted in the same order on successive invocations of this method.  You should use this method when you know that a name (key) used for accessing form data can be matched with more than one value.<p>
<a name="99">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/headerForKey">headerForKey</a></h3>
</a>public java.lang.String <code>headerForKey</code>(java.lang.String <em>aKey</em>)<p>
Returns one value of a particular header in the header dictionary the  request was initialized with.  This will be a string corresponding to  one of the values of the header whose name is passed in as the key  argument.  If the specified header has multiple values, only one of  these values is returned, and which one of them this is is not defined.  However, on successive calls to this method, the same value will always  be returned.  This method is intended to be used for headers that are  known to have only one value.<p>
<a name="103">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/headerKeys">headerKeys</a></h3>
</a>public NSArray <code>headerKeys</code>()<p>
Returns an array of the keys of the header dictionary the request was  initialized with (which default to an empty dictionary).  This will be  an array of strings corresponding to the headers' names.  The array is  not sorted in any particular order, and not necessarily sorted in the  same order on successive calls to this method.<p>
<a name="107">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/headersForKey">headersForKey</a></h3>
</a>public NSArray <code>headersForKey</code>(java.lang.String <em>aKey</em>)<p>
Returns the values of a particular header that is identified by <em>aKey</em>.  The returned object contains Strings sorted in no particular order, but which will always be sorted in the same order on successive calls to this method.  Use this method for headers that you know have (or can have) multiple values.<p>
<a name="111">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/httpVersion">httpVersion</a></h3>
</a>public java.lang.String <code>httpVersion</code>()<p>
Returns the HTTP version the request was initialized with.  An application uses the WORequest's HTTP version to initialize the HTTP  version of the response that is generated by request handling.  The  WORequest's HTTP version typically derives from the HTTP version of the  client (for example, the browser) that initiated the request.<p>
<a name="119">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/isFormValueEncodingDetectionEnabled">isFormValueEncodingDetectionEnabled</a></h3>
</a>public boolean <code>isFormValueEncodingDetectionEnabled</code>()<p>
Returns whether detection of form-value encoding is allowed to take place  when form values are obtained.<p>
<B>See also: </B>  
<code><a href="WORequest.html#147">setFormValueEncodingDetectionEnabled</a>
</code><p><a name="123">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/isFromClientComponent">isFromClientComponent</a></h3>
</a>public boolean <code>isFromClientComponent</code>()<p>
Returns whether the request originated from an event in a client-side  component (that is, a Java applet that can interact with the server side of a WebObjects application).<p>
If you use dynamic elements and write write HTML code in the response, you should check that the request is not from a client-side component before writing into the response.<p>
<a name="127">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/method">method</a></h3>
</a>public java.lang.String <code>method</code>()<p>
Returns the method the WORequest object was initialized with.  A WORequest's method  defines where it will look for form values.  The only currently  supported methods are "GET" and "PUT", which have the same meaning as  the HTTP request method tokens of the same name.<p>
<B>See also: </B>  
<a href="WORequest.html#59"><code>content</code></a>, <code><a href="WORequest.html#111">httpVersion</a>
</code><p><a name="131">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/requestHandlerKey">requestHandlerKey</a></h3>
</a>public java.lang.String <code>requestHandlerKey</code>()<p>
<em>Returns the part of the request's URI which identifies the request handler. This identifies the request handle which will process the reuquest and cannot be </em><em>nil</em><em>.</em><p>
<a name="4232">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/requestHandlerPath">requestHandlerPath</a></h3>
</a>public java.lang.String <code>requestHandlerPath</code>()<p>
<em>Returns the part of the URL which identifies, for a given request handler, which information is requested. Different request handlers use this part of the URL in different ways.</em><p>
<a name="139">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/requestHandlerPathArray">requestHandlerPathArray</a></h3>
</a>public NSArray <code>requestHandlerPathArray</code>()<p>
<em>Returns the request handler path decomposed into elements.</em><p>
<a name="8089">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/sessionID">sessionID</a></h3>
</a>public native java.lang.String <code>sessionID</code>()<p>
Returns the session ID, or <code>null</code> if no session ID is found. This method first looks for the session ID in the URL, then checks the form values, and finally checks to see if the session ID is stored in a cookie.<p>
<a name="5371">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/setDefaultFormValueEncoding">setDefaultFormValueEncoding</a></h3>
</a>public void <code>setDefaultFormValueEncoding</code>(int <em>anEncoding</em>)<p>
Sets the default string encoding for the receiver to use when converting  its form values from ASCII to Unicode. The default string encoding is called into play if the WORequest cannot detect an encoding from the ASCII form values or if encoding detection is disabled.  If no default form value encoding is explicitly set, the WORequest uses NSISOLatin1StringEncoding.<p>
<B>See also: </B>  
<a href="WORequest.html#75"><code>defaultFormValueEncoding</code></a>, <code><a href="WORequest.html#147">setFormValueEncodingDetectionEnabled</a>
</code><p><a name="147">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/setFormValueEncodingDetectionEnabled">setFormValueEncodingDetectionEnabled</a></h3>
</a>public void <code>setFormValueEncodingDetectionEnabled</code>(boolean <em>flag</em>)<p>
Enables or disables automatic detection of the best encoding for the receiver to use when it converts form values from ASCII to Unicode.  When detection is enabled,  a WORequest object scans the ASCII form values and applies heuristics to decide which is the best encoding to use.  If no specific encoding is discernible, or if detection is  disabled, the WORequest uses the default form value encoding for the conversion.<p>
<B>See also: </B>  
<a href="WORequest.html#119"><code>isFormValueEncodingDetectionEnabled</code></a>,<code><a href="WORequest.html#5371">setDefaultFormValueEncoding</a>
</code><p><a name="151">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/uri">uri</a></h3>
</a>public java.lang.String <code>uri</code>()<p>
Returns the Uniform Resource Identifier (URI) the WORequest was initialized  with. For a session's first request, the URI indicates the resource that the request is seeking (such as a WebObjects application);  for subsequent requests in the session, the URI indicates which page of the application should handle the request. If the request was caused (as is usually the case) by a web browser submitting a URL to an HTTP server, the URI is that part of the URL that follows the port number. Because the format of WebObjects URLs and the corresponding request URI might change between different versions of WebObjects, you should not attempt to parse the URI returned by this method.  Instead, use WORequest's accessor methods to access particular URI/URL components.<p>
<B>See also: </B>  
<a href="WORequest.html#43"><code>adaptorPrefix</code></a>, <a href="WORequest.html#47"><code>applicationName</code></a>, <code><a href="WORequest.html#51">applicationNumber</a>
</code><p><a name="155">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/WORequest/userInfo">userInfo</a></h3>
</a>public NSDictionary <code>userInfo</code>()<p>
Returns the value of the user information the receiver was initialized  with (<code>null</code> by default).  WebObjects imposes no restrictions on the  format or content of the user information dictionary.  In fact, WebObjects classes do not themselves use the dictionary, but just pass it around as the request is handled. Custom adaptors, for example, could initialize the dictionary with special information for other objects of an application.<p>
<dl><dt>
</dl>
<hr><br>
 
<a href="WOMailDelivery.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="WORequestHandler.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<hr><br>
 


<i>Copyright &#169; 1998, Apple Computer, Inc.   All rights
reserved.</i>

<!-- Last updated: 09/10/98 16:20:04 -->

</body>
</html>

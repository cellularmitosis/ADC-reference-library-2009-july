<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Collections Programming Topics for Core Foundation: Types of Collections</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Types of Collections"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001129" title="Types of Collections"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000421" target="_top">Core Foundation</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000421-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">Collections Programming Topics for Core Foundation</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="common.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="custom.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001129-CJBEJBHH" title="Types of Collections"></a><hr /><H1>Types of Collections</H1>

<p>Although the major collection types of Core
Foundation—arrays, dictionaries, sets, bags, and trees—have
characteristics in common, they each have distinct ways of organizing
the data elements they contain and, in some cases, restricting which
elements they contain. </p>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="types.html#//apple_ref/doc/uid/20001129-102718-CHDCJHGC">Arrays</a>
				
			<br/>
			
        
			
			
				<a href="types.html#//apple_ref/doc/uid/20001129-102779-CHDBEIHH">Dictionaries</a>
				
			<br/>
			
        
			
			
				<a href="types.html#//apple_ref/doc/uid/20001129-102882-TPXREF103">Sets and Bags</a>
				
			<br/>
			
        
			
			
				<a href="types.html#//apple_ref/doc/uid/20001129-102910-TPXREF104">Trees</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001129-102718" title="Arrays"></a><a name="//apple_ref/doc/uid/20001129-102718-CHDCJHGC" title="Arrays"></a><h2>Arrays</h2>
<p>A Core Foundation array—an object of opaque type CFArray—is
an ordered, compact container of values. The values are in sequential
order and the key for accessing these values is their <strong>index</strong>,
an integer specifying a value’s position in the sequence. The
range of indexes is from 0 to <em>n</em>-1 where <em>n</em> is
the number of values in the array. An index of 0 identifies the
first value in the array. You can think of arrays as numbered slots.</p>
<p>Arrays are ideal for programmatic situations where sequential
position is significant, such as lists whose items are ranked according
to some scheme (priority, for example) or where there is a mapping
between values in the array and items in list-type controls such
as menus. However, you can use arrays as general-purpose containers
for holding and iterating over collected values.</p>
<p>An array is said to be compact because, with mutable arrays,
deleting a value does not leave a gap in the array. The values with
higher-numbered indexes have their indexes decremented by 1. If
you insert a value, all subsequent elements have their keys incremented
by 1. Because of this behavior, the key for accessing a particular
object may change over time as values are inserted into and deleted
from an array. But the set of valid indexes is always between 0
and <em>n</em>-1.</p>
<p>The access time for a value in the array is guaranteed to
be at worst <code>O(log N)</code> for
any implementation, current and future, but will often be <code>O(1)</code> (that
is, constant time). Linear search operations similarly have a worst-case
complexity of <code>O(N*log N)</code>,
though typically the bounds will be tighter. Insertion or deletion
operations are typically linear in the number of objects in the
array, but may be <code>O(N*log N)</code> clearly
in the worst case in some implementations. There are no favored
positions within the array for performance; for example, it is not
necessarily faster to access values with low indexes or to insert
or delete values with high indices.</p>
<a name="//apple_ref/doc/uid/20001129-102779" title="Dictionaries"></a><a name="//apple_ref/doc/uid/20001129-102779-CHDBEIHH" title="Dictionaries"></a><h2>Dictionaries</h2>
<p>A dictionary—an object of the CFDictionary type—is a hashing-based
collection whose keys for accessing its values are arbitrary, program-defined
pieces of data (or pointers to data). Although the key is usually
a string (or, in Core Foundation, a CFString object), it can be
anything that can fit into the size of a pointer—an integer, a
reference to a Core Foundation object, even a pointer to a data
structure (unlikely as that might be). The keys of dictionaries
are unlike the keys of the other collection objects in that, conceptually,
they are also contained by the collection along with the values.
Dictionaries are primarily useful for holding and organizing data
that can be labeled, such as values extracted from text fields in
the user interface.</p>
<p>In Core Foundation, a dictionary differs from an array in
that the key used to access a particular value in the dictionary
remains the same as values are added to or removed from the dictionary—that
is, until a value associated with a particular key is replaced or removed.
In an array, the key (that is, the index) that is used to retrieve
a particular value can change over time as values are added to or
deleted from the array. Also, unlike an array, a dictionary does
not put its values in any order. To enable later retrieval of a
value, the key of the key-value pair should be constant (or be treated
as constant); if the key changes after being used to put a value
in the dictionary, the value might not be retrievable. The keys
of a dictionary form a set; in other words, keys are guaranteed
to be unique in a dictionary.</p>
<p>Although a customization of the CFDictionary type might not
use hashing and a hash table for storage of the values, the keys
require both a function that generates hash codes and a function
that tests for equality of two keys based on their hash codes. These
two functions together must maintain the invariant that</p>
<div class="codesample"><table><tr><td scope="row"><pre>if equal(X,Y) then<span></span></pre></td></tr><tr><td scope="row"><pre>    hash(X) == hash(Y)<span></span></pre></td></tr></table></div>
<p>Although the converse of this logic is not generally true,
the contra positive is required by Boolean logic:</p>
<div class="codesample"><table><tr><td scope="row"><pre>if hash(X) != hash(Y),<span></span></pre></td></tr><tr><td scope="row"><pre>    then !equal(X,Y)<span></span></pre></td></tr></table></div>
<p>If the <code>hash</code> and <code>equal</code> key
callbacks are <code>NULL</code>, the
key is used as a pointer-sized integer and pointer equality is used.
For best performance, you should try to provide a <code>hash</code> callback that
computes sufficiently dispersed hash codes for the key set.</p>
<p>The access time for a value in a CFDictionary object is guaranteed
to be at worst <code>O(log N)</code> for
any implementation, but is often <code>O(1)</code> (constant
time). Insertion or deletion operations are typically in constant
time as well, but are <code>O(N*log N)</code> in
the worst cases. It is faster to access values through a key than
accessing them directly. Dictionaries tend to use significantly
more memory than an array with the same number of values.</p>
<a name="//apple_ref/doc/uid/20001129-102882" title="Sets and Bags"></a><a name="//apple_ref/doc/uid/20001129-102882-TPXREF103" title="Sets and Bags"></a><h2>Sets
and Bags</h2>
<p>Sets and bags are related types of collections. What they
have in common is that the key for accessing a value in the collection
is the value itself. The difference between sets and bags is the
membership “rule” for values. With sets, if the value already
exists in the collection, an identical value cannot be added to
the set; conversely, you can add any value to a bag even if the
bag already holds that value.</p>
<p>This “uniquing” functionality (or lack thereof) can have
many uses. Say, for example, that your program is searching the
Internet and you want to keep all qualifying URLs but don’t want
duplicates; a set would work nicely for this purpose. A bag could
be useful for statistical sampling; you could put all collected
values in it and after you finish collecting data, you could query
it for the frequency of each value.</p>
<p>Equality of key value and contained value is determined by
a callback function that you can define. This function could set
any criterion for equality. For example, the values of a set or
bag could be custom structures representing a customer record; the
function could decide that the external (key) and contained values
are the same if the value of the account-number field in both structures
is the same. (As with all collections, you can also specify default
callback functions when Core Foundation objects are the values in
a set or bag.) For sets (as with dictionaries), the <code>equal</code> callback
function also decides which values can legally be added to the collection.</p>
<a name="//apple_ref/doc/uid/20001129-102910" title="Trees"></a><a name="//apple_ref/doc/uid/20001129-102910-TPXREF104" title="Trees"></a><h2>Trees</h2>
<p>You use trees—objects of the CFTree type—to represent
nodes in hierarchically organized structures, such as a file system
with its files and directories. Each node in this tree structure
is a tree object, and that object has relationships to other tree
objects. Conceptually, objects of the CFTree type are significantly
different from other Core Foundation collection objects. Arrays,
dictionaries, sets, and bags are containers of (typically) multiple
values, but tree objects have a one-to-one relationship with their
data. In other words, a tree object is associated with only one
pointer-size value (although that value can be, for instance, a
pointer to a structure with multiple members or even a reference
to a collection object). However, the essential characteristic of
a tree object is that it keeps references to multiple subtrees,
each with its own chunk of data, and in that sense a interlinked
group of tree objects—the tree structure—can be considered a
collection.</p>
<p>The parent-child paradigm is useful for understanding tree
objects. As stated above, these objects stand in a hierarchical
relationship to each other, and at the top of the hierarchy is the
“root” tree. This tree is not a subtree of any other tree—that
is, it has no parent tree—but it has one or more subtrees, or
child trees. And these child trees can be the parents of other trees. </p>
<p>Tree objects have certain rules governing their relationships.
When you add children to a tree, the parent retains them, but the
children do not retain their parent. Additionally, a tree may not
have as one of its child trees a tree of which it is itself a child;
no cycles are allowed in the traversal of a tree and its subtrees.
Two trees with the same parent tree are called “siblings” of
each other. Conceptually, siblings are in sequential order, as in
a linked list. Operations performed on the children of a tree apply
only to those direct descendents; in other words, they do not recursively
affect any subtrees of those children.</p>
<p>Unlike the other collection objects, a tree has no need for
callbacks that operate on contained values because, structurally,
these values can be only of the type CFTree. However, to be useful
a tree object must have some data associated with it, and this data can
determine its relationships with other trees. When you create a
Core Foundation tree object, you must define a “context” for
the tree. The context identifies the associated data and defines
callbacks that are invoked to perform necessary operations on the
data, such as retaining, releasing, comparing, and describing it.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="common.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="custom.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2003-08-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/CoreFoundation/Conceptual/CFCollections/Concepts/types.html%3Fid%3D10000124i-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/CoreFoundation/Conceptual/CFCollections/Concepts/types.html%3Fid%3D10000124i-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/CoreFoundation/Conceptual/CFCollections/Concepts/types.html%3Fid%3D10000124i-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

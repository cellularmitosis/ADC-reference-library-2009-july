<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>MyNotifierCallbackFunction</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING126></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-125.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-127.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-97.html"><B>Chapter 21 - Providers Reference</B></A> / <A HREF="NetworkingWOT-125.html"><B>Application-Defined Notifier Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-123.html"></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING126-0></A>
<H3><A NAME=MARKER-9-142></A>MyNotifierCallbackFunction</H3>
 After you install a notifier function on a provider, the provider calls the notifier function each time a provider event occurs. The declaration for the procedure is<A NAME=MARKER-13-143></A><P>
<PRE>
<A NAME=MARKER-0-95></A>typedef pascal void (*OTNotifyProcPtr)(void *contextPtr,
                  OTEventCode code, 
                  OTResult result, 
                  void *cookie);
</PRE>
<A NAME=HEADING126-3></A>
<H5>C INTERFACE </H5>
<PRE>
<A NAME=MARKER-11-145></A>pascal void MyNotifierCallbackFunction(void* contextPtr, 
                     OTEventCode code,
                                         OTResult result,
                     void* cookie)
</PRE>
<A NAME=HEADING126-5></A>
<H5>C++ INTERFACE   </H5>
 None. C++ appplications use the C interface to this function.<P>
<A NAME=HEADING126-7></A>
<H5>PARAMETERS </H5>
<DL>
<DT><CODE>contextPtr</CODE>
<DD> The value you specified for the <CODE>contextPtr</CODE> parameter when installing this notifier function. You can use this parameter in any way that is useful to you. 
<DT><CODE><A NAME=MARKER-9-146></A>code</CODE>
<DD> An event code indicating the event that occurred. Possible values for event codes are given in the <A HREF=NetworkingWOT-100.html#MARKER-9-22>event code enumeration</A>.
<DT><CODE>result</CODE>
<DD> For completion events, the result code of the completed provider function, identified by the <CODE>code</CODE> parameter. For asynchronous events, the meaning of the <CODE>result</CODE> parameter is event specific. (For most asynchronous events, the <CODE>result</CODE> parameter has no meaning and can be ignored.) For additional information, see the description of the individual event code.
<DT><CODE>cookie</CODE>
<DD> A pointer to data. The meaning and type of the data vary, depending on the event code returned in the <CODE>code</CODE> parameter. For additional information, see the <A HREF=NetworkingWOT-100.html#MARKER-9-22>event codes enumeration</A>.
</DL>
<A NAME=HEADING126-12></A>
<H5>DISCUSSION</H5>
 Using a notifier function is the recommended way for your application to handle provider events. After you install a notifier function for a provider, the function is called by the provider each time a provider event occurs for that provider. For a completion event, the provider passes the function result in the <CODE>result</CODE> parameter, the event code in the <CODE>code</CODE> parameter, and any additional information in the <CODE>cookie</CODE> parameter. For an asynchronous event, the provider usually passes the event code in the <CODE>code</CODE> parameter and passes no other information.<P>
 To install a notifier function for an existing provider, call the <A HREF=NetworkingWOT-118.html#MARKER-9-115><CODE>OTInstallNotifier</CODE></A> function. You can also install a notifier when you open a provider asynchronously by passing a pointer to the notifier function as a parameter to the function used to open the provider. For additional information, see the reference section of the chapter describing the provider of interest.<A NAME=MARKER-13-147></A><P>
 You can install the same notifier function for two or more providers and use the <CODE>contextPtr</CODE> parameter to distinguish among them. Typically the data structure referenced by the <CODE>contextPtr</CODE> parameter includes a provider reference or some other identifier that uniquely identifies the provider for which the notifier is called.<P>
 Open Transport attempts to minimize re-entrancy and stack overflow problems by queueing calls to a notification routine, but this behavior is not guaranteed. Open Transport does guarantee that the notification routine will not be reentered if you are processing a completion event (the event code ends in <CODE>_COMPLETE</CODE>) or an asynchronous event (<CODE>T_LISTEN</CODE>, <CODE>T_CONNECT</CODE>, <CODE>T_DATA</CODE>, <CODE>T_EXDATA</CODE>, <CODE>T_DISCONNECT</CODE>, <CODE>T_UDERR</CODE>, <CODE>T_ORDREL</CODE>, <CODE>T_REQUEST</CODE>, <CODE>T_REPLY</CODE>, <CODE>T_PASSCON</CODE>). Other events, principally <CODE>kOTProviderWillClose</CODE> and <CODE>T_MEMORYRELEASED</CODE> may cause your notifier to be reentered. You can use the functions <A HREF=NetworkingWOT-120.html#MARKER-9-122><CODE>OTEnterNotifier</CODE></A> and <A HREF=NetworkingWOT-121.html#MARKER-9-126><CODE>OTLeaveNotifier</CODE></A> to allow your foreground code to limit interruption by notification events.<P>
<DL>
<DT><B>WARNING</B>
<DD>For 68000 code it is vital you use the <CODE>pascal</CODE> keyword when declaring your notifier function.   <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING126-18></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Open Transport can call your notifier function at deferred task time. For this reason, your notifier function is subject to the same rules and restrictions as are all Macintosh functions that can be called at deferred task time; these restrictions are summarized in the section <A HREF=NetworkingWOT-25.html#MARKER-9-70>"Using Notifier Functions to Handle Provider Events"</A>. Because your notifier can be called at deferred task time, you can only call a limited set of Open Transport functions from your notifier; <A HREF=NetworkingWOT-483.html#MARKER-9-2>Table C-3</A> lists the Open Transport functions that you can call at deferred task time.<P>
 The following information applies to 68000-based code--whether it runs in emulated mode or on 680x0 machines. Before calling your notifier function, Open Transport restores the A5 register to the value it had when you installed the notifier function. Thus, for applications, your notifier function need not restore its A5 world. But if you're developing a code resource and your development environment references your globals from a register other than A5, your notifier function must save and restore that register.<P>
<A NAME=HEADING126-21></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 You cannot call any Thread Manager function that will cause the current thread to yield immediately (<CODE>YieldToThread</CODE> or <CODE>YieldToAnyThread</CODE>) from within your notification function unless the event code to the notifier is the <CODE>kOTSyncIdleEvent</CODE> code. Use the <A HREF=NetworkingWOT-122.html#MARKER-9-130><CODE>OTUseSyncIdleEvents</CODE></A> function to allow synchronous idle events to be sent to your notifier.<P>
<A NAME=HEADING126-23></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-119.html#MARKER-9-119><CODE>OTRemoveNotifier</CODE></A> function.<A NAME=MARKER-13-148></A><P>
 The <A HREF=NetworkingWOT-100.html#MARKER-9-22>event codes enumeration</A>.<P>
 <A HREF=NetworkingWOT-25.html#MARKER-9-74>Listing 3-1</A>. <A NAME=MARKER-13-149></A><P>
 <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-125.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-127.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>NSPersistentDocument Core Data Tutorial: Creating the Project, Model, and Interface</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating the Project, Model, and Interface"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002830" title="Creating the Project, Model, and Interface"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../00_Introduction/introduction.html#//apple_ref/doc/uid/TP40002828-SW1">NSPersistentDocument Core Data Tutorial</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../01_Task/task.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../03_CustomClass/customClass.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002830-SW1" title="Creating the Project, Model, and Interface"></a>
    <h1>Creating the Project, Model, and Interface</h1>
    
        <p>This part of the tutorial guides you through building the Department and Employees application and in the process teaches you the steps essential to building a Cocoa application using Core Data and <code>NSPersistentDocument</code>.</p>
    
    
        
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW10">Create a New Project</a>
				
			<br/>
			
        
			
			
				<a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW11">Create the Data Model</a>
				
			<br/>
			
        
			
			
				<a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW14">Create the User Interface</a>
				
			<br/>
			
        
			
			
				<a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW15">Set the File Extension and Type</a>
				
			<br/>
			
        
			
			
				<a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW16">Build and Test</a>
				
			<br/>
			
        
			
			
				<a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW17">What Happened?</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002830-SW10" title="Create a New Project"></a>
            <h2>Create a New Project</h2>
            <p>Core Data is integrated into the Cocoa framework, so any Cocoa application can use it. The Employees and Departments application you’ll build is a Core Data document-based application. Follow these steps to create the initial project:</p>
            <ol class="ol">
                <li class="li">
                    <p>Choose New Project from the File menu.</p>
                </li>
                <li class="li">
                    <p>Select Core Data Document-based Application with Spotlight Importer in Xcode’s project Assistant window, and press Next.</p>
                </li>
                <li class="li">
                    <p>Enter the project name (for example, “DepartmentAndEmployees”) and a destination folder for the project.</p>
                </li>
                <li class="li">
                    <p>This project uses garbage collection (see <em><a href="../../GarbageCollection/index.html#//apple_ref/doc/uid/TP40002431" target="_top">Garbage Collection Programming Guide</a></em>), so in the project build settings make garbage collection required (see <span class="content_text"><a href="../../GarbageCollection/Articles/gcEssentials.html#//apple_ref/doc/uid/TP40002452" target="_top">Garbage Collection for Cocoa Essentials</a></span>).</p>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP40002830-SW11" title="Create the Data Model"></a>
            <h2>Create the Data Model</h2>
            <p>When you start to develop a Cocoa application, you often begin by prototyping the application’s user interface. If you use Core Data, however, your first step is typically to create a data model (or schema) that describes the entities that you will use in your application. Core Data uses the model to help you quickly build full-featured prototypes.</p>
            <p>Xcode has a data modeling tool that you use to define the schema for your application, as shown in <span class="content_text">Figure 2-1</span>. The tool itself is described in <em><a href="../../../../DeveloperTools/Conceptual/XcodeCoreDataTools/index.html#//apple_ref/doc/uid/TP40006846" target="_top">Xcode Tools for Core Data</a></em>. If you do not know how to use the tool, consult <em><a href="../../CreatingMOMWithXcode/index.html#//apple_ref/doc/uid/TP40006311" target="_top">Creating a Managed Object Model with Xcode</a></em>
                , which describes how to create a data model.</p>
            <br/><div><a name="//apple_ref/doc/uid/TP40002830-SW3" title="Figure 2-1Data modeling tool"></a>
                <p><strong>Figure 2-1&nbsp;&nbsp;</strong>Data modeling tool</p>
                <img src = "../Art/emptyModel_grab.jpg" alt = "Data modeling tool" >
            </div><br/>
            <p>After creating the project, open <code>MyDocument.xcdatamodel</code> in the modeling tool by selecting its icon in the project Models folder. Use the tool to define two entities, Employee and Department as specified in <span class="content_text">Table 2-1</span> through <span class="content_text">Table 2-4</span>. The diagram for the finished model should look like that shown in <span class="content_text">Figure 2-2</span>.</p>
            <p>There are other aspects of the schema that are not described in the tables:</p>
            <ul class="ul">
                <li class="li">
                    <p>The class for both entities is <code>NSManagedObject</code>; neither entity is abstract.</p>
                </li>
                <li class="li">
                    <p>None of the properties is transient. </p>
                </li>
                <li class="li">
                    <p>Employee has a reciprocal relationship—a relationship to itself—that defines the manager-reports relationship. </p>
                </li>
                <li class="li">
                    <p>For this part of the tutorial, the Employee’s department relationship is optional.</p>
                </li>
                <li class="li">
                    <p>The delete rule for all relationships is Nullify.</p>
                </li>
                <li class="li">
                    <p>The minimum value for the Employee salary attribute is 0.</p>
                </li>
            </ul>
            <br/><div><a name="//apple_ref/doc/uid/TP40002830-SW6" title="Figure 2-2Diagram for completed data model"></a>
                <p><strong>Figure 2-2&nbsp;&nbsp;</strong>Diagram for completed data model</p>
                <img src = "../Art/datamodeldiagram_grab.gif" alt = "Diagram for completed data model" width="344" height="180">
            </div><br/>
            <p></p>
            <a name="//apple_ref/doc/uid/TP40002830-SW4" title="Table 2-1Attributes for the Employee entity"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
                <caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>Attributes for the Employee entity</caption>
                
                    <tr>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Name</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Type</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Optional</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Default value</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Indexed</p>
                        </th>
                    </tr>
                
                
                    <tr>
                        <td  scope="row">
                            <p>firstName</p>
                        </td>
                        <td >
                            <p>String</p>
                        </td>
                        <td >
                            <p>NO</p>
                        </td>
                        <td >
                            <p>First</p>
                        </td>
                        <td >
                            <p>Yes</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>lastName</p>
                        </td>
                        <td >
                            <p>String</p>
                        </td>
                        <td >
                            <p>NO</p>
                        </td>
                        <td >
                            <p>Last</p>
                        </td>
                        <td >
                            <p>Yes</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>employeeID</p>
                        </td>
                        <td >
                            <p>int 32</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>0</p>
                        </td>
                        <td >
                            <p>No</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>salary</p>
                        </td>
                        <td >
                            <p>Decimal</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>0</p>
                        </td>
                        <td >
                            <p>No</p>
                        </td>
                    </tr>
                
            </table></div>
            <a name="//apple_ref/doc/uid/TP40002830-SW12" title="Table 2-2Relationships for the Employee entity"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
                <caption class="tablecaption"><strong>Table 2-2&nbsp;&nbsp;</strong>Relationships for the Employee entity</caption>
                
                    <tr>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Name</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Destination</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>To-many</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Optional</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Inverse</p>
                        </th>
                    </tr>
                
                
                    <tr>
                        <td  scope="row">
                            <p>department</p>
                        </td>
                        <td >
                            <p>Department</p>
                        </td>
                        <td >
                            <p>NO</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>employees</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>manager</p>
                        </td>
                        <td >
                            <p>Employee</p>
                        </td>
                        <td >
                            <p>NO</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>directReports</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>directReports</p>
                        </td>
                        <td >
                            <p>Employee</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>manager</p>
                        </td>
                    </tr>
                
            </table></div>
            <a name="//apple_ref/doc/uid/TP40002830-SW13" title="Table 2-3Attributes for the Department entity"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
                <caption class="tablecaption"><strong>Table 2-3&nbsp;&nbsp;</strong>Attributes for the Department entity</caption>
                
                    <tr>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Name</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Type</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Optional</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Default value</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Indexed</p>
                        </th>
                    </tr>
                
                
                    <tr>
                        <td  scope="row">
                            <p>name</p>
                        </td>
                        <td >
                            <p>String</p>
                        </td>
                        <td >
                            <p>NO</p>
                        </td>
                        <td >
                            <p>Department</p>
                        </td>
                        <td >
                            <p>No</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>budget</p>
                        </td>
                        <td >
                            <p>Decimal</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>0</p>
                        </td>
                        <td >
                            <p>No</p>
                        </td>
                    </tr>
                
            </table></div>
            <a name="//apple_ref/doc/uid/TP40002830-SW5" title="Table 2-4Relationships for the Department entity"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
                <caption class="tablecaption"><strong>Table 2-4&nbsp;&nbsp;</strong>Relationships for the Department entity</caption>
                
                    <tr>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Name</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Destination</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>To-many</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Optional</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Inverse</p>
                        </th>
                    </tr>
                
                
                    <tr>
                        <td  scope="row">
                            <p>employees</p>
                        </td>
                        <td >
                            <p>Employee</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>YES</p>
                        </td>
                        <td >
                            <p>department</p>
                        </td>
                    </tr>
                
            </table></div>
            <p>Note that the relationships are all modeled in both directions. It is important that you do this to ensure the integrity of the object graph (so that Core Data can keep the relationships synchronized—see <span class="content_text"><a href="../../CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857" target="_top">Relationships and Fetched Properties</a></span> in <em><a href="../../CoreData/index.html#//apple_ref/doc/uid/TP40001075" target="_top">Core Data Programming Guide</a></em>).</p>
        
        <a name="//apple_ref/doc/uid/TP40002830-SW14" title="Create the User Interface"></a>
            <h2>Create the User Interface</h2>
            <p>Now that the data model is complete, you can create the user interface. In fact, you can use the model to create a user interface quickly. This provides a useful strategy for testing a model—you can create an application very quickly with little effort and use it to exercise the model.</p>
            <p>Open MyDocument.nib in Interface Builder. First remove the “Your document contents here” text field from the document window, then follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>Ensure that you can see the user interface window. </p>
                </li>
                <li class="li">
                    <p>In the Library, find the Core Data Entity. Drag the entity icon over the document window, as shown in <span class="content_text"><a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW9">Figure 2-3</a></span>. </p>
                    <div class="item_figure"><a name="//apple_ref/doc/uid/TP40002830-SW9" title="Figure 2-3Interface Builder with Core Data Entity"></a>
                        <p><strong>Figure 2-3&nbsp;&nbsp;</strong>Interface Builder with Core Data Entity</p>
                        <img src = "../Art/ibEntityLibrary.jpg" alt = "" >
                    </div>
                </li>
                <li class="li">
                    <p>When you release the mouse, you are presented with the New Core Data Interface panel, which lists the currently-open Xcode projects and their associated data models. From your project, select the MyDocument model, then select the Employee entity, and finally press Next.</p>
                    <div class="item_figure">
                        <img src = "../Art/ibNewInterface.jpg" alt = "image: ../Art/ibNewInterface.jpg" >
                    </div>
                </li>
                <li class="li">
                    <p>With the next panel, you choose the interface style. Select the Master/Detail view with Search field, Detail fields, and Add and Remove buttons, then press Next.</p>
                    <div class="item_figure">
                        <img src = "../Art/ibMasterDetailSelection.jpg" alt = "image: ../Art/ibMasterDetailSelection.jpg" >
                    </div>
                </li>
                <li class="li">
                    <p>In the next panel, you choose which Employee properties you want to be displayed in the user interface. Choose all except <code>department</code> and <code>directReports</code>, then press Finish.</p>
                    <div class="item_figure">
                        <img src = "../Art/ibPropertySelection.jpg" alt = "image: ../Art/ibPropertySelection.jpg" >
                    </div>
                </li>
                <li class="li">
                    <p>Interface Builder automatically creates a user interface, as illustrated in <span class="content_text">Figure 2-4</span>. The interface contains a table view, search field, text fields for individual attributes, pop-up menu for Manager, and buttons to add, remove, and fetch employees. Interface Builder also adds array controllers to the nib file to manage the entities. </p>
                    <div class="item_figure"><a name="//apple_ref/doc/uid/TP40002830-SW8" title="Figure 2-4Default automatic user interface"></a>
                        <p><strong>Figure 2-4&nbsp;&nbsp;</strong>Default automatic user interface</p>
                        <img src = "../Art/ibAutoUI.jpg" alt = "Default automatic user interface" >
                    </div>
                </li>
                <li class="li">
                    <p>Interface Builder actually does more than is required for this tutorial. Delete the Employee ID, Salary, and Manager columns in the table view (and, if you wish, the Fetch button since it won’t be used). You can also rearrange the user interface if you want; for example, you could put the first name and last name text fields next to each other.</p>
                </li>
                <li class="li">
                    <p>Save the nib file.</p>
                </li>
            </ol>
            <p>You should take some time to investigate both the connections in the nib file and the behavior of the application. The user interface is created almost entirely using bindings. In particular you should note:</p>
            <ul class="ul">
                <li class="li">
                    <p>The array controllers’ <code>managedObjectContext</code> binding is bound to the File’s Owner’s <code>managedObjectContext</code> (see the Bindings pane of the <code>NSArrayController</code> Inspector).</p>
                </li>
                <li class="li">
                    <p>The array controllers are set to manage an entity, not a class (see the Attributes pane of the Inspector).</p>
                </li>
                <li class="li">
                    <p>The search field has been populated with a number of predicates—one for each attribute, and an additional one to search all attributes.</p>
                </li>
                <li class="li">
                    <p>There are two array controllers to manage collections of Employees—one for the table view, and one for the pop-up menu.</p>
                </li>
            </ul>
        
        <a name="//apple_ref/doc/uid/TP40002830-SW15" title="Set the File Extension and Type"></a>
            <h2>Set the File Extension and Type</h2>
            <p>Core Data supports several types of data store—XML, SQLite, and binary, as well as your own custom store type. Each has their own advantages and disadvantages. XML, for example, is (to an extent) human-readable, which may be particularly useful during the early stages of development when you want to ensure that data you expected to be saved to a file has in fact been stored. The XML store, however, is verbose and comparatively slow. The SQLite store is smaller and more efficient. In particular, it has the unique advantage that its entire contents do not have to be read into memory when it is opened.</p>
            <p>By default, the project is configured with three document types, one for each native Core Data persistent store type. You change these in Xcode using the Properties pane in the Target Info window as illustrated in <span class="content_text">Figure 2-5</span>. You set the extension as you would for any other document in a Cocoa document-based application and select the desired store type from the pop-up menu in the Store Type menu. Typically SQLite represents the best choice for a deployed application.</p>
            <p>Spotlight metadata importers are associated with document types by specifying the uniform type identifiers (UTIs—see <em><a href="../../../../Carbon/Conceptual/understanding_utis/index.html#//apple_ref/doc/uid/TP40001319" target="_top">Uniform Type Identifiers Overview</a></em>) that they can extract data from (see <span class="content_text"><a href="../../../../Carbon/Conceptual/MDImporters/Concepts/Importers.html#//apple_ref/doc/uid/TP40001283" target="_top">Extracting Metadata from Documents</a></span>). If you plan to write a custom importer you should therefore specify a suitable UTI for your document type.</p>
            <br/><div><a name="//apple_ref/doc/uid/TP40002830-SW7" title="Figure 2-5Properties pane of the Target Info window"></a>
                <p><strong>Figure 2-5&nbsp;&nbsp;</strong>Properties pane of the Target Info window</p>
                <img src = "../Art/targetproperties_grab.jpg" alt = "Properties pane of the Target Info window" >
            </div><br/><p>You should also then add a UTI exported type declaration to the <code>Info.plist</code> file. You can use Xcode’s plist editor, or open the Info.plist file as a plain text file and add XML elements as described below:</p><p>Using the plist editor:</p><ul class="ul"><li class="li"><p>Exported Type UTIs (1 item)</p><ul class="nested"><li class="nested li"><p>Conforms to UTIs</p><ul class="nested"><li class="nested li"><p>public.data</p></li></ul></li><li class="nested li"><p>Description</p><p>SQLite file format for DepartmentAndEmployees application</p></li><li class="nested li"><p>Identifier</p><p>com.apple.techPubs.DepartmentAndEmployees</p></li><li class="nested li"><p>Equivalent Types (1 item)</p><ul class="nested"><li class="nested li"><p>public.filename-extension</p><p>DepartmentAndEmployees</p></li></ul></li></ul></li></ul><p>Editing the XML as plain text:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>UTExportedTypeDeclarations&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>UTTypeConformsTo&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>public.data&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>UTTypeDescription&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>SQLite file format for DepartmentAndEmployees application&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>UTTypeIdentifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>com.apple.devpubs.DepartmentAndEmployees&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>UTTypeTagSpecification&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>public.filename-extension&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>DepartmentAndEmployees&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/array><span></span></pre></td></tr></table></div><p>Finally, since this application will run only on Mac OS X v10.5 and later, add a value for the minimum system version.</p><p>Using the plist editor:</p><ul class="ul"><li class="li"><p>Minimum system version</p><p>10.5</p></li></ul><p>Editing the XML as plain text:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>LSMinimumSystemVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>10.5&lt;/string><span></span></pre></td></tr></table></div>
        
        <a name="//apple_ref/doc/uid/TP40002830-SW16" title="Build and Test"></a>
            <h2>Build and Test</h2>
            <p>You can now build and test your application. You should find that it is (almost) fully functional! You can add and remove employees, and edit their attributes. You can set an employee’s manager using the pop-up menu. The application supports undo and redo, the search field works, and you can save and open documents. If you make a mistake and enter, for example, a negative salary, then try to save the document, the application presents an alert.</p>
            <p>And you haven’t written any code yet. . .</p>
            <p>As you test the application, however, you may start to notice some problems. The popup menu displays only the employees’ first names. First, this may not be the best way of identifying a particular employee. Second, if more than one employee share the same name, it is impossible to distinguish between them.</p>
            <p>There are several steps that are necessary to fix these problems, all of which require a custom class for the Employee entity—which in turn requires a change to the managed object model. Specifically, you need to do the following (the implementation of these steps is described in the next section).</p>
            <ol class="ol">
                <li class="li">
                    <p>In a custom class for the Employee entity, define a custom method to return a unique derived property—a string that contains the employee’s full name and employee ID.</p>
                </li>
                <li class="li">
                    <p>Implement the relevant key-value observing method to ensure that the derived property is updated when any of its components is changed.</p>
                </li>
                <li class="li">
                    <p>Implement a method to set a new employee ID when a new employee is created.</p>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP40002830-SW17" title="What Happened?"></a>
            <h2>What Happened?</h2>
            <p>The title <span class="content_text"><a href="creatingProj.html#//apple_ref/doc/uid/TP40002830-SW1">“Creating the Project, Model, and Interface”</a></span> is somewhat misleading. More than just “creating the project,” in a very few steps you have completed the main task goals. In the next chapters you will refine the implementation and provide additional user-friendly behavior. Now, though, it is worth briefly reviewing what has happened.</p>
            <p>The example so far illustrates the focus of Core Data. Your primary task has been to specify the data model in your application. The Core Data framework (in conjunction with Cocoa bindings for the user interface) has provided the infrastructure to support most of the other required behaviors.</p>
            <p>Most of the Core Data infrastructure is hidden by the persistent document. <code>NSPersistentDocument</code> implements a number of methods to support integration with Core Data. From the perspective of the typical developer, the most important method is <code>managedObjectContext</code>. The managed object context serves as the gateway to the rest of the Core Data infrastructure. It also provides the document’s undo manager. <code>NSPersistentDocument</code> takes care of creating and setting the type of the persistent store, saving and loading data, and configuring the Core Data stack. For many applications you do not need to customize its behavior further. Later in this tutorial, however, you will override some of <code>NSPersistentDocument</code>'s methods to customize the store.</p>
        
    


        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../01_Task/task.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../03_CustomClass/customClass.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/NSPersistentDocumentTutorial/02_CreatingProj/creatingProj.html%3Fid%3DTP40001799-3.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/NSPersistentDocumentTutorial/02_CreatingProj/creatingProj.html%3Fid%3DTP40001799-3.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/NSPersistentDocumentTutorial/02_CreatingProj/creatingProj.html%3Fid%3DTP40001799-3.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
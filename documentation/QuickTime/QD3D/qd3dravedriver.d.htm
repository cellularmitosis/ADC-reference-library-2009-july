<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Writing a Drawing Engine</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H1.Heading1"><A NAME="pgfId=41380"> </A><A NAME="42210"> </A>Writing a Drawing Engine</H1><P CLASS="T1.Text1"><A NAME="pgfId=45453"> </A><A NAME="marker=51394"> </A>This section shows how to write a new drawing engine and add it to the QuickDraw&nbsp;3D Acceleration Layer.</P><P CLASS="I.Important"><A NAME="pgfId=45469"> </A>You need to read this section only if you are developing custom 3D acceleration hardware or software. If you simply want to create a draw context and draw into it using low-level drawing functions, see <A HREF="qd3dravedriver.5.htm#41128" CLASS="XRef">&quot;Using QuickDraw&nbsp;3D RAVE&quot;</A>. </P><P CLASS="T1.Text1"><A NAME="pgfId=45473"> </A>To develop a new drawing engine and add it to the QuickDraw&nbsp;3D Acceleration Layer, you need to perform these seven steps:</P><OL><LI CLASS="N/.NList=1"><A NAME="pgfId=45493"> </A>Write methods for the public functions pointed to by the fields of a draw context structure (for example, <TT CLASS="cv">setInt</TT>). These methods are described in detail in the section <A HREF="qd3dravedriver.47.htm#41790" CLASS="XRef">&quot;Public Draw Context Methods&quot;</A>.</LI><LI CLASS="N.NList"><A NAME="pgfId=45499"> </A>Write methods for the <TT CLASS="cv">TQADrawPrivateNew</TT> and <TT CLASS="cv">TQADrawPrivateDelete</TT> function prototypes. These functions are called internally by the <TT CLASS="cv">QADrawContextNew</TT> and <TT CLASS="cv">QADrawContextDelete</TT> functions, respectively. You use these methods to allocate and release any private data (such as state variables) maintained by your drawing engine. These methods are described in detail in the section <A HREF="qd3dravedriver.48.htm#11277" CLASS="XRef">&quot;Private Draw Context Methods&quot;</A>.</LI><LI CLASS="N.NList"><A NAME="pgfId=47535"> </A>Write methods for any texture and bitmap functions supported by your drawing engine (<TT CLASS="cv">TQATextureNew</TT>, <TT CLASS="cv">TQATextureDetach</TT>, <TT CLASS="cv">TQATextureDelete</TT>, <TT CLASS="cv">TQABitmapNew</TT>, <TT CLASS="cv">TQABitmapDetach</TT>, and <TT CLASS="cv">TQABitmapDelete</TT>). These functions are called by their public counterparts (for example, <TT CLASS="cv">QABitmapNew</TT>). These methods are described in detail in the section <A HREF="qd3dravedriver.4a.htm#11971" CLASS="XRef">&quot;Texture and Bitmap Methods&quot;</A>.</LI><LI CLASS="N.NList"><A NAME="pgfId=47555"> </A>Write a method to handle the <TT CLASS="cv">QAEngineGestalt</TT> function when your drawing engine is the target engine. This method is described in detail on <A HREF="qd3dravedriver.48.htm#36590" CLASS="XRef">[link]</A>.</LI><LI CLASS="N.NList"><A NAME="pgfId=47593"> </A>Write a method to handle the <TT CLASS="cv">QAEngineCheckDevice</TT> function when your drawing engine is the target engine. QuickDraw&nbsp;3D RAVE calls this method to determine which devices your drawing engine supports. This method is described in detail on <A HREF="qd3dravedriver.48.htm#37406" CLASS="XRef">[link]</A>.</LI><LI CLASS="N.NList"><A NAME="pgfId=47597"> </A>Write a method for the <TT CLASS="cv">TQAEngineGetMethod</TT> function prototype. QuickDraw&nbsp;3D RAVE calls this method to get some of your engine's methods during engine registration. This method is described in detail on <A HREF="qd3dgeometry.34.htm#34505" CLASS="XRef">[link]</A>.</LI><LI CLASS="N.NList"><A NAME="pgfId=47553"> </A>Build your code as a shared library. The initialization routine of the shared library should register your drawing engine with QuickDraw&nbsp;3D RAVE by calling the <TT CLASS="cv">QARegisterEngine</TT> function.</LI></OL><P CLASS="T1.Text1"><A NAME="pgfId=47627"> </A>The following sections describe some of these steps in more detail. The section <A HREF="qd3dravedriver.12.htm#28624" CLASS="XRef">&quot;Supporting OpenGL Hardware&quot;</A> contains information that is useful if you are implementing a drawing engine to support hardware that is based on an OpenGL rasterization model.</P><H2 CLASS="H2.Heading2TOC"><A HREF="qd3dravedriver.e.htm#pgfId=50248" CLASS="Hypertext">Writing Public Draw Context Methods</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="qd3dravedriver.f.htm#pgfId=50252" CLASS="Hypertext">Writing Private Draw Context Methods</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="qd3dravedriver.10.htm#pgfId=47641" CLASS="Hypertext">Handling Gestalt Selectors</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="qd3dravedriver.11.htm#pgfId=47643" CLASS="Hypertext">Registering a Drawing Engine</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="qd3dravedriver.12.htm#pgfId=51336" CLASS="Hypertext">Supporting OpenGL Hardware</A></H2><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
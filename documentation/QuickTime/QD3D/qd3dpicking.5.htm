<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Hit Sorting</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=3305"> </A>Hit Sorting</H1><P CLASS="T1.Text1"><A NAME="pgfId=3310"> </A><A NAME="marker=3306"> </A>In some cases, you can have QuickDraw&nbsp;3D sort a hit list before returning it to your application. The sorting is based on either increasing or decreasing distance from some point, the <B CLASS="bold">pick origin.</B> As a result, hit-list sorting is possible only when the pick geometry has a clearly defined pick origin. Pick objects whose pick geometries have a pick origin are called <B CLASS="bold">metric pick objects</B> (or <B CLASS="bold">metric picks</B>). Window-point picking uses metric pick objects. With window-rectangle pick objects, however, there is no clearly defined pick origin. As a result, window-rectangle pick objects are not metric: you cannot have the hit list sorted by distance.<A NAME="marker=3311"> </A><A NAME="marker=3312"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3313"> </A>With a metric pick, distances are measured along the ray from the pick origin to the point of intersection on the picked object. If that ray intersects a picked object more than once, QuickDraw&nbsp;3D always returns the hit that's closest to the pick origin.</P><P CLASS="T1.Text1"><A NAME="pgfId=3320"> </A>Recall that you can have QuickDraw&nbsp;3D put either entire objects or parts of objects into a hit list. When you are hit-testing parts of objects--vertices, edges, and faces--you need to keep in mind that the tolerance values can complicate the process of calculating distances (and hence the process of sorting hits). For example, a window point might be equally distant from both a vertex and an edge, at least within the tolerance values associated with the window-point pick object. To establish a unique sorting order in such cases, QuickDraw&nbsp;3D gives priority to vertices, then to edges, and finally to faces.</P><P CLASS="T1.Text1"><A NAME="pgfId=3324"> </A>Note that the distances used to establish a sort order might not be the same distances reported to your application when you retrieve hit information. Consider, for example, the situation illustrated in <A HREF="qd3dpicking.5.htm#38822" CLASS="XRef">Figure&nbsp;5</A>. Here, the vertex <I CLASS="italics">V</I> is within the current vertex tolerance of the window point pick object and therefore qualifies as a hit. QuickDraw&nbsp;3D uses the distance <I CLASS="italics">d'</I> from the pick origin to the closest point on the pick ray (that is, <I CLASS="italics">V'</I>) as the basis for sorting vertex <I CLASS="italics">V</I> in the hit list. However, when reporting the distance from the pick origin to the picked vertex <I CLASS="italics">V</I>, QuickDraw&nbsp;3D gives the actual distance <I CLASS="italics">d</I>.</P><P CLASS="Fg.Figure"><A NAME="pgfId=3338"> </A>Figure&nbsp;5<A NAME="38822"> </A>Determining a vertex sorting distance</P><DIV><IMG SRC="qd3dpicking-1.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=3342"> </A>QuickDraw&nbsp;3D calculates distances to edges and faces in an analogous manner. If the pick ray passes within the current edge tolerance of an edge, the sorting distance is set to the distance <I CLASS="italics">d'</I> from the pick ray origin to the projection onto the pick ray of the point on the edge that is closest to the pick ray. See <A HREF="qd3dpicking.5.htm#26187" CLASS="XRef">Figure&nbsp;6</A>.</P><P CLASS="Fg.Figure"><A NAME="pgfId=3350"> </A>Figure&nbsp;6<A NAME="26187"> </A>Determining an edge sorting distance</P><DIV><IMG SRC="qd3dpicking-2.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=3351"> </A>If the pick ray intersects a face, the sorting distance is set to the distance from the pick ray origin to the projection onto the pick ray of the face vertex that is closest to the pick ray. See <A HREF="qd3dpicking.5.htm#14677" CLASS="XRef">Figure&nbsp;7</A>.</P><P CLASS="Fg.Figure"><A NAME="pgfId=3359"> </A>Figure&nbsp;7<A NAME="14677"> </A>Determining a face sorting distance</P><DIV><IMG SRC="qd3dpicking-3.gif"></DIV><P CLASS="Note"><A NAME="pgfId=3360"> </A>The sorting distance <I CLASS="italics">d'</I> is not always less than the actual distance <I CLASS="italics">d</I> to the hit object. In <A HREF="qd3dpicking.5.htm#14677" CLASS="XRef">Figure&nbsp;7</A>, for example, <I CLASS="italics">d'</I> is greater than <I CLASS="italics">d</I>. <A NAME="marker=3367"> </A></P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Creating File Reference Resources(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING450></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-449.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-451.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-443.html"><B>Chapter 7 - Finder Interface</B></A> / <A HREF="Toolbox-446.html"><B>Using the Finder Interface</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING450-0></A>
<H2><A NAME=MARKER-9-233></A><A NAME=MARKER-21-234></A>Creating File Reference Resources</H2>
 <A NAME=MARKER-2-235></A><A NAME=MARKER-2-236></A><A NAME=MARKER-2-237></A><A NAME=MARKER-2-238></A><A NAME=MARKER-2-239></A><A NAME=MARKER-2-240></A><A NAME=MARKER-2-241></A>File reference (<CODE>'FREF'</CODE>) resources perform two main functions. First, they associate icons you define with file types used by your application. Second, they allow users to drag document icons to your application icon in order to open them from your application.<P>
 Create a file reference resource for your application file itself and create separate file reference resources for each file type that your application can open. <A HREF=#MARKER-9-243>Listing 7-3</A> shows, in Rez input format, the file reference resources for the SurfWriter application file, text documents, stationery pads, and editions and for TeachText read-only documents.<P>
 Each file reference resource specifies the following items:<P>
<UL>
<LI>a file type
<LI>the local ID of an icon list resource as assigned in the bundle resource
<LI>an empty string<P>
</UL>
 The file type can be defined for files created by your application only, for files created by other applications that your application supports, or for files of the existing general types, such as <CODE>'TEXT'</CODE> and <CODE>'PICT'</CODE>.<P>
 <A NAME=MARKER-9-92></A>As described in the next section, <A HREF=Toolbox-451.html#MARKER-9-262>"Creating a Bundle Resource,"</A> the local ID maps the <BR>file type to an icon list resource that is assigned the same local ID in the bundle resource. If you wanted two file types to share the same icon, for example, you could create two separate file reference resources that share the same local ID, which the bundle resource would map to the same icon list resource. (Creating two file types that share the same icon is not recommended, however, because a shared icon would make it very difficult for the user to distinguish between the different file types while using the Finder.)<P>
<B>Listing 7-3  <A NAME=MARKER-9-243></A>Rez input for file reference resources</B><P>
<PRE>
resource 'FREF' (208, purgeable) {  /*SurfWriter application*/
   'APPL',  /*type 'APPL'*/
   0,       /*maps to icon list resource w/ local ID 0 in bundle resource*/
   &quot;&quot;       /*leave empty string for name: not implemented*/
};
resource 'FREF' (209, purgeable) {  /*SurfWriter document*/
   'TEXT',  /*type 'TEXT'*/
    1,      /*maps to icon list resource w/ local ID 1 in bundle resource*/
   &quot;&quot;
};
resource 'FREF' (210, purgeable) {  /*SurfWriter stationery pad*/
   'sEXT',  /*type 'sEXT'*/
   2,       /*maps to icon list resource w/ local ID 2 in bundle resource*/
   &quot;&quot;
};
resource 'FREF' (211, purgeable) {  /*SurfWriter edition*/
   'edtt',  /*type 'edtt'*/
   3,       /*maps to icon list resource w/ local ID 3 in bundle resource*/
   &quot;&quot;
};
resource 'FREF' (212, purgeable) {/*TeachText read-only files*/
   'ttro', 4, &quot;&quot;  /*These documents have TeachText as their */
                  /* creator. Finder uses TeachText's icon list resource */
                  /* for these documents. Included here so users */
                  /* can drag these docs to SurfWriter's app icon*/
};
</PRE>
 If you provide your own icon for the stationery pads that users create from your application's documents, create a file reference resource for your stationery pads. <BR>Assign this file reference resource a file type in the following manner: use the file type <BR>of the document upon which the stationery pad is based, but replace the first letter of <BR>the original document's file type with a lowercase <I>s</I>. As with other file reference resources, you map this to an icon list resource in the bundle resource. (This convention necessitates that you make the names of your documents' file types unique in their last three letters.) <P>
 For example, in <A HREF=#MARKER-9-243>Listing 7-3</A>, the <CODE>'sEXT'</CODE> file type assigned within the file reference resource is used for stationery pads created from documents of the <CODE>'TEXT'</CODE> file type. In this case, when the <CODE>isStationery</CODE> bit (described in <A HREF=Toolbox-455.html#MARKER-9-356>"Using Finder Information in the Catalog File" beginning on page 7-30</A>) is set on a document of file type <CODE>'TEXT'</CODE>, the Finder looks in the SurfWriter application's bundle (<CODE>'BNDL'</CODE>) resource to determine what icon is mapped to documents of type <CODE>'sEXT'</CODE>. The Finder then displays the document using the stationery pad icon shown in Plate 4 at the front of this book.<A NAME=MARKER-2-244></A><A NAME=MARKER-2-245></A><P>
 When the user drags a document icon to your application icon, the Finder checks a list that it maintains of your file reference resources. If the document's file type appears in this list, the Finder launches your application with a request to open that document.<P>
 If your application supports file types for which it doesn't provide icons, you can still define file reference resources for them, and then users can launch your application by dragging these document icons to your application icon. For example, the file reference resource with resource ID 212 in <A HREF=#MARKER-9-243>Listing 7-3 on page 7-18</A> is created so that the Finder launches the SurfWriter application when users drag TeachText read-only documents to the SurfWriter application icon. Since these documents have TeachText as their creator, the Finder displays the icon that the TeachText application defines for them in its own bundle resource.<P>
 <B><A NAME=MARKER-2-247></A><A NAME=MARKER-2-248></A><EM><A NAME=MARKER-2-249></A><A NAME=MARKER-2-250></A><A NAME=MARKER-2-251></A></EM></B>By supporting the Open Documents event, you can also specify disks, folders, and a pair of wildcard file types in your file reference resources so that users can launch your application by dragging their icons to your application icon. As explained in <I><A HREF="../IAC/IAC-2.html">Inside Macintosh: Interapplication Communication</A></I>, the Open Documents event is one of the four required Apple events. After the Finder uses the Process Manager to launch an application that supports high-level events, the Finder sends your application an Open Documents event, which includes a list of alias records for objects that the application should open.<P>
 Because alias records can specify volumes and directories as well as files, an Open Documents event gives you the opportunity to handle cases in which users drag disk <BR>or folder icons to your application. (Alias records are described in <A HREF=Toolbox-459.html#MARKER-9-427>"Using Aliases" beginning on page 7-37</A>.) Create a file reference resource and specify <CODE>'disk'</CODE> as the <BR>file type to allow users to drag hard disk and floppy disk icons to your application icon. Create a file reference resource and specify <CODE>'fold'</CODE> as the file type to allow users to <BR>drag folder icons to your application icon.<P>
 You can create a file reference resource that specifies <CODE>'****'</CODE> as the file type to allow users to drag all file types--including applications, system extensions, documents, and so on, but not including disks or folders--to your application icon. If you create three file reference resources that specify <CODE>'disk'</CODE>, <CODE>'fold'</CODE>, and <CODE>'****'</CODE> as their file types and if your application supports the Open Documents event, you effectively allow users to launch your application by dragging any icon to your application icon. It is up to your application to open disks, folders, or all possible file types in a manner appropriate to the needs of the user.<A NAME=MARKER-2-252></A><A NAME=MARKER-2-253></A><A NAME=MARKER-2-254></A><A NAME=MARKER-2-255></A><A NAME=MARKER-2-256></A><A NAME=MARKER-2-257></A><A NAME=MARKER-2-258></A><A NAME=MARKER-2-259></A><EM><A NAME=MARKER-2-260></A><A NAME=MARKER-2-261></A></EM><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-449.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-451.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>NCMBeginMatching(IM: ACI Ref)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING254></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACIReference-253.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-255.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACIReference-2.html"><B>Advanced Color Imaging Reference</B></A> / <BR><DD><A HREF="ACIReference-154.html"><B>Chapter 3 - ColorSync Manager Reference for Applications and Device Drivers</B></A> / <A HREF="ACIReference-218.html"><B>ColorSync Manager Functions</B></A><BR><DL><DD><A HREF="ACIReference-253.html"><B>Matching Colors Using High-Level Functions With QuickDraw</B></A> / <A HREF="ACIReference-204.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING254-0></A>
<H3><A NAME=MARKER-11-383></A><A NAME=MARKER-9-384></A>NCMBeginMatching</H3>
 Sets up a high-level ColorSync matching session, using the specified source and destination profiles, that acknowledges QuickDraw operations. <P>
<PRE>
pascal CMError NCMBeginMatching (
CMProfileRef src, 
CMProfileRef dst,
CMMatchRef *myRef);
</PRE>
<DL>
<DT><CODE>src</CODE>
<DD> A profile reference <A HREF=ACIReference-210.html#MARKER-9-299>(page 3-63)</A> for the source profile for the matching session. To indicate the ColorSync system profile, specify a <CODE>NULL</CODE> value.
<DT><CODE>dst</CODE>
<DD> A profile reference for the destination profile for the matching session. To indicate the ColorSync system profile, specify a <CODE>NULL</CODE> value.
<DT><CODE>myRef</CODE>
<DD> A pointer to a matching session. On output, it specifies the high-level matching session that was set up. 
<DT><I>function result</I>
<DD> A result code of type CMError. See <A HREF=ACIReference-313.html#MARKER-9-479>"Result Codes" (page 3-174)</A> for a list of ColorSync-specific result codes.
</DL>
<A NAME=HEADING254-7></A>
<H5>DISCUSSION</H5>
 The <CODE>NCMBeginMatching</CODE> function sets up a high-level matching session using QuickDraw, telling the ColorSync Manager to match all colors drawn to the current graphics device using the specified source and destination profiles. <P>
 The <CODE>NCMBeginMatching</CODE> function returns a reference to the color-matching session. You must later pass this reference to the <CODE>CMEndMatching</CODE> function, described next, to conclude the session.<P>
 The source and destination profiles define how the match is to occur. Passing <CODE>NULL</CODE> for either the source or destination profile is equivalent to passing the system profile. If the current device is a screen device, matching to all screen devices occurs. <P>
 The <CODE>NCMBeginMatching</CODE> and <CODE>CMEndMatching</CODE> functions can be nested. In such cases, the ColorSync Manager first matches to the most recently added profiles first. Therefore, if you want to use the <CODE>NCMBeginMatching</CODE>-<CODE>CMEndMatching</CODE> pair to perform a page preview--which typically entails color matching from a source device (scanner) to a destination device (printer) to a preview device (display)-- you would first call <CODE>NCMBeginMatching</CODE> with the printer-to-display profiles, and then call <CODE>NCMBeginMatching</CODE> with the scanner-to-printer profiles. The ColorSync Manager then matches all drawing from the scanner to the printer and then back to the display. The print preview process entails multiprofile transformations. The ColorSync Manager low-level functions (which include the use of concatenated profiles well suited to print preview processing) offer an easier and faster way to do this. <P>
<DL>
<DT><B>Note</B>
<DD>If you call <CODE>NCMBeginMatching</CODE> before drawing to the screen's graphics device (as opposed to an offscreen device), you must call <CODE>CMEndMatching</CODE> to finish a matching session and before calling <CODE>WaitNextEvent</CODE> or any other routine (such as Window Manager routines) that could draw to the screen. Failing to do so will cause unwanted matching to occur. Furthermore, if a device has color matching enabled, you cannot call the <CODE>CopyBits</CODE> procedure to copy from it to itself unless the source and destination rectangles are the same.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Even if you call the <CODE>NCMBeginMatching</CODE> function before calling the QuickDraw <CODE>DrawPicture</CODE> function, the ColorSync picture comments such as <CODE>cmEnableMatching</CODE> and <CODE>cmDisableMatching</CODE> are not acknowledged. For the ColorSync Manager to recognize these comments and allow their use, you must call the <CODE>NCMDrawMatchedPicture</CODE> function for color matching using picture comments.<P>
 This function causes matching for the specified devices rather than for the current color graphics port.<P>
<A NAME=HEADING254-15></A>
<H5>SEE ALSO</H5>
 The high-level color-matching function <CODE>NCMBeginMatching</CODE> that uses QuickDraw performs color matching in a manner acceptable to most applications. However, if your application needs a finer level of control over color matching, it can use the low-level matching functions described in <A HREF=ACIReference-257.html#MARKER-9-388>"Matching Colors Using Low-Level Functions Without QuickDraw" (page 3-107)</A>.<P>
 For background information on graphics devices, see <I>Inside Macintosh: Imaging With QuickDraw</I>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACIReference-253.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-255.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACIReference-3.html">&copy; Apple Computer, Inc.</A><br>11 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

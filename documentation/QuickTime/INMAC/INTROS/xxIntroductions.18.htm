<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Audio Properties</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>QuickTime API Documentation</I><P><A target="doc" HREF="xxIntroductions.17.htm">Previous</A> | <A target="doc" HREF="xxIntroductions.12.htm">Chapter Top</A> | <A target="doc" HREF="xxIntroductions.1.htm">Chapter Contents</A> | <A target="doc" HREF="xxIntroductions.19.htm">Next</A> | <!-- QTnavbar end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=26345"> </A><A NAME="41191"> </A>Audio Properties</H1><P CLASS="T0.Text0"><A NAME="pgfId=26348"> </A><A NAME="marker=26346"> </A><A NAME="marker=26347"> </A>This section discusses the sound capabilities of QuickTime and the Movie Toolbox. It has been divided into the following topics:<A NAME="marker=26349"> </A><A NAME="marker=26350"> </A><A NAME="marker=26351"> </A></P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=26355"> </A>&quot;Sound Playback&quot; discusses the playback capabilities of the Movie Toolbox</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=26359"> </A>&quot;Adding Sound to Video&quot; discusses several issues you should consider when creating movies that contain both sound and video</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=26363"> </A>&quot;Sound Data Formats&quot; describes the formats the Movie Toolbox uses to store sound information</LI></UL><DIV><H2 CLASS="H3.Heading3"><A NAME="pgfId=26365"> </A><A NAME="12105"> </A>Sound Playback</H2><P CLASS="T0.Text0"><A NAME="pgfId=26366"> </A>As is the case with video data, QuickTime movies store sound information in tracks. QuickTime movies may have one or more sound tracks. The Movie Toolbox can play more than one sound at a time by mixing the enabled sound tracks together during playback. This allows you to put together movies with separate music and voice tracks. You can then manipulate the tracks separately but play them together. You can also use multiple sound tracks to store different languages.</P><P CLASS="T1.Text1"><A NAME="pgfId=26367"> </A>There are two main attributes of sound in QuickTime movies: volume and balance. You can control these attributes using the facilities of the Movie Toolbox.</P><P CLASS="T1.Text1"><A NAME="pgfId=26368"> </A>Every QuickTime movie has a current volume setting. This volume setting controls the loudness of the movie's sound. You can adjust a movie's current volume by calling the <A NAME="marker=26369"> </A><TT CLASS="cv">SetMovieVolume</TT> function. In addition, you can set a preferred volume setting for a movie. This value represents the best volume for the movie. The Movie Toolbox saves this value when you store a movie into a movie file. The value of the current volume is lost. You can set a movie's preferred volume by calling the <A NAME="marker=26373"> </A><TT CLASS="cv">SetMoviePreferredVolume</TT> function. When you load a movie from a movie file, the Movie Toolbox sets the movie's current volume to the value of its preferred volume.<A NAME="marker=26377"> </A><A NAME="marker=26378"> </A><A NAME="marker=26379"> </A><A NAME="marker=26380"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26381"> </A>Each track in a movie also has a volume setting. A track's volume governs its loudness relative to other tracks in the movie. You can set a track's volume by calling the <A NAME="marker=26382"> </A><TT CLASS="cv">SetTrackVolume</TT> function.<A NAME="marker=26386"> </A><A NAME="marker=26387"> </A><A NAME="marker=26388"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26389"> </A>In the Movie Toolbox, movie and track volumes are represented as 16-bit, fixed-point numbers that range from -1.0 to +1.0. The high-order 8 bits contain the integer portion of the value; the low-order 8 bits contain the fractional part. Positive values denote volume settings, with 1.0 corresponding to the maximum volume on your computer. Negative values are muted, but retain the magnitude of the volume setting so that, by toggling the sign of a volume setting, you can turn off the sound and then turn it back on at the previous level (something like pressing the mute button on a radio).<A NAME="marker=26390"> </A><A NAME="marker=26391"> </A><A NAME="marker=26392"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26393"> </A>A track's volume is scaled to a movie's volume, and the movie's volume is scaled to the value the user specifies for speaker volume using the Sound control panel. That is, a movie's volume setting represents the maximum loudness of any track in the movie. If you set a track's volume to a value less than 1.0, that track plays proportionally quieter, relative to the loudness of other tracks in the movie.</P><P CLASS="T1.Text1"><A NAME="pgfId=26394"> </A>Each track in a movie has its own balance setting. The balance setting controls the mix of sound between a computer's two speakers. If the source sound is monaural, the balance setting controls the relative loudness of each speaker. If the source sound is stereo, the balance setting governs the mix of the right and left channels. You can set the balance for a track's media by calling the <TT CLASS="cv">SetSoundMediaBalance</TT> function. When you save the movie, the balance setting is stored in the movie file.</P><P CLASS="T1.Text1"><A NAME="pgfId=26398"> </A>In the Movie Toolbox, balance values are represented as 16-bit, fixed-point numbers that range from -1.0 to +1.0. The high-order 8 bits contain the integer portion of the value; the low-order 8 bits contain the fractional part. Negative values weight the balance toward the left speaker; positive values emphasize the left channel. Setting the balance to 0 corresponds to a neutral setting.<A NAME="marker=26399"> </A><A NAME="marker=26400"> </A></P></DIV><DIV><H2 CLASS="H3.Heading3"><A NAME="pgfId=26402"> </A><A NAME="30126"> </A>Adding Sound to Video</H2><P CLASS="T0.Text0"><A NAME="pgfId=26405"> </A><A NAME="marker=26403"> </A><A NAME="marker=26404"> </A>Most QuickTime movies contain both sound data and video data. If you are creating an application that plays movies, you do not need to worry about the details of how sound is stored in a movie. However, if you are developing an application that creates movies, you need to consider how you store the sound and video data.<A NAME="marker=26406"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26407"> </A>There are two ways to store sound data in a QuickTime movie. The simplest method is to store the sound track as a continuous stream. When you play a movie that has its sound in this form, the Movie Toolbox loads the entire sound track into memory, and then reads the video frames when they are needed for display. While this technique is very efficient, it requires a large amount of memory to store the entire sound, which limits the length of the movie. This technique also requires a large amount of time to read in the entire sound track before the movie can start playing. For this reason, this technique is only recommended when the sound for a movie is fairly small (less than 64 KB).<A NAME="marker=26408"> </A><A NAME="marker=26409"> </A><A NAME="marker=26410"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26411"> </A>For larger movies, a technique called <B CLASS="bold">interleaving</B> must be used so that the sound and video data may be alternated in small pieces, and the data can be read off disk as it is needed. Interleaving allows for movies of almost any length with little delay on startup. However, you must tune the storage parameters to avoid a lower video frame rate and breaks in the sound that result when sound data is read from slow storage devices. In general, the Movie Toolbox hides the details of interleaving from your application. The <TT CLASS="cv">FlattenMovie</TT> and <TT CLASS="cv">FlattenMovieData</TT> functions allow you to enable and disable interleaving when you create a movie. These functions then interact with the appropriate media handler to correctly interleave the sound and video data for your movie. For more information about working with sound, see the chapter &quot;Sound Manager&quot; in <I CLASS="italics">Inside Macintosh: More Macintosh Toolbox</I>. </P></DIV><DIV><H2 CLASS="H3.Heading3"><A NAME="pgfId=26421"> </A><A NAME="marker=26418"> </A><A NAME="marker=26419"> </A><A NAME="11402"> </A>Sound Data Formats</H2><P CLASS="T0.Text0"><A NAME="pgfId=26422"> </A>The Movie Toolbox stores sound data in sound tracks as a series of digital samples. Each sample specifies the amplitude of the sound at a given point in time, a format commonly known as <I CLASS="italics">linear pulse-code modulation</I> (linear PCM). The Movie Toolbox supports both monaural and stereo sound. For monaural sounds, the samples are stored sequentially, one after another. For stereo sounds, the samples are stored interleaved in a left/right/ left/right fashion.<A NAME="marker=26423"> </A><A NAME="marker=26424"> </A><A NAME="marker=26425"> </A><A NAME="marker=26426"> </A><A NAME="marker=26427"> </A><A NAME="marker=26428"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26429"> </A>In order to support a broad range of audio data formats, the Movie Toolbox can accommodate a number of different sample encoding formats, sample sizes, sample rates, and compression algorithms. The following paragraphs discuss the details of each of these attributes of movie sound data.</P><P CLASS="T1.Text1"><A NAME="pgfId=26430"> </A>The Movie Toolbox supports two techniques for encoding the amplitude values in a sample: offset-binary and twos-complement. <B CLASS="bold">Offset-binary</B> <B CLASS="bold">encoding</B> represents the range of amplitude values as an unsigned number, with the midpoint of the range representing silence. For example, an 8-bit sample stored in offset-binary format would contain sample values ranging from 0 to 255, with a value of 128 specifying silence (no amplitude). Samples in Macintosh sound resources are stored in offset-binary form.<A NAME="marker=26431"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26432"> </A><B CLASS="bold">Twos-complement</B> <B CLASS="bold">encoding</B> stores the amplitude values as a signed number--in this case silence is represented by a sample value of 0. Using the same 8-bit example, twos-complement values would range from -128 to 127, with 0 meaning silence. The Audio Interchange File Format (AIFF) used by the Sound Manager stores samples in twos-complement form, so it is common to see this type of sound in QuickTime movies.<A NAME="marker=26433"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26434"> </A>The Movie Toolbox allows you to store information about the sound data in the sound description. See <A target="doc" HREF="../../APIREF/SOURCESV/sounddescriptions.htm">&quot;The Sound Description Structure,&quot;</A>for details on the sound description structure. Sample size indicates the number of bits used to encode the amplitude value for each sample. The size of a sample determines the quality of the sound, since more bits can represent more amplitude values. The basic Macintosh sound hardware supports only 8-bit samples, but the Sound Manager also supports 16-bit and 32-bit sample sizes. The Movie Toolbox plays these larger samples on 8-bit Macintosh hardware by converting the samples to 8-bit format before playing them.<A NAME="marker=26441"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26442"> </A>Sample rate indicates the number of samples captured per second. The sample rate also influences the sound quality, because higher rates can more accurately capture the original sound waveform. The basic Macintosh hardware supports an output sampling rate of 22.254 kHz. The Movie Toolbox can support any rate up to 65.535 kHz; as with sample size, the Movie Toolbox converts higher sample rates to rates that can be accommodated by the Macintosh hardware when it plays the sound.<A NAME="marker=26443"> </A><A NAME="marker=26444"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26445"> </A>In addition to these sample encoding formats, the Movie Toolbox also supports the Macintosh Audio Compression and Expansion (<A NAME="marker=26446"> </A>MACE) capability of the Sound Manager. This allows compression of the sound data at ratios of 3 to 1 or 6 to 1. Compressing a movie's sound can yield significant savings in storage and RAM space, at the cost of somewhat lower quality and higher CPU overhead on playback.<A NAME="marker=26447"> </A><A NAME="marker=26448"> </A><A NAME="marker=26449"> </A><A NAME="marker=26450"> </A><A NAME="marker=26451"> </A><A NAME="marker=26452"> </A><A NAME="marker=26453"> </A><A NAME="marker=26454"> </A></P></DIV><hr>&#169; 1997 Apple Computer, Inc.<!-- QTnavbar start --><P><I>QuickTime API Documentation</I><P><A target="doc" HREF="xxIntroductions.17.htm">Previous</A> | <A target="doc" HREF="xxIntroductions.12.htm">Chapter Top</A> | <A target="doc" HREF="xxIntroductions.1.htm">Chapter Contents</A> | <A target="doc" HREF="xxIntroductions.19.htm">Next</A> | <!-- QTnavbar end --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
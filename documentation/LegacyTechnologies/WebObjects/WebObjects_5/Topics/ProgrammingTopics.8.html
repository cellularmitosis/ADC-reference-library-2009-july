<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Batch Faulting to Improve Performance</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.7.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.9.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606143"> </A><A NAME="35698"> </A>Batch Faulting to Improve Performance</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606144"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606145"> </A>Describes how to fault several objects at once.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606146"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=606147"> </A>When you access an enterprise object that has not yet been faulted, Enterprise Objects Framework (EOF) issues a query against the database to load in the object's data. This query loads only the data needed for that particular object. This mechanism normally increases the efficiency of the framework, but it can sometimes be expensive when faulting multiple records.</P><P CLASS="Body"><A NAME="pgfId=606148"> </A>Batch faulting instructs EOF to fetch data for several objects if any one of them faults. It is useful if you know that when you fetch a particular relationship, you will also fetch other relationships.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606149"> </A>Example</H3><P CLASS="Body"><A NAME="pgfId=606150"> </A>In the Movies example database, a Movie has a one-to-one relationship to a PlotSummary. Suppose you have a WOComponent that lets you browse through movies and their summaries in sets of ten. Without batch faulting, EOF will retrieve the PlotSummary data by making ten separate queries to the database every time the component displays a group of Movies. You can use batch faulting to ensure that every time any one of the PlotSummary objects is faulted, nine more are faulted along with it, significantly reducing the number of queries against the database.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606151"> </A>How to Use</H3><P CLASS="Body"><A NAME="pgfId=606152"> </A>The following are three different ways to enable batch faulting.</P><P CLASS="Numbered1"><A NAME="pgfId=606153"> </A>Use EOModel's batch faulting field in the &quot;Advanced Entity&quot; inspector. This is the easiest way to implement batch faulting, but also the least precise, since EOF chooses which faults to batch. Beware of setting this number too high--EOF may generate a SQL statement that is rejected by the database server.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=606154"> </A>Call <TT CLASS="Code">EODatabaseContext</TT>'s <TT CLASS="Code">batchFetchRelationship:forSourceObjects:editingContext:</TT>. This will fault all of the objects related to the objects in the SourceObjects array. </LI><LI CLASS="Numbered"><A NAME="pgfId=606155"> </A>Use the <TT CLASS="Code">EODatabaseContext</TT> delegate methods <TT CLASS="Code">databaseContext:shouldFetchArrayFault:</TT> and <TT CLASS="Code">databaseContext:shouldFetchObjectFault:</TT>. By selectively returning NO to these methods, you can choose which objects to fault.</LI></OL></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606158"> </A>When Not To Use</H3><P CLASS="Body"><A NAME="pgfId=606159"> </A>Don't use batch faulting when reducing memory use is more important than increasing database performance. You may fetch more objects than are needed.</P><P CLASS="Body"><A NAME="pgfId=606160"> </A>Don't use batch faulting when you know that all the particular relationships for a series of fetched objects will be faulted. Use prefetching instead.</P></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606161"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606163"> </A><A HREF="ProgrammingTopics.9.html#24021" CLASS="XRef">Prefetching</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606164"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606165"> </A>	How do I fetch multiple EOFaults at once?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606166"> </A>	How can I increase the performance of my fetches?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606167"> </A>	How can I minimize database access?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606168"> </A>	How can I increase response time?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606169"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606170"> </A>Batch</LI><LI CLASS="Bulleted"><A NAME="pgfId=621074"> </A>Fault</LI><LI CLASS="Bulleted"><A NAME="pgfId=606171"> </A>Performance</LI><LI CLASS="Bulleted"><A NAME="pgfId=606173"> </A>Fetching</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606174"> </A>Revision History</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606175"> </A>1 July, 1998. Paul Haddad. First Draft.</LI><LI CLASS="Bulleted"><A NAME="pgfId=606176"> </A>2 July, 1998. Paul Haddad. Completed When to Use sentence. </LI><LI CLASS="Bulleted"><A NAME="pgfId=615841"> </A>5 November, 1998. Clif Liu. Second Draft.</LI></UL></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.7.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.9.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
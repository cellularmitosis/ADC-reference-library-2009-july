<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTLookupName</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING241></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-240.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-242.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-224.html"><B>Chapter 24 - Mappers Reference</B></A> / <A HREF="NetworkingWOT-232.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-240.html"><B>Looking Up Names</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING241-0></A>
<H3><A NAME=MARKER-9-54></A>OTLookupName</H3>
 Finds and returns all addresses that correspond to a particular name or name pattern, or confirms that a name is registered.<P>
<A NAME=HEADING241-2></A>
<H5>C INTERFACE </H5>
<PRE>
<A NAME=MARKER-11-55></A>OSStatus OTLookupName(MapperRef ref, 
                     TLookupRequest* req, 
                     TLookupReply* reply);
</PRE>
<A NAME=HEADING241-4></A>
<H5>C++ INTERFACE </H5>
<PRE>
<A NAME=MARKER-12-56></A>OSStatus TMapper::LookupName(TLookupRequest* req, 
                                         TLookupReply* reply);
</PRE>
<A NAME=HEADING241-6></A>
<H5>PARAMETERS </H5>
<DL>
<DT><CODE>ref</CODE>
<DD> A mapper reference.
<DT><CODE>req</CODE>
<DD> A <A HREF=NetworkingWOT-229.html#MARKER-9-28><CODE>TLookupRequest</CODE></A> structure that specifies the name to be looked up as well as some additional values that the mapper provider can use to circumscribe the search.
<DT><CODE>reply</CODE>
<DD> A <A HREF=NetworkingWOT-230.html#MARKER-9-31><CODE>TLookupReply</CODE></A> structure that specifies the size and location of a buffer to hold the names found, and returns the number of names found. 
<DT><I>function result</I>
<DD> An error code. See <A HREF=NetworkingWOT-479.html#MARKER-9-72>Appendix B</A> for more information.
</DL>
<A NAME=HEADING241-11></A>
<H5>DISCUSSION</H5>
 You can use the <CODE>OTLookupName</CODE> function to find out whether a name is registered and what address is associated with that name. You use the <CODE>req</CODE> parameter to supply the information needed for the search: what name should be looked up and, optionally, what node contains that information, how many matches you expect to find, and how long the search should continue before the operation completes. On completion, the <CODE>reply</CODE> parameter's <CODE>names</CODE> field points to the buffer where the matching entries are stored and the <CODE>rspcount</CODE> field specifies the number of matching entries.<P>
 For each registered name found, the <CODE>OTLookupName</CODE> function stores information in the buffer referenced by the <CODE>names</CODE> field of the <CODE>reply</CODE> parameter. See <A HREF=NetworkingWOT-36.html#MARKER-9-44>Figure 6-1 </A> for the format of this information.<P>
 If you are searching for names using a name pattern and you expect that more than one name will be returned to you, you need to parse the reply buffer to extract the matching names. A sample program that shows the use of mapper function is <A HREF=NetworkingWOT-36.html#MARKER-9-51>Listing 6-1 </A>. <A NAME=MARKER-13-57></A><P>
 If the mapper is in synchronous mode, the function does not return until the operation is complete. If you call the <CODE>OTLookupName</CODE> function asynchronously, the mapper provider calls your notifier function passing one of two completion event codes for the <CODE>code</CODE> parameter (<CODE>T_LKUPNAMERESULT</CODE> or <CODE>T_LKUPNAMECOMPLETE</CODE>) and passing the <CODE>reply</CODE> parameter in the <CODE>cookie</CODE> parameter. The mapper provider sends the <CODE>T_LKUPNAMERESULT</CODE> event each time it stores a name in the reply buffer, and it sends the <CODE>T_LKUPNAMECOMPLETE</CODE> event when it is done. When you receive this event, examine the <CODE>rspcount</CODE> field to determine whether there is a last name to retrieve from the reply buffer. The use of both codes is a feature that gives you a choice about how to process multiple names when searching for names matching a pattern. <P>
<UL>
<P><LI>If you decide to allocate a buffer that is large enough to contain all the names returned, you can ignore the <CODE>T_LKUPNAMERESULT</CODE> code and call a function that parses the buffer once the <CODE>OTLookupName</CODE> operation has completed--that is, once the provider calls your notifier function using the <CODE>T_LKUPNAMECOMPLETE</CODE> event<CODE>.</CODE><P>
</UL>
 If you want to save memory or if you don't know how large a buffer to allocate, you can use the following method to process the names returned. Each time that the <CODE>T_LKUPNAMERESULT</CODE> event is passed, you must do something with the reply from the reply buffer. You can copy it somewhere, or you can ignore it if it isn't a name you're interested in. Then, from inside your notifier you set the <CODE>reply-&gt;names.len</CODE> field or the <CODE>reply-&gt;rspcount</CODE> field back to 0 (thus allowing the mapper provider to overwrite the original name). Accordingly, when the mapper provider has inserted another name into your reply buffer, it calls your notifier passing the <CODE>T_LKUPNAMERESULT</CODE> code, and you can process the new entry as you have processed the first entry. This method also saves you the trouble of having to parse through the buffer to extract name and address information. For more information on notifier functions and event codes see <A HREF=NetworkingWOT-117.html#MARKER-9-113>"Using Notifier Functions"</A> and <A HREF=NetworkingWOT-100.html#MARKER-9-22>"Event Codes"</A>.<P>
 The <CODE>cookie</CODE> parameter to the notifier contains the <CODE>reply</CODE> parameter to the <CODE>OTLookupName</CODE> function. <P>
 The format of the names and protocol addresses are specific to the underlying protocol. Consult the documentation supplied for your protocol for more information.<P>
<A NAME=HEADING241-20></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-238.html#MARKER-9-47><CODE>OTDeleteName</CODE></A> function.<P>
 The <A HREF=NetworkingWOT-239.html#MARKER-9-50><CODE>OTDeleteNameByID</CODE></A> function.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-240.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-242.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

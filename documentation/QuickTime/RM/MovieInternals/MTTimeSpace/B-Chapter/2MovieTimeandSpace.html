<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Movie Internals Guide: Movie Time and Space</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Movie Time and Space"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace" title="Movie Time and Space"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../MovieInternals-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000546" target="_top">Movie Internals</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000911-IntroductiontoQuickTimeMovieInternalsGuide-DontLinkElementID_68">QuickTime Movie Internals Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../A-Intro/1Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../C-Chapter/3ClockComponentsOver.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-SW1" title="Movie Time and Space"></a>
<h1>Movie Time and Space</h1>

<p>This chapter describes the functions of the movie toolbox that your application will use to manipulate the timebase and spatial characteristics of movies, tracks, and media.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_4">Working With Movie Spatial Characteristics</a>
				
			<br/>
			
        
			
			
				<a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_8">Working With Movie Time</a>
				
			<br/>
			
        
			
			
				<a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_17">Time Structures</a>
				
			<br/>
			
        
			
			
				<a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_20">Time Base Callback Functions</a>
				
			<br/>
			
        
			
			
				<a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_21">Time and Space Function Summary</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_4" title="Working With Movie Spatial Characteristics"></a>
<h2><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithMovieSpatialCharacteristics" title="Working With Movie Spatial Characteristics"></a>Working With Movie Spatial Characteristics</h2>
<p>The Movie Toolbox provides a number of functions that allow your application to determine and change the spatial characteristics of movies and tracks. Before using any of them, you should be familiar with the way in which the Movie Toolbox displays movies. Here are some tips for using these functions:</p>
<ul class="ul">
<li class="li"><p>You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieGWorld" target="_top">SetMovieGWorld</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieGWorld" target="_top">GetMovieGWorld</a></code> functions to work with a movie&#8217;s graphics world.</p></li>
<li class="li"><p>Your application can work with a movie&#8217;s matrix by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieMatrix" target="_top">GetMovieMatrix</a></code> and&#160;<code>SetMovieMatrix</code> functions, and it can work with a track&#8217;s matrix with the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackMatrix" target="_top">GetTrackMatrix</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackMatrix" target="_top">SetTrackMatrix</a></code> functions. Then you can perform operations on matrices with the Movie Toolbox&#8217;s matrix functions described in <span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-MatrixFunctions">Matrix Functions</a></span>.</p></li>
<li class="li"><p>Certain functions affect the displayed movie and its tracks in the final display coordinate system. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieGWorld" target="_top">SetMovieGWorld</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieGWorld" target="_top">GetMovieGWorld</a></code> functions let you work with a movie&#8217;s display destination. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieBox" target="_top">GetMovieBox</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieBox" target="_top">SetMovieBox</a></code> functions allow you to work with a movie&#8217;s boundary rectangle and its associated transformations. Alternatively, you can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieMatrix" target="_top">GetMovieMatrix</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMatrix" target="_top">SetMovieMatrix</a></code> functions to work directly with a movie&#8217;s transformation matrix. The&#160;<code>GetMovieDisplayBoundsRgn</code> function determines a movie&#8217;s boundary region at&#160;the current movie time. On the other hand, the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMovieSegmentDisplayBoundsRgn" target="_top">GetMovieSegmentDisplayBoundsRgn</a></code> function determines a movie&#8217;s boundary region over a specified time segment. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieDisplayClipRgn" target="_top">GetMovieDisplayClipRgn</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieDisplayClipRgn" target="_top">SetMovieDisplayClipRgn</a></code> functions to work with a movie&#8217;s display clipping region.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackDisplayBoundsRgn" target="_top">GetTrackDisplayBoundsRgn</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetTrackSegmentDisplayBoundsRgn" target="_top">GetTrackSegmentDisplayBoundsRgn</a></code> functions determine a track&#8217;s final boundary region. You can use the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackLayer" target="_top">GetTrackLayer</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackLayer" target="_top">SetTrackLayer</a></code> functions to control the drawing order of tracks within a movie.</p></li>
<li class="li"><p>A number of functions affect a movie&#8217;s display boundaries before any display transformations. These functions operate in the movie&#8217;s display coordinate system. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieClipRgn" target="_top">GetMovieClipRgn</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieClipRgn" target="_top">SetMovieClipRgn</a></code> functions to work with a movie&#8217;s clipping region; that is, the clipping region that is applied before the movie display transformation. Use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieBoundsRgn" target="_top">GetMovieBoundsRgn</a></code> function to determine a movie&#8217;s boundary region at the current movie time.</p></li>
<li class="li"><p>Use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackMovieBoundsRgn" target="_top">GetTrackMovieBoundsRgn</a></code> function to work with a track&#8217;s boundary region after matrix transformations have placed the track into the movie&#8217;s display system. The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackMatrix" target="_top">SetTrackMatrix</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackMatrix" target="_top">GetTrackMatrix</a></code> functions let you define a track&#8217;s matrix transformations.</p></li>
<li class="li"><p>The Movie Toolbox provides several functions that affect a track&#8217;s display boundaries; these functions operate in the track&#8217;s display coordinate system before any other display transformations are applied. The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackDimensions" target="_top">GetTrackDimensions</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackDimensions" target="_top">SetTrackDimensions</a></code> functions allow you to establish a track&#8217;s coordinate system and to establish a track&#8217;s source rectangle.</p></li>
<li class="li"><p>You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackBoundsRgn" target="_top">GetTrackBoundsRgn</a></code> function to determine a track&#8217;s boundary region. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackClipRgn" target="_top">GetTrackClipRgn</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTrackClipRgn" target="_top">SetTrackClipRgn</a></code> functions let you work with a track&#8217;s clipping region. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackMatte" target="_top">GetTrackMatte</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTrackMatte" target="_top">SetTrackMatte</a></code> functions to establish a track&#8217;s matte. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeMatte" target="_top">DisposeMatte</a></code> function allows you to dispose of a matte once you are finished with it.</p></li>
</ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_70" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
A track&#8217;s source rectangle defines the coordinate system of the track. You specify the dimensions of the rectangle by providing the coordinates of the lower-right corner of the rectangle. The Movie Toolbox sets the upper-left corner to (0,0) in the track&#8217;s coordinate system.  </p>
</div>
<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_5" title="Matrix Functions"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-MatrixFunctions" title="Matrix Functions"></a>Matrix Functions</h3>
<p>The Movie Toolbox provides a number of functions that allow you to work with transformation matrices. This section describes those functions. For descriptions of fixed-point and fixed-rectangle structures, see <span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TheFixedPointandFixedRectangleStructures">The Fixed-Point and Fixed-Rectangle Structures</a></span>.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_71" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
The functions described in this section do not appear in the interface file <code>Movies</code>.<code>hMovie</code> Toolbox; rather, they appear in the <code>ImageCompression</code>.<code>h</code> interface file.  </p>
</div>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_6" title="The Fixed-Point and Fixed-Rectangle Structures"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TheFixedPointandFixedRectangleStructures" title="The Fixed-Point and Fixed-Rectangle Structures"></a>The Fixed-Point and Fixed-Rectangle Structures</h3>
<p>The Movie Toolbox matrix functions provide two mechanisms for specifying points and rectangles. Some of the functions work with standard QuickDraw points and rectangles, which use integer values to identify coordinates. Others, such as the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformFixedRect" target="_top">TransformFixedRect</a></code> function, work with points and rectangles whose coordinates are expressed as fixed-point numbers. By using fixed-point numbers in these points and rectangles, the Movie Toolbox can support a greater degree of precision when defining graphic objects.</p>
<p>The <code><!--a target="_top" -->FixedPoint<!--/a--></code> data type defines a <strong>fixed</strong> <strong>point.</strong> The <code><!--a target="_top" -->FixedRect<!--/a--></code> data type defines a <strong>fixed</strong> <strong>rectangle.</strong> Note that both of these structures define the x coordinate before the y coordinate. This is different from the standard QuickDraw structures.</p>

<div class="codesample"><table><tr><td scope="row"><pre>struct FixedPoint<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed x;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* point's x coordinate as fixed-point number */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed y;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* point's y coordinate as fixed-point number */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct FixedPoint FixedPoint;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>x</code></p></td>
<td ><p>Defines the point's x coordinate as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>y</code></p></td>
<td ><p>Defines the point's y coordinate as a fixed-point number.</p></td>
</tr>

</table></div>

<div class="codesample"><table><tr><td scope="row"><pre>struct FixedRect<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed left;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* x coordinate of upper-left corner */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed top;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* y coordinate of upper-left corner */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed right;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* x coordinate of lower-right corner */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed bottom;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* y coordinate of lower-right corner */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct FixedRect FixedRect;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>left</code></p></td>
<td ><p>Defines the x coordinate of the upper-left corner of the rectangle as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>top</code></p></td>
<td ><p>Defines the y coordinate of the upper-left corner of the rectangle as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>right</code></p></td>
<td ><p>Defines the x coordinate of the lower-right corner of the rectangle as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>bottom</code></p></td>
<td ><p>Defines the y coordinate of the lower-right corner of the rectangle as a fixed-point number.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_7" title="Creating a Track Matte"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-CreatingaTrackMatte" title="Creating a Track Matte"></a>Creating a Track Matte</h3>
<p>Listing&#160;1-1 provides an example of how to create a track matte. The <code>CreateTrackMatte</code> function adds an uninitialized, 8-bit-deep, grayscale matte to a track. The <code>UpdateTrackMatte</code> function draws a gray ramp rectangle around the edge of the matte and fills the center of the matte with black. (A ramp rectangle shades gradually from light to dark in smooth increments.)</p>
<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_72" title="Listing 1-1Creating a track matte"></a>
<p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Creating a track matte</p>
<div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>void CreateTrackMatte (Track theTrack)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;QDErr err;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;GWorldPtr aGW;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Rect trackBox;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed trackHeight;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed trackWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CTabHandle grayCTab;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;GetTrackDimensions (theTrack, &#38;trackWidth, &#38;trackHeight);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;SetRect (&#38;trackBox, 0, 0, FixRound (trackWidth),<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; FixRound (trackHeight));<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;grayCTab = GetCTable(40);&#160;&#160;&#160;&#160;/* 8 bit + 32 = 8 bit gray */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;err = NewGWorld (&#38;aGW, 8, &#38;trackBox, grayCTab,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; (GDHandle) nil, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;DisposeCTable (grayCTab);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if (!err &#38;&#38; (aGW != nil))<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SetTrackMatte (theTrack, aGW-&#62;portPixMap);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DisposeGWorld (aGW);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;}<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>void UpdateTrackMatte (Track theTrack)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;OSErr err;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;PixMapHandle trackMatte;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;PixMapHandle savePortPix;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Movie &#160;&#160;&#160;&#160;&#160;&#160;theMovie;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;GWorldPtr tempGW;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CGrafPtr savePort;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;GDHandle saveGDevice;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Rect &#160;&#160;&#160;&#160;&#160;&#160;&#160;matteBox;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short &#160;&#160;&#160;&#160;&#160;&#160;i;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;theMovie = GetTrackMovie (theTrack);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;trackMatte = GetTrackMatte (theTrack);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if (trackMatte == nil)<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* track doesn't have a matte, so give it one */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CreateTrackMatte (theTrack);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;trackMatte = GetTrackMatte (theTrack);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (trackMatte == nil)<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;GetGWorld (&#38;savePort, &#38;saveGDevice);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;matteBox = (**trackMatte).bounds;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;err = NewGWorld(&#38;tempGW,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(**trackMatte).pixelSize, &#38;matteBox,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(**trackMatte).pmTable, (GDHandle) nil, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if (err || (tempGW == nil)) return;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;SetGWorld (tempGW, nil);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;savePortPix = tempGW-&#62;portPixMap;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;LockPixels (trackMatte);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;SetPortPix (trackMatte);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;/* draw a gray ramp rectangle around the edge of the matte */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;for (i = 0; i &#60; 35; i++)<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RGBColor aColor;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;long &#160;&#160;&#160;&#160;&#160;&#160;&#160;tempLong;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tempLong = 65536 - ((65536 / 35) * (long)i);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;aColor.red = aColor.green = aColor.blue = tempLong;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RGBForeColor(&#38;aColor);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FrameRect (&#38;matteBox);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;InsetRect (&#38;matteBox, 1, 1);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;}<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;/* fill the center of the matte with black */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;ForeColor (blackColor);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;PaintRect (&#38;matteBox);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;SetPortPix (savePortPix);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;SetGWorld (savePort, saveGDevice);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;DisposeGWorld (tempGW);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;UnlockPixels (trackMatte);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;SetTrackMatte (theTrack, trackMatte);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;DisposeMatte (trackMatte);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>



<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_8" title="Working With Movie Time"></a>
<h2><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithMovieTime" title="Working With Movie Time"></a>Working With Movie Time</h2>
<p>Every QuickTime movie has its own time base. A movie&#8217;s time base allows all the tracks that make up the movie to be synchronized when the movie is played. The Movie Toolbox provides a number of functions that allow your application to determine and establish the time parameters of a movie:</p>
<ul class="ul">
<li class="li"><p>You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTimeBase" target="_top">GetMovieTimeBase</a></code> function to retrieve the time base for a movie.</p></li>
<li class="li"><p>You can work with a movie&#8217;s current time by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTime" target="_top">GetMovieTime</a></code>, <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTime" target="_top">SetMovieTime</a></code>, and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTimeValue" target="_top">SetMovieTimeValue</a></code> functions.</p></li>
<li class="li"><p>You can work with a movie&#8217;s time scale by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTimeScale" target="_top">GetMovieTimeScale</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTimeScale" target="_top">SetMovieTimeScale</a></code> functions.</p></li>
<li class="li"><p>The Movie Toolbox can calculate the total duration of a movie. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieDuration" target="_top">GetMovieDuration</a></code> function to retrieve a movie&#8217;s duration.</p></li>
<li class="li"><p>Your application can call the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieRate" target="_top">GetMovieRate</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieRate" target="_top">SetMovieRate</a></code> to work with a movie&#8217;s playback rate.</p></li>
</ul>
<p>The next sections discuss those functions. Later sections in this chapter discuss the Movie Toolbox functions that allow you to work with the time parameters of tracks and media structures. For information about more functions that work with time, see <span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBaseFunctions">Time Base Functions</a></span>.</p>
<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_9" title="About Movie Time"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-AboutMovieTime" title="About Movie Time"></a>About Movie Time</h3>
<p>At the most basic level, the Movie Toolbox allows you to process time based data. As such, the Movie Toolbox must provide a description of the time basis of that data as well as a definition of the context for evaluating that time basis. In QuickTime, a movie&#8217;s time basis is referred to as its <strong>time</strong> <strong>base.</strong> Geometrically, you can think of the time base as a vector that defines the direction and velocity of time for a movie. The context for a time base is called its <strong>time</strong> <strong>coordinate</strong> <strong>system.</strong> Essentially, the time coordinate system defines the axis on which the time base vector is plotted. The smallest single unit of time marked on that axis is defined by the time scale as the units per absolute second.</p>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_10" title="Time Coordinate Systems"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeCoordinateSystems" title="Time Coordinate Systems"></a>Time Coordinate Systems</h3>
<p>A movie&#8217;s time coordinate system provides the context for evaluating the passage of time in the movie. If you think of the time coordinate system as defining an axis for measuring time, it is only natural that this axis would be marked with a scale that defines a basic unit of measurement. In QuickTime, that measurement system is called a <strong>time</strong> <strong>scale.</strong></p>
<p>A QuickTime time scale defines the number of time units that pass each second in a given time coordinate system. A time coordinate system that has a time scale of 1 measures time in seconds. Similarly, a time coordinate system that has a time scale of 60 measures sixtieths of a second. In general, each time unit in a time coordinate system is equal to (1/time scale) seconds. Some common time scales are listed in Table&#160;1-1.</p>
<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_73" title="Table 1-1Common movie time scales"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Common movie time scales</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Time scale</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Absolute time measured</p></th>
</tr>


<tr>
<td  scope="row"><p>1</p></td>
<td ><p>Seconds</p></td>
</tr>
<tr>
<td  scope="row"><p>60</p></td>
<td ><p>Sixtieths of a second (Macintosh ticks)</p></td>
</tr>
<tr>
<td  scope="row"><p>1000</p></td>
<td ><p>Milliseconds</p></td>
</tr>
<tr>
<td  scope="row"><p>22254.54</p></td>
<td ><p>Sound sampled at 22 kHz</p></td>
</tr>

</table></div>
<p>Figure&#160;1-1 shows a duration of two seconds in absolute time and equivalent durations in the common time scales listed in Table&#160;1-1.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_74" title="Figure 1-1Time scales"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Time scales</p><img src = "../Art/time_scales.gif" alt = "" width="399" height="212"></div><br/>
<p>A particular point in time in a time coordinate system is represented using a <strong>time</strong> <strong>value.</strong> <strong></strong> A time value is expressed in terms of the time scale of its time coordinate system. Without an appropriate time scale, a time value is meaningless. For example, in a time coordinate system with a time scale of 60, a time value of 180 translates to 3 seconds. Because all time coordinate systems tie back to absolute time (that is, time as we measure it in seconds), the Movie Toolbox can translate time values from one time coordinate system into another.</p>
<p>Time coordinate systems have a finite maximum duration that defines the maximum&#160;time value for a time coordinate system (the minimum time value is always&#160;0). Note that as a QuickTime movie is edited, the duration changes.</p>
<p>As the value of the time scale increases (as the time unit for a coordinate system gets smaller in terms of absolute time), the maximum absolute time that can be represented in a time coordinate system decreases. For example, if a time value were represented as an unsigned 16-bit integer, its maximum value would be 65,535. In a time coordinate system with a time scale of 1, the maximum time value would represent 65,535 seconds. However, in a time coordinate system with a time scale of 5, the maximum time value would correspond to 13,107 seconds. Hence, a time coordinate system&#8217;s duration is limited by its time scale. QuickTime uses 32-bit and 64-bit quantities to represent time values, so you only need to worry about attaining a maximum absolute time in&#160;situations where a time coordinate system&#8217;s duration is very long or its time scale is very large.</p>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_11" title="Time Bases"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBases" title="Time Bases"></a>Time Bases</h3>
<p>A movie&#8217;s time base defines its current time value and the <strong>rate</strong> at which time passes for the movie. The rate specifies the speed and direction in which time travels in a movie. Negative rate values cause you to move backward through a movie&#8217;s data; positive values move forward. The time base also contains a reference to the clock that provides timing for the time base. QuickTime clocks are implemented as components that are managed by the Component Manager.</p>
<p>Time bases exist independently of any specific time coordinate system. However, time values extracted from a time base are meaningless without a time scale. Therefore, whenever you obtain a time value from a time base, you must specify the time scale of the time value result. The Movie Toolbox translates the time base&#8217;s time value into a value that is sensible in the specified time scale.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_75" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
A time base differs from a time coordinate system, which provides the foundation for a time base. (A time coordinate system is the field of play that defines the coordinate axis for a time base.) A time base operates in the context of a time coordinate system. It has a rate, which implies a direction as well as a speed through the movie.  </p>
</div>
<p>Figure&#160;1-2 represents a time coordinate system and a time base geometrically. The time coordinate system is represented by a coordinate axis. In this example, the time coordinate system has a time scale of 2; that is, there are two time units in each second. The duration of this time coordinate system is 2 seconds, which is equivalent to 4 time units. An object&#8217;s time base is depicted by the large arrow under the axis that represents the time coordinate system. This time base has a current time value of 3 and a rate of 1. The starting time is a time value, expressed in the units of the time coordinate system.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_76" title="Figure 1-2A time coordinate system and a time base"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>A time coordinate system and a time base</p><img src = "../Art/time_coord_sys_and_base.gif" alt = "" width="399" height="154"></div><br/>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_12" title="Working With Track Time"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithTrackTime" title="Working With Track Time"></a>Working With Track Time</h3>
<p>The Movie Toolbox provides several functions that allow your application to determine and establish a track&#8217;s time parameters. A track uses the time base of the movie that contains the track; therefore there are no functions that work with a track&#8217;s time base or time scale. However, you can determine a track&#8217;s duration and its offset from the start of a movie.</p>
<p>All of the tracks in a movie use the movie&#8217;s time coordinate system. That is, the movie&#8217;s time scale defines the basic time unit for each of the movie&#8217;s tracks. Each track begins at the beginning of the movie, but the track&#8217;s data might not begin until some time value other than 0. This intervening time is represented by blank space. In an audio track the blank space translates to silence; in a video track the blank space generates no visual image. This blank space is the <strong>track</strong> <strong>offset.</strong> Each track has its own <strong>duration.</strong> This duration need not correspond to the duration of the movie. A movie duration always equals the maximum track duration. These functions help you work with track time:</p>
<ul class="spaceabove">
<li class="li"><p>You can use the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackDuration" target="_top">GetTrackDuration</a></code> function to determine a track&#8217;s duration.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackOffset" target="_top">SetTrackOffset</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackOffset" target="_top">GetTrackOffset</a></code> functions enable you to work with a track&#8217;s offset from the start of the movie that contains it.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/TrackTimeToMediaTime" target="_top">TrackTimeToMediaTime</a></code> function lets you translate a track&#8217;s time to the corresponding time value of a media in the track.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_13" title="Working With Media Time"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithMediaTime" title="Working With Media Time"></a>Working With Media Time</h3>
<p>The Movie Toolbox provides functions that allow your application to work with the time parameters of a media:</p>
<ul class="spaceabove">
<li class="li"><p>You can use the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaDuration" target="_top">GetMediaDuration</a></code> function to determine a media&#8217;s duration.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaTimeScale" target="_top">GetMediaTimeScale</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetMediaTimeScale" target="_top">SetMediaTimeScale</a></code> let you determine or establish a media&#8217;s time scale.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_14" title="Time Base Functions"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBaseFunctions" title="Time Base Functions"></a>Time Base Functions</h3>
<p>The Movie Toolbox provides a number of functions that allow you to work with time bases. A QuickTime time base defines the time coordinate system of a movie. However, you can also use QuickTime time bases to provide general timing services. This section describes the functions that allow your application to work with time bases.</p>
<p>This section has been divided into the following topics:</p>
<ul class="spaceabove">
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-CreatingandDisposingofTimeBases">Creating and Disposing of Time Bases</a></span> describes how to create and dispose of time bases and how to assign a time base to a movie</p></li>
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithTimeBaseValues">Working With Time Base Values</a></span> discusses functions that allow your application to work with the contents of a time base</p></li>
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeStructures">Time Structures</a></span> describes a number of functions that allow you to convert times between time bases and to perform simple arithmetic on time values</p></li>
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBaseCallbackFunctions">Time Base Callback Functions</a></span> describes the functions your application may use to condition a time base to invoke functions your application provides</p></li>
</ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_77" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
Time base functions do not change the value of the Movie Toolbox sticky error value.  </p>
</div>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_15" title="Creating and Disposing of Time Bases"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-CreatingandDisposingofTimeBases" title="Creating and Disposing of Time Bases"></a>Creating and Disposing of Time Bases</h3>
<p>The following Movie Toolbox functions help your application create and dispose of time bases:</p>
<ul class="spaceabove">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewTimeBase" target="_top">NewTimeBase</a></code> function lets you create a new time base. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeTimeBase" target="_top">DisposeTimeBase</a></code> function to dispose of a time base once you are finished with it.</p></li>
<li class="li"><p>Time bases rely on either a clock component or another time base for their time source. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseMasterTimeBase" target="_top">SetTimeBaseMasterTimeBase</a></code> function to cause one time base to be based on another time base. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseMasterTimeBase" target="_top">GetTimeBaseMasterTimeBase</a></code> allows you to determine the master time base of a given time base.</p></li>
<li class="li"><p>You can assign a clock component to a time base; that clock then acts as the master clock for the time base. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseMasterClock" target="_top">SetTimeBaseMasterClock</a></code> function to assign a clock component to a time base. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseMasterClock" target="_top">GetTimeBaseMasterClock</a></code> function enables you to determine the clock component that is assigned to a time base. You can change the offset between a time base and its time source by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseZero" target="_top">SetTimeBaseZero</a></code> function.</p></li>
<li class="li"><p>You can set the time source of a movie by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMasterTimeBase" target="_top">SetMovieMasterTimeBase</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMasterClock" target="_top">SetMovieMasterClock</a></code> functions.</p></li>
</ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_78" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
Although most time base functions can be used at interrupt time, several of the Movie Toolbox functions cannot. For information about specific functions see the <em>QuickTime</em> <em>API</em> <em>Reference.</em>  </p>
</div>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_16" title="Working With Time Base Values"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithTimeBaseValues" title="Working With Time Base Values"></a>Working With Time Base Values</h3>
<p>Every time base contains a rate, a start time, a stop time, a current time, and some status information. The Movie Toolbox provides a number of functions that allow your application to work with the contents of a time base. You can use these functions:</p>
<ul class="spaceabove">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseTime" target="_top">GetTimeBaseTime</a></code> function lets you retrieve the current time value of a time base. You can set the current time value by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseTime" target="_top">SetTimeBaseTime</a></code> function; this function requires you to provide a time structure. Alternatively, you can set the current time based on a time value by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseValue" target="_top">SetTimeBaseValue</a></code> function.</p></li>
<li class="li"><p>You can determine the rate of a time base by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseRate" target="_top">GetTimeBaseRate</a></code> function.&#160;You can set the rate of a time base by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseRate" target="_top">SetTimeBaseRate</a></code> function. You can determine the effective rate of a specified time base (relative to the master time base to which it is subordinate) by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseEffectiveRate" target="_top">GetTimeBaseEffectiveRate</a></code> function.</p></li>
<li class="li"><p>You can retrieve the start time of a time base by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseStartTime" target="_top">GetTimeBaseStartTime</a></code> function. You can set the start time of a time base by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseStartTime" target="_top">SetTimeBaseStartTime</a></code> function. Similarly, you can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseStopTime" target="_top">GetTimeBaseStopTime</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseStopTime" target="_top">SetTimeBaseStopTime</a></code> functions to work with the stop time of a time base.</p></li>
</ul>
<p>The Movie Toolbox also provides functions that allow you to work with the status information of a time base:</p>
<ul class="spaceabove">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseStatus" target="_top">GetTimeBaseStatus</a></code> function allows you to read the current status of a time base.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseFlags" target="_top">GetTimeBaseFlags</a></code> function helps you obtain the control flags of a time base. You can set these flags by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseFlags" target="_top">SetTimeBaseFlags</a></code> function.</p></li>
</ul>


<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_17" title="Time Structures"></a>
<h2><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeStructures" title="Time Structures"></a>Time Structures</h2>
<p>The Movie Toolbox provides a number of functions that allow you to work with time structures:</p>
<ul class="ul">
<li class="li"><p>You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/ConvertTime" target="_top">ConvertTime</a></code> function to convert a time you obtain from one time base into a time that is relative to another time base. Similarly, you can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/ConvertTimeScale" target="_top">ConvertTimeScale</a></code> function to convert a time from one time scale to another.</p></li>
<li class="li"><p>You can add two times by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/AddTime" target="_top">AddTime</a></code> function; you can subtract two times with the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SubtractTime" target="_top">SubtractTime</a></code> function.</p></li>
</ul>
<p>All of these functions work with time structures. You can use time structures to represent either time values or durations. Time values specify a point in time, relative to a given time base. Durations specify a span of time, relative to a given time scale. Durations are represented by time structures that have the time base set to 0 (that is, the <code>base</code> field in the time structure is set to <code>nil</code>).</p>
<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_18" title="The TimeRecord Structure"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TheTimeRecordStructure" title="The TimeRecord Structure"></a>The TimeRecord Structure</h3>
<p>Many time management functions require that you place a time specification in a data structure called a <code><!--a target="_top" -->TimeRecord<!--/a--></code>.</p>

<div class="codesample"><table><tr><td scope="row"><pre>struct TimeRecord<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CompTimeValue&#160;&#160;&#160;&#160;&#160;&#160;&#160;value;&#160;&#160;&#160;&#160;&#160;&#160;/* time value (duration or absolute) */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;TimeScale &#160;&#160;&#160;&#160;&#160;&#160;scale;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* units per second */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;TimeBase &#160;&#160;&#160;&#160;&#160;&#160;&#160;base;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* reference to the time base */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct TimeRecord TimeRecord;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>value</code></p></td>
<td ><p>Contains the time value. The time value defines either a duration or an absolute time by specifying the corresponding number of units of time. For durations, this is the number of time units in the period. For an absolute time, this is the number of time units since the beginning of the time coordinate system. The unit for this value is defined by the scale field. The time value is expressed as a <code>CompTimeValue</code> data type, which is a 64-bit integer quantity. This 64-bit quantity consists of two 32-bit integers, and it is defined by the <code>Int64</code> data type.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>scale</code></p></td>
<td ><p>Contains the time scale. This field specifies the number of units of time that pass each second. If you specify a value of 0, the time base uses its natural time scale.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>base</code></p></td>
<td ><p>Contains a reference to the time base. You obtain a time base by calling the Movie Toolbox's <code>GetMovieTimeBase</code> or <code>NewTimeBase</code> functions. If the time structure defines a duration, set this field to <code>nil</code>. Otherwise, this field must refer to a valid time base.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_19" title="Large Time Values"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-LargeTimeValues" title="Large Time Values"></a>Large Time Values</h3>
<p>You can specify the time value in a time structure as a 64-bit integer value as follows:</p>

<div class="codesample"><table><tr><td scope="row"><pre>typedef Int64 CompTimeValue;<span></span></pre></td></tr></table></div>

<p>The Movie Toolbox uses this format so that extremely large time values can be represented. The <code>Int64</code> data type defines the format of these signed 64-bit integers.</p>

<div class="codesample"><table><tr><td scope="row"><pre>struct Int64<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long hi;&#160;&#160;&#160;&#160;/* high-order 32 bits-value field in time structure */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long lo;&#160;&#160;&#160;&#160;/* low-order 32 bits-value field in time structure */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct Int64 Int64;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>hi</code></p></td>
<td ><p>Contains the high-order 32 bits of the value. The high-order bit represents the sign of the 64-bit integer.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>lo</code></p></td>
<td ><p>Contains the low-order 32 bits of the value.</p></td>
</tr>

</table></div>


<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_20" title="Time Base Callback Functions"></a>
<h2><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBaseCallbackFunctions" title="Time Base Callback Functions"></a>Time Base Callback Functions</h2>
<p>If your application uses QuickTime time bases, it may define callback functions that are associated with a specific time base. Your application can then use these callback functions to perform activities that are triggered by temporal events, such as a certain time being reached or a specified rate being achieved. The time base functions of the Movie Toolbox interact with clock components to schedule the invocation of these callback functions; clock components are responsible for invoking the callback function at its scheduled time. Your application can use the functions described in this section to establish your own callback function and to schedule callback events.</p>
<p>You can define three types of callback events. These types are distinguished by the nature of the temporal event that triggers the Movie Toolbox to call your function. The three types are</p>
<ul class="ul">
<li class="li"><p>events that are triggered at a specified time</p></li>
<li class="li"><p>events that are triggered when the rate reaches a specified value</p></li>
<li class="li"><p>events that are triggered when the time value of a time base changes by an amount different from the time base&#8217;s rate.</p></li>
</ul>
<p>Use these functions to work with time base callbacks:</p>
<ul class="ul">
<li class="li"><p>You specify a callback event&#8217;s type when you define the callback event, using the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code> function.</p></li>
<li class="li"><p>You specify whether your event can occur at interrupt time when you define the callback&#160;event, using the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code> function. Your function is called closer to the triggering event at interrupt time, but it is subject to all the restrictions of interrupt functions (for example, your callback function cannot cause memory to be moved). If your function is not called at interrupt time, you are free of these restrictions; but your function may be called later, because the invocation is delayed to avoid interrupt time.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code> function allocates the memory to support a callback event. When you are done with the callback event, you dispose of it by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeCallBack" target="_top">DisposeCallBack</a></code> function.</p></li>
<li class="li"><p>You schedule a callback event by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/CallMeWhen" target="_top">CallMeWhen</a></code> function. Call <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/CancelCallBack" target="_top">CancelCallBack</a></code> function to unschedule a callback event.</p></li>
<li class="li"><p>You can retrieve the time base of a callback event by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetCallBackTimeBase" target="_top">GetCallBackTimeBase</a></code> function.</p></li>
<li class="li"><p>You can obtain the type of a callback event by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetCallBackType" target="_top">GetCallBackType</a></code> function.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_21" title="Time and Space Function Summary"></a>
<h2><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeandSpaceFunctionSummary" title="Time and Space Function Summary"></a>Time and Space Function Summary</h2>
<p>Here is a summary of the Movie Toolbox functions you can use to manage movie time and spatial characteristics.</p>
<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_22" title="Managing Movie Space"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-ManagingMovieSpace" title="Managing Movie Space"></a>Managing Movie Space</h3>
<p>The Movie Toolbox contains a number of functions that your application can use to determine or change the spatial display characteristics of movies and tracks. These functions affect the movie&#8217;s graphics world, its matrix, the final display coordinate system, and the display boundaries. They include</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTrackGWorld" target="_top">SetTrackGWorld</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieGWorld" target="_top">SetMovieGWorld</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieGWorld" target="_top">GetMovieGWorld</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieBox" target="_top">SetMovieBox</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieBox" target="_top">GetMovieBox</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieDisplayBoundsRgn" target="_top">GetMovieDisplayBoundsRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMovieSegmentDisplayBoundsRgn" target="_top">GetMovieSegmentDisplayBoundsRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieDisplayClipRgn" target="_top">SetMovieDisplayClipRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieDisplayClipRgn" target="_top">GetMovieDisplayClipRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetTrackSegmentDisplayBoundsRgn" target="_top">GetTrackSegmentDisplayBoundsRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackLayer" target="_top">SetTrackLayer</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackLayer" target="_top">GetTrackLayer</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMatrix" target="_top">SetMovieMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieMatrix" target="_top">GetMovieMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieBoundsRgn" target="_top">GetMovieBoundsRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackMovieBoundsRgn" target="_top">GetTrackMovieBoundsRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieClipRgn" target="_top">GetMovieClipRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackMatrix" target="_top">SetTrackMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackMatrix" target="_top">GetTrackMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackBoundsRgn" target="_top">GetTrackBoundsRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackDimensions" target="_top">SetTrackDimensions</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackDimensions" target="_top">GetTrackDimensions</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTrackClipRgn" target="_top">SetTrackClipRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackClipRgn" target="_top">GetTrackClipRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTrackMatte" target="_top">SetTrackMatte</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTrackMatte" target="_top">GetTrackMatte</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeMatte" target="_top">DisposeMatte</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/SetMovieColorTable" target="_top">SetMovieColorTable</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMovieColorTable" target="_top">GetMovieColorTable</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_23" title="Working With Matrices"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithMatrices" title="Working With Matrices"></a>Working With Matrices</h3>
<p>Several Movie Toolbox functions allow you to manipulate transformation matrices.</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetIdentityMatrix" target="_top">SetIdentityMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetMatrixType" target="_top">GetMatrixType</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CopyMatrix" target="_top">CopyMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/EqualMatrix" target="_top">EqualMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TranslateMatrix" target="_top">TranslateMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ScaleMatrix" target="_top">ScaleMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/RotateMatrix" target="_top">RotateMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SkewMatrix" target="_top">SkewMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ConcatMatrix" target="_top">ConcatMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/InverseMatrix" target="_top">InverseMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformPoints" target="_top">TransformPoints</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformFixedPoints" target="_top">TransformFixedPoints</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformRect" target="_top">TransformRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformFixedRect" target="_top">TransformFixedRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformRgn" target="_top">TransformRgn</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/RectMatrix" target="_top">RectMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/MapMatrix" target="_top">MapMatrix</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_24" title="Managing Movie Time"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-ManagingMovieTime" title="Managing Movie Time"></a>Managing Movie Time</h3>
<p>Several functions are used to work with a movie&#8217;s time parameters. Included are functions for retrieving the time base, working with the current movie time, working with the time scale, calculating the movie&#8217;s duration, and getting and setting the playback rate.</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieDuration" target="_top">GetMovieDuration</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTimeValue" target="_top">SetMovieTimeValue</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTime" target="_top">SetMovieTime</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTime" target="_top">GetMovieTime</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieRate" target="_top">SetMovieRate</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieRate" target="_top">GetMovieRate</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTimeScale" target="_top">SetMovieTimeScale</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTimeScale" target="_top">GetMovieTimeScale</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTimeBase" target="_top">GetMovieTimeBase</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_25" title="Managing Track Time"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-ManagingTrackTime" title="Managing Track Time"></a>Managing Track Time</h3>
<p>Several functions work with a track&#8217;s time parameters. All tracks share the movie&#8217;s time base, but each track contains its own offset and duration. A function is also provided to translate track time into a value appropriate to the track&#8217;s media.</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackDuration" target="_top">GetTrackDuration</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetTrackOffset" target="_top">SetTrackOffset</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackOffset" target="_top">GetTrackOffset</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/TrackTimeToMediaTime" target="_top">TrackTimeToMediaTime</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_26" title="Managing Media Time"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-ManagingMediaTime" title="Managing Media Time"></a>Managing Media Time</h3>
<p>Three functions work with a media&#8217;s time parameters. Each media has its own time scale and duration.</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaDuration" target="_top">GetMediaDuration</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetMediaTimeScale" target="_top">SetMediaTimeScale</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaTimeScale" target="_top">GetMediaTimeScale</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_27" title="Finding Interesting Times"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-FindingInterestingTimes" title="Finding Interesting Times"></a>Finding Interesting Times</h3>
<p>You can call Movie Toolbox functions to search a movie, track or media for a particular sample, such as a keyframe. The functions return the time and duration of the next sample that meets the search criteria.</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMovieNextInterestingTime" target="_top">GetMovieNextInterestingTime</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetTrackNextInterestingTime" target="_top">GetTrackNextInterestingTime</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMediaNextInterestingTime" target="_top">GetMediaNextInterestingTime</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-DontLinkElementID_28" title="Time Base Management"></a>
<h3><a name="//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBaseManagement" title="Time Base Management"></a>Time Base Management</h3>
<p>Various Movie Toolbox functions work with time bases. A QuickTime time base defines the time coordinate system for a movie. It can also be used to provide general timing services.</p>
<ul class="spaceabove">
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-CreatingandDisposingofTimeBases">Creating and Disposing of Time Bases</a></span></p>
<ul class="nested">
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewTimeBase" target="_top">NewTimeBase</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeTimeBase" target="_top">DisposeTimeBase</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMasterClock" target="_top">SetMovieMasterClock</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMasterTimeBase" target="_top">SetMovieMasterTimeBase</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseMasterClock" target="_top">SetTimeBaseMasterClock</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseMasterClock" target="_top">GetTimeBaseMasterClock</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseMasterTimeBase" target="_top">SetTimeBaseMasterTimeBase</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseMasterTimeBase" target="_top">GetTimeBaseMasterTimeBase</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseZero" target="_top">SetTimeBaseZero</a></code></p></li>
</ul>
</li>
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-WorkingWithTimeBaseValues">Working With Time Base Values</a></span></p>
<ul class="nested">
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseTime" target="_top">SetTimeBaseTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseValue" target="_top">SetTimeBaseValue</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseRate" target="_top">SetTimeBaseRate</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseRate" target="_top">GetTimeBaseRate</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseEffectiveRate" target="_top">GetTimeBaseEffectiveRate</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseStartTime" target="_top">SetTimeBaseStartTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseStartTime" target="_top">GetTimeBaseStartTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseStopTime" target="_top">SetTimeBaseStopTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseStopTime" target="_top">GetTimeBaseStopTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseFlags" target="_top">SetTimeBaseFlags</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseFlags" target="_top">GetTimeBaseFlags</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseStatus" target="_top">GetTimeBaseStatus</a></code></p></li>
</ul>
</li>
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeStructures">Time Structures</a></span></p>
<ul class="nested">
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/AddTime" target="_top">AddTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SubtractTime" target="_top">SubtractTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/ConvertTime" target="_top">ConvertTime</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/ConvertTimeScale" target="_top">ConvertTimeScale</a></code></p></li>
</ul>
</li>
<li class="li"><p><span class="content_text"><a href="2MovieTimeandSpace.html#//apple_ref/doc/uid/TP40000911-MovieTimeandSpace-TimeBaseCallbackFunctions">Time Base Callback Functions</a></span></p>
<ul class="nested">
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/CallMeWhen" target="_top">CallMeWhen</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/CancelCallBack" target="_top">CancelCallBack</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeCallBack" target="_top">DisposeCallBack</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetCallBackTimeBase" target="_top">GetCallBackTimeBase</a></code></p></li>
<li class="nested li"><p><code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetCallBackType" target="_top">GetCallBackType</a></code></p></li>
</ul>
</li>
</ul>
<p>Most of these functions are discussed in the preceding sections of this chapter.</p>





        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../A-Intro/1Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../C-Chapter/3ClockComponentsOver.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-01-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/MovieInternals/MTTimeSpace/B-Chapter/2MovieTimeandSpace.html%3Fid%3DTP40000911-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/MovieInternals/MTTimeSpace/B-Chapter/2MovieTimeandSpace.html%3Fid%3DTP40000911-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/MovieInternals/MTTimeSpace/B-Chapter/2MovieTimeandSpace.html%3Fid%3DTP40000911-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
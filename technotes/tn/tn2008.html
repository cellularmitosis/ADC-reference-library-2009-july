<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN2008: The CGDirectPalette API</title><meta name="keywords" content="CGDirectPalette, palette"><meta name="Description" content="Technical Note TN2008: This Technote provides a referencefor the CGDirectPalette API on Mac OS X"><meta name="categories" content="Core Graphics, Overview, Operating System and QuickDraw"><meta name="week-posted" content="Nov 6, 2000 - Nov 10, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003047" title="The CGDirectPalette API"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/Carbon/index.html">Carbon</a> &gt; <a href="../../technicalnotes/Carbon/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2008</div>
<div id="pageheadsub">The CGDirectPalette API</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">         <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left><!-- begin_toc --><p id="menutext"><A HREF="#Section1">Definitions</A><BR>                  <BR>                  <A HREF="#Section2">Creating and Releasing Palettes</A><BR>                  <BR>                  <A HREF="#Section3">Accessing Palette Information</A><BR>                  <BR>                  <A HREF="#Section4">Copying Palettes</A><BR>                  <BR>                  <A HREF="#Section5">Comparing Palettes</A><BR>                  <BR>                  <A HREF="#Summary">Summary</A><BR>                   <BR>                   <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>			<!-- begin_intro_text --><p id="introtext">				This Technote provides a reference for the CGDirectPalette API on Mac OS X.			</p>			<p id="introtext">				The CGDirectPalette API is designed to provide easy access					to display palettes with the help of the CGDirectDisplay API.			</p>			<p id="introtext">				This Technote describes the important data types and all of                  	the function calls in the API.  A separate Technote                  	covers the API provided by CGDirectDisplay.			</p>			<!-- end_intro_text -->			<!-- begin_date --><h3>&nbsp;Updated: [Nov 08 2000]</h3><!-- end_date -->        </td>    </tr></table> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR>          <!-- begin_content --> <P><A NAME="Section1"></A></P>                  <H2>Definitions</H2>         			<H3>Types used by the CGDirectPalette API:</H3>	        <CENTER><TABLE BORDER=1 CELLPADDING=10 WIDTH=550>	           <TR>	              <td valign=top align=left>	              <P><B>Data Type</B></P>	              </TD>	              <td valign=top align=left>	              <P><B>Description</B></P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGDirectDisplayID</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>An opaque reference to a display  (<CODE>kCGDirectMainDisplay</CODE>	              		refers to the main display as a convenience)</P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGDirectPaletteRef</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>An opaque reference to a palette</P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGTableCount</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>An unsigned 32 bit value</P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGByteValue</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>An unsigned 8 bit value used by the gamma/palette functions</P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGPaletteBlendFraction</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>A float value between 0.0 and 1.0</P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGDeviceColor</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>A color represented by three float values: red, green, and blue	              			(0.0 is black and 1.0 is full on for each channel)</P>	              </TD>	           </TR>	           <TR>	              <td valign=top align=left>	              <P><CODE>CGDeviceByteColor</CODE></P>	              </TD>	              <td valign=top align=left>	              <P>A color represented by three unsigned byte values: red, green, and blue	              			(0x00 is black and 0xFF is full on for each channel)</P>	              </TD>	           </TR>	        </TABLE></CENTER><BR>                  <P><A HREF="#top">Back to top</A></P>                  <BR>                  <P><A NAME="Section2"></A></P>                  <H2>Creating and Releasing Palettes</H2>                  <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateDefaultColorPalette(void);</pre></TD></TR></TABLE></CENTER><BR><BR>         <UL>         <LI>Creates a new palette object representing the default 8 bit color palette.</LI>         <LI>Release the resulting palette using CGPaletteRelease().</LI>         </UL>                  <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateWithDisplay(    CGDirectDisplayID display);</pre></TD></TR></TABLE></CENTER><BR><BR>		 		 <UL>         <LI>Creates a copy of the specified display's current palette, if any.</LI>         <LI>Returns NULL if the current display mode does not support a palette.</LI>         <LI>Release the resulting palette using CGPaletteRelease().</LI>      	 </UL>		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateWithCapacity(    CGTableCount capacity );</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>         <LI>Creates a new palette object with the specified capacity.</LI>         <LI>Initializes the entries from the default color palette.</LI>         <LI>Release the resulting palette using CGPaletteRelease().</LI>      	 </UL>		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateWithSamples(    CGDeviceColor * sampleTable,    CGTableCount sampleCount);</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>         <LI>Creates a new palette object with the specified capacity and contents.</LI>         <LI>Release the resulting palette using CGPaletteRelease().</LI>      	 </UL>		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateWithByteSamples(    CGDeviceByteColor * sampleTable,    CGTableCount sampleCount);</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>         <LI>Creates a new palette object with the specified capacity and contents.</LI>         <LI>Identical to <CODE>CGPaletteCreateWithSamples</CODE> except it takes         	<CODE>CGDeviceByteColor</CODE>s instead of <CODE>CGDeviceColor</CODE>s.</li>         <LI>Release the resulting palette using CGPaletteRelease().</LI>      	 </UL>		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>void CGPaletteRelease(    CGDirectPaletteRef palette );</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>         <LI>Releases the palette.</LI>      	 </UL>                           <P><A HREF="#top">Back to top</A></P>                  <P>&nbsp;&nbsp;</P>                  <P><A NAME="Section3"></A></P>                  <H2>Accessing Palette Information</H2>                           <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDeviceColor CGPaletteGetColorAtIndex(    CGDirectPaletteRef palette,    CGTableCount index);</pre></TD></TR></TABLE></CENTER><BR><BR>         <UL>         <LI>Returns the <CODE>CGDeviceColor</CODE> at the specified index.</LI>         <LI>Returns black ( 0, 0, 0 ) if the <CODE>index</CODE> is out of range.</LI>         </UL>                  <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGTableCount CGPaletteGetIndexForColor(    CGDirectPaletteRef palette,    CGDeviceColor color);</pre></TD></TR></TABLE></CENTER><BR><BR>		 		 <UL>    	 <LI>Returns the index that most closely matches the specified color value.</LI>    	 <LI>The index returned is for the palette color with the lowest root-mean-squared    	 		(RMS) error with repect to the specified color.</li>      	 </UL>		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGTableCount CGPaletteGetNumberOfSamples(    CGDirectPaletteRef palette);</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>	     <LI>Returns the number of samples in the palette.</LI>		 <LI>Returns 0 for an invalid <CODE>CGDirectPaletteRef</CODE>.</LI>      	 </UL> 		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>void CGPaletteSetColorAtIndex(    CGDirectPaletteRef palette,    CGDeviceColor color,    CGTableCount index);</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>	     <LI>Sets the color value at the specified index.</LI>         <LI>Fails if the <CODE>index</CODE> is out of range.</LI>      	 </UL>                 <P><A HREF="#top">Back to top</A></P>                  <P ALIGN=center>&nbsp;</P>                  <P><A NAME="Section4"></A></P>                  <H2>Copying Palettes</H2>          		          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateCopy(    CGDirectPaletteRef palette);</pre></TD></TR></TABLE></CENTER><BR><BR>		 <UL>         <LI>Creates a new palette object with the same capacity and contents as the specified palette.</LI>         <LI>Release the resulting palette using CGPaletteRelease().</LI>      	 </UL>                  <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>CGDirectPaletteRef CGPaletteCreateFromPaletteBlendedWithColor(    CGDirectPaletteRef palette,    CGPaletteBlendFraction fraction,    CGDeviceColor color);</pre></TD></TR></TABLE></CENTER><BR><BR>		 		 <UL>         <LI>Creates a new palette object by blending the specified palette with a fraction of the device color.</LI>         <LI>Release the resulting palette using CGPaletteRelease().</LI>      	 </UL>                         <P><A HREF="#top">Back to top</A></P>                  <BR>                  <P><A NAME="Section5"></A></P>                  <H2>Comparing Palettes</H2>                           <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>Boolean CGPaletteIsEqualToPalette(    CGDirectPaletteRef palette1,    CGDirectPaletteRef palette2);</pre></TD></TR></TABLE></CENTER><BR><BR>		 		 <UL>    	 <LI>Returns TRUE if the two palettes have the same capacity and contents.</LI>   		 <LI>Returns FALSE otherwise.</LI>   		 <LI>Returns FALSE if either or both <CODE>CGDirectPaletteRef</CODE>s are invalid.</LI>      	 </UL>         <P><A HREF="#top">Back to top</A></P>                  <BR>         <P><A NAME="Summary"></A></P>                  <H2>Summary</H2>                  <P>This Technote covers the basic information you need to start using         	the CGDirectPalette API, including the important type definitions and function         	calls.  Information on using the CGDirectDisplay         	API is contained in a separate Technote.</P>                  <P ><A HREF="#top">Back to top</A></P>                  <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (108K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn2008.pdf">Download</A></P>               </TD>            </TR>                    </table>         <BR>                  <P ><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn2008.html%3Fid%3DDTS10003047-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn2008.html%3Fid%3DDTS10003047-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn2008.html%3Fid%3DDTS10003047-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
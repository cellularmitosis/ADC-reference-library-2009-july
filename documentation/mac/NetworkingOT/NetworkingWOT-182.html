<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTSnd</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING182></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-181.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-183.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-181.html"><B>Functions for Connection-Oriented Transactionless Endpoints</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING182-0></A>
<H3><A NAME=MARKER-9-211></A>OTSnd</H3>
 Sends data to a remote peer using a connection-oriented, transactionless endpoint.<P>
<A NAME=HEADING182-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-212></A>OTResult OTSnd(EndpointRef ref, 
                                         void* buf, 
                                         size_t nbytes, 
                                     
</PRE>
<A NAME=HEADING182-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-12-213></A>OTResult TEndpoint::Snd(void* buf, 
                     size_t nbytes, 
                     OTFlags flags);
</PRE>
<A NAME=HEADING182-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint sending data.
<DT><CODE>buf</CODE>
<DD> A pointer to the data being sent. 
<DT><CODE>nbytes</CODE>
<DD> A 32-bit value specifying the number of bytes being sent. 
<DT><CODE>flags</CODE>
<DD> A 32-bit bitmapped value specifying whether the data to be sent is expedited (<CODE>T_EXPEDITED</CODE>) and whether more data remains to be sent (<CODE>T_MORE</CODE>). To set both fields, use the bitwise OR operator.
<DT><I>function result</I>
<DD> A positive number indicating the actual number of bytes sent or a negative number indicating an error code. See Discussion.
</DL>
<A NAME=HEADING182-12></A>
<H5>DISCUSSION</H5>
 You use the <CODE>OTSnd</CODE> function to send data to a remote peer. Before you use this function, you must establish a connection with the peer.<P>
 You specify the data to be sent by passing a pointer to the data (<CODE>buf</CODE>) and by specifying the size of the data (<CODE>nbytes</CODE>). The maximum size of the data you can send is specified by the <CODE>tsdu</CODE> field of the <A HREF=NetworkingWOT-136.html#MARKER-9-81><CODE>TEndpointInfo</CODE></A> structure for the endpoint or by the <CODE>etsdu</CODE> field for expedited data (<CODE>T_EXPEDITED</CODE> flag set).<P>
 Some protocols use expedited data for control or attention messages. To determine whether the endpoint supports this service, examine the <CODE>etsdu</CODE> field of the <CODE>TEndpointInfo</CODE> structure. A positive integer for the <CODE>etsdu</CODE> field indicates the maximum size in bytes of expedited data that you can send. To send expedited data, you set the <CODE>T_EXPEDITED</CODE> bit of the <CODE>flags</CODE> parameter.<P>
 If you want to break up the data into logical units, you can set the <CODE>T_MORE</CODE> bit of the <CODE>flags</CODE> parameter to indicate that you are using additional calls to the <CODE>OTSnd</CODE> function to send more data that belongs to the same logical unit. To indicate that the last data unit is being sent, turn off the <CODE>T_MORE</CODE> flag. Only some endpoints support the preservation of logical units; you should check the <CODE>tsdu</CODE> field of the <CODE>TEndpointInfo</CODE> structure to find out if yours does. <P>
 If the endpoint is in synchronous blocking mode, the <CODE>OTSnd</CODE> function returns after it actually sends the data. If flow-control restrictions prevent its sending the data, it retries the operation until it is able to send it.<P>
 If the endpoint is in non-blocking or asynchronous mode, the <CODE>OTSnd</CODE> function returns with the <CODE>kOTFlowErr</CODE> result if flow-control restrictions prevent the data from being sent. When the endpoint provider is able to send the data, it sendsa <CODE>T_GODATA</CODE> event to let you know that it is possible to send data. You should wait for this event and then send the data again.<P>
 If the endpoint is in non-blocking or asynchronous mode, it is also possible that only part of the data is actually accepted by the transport provider. In this case, the <CODE>OTSnd</CODE> function returns a value that is less than the value of the <CODE>nbytes</CODE> parameter. In this case, you should call the function again to send the remaining data. <P>
 If an asynchronous event, such as a disconnect, occurs and interrupts the <CODE>OTSnd</CODE> function, <CODE>OTSnd</CODE> returns with the <CODE>kOTLookErr</CODE> result.<P>
 The following table shows how the endpoint's modes of operation affects the behavior of the <CODE>OTSnd</CODE> function.<P>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Blocking<TH>Nonblocking<TR>
<TD>Synchronous<TD>The function returns when the provider lifts flow-control restrictions.<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result is never returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TR>
<TD>Asynchronous&nbsp;&nbsp;<TD>The function returns immediately.<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.</TABLE>
<P>
<A NAME=HEADING182-22></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>XTI_SNDLOWAT</CODE> option allows endpoints that support it to negotiate the minimum number of bytes that must have accumulated in the endpoint's internal send buffer before data is sent. See <A HREF=NetworkingWOT-37.html#MARKER-9-21>"Option Management"</A>.<P>
<A NAME=HEADING182-24></A>
<H5>SEE ALSO</H5>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-181.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-183.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

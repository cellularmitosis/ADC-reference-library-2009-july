<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GXInstallQDTranslator(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING51></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-50.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-52.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-15.html"><B>Chapter 1 - QuickDraw GX and the Macintosh Environment</B></A> / <A HREF="GXEnvironment-26.html"><B>QuickDraw GX and the Macintosh Environment Reference</B></A><BR><DL><DD><A HREF="GXEnvironment-45.html"><B>QuickDraw-to-QuickDraw GX Translator Functions</B></A> / <A HREF="GXEnvironment-50.html"><B>Installing and Removing the Translator</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING51-0></A>
<H3><A NAME=MARKER-9-146></A>GXInstallQDTranslator</H3>
 <A NAME=MARKER-2-148></A><A NAME=MARKER-2-26></A>You can use the <CODE>GXInstallQDTranslator</CODE> function to initiate translation of the QuickDraw drawing commands to QuickDraw GX shapes. Subsequent QuickDraw drawing commands are translated into equivalent QuickDraw GX shapes.<P>
<PRE>
void GXInstallQDTranslator(GrafPtr port, 
                           gxTranslationOptions options, 
                           const Rect *srcRect, 
                           const Rect *dstRect, 
                           Point styleStretch,
                           gxShapeSpoolFunction userFunction, 
                           void *reference);
</PRE>
<DL>
<DT><CODE>port</CODE>
<DD> A pointer to the QuickDraw graphics port into which to install the translator. 
<DT><CODE>options</CODE>
<DD> The translation options to use for the translation.
<DT><CODE>srcRect</CODE>
<DD> A pointer to a rectangle defining the QuickDraw source dimensions for drawing, in QuickDraw coordinates.
<DT><CODE>dstRect</CODE>
<DD> A pointer to a rectangle defining the QuickDraw destination dimensions for drawing, in QuickDraw coordinates.
<DT><CODE>styleStretch</CODE>
<DD> The amount of scaling that certain picture-comment items, such as dashes, will be given in the x and y directions.
<DT><CODE>userFunction</CODE>
<DD> A pointer to an application-defined callback function to which the translator passes each translated shape.
<DT><CODE>reference</CODE>
<DD> A pointer to a reference constant that can be used for any purpose. QuickDraw GX passes the reference constant to the application-defined callback function each time it calls the function.
</DL>
<A NAME=HEADING51-10></A>
<H5>DESCRIPTION</H5>
 You can use the <CODE>GXInstallQDTranslator</CODE> function to install the QuickDraw-to-QuickDraw GX translator into a QuickDraw graphics port. QuickDraw commands that draw into that port are translated to equivalent QuickDraw GX shapes.<P>
 All QuickDraw drawing commands executed after you call this function and before you call <CODE>GXRemoveQDTranslator</CODE> are converted into QuickDraw GX shapes and passed to an application-defined function. There is not necessarily a one-to-one match between a QuickDraw function call and the generation of a QuickDraw GX shape; the translation algorithm can combine several QuickDraw items into one QuickDraw GX shape.<P>
 The <CODE>srcRect</CODE> and <CODE>dstRect</CODE> parameters represent the source and destination space of the image, expressed in QuickDraw coordinates. The relation between the source and destination rectangles specifies the amount of scaling to be applied during translation. If scaling is not required, you can pass identical rectangles for both parameters. <P>
 The <CODE>styleStretch</CODE> parameter represents the amount of scaling that QuickDraw bitmap patterns are given by the translator in the x and y directions in order to scale them up to the destination space. The x scale factor is stored in <CODE>styleStretch.h</CODE> and the y scale factor is stored in <CODE>styleStretch.v</CODE>. These values are usually the destination resolution divided by the screen resolution (72 dpi), rounded to the nearest integer.<P>
 The <CODE>userFunction</CODE> parameter is a pointer to an application-defined callback function of type <CODE>gxShapeSpoolFunction</CODE>:<P>
<PRE>
typedef OSErr (*gxShapeSpoolProcPtr)(gxShape toSpool, 
                                       void *refCon);
typedef gxShapeSpoolProcPtr gxShapeSpoolFunction;
</PRE>
 The translator calls the function every time that it generates a translated QuickDraw GX shape. You must provide the function; its prototype is described in the section <A HREF=GXEnvironment-56.html#MARKER-9-159>"Handling Translated QuickDraw Data" beginning on page 1-41</A>. <P>
 The <CODE>reference</CODE> parameter of the <CODE>GXInstallQDTranslator</CODE> function can be used by your application in any manner you desire, within the constraints of a <CODE>long</CODE> data field. The translator passes the parameter to the application-defined callback function. For example, you can use <CODE>reference</CODE> to specify where the translated picture is to be displayed, by passing a view port reference in the <CODE>reference</CODE> parameter.<P>
<A NAME=HEADING51-19></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 If you call the <CODE>GXInstallQDTranslator</CODE> function to install the translator, you must subsequently call the <CODE>GXRemoveQDTranslator</CODE> function to remove it when you are finished.<P>
 The <CODE>port</CODE> parameter to this function must be an old-style graphics-port pointer (<CODE>GrafPtr</CODE>); however, the translator depends on the existence of a color graphics port. Therefore, you should always create a color graphics port (using <CODE>NewCWindow</CODE>, <CODE>NewGWorld</CODE> or <CODE>OpenCPort</CODE>), and coerce the <CODE>CGrafPtr</CODE> to a <CODE>GrafPtr</CODE> when you call this function. <P>
 Before installing the translator, you must first call the <CODE>GXInitPrinting</CODE> function.<P>
 Installation of the translator cannot cause an <CODE>out_of_memory</CODE> error, but the process of translation can result in an out-of-memory condition. Your application should be prepared to handle that condition.<P>
<A NAME=HEADING51-24></A>
<H5>ERRORS, WARNINGS, AND NOTICES
<TABLE BORDER="0" CELLPADDING=3><TD>Notices (debugging version)<TR>
<TD>translator_already_installed_on_this_grafport</TABLE>
</H5>
<A NAME=HEADING51-25></A>
<H5>SEE ALSO</H5>
 For an example of the use of this function, see <A HREF=GXEnvironment-227.html#MARKER-9-157>Listing 1-5 on page 1-21</A>. <P>
 Translation options from the gxTranslationOptions enumeration are described in <A HREF=GXEnvironment-23.html#MARKER-9-3>Table 1-2 on page 1-12</A>. <P>
 The application-defined shape-spooling function called by the translator is described on <A HREF=GXEnvironment-56.html#MARKER-9-159>page 1-41</A>.<P>
 To translate an entire QuickDraw picture, use the <CODE>GXConvertPICTToShape</CODE> function, described in the previous section.<P>
 For a general description of the QuickDraw-to-QuickDraw GX translator, see the section <A HREF=GXEnvironment-22.html#MARKER-9-57>"Using the QuickDraw-to-QuickDraw GX Translator" beginning on page 1-10</A>. <P>
 The <CODE>GXInitPrinting</CODE> function is described in the chapter "Core Printing Features" in <I><A HREF="../../GXPrinting/GXPrinting-2.html">Inside Macintosh: QuickDraw GX Printing</A></I>.<P>
 For descriptions of color graphics ports and the functions you use to create them, see <I>Inside Macintosh: Imaging With QuickDraw</I>.<A NAME=MARKER-2-192></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-50.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-52.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

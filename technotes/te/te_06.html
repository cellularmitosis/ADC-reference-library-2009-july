<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TE06: Changes in International Utilities and Resources</title>                                       <meta name="categories" content="Text"><meta name="week-posted" content="Jun 29, 1987 - Jul 3, 1987"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002814" title="Changes in International Utilities and Resources"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxTextFonts-date.html">Text & Fonts</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/TextFonts/index.html" target="_blank">Reference Library > Text & Fonts</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TE06</div>
<div id="pageheadsub">Changes in International Utilities and Resources</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">INTL vs. itl</A><BR><BR><A HREF="#Section3">The International Sorting Routine</A><BR><BR><A HREF="#Section4">Error in APDA draft of Inside Macintosh Volume V</A><BR><BR><A HREF="#Section5">Bug in System 4.1 version of itl1</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext"></p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Mar 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><P>The International Utilities package and the international resources have beenchanged with System file 4.1 to take advantage of the Script Manager.</p><P><A HREF="#top">Back to top</A></p><a name="Section2"></a><h2>INTL vs. itl</h2><p>In the past, there were two INTL resources in the System file, <code>INTL</code> 0 and <code>INTL</code>1, which contained international formatting options. Starting with System 4.1,<code>itl0</code> and <code>itl1</code> replace INTL 0 and INTL 1. (INTL 0 and INTL 1 are still includedwith the System file so that applications that do a <code>GetResource</code> for them willstill find them. Only these erroneous applications that use <code>GetResource</code> willaccess these resources now; the System will no longer look at them.) There cannow be a set of international resources (<code>itls</code>) for each script that isinstalled. That is, where once there was one resource type (<code>INTL</code>) with IDs 0and 1 there are now many different resource types (<code>itl0</code>, <code>itl1</code>, <code>itl2</code>, <code>itlb</code>,<code>itlc</code>, <code>KCHR</code>) with distinct resource IDs for the various countries. The U.S.System file uses resource ID 0 for all <code>itl</code> resources.</p><p>If your existing application calls <code>IUGetIntl</code> to get the appropriateinternational resource, you will have no problems under System 4.1. If,however, you call <code>GetResource</code> on <code>INTL</code> 0 or <code>INTL</code> 1 and then modify them, andexpect that the System will use the modified resource, you will no longer workcorrectly. If your application has been released in the past with a modifiedSystem file to include your own <code>INTL</code> 0 and/or <code>INTL</code> 1, you may want to releaseyour application with a modified <code>itl0</code> and/or <code>itl1</code>.</p><P><A HREF="#top">Back to top</A></p><a name="Section3"></a><h2>The International Sorting Routine </h2><p>The international sorting routine is used to handle cases where letters areequal in primary ordering but different in secondary ordering (e.g., "&auml;"and "a"). The routine can also handle cases where one character sorts as if itwere two, or two characters would sort as if they were one, or even characterreversals.</p><p>Prior to System 4.1, the international sorting routine was stored starting withthe <code>localRtn</code> field of <code>INTL</code> 1. As of System 4.1, this routine is now stored in<code>itl2</code>. An <code>INTL</code> 2 resource is also included with the international resources,just for consistency (the System never uses it). It is exactly the same as<code>itl2</code>.</p><P>Writing your own sorting routine can be dangerous if it is not done correctly.Before attempting to do this, we would highly recommend you check with Apple todetermine if we are already doing one for the language of interest. We plan todo many international versions of System file 4.1, and most developers' needswill be met by these. A new policy at Apple will now make it possible tolicense foreign versions of the System file from Software Licensing. ContactSoftware Licensing at (408) 973-4667 for more information about this.</p><P><A HREF="#top">Back to top</A></p><a name="Section4"></a><h2>Error in APDA draft of Inside Macintosh Volume V </h2><p>There is an error in the APDA draft of the International Utilities Packagechapter of <i>Inside Macintosh Volume V</i>. It says that there is a flag inthe Script Manager globals that overrides the current font and always uses the<code>INTL</code> 0 and <code>INTL</code> 1 resources. This is not true. <code>INTL</code> 0 and 1 have been replacedby <code>itl0</code> and <code>itl1</code>, and are not used except by applications that explicitly getthem by doing a <code>GetResource</code>. There is a relevant Script Manager flag called<code>IntlForce</code> that is correctly but incompletely explained in the Script Managerchapter. When <code>IntlForce</code> is false, the resources used by the InternationalUtilities are determined by the current script. The script that is in use isdetermined by which font is in use for the port in use. For example, if youswitch to the Kyoto font, then you will be using the Japanese Script InterfaceSystem (KanjiTalk). If you do this with <code>IntlForce</code> set to false, then you willuse the resources that are associated with the Japanese Script InterfaceSystem.</p><p>When <code>IntlForce</code> is true, the International Utilities always use the resourcesthat are associated with the system script; this is usually Roman. <code>IntlForce</code> istrue by default. Actually, the Script Manager initialization routine reads theitlc resource to determine what the default is, and Apple plans to release thevarious international System files with this field set to true in the <code>itlc</code>resource. Applications that want to change the value of <code>IntlForce</code> can use theScript Manager call <code>SetEnvirons</code> with the <code>smIntlForce</code> verb. There is a ScriptManager call, <code>IntlScript</code>, to find out the current value.</p><P><A HREF="#top">Back to top</A></p><a name="Section5"></a><h2>Bug in System 4.1 version of itl1</h2><p>There is a bug in the itl1 resource in System 4.1. The <code>itl1</code> resource containsarrays of day and month names, as did the <code>INTL</code> 1 resource. Their formats are:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>days ARRAY [1..7] of STRING[15]</pre>	</TD></TR></TABLE></CENTER><p>Every day and month is supposed to be coded as a Pascal string with a maximumof 15 characters, and the actual length in the first byte of the string. InSystem 4.0 and System 4.1, the contents of each string is always a Pascalstring of length 15, with the unused characters set to nulls. In other words,the length byte is set to hex 0F. This will be fixed in a future release of theSystem file. If it is currently causing your application problems, you canchange the lengths with ResEdit, or change them at run time, or use your ownitl1 resource and release your application with an installer script. Therecommended approach is to wait for a fixed version of the System file fromApple.</p><P><A HREF="#top">Back to top</A></p><a name = "References"></a><h2>References</h2><P>The International Utilities</p><P>The Script Manager</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (56K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/te_06.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/te/te_06.html%3Fid%3DDTS10002814-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/te/te_06.html%3Fid%3DDTS10002814-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/te/te_06.html%3Fid%3DDTS10002814-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
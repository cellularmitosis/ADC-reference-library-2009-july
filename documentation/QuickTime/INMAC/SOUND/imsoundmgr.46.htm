<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE>Sound Double Buffer Header Records (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.45.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.3d.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.47.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=2695"> </A><A NAME="37630"> </A>Sound Double Buffer Header Records<A NAME="marker=1337"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=2826"> </A>You must fill in a <B CLASS="bold">sound double buffer header record</B> and two sound double buffer&nbsp;records if you wish to manage your own double buffers. The <TT CLASS="cv">SndDoubleBufferHeader</TT> data type defines a sound double buffer header.</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=11745"> </A>TYPE SndDoubleBufferHeader =<BR>PACKED RECORD<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhNumChannels:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of sound channels}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhSampleSize:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample size, if noncompressed}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhCompressionID:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ID of compression algorithm}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhPacketSize:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of bits per packet}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhSampleRate:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fixed;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample rate}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhBufferPtr:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ARRAY[0..1] OF SndDoubleBufferPtr;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointers to SndDoubleBuffer}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhDoubleBack:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcPtr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointer to doubleback procedure}<BR>END;<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3871"> </A><A NAME="marker=11747"> </A>Sound Manager versions 3.0 and later support custom compression and decompression algorithms by defining the revised sound double buffer header record, of type <TT CLASS="cv">SndDoubleBufferHeader2</TT>. It's identical to the <TT CLASS="cv">SndDoubleBufferHeader</TT> data type except that it contains the <TT CLASS="cv">dbhFormat</TT> field at the end.</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=11751"> </A>TYPE SndDoubleBufferHeader2 =<BR>PACKED RECORD<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhNumChannels:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of sound channels}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhSampleSize:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample size, if noncompressed}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhCompressionID:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ID of compression algorithm}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhPacketSize:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of bits per packet}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhSampleRate:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fixed;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample rate}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhBufferPtr:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ARRAY[0..1] OF SndDoubleBufferPtr;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointers to SndDoubleBuffer}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhDoubleBack:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcPtr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointer to doubleback procedure}<BR>&nbsp;&nbsp;&nbsp;&nbsp;dbhFormat:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSType;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{signature of codec}<BR>END;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11755"> </A><TT CLASS="cv">dbhNumChannels</TT><A NAME="marker=11759"> </A></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2851"> </A> The number of channels for the sound (1 for monophonic sound, 2&nbsp;for stereo).<A NAME="marker=429"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11766"> </A><TT CLASS="cv">dbhSampleSize</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2852"> </A>The sample size for the sound if the sound is not compressed. If the sound is compressed, <TT CLASS="cv">dbhSampleSize</TT> should be set to 0. Samples that are 1-8 bits have a <TT CLASS="cv">dbhSampleSize</TT> value of 8; samples that are 9-16 bits have a <TT CLASS="cv">dbhSampleSize</TT> value of 16. Currently, only 8-bit samples are supported. For further information on sample sizes, refer to the AIFF specification.<A NAME="marker=430"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11775"> </A><TT CLASS="cv">dbhCompressionID</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2853"> </A> The compression identification number of the compression algorithm, if the sound is compressed. If the sound is not compressed, <TT CLASS="cv">dbhCompressionID</TT> should be set to 0.<A NAME="marker=431"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11785"> </A><TT CLASS="cv">dbhPacketSize</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2854"> </A>The packet size in bits for the compression algorithm specified by <TT CLASS="cv">dbhCompressionID</TT>, if the sound is compressed.<A NAME="marker=723"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11794"> </A><TT CLASS="cv">dbhSampleRate</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2855"> </A>The sample rate for the sound. Note that the sample rate is declared as a <TT CLASS="cv">Fixed</TT> data type, but the most significant bit is not treated as a sign bit; instead, that bit is interpreted as having the value 32,768.<A NAME="marker=724"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11803"> </A><TT CLASS="cv">dbhBufferPtr</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2856"> </A>An array of two pointers, each of which should point to a valid <TT CLASS="cv">SndDoubleBuffer</TT> record.<A NAME="marker=727"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11812"> </A><TT CLASS="cv">dbhDoubleBack</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2857"> </A>A pointer to the application-defined routine that is called when the double buffers are switched and the exhausted buffer needs to be&nbsp;refilled.<A NAME="marker=728"> </A><A NAME="marker=1271"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=11821"> </A><A NAME="marker=11825"> </A><TT CLASS="cv">dbhFormat</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=3872"> </A>The data format type. This field contains a value of type <TT CLASS="cv">OSType</TT> that defines the compression algorithm, if any, to be used to decompress the audio data. For example, for data generated using MACE 3:1 compression, this field should contain the value <TT CLASS="cv">'MAC3'</TT>. See <A target="doc" HREF="imsoundmgr.34.htm#13268" CLASS="XRef">[link]</A> for a list of the format types defined by Apple. This field is used only if the <TT CLASS="cv">dbhCompressionID</TT> field contains the value <TT CLASS="cv">fixedCompression</TT>.</BLOCKQUOTE><P CLASS="T1.Text1"><A NAME="pgfId=2859"> </A>The <TT CLASS="cv">dbhBufferPtr</TT> array contains pointers to two sound double buffer records, whose format is defined below. These are the two buffers between which the Sound Manager switches until all the sound data has been sent into the sound channel. When you make the call to <TT CLASS="cv">SndPlayDoubleBuffer</TT>, the two buffers should both already contain a nonzero number of frames of data.<A NAME="marker=1334"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.45.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.3d.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.47.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Exp1to3 (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING119></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-118.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-120.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-44.html"><B>Chapter 2 - Sound Manager</B></A> / <A HREF="Sound-62.html"><B>Sound Manager Reference</B></A><BR><DL><DD><A HREF="Sound-88.html"><B>Sound Manager Routines</B></A> / <A HREF="Sound-116.html"><B>Compressing and Expanding Audio Data</B></A></DL></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING119-0></A>
<H3><A NAME=MARKER-11-904></A>Exp1to3<A NAME=MARKER-2-205></A></H3>
 <A NAME=MARKER-2-294></A>You can use the <CODE>Exp1to3</CODE> procedure to expand a buffer of sound samples you previously have compressed with the <CODE>Comp3to1</CODE> procedure.<P>
<PRE>
PROCEDURE Exp1to3 (inBuffer: Ptr; outBuffer: Ptr; cnt: LongInt;
                   inState: Ptr; outState: Ptr; 
                   numChannels: LongInt; whichChannel: LongInt);
</PRE>
<DL>
<DT><CODE>inBuffer</CODE>
<DD> A pointer to a buffer of packets to be expanded.
<DT><CODE>outBuffer</CODE>
<DD> A pointer to a buffer where the expanded samples will be written.
<DT><CODE>cnt</CODE>
<DD> The number of packets to expand.
<DT><CODE>inState</CODE>
<DD> A pointer to a 128-byte buffer from which the input state of the algorithm is read, or <CODE>NIL</CODE>. To initialize the algorithm, this buffer should be filled with zeros.
<DT><CODE>outState</CODE>
<DD> A pointer to a 128-byte buffer to which the output state of the algorithm is written, or <CODE>NIL</CODE>. This buffer might be the same as that specified by the <CODE>inState</CODE> parameter.
<DT><CODE>numChannels</CODE>
<DD> The number of channels in the buffer pointed to by the <CODE>inBuffer</CODE> parameter.
<DT><CODE>whichChannel</CODE>
<DD> The channel to expand, when <CODE>numChannels</CODE> is greater than 1. This parameter must be in the range of 1 to <CODE>numChannels</CODE>.
</DL>
<A NAME=HEADING119-10></A>
<H5>DESCRIPTION</H5>
 The <CODE>Exp1to3</CODE> procedure expands <CODE>cnt</CODE> packets of sound stored in the buffer specified by <CODE>inBuffer</CODE> and places the result in the buffer specified by <CODE>outBuffer</CODE>, whose size must be at least <CODE>cnt</CODE> packets * 2 bytes per packet * 3, or <CODE>cnt * 6</CODE> bytes. If <CODE>numChannels</CODE> is greater than 1, then the compressed sound must be stored in interleaved format on a packet basis.<P>
 If you expand compressed sound data that includes multiple sound channels, you retain only one channel of sound, which you specify in the <CODE>whichChannel</CODE> parameter. Thus, if you use the <CODE>Exp1to3</CODE> procedure to expand three-channel sound, the output buffer will be the same size as the input buffer since only one channel is retained. To retain multiple channels of sound after expansion, you must call the <CODE>Exp1to3</CODE> procedure for each channel to be expanded and then interleave the expanded sound data on a sample basis.<P>
 The <CODE>Exp1to3</CODE> procedure expands every packet of sampled-sound data to exactly 6 bytes.<P>
 You can use the <CODE>inState</CODE> and <CODE>outState</CODE> parameters to allow the MACE compression routines to preserve information about algorithms across calls. Alternatively, you may pass <CODE>NIL</CODE> state buffers and let the Sound Manager allocate the buffers internally.<P>
<A NAME=HEADING119-15></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Because the <CODE>Exp1to3</CODE> procedure might allocate memory, you should not call it at interrupt time.<P>
<A NAME=HEADING119-17></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>Exp1to3</CODE> procedure are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_SoundDispatch<TD>$00080010<A NAME=MARKER-2-241></A></TABLE>
<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-118.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-120.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

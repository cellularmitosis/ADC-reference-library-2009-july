<html><head><title>Mac OS X Developer Tools
 Manual Page For nasm(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/nasm" title="Mac OS X Developer Tools
 Manual Page for nasm(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/nasm"; name=nasm(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
NASM(1)                                                                                              NASM(1)



<b>NAME</b>
       nasm - the Netwide Assembler, a portable 80x86 assembler

<b>SYNOPSIS</b>
       <b>nasm</b> [ <b>-f</b> format ] [ <b>-o</b> outfile ] [ <u>options</u>...  ] infile
       <b>nasm</b> <b>-h</b>
       <b>nasm</b> <b>-r</b>

<b>DESCRIPTION</b>
       The  <b>nasm</b>  command  assembles the file <u>infile</u> and directs output to the file <u>outfile</u> if specified. If
       <u>outfile</u> is not specified, <b>nasm</b> will derive a default output file name from  the  name  of  its  input
       file, usually by appending `.o' or `.obj', or by removing all extensions for a raw binary file. Fail-<font color="#ffffff" class="whiteout">ing&nbsp;Failing</font>
       ing that, the output file name will be `nasm.out'.

   <b>OPTIONS</b>
       <b>-h</b>     Causes <b>nasm</b> to exit immediately, after giving a summary of its invocation options, and listing
              all its supported output file formats.

       <b>-a</b>     Causes <b>nasm</b> to assemble the given input file without first applying the macro preprocessor.

       <b>-e</b>     Causes  <b>nasm</b> to preprocess the given input file, and write the output to <u>stdout</u> (or the speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
              fied output file name), and not actually assemble anything.

       <b>-M</b>     Causes <b>nasm</b> to output Makefile-style dependencies to stdout; normal output is suppressed.

       <b>-E</b> <u>filename</u>
              Causes <b>nasm</b> to redirect error messages to <u>filename</u>.  This option exists to  support  operating
              systems on which stderr is not easily redirected.

       <b>-r</b>     Causes <b>nasm</b> to exit immediately, after displaying its version number.  <u>(obsolete)</u>

       <b>-v</b>     Causes <b>nasm</b> to exit immediately, after displaying its version number.

       <b>-f</b> <u>format</u>
              Specifies  the output file format. Formats include <u>bin</u>, to produce flat-form binary files, and
              <u>aout</u> and <u>elf</u> to produce Linux a.out and ELF object files, respectively.

       <b>-o</b> <u>outfile</u>
              Specifies a precise name for the output file, overriding <b>nasm</b>'s default means  of  determining
              it.

       <b>-l</b> <u>listfile</u>
              Causes  an  assembly listing to be directed to the given file, in which the original source is
              displayed on the right hand side (plus the source for included files  and  the  expansions  of
              multi-line macros) and the generated code is shown in hex on the left.

       <b>-s</b>     Causes <b>nasm</b> to send its error messages and/or help text to <u>stdout</u> instead of <u>stderr</u>.

       <b>-w</b><u>[+-]foo</u>
              Causes  <b>nasm</b>  to enable or disable certain classes of warning messages, for example <b>-w+orphan</b>-<font color="#ffffff" class="whiteout">labels&nbsp;-w+orphanlabels</font>
              <b>labels</b> or <b>-w-macro-params</b> to, respectively, enable warnings about labels  alone  on  lines  or
              disable warnings about incorrect numbers of parameters in macro calls.

       <b>-I</b> <u>directory</u>
              Adds  a  directory  to  the  search  path  for include files. The directory specification must
              include the trailing slash, as it will be directly prepended to the name of the include  file.

       <b>-i</b> <u>directory</u>
              Same as the <b>-I</b> option.

       <b>-P</b> <u>file</u>
              Specifies a file to be pre-included, before the main source file starts to be processed.

       <b>-p</b> <u>file</u>
              Same as the <b>-P</b> option.

       <b>-D</b> <u>macro[=value]</u>
              Pre-defines a single-line macro.

       <b>-d</b> <u>macro[=value]</u>
              Same as the <b>-D</b> option.

       <b>-U</b> <u>macro</u>
              Undefines a single-line macro.

       <b>-u</b> <u>macro</u>
              Same as the <b>-U</b> option.


   <b>SYNTAX</b>
       This man page does not fully describe the syntax of <b>nasm</b>'s assembly language, but does give a summary
       of the differences from other assemblers.

       <u>Registers</u> have no leading `%' sign, unlike <b>gas</b>, and floating-point stack registers are referred to as
       <u>st0</u>, <u>st1</u>, and so on.

       <u>Floating-point</u>  <u>instructions</u>  may  use  either the single-operand form or the double. A <u>TO</u> keyword is
       provided; thus, one could either write

                      fadd st0,st1
                      fadd st1,st0

       or one could use the alternative single-operand forms

                      fadd st1
                      fadd to st1

       <u>Uninitialised</u> <u>storage</u> is reserved using the <u>RESB</u>, <u>RESW</u>, <u>RESD</u>, <u>RESQ</u> and <u>REST</u> pseudo-opcodes, each tak-<font color="#ffffff" class="whiteout">ing&nbsp;taking</font>
       ing one parameter which gives the number of bytes, words, doublewords, quadwords or ten-byte words to
       reserve.

       <u>Repetition</u> of data items is not done by the <u>DUP</u> keyword as seen in DOS assemblers, but by the use  of
       the <u>TIMES</u> prefix, like this:

             message: times 3 db 'abc'
                      times 64-$+message db 0

       which  defines  the  string `abcabcabc', followed by the right number of zero bytes to make the total
       length up to 64 bytes.

       <u>Symbol</u> <u>references</u> are always understood to be immediate (i.e. the  address  of  the  symbol),  unless
       square brackets are used, in which case the contents of the memory location are used. Thus:

                      mov ax,wordvar

       loads AX with the address of the variable `wordvar', whereas

                      mov ax,[wordvar]
                      mov ax,[wordvar+1]
                      mov ax,[es:wordvar+bx]

       all refer to the <u>contents</u> of memory locations. The syntaxes

                      mov ax,es:wordvar[bx]
                      es mov ax,wordvar[1]

       are  not legal at all, although the use of a segment register name as an instruction prefix is valid,
       and can be used with instructions such as <u>LODSB</u> which can't be overridden any other way.

       <u>Constants</u> may be expressed numerically in most formats: a trailing H, Q or B denotes  hex,  octal  or
       binary  respectively,  and  a  leading `0x' or `$' denotes hex as well. Leading zeros are not treated
       specially at all.  Character constants may be enclosed in single or double quotes; there is no escape
       character.  The  ordering  is little-endian (reversed), so that the character constant <u>'abcd'</u> denotes
       0x64636261 and not 0x61626364.

       <u>Local</u> <u>labels</u> begin with a period, and their `locality' is granted by  the  assembler  prepending  the
       name of the previous non-local symbol. Thus declaring a label `.loop' after a label `label' has actu-<font color="#ffffff" class="whiteout">ally&nbsp;actually</font>
       ally defined a symbol called `label.loop'.

   <b>DIRECTIVES</b>
       <u>SECTION</u> <u>name</u> or <u>SEGMENT</u> <u>name</u> causes <b>nasm</b> to direct all following code to the named  section.  Section
       names  vary  with  output file format, although most formats support the names <u>.text</u>, <u>.data</u> and <u>.bss</u>.
       (The exception is the <u>obj</u> format, in which all segments are user-definable.)

       <u>ABSOLUTE</u> <u>address</u> causes <b>nasm</b> to position its notional assembly point at an absolute  address:  so  no
       code or data may be generated, but you can use <u>RESB</u>, <u>RESW</u> and <u>RESD</u> to move the assembly point further
       on, and you can define labels. So this directive may be used to define data structures. When you have
       finished doing absolute assembly, you must issue another <u>SECTION</u> directive to return to normal assem-<font color="#ffffff" class="whiteout">bly.&nbsp;assembly.</font>
       bly.

       <u>BITS</u> <u>16</u> or <u>BITS</u> <u>32</u> switches the default processor mode for which  <b>nasm</b>  is  generating  code:  it  is
       equivalent to <u>USE16</u> or <u>USE32</u> in DOS assemblers.

       <u>EXTERN</u> <u>symbol</u> and <u>GLOBAL</u> <u>symbol</u> import and export symbol definitions, respectively, from and to other
       modules. Note that the <u>GLOBAL</u> directive must appear before the definition of the symbol it refers to.

       <u>STRUC</u>  <u>strucname</u>  and  <u>ENDSTRUC</u>, when used to bracket a number of <u>RESB</u>, <u>RESW</u> or similar instructions,
       define a data structure. In addition to defining the offsets of the structure members, the  construct
       also  defines  a  symbol for the size of the structure, which is simply the structure name with <b>_</b><u>size</u>
       tacked on to the end.

   <b>FORMAT-SPECIFIC</b> <b>DIRECTIVES</b>
       <u>ORG</u> <u>address</u> is used by the <u>bin</u> flat-form binary output format, and specifies the address at which the
       output code will eventually be loaded.

       <u>GROUP</u>  <u>grpname</u> <u>seg1</u> <u>seg2...</u>  is used by the <u>obj</u> (Microsoft 16-bit) output format, and defines segment
       groups. This format also uses <u>UPPERCASE</u>, which directs that all segment, group and symbol names  out-<font color="#ffffff" class="whiteout">put&nbsp;output</font>
       put to the object file should be in uppercase. Note that the actual assembly is still case sensitive.

       <u>LIBRARY</u> <u>libname</u> is used by the <u>rdf</u> output format, and causes a dependency record to be written to the
       output file which indicates that the program requires a certain library in order to run.

   <b>MACRO</b> <b>PREPROCESSOR</b>
       Single-line  macros are defined using the <u>%define</u> or <u>%idefine</u> commands, in a similar fashion to the C
       preprocessor. They can be overloaded with respect to number of parameters, although defining a  macro
       with  no  parameters  prevents  the definition of any macro with the same name taking parameters, and
       vice versa.  <u>%define</u> defines macros whose names  match  case-sensitively,  whereas  <u>%idefine</u>  defines
       case-insensitive macros.

       Multi-line  macros  are defined using <u>%macro</u> and <u>%imacro</u> (the distinction is the same as that between
       <u>%define</u> and <u>%idefine</u>), whose syntax is as follows:

             %macro <u>name</u> <u>minprm</u>[-<u>maxprm</u>][+][.nolist] [<u>defaults</u>]
                      &lt;some lines of macro expansion text&gt;
             %endmacro

       Again, these macros may be overloaded. The trailing plus sign indicates that any parameters after the
       last  one  get subsumed, with their separating commas, into the last parameter. The <u>defaults</u> part can
       be used to specify defaults for unspecified macro parameters after <u>minparam</u>.  <u>%endm</u> is a  valid  syn-<font color="#ffffff" class="whiteout">onym&nbsp;synonym</font>
       onym for <u>%endmacro</u>.

       To  refer  to  the  macro parameters within a macro expansion, you use <u>%1</u>, <u>%2</u> and so on. You can also
       enforce that a macro parameter should contain a condition code by using <u>%+1</u>, and you can  invert  the
       condition code by using <u>%-1</u>.  You can also define a label specific to a macro invocation by prefixing
       it with a double % sign.

       Files can be included using the <u>%include</u> directive, which works like C.

       The preprocessor has a `context stack', which may be used by one macro to store  information  that  a
       later  one will retrieve. You can push a context on the stack using <u>%push</u>, remove one using <u>%pop</u>, and
       change the name of the top context (without  disturbing  any  associated  definitions)  using  <u>%repl</u>.
       Labels  and  <u>%define</u>  macros specific to the top context may be defined by prefixing their names with
       %$, and things specific to the next context down with %$$, and so on.

       Conditional assembly is done by means of <u>%ifdef</u>, <u>%ifndef</u>, <u>%else</u> and <u>%endif</u>  as  in  C.  (Except  that
       <u>%ifdef</u> can accept several putative macro names, and will evaluate TRUE if any of them is defined.) In
       addition, the directives <u>%ifctx</u> and <u>%ifnctx</u> can be used to condition on the name of the  top  context
       on  the  context  stack.  The  obvious set of `else-if' directives, <u>%elifdef</u>, <u>%elifndef</u>, <u>%elifctx</u> and
       <u>%elifnctx</u> are also supported.

<b>BUGS</b>
       There is a reported seg-fault on some (Linux) systems with some large source files. This  appears  to
       be very hard to reproduce. All other <u>known</u> bugs have been fixed...

<b>RESTRICTIONS</b>
       There  is  no  support for listing files, symbol maps, or debugging object-file records. The advanced
       features of the ELF and Win32 object file formats are not supported, and there is no means for  warn-<font color="#ffffff" class="whiteout">ing&nbsp;warning</font>
       ing the programmer against using an instruction beyond the capability of the target processor.

<b>SEE</b> <b>ALSO</b>
       <a href="as.1.html#//apple_ref/doc/man/1/as"><b>as</b>(<b>1</b>)</a>, <a href="ld.1.html#//apple_ref/doc/man/1/ld"><b>ld</b>(<b>1</b>)</a>.



                                        The Netwide Assembler Project                                NASM(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/nasm.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/nasm.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/nasm.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

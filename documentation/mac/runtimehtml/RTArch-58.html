<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Data Alignment</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING58></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="RTArch-57.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-59.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="RTArch-2.html"><B>Mac OS Runtime Architectures</B></A> / <BR><DD><A HREF="RTArch-56.html"><B>Chapter 4 - PowerPC Runtime Conventions</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING58-0></A>
<H1>Data Alignment</H1>
 The PowerPC runtime environment supports multiple data alignment modes. These alignments fall into two categories:<P>
<UL>
<LI>the natural alignment, which is the alignment of a data type when allocated in memory or assigned a memory address
<LI>the embedding alignment, which is the alignment of a data type within a composite data item<P>
</UL>
 For example, the alignment of a <CODE>UInt16</CODE> variable may differ from that of a <CODE>UInt16</CODE> data item embedded in a data structure. <P>
<DL>
<DT><B>Note</B>
<DD>Data items passed as parameters in a routine call have their own special alignment rules. See <A HREF=RTArch-62.html#MARKER-9-42>"Routine Calling Conventions," beginning on page 4-11</A>, for more information.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 <A HREF=RTArch-57.html#MARKER-9-1>Table 4-1 (page 4-3)</A> shows the natural alignment of each data type, which is simply the size of the data type. This alignment is fixed. <P>
 In data structures, you can specify an embedding alignment that varies depending on the alignment mode selected. Typically you can select the alignment mode using compiler options or pragmas. <A HREF=#MARKER-9-6>Table 4-2</A> shows the possible alignment modes.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-6></A><B>Table 4-2 Embedded alignment modes</B></CAPTION>
<TH>Data type<TH>PowerPC<TH>68K<TH>Packed<TH>Natural<TR>
<TD><CODE>SInt8</CODE><P><CODE>UInt8</CODE><P>Boolean<TD>1<TD>1<TD>1<TD>1<TR>
<TD><CODE>SInt16</CODE><P><CODE>UInt16</CODE><TD>2<TD>2<TD>1<TD>2<TR>
<TD><CODE>SInt32</CODE><P><CODE>UInt32</CODE><TD>4<TD>2<TD>1<TD>4<TR>
<TD><CODE>float</CODE><TD>4<TD>2<TD>1<TD>4<TR>
<TD><CODE>double</CODE><TD>4 or 8<TD>2<TD>1<TD>8<TR>
<TD>Pointer<TD>4<TD>2<TD>1<TD>4<TR>
<TD>Composite<TD>4 or 8<TD>2<TD>1<TD>16</TABLE>
<P>
 In all but the 68K alignment mode, the embedding alignment of a composite (for example, a data structure or an array) is determined by the largest embedding alignment of its members. The total size of a composite is rounded up to be a multiple of its embedded alignment. <P>
 In 68K alignment mode, the embedded alignment of a composite is always 2 bytes. The total size of the composite is rounded up to a multiple of two. <P>
 In PowerPC alignment mode, if the first embedded element in a data structure is type <CODE>double</CODE>, then the embedding alignment of all type <CODE>double</CODE> members in the structure is 8. In such cases, the embedding alignment for the entire structure is also 8 bytes.<P>
 <A NAME=MARKER-2-24></A>Note that you may need to adjust embedded alignments if you are converting code from the classic 68K environment to the PowerPC (or CFM-68K) runtime environments. If you wish to enforce classic 68K alignment on your PowerPC code, you can often specify compiler pragmas or options to do so. Note, however, that the PowerPC processor is less efficient when accessing data that is not placed according to its natural alignment. <P>
<HR>
<center>
<A HREF="RTArch-57.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-59.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="RTArch-3.html">&copy; Apple Computer, Inc.</A><br>11 MARCH 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Carbon Core Release Notes: CarbonCore Framework Release Notes for Mac OS X v10.5&acirc;&#128;&uml;</title>
	<meta name="Generator" content="Gutenberg"/>
	<meta name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta name = "Copyright" content="Copyright 2009 AppleInc. All Rights Reserved."/>
	<meta name="IndexTitle" content="CarbonCore Framework Release Notes for Mac OS X v10.5&acirc;&#128;&uml;"/>
	<meta name="xcode-display" content="render"/>
	<meta id="RESOURCES" content="../../../documentation/Resources" />
	<link rel="stylesheet" type="text/css" href="../../../documentation/Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/pedia.js"></script>
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000988" title="CarbonCore Framework Release Notes for Mac OS X v10.5&acirc;&#128;&uml;"></a>
        <a name="top"></a>
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../index.html#//apple_ref/doc/uid/TP30000872-TP30000420" target="_top">Carbon</a> &gt; <a href="../idxResourceManagement-date.html#//apple_ref/doc/uid/TP30000872-TP30000420-TP30000458">Resource Management</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
                
        
        <a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_8" title="CarbonCore Framework Release Notes for Mac OS X v10.5&acirc;&#128;&uml;"></a><h1>CarbonCore Framework Release Notes for Mac OS X v10.5â€¨</h1><p>CarbonCore is accessible within the CoreServices umbrella framework and is pulled into your application by linking against CoreServices or one of the higher level umbrellas such as Cocoa or Carbon which bring in CoreServices.</p><p>This document describes the changes in CarbonCore since Mac OS X release 10.4, Tiger. Note that you may be able to find more information on many of these changes in Apple's developer documentation.
</p>
<!-- This template is being used for both PDF and HTML. -->
<!-- TopicBook.pm currently relies on the element name bmini_toc. -->

    <h4>Contents:</h4>
    
    <p class="blockquote">

        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_1" target="_top">64-bit</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_2" target="_top">Alias Manager</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_3" target="_top">Backup (Time Machine)</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_4" target="_top">File Manager</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_5" target="_top">Folder Manager</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_6" target="_top">FSEvents</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40000988-DontLinkElementID_7" target="_top">Resource Manager</a>
                
            <br/>
            
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_1" title="64-bit"></a><h2>64-bit</h2><p>Mac OS X Leopard contains 64-bit versions of many system frameworks, enabling building and running Cocoa apps as 64-bit.</p><p>A few new API calls have been added to support 64-bit applications.  Many of the API calls which were deprecated for Mac OS X 10.4 and a few other APIs are unavailable for 64-bit applications.  These functions are marked [32-bit only] in their descriptions in the header files.  Routines which operate on the FSSpec data type (and the parameter block based variants) are not available for 64-bit applications.  New types have been introduced to allow the same code to be used by both 32-bit and 64-bit applications.</p><a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_2" title="Alias Manager"></a><h2>Alias Manager</h2><p>The Alias Manager adds two new API:</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus FSNewAliasFromPath( const char *fromFilePath, const char *targetPath, OptionBits flags, AliasHandle *inAlias, Boolean *isDirectory);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSMatchAliasBulk( const FSRef *fromFile, unsigned long rulesMask, AliasHandle inAlias, short *aliasCount, FSRef *aliasList, Boolean *needsUpdate, FSAliasFilterProcPtr aliasFilter, void *yourDataPtr);<span></span></pre></td></tr></table></div><p><code><a href="../../../documentation/Carbon/Reference/Alias_Manager/Reference/reference.html#//apple_ref/c/func/FSNewAliasFromPath" target="_top">FSNewAliasFromPath</a></code> creates a new alias record using UTF-8 POSIX style paths.  <code><a href="../../../documentation/Carbon/Reference/Alias_Manager/Reference/reference.html#//apple_ref/c/func/FSMatchAliasBulk" target="_top">FSMatchAliasBulk</a></code> is the same as <code><a href="../../../documentation/Carbon/Reference/Alias_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/FSMatchAlias" target="_top">FSMatchAlias</a></code> except it takes a 64-bit friendly <code><a href="../../../documentation/Carbon/Reference/Alias_Manager/Reference/reference.html#//apple_ref/c/tdef/FSAliasFilterProcPtr" target="_top">FSAliasFilterProcPtr</a></code> instead of the now deprecated <code><a href="../../../documentation/Carbon/Reference/Alias_Manager/Reference/reference.html#//apple_ref/c/tdef/AliasFilterUPP" target="_top">AliasFilterUPP</a></code>. See Aliases.h for more information.
</p><a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_3" title="Backup (Time Machine)"></a><h2>Backup (Time Machine)</h2><p>Two API calls have been added for managing items that should be skipped by Time Machine:</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus CSBackupSetItemExcluded(CFURLRef item, Boolean exclude, Boolean excludeByPath);<span></span></pre></td></tr><tr><td scope="row"><pre>Boolean CSBackupIsItemExcluded(CFURLRef item, Boolean *excludeByPath);<span></span></pre></td></tr></table></div><p>See BackupCore.h for more information.</p><a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_4" title="File Manager"></a><h2>File Manager</h2><p>The File Manager has added several API calls to support safe save operations.  FSReplaceObject and FSPathReplaceObject have been provided to assist in properly preserving metadata during safe save operations.  Supporting routines will return the temporary directory which ReplaceObject uses by default:</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus FSReplaceObject(const FSRef *originalObject, const FSRef *replacementObject, CFStringRef newName, CFStringRef temporaryName, const FSRef *temporaryDirectory, OptionBits flags, FSRef *resultObject);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSPathReplaceObject(const char *originalObjectPath, const char *replacementObjectPath, CFStringRef newName, CFStringRef temporaryName, const char *temporaryDirectoryPath, OptionBits flags);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSGetTemporaryDirectoryForReplaceObject(const FSRef *originalObject, FSRef *temporaryDirectory, OptionBits flags);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSPathGetTemporaryDirectoryForReplaceObject(const char *originalObjectPath, char *temporaryDirectoryPath, UInt32 maxPathSize, OptionBits flags);<span></span></pre></td></tr></table></div><p>MoveToTrash has been added as a new FSFileOperation.  These calls are similar to the Move FSFileOperation with the Trash as the implied destination and an optional output parameter to return the new location (since the operation will place the item in the proper trash location based on its current location):</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus FSMoveObjectToTrashSync(const FSRef *source, FSRef *target, OptionBits options);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSPathMoveObjectToTrashSync(const char *sourcePath, char **targetPath, OptionBits options);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSMoveObjectToTrashAsync(FSFileOperationRef fileOp, const FSRef *source, OptionBits flags, FSFileOperationStatusProcPtr callback &lt;null>, CFTimeInterval statusChangeInterval, FSFileOperationClientContext *clientContext);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSPathMoveObjectToTrashAsync(FSFileOperationRef fileOp, const char *sourcePath, OptionBits flags, FSPathFileOperationStatusProcPtr callback, CFTimeInterval statusChangeInterval, FSFileOperationClientContext *clientContext);
<span></span></pre></td></tr></table></div><p>A new set of API calls have been provided for the deletion of file system objects:</p><div class="codesample"><table><tr><td scope="row"><pre>OSErr FSUnlinkObject(const FSRef *ref);<span></span></pre></td></tr><tr><td scope="row"><pre>OSErr PBUnlinkObjectSync(FSRefParam *paramBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>void PBUnlinkObjectAsync(FSRefParam *paramBlock);<span></span></pre></td></tr></table></div><p>These calls behave very similar to their DeleteObject counterparts, except that they will succeed on open objects and understand how properly handle archive directory links (aka directory hard links).  The UnlinkObject calls behave more like the <code><a href="../../../documentation/Darwin/Reference/ManPages/man2/unlink.2.html#//apple_ref/doc/man/2/unlink" target="_top">unlink(2)</a></code> system call.</p><p>As part of the 64-bit cleanup two new types have been introduced.  <code><a href="../../../documentation/Carbon/Reference/File_Manager/Reference/reference.html#//apple_ref/c/tdef/FSVolumeRefNum" target="_top">FSVolumeRefNum</a></code> (typed as SInt16) is used to represent volume reference numbers and FSIORefNum (typed int for 64-bit, SInt16 for 32-bit) is used for fork reference numbers.  Several new API calls were added to provide replacements for functions that needed to be deprecated due to dependencies on types that have been deprecated.  These functions mostly replace similar variants which used parameter blocks that are not present for 64-bit:</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus FSGetVolumeParms(FSVolumeRefNum volume, GetVolParmsInfoBuffer *buffer, ByteCount bufferSize);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSGetVolumeMountInfoSize(FSVolumeRefNum volume, ByteCount *size);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSGetVolumeMountInfo(FSVolumeRefNum volume, BytePtr buffer, ByteCount bufferSize, ByteCount *actualSize &lt;out, NULL>);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSVolumeMount(BytePtr buffer, FSVolumeRefNum *mountedVolume);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSFlushVolume(FSVolumeRefNum vRefNum);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus PBFlushVolumeSync(FSRefParamPtr paramBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus PBFlushVolumeAsync(FSRefParamPtr paramBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus PBFSCopyFileSync(FSRefParamPtr paramBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus PBFSCopyFileAsync(FSRefParamPtr paramBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FSResolveNodeID(FSVolumeRefNum volume, UInt32 nodeID, FSRefPtr newRef);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus PBFSResolveNodeIDSync(FSRefParamPtr paramBlock);<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus PBFSResolveNodeIDAsync(FSRefParamPtr paramBlock);<span></span></pre></td></tr></table></div><p>See Files.h for more information.</p><a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_5" title="Folder Manager"></a><h2>Folder Manager</h2><p>Several folders have had a "deny everyone delete" ACL added to them in Leopard.  This was done to help prevent accidental deletion of important system and user folders.</p><p>One new API call has been added to the Folder Manager to aid in the transition from FSSpec style names to Unicode names:</p><div class="codesample"><table><tr><td scope="row"><pre>OSStatus GetFolderNameUnicode(FSVolumeRefNum vRefNum, OSType foldType, FSVolumeRefNum *foundVRefNum, HFSUniStr255 *name);<span></span></pre></td></tr></table></div><p>The older <code><a href="../../../documentation/Carbon/Reference/Folder_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/GetFolderName" target="_top">GetFolderName</a></code> call has been deprecated (and is unavailable for 64-bit).</p><p>Several new folder selectors have been added:</p><div class="codesample"><table><tr><td scope="row"><pre>    kSpotlightImportersFolderType       = 'simp',    // Folder for Spotlight importers, usually /Library/Spotlight/ or ~/Library/Spotlight, etc.<span></span></pre></td></tr><tr><td scope="row"><pre>    kSpotlightMetadataCacheFolderType   = 'scch',    // Folder for Spotlight metadata caches, for example: ~/Library/Caches/Metadata/<span></span></pre></td></tr><tr><td scope="row"><pre>    kInputManagersFolderType            = 'inpt',    // InputManagers<span></span></pre></td></tr><tr><td scope="row"><pre>    kInputMethodsFolderType             = 'inpf',    // ../Library/Input Methods/<span></span></pre></td></tr><tr><td scope="row"><pre>    kLibraryAssistantsFolderType        = 'astl',    // Refers to the [domain]/Library/Assistants folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioDigidesignFolderType          = 'adig',    // Refers to the Digidesign subfolder of the Audio Plug-ins folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioVSTFolderType                 = 'avst',    // Refers to the VST subfolder of the Audio Plug-ins folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kColorPickersFolderType             = 'cpkr',    // Refers to the ColorPickers folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kCompositionsFolderType             = 'cmps',    // Refers to the Compositions folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kFontCollectionsFolderType          = 'fncl',    // Refers to the FontCollections folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kiMovieFolderType                   = 'imov',    // Refers to the iMovie folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kiMoviePlugInsFolderType            = 'impi',    // Refers to the Plug-ins subfolder of the iMovie Folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kiMovieSoundEffectsFolderType       = 'imse',    // Refers to the Sound Effects subfolder of the iMovie Folder<span></span></pre></td></tr><tr><td scope="row"><pre>    kDownloadsFolderType                = 'down',    // Refers to the ~/Downloads folder<span></span></pre></td></tr></table></div><p>See Folders.h for more information.</p><a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_6" title="FSEvents"></a><h2>FSEvents</h2><p>Leopard introduces a new API for monitoring file system changes.  FSEvents provides a runloop based mechanism for receiving notifications of directory level file system changes.  FSEvents allows for monitoring of directory hierarchies (the existing kqueue mechanism only reporting changes made at the root level of the directory being monitored).  FSEvents supports batch notifications (many changes in a single callback) and tunable latency (allow the client to adjust how long after an event has occurred before a callback would be sent).  See FSEvents.h for more information.</p>
<a name="//apple_ref/doc/uid/TP40000988-DontLinkElementID_7" title="Resource Manager"></a><h2>Resource Manager</h2><p>The Resource Manager introduces several new types and deprecates its <code><a href="../../../documentation/Carbon/Reference/File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSSpec" target="_top">FSSpec</a></code> (and older) based API as part of the changes for 64-bit support:</p><div class="codesample"><table><tr><td scope="row"><pre>typedef SInt16 ResID;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SInt16 ResAttributes;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SInt16 ResFileAttributes;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SInt16 ResourceCount;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SInt16 ResourceIndex;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef FSIORefNum ResFileRefNum;<span></span></pre></td></tr></table></div>

        <br/><br/> 
        
        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/releasenotes/Carbon/RN-CarbonCore/index.html%3Fid%3DTP40000988-5.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/releasenotes/Carbon/RN-CarbonCore/index.html%3Fid%3DTP40000988-5.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/releasenotes/Carbon/RN-CarbonCore/index.html%3Fid%3DTP40000988-5.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
</body>
</html>
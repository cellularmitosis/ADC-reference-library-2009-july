<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd"><HTML><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note IC510: Edition Manager Q&amp;As</title><meta name="keywords" content="Mac OS 8 Edition Manager fmts SetEditionFormatMark setMarkTo registered sections"><meta name="Description" content="Technical Note IC510: This Technical Note contains a collectionof archived Q&amp;As relating to the Edition Manager--questionssent the Developer Support Center (DSC) along with answersfrom the DSC engineers. Archived Q&amp;As include: the orderingof 'fmts' in an edition container; The definition of SetEditionFormatMark(setMarkTo) parameter; and Checking for registered sections."><meta name="categories" content="Interapplication Communication"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002517" title="Edition Manager Q&As"></a><a name="top"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxInterapplicationCommunication-date.html" target="_blank">Carbon > Interapplication Communication</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note IC510</div>
<div id="pageheadsub">Edition Manager Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext">                  <A HREF="#Section1">Ordering of 'fmts' in an edition container</A><BR><BR> <A HREF="#Section2">SetEditionFormatMark's setMarkTo parameter</A><BR><BR> <A HREF="#Section3">Apple 'cncl' section cancel event</A><BR><BR> <A HREF="#Section4">Checking for registered sections</A><BR><BR>                  <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specific topic--questions sent the Developer Support Center (DSC) along with answers from the DSC engineers. Current Q&amp;As can be found on the <a href="../../qa/index.html">Macintosh Technical Q&amp;As web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1990]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name="Section1"></a><h2>Ordering of 'fmts' in an edition container</h2><p>Date Written:  6/13/91</p><p>Last reviewed:  6/14/93</p><p>Is there any ordering to the <code>'fmts'</code> edition format, like best to worst? For applications that support subscribing to a large number of formats, defaulting to "best" is nontrivial.</p><p>___</p><p>There is no implicit ordering of the formats in an edition container. They arewritten and read and returned in the <code>'fmts'</code> resource in the order in which theywere written into the container. This is not an arbitrary model; it's based oninformation that the Edition Manager, as system software, _can't_ know. Thedecision would be _very_ implementation dependent. Your users may prefer yourown custom edition type over all others, so the way you would want the <code>'fmts'</code>resource to be returned would be a great deal different than a simple wordprocessor, who would be preferring TEXT.</p><p>So the system can't make that decision. It doesn't know who is calling theedition manager and can't know what format your specific application prefers.Any ordering it may make would be wrong for a large set of developers. So, itrelies on just giving back the formats in the order that they were written. Ofcourse, if you are customizing your Subscriber dialog with your own popup,Apple recommends that you order the popup (or list, or whatever) to suit theneeds of your application best, defaulting to your "best" format; however,there is no way to enforce this. The enhanced subscriber dialogs design is/areup to individual developers.</p><a name="Section2"></a><h2>SetEditionFormatMark's setMarkTo parameter</h2><p>Date Written:  7/29/91</p><p>Last reviewed: 6/14/93</p><p>How is <code>SetEditionFormatMark</code>'s third parameter (<code>setMarkTo</code>) to be determined? Isit always zero for the start of each format? Does it mean that any chunk of theedition can be obtained, using the starting mark and byte count, exactly likereading a file?</p><p>___</p><p>The <code>setMarkTo</code> parameter is set only for the specific format you're concerned with. So yes, it is always initially zero for any specific format in an edition container file. And you can set it to whatever you like for that particular format. You can get the length of the format you're concerned with by calling <code>EditionHasFormat(refNum, formatDesired,&amp;returnedSize</code>); and <code>returnedSize</code> will contain  the size of that format. So in <code>SetEditionFOrmatMark</code> your range is 0-returnedSize.</p><p>The answer to your third question is "kinda." You can almost think of theseparate editions in a edition container file as accessible the same way anormal data fork is, but you have to remember that you must work with theEdition Manager calls to make sure this works.</p><p>The edition container format mark for a format does NOT relate at all to theactual mark the File Manager is using in the data fork. The Edition Managerdoes its own translation from Edition Manager mark to logical file mark whenyou make a <code>ReadEdition</code> call. So, you are never informed of where the actualdata resides in the ECF.</p><p>This is necessary to allow the Edition Manager room to expand. By having theEdition Manager make the conversions, you achieve two things:</p><p>1) The header in the ECF can be modified, extended or shortened anytime, and noapplications are dependent on the "real" file mark.</p><p>2) You as an application don't have to worry about another format being addedto the ECF while you are reading another one. Say the EDF currently has twoformats, a 1K PICT at the beginning of the file, and a 2K TEXT after it. Youare reading the TEXT 50 bytes at a time (for some reason or other). While youare doing that, the publisher updates the 'PICT'. The TEXT is held in a buffer,because the EM knows that someone is reading it. But the PICT can be writtennow, even if its size changes, and the Edition Manager just changes its offsetto the mark for the TEXT. You as the application still continue to use the samemark; the size of the file changed but you did not have to be aware of it.</p><p>So you can manage reading formats yourself, you can "batch" in a large format(or write it out in chunks) but you have to use Edition Manager read and writecalls to do it, not File Manager calls.</p><a name="Section3"></a><h2>Apple 'cncl' section cancel event</h2><p>Date Written:  8/23/91</p><p>Last reviewed:  6/14/93</p><p>When will the "section cancel" Apple event be implemented in the future so thesystem can send it? I've implemented it, but because it's hard to tell it, I'mtempted to take it out, unless you can give me a good reason to leave it in.</p><p>___</p><p>There's no indication when this event will be implemented by the system. The'cncl' event is primarily in there for applications to facilitate scriptingcompatibility, not for system use. Since Apple is encouraging all applicationsto send Apple events to themselves in response to user actions, the 'cncl'event is provided for completeness and user understanding. When scriptingsystems become more prevalent, then the 'cncl' (and other events) will make alot more sense, since a scripter can then record (or a user scripting toolgenerate) a section cancel event and keep it in an Apple event script.</p><a name="Section4"></a><h2>Checking for registered sections</h2><p>Date Written:  10/23/91</p><p>Last reviewed:  6/14/93</p><p><i>Inside Macintosh</i> states. "...your application must keep its own list ofregistered sections for each open document that contains sections." Which<code>NewSection()</code> and <code>RegisterSection()</code> results codes indicate the section was notregistered successfully? Is there a field in the section record which can beexamined to determine if the section is registered?</p><p>___</p><p>Checking the error codes is always a good idea, but the <code>IsRegisteredSection</code>routine should be used to determine if a section is registered -- for example,after calling <code>NewSection</code> and <code>RegisterSection</code>. The fields of the section recordshould not be used to determine this.</p>         <P><A HREF="#top">Back to top</A></P>                  <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (32K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/ic_510.pdf">Download</A></P>               </TD>            </TR>                     </TABLE>         <BR>                  <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/ic/ic_510.html%3Fid%3DDTS10002517-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/ic/ic_510.html%3Fid%3DDTS10002517-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/ic/ic_510.html%3Fid%3DDTS10002517-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
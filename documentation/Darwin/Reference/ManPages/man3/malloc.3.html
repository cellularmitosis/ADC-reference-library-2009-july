<html><head><title>Mac OS X
 Manual Page For malloc(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/malloc" title="Mac OS X
 Manual Page for malloc(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/malloc"; name=malloc(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MALLOC(3)                BSD Library Functions Manual                MALLOC(3)

<b>NAME</b>
     <b>calloc</b>, <b>free</b>, <b>malloc</b>, <b>realloc</b>, <b>reallocf</b>, <b>valloc</b> -- memory allocation

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;stdlib.h&gt;</b>

     <u>void</u> <u>*</u>
     <b>calloc</b>(<u>size</u><b>_</b><u>t</u> <u>count</u>, <u>size</u><b>_</b><u>t</u> <u>size</u>);

     <u>void</u>
     <b>free</b>(<u>void</u> <u>*ptr</u>);

     <u>void</u> <u>*</u>
     <b>malloc</b>(<u>size</u><b>_</b><u>t</u> <u>size</u>);

     <u>void</u> <u>*</u>
     <b>realloc</b>(<u>void</u> <u>*ptr</u>, <u>size</u><b>_</b><u>t</u> <u>size</u>);

     <u>void</u> <u>*</u>
     <b>reallocf</b>(<u>void</u> <u>*ptr</u>, <u>size</u><b>_</b><u>t</u> <u>size</u>);

     <u>void</u> <u>*</u>
     <b>valloc</b>(<u>size</u><b>_</b><u>t</u> <u>size</u>);

<b>DESCRIPTION</b>
     The <b>malloc</b>(), <b>calloc</b>(), <b>valloc</b>(), <b>realloc</b>(), and <b>reallocf</b>() functions allocate memory.  The allocated
     memory is aligned such that it can be used for any data type, including AltiVec- and SSE-related types.
     The <b>free</b>() function frees allocations that were created via the preceding allocation functions.

     The <b>malloc</b>() function allocates <u>size</u> bytes of memory and returns a pointer to the allocated memory.

     The <b>calloc</b>() function contiguously allocates enough space for <u>count</u> objects that are <u>size</u> bytes of mem-<font color="#ffffff" class="whiteout">ory&nbsp;memory</font>
     ory each and returns a pointer to the allocated memory.  The allocated memory is filled with bytes of
     value zero.

     The <b>valloc</b>() function allocates <u>size</u> bytes of memory and returns a pointer to the allocated memory.
     The allocated memory is aligned on a page boundary.

     The <b>realloc</b>() function tries to change the size of the allocation pointed to by <u>ptr</u> to <u>size</u>, and
     returns <u>ptr</u>.  If there is not enough room to enlarge the memory allocation pointed to by <u>ptr</u>, <b>realloc</b>()
     creates a new allocation, copies as much of the old data pointed to by <u>ptr</u> as will fit to the new allo-<font color="#ffffff" class="whiteout">cation,&nbsp;allocation,</font>
     cation, frees the old allocation, and returns a pointer to the allocated memory.  If <u>ptr</u> is NULL,
     <b>realloc</b>() is identical to a call to <b>malloc</b>() for <u>size</u> bytes.  If <u>size</u> is zero and <u>ptr</u> is not NULL, a
     new, minimum sized object is allocated and the original object is freed.

     The <b>reallocf</b>() function is identical to the <b>realloc</b>() function, except that it will free the passed
     pointer when the requested memory cannot be allocated.  This is a FreeBSD specific API designed to ease
     the problems with traditional coding styles for realloc causing memory leaks in libraries.

     The <b>free</b>() function deallocates the memory allocation pointed to by <u>ptr</u>.

<b>RETURN</b> <b>VALUES</b>
     If successful, <b>calloc</b>(), <b>malloc</b>(), <b>realloc</b>(), <b>reallocf</b>(), and <b>valloc</b>() functions return a pointer to
     allocated memory.  If there is an error, they return a NULL pointer and set <u>errno</u> to ENOMEM.

     For <b>realloc</b>(), the input pointer is still valid if reallocation failed.  For <b>reallocf</b>(), the input
     pointer will have been freed if reallocation failed.

     The <b>free</b>() function does not return a value.

<b>DEBUGGING</b> <b>ALLOCATION</b> <b>ERRORS</b>
     A number of facilities are provided to aid in debugging allocation errors in applications.  These
     facilities are primarily controlled via environment variables.  The recognized environment variables
     and their meanings are documented below.

<b>ENVIRONMENT</b>
     The following environment variables change the behavior of the allocation-related functions.

     MallocLogFile &lt;f&gt;            Create/append messages to the given file path <u>&lt;f&gt;</u> instead of writing to
                                  the standard error.

     MallocGuardEdges             If set, add a guard page before and after each large block.

     MallocDoNotProtectPrelude    If set, do not add a guard page before large blocks, even if the
                                  MallocGuardEdges environment variable is set.

     MallocDoNotProtectPostlude   If set, do not add a guard page after large blocks, even if the
                                  MallocGuardEdges environment variable is set.

     MallocStackLogging           If set, record all stacks, so that tools like <b>leaks</b> can be used.

     MallocStackLoggingNoCompact  If set, record all stacks in a manner that is compatible with the
                                  <b>malloc_history</b> program.

     MallocPreScribble            If set, fill memory that has been allocated with 0xaa bytes.  This
                                  increases the likelihood that a program making assumptions about the con-<font color="#ffffff" class="whiteout">tents&nbsp;contents</font>
                                  tents of freshly allocated memory will fail.

     MallocScribble               If set, fill memory that has been deallocated with 0x55 bytes.  This
                                  increases the likelihood that a program will fail due to accessing memory
                                  that is no longer allocated.

     MallocCheckHeapStart &lt;s&gt;     If set, specifies the number of allocations <u>&lt;s&gt;</u> to wait before begining
                                  periodic heap checks every <u>&lt;n&gt;</u> as specified by MallocCheckHeapEach.  If
                                  MallocCheckHeapStart is set but MallocCheckHeapEach is not specified, the
                                  default check repetition is 1000.

     MallocCheckHeapEach &lt;n&gt;      If set, run a consistency check on the heap every <u>&lt;n&gt;</u> operations.
                                  MallocCheckHeapEach is only meaningful if MallocCheckHeapStart is also
                                  set.

     MallocCheckHeapSleep &lt;t&gt;     Sets the number of seconds to sleep (waiting for a debugger to attach)
                                  when MallocCheckHeapStart is set and a heap corruption is detected.  The
                                  default is 100 seconds.  Setting this to zero means not to sleep at all.
                                  Setting this to a negative number means to sleep (for the positive number
                                  of seconds) only the very first time a heap corruption is detected.

     MallocCheckHeapAbort &lt;b&gt;     When MallocCheckHeapStart is set and this is set to a non-zero value,
                                  causes <a href="abort.3.html#//apple_ref/doc/man/3/abort">abort(3)</a> to be called if a heap corruption is detected, instead of
                                  any sleeping.

     MallocErrorAbort             If set, causes <a href="abort.3.html#//apple_ref/doc/man/3/abort">abort(3)</a> to be called if an error was encountered in
                                  malloc(3) or <a href="free.3.html#//apple_ref/doc/man/3/free">free(3)</a> , such as a calling <a href="free.3.html#//apple_ref/doc/man/3/free">free(3)</a> on a pointer previously
                                  freed.

     MallocHelp                   If set, print a list of environment variables that are paid heed to by the
                                  allocation-related functions, along with short descriptions.  The list
                                  should correspond to this documentation.

<b>DIAGNOSTIC</b> <b>MESSAGES</b>
<b>SEE</b> <b>ALSO</b>
     <a href="../man1/leaks.1.html#//apple_ref/doc/man/1/leaks">leaks(1)</a>, <a href="../man1/malloc_history.1.html#//apple_ref/doc/man/1/malloc_history">malloc_history(1)</a>, <a href="abort.3.html#//apple_ref/doc/man/3/abort">abort(3)</a>, <a href="malloc_size.3.html#//apple_ref/doc/man/3/malloc_size">malloc_size(3)</a> <u>/Developer/ADC</u> <u>Reference</u>
     <u>Library/releasenotes/DeveloperTools/MallocOptions.html</u>

BSD                              May 23, 2006                              BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/malloc.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/malloc.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/malloc.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

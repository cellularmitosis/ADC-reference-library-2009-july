<html><head><title>Mac OS X
 Manual Page For pkcs12(1ssl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1ssl/pkcs12" title="Mac OS X
 Manual Page for pkcs12(1ssl)"><a name="//apple_ref/doc/man/1/pkcs12" title="Mac OS X
 Manual Page for pkcs12(1ssl)"><!-- headerDoc=man; indexgroup=Section 1ssl; uid="//apple_ref/doc/man/1ssl/pkcs12"; name=pkcs12(1ssl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
PKCS12(1)                                          OpenSSL                                         PKCS12(1)



<b>NAME</b>
       pkcs12 - PKCS#12 file utility

<b>SYNOPSIS</b>
       <b>openssl</b> <b>pkcs12</b> [<b>-export</b>] [<b>-chain</b>] [<b>-inkey</b> <b>filename</b>] [<b>-certfile</b> <b>filename</b>] [<b>-name</b> <b>name</b>] [<b>-caname</b> <b>name</b>]
       [<b>-in</b> <b>filename</b>] [<b>-out</b> <b>filename</b>] [<b>-noout</b>] [<b>-nomacver</b>] [<b>-nocerts</b>] [<b>-clcerts</b>] [<b>-cacerts</b>] [<b>-nokeys</b>]
       [<b>-info</b>] [<b>-des</b>] [<b>-des3</b>] [<b>-idea</b>] [<b>-nodes</b>] [<b>-noiter</b>] [<b>-maciter</b>] [<b>-twopass</b>] [<b>-descert</b>] [<b>-certpbe</b>]
       [<b>-keypbe</b>] [<b>-keyex</b>] [<b>-keysig</b>] [<b>-password</b> <b>arg</b>] [<b>-passin</b> <b>arg</b>] [<b>-passout</b> <b>arg</b>] [<b>-rand</b> <!-- a --><b>file(s)</b><!-- /a --><b></b>]

<b>DESCRIPTION</b>
       The <b>pkcs12</b> command allows PKCS#12 files (sometimes referred to as PFX files) to be created and
       parsed. PKCS#12 files are used by several programs including Netscape, MSIE and MS Outlook.

<b>COMMAND</b> <b>OPTIONS</b>
       There are a lot of options the meaning of some depends of whether a PKCS#12 file is being created or
       parsed. By default a PKCS#12 file is parsed a PKCS#12 file can be created by using the <b>-export</b> option
       (see below).

<b>PARSING</b> <b>OPTIONS</b>
       <b>-in</b> <b>filename</b>
           This specifies filename of the PKCS#12 file to be parsed. Standard input is used by default.

       <b>-out</b> <b>filename</b>
           The filename to write certificates and private keys to, standard output by default.  They are all
           written in PEM format.

       <b>-pass</b> <b>arg</b>, <b>-passin</b> <b>arg</b>
           the PKCS#12 file (i.e. input file) password source. For more information about the format of <b>arg</b>
           see the <b>PASS</b> <b>PHRASE</b> <b>ARGUMENTS</b> section in <a href="openssl.1ssl.html#//apple_ref/doc/man/1/openssl"><u>openssl</u>(1)</a>.

       <b>-passout</b> <b>arg</b>
           pass phrase source to encrypt any outputed private keys with. For more information about the
           format of <b>arg</b> see the <b>PASS</b> <b>PHRASE</b> <b>ARGUMENTS</b> section in <a href="openssl.1ssl.html#//apple_ref/doc/man/1/openssl"><u>openssl</u>(1)</a>.

       <b>-noout</b>
           this option inhibits output of the keys and certificates to the output file version of the
           PKCS#12 file.

       <b>-clcerts</b>
           only output client certificates (not CA certificates).

       <b>-cacerts</b>
           only output CA certificates (not client certificates).

       <b>-nocerts</b>
           no certificates at all will be output.

       <b>-nokeys</b>
           no private keys will be output.

       <b>-info</b>
           output additional information about the PKCS#12 file structure, algorithms used and iteration
           counts.

       <b>-des</b>
           use DES to encrypt private keys before outputting.

       <b>-des3</b>
           use triple DES to encrypt private keys before outputting, this is the default.

       <b>-idea</b>
           use IDEA to encrypt private keys before outputting.

       <b>-nodes</b>
           don't encrypt the private keys at all.

       <b>-nomacver</b>
           don't attempt to verify the integrity MAC before reading the file.

       <b>-twopass</b>
           prompt for separate integrity and encryption passwords: most software always assumes these are
           the same so this option will render such PKCS#12 files unreadable.

<b>FILE</b> <b>CREATION</b> <b>OPTIONS</b>
       <b>-export</b>
           This option specifies that a PKCS#12 file will be created rather than parsed.

       <b>-out</b> <b>filename</b>
           This specifies filename to write the PKCS#12 file to. Standard output is used by default.

       <b>-in</b> <b>filename</b>
           The filename to read certificates and private keys from, standard input by default.  They must
           all be in PEM format. The order doesn't matter but one private key and its corresponding
           certificate should be present. If additional certificates are present they will also be included
           in the PKCS#12 file.

       <b>-inkey</b> <b>filename</b>
           file to read private key from. If not present then a private key must be present in the input
           file.

       <b>-name</b> <b>friendlyname</b>
           This specifies the "friendly name" for the certificate and private key. This name is typically
           displayed in list boxes by software importing the file.

       <b>-certfile</b> <b>filename</b>
           A filename to read additional certificates from.

       <b>-caname</b> <b>friendlyname</b>
           This specifies the "friendly name" for other certificates. This option may be used multiple times
           to specify names for all certificates in the order they appear. Netscape ignores friendly names
           on other certificates whereas MSIE displays them.

       <b>-pass</b> <b>arg</b>, <b>-passout</b> <b>arg</b>
           the PKCS#12 file (i.e. output file) password source. For more information about the format of <b>arg</b>
           see the <b>PASS</b> <b>PHRASE</b> <b>ARGUMENTS</b> section in <a href="openssl.1ssl.html#//apple_ref/doc/man/1/openssl"><u>openssl</u>(1)</a>.

       <b>-passin</b> <b>password</b>
           pass phrase source to decrypt any input private keys with. For more information about the format
           of <b>arg</b> see the <b>PASS</b> <b>PHRASE</b> <b>ARGUMENTS</b> section in <a href="openssl.1ssl.html#//apple_ref/doc/man/1/openssl"><u>openssl</u>(1)</a>.

       <b>-chain</b>
           if this option is present then an attempt is made to include the entire certificate chain of the
           user certificate. The standard CA store is used for this search. If the search fails it is
           considered a fatal error.

       <b>-descert</b>
           encrypt the certificate using triple DES, this may render the PKCS#12 file unreadable by some
           "export grade" software. By default the private key is encrypted using triple DES and the
           certificate using 40 bit RC2.

       <b>-keypbe</b> <b>alg</b>, <b>-certpbe</b> <b>alg</b>
           these options allow the algorithm used to encrypt the private key and certificates to be
           selected. Although any PKCS#5 v1.5 or PKCS#12 algorithms can be selected it is advisable only to
           use PKCS#12 algorithms. See the list in the <b>NOTES</b> section for more information.

       <b>-keyex|-keysig</b>
           specifies that the private key is to be used for key exchange or just signing.  This option is
           only interpreted by MSIE and similar MS software. Normally "export grade" software will only
           allow 512 bit RSA keys to be used for encryption purposes but arbitrary length keys for signing.
           The <b>-keysig</b> option marks the key for signing only. Signing only keys can be used for S/MIME
           signing, authenticode (ActiveX control signing)  and SSL client authentication, however due to a
           bug only MSIE 5.0 and later support the use of signing only keys for SSL client authentication.

       <b>-nomaciter</b>, <b>-noiter</b>
           these options affect the iteration counts on the MAC and key algorithms.  Unless you wish to
           produce files compatible with MSIE 4.0 you should leave these options alone.

           To discourage attacks by using large dictionaries of common passwords the algorithm that derives
           keys from passwords can have an iteration count applied to it: this causes a certain part of the
           algorithm to be repeated and slows it down. The MAC is used to check the file integrity but since
           it will normally have the same password as the keys and certificates it could also be attacked.
           By default both MAC and encryption iteration counts are set to 2048, using these options the MAC
           and encryption iteration counts can be set to 1, since this reduces the file security you should
           not use these options unless you really have to. Most software supports both MAC and key
           iteration counts.  MSIE 4.0 doesn't support MAC iteration counts so it needs the <b>-nomaciter</b>
           option.

       <b>-maciter</b>
           This option is included for compatibility with previous versions, it used to be needed to use MAC
           iterations counts but they are now used by default.

       <b>-rand</b> <!-- a --><b>file(s)</b><!-- /a --><b></b>
           a file or files containing random data used to seed the random number generator, or an EGD socket
           (see <a href="../man3/RAND_egd.3ssl.html#//apple_ref/doc/man/3/RAND_egd"><u>RAND</u><b>_</b><u>egd</u>(3)</a>).  Multiple files can be specified separated by a OS-dependent character.  The
           separator is <b>;</b> for MS-Windows, <b>,</b> for OpenVMS, and <b>:</b> for all others.

<b>NOTES</b>
       Although there are a large number of options most of them are very rarely used. For PKCS#12 file
       parsing only <b>-in</b> and <b>-out</b> need to be used for PKCS#12 file creation <b>-export</b> and <b>-name</b> are also used.

       If none of the <b>-clcerts</b>, <b>-cacerts</b> or <b>-nocerts</b> options are present then all certificates will be
       output in the order they appear in the input PKCS#12 files. There is no guarantee that the first
       certificate present is the one corresponding to the private key. Certain software which requires a
       private key and certificate and assumes the first certificate in the file is the one corresponding to
       the private key: this may not always be the case. Using the <b>-clcerts</b> option will solve this problem
       by only outputting the certificate corresponding to the private key. If the CA certificates are
       required then they can be output to a separate file using the <b>-nokeys</b> <b>-cacerts</b> options to just output
       CA certificates.

       The <b>-keypbe</b> and <b>-certpbe</b> algorithms allow the precise encryption algorithms for private keys and
       certificates to be specified. Normally the defaults are fine but occasionally software can't handle
       triple DES encrypted private keys, then the option <b>-keypbe</b> <b>PBE-SHA1-RC2-40</b> can be used to reduce the
       private key encryption to 40 bit RC2. A complete description of all algorithms is contained in the
       <b>pkcs8</b> manual page.

<b>EXAMPLES</b>
       Parse a PKCS#12 file and output it to a file:

        openssl pkcs12 -in file.p12 -out file.pem

       Output only client certificates to a file:

        openssl pkcs12 -in file.p12 -clcerts -out file.pem

       Don't encrypt the private key:

        openssl pkcs12 -in file.p12 -out file.pem -nodes

       Print some info about a PKCS#12 file:

        openssl pkcs12 -in file.p12 -info -noout

       Create a PKCS#12 file:

        openssl pkcs12 -export -in file.pem -out file.p12 -name "My Certificate"

       Include some extra certificates:

        openssl pkcs12 -export -in file.pem -out file.p12 -name "My Certificate" \
         -certfile othercerts.pem

<b>BUGS</b>
       Some would argue that the PKCS#12 standard is one big bug :-)

       Versions of OpenSSL before 0.9.6a had a bug in the PKCS#12 key generation routines. Under rare
       circumstances this could produce a PKCS#12 file encrypted with an invalid key. As a result some
       PKCS#12 files which triggered this bug from other implementations (MSIE or Netscape) could not be
       decrypted by OpenSSL and similarly OpenSSL could produce PKCS#12 files which could not be decrypted
       by other implementations. The chances of producing such a file are relatively small: less than 1 in
       256.

       A side effect of fixing this bug is that any old invalidly encrypted PKCS#12 files cannot no longer
       be parsed by the fixed version. Under such circumstances the <b>pkcs12</b> utility will report that the MAC
       is OK but fail with a decryption error when extracting private keys.

       This problem can be resolved by extracting the private keys and certificates from the PKCS#12 file
       using an older version of OpenSSL and recreating the PKCS#12 file from the keys and certificates
       using a newer version of OpenSSL. For example:

        old-openssl -in bad.p12 -out keycerts.pem
        openssl -in keycerts.pem -export -name "My PKCS#12 file" -out fixed.p12

<b>SEE</b> <b>ALSO</b>
       <a href="pkcs8.1ssl.html#//apple_ref/doc/man/1/pkcs8"><u>pkcs8</u>(1)</a>



0.9.7l                                           2001-09-06                                        PKCS12(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/pkcs12.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/pkcs12.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/pkcs12.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

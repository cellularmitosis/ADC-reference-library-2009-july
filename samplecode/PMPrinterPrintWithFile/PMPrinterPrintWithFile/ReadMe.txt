This sample will send a postscript file that is included in it's bundle to the printer.  We are using the mime type application/postscript, so the printing system will add the PPD feature code as well as other print dialog features such as n-up and handle collated or reverse order output.

Adjusting the values in the Page Setup and the values in the Printing dialog you can affect the printing of the postscript file.

=====================================
If you want to generate the PostScript data for your print job you need submit a fully formed PostScript job using the PMPrinterPrintWithFile function. If indeed you wish to generate the PostScript code for your drawing you need to use the Job Submission API function PMPrinterPrintWithFile to submit PostScript jobs and you have two choices as to how you submit your job:

1) submit fully formed PostScript jobs where your code supplies PPD features and all user features such as n-up, collation, etc. To submit this type of job you would submit your PostScript file as mime type application/vnd.cups-postscript.

2) submit a complete DSC compliant page independent PostScript jobs but without PPD or other feature code embedded. The printing system will add the PPD feature code as well as other print dialog features such as n-up and handle collated or reverse order output. For this behavior, use the mime type type application/postscript. The printing system uses the page format, print settings you provide, in addition to the printer's assigned PPD file, to insert the appropriate PostScript data into the print stream. This is done automatically by the pstops filter that runs as part of printing.

Most developers don't want to do 1) but they instead want to generate the PostScript code for their drawing but without device specific and print dialog features such as n-up, copies, collation, PPD feature code, etc and let the printing system handle the rest.  

To allow the pstops filter to handle your PostScript data properly, you need to generate DSC compliant, page independent PostScript files that contain the prolog data you require and page setup invocations that set up the coordinate system you need for your PostScript drawing. Many developers that have been using the pictwps printing path have over time had to do all kinds of hacks to deal with the PostScript wrapper generated by the printing system. By generating your own fully formed (minus device and user features) PostScript stream you won't have to deal with these kinds of hacks.

The pict-ps printing path was announced as deprecated several years ago. As you can see from the 10.4header files, the PMSessionGetDocumentFormatGeneration was marked deprecated in 10.4. The pict-ps printing path is not available on Intel-based Macintosh clients for print jobs.
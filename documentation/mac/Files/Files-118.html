<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Catalog Information Parameter Blocks (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING118></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-117.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-119.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-72.html"><B>Chapter 2 - File Manager</B></A> / <A HREF="Files-113.html"><B>File Manager Reference</B></A><BR><DL><DD><A HREF="Files-114.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING118-0></A>
<H3><A NAME=MARKER-9-918></A>Catalog Information Parameter Blocks</H3>
 The low-level functions <CODE>PBGetCatInfo</CODE>, <CODE>PBSetCatInfo</CODE>, and <CODE>PBCatSearch</CODE> exchange information with your application using the catalog information parameter block, which is defined by the <CODE>CInfoPBRec</CODE> data type. There are two variants of this record, <CODE>hFileInfo</CODE> and <CODE>dirInfo</CODE>, which describe files and directories, respectively.<A NAME=MARKER-2-919></A><P>
<PRE>
   TYPE CInfoPBRec   =  {catalog information parameter block}
   RECORD
      qLink:            QElemPtr;      {next queue entry}
      qType:            Integer;       {queue type}
      ioTrap:           Integer;       {routine trap}
      ioCmdAddr:        Ptr;           {routine address}
      ioCompletion:     ProcPtr;       {pointer to completion routine}
      ioResult:         OSErr;         {result code}
      ioNamePtr:        StringPtr;     {pointer to pathname}
      ioVRefNum:        Integer;       {volume specification}
      ioFRefNum:        Integer;       {file reference number}
      ioFVersNum:       SignedByte;    {version number}
      filler1:          SignedByte;    {reserved}
      ioFDirIndex:      Integer;       {directory index}
      ioFlAttrib:       SignedByte;    {file or directory attributes}
      ioACUser:         SignedByte;    {directory access rights}
   CASE CInfoType OF
   hFileInfo:
     (ioFlFndrInfo:     FInfo;         {information used by the Finder}
      ioDirID:          LongInt;       {directory ID or file ID}
      ioFlStBlk:        Integer;       {first alloc. blk. of data fork}
      ioFlLgLen:        LongInt;       {logical EOF of data fork}
      ioFlPyLen:        LongInt;       {physical EOF of data fork}
      ioFlRStBlk:       Integer;       {first alloc. blk. of resource fork}
      ioFlRLgLen:       LongInt;       {logical EOF of resource fork}
      ioFlRPyLen:       LongInt;       {physical EOF of resource fork}
      ioFlCrDat:        LongInt;       {date and time of creation}
      ioFlMdDat:        LongInt;       {date and time of last modification}
      ioFlBkDat:        LongInt;       {date and time of last backup}
      ioFlXFndrInfo:    FXInfo;        {additional Finder information}
      ioFlParID:        LongInt;       {file parent directory ID}
      ioFlClpSiz:       LongInt);      {file's clump size}
   dirInfo:
     (ioDrUsrWds:       DInfo;         {information used by the Finder}
      ioDrDirID:        LongInt;       {directory ID}
      ioDrNmFls:        Integer;       {number of files in directory}
      filler3:          ARRAY[1..9] OF Integer;
      ioDrCrDat:        LongInt;       {date and time of creation}
      ioDrMdDat:        LongInt;       {date and time of last modification}
      ioDrBkDat:        LongInt;       {date and time of last backup}
      ioDrFndrInfo:     DXInfo;        {additional Finder information}
      ioDrParID:        LongInt);      {directory's parent directory ID}
   END;
</PRE>
 The first 14 fields are common to both variants. Each variant also includes its own unique fields.<P>
<B>Field descriptions common to both variants</B><P>
<DL>
<DT><CODE>qLink</CODE>
<DD> A pointer to the next entry in the file I/O queue. (This field is used internally by the File Manager to keep track of asynchronous calls awaiting execution.)
<DT><CODE>qType</CODE>
<DD> The queue type. (This field is used internally by the File Manager.)
<DT><CODE>ioTrap</CODE>
<DD> The trap number of the routine that was called. (This field is used internally by the File Manager.)
<DT><CODE>ioCmdAddr</CODE>
<DD> The address of the routine that was called. (This field is used internally by the File Manager.)
<DT><CODE>ioCompletion</CODE>
<DD> A pointer to a completion routine to be executed at the end of an asynchronous call. It should be <CODE>NIL</CODE> for asynchronous calls with no completion routine and is automatically set to <CODE>NIL</CODE> for all synchronous calls. See <A HREF=Files-299.html#MARKER-9-1483>"Completion Routines" on page 2-238</A> for information about completion routines.
<DT><CODE>ioResult</CODE>
<DD> The result code of the function. For synchronous calls, this field is the same as the result code of the function call itself. To determine when an asynchronous call has actually been completed, your application can poll this field; it's set to a positive number when <BR>the call is made and receives the actual result code when the call <BR>is completed.
<DT><CODE>ioNamePtr</CODE>
<DD> A pointer to a pathname. Whenever a routine description specifies that <CODE>ioNamePtr</CODE> is used--whether for input, output, or both--<BR>it's very important that you set this field to point to storage for a <CODE>Str255</CODE> value (if you're using a pathname) or to <CODE>NIL</CODE> (if you're not).
<DT><CODE>ioVRefNum</CODE>
<DD> A volume specification. You can specify a volume using a volume reference number, a drive number, a working directory reference number, or 0 for the default drive.
<DT><CODE><A NAME=MARKER-2-928></A>ioFRefNum</CODE>
<DD> The file reference number of an open file.
<DT><CODE><A NAME=MARKER-2-929></A>ioFVersNum</CODE>
<DD> A file version number. This field is no longer used and you should always set it to 0.
<DT>filler1
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-931></A>ioFDirIndex</CODE>
<DD> A file and directory index. If this field contains a positive number, <CODE>PBGetCatInfo</CODE> returns information about the file or directory having that directory index in the directory specified by the <CODE>ioVRefNum</CODE> field. (If <CODE>ioVRefNum</CODE> contains a volume reference number, the specified directory is that volume's root directory.) 
<DT>
<DD> If this field contains 0, <CODE>PBGetCatInfo</CODE> returns information about the file or directory whose name is specified in the <CODE>ioNamePtr</CODE> field and that is located in the directory specified by the <CODE>ioVRefNum</CODE> field. (Once again, if <CODE>ioVRefNum</CODE> contains a volume reference number, the specified directory is that volume's root directory.)
<DT>
<DD> If this field contains a negative number, <CODE>PBGetCatInfo</CODE> ignores the <CODE>ioNamePtr</CODE> field and returns information about the directory specified in the <CODE>ioDirID</CODE> field. If both <CODE>ioDirID</CODE> and <CODE>ioVRefNum</CODE> are set to 0, <CODE>PBGetCatInfo</CODE> returns information about the current default directory.
<DT><CODE><A NAME=MARKER-2-932></A>ioFlAttrib</CODE>
<DD> File or directory attributes. For files, the bits in this field have the following meanings:<CODE>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Bit<TH>Meaning<TR>
<TD>&nbsp;<TD>0<TD>Set if file is locked<TR>
<TD>&nbsp;<TD>1<TD>Reserved<TR>
<TD>&nbsp;<TD>2<TD>Set if resource fork is open<TR>
<TD>&nbsp;<TD>3<TD>Set if data fork is open<TR>
<TD>&nbsp;<TD>4<TD>Set if a directory<TR>
<TD>&nbsp;<TD>5-6<TD>Reserved<TR>
<TD>&nbsp;<TD>7<TD>Set if file (either fork) is open</TABLE>
</CODE>
<DT><CODE></CODE>
<DD> For directories, the bits in this field have the following meanings:<CODE>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Bit<TH>Meaning<TR>
<TD>&nbsp;<TD>0<TD>Set if the directory is locked<TR>
<TD>&nbsp;<TD>1<TD>Reserved<TR>
<TD>&nbsp;<TD>2<TD>Set if the directory is within a shared area of the directory hierarchy<TR>
<TD>&nbsp;<TD>3<TD>Set if the directory is a share point that is mounted by some user<TR>
<TD>&nbsp;<TD>4<TD>Set if the item is a directory<TR>
<TD>&nbsp;<TD>5<TD>Set if the directory is a share point<TR>
<TD>&nbsp;<TD>6-7<TD>Reserved</TABLE>
</CODE>
<DT><CODE><A NAME=MARKER-2-933></A>ioACUser</CODE>
<DD> The user's access rights for the specified directory. The bits in this field have the following meanings:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Bit<TH>Meaning<TR>
<TD>&nbsp;<TD>0<TD>Set if user does not have See Folder privileges<TR>
<TD>&nbsp;<TD>1<TD>Set if user does not have See Files privileges<TR>
<TD>&nbsp;<TD>2<TD>Set if user does not have Make Changes privileges<TR>
<TD>&nbsp;<TD>3-6<TD>Reserved; always set to 0<TR>
<TD>&nbsp;<TD>7<TD>Set if user is not owner of the directory</TABLE>

<DT>
<DD> For example, if you call <CODE>PBGetCatInfo</CODE> for a particular shared volume and <CODE>ioACUser</CODE> returns 0, you know that the user is the owner of the directory and has complete privileges to it.
</DL>
<B>Field descriptions for the <CODE>hFileInfo</CODE> variant</B><P>
<DL>
<DT><CODE><A NAME=MARKER-2-934></A>ioFlFndrInfo</CODE>
<DD> Information used by the Finder.
<DT><CODE>ioDirID</CODE>
<DD> A directory ID or file ID. On input to <CODE>PBGetCatInfo</CODE>, this field contains a directory ID (which is used only if the <CODE>ioFDirIndex</CODE> field is negative). On output, this field contains the file ID of the specified file.
<DT><CODE><A NAME=MARKER-2-936></A>ioFlStBlk</CODE>
<DD> The first allocation block of the data fork. This field contains 0 if the file's data fork is empty.
<DT><CODE><A NAME=MARKER-2-937></A>ioFlLgLen</CODE>
<DD> The logical end-of-file of the data fork.
<DT><CODE><A NAME=MARKER-2-938></A>ioFlPyLen</CODE>
<DD> The physical end-of-file of the data fork.
<DT><CODE><A NAME=MARKER-2-939></A>ioFlRStBlk</CODE>
<DD> The first allocation block of the resource fork.
<DT><CODE><A NAME=MARKER-2-940></A>ioFlRLgLen</CODE>
<DD> The logical end-of-file of the resource fork.
<DT><CODE><A NAME=MARKER-2-941></A>ioFlRPyLen</CODE>
<DD> The physical end-of-file of the resource fork.
<DT><CODE><A NAME=MARKER-2-942></A>ioFlCrDat</CODE>
<DD> The date and time of the file's creation, specified in seconds since midnight, January 1, 1904.
<DT><CODE><A NAME=MARKER-2-943></A>ioFlMdDat</CODE>
<DD> The date and time of the last modification to the file, specified in seconds since midnight, January 1, 1904.
<DT><CODE><A NAME=MARKER-2-944></A>ioFlBkDat</CODE>
<DD> The date and time of the last backup to the file, specified in seconds since midnight, January 1, 1904.
<DT><CODE><A NAME=MARKER-2-945></A>ioFlXFndrInfo</CODE>
<DD> Additional information used by the Finder. (See the chapter <BR>"Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for details.)
<DT><CODE><A NAME=MARKER-2-946></A>ioFlParID</CODE>
<DD> The directory ID of the file's parent.
<DT><CODE><A NAME=MARKER-2-947></A>ioFlClpSiz</CODE>
<DD> The clump size to be used when writing the file; if it's 0, the volume's clump size is used when the file is opened. 
</DL>
<B>Field descriptions for the <CODE>dirInfo</CODE> variant</B><P>
<DL>
<DT><CODE><A NAME=MARKER-2-948></A>ioDrUsrWds</CODE>
<DD> Information used by the Finder.
<DT><CODE><A NAME=MARKER-2-949></A>ioDrDirID</CODE>
<DD> A directory ID. On input to <CODE>PBGetCatInfo</CODE>, this field contains a directory ID (which is used only if the value of the <CODE>ioFDirIndex</CODE> field is negative). On output, this field contains the directory ID of the specified directory.
<DT><CODE><A NAME=MARKER-2-950></A>ioDrNmFls</CODE>
<DD> The number of files in the directory.
<DT><CODE>filler3</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-952></A>ioDrCrDat</CODE>
<DD> The date and time of the directory's creation, specified in seconds since midnight, January 1, 1904.
<DT><CODE><A NAME=MARKER-2-953></A>ioDrMdDat</CODE>
<DD> The date and time of the last modification to the directory, specified in seconds since midnight, January 1, 1904.
<DT><CODE><A NAME=MARKER-2-954></A>ioDrBkDat</CODE>
<DD> The date and time of the last backup to the directory, specified in seconds since midnight, January 1, 1904.
<DT><CODE><A NAME=MARKER-2-955></A>ioDrFndrInfo</CODE>
<DD> Additional information used by the Finder.
<DT><CODE><A NAME=MARKER-2-956></A>ioDrParID</CODE>
<DD> The directory ID of the specified directory's parent.<A NAME=MARKER-2-957></A><A NAME=MARKER-2-958></A>
</DL>
<HR>
<center>
<A HREF="Files-117.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-119.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

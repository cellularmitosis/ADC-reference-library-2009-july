<html><head><title>Mac OS X
 Manual Page For transport(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/transport" title="Mac OS X
 Manual Page for transport(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/transport"; name=transport(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
TRANSPORT(5)                                                                                    TRANSPORT(5)



<b>NAME</b>
       transport - Postfix transport table format

<b>SYNOPSIS</b>
       <b>postmap</b> <b>/etc/postfix/transport</b>

       <b>postmap</b> <b>-q</b> <b>"</b><u>string</u><b>"</b> <b>/etc/postfix/transport</b>

       <b>postmap</b> <b>-q</b> <b>-</b> <b>/etc/postfix/transport</b> <b>&lt;</b><u>inputfile</u>

<b>DESCRIPTION</b>
       The  optional  <b>transport</b>(5) table specifies a mapping from email addresses to message delivery trans-
       ports and next-hop destinations.  Message delivery transports such as <b>local</b> or <b>smtp</b>  are  defined  in
       the  <b>master.cf</b>  file,  and  next-hop  destinations  are typically hosts or domain names. The table is
       searched by the <a href="../man8/trivial-rewrite.8.html#//apple_ref/doc/man/8/trivial-rewrite"><b>trivial-rewrite</b>(8)</a> daemon.

       This mapping overrides the default <u>transport</u>:<u>nexthop</u> selection that is built into Postfix:

       <b>local_transport</b> <b>(default:</b> <b>local:$myhostname)</b>
              This is the default for final delivery to domains listed with <b>mydestination</b>,  and  for  [<u>ipad</u>-<font color="#ffffff" class="whiteout">dress]&nbsp;[ipaddress]</font>
              <u>dress</u>] destinations that match <b>$inet_interfaces</b> or <b>$proxy_interfaces</b>. The default <u>nexthop</u> des-<font color="#ffffff" class="whiteout">tination&nbsp;destination</font>
              tination is the MTA hostname.

       <b>virtual_transport</b> <b>(default:</b> <b>virtual:)</b>
              This is the default for final delivery to domains  listed  with  <b>virtual_mailbox_domains</b>.  The
              default <u>nexthop</u> destination is the recipient domain.

       <b>relay_transport</b> <b>(default:</b> <b>relay:)</b>
              This  is  the  default  for  remote delivery to domains listed with <b>relay_domains</b>. In order of
              decreasing precedence, the <u>nexthop</u> destination is taken  from  <b>relay_transport</b>,  <b>sender_depen</b>-<font color="#ffffff" class="whiteout">dent_relayhost_maps,&nbsp;sender_dependent_relayhost_maps,</font>
              <b>dent_relayhost_maps</b>, <b>relayhost</b>, or from the recipient domain.

       <b>default_transport</b> <b>(default:</b> <b>smtp:)</b>
              This  is the default for remote delivery to other destinations.  In order of decreasing prece-<font color="#ffffff" class="whiteout">dence,&nbsp;precedence,</font>
              dence, the  <u>nexthop</u>  destination  is  taken  from  <b>default_transport</b>,  <b>sender_dependent_relay</b>-<font color="#ffffff" class="whiteout">host_maps,&nbsp;sender_dependent_relayhost_maps,</font>
              <b>host_maps</b>, <b>relayhost</b>, or from the recipient domain.

       Normally,  the  <b>transport</b>(5) table is specified as a text file that serves as input to the <a href="../man1/postmap.1.html#//apple_ref/doc/man/1/postmap"><b>postmap</b>(1)</a>
       command.  The result, an indexed file in <b>dbm</b> or <b>db</b> format, is used for fast  searching  by  the  mail
       system.  Execute the command "<b>postmap</b> <b>/etc/postfix/transport</b>" to rebuild an indexed file after chang-<font color="#ffffff" class="whiteout">ing&nbsp;changing</font>
       ing the corresponding transport table.

       When the table is provided via other means such as NIS, LDAP or SQL, the same lookups are done as for
       ordinary indexed files.

       Alternatively, the table can be provided as a regular-expression map where patterns are given as reg-<font color="#ffffff" class="whiteout">ular&nbsp;regular</font>
       ular expressions, or lookups can be directed to TCP-based server. In those case, the lookups are done
       in  a  slightly  different  way  as  described  below under "REGULAR EXPRESSION TABLES" or "TCP-BASED
       TABLES".

<b>CASE</b> <b>FOLDING</b>
       The search string is folded to lowercase before database lookup. As of Postfix 2.3, the search string
       is  not  case  folded with database types such as regexp: or pcre: whose lookup fields can match both
       upper and lower case.

<b>TABLE</b> <b>FORMAT</b>
       The input format for the <a href="../man1/postmap.1.html#//apple_ref/doc/man/1/postmap"><b>postmap</b>(1)</a> command is as follows:

       <u>pattern</u> <u>result</u>
              When <u>pattern</u> matches the recipient address or domain, use the corresponding <u>result</u>.

       blank lines and comments
              Empty lines and whitespace-only lines are ignored, as are  lines  whose  first  non-whitespace
              character is a `#'.

       multi-line text
              A logical line starts with non-whitespace text. A line that starts with whitespace continues a
              logical line.

       The <u>pattern</u> specifies an email address, a domain name, or a domain name hierarchy,  as  described  in
       section "TABLE LOOKUP".

       The  <u>result</u>  is  of  the  form  <u>transport:nexthop</u> and specifies how or where to deliver mail. This is
       described in section "RESULT FORMAT".

<b>TABLE</b> <b>SEARCH</b> <b>ORDER</b>
       With lookups from indexed files such as DB or DBM, or from networked tables such as NIS, LDAP or SQL,
       patterns are tried in the order as listed below:

       <u>user+extension@domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver mail for <u>user+extension@domain</u> through <u>transport</u> to <u>nexthop</u>.

       <u>user@domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver mail for <u>user@domain</u> through <u>transport</u> to <u>nexthop</u>.

       <u>domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver mail for <u>domain</u> through <u>transport</u> to <u>nexthop</u>.

       <u>.domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver  mail for any subdomain of <u>domain</u> through <u>transport</u> to <u>nexthop</u>. This applies only when
              the string <b>transport_maps</b> is not listed in the <b>parent_domain_matches_subdomains</b>  configuration
              setting.  Otherwise, a domain name matches itself and its subdomains.

       Note 1: the special pattern <b>*</b> represents any address (i.e. it functions as the wild-card pattern).

       Note  2:  the  null  recipient address is looked up as <b>$empty_address_recipient</b>@<b>$myhostname</b> (default:
       mailer-daemon@hostname).

       Note 3: <u>user@domain</u> or <u>user+extension@domain</u> lookup is available in Postfix 2.0 and later.

<b>RESULT</b> <b>FORMAT</b>
       The lookup result is of the form <u>transport</u><b>:</b><u>nexthop</u>.  The <u>transport</u> field specifies  a  mail  delivery
       transport such as <b>smtp</b> or <b>local</b>. The <u>nexthop</u> field specifies where and how to deliver mail.

       The  transport field specifies the name of a mail delivery transport (the first name of a mail deliv-<font color="#ffffff" class="whiteout">ery&nbsp;delivery</font>
       ery service entry in the Postfix <b>master.cf</b> file).

       The interpretation of the nexthop field is transport dependent. In the case of SMTP, specify  a  ser-<font color="#ffffff" class="whiteout">vice&nbsp;service</font>
       vice  on  a non-default port as <u>host</u>:<u>service</u>, and disable MX (mail exchanger) DNS lookups with [<u>host</u>]
       or [<u>host</u>]:<u>port</u>. The [] form is required when you specify an IP address instead of a hostname.

       A null <u>transport</u> and null <u>nexthop</u> result means "do not change": use the delivery transport  and  nex-<font color="#ffffff" class="whiteout">thop&nbsp;nexthop</font>
       thop information that would be used when the entire transport table did not exist.

       A  non-null <u>transport</u> field with a null <u>nexthop</u> field resets the nexthop information to the recipient
       domain.

       A null <u>transport</u> field with non-null <u>nexthop</u> field does not modify the transport information.

<b>EXAMPLES</b>
       In order to deliver internal mail directly, while using a mail relay for all other  mail,  specify  a
       null  entry  for  internal destinations (do not change the delivery transport or the nexthop informa-<font color="#ffffff" class="whiteout">tion)&nbsp;information)</font>
       tion) and specify a wildcard for all other destinations.

            <b>my.domain</b>    <b>:</b>
            <b>.my.domain</b>   <b>:</b>
            <b>*</b>            <b>smtp:outbound-relay.my.domain</b>

       In order to send mail for <b>example.com</b> and its subdomains via the <b>uucp</b>  transport  to  the  UUCP  host
       named <b>example</b>:

            <b>example.com</b>      <b>uucp:example</b>
            <b>.example.com</b>     <b>uucp:example</b>

       When no nexthop host name is specified, the destination domain name is used instead. For example, the
       following directs mail for <u>user</u>@<b>example.com</b> via the <b>slow</b> transport to  a  mail  exchanger  for  <b>exam</b>-<font color="#ffffff" class="whiteout">ple.com.&nbsp;example.com.</font>
       <b>ple.com</b>.  The <b>slow</b> transport could be configured to run at most one delivery process at a time:

            <b>example.com</b>      <b>slow:</b>

       When no transport is specified, Postfix uses the transport that matches the address domain class (see
       DESCRIPTION above).  The following sends all mail for <b>example.com</b> and its subdomains  to  host  <b>gate</b>-<font color="#ffffff" class="whiteout">way.example.com:&nbsp;gateway.example.com:</font>
       <b>way.example.com</b>:

            <b>example.com</b>      <b>:[gateway.example.com]</b>
            <b>.example.com</b>     <b>:[gateway.example.com]</b>

       In the above example, the [] suppress MX lookups.  This prevents mail routing loops when your machine
       is primary MX host for <b>example.com</b>.

       In the case of delivery via SMTP, one may specify <u>hostname</u>:<u>service</u> instead of just a host:

            <b>example.com</b>      <b>smtp:bar.example:2025</b>

       This directs mail for <u>user</u>@<b>example.com</b> to host <b>bar.example</b> port <b>2025</b>. Instead of a numerical  port  a
       symbolic name may be used. Specify [] around the hostname if MX lookups must be disabled.

       The error mailer can be used to bounce mail:

            <b>.example.com</b>     <b>error:mail</b> <b>for</b> <b>*.example.com</b> <b>is</b> <b>not</b> <b>deliverable</b>

       This causes all mail for <u>user</u>@<u>anything</u><b>.example.com</b> to be bounced.

<b>REGULAR</b> <b>EXPRESSION</b> <b>TABLES</b>
       This  section  describes  how the table lookups change when the table is given in the form of regular
       expressions. For a description of regular expression lookup  table  syntax,  see  <a href="regexp_table.5.html#//apple_ref/doc/man/5/regexp_table"><b>regexp_table</b>(5)</a>  or
       <a href="pcre_table.5.html#//apple_ref/doc/man/5/pcre_table"><b>pcre_table</b>(5)</a>.

       Each  pattern  is  a  regular expression that is applied to the entire address being looked up. Thus,
       <u>some.domain.hierarchy</u> is not looked up via its parent domains, nor is <u>user+foo@domain</u>  looked  up  as
       <u>user@domain</u>.

       Patterns  are  applied  in the order as specified in the table, until a pattern is found that matches
       the search string.

       The <a href="../man8/trivial-rewrite.8.html#//apple_ref/doc/man/8/trivial-rewrite"><b>trivial-rewrite</b>(8)</a> server disallows regular expression substitution of $1 etc. in regular expres-<font color="#ffffff" class="whiteout">sion&nbsp;expression</font>
       sion lookup tables, because that could open a security hole (Postfix version 2.3 and later).

<b>TCP-BASED</b> <b>TABLES</b>
       This  section describes how the table lookups change when lookups are directed to a TCP-based server.
       For a description of the TCP client/server lookup protocol, see <a href="tcp_table.5.html#//apple_ref/doc/man/5/tcp_table"><b>tcp_table</b>(5)</a>.  This  feature  is  not
       available up to and including Postfix version 2.4.

       Each  lookup  operation  uses  the entire recipient address once.  Thus, <u>some.domain.hierarchy</u> is not
       looked up via its parent domains, nor is <u>user+foo@domain</u> looked up as <u>user@domain</u>.

       Results are the same as with indexed file lookups.

<b>CONFIGURATION</b> <b>PARAMETERS</b>
       The following <b>main.cf</b> parameters are especially relevant.  The text below provides only  a  parameter
       summary. See <a href="postconf.5.html#//apple_ref/doc/man/5/postconf"><b>postconf</b>(5)</a> for more details including examples.

       <b>empty_address_recipient</b>
              The address that is looked up instead of the null sender address.

       <b>parent_domain_matches_subdomains</b>
              List  of  Postfix features that use <u>domain.tld</u> patterns to match <u>sub.domain.tld</u> (as opposed to
              requiring <u>.domain.tld</u> patterns).

       <b>transport_maps</b>
              List of transport lookup tables.

<b>SEE</b> <b>ALSO</b>
       <a href="../man8/trivial-rewrite.8.html#//apple_ref/doc/man/8/trivial-rewrite">trivial-rewrite(8)</a>, rewrite and resolve addresses
       <a href="postconf.5.html#//apple_ref/doc/man/5/postconf">postconf(5)</a>, configuration parameters
       <a href="../man1/postmap.1.html#//apple_ref/doc/man/1/postmap">postmap(1)</a>, Postfix lookup table manager

<b>README</b> <b>FILES</b>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       ADDRESS_REWRITING_README, address rewriting guide
       DATABASE_README, Postfix lookup table overview
       FILTER_README, external content filter

<b>LICENSE</b>
       The Secure Mailer license must be distributed with this software.

<b>AUTHOR(S)</b>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA



                                                                                                TRANSPORT(5)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/transport.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/transport.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/transport.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head><title>Mac OS X
 Manual Page For bunzip2(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/bunzip2" title="Mac OS X
 Manual Page for bunzip2(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/bunzip2"; name=bunzip2(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
bzip2(1)                                                                                            <a href="bzip2.1.html#//apple_ref/doc/man/1/bzip2">bzip2(1)</a>



<b>NAME</b>
       bzip2, bunzip2 - a block-sorting file compressor, v1.0.4
       bzcat - decompresses files to stdout
       bzip2recover - recovers data from damaged bzip2 files


<b>SYNOPSIS</b>
       <b>bzip2</b> [ <b>-cdfkqstvzVL123456789</b> ] [ <u>filenames</u> <u>...</u>  ]
       <b>bunzip2</b> [ <b>-fkvsVL</b> ] [ <u>filenames</u> <u>...</u>  ]
       <b>bzcat</b> [ <b>-s</b> ] [ <u>filenames</u> <u>...</u>  ]
       <b>bzip2recover</b> <u>filename</u>


<b>DESCRIPTION</b>
       <u>bzip2</u>  compresses files using the Burrows-Wheeler block sorting text compression algorithm, and Huff-<font color="#ffffff" class="whiteout">man&nbsp;Huffman</font>
       man coding.  Compression is generally considerably better than that  achieved  by  more  conventional
       LZ77/LZ78-based compressors, and approaches the performance of the PPM family of statistical compres-<font color="#ffffff" class="whiteout">sors.&nbsp;compressors.</font>
       sors.

       The command-line options are deliberately very similar to those of <u>GNU</u> <u>gzip,</u> but they are not identi-<font color="#ffffff" class="whiteout">cal.&nbsp;identical.</font>
       cal.

       <u>bzip2</u>  expects  a list of file names to accompany the command-line flags.  Each file is replaced by a
       compressed version of itself, with the name "original_name.bz2".  Each compressed file has  the  same
       modification  date, permissions, and, when possible, ownership as the corresponding original, so that
       these properties can be correctly restored at decompression time.  File name handling is naive in the
       sense that there is no mechanism for preserving original file names, permissions, ownerships or dates
       in filesystems which lack these concepts, or have serious file name length restrictions, such as  MS-<font color="#ffffff" class="whiteout">DOS.&nbsp;MSDOS.</font>
       DOS.

       <u>bzip2</u>  and <u>bunzip2</u> will by default not overwrite existing files.  If you want this to happen, specify
       the -f flag.

       If no file names are specified, <u>bzip2</u> compresses from standard input to  standard  output.   In  this
       case,  <u>bzip2</u>  will decline to write compressed output to a terminal, as this would be entirely incom-<font color="#ffffff" class="whiteout">prehensible&nbsp;incomprehensible</font>
       prehensible and therefore pointless.

       <u>bunzip2</u> (or <u>bzip2</u> <u>-d)</u> decompresses all specified files.  Files which were not created by  <u>bzip2</u>  will
       be  detected  and ignored, and a warning issued.  <u>bzip2</u> attempts to guess the filename for the decom-<font color="#ffffff" class="whiteout">pressed&nbsp;decompressed</font>
       pressed file from that of the compressed file as follows:

              filename.bz2    becomes   filename
              filename.bz     becomes   filename
              filename.tbz2   becomes   filename.tar
              filename.tbz    becomes   filename.tar
              anyothername    becomes   anyothername.out

       If the file does not end in one of the recognised endings, <u>.bz2,</u> <u>.bz,</u> <u>.tbz2</u> or <u>.tbz,</u> <u>bzip2</u>  complains
       that it cannot guess the name of the original file, and uses the original name with <u>.out</u> appended.

       As with compression, supplying no filenames causes decompression from standard input to standard out-<font color="#ffffff" class="whiteout">put.&nbsp;output.</font>
       put.

       <u>bunzip2</u> will correctly decompress a file which is the concatenation of two or more compressed  files.
       The  result  is the concatenation of the corresponding uncompressed files.  Integrity testing (-t) of
       concatenated compressed files is also supported.

       You can also compress or decompress files to the standard output by giving  the  -c  flag.   Multiple
       files  may  be  compressed and decompressed like this.  The resulting outputs are fed sequentially to
       stdout.  Compression of multiple files in this manner generates a  stream  containing  multiple  com-<font color="#ffffff" class="whiteout">pressed&nbsp;compressed</font>
       pressed  file  representations.   Such  a  stream can be decompressed correctly only by <u>bzip2</u> version
       0.9.0 or later.  Earlier versions of <u>bzip2</u> will stop  after  decompressing  the  first  file  in  the
       stream.

       <u>bzcat</u> (or <u>bzip2</u> <u>-dc)</u> decompresses all specified files to the standard output.

       <u>bzip2</u>  will  read  arguments  from  the environment variables <u>BZIP2</u> and <u>BZIP,</u> in that order, and will
       process them before any arguments read from the command line.  This gives a convenient way to  supply
       default arguments.

       Compression  is  always  performed, even if the compressed file is slightly larger than the original.
       Files of less than about one hundred bytes tend to get larger, since the compression mechanism has  a
       constant overhead in the region of 50 bytes.  Random data (including the output of most file compres-<font color="#ffffff" class="whiteout">sors)&nbsp;compressors)</font>
       sors) is coded at about 8.05 bits per byte, giving an expansion of around 0.5%.

       As a self-check for your protection, <u>bzip2</u> uses 32-bit CRCs to make sure that the  decompressed  ver-<font color="#ffffff" class="whiteout">sion&nbsp;version</font>
       sion  of a file is identical to the original.  This guards against corruption of the compressed data,
       and against undetected bugs in <u>bzip2</u> (hopefully very unlikely).  The chances of data corruption going
       undetected  is  microscopic,  about  one  chance  in four billion for each file processed.  Be aware,
       though, that the check occurs upon decompression, so it can only tell you that  something  is  wrong.
       It can't help you recover the original uncompressed data.  You can use <u>bzip2recover</u> to try to recover
       data from damaged files.

       Return values: 0 for a normal exit, 1 for environmental problems (file not found, invalid flags,  I/O
       errors,  &amp;c),  2 to indicate a corrupt compressed file, 3 for an internal consistency error (eg, bug)
       which caused <u>bzip2</u> to panic.


<b>OPTIONS</b>
       <b>-c</b> <b>--stdout</b>
              Compress or decompress to standard output.

       <b>-d</b> <b>--decompress</b>
              Force decompression.  <u>bzip2,</u> <u>bunzip2</u> and <u>bzcat</u> are really the same program, and  the  decision
              about  what  actions  to take is done on the basis of which name is used.  This flag overrides
              that mechanism, and forces <u>bzip2</u> to decompress.

       <b>-z</b> <b>--compress</b>
              The complement to -d: forces compression, regardless of the invocation name.

       <b>-t</b> <b>--test</b>
              Check integrity of the specified <!-- a -->file(s)<!-- /a -->, but don't decompress them.  This really  performs  a
              trial decompression and throws away the result.

       <b>-f</b> <b>--force</b>
              Force  overwrite  of  output files.  Normally, <u>bzip2</u> will not overwrite existing output files.
              Also forces <u>bzip2</u> to break hard links to files, which it otherwise wouldn't do.

              bzip2 normally declines to decompress files which don't have the correct magic  header  bytes.
              If  forced  (-f),  however,  it will pass such files through unmodified.  This is how GNU gzip
              behaves.

       <b>-k</b> <b>--keep</b>
              Keep (don't delete) input files during compression or decompression.

       <b>-s</b> <b>--small</b>
              Reduce memory usage, for compression, decompression and testing.  Files are  decompressed  and
              tested  using  a  modified algorithm which only requires 2.5 bytes per block byte.  This means
              any file can be decompressed in 2300k of memory, albeit at about half the normal speed.

              During compression, -s selects a block size of 200k, which limits memory  use  to  around  the
              same  figure,  at  the expense of your compression ratio.  In short, if your machine is low on
              memory (8 megabytes or less), use -s for everything.  See MEMORY MANAGEMENT below.

       <b>-q</b> <b>--quiet</b>
              Suppress non-essential warning messages.  Messages pertaining to I/O errors and other critical
              events will not be suppressed.

       <b>-v</b> <b>--verbose</b>
              Verbose mode -- show the compression ratio for each file processed.  Further -v's increase the
              verbosity level, spewing out lots of information which is primarily of interest for diagnostic
              purposes.

       <b>-L</b> <b>--license</b> <b>-V</b> <b>--version</b>
              Display the software version, license terms and conditions.

       <b>-1</b> <b>(or</b> <b>--fast)</b> <b>to</b> <b>-9</b> <b>(or</b> <b>--best)</b>
              Set the block size to 100 k, 200 k ..  900 k when compressing.  Has no effect when decompress-<font color="#ffffff" class="whiteout">ing.&nbsp;decompressing.</font>
              ing.  See MEMORY MANAGEMENT below.  The --fast and --best aliases are primarily for  GNU  gzip
              compatibility.   In  particular,  --fast doesn't make things significantly faster.  And --best
              merely selects the default behaviour.

       <b>--</b>     Treats all subsequent arguments as file names, even if they start with a dash.  This is so you
              can handle files with names beginning with a dash, for example: bzip2 -- -myfilename.

       <b>--repetitive-fast</b> <b>--repetitive-best</b>
              These flags are redundant in versions 0.9.5 and above.  They provided some coarse control over
              the behaviour of the sorting algorithm in earlier versions, which was sometimes useful.  0.9.5
              and above have an improved algorithm which renders these flags irrelevant.


<b>MEMORY</b> <b>MANAGEMENT</b>
       <u>bzip2</u>  compresses large files in blocks.  The block size affects both the compression ratio achieved,
       and the amount of memory needed for compression and decompression.  The flags -1 through  -9  specify
       the  block  size to be 100,000 bytes through 900,000 bytes (the default) respectively.  At decompres-<font color="#ffffff" class="whiteout">sion&nbsp;decompression</font>
       sion time, the block size used for compression is read from the header of the  compressed  file,  and
       <u>bunzip2</u>  then  allocates  itself  just  enough  memory to decompress the file.  Since block sizes are
       stored in compressed files, it follows that the flags -1 to -9 are irrelevant to and so ignored  dur-<font color="#ffffff" class="whiteout">ing&nbsp;during</font>
       ing decompression.

       Compression and decompression requirements, in bytes, can be estimated as:

              Compression:   400k + ( 8 x block size )

              Decompression: 100k + ( 4 x block size ), or
                             100k + ( 2.5 x block size )

       Larger block sizes give rapidly diminishing marginal returns.  Most of the compression comes from the
       first two or three hundred k of block size, a fact worth bearing in mind when using  <u>bzip2</u>  on  small
       machines.   It  is  also  important to appreciate that the decompression memory requirement is set at
       compression time by the choice of block size.

       For files compressed with the default 900k block size, <u>bunzip2</u> will  require  about  3700  kbytes  to
       decompress.   To  support decompression of any file on a 4 megabyte machine, <u>bunzip2</u> has an option to
       decompress using approximately half this amount of memory, about 2300 kbytes.  Decompression speed is
       also halved, so you should use this option only where necessary.  The relevant flag is -s.

       In  general,  try  and  use the largest block size memory constraints allow, since that maximises the
       compression achieved.  Compression and decompression speed are virtually unaffected by block size.

       Another significant point applies to files which fit in a single block -- that means most files you'd
       encounter using a large block size.  The amount of real memory touched is proportional to the size of
       the file, since the file is smaller than a block.  For example, compressing a file 20,000 bytes  long
       with  the flag -9 will cause the compressor to allocate around 7600k of memory, but only touch 400k +
       20000 * 8 = 560 kbytes of it.  Similarly, the decompressor will allocate 3700k but only touch 100k  +
       20000 * 4 = 180 kbytes.

       Here  is  a table which summarises the maximum memory usage for different block sizes.  Also recorded
       is the total compressed size for 14 files of the Calgary Text Compression Corpus totalling  3,141,622
       bytes.   This  column gives some feel for how compression varies with block size.  These figures tend
       to understate the advantage of larger block sizes for larger files, since the Corpus is dominated  by
       smaller files.

                  Compress   Decompress   Decompress   Corpus
           Flag     usage      usage       -s usage     Size

            -1      1200k       500k         350k      914704
            -2      2000k       900k         600k      877703
            -3      2800k      1300k         850k      860338
            -4      3600k      1700k        1100k      846899
            -5      4400k      2100k        1350k      845160
            -6      5200k      2500k        1600k      838626
            -7      6100k      2900k        1850k      834096
            -8      6800k      3300k        2100k      828642
            -9      7600k      3700k        2350k      828642


<b>RECOVERING</b> <b>DATA</b> <b>FROM</b> <b>DAMAGED</b> <b>FILES</b>
       <u>bzip2</u> compresses files in blocks, usually 900kbytes long.  Each block is handled independently.  If a
       media or transmission error causes a multi-block .bz2 file to become damaged, it may be  possible  to
       recover data from the undamaged blocks in the file.

       The compressed representation of each block is delimited by a 48-bit pattern, which makes it possible
       to find the block boundaries with reasonable certainty.  Each block also carries its own 32-bit  CRC,
       so damaged blocks can be distinguished from undamaged ones.

       <u>bzip2recover</u>  is a simple program whose purpose is to search for blocks in .bz2 files, and write each
       block out into its own .bz2 file.  You can then use <u>bzip2</u> -t to test the integrity of  the  resulting
       files, and decompress those which are undamaged.

       <u>bzip2recover</u>  takes  a  single  argument,  the name of the damaged file, and writes a number of files
       "rec00001file.bz2", "rec00002file.bz2", etc, containing the  extracted  blocks.  The   output   file-<font color="#ffffff" class="whiteout">names&nbsp;filenames</font>
       names   are   designed  so  that the use of wildcards in subsequent processing -- for example, "bzip2
       -dc  rec*file.bz2 &gt; recovered_data" -- processes the files in the correct order.

       <u>bzip2recover</u> should be of most use dealing with large  .bz2  files,   as   these  will  contain  many
       blocks.   It  is  clearly  futile  to use it on damaged single-block  files,  since  a damaged  block
       cannot  be recovered.  If you wish to minimise any potential data loss through media   or   transmis-<font color="#ffffff" class="whiteout">sion&nbsp;transmission</font>
       sion errors, you might consider compressing with a smaller block size.


<b>PERFORMANCE</b> <b>NOTES</b>
       The  sorting  phase  of  compression  gathers together similar strings in the file.  Because of this,
       files containing very long runs of repeated symbols, like "aabaabaabaab ..."  (repeated several  hun-<font color="#ffffff" class="whiteout">dred&nbsp;hundred</font>
       dred  times)  may  compress  more slowly than normal.  Versions 0.9.5 and above fare much better than
       previous versions in this respect.  The ratio between worst-case and average-case compression time is
       in  the  region  of  10:1.   For previous versions, this figure was more like 100:1.  You can use the
       -vvvv option to monitor progress in great detail, if you want.

       Decompression speed is unaffected by these phenomena.

       <u>bzip2</u> usually allocates several megabytes of memory to operate in, and then charges all over it in  a
       fairly  random  fashion.   This  means  that  performance, both for compressing and decompressing, is
       largely determined by the speed at which your machine can service cache  misses.   Because  of  this,
       small changes to the code to reduce the miss rate have been observed to give disproportionately large
       performance improvements.  I imagine <u>bzip2</u> will perform best on machines with very large caches.


<b>CAVEATS</b>
       I/O error messages are not as helpful as they could be.  <u>bzip2</u> tries hard to detect  I/O  errors  and
       exit cleanly, but the details of what the problem is sometimes seem rather misleading.

       This  manual  page  pertains  to  version 1.0.4 of <u>bzip2.</u>  Compressed data created by this version is
       entirely forwards and backwards compatible with the previous public releases, versions 0.1pl2, 0.9.0,
       0.9.5, 1.0.0, 1.0.1, 1.0.2 and 1.0.3, but with the following exception: 0.9.0 and above can correctly
       decompress multiple concatenated compressed files.  0.1pl2 cannot do this; it will stop after  decom-<font color="#ffffff" class="whiteout">pressing&nbsp;decompressing</font>
       pressing just the first file in the stream.

       <u>bzip2recover</u>  versions  prior  to 1.0.2 used 32-bit integers to represent bit positions in compressed
       files, so they could not handle compressed files more than 512 megabytes long.   Versions  1.0.2  and
       above  use 64-bit ints on some platforms which support them (GNU supported targets, and Windows).  To
       establish whether or not bzip2recover was built with such a limitation, run it without arguments.  In
       any event you can build yourself an unlimited version if you can recompile it with MaybeUInt64 set to
       be an unsigned 64-bit integer.




<b>AUTHOR</b>
       Julian Seward, jsewardbzip.org.

       <a href="http://www.bzip.org">http://www.bzip.org</a>

       The ideas embodied in <u>bzip2</u> are due to (at least) the following people:  Michael  Burrows  and  David
       Wheeler  (for  the block sorting transformation), David Wheeler (again, for the Huffman coder), Peter
       Fenwick (for the structured coding model in the original <u>bzip,</u> and many  refinements),  and  Alistair
       Moffat,  Radford  Neal  and  Ian  Witten  (for the arithmetic coder in the original <u>bzip).</u>  I am much
       indebted for their help, support and advice.  See the manual in the source distribution for  pointers
       to  sources  of  documentation.   Christian von Roques encouraged me to look for faster sorting algo-
       rithms, so as to speed up compression.  Bela Lubkin encouraged me to improve the worst-case  compres-
       sion  performance.  Donna Robinson XMLised the documentation.  The bz* scripts are derived from those
       of GNU gzip.  Many people sent patches, helped with portability problems, lent machines, gave  advice
       and were generally helpful.



                                                                                                    <a href="bzip2.1.html#//apple_ref/doc/man/1/bzip2">bzip2(1)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/bunzip2.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/bunzip2.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/bunzip2.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

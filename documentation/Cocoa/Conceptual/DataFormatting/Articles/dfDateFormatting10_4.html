<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Data Formatting Programming Guide for Cocoa: Date Formatters</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Date Formatters"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002369" title="Date Formatters"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">Data Formatting Programming Guide for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="dfNumberFormatting10_4.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="dfCells.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40002369-SW1" title="Date Formatters"></a><hr /><H1>Date Formatters</H1><p>This article describes how you use date formatters using Mac OS X v10.4 and later and iPhone OS. If you are using Mac OS X v10.3 or earlier, you should read <span class="content_text"><a href="df100103.html#//apple_ref/doc/uid/TP40007972-SW1">“Date and Number Formatters on Mac OS X v10.0 to 10.3.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW2">Behavior Modes</a>
				
			<br/>
			
        
			
			
				<a href="dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW3">Formatter Styles</a>
				
			<br/>
			
        
			
			
				<a href="dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW4">Parsing and Creating Strings</a>
				
			<br/>
			
        
			
			
				<a href="dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW5">Format Strings</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002369-SW2" title="Behavior Modes"></a><h2>Behavior Modes</h2><p>On Mac OS X desktop version 10.4 and later, instances of an <code>NSDateFormatter</code> can operate in two modes, 10.0 compatibility mode and 10.4 mode.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002369-DontLinkElementID_2" title="iPhone&Acirc;&nbsp;OS"></a><p><strong>iPhone OS:</strong>&nbsp;The v10.0 compatibility mode is not available on iPhone OS—only the 10.4 mode is available.</p></div><ul class="ul"><li class="li"><p>In the v10.0 compatibility mode, <code>NSDateFormatter</code> operates as it did in Mac OS X from version 10.0 to 10.3, including the limitations and bugs—see <span class="content_text"><a href="df100103.html#//apple_ref/doc/uid/TP40007972-SW1">“Date and Number Formatters on Mac OS X v10.0 to 10.3.”</a></span> </p></li><li class="li"><p>On Mac OS X v10.4 and later, the behavior of the <code>NSDateFormatter</code> class is based on CFDateFormatter, which is in turn based on the open-source ICU (International Components for Unicode) library. (<code>NSDateFormatter</code> and CFDateFormatter, however, are not toll-free bridged.) </p></li></ul><p>The v10.4 behavior mode allows more configurability and better localization; you should use it for any new projects, and ideally upgrade any existing code that uses v10.0 behavior to use v10.4 behavior.</p><p>For backwards binary compatibility, the default behavior for <code>NSDateFormatter</code> on Mac OS X version 10.4 is the v10.0 behavior. On Mac OS X version 10.5 and later, however, the default is the v10.4 behavior. You can set the default behavior of all instances of <code>NSDateFormatter</code> to the v10.4 behavior by invoking the class method, <code>setDefaultFormatterBehavior:</code> with the argument <code>NSDateFormatterBehavior10_4</code>. You can also set the behavior for any instance individually by invoking <code>setFormatterBehavior:</code>.</p><p>You can set an application default (preference) to cause date formatters to be automatically converted to the new style. Set the <code>NSMakeDateFormatters10_4</code> default to a Boolean <code>YES</code>/<code>true</code> value in the application's preferences. You must set the preference before any use is made of the <code>NSDateFormatter</code> class. Note that the default has two effects:</p><ol class="ol"><li class="li"><p>Date formatters you initialize with <code>init</code> adopt the v10.4 formatter behavior.</p></li><li class="li"><p>Date formatters that are unarchived from either non-keyed or keyed archives are converted to v10.4-style if the archived formatter has an un-customized format string at unarchive time.</p></li></ol><p>The object type for date formatters that use the v10.0 behavior mode is <code>NSCalendarDate</code>, but for new-style formatters it is <code>NSDate</code>. If you want, you can configure a new style formatter to generate <code>NSCalendarDate</code> objects using <code>setGeneratesCalendarDates:</code>. You are encouraged, however, to switch to using <code>NSDate</code> for new style formatters.</p><p>The 10.4 methods do not do anything when invoked on a v10.0-style formatter, and return a generic return value when required to return something—you should therefore not invoke the new methods on a v10.0-style formatter. On a v10.4-style formatter, the old methods map approximately to one or more new methods or attributes, but you should use the new methods directly when possible.</p><a name="//apple_ref/doc/uid/TP40002369-SW3" title="Formatter Styles"></a><h2>Formatter Styles</h2><p>There are many attributes you can get and set on a date formatter, including the date style, time style, locale, time zone, calendar, format string, the two-digit-year cross-over date, the default date which provides unspecified components, and there is also access to the various textual strings, like the month names. You are encouraged, however, not to change individual settings, but instead to use the <code>NSDateFormatter</code> style constants to specify pre-defined sets of attributes that determine how a formatted date is displayed—<code><a href="../../../Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateFormatterNoStyle" target="_top">NSDateFormatterNoStyle</a></code>, <code><a href="../../../Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateFormatterShortStyle" target="_top">NSDateFormatterShortStyle</a></code>, <code><a href="../../../Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateFormatterMediumStyle" target="_top">NSDateFormatterMediumStyle</a></code>, <code><a href="../../../Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateFormatterLongStyle" target="_top">NSDateFormatterLongStyle</a></code>, or <code><a href="../../../Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateFormatterFullStyle" target="_top">NSDateFormatterFullStyle</a></code>. These are styles that the user can configure in the International preferences panel in System Preferences. If you specify your own format string, you lose user-configurability. The code sample below illustrates how you can set a date format using formatter styles.</p><div class="codesample"><table><tr><td scope="row"><pre>// assume default behavior set for class using<span></span></pre></td></tr><tr><td scope="row"><pre>// [NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehavior10_4];<span></span></pre></td></tr><tr><td scope="row"><pre>NSDateFormatter *dateFormatter =<span></span></pre></td></tr><tr><td scope="row"><pre>        [[[NSDateFormatter alloc] init] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>[dateFormatter setDateStyle:NSDateFormatterMediumStyle];<span></span></pre></td></tr><tr><td scope="row"><pre>[dateFormatter setTimeStyle:NSDateFormatterNoStyle];<span></span></pre></td></tr><tr><td scope="row"><pre>NSDate *date =<span></span></pre></td></tr><tr><td scope="row"><pre>        [NSDate dateWithTimeIntervalSinceReferenceDate:118800];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *formattedDateString = [dateFormatter stringFromDate:date];<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"formattedDateString for locale %@: %@",<span></span></pre></td></tr><tr><td scope="row"><pre>        [[dateFormatter locale] localeIdentifier], formattedDateString);<span></span></pre></td></tr><tr><td scope="row"><pre>// Output: formattedDateString for locale en_US: Jan 2, 2001<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002369-SW4" title="Parsing and Creating Strings"></a><h2>Parsing and Creating Strings</h2><p>In addition to the methods inherited from <code>NSFormatter</code>, <code>NSDateFormatter</code> adds two convenience methods—<code>stringFromDate:</code> and <code>dateFromString:</code>—and a new method to parse a string—<code>getObjectValue:forString:range:error:</code>. These methods make it easier for you to use an <code>NSDateFormatter</code> object directly in code, and make it easier to format dates into strings more complex and more convenient ways than <code>NSString</code> formatting allows.</p><p>The <code>getObjectValue:forString:range:error:</code> method allows you to specify a subrange of the string to be parsed, and it returns the range of the string that was actually parsed (in the case of failure, it indicates where the failure occurred). It also returns an <code>NSError</code> object that can contain richer information than the failure string returned by the <code>getObjectValue:forString:errorDescription:</code> method inherited from <code>NSFormatter</code>.</p><p>Note that, since they work with general instances of <code>NSFormatter</code>, instances of <code>NSCell</code> only invoke the <code>NSFormatter</code>   <code>getObjectValue:forString:errorDescription:</code> method on Mac OS X v10.4. For a v10.4-style date formatter, that method calls <code>getObjectValue:forString:range:error:</code>.</p><p>The v10.4-style date formatter’s lenient parsing mode is not as forgiving as the "natural language" parsing of <code>NSDateFormatter</code> when the <code>allowsNaturalLanguage</code> option is enabled in the formatter. This has advantages and disadvantages: users will have to be more careful and perhaps thorough when typing in dates, but they are more likely to find that the value they were trying to input was correctly set to the value they wanted rather than what the "natural language" parsing guessed they meant. </p><p>
</p><a name="//apple_ref/doc/uid/TP40002369-SW5" title="Format Strings"></a><h2>Format Strings</h2><p>The format string uses the format patterns from the <span class="content_text"><a href="http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns" target="_blank">Unicode standard</a></span> (this reference is to version tr35-6 for Mac OS X v10.5; for Mac OS X v10.4 use <span class="content_text"><a href="http://unicode.org/reports/tr35/tr35-4.html#Date_Format_Patterns" target="_blank">version tr35-4</a></span>). (When the formatter is in v10.0 mode, you must use the old-style format strings, described in <span class="content_text"><a href="df100103.html#//apple_ref/doc/uid/TP40007972-SW9">“Date Format String Syntax (Mac OS X Versions 10.0 to 10.3).”</a></span>) Note with the Unicode format string format, you should enclose literal text in the format string inside single quotes (<code>'</code>), as illustrated in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];<span></span></pre></td></tr><tr><td scope="row"><pre>[inputFormatter setDateFormat:@"yyyy-MM-dd 'at' HH:mm"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSDate *formatterDate = [inputFormatter dateFromString:@"1999-07-11 at 10:30:03"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];<span></span></pre></td></tr><tr><td scope="row"><pre>[outputFormatter setDateFormat:@"HH:mm 'on' EEEE MMMM d"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSString *newDateString = [outputFormatter stringFromDate:formatterDate];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"newDateString %@", newDateString);<span></span></pre></td></tr><tr><td scope="row"><pre>// For US English, the output is:<span></span></pre></td></tr><tr><td scope="row"><pre>// newDateString 10:30 on Sunday July 11<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="dfNumberFormatting10_4.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="dfCells.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html%3Fid%3D10000029i-4.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html%3Fid%3D10000029i-4.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html%3Fid%3D10000029i-4.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

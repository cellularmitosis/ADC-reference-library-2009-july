<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Document-Based Applications Overview: Implementing a Document-Based Application</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Implementing a Document-Based Application"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000029" title="Implementing a Document-Based Application"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../index.html" target="_top">Document-Based Applications Overview</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/RolesOfDocObjects.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="SubclassNSDocument.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000029-BCIHAJDA" title="Implementing a Document-Based Application"></a><hr /><H1>Implementing a Document-Based Application</H1><p><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_104"></a>It is possible to put together a document-based application without having to write much code. If your requirements are minimal, you can use the default <code>NSWindowController</code> instance and default <code>NSDocumentController</code> instance provided by the Application Kit. You have only to create a document project, compose the human interface, implement a subclass of <code>NSDocument</code>, and add any other custom classes or behavior required by your application.</p><p>The following sections step you through the tasks you must do, and those you might want to do, when implementing a document-based application. Where something is described in detail elsewhere, such as overridden methods in <code>NSDocument</code> subclasses, you are referred there.</p><p>As for the three classes behind document-based applications, two likely concerns are the number of required objects and whether subclassing is necessary. The following table summarizes this information:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>How many objects?</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Subclass?</p></th></tr><tr><td  scope="row"><p><code>NSDocumentController</code></p></td><td ><p>1 per application</p></td><td ><p>Optional (but unlikely)</p></td></tr><tr><td  scope="row"><p><code>NSDocument</code></p></td><td ><p>1 per document</p></td><td ><p>Required</p></td></tr><tr><td  scope="row"><p><code>NSWindowController</code></p></td><td ><p>1 per window</p></td><td ><p>Optional (but likely)</p></td></tr></table></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ImplementingDocApp.html#//apple_ref/doc/uid/20000029-997420">The Document-Based Application Project Template</a>
				
			<br/>
			
        
			
			
				<a href="ImplementingDocApp.html#//apple_ref/doc/uid/20000029-997620">Create the Project and Compose the Interface</a>
				
			<br/>
			
        
			
			
				<a href="ImplementingDocApp.html#//apple_ref/doc/uid/20000029-997699">Complete the Information Property List</a>
				
			<br/>
			
        
			
			
				<a href="ImplementingDocApp.html#//apple_ref/doc/uid/20000029-997740">Implement the NSDocument Subclass</a>
				
			<br/>
			
        
			
			
				<a href="ImplementingDocApp.html#//apple_ref/doc/uid/20000029-998137">Implement Additional Controller Classes</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20000029-997420" title="The Document-Based Application Project Template"></a><h2>The Document-Based Application Project Template</h2><p>Cocoa’s development environment provides a Cocoa Document-based Application project template in Xcode to expedite the development of document-based applications. This project template provides the following things:</p><ul class="ul"><li class="li"><p>A nib file for the application's document</p><p>This <a name="//apple_ref/doc/uid/20000029-DontLinkElementID_105"></a>nib file is named <code>MyDocument.nib</code>. A subclass of <code>NSDocument</code> named <code>MyDocument</code> is made file’s owner of the nib file. It has an outlet named <code>window</code> connected to its window object. The window has only a text field on it with the words "Your document contents here".</p></li><li class="li"><p>The application’s main nib file</p><p>This nib file is named <code>MainMenu.nib</code>. It contains an application menu, a File menu (with all of its associated document commands), and an Edit menu with text editing commands and Undo and Redo menu items. These menu items, as well as all of the menu items of the File menu, are connected to the appropriate first-responder action methods. The About NewApplication menu item is connected to the <code><a href="../../../Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/orderFrontStandardAboutPanel:" target="_top">orderFrontStandardAboutPanel:</a></code> action method that displays a standard About window.</p></li><li class="li"><p>A skeletal <code>NSDocument</code> subclass<a name="//apple_ref/doc/uid/20000029-DontLinkElementID_106"></a> implementation</p><p>The project includes <code>MyDocument.h</code> and <code>MyDocument.m</code>. The latter file includes empty but commented blocks for the <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSDocument/dataRepresentationOfType:" target="_top">dataRepresentationOfType:</a></code><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_107"></a> and <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSDocument/loadDataRepresentation:ofType:" target="_top">loadDataRepresentation:ofType:</a></code><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_108"></a> methods. These skeletal implementations are for applications targeted for systems that must be able to run on Mac OS X v10.3 and earlier. For applications that can require Mac OS X v10.4 and later, you should instead override the  <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/dataOfType:error:" target="_top">dataOfType:error:</a></code><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_109"></a> and <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/readFromData:ofType:error:" target="_top">readFromData:ofType:error:</a></code><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_110"></a> methods. It also includes a fully implemented <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/windowNibName" target="_top">windowNibName</a></code><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_111"></a> method that returns the name of the document window nib file, <code>MyDocument</code>, and an override of <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/windowControllerDidLoadNib:" target="_top">windowControllerDidLoadNib:</a></code><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_112"></a>.</p></li><li class="li"><p>The application's information <a name="//apple_ref/doc/uid/20000029-DontLinkElementID_113"></a>property list</p><p>In the Xcode Target inspector, you can edit the file <a name="//apple_ref/doc/uid/20000029-DontLinkElementID_114"></a><code>Info.plist</code>, which contains placeholder values for global application keys, as well as for the <code><!--a  -->CFBundleDocumentTypes<!--/a--></code> key (which specifies information about the document types the application works with).</p></li></ul><p>The steps described in the following sections show how to create a document-based application using Xcode’s Cocoa Document-based Application project template. The following table lists the File menu first-responder<a name="//apple_ref/doc/uid/20000029-DontLinkElementID_115"></a> <a name="//apple_ref/doc/uid/20000029-DontLinkElementID_116"></a>action connections that should already exist in the template application.</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>File menu command</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>First-responder action</p></th></tr><tr><td  scope="row"><p>New</p></td><td ><p><code>newDocument:</code></p></td></tr><tr><td  scope="row"><p>Open...</p></td><td ><p><code>openDocument:</code></p></td></tr><tr><td  scope="row"><p>Open Recent > Clear Menu</p></td><td ><p><code>clearRecentDocuments:</code></p></td></tr><tr><td  scope="row"><p>Close</p></td><td ><p><code>performClose:</code></p></td></tr><tr><td  scope="row"><p>Save</p></td><td ><p><code>saveDocument:</code></p></td></tr><tr><td  scope="row"><p>Save As...</p></td><td ><p><code>saveDocumentAs:</code></p></td></tr><tr><td  scope="row"><p>Revert</p></td><td ><p><code>revertDocumentToSaved:</code></p></td></tr><tr><td  scope="row"><p>Page Setup...</p></td><td ><p><code>runPageLayout:</code></p></td></tr><tr><td  scope="row"><p>Print...</p></td><td ><p><code>printDocument:</code></p></td></tr></table></div><p>The template has similar ready-made connections for the Edit, Window, and Help menus. If your application does not support any of the supplied actions, such as printing, for example, you should remove the associated menu items from the nib.</p><a name="//apple_ref/doc/uid/20000029-997620" title="Create the Project and Compose the Interface"></a><h2>Create the Project and Compose the Interface</h2><ol class="ol"><li class="li"><p>Launch Xcode and choose New Project from the File menu.</p><p>In the New Project dialog, choose "Cocoa Document-based Application."</p></li><li class="li"><p>Provide a name and location on disk for the project.</p></li><li class="li"><p>Double-click the <code>MyDocument.nib</code> file in the Resources group in Xcode’s Groups &amp; Files pane. This opens the file in Interface Builder.</p><p>If you want to change the name of the nib file, you can save it under another name in Interface Builder and add it to the project. If you do this, you must also modify the string returned by the <code>windowNibName</code> method in the <code>NSDocument</code> subclass implementation.</p></li><li class="li"><p>Create the visible interface for the document window in Interface Builder.</p></li><li class="li"><p>If the objects on the document window require further outlets or actions, add these to the MyDocument subclass of <code>NSDocument</code>. Connect these actions and outlets via the File’s Owner icon on the Instances display of the nib file window.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_25" title="Important:"></a><p><strong>Important:</strong>&nbsp;Do not generate an instance of MyDocument to make these connections.</p><p></p></div><p>If you want to name your <code>NSDocument</code> subclass something other than <code>MyDocument</code> (the default name), change the name in Interface Builder and wherever it occurs in the Document header (<code>.h</code>) and implementation (<code>.m</code>) files. You must also change the name under the <code>NSDocumentClass</code> key in the <code>Info.plist</code> file.</p></li><li class="li"><p>If your document objects interact with other custom objects, such as model objects that perform specialized computations, define those objects in Interface Builder and make any necessary connections to them.</p></li></ol><a name="//apple_ref/doc/uid/20000029-997699" title="Complete the Information Property List"></a><h2>Complete the Information Property List</h2><ol class="ol"><li class="li"><p><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_117"></a>In Xcode, click the Targets group disclosure triangle, select the application target, and click the Info button in the Xcode toolbar (or choose Get Info from the File menu). Click the Properties tab in the Target Info window.</p></li><li class="li"><p>Replace the placeholder or default values in the information property list with those specific to your application. You can also edit the <code>Info.plist</code> file directly.</p><p>See <span class="content_text"><a href="../Concepts/DocTypePList.html#//apple_ref/doc/uid/20000024-BHADAGHF">“Storing Document Types Information in the Application's Property List”</a></span> and <span class="content_text"><a href="../Articles/MultiDocument.html#//apple_ref/doc/uid/TP40003382-SW1">“Creating Multiple-Document-Type Applications”</a></span> for information on the properties specific to documents.</p><p>See also "Inspecting Targets" in <span class="content_text"><a href="../../../../DeveloperTools/Conceptual/XcodeBuildSystem/100-Targets/bs_targets.html#//apple_ref/doc/uid/TP40002689" target="_top">Targets</a></span> for information about the fields available in the Xcode Target inspector.</p></li></ol><a name="//apple_ref/doc/uid/20000029-997740" title="Implement the NSDocument Subclass"></a><h2>Implement the NSDocument Subclass</h2><p><a name="//apple_ref/doc/uid/20000029-DontLinkElementID_118"></a>The following procedure just gives general guidelines. For more details see the <code>NSDocument</code> reference and <span class="content_text"><a href="SubclassNSDocument.html#//apple_ref/doc/uid/20000028-BCIJGBIF">“Creating a Subclass of NSDocument.”</a></span> You might also read the Cocoa documentation covering undo, copy/paste, and printing.</p><ol class="ol"><li class="li"><p>In Xcode, open the header file of your <code>NSDocument</code> subclass (in the Classes group in Xcode’s Groups &amp; Files pane).</p></li><li class="li"><p>If you added outlets or actions to your <code>NSDocument</code> subclass in Interface Builder, add them to the subclass’s header file. Also add any other required instance variables and include the declarations of new methods that you wish to be public, such as accessor methods.</p><p>You can specify additional outlets in actions in the existing header file and then import them into the nib file by using Interface Builder’s Read Files command in the Classes menu.</p></li><li class="li"><p>Open the subclass implementation file in the project's Classes group.</p></li><li class="li"><p>Although it’s not usually necessary, you can override the designated initializer (<code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/init" target="_top">init</a></code>) and perhaps the document-opening initializer <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSDocument/initWithContentsOfFile:ofType:" target="_top">initWithContentsOfFile:ofType:</a></code> to perform initializations specific to your subclass; be sure to invoke the superclass implementations. You can also implement <code><a href="../../../Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/awakeFromNib" target="_top">awakeFromNib</a></code> to initialize objects unarchived from the document’s window nib files (but not the document itself).</p></li><li class="li"><p>Override the data-based reading and writing methods. For applications targeted for Mac OS X v10.4 and later, override <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/readFromData:ofType:error:" target="_top">readFromData:ofType:error:</a></code> (to load document data of a certain type) and <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/dataOfType:error:" target="_top">dataOfType:error:</a></code> (to provide document data of a certain type).</p><p>The following example implementations assume that the application has an <code>NSTextView</code> object configured typically with an <code>NSTextStorage</code> object to hold the document's data. The <code>NSDocument</code> object has <code>text</code> and <code>setText:</code> accessors for the document's <code>NSAttributedString</code> data model.</p><div class="codesample"><table><tr><td scope="row"><pre>- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError {<span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL readSuccess = NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSAttributedString *fileContents = [[NSAttributedString alloc]<span></span></pre></td></tr><tr><td scope="row"><pre>            initWithData:data options:NULL documentAttributes:NULL<span></span></pre></td></tr><tr><td scope="row"><pre>            error:outError];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (fileContents) {<span></span></pre></td></tr><tr><td scope="row"><pre>        readSuccess = YES;<span></span></pre></td></tr><tr><td scope="row"><pre>        [self setText:fileContents];<span></span></pre></td></tr><tr><td scope="row"><pre>        [fileContents release];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return readSuccess;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSData *data = [textView RTFFromRange:NSMakeRange(0,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        [[textView textStorage] length])];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (!data &amp;&amp; outError) {<span></span></pre></td></tr><tr><td scope="row"><pre>        *outError = [NSError errorWithDomain:NSCocoaErrorDomain<span></span></pre></td></tr><tr><td scope="row"><pre>                                code:NSFileWriteUnknownError userInfo:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return data;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>For applications that must be able to run on Mac OS X v10.3 and earlier, you should implement <code>loadDataRepresentation:ofType:</code> and  <code>dataRepresentationOfType:</code> instead.</p></li><li class="li"><p>For applications targeted for Mac OS X v10.4 and later, If your application needs access to document data files, you can override <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/readFromURL:ofType:error:" target="_top">readFromURL:ofType:error:</a></code> and <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/writeToURL:ofType:error:" target="_top">writeToURL:ofType:error:</a></code>, respectively, instead. You can override <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/writeToURL:ofType:forSaveOperation:originalContentsURL:error:" target="_top">writeToURL:ofType:forSaveOperation:originalContentsURL:error:</a></code> instead of <code>writeToURL:ofType:error:</code> if your document writing machinery needs access to the on-disk representation of the document revision that is about to be overwritten. If your document data is stored in file packages, you can override <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/readFromFileWrapper:ofType:error:" target="_top">readFromFileWrapper:ofType:error:</a></code> and  <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/fileWrapperOfType:error:" target="_top">fileWrapperOfType:error:</a></code> instead.</p><p>Here are examples of URL-based reading and writing implementations which have the same assumptions as the previous examples.</p><div class="codesample"><table><tr><td scope="row"><pre>- (BOOL)readFromURL:(NSURL *)inAbsoluteURL ofType:(NSString *)inTypeName error:(NSError **)outError {<span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL readSuccess = NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSAttributedString *fileContents = [[NSAttributedString alloc]<span></span></pre></td></tr><tr><td scope="row"><pre>                                initWithURL:inAbsoluteURL options:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                documentAttributes:NULL error:outError];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (fileContents) {<span></span></pre></td></tr><tr><td scope="row"><pre>        readSuccess = YES;<span></span></pre></td></tr><tr><td scope="row"><pre>        [self setText:fileContents];<span></span></pre></td></tr><tr><td scope="row"><pre>        [fileContents release];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return readSuccess;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (BOOL)writeToURL:(NSURL *)inAbsoluteURL ofType:(NSString *)inTypeName error:(NSError **)outError {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSData *data = [[self text] RTFFromRange:NSMakeRange(0,<span></span></pre></td></tr><tr><td scope="row"><pre>                    [[self text] length]) documentAttributes:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL writeSuccess = [data writeToURL:inAbsoluteURL<span></span></pre></td></tr><tr><td scope="row"><pre>                               options:NSAtomicWrite error:outError];<span></span></pre></td></tr><tr><td scope="row"><pre>    return writeSuccess;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>For applications that must be able to run on Mac OS X v10.3 and earlier, you should override <code>readFromFile:ofType:</code> and  <code>writeToFile:ofType:</code> instead.</p></li><li class="li"><p>Implement the method to create the window controller or controllers for the <code>NSDocument</code> object.</p><p>If your document has only one window, the project template provides a default implementation:</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSString *)windowNibName {<span></span></pre></td></tr><tr><td scope="row"><pre>    return @"MyDocument";<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>If your document has more than one window, or if you have a custom subclass of <code>NSWindowController</code>, override <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/makeWindowControllers" target="_top">makeWindowControllers</a></code> instead. Make sure you add each created window controller to the list of such objects managed by the document using <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/addWindowController:" target="_top">addWindowController:</a></code>. This method causes the document to retain the window controller object, so be sure to release it after you add it.</p></li><li class="li"><p>You can implement<code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/windowControllerWillLoadNib:" target="_top">windowControllerWillLoadNib:</a></code> and  <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/windowControllerDidLoadNib:" target="_top">windowControllerDidLoadNib:</a></code> to perform any necessary tasks related to the window before and after it is loaded from the nib file.</p><p>Here is an example:</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)windowControllerDidLoadWindowNib:(NSWindowController *)windowController {<span></span></pre></td></tr><tr><td scope="row"><pre>    [super windowControllerDidLoadWindowNib:windowController];<span></span></pre></td></tr><tr><td scope="row"><pre>    [textView setAllowsUndo:YES];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (fileContents != nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>        [textView setString:fileContents];<span></span></pre></td></tr><tr><td scope="row"><pre>        fileContents = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Mark the document’s <a name="//apple_ref/doc/uid/20000029-DontLinkElementID_119"></a>dirty flag when it is edited.</p><p>The flag returned by <code>isDocumentEdited</code> indicates whether the document has unsaved changes. Although the <code>NSDocument</code> object clears this flag when it saves or reverts a document, you must set this flag in your code, unless you are using the <code>NSDocument</code> object’s default undo/redo mechanism. Normally, you respond to the appropriate delegation or notification messages sent when users edit a document, then invoke <code>updateChangeCount:</code> with an argument of <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSChangeDone" target="_top">NSChangeDone</a></code> to set the dirty flag.</p></li><li class="li"><p>Write the code that <a name="//apple_ref/doc/uid/20000029-DontLinkElementID_120"></a>prints the document’s data.</p><p>If you want users to be able to print a document, you must override <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/printOperationWithSettings:error:" target="_top">printOperationWithSettings:error:</a></code>, possibly providing a modified <code>NSPrintInfo</code> object.</p></li><li class="li"><p>Register undo and redo groups in your code. See the class description of <code>NSUndoManager</code> for details.</p></li></ol><p>And, of course, you must implement any methods that are special to your <code>NSDocument</code> subclass.</p><a name="//apple_ref/doc/uid/20000029-998137" title="Implement Additional Controller Classes"></a><h2>Implement Additional Controller Classes</h2><p>If the default <code>NSWindowController</code> instance provided by the Application Kit does not meet the needs of your document-based application, you can create a custom subclass of it. If you do so, you must override the <code>NSDocument</code>  <code>makeWindowControllers</code> method to instantiate this custom class and add the created object to the document’s list of window controllers. You should also ensure that your NSWindowController subclass is the nib file's owner.</p><p>If the default <code>NSDocumentController</code> object somehow does not meet all of your requirements for an application controller, such as handling user preferences or responding to uncommon application delegate messages, usually you should create a separate controller object (instead of subclassing <code>NSDocumentController</code>). For information on implementing <code>NSDocumentController</code> and <code>NSWindowController</code> subclasses, refer to the appropriate class documentation. See also <span class="content_text"><a href="SubclassController.html#//apple_ref/doc/uid/20000953-BCIJGBIF">“Creating a Subclass of NSDocumentController”</a></span> and <span class="content_text"><a href="FAQ.html#//apple_ref/doc/uid/20000954-BAJDAFAB">“Frequently Asked Questions”</a></span> in this document.<a name="//apple_ref/doc/uid/20000029-DontLinkElementID_121"></a></p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/RolesOfDocObjects.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="SubclassNSDocument.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-12<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/Documents/Tasks/ImplementingDocApp.html%3Fid%3D10000006i-2.7&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/Documents/Tasks/ImplementingDocApp.html%3Fid%3D10000006i-2.7&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/Documents/Tasks/ImplementingDocApp.html%3Fid%3D10000006i-2.7&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

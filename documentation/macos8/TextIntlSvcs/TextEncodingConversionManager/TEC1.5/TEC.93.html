<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<script language="JavaScript" src="frametest.js"></script>
<TITLE> ConvertFromPStringToUnicode</TITLE><LINK REL="stylesheet" TYPE="text/css" HREF="../../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../../Resources/JavaScript/page.js"></script>
</head>
<body bgcolor="#ffffff">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<DIV>
<a name="top"></a>
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --><A HREF="TEC.92.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.92.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.94.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A><br>
<font face="Geneva,Helvetica,Arial" size="1"><b><br>
		PATH<spacer type="horizontal" size="5">&nbsp;</b></font><a href="../../../mac8.html"><font face="Geneva,Helvetica,Arial" size="1">Mac OS 8 and 9 Developer Documentation</a>  <b>&gt;</b> Text Encoding Conversion Manager<br>
		<img src="images/im_smblue.gif" width="116" height="8"><img src="images/space.gif" width="6" height="11">Programming With the Text Encoding Conversion Manager</font><br>
		<br>
		<hr>

</DIV>
<H1>
<A NAME="pgfId=3875">
 </A>
<A NAME="34364">
 </A>
ConvertFromPStringToUnicode</H1>
<P>
<A NAME="pgfId=3876">
 </A>
Converts a Pascal string in a Mac OS text encoding to a Unicode string. </P>
<TT>
<A NAME="pgfId=26961">
 </A>
pascal OSStatus ConvertFromPStringToUnicode (<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TextToUnicodeInfo iTextToUnicodeInfo,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStr255Param iPascalStr, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount iOutputBufLen, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount *oUnicodeLen, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UniCharArrayPtr oUnicodeStr);</TT>
<DL COMPACT>
<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26965">
 </A>
<TT>iTextToUnicodeInfo</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14876">
 </A>
 A Unicode converter object of type <A HREF="TEC.73.html" CLASS="XRef">
<TT>TextToUnicodeInfo</TT></A>
 for the Pascal string to be converted. You can use the function <A HREF="TEC.7d.html" CLASS="XRef"><TT>CreateTextToUnicodeInfo</TT></A> or <A HREF="TEC.7e.html" CLASS="XRef"><TT>CreateTextToUnicodeInfoByEncoding</TT></A> to create the Unicode converter object. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26976">
 </A>
<TT>iPascalStr</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14886">
 </A>
The Pascal string to be converted to Unicode. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26985">
 </A>
<TT>iOutputBufLen</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3887">
 </A>
The length in bytes of the output buffer pointed to by the <TT>oUnicodeStr</TT> parameter. Your application supplies this buffer to hold the returned converted string. The <TT>oUnicodeLen</TT> parameter may return a byte count that is less than this value if the converted string is smaller than the buffer size you allocated.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26994">
 </A>
<TT>oUnicodeLen</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3888">
 </A>
A pointer to a value of type <TT>ByteCount</TT>. On output, the length in bytes of the converted Unicode string returned in the <TT>oUnicodeStr</TT> parameter. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27003">
 </A>
<TT>oUnicodeStr</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3892">
 </A>
A pointer to a Unicode character array. On output, this buffer holds the converted Unicode string. For information on the Unicode character array, see <A HREF="TEC.25.html" CLASS="XRef">
Unicode Character and String Pointer Data Types</A>
.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=27012">
 </A>
<I CLASS="italics">
function result</I>
</DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=16806">
 </A>
A result code. The function returns the <TT>noErr</TT> result code if it has completely converted the Pascal string to Unicode without using fallback characters. If the function returns the <TT>paramErr</TT>, <TT>kTECTableFormatErr</TT>, or <TT>kTECGlobalsUnavailableErr</TT> result codes, it did not convert the string.</DD><P>

<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=16807">
 </A>
If the function returns <TT>kTECBufferBelowMinimumSizeErr</TT>, the output buffer was too small to allow conversion of any part of the input string. You need to increase the size of the output buffer and try again.</DD><P>

<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=16808">
 </A>
If the function returns the <TT>kTECUsedFallbacksStatus</TT> result code, the function has completely converted the Pascal string using one or more fallback characters.</DD><P>

<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=16809">
 </A>
If the function returns <TT>kTECOutputBufferFullErr</TT>, the output buffer was not big enough to completely convert the input. You can call the function again with another output buffer--or with the same output buffer, after copying its contents--to convert the remainder of the input string.</DD><P>

<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=16810">
 </A>
If the function returns <TT>kTECPartialCharErr</TT>, the input buffer ended with an incomplete multibyte character. If you have subsequent input text available, you can append the unconverted input from this call to the beginning of the subsequent input text and call the function again.</DD><P>

<DD CLASS="DD.DefinitionDefCont">
<A NAME="pgfId=14436">
 </A>
See <A HREF="TEC.20.html" CLASS="XRef">
Text Encoding Conversion Manager Result Codes</A>
 in the chapter <A HREF="TEC.18.html" CLASS="XRef">
Basic Text Types Reference</A>
 for other possible values.</DD><P>

</DL COMPACT>
<DIV>
<H5 CLASS="RSb.RoutineSbhd">
<A NAME="pgfId=3894">
 </A>
<B>	</B>DISCUSSION</H5>
<P>
<A NAME="pgfId=3895">
 </A>
The <TT>ConvertFromPStringToUnicode</TT> function provides an easy and efficient way to convert a short Pascal string to a Unicode string without incurring the overhead associated with the function <A HREF="TEC.80.html" CLASS="XRef"><TT>ConvertFromTextToUnicode</TT></A>. <P>


<A NAME="pgfId=3899">
 </A>
If necessary, this function automatically uses fallback characters to map the text elements of the string. </P>
</DIV>
<HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 13 Dec 99)<P><A HREF="TEC.92.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.92.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.94.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A>

<!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY>
</HTML>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Writing a Reply Filter Function(IM:IC)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING203></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="IAC-202.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-204.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="IAC-2.html"><B>Interapplication Communication</B></A> / <BR><DD><A HREF="IAC-195.html"><B>Chapter 5 - Creating and Sending Apple Events</B></A> / <A HREF="IAC-200.html"><B>Sending an Apple Event</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING203-0></A>
<H2><A NAME=MARKER-9-130></A><A NAME=MARKER-21-131></A>Writing a Reply Filter Function</H2>
 <A NAME=MARKER-2-361></A><A NAME=MARKER-2-153></A>If your application calls <CODE>AESend</CODE> and chooses to yield the processor to other processes while waiting for a reply, you can provide an idle function to process update, null, operating-system, and activate events, and you can provide a reply filter function to process high-level events. The previous section describes how an idle function processes events.<P>
 <A NAME=MARKER-2-367></A>Your reply filter function can process any high-level events that it is willing to handle while waiting for a reply Apple event. For example, your application can choose to handle Apple events from other processes while waiting. Note, however, that your application must maintain any necessary state information. Your reply filter function must not accept any Apple events that can change the state of your application and make it impossible to return to its previous state.<P>
 A reply filter function must use this syntax:<P>
<PRE>
FUNCTION MyReplyFilter (VAR event: EventRecord;
                        returnID: LongInt; 
                        transactionID: LongInt;
                        sender: AEAddressDesc): Boolean;
</PRE>
 The <CODE>event</CODE> parameter is the event record for a high-level event. The next three parameters contain valid information only if the event is an Apple event. The <CODE>returnID</CODE> parameter is the return ID for the Apple event. The <CODE>transactionID</CODE> parameter is the transaction ID for the Apple event. The <CODE>sender</CODE> parameter contains the address of the application or process that sent the Apple event.<P>
 Your reply filter function should return <CODE>TRUE</CODE> as the function result if you want to accept the Apple event; otherwise, it should return <CODE>FALSE</CODE>. If your filter function returns <CODE>TRUE</CODE>, the Apple Event Manager calls the <CODE>AEProcessAppleEvent</CODE> function on behalf of your application, and your handler routine is called to process the Apple event.<A NAME=MARKER-2-132></A><A NAME=MARKER-2-64></A><A NAME=MARKER-2-371></A><A NAME=MARKER-2-374></A> In this case, make sure your handler is not called while it is still being used by an earlier call.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="IAC-202.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-204.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="IAC-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

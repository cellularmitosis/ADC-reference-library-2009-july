<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Import and Export Guide: Graphics Importer Components</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Graphics Importer Components"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents" title="Graphics Importer Components"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../ImportExport-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000523" target="_top">Import &amp; Export</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000903-IntroductiontoQuickTimeImportandExportGuide-DontLinkElementID_4">QuickTime Import and Export Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../B-Chapter/2AboutGraphicsImport.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../D-Chapter/4GraphicsExporterCom.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SW1" title="Graphics Importer Components"></a>
<h1>Graphics Importer Components</h1>

<p>This chapter describes the functions you can use to obtain the services of graphics importer components and use them to draw and manipulate image files.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DisplayingStillImages">Displaying Still Images</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-QuickTimeImageFileFormat">QuickTime Image File Format</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ObtainingGraphicsImportComponents">Obtaining Graphics Import Components</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-WritingGraphicsImportComponents">Writing Graphics Import Components</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GettingImageCharacteristics">Getting Image Characteristics</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SettingDrawingParameters">Setting Drawing Parameters</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DrawingImages">Drawing Images</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SavingImageFiles">Saving Image Files</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GettingMIMETypes">Getting MIME Types</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SpecifyingtheDataSource">Specifying the Data Source</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-RetrievingImageData">Retrieving Image Data</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GraphicsImporterFlagsforGammaCorrection">Graphics Importer Flags for Gamma Correction</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ImageDescriptionAtomsinQuickTimeImageFiles">Image Description Atoms in QuickTime Image Files</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ColorSyncAtomsinQuickTimeImageFiles">ColorSync Atoms in QuickTime Image Files</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GraphicsImporterComponentType">Graphics Importer Component Type</a>
				
			<br/>
			
        
			
			
				<a href="3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-MIMETypeList">MIME Type List</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DisplayingStillImages" title="Displaying Still Images"></a>
<h2>Displaying Still Images</h2>
<p>Graphics importer components provide a standard method for applications to open and display still images contained within graphics documents. Graphics importer components allow you to work with any type of image data, regardless of the file format or compression used in the document.</p>
<p>You specify the document that contains the image, and the destination rectangle the image should be drawn into, and QuickTime handles the rest. More complex interactions are also supported.</p>
<p>To draw an image file, use the function shown in Listing 2-1.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_7" title="Listing 2-1The basic function used to draw an image file"></a>
<p class="codesample"><strong>Listing 2-1&nbsp;&nbsp;</strong>The basic function used to draw an image file</p>
<div class="codesample"><table><tr><td scope="row"><pre>void drawFile(const FSSpec *fss, const Rect *boundsRect)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        GraphicsImportComponent gi;<span></span></pre></td></tr><tr><td scope="row"><pre>        GetGraphicsImporterForFile(fss, &amp;gi);<span></span></pre></td></tr><tr><td scope="row"><pre>        GraphicsImportSetBoundsRect(gi, boundsRect);<span></span></pre></td></tr><tr><td scope="row"><pre>        GraphicsImportDraw(gi);<span></span></pre></td></tr><tr><td scope="row"><pre>        CloseComponent(gi);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div>

<p>The same code can be used to display any image, regardless of the file format.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ImageFormatswithMultipleImagesinaSingleFile" title="Image Formats with Multiple Images in a Single File"></a>
<h3>Image Formats with Multiple Images in a Single File</h3>
<p>QuickTime includes support for image formats which can have multiple images in a single file. You can use <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageCount" target="_top">GraphicsImportGetImageCount</a></code> to find out how many images are in a file, and <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetImageIndex" target="_top">GraphicsImportSetImageIndex</a></code> to select a particular image. Of the image formats supported by QuickTime, TIFF files can support multiple images, Photoshop files can contain multiple layers and FlashPix files can contain multiple resolutions.</p>
<p>Note that individual images in a file may have different characteristics (width and height, depth, and so on).</p>
<p>Use the following functions to deal with image counts, getting and setting image indexes:</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageCount" target="_top">GraphicsImportGetImageCount</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetImageIndex" target="_top">GraphicsImportSetImageIndex</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageIndex" target="_top">GraphicsImportGetImageIndex</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-Supporting64bitFileSizesandOffsets" title="Supporting 64-bit File Sizes and Offsets"></a>
<h3>Supporting 64-bit File Sizes and Offsets</h3>
<p>QuickTime supports 64-bit file sizes and offsets. Four new functions have been added to the graphics importer API. Each is a 64-bit analog of an original 32-bit function. The base graphics importer’s implementation of some 32-bit functions have been modified to call the 64-bit version. (They may return <code>fileOffsetTooBigErr</code> in the event that a 64-bit value cannot be converted to a 32-bit value.) Applications and format-specific importers can call either version of each function.</p>
<p>Use the following functions to deal with 64-bit file sizes and offsets:</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataOffsetAndSize64" target="_top">GraphicsImportGetDataOffsetAndSize64</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportReadData64" target="_top">GraphicsImportReadData64</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetDataReferenceOffsetAndLimit64" target="_top">GraphicsImportSetDataReferenceOffsetAndLimit64</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataReferenceOffsetAndLimit64" target="_top">GraphicsImportGetDataReferenceOffsetAndLimit64</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-RetrievingDefaultSettings" title="Retrieving Default Settings"></a>
<h3>Retrieving Default Settings</h3>
<p>Some file formats, most notably FlashPix, can store a default matrix, clipping region, graphics mode and source rect in the image file. In order to display the image correctly, these settings should be used.</p>
<p>Use the following functions to deal with retrieving default settings:</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDefaultMatrix" target="_top">GraphicsImportGetDefaultMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDefaultClip" target="_top">GraphicsImportGetDefaultClip</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDefaultGraphicsMode" target="_top">GraphicsImportGetDefaultGraphicsMode</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDefaultSourceRect" target="_top">GraphicsImportGetDefaultSourceRect</a></code></p></li>
</ul>
<p>Default settings from FlashPix files are not used automatically.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GettingColorSyncProfiles" title="Getting ColorSyncProfiles"></a>
<h3>Getting ColorSyncProfiles</h3>
<p>QuickTime includes support for extracting embedded  ColorSync profiles from some image formats. Of the image formats supported by QuickTime, these are GIF, JPEG, PNG, QuickDraw Picture, QuickTime Image, and TIFF. Image files containing ColorSync profiles describe their own colorspaces in a self-contained manner.</p>
<p>Since it was introduced in QuickTime, the PNG graphics importer has performed built-in  gamma correction. QuickTime includes a flag that can you can set using the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetFlags" target="_top">GraphicsImportSetFlags</a></code> function to turn this off. This is useful for applications that want to use some other mechanism for colorspace correction, such as ColorSync.</p>
<p>Use the following functions to deal with getting ColorSync profiles, and getting and setting import flags:</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetColorSyncProfile" target="_top">GraphicsImportGetColorSyncProfile</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetFlags" target="_top">GraphicsImportSetFlags</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetFlags" target="_top">GraphicsImportGetFlags</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GettingSettingtheDestinationRectangle" title="Getting/Setting the Destination Rectangle"></a>
<h3>Getting/Setting the Destination Rectangle</h3>
<p>QuickTime includes two calls that let applications access a graphics importer’s destination rectangle.</p>
<p>Use the following functions to deal with accessing a destination rectangle:</p>
<ul class="spaceabove">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetDestRect" target="_top">GraphicsImportSetDestRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDestRect" target="_top">GraphicsImportGetDestRect</a></code></p></li>
</ul>
<p>Figure 2-1 shows an example with the following four rectangles: natural bounds, source rectangle, bounds rectangle, and a destination rectangle. You can access the destination rectangle in QuickTime with these calls.</p>
<p>In Figure 2-1, the matrix scales by 200% vertically and translates 200 pixels to the right.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_8" title="Figure 2-1Matrix scaling and translation"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>Matrix scaling and translation</p><img src = "../Art/refImporter-3.jpg" alt = "Matrix scaling and translation" ></div><br/>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-QuickTimeImageFileFormat" title="QuickTime Image File Format"></a>
<h2>QuickTime Image File Format</h2>
<p>QuickTime Image files are intended to provide the most useful container for QuickTime compressed still images. The format uses the same atom-based structure as a QuickTime movie.</p>
<p>Most still image file formats define both how images should be stored and compressed. However, two of the file formats supported by QuickTime are container formats, which describe storage mechanisms independent of compression. These formats are QuickDraw Picture (PICT) files and QuickTime Image (QTIF) files.</p>
<p>QuickTime has permitted compressed image data to be included in QuickDraw pictures since QuickTime was first introduced. However, the technical challenges of parsing, interpreting and spooling picture files can make them a discouraging choice for applications which are primarily interested in accessing the compressed data inside.</p>
<p>The QuickTime Image file format provides a much simpler container for QuickTime compressed still images. The format uses the same atom-based structure as a QuickTime movie. Because the QuickTime Image file is a single fork format, it works well in cross-platform applications. On Mac OS systems, QuickTime Image files are identified by the file type <code>'qtif'</code>. On other platforms, Apple recommends that you use the filename extension .QTIF to identify QuickTime Image files.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-AtomTypesinQuickTimeImageFiles" title="Atom Types in QuickTime Image Files"></a>
<h3>Atom Types in QuickTime Image Files</h3>
<p>There are two defined atom types: <code><!--a target="_top" -->'idsc'<!--/a--></code>, which contains an image description, and <code><!--a target="_top" -->'idat'<!--/a--></code>, which contains the image data. They are illustrated in Figure 2-2. For a JPEG image, the image description atom contains a QuickTime image description describing the  JPEG image’s size, resolution, depth, and so on, and the image data atom contains the actual JPEG compressed data, as shown in Table 2-1.</p>
<p>In QuickTime, there is an optional atom type, <code><!--a target="_top" -->'iicc'<!--/a--></code>, which can store a ColorSync profile.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_9" title="Figure 2-2An &#39;idsc&#39; atom followed by an &#39;idat&#39; atom"></a><p><strong>Figure 2-2&nbsp;&nbsp;</strong>An 'idsc' atom followed by an 'idat' atom</p><img src = "../Art/refImporter-2.jpg" alt = "An 'idsc' atom followed by an 'idat' atom" ></div><br/>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_10" title="Table 2-1A QuickTime Image file containing JPEG compressed data"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>A QuickTime Image file containing JPEG compressed data</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p>0000005E</p></td>
<td ><p>Atom size, 94 bytes</p></td>
</tr>
<tr>
<td  scope="row"><p>69647363</p></td>
<td ><p>Atom type, <code>'idsc'</code></p></td>
</tr>
<tr>
<td  scope="row"><p>00000056</p></td>
<td ><p>Image description size, 86 bytes</p></td>
</tr>
<tr>
<td  scope="row"><p>6A706567</p></td>
<td ><p>Compressor identifier, <code>'jpeg'</code></p></td>
</tr>
<tr>
<td  scope="row"><p>00000000</p></td>
<td ><p>Reserved, set to zero</p></td>
</tr>
<tr>
<td  scope="row"><p>0000</p></td>
<td ><p>Reserved, set to zero</p></td>
</tr>
<tr>
<td  scope="row"><p>0000</p></td>
<td ><p>Reserved, set to zero</p></td>
</tr>
<tr>
<td  scope="row"><p>00000000</p></td>
<td ><p>Major and minor version of this data, zero if not applicable</p></td>
</tr>
<tr>
<td  scope="row"><p>6170706C</p></td>
<td ><p>Vendor who compressed this data,<code>'appl'</code></p></td>
</tr>
<tr>
<td  scope="row"><p>00000000</p></td>
<td ><p>Temporal quality, zero (no temporal compression)</p></td>
</tr>
<tr>
<td  scope="row"><p>00000200</p></td>
<td ><p>Spatial quality, <code>codecNormalQuality</code></p></td>
</tr>
<tr>
<td  scope="row"><p>0140</p></td>
<td ><p>Image width, 320</p></td>
</tr>
<tr>
<td  scope="row"><p>00F0</p></td>
<td ><p>Image height, 240</p></td>
</tr>
<tr>
<td  scope="row"><p>00480000</p></td>
<td ><p>Horizontal resolution, 72 dpi</p></td>
</tr>
<tr>
<td  scope="row"><p>00480000</p></td>
<td ><p>Vertical resolution, 72 dpi</p></td>
</tr>
<tr>
<td  scope="row"><p>00003C57</p></td>
<td ><p>Data size, 15447 bytes (use zero if unknown)</p></td>
</tr>
<tr>
<td  scope="row"><p>0001</p></td>
<td ><p>Frame count, 1</p></td>
</tr>
<tr>
<td  scope="row"><p>0C 50 68 6F 74 6F 20 2D 20 4A 50 45 47 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00</p></td>
<td ><p>Compressor name, "Photo - JPEG" (32 byte Pascal string)</p></td>
</tr>
<tr>
<td  scope="row"><p>0018</p></td>
<td ><p>Image bit depth, 24</p></td>
</tr>
<tr>
<td  scope="row"><p>FFFF</p></td>
<td ><p>Color look-up table ID, -1 (none)</p></td>
</tr>
<tr>
<td  scope="row"><p>00003C5F</p></td>
<td ><p>Atom size, 15455 bytes</p></td>
</tr>
<tr>
<td  scope="row"><p>69646174</p></td>
<td ><p>Atom type, <code>'idat'</code></p></td>
</tr>
<tr>
<td  scope="row"><p>FF D8 FF E0 00 10 4A 46 49 46 00 01 01 01 00 48 ...</p></td>
<td ><p>JPEG compressed data</p></td>
</tr>

</table></div>
<p>A QuickTime image file can also contain other atoms.</p>
<p>The exact order and size of atoms is not guaranteed to match the example in Table 2-1. Applications reading QuickTime image files should always use the atom size to traverse the file and ignore atoms of unrecognized types.</p>
<p>Like QuickTime movie files, QuickTime Image files are  big-endian. However, image data is stored in the same byte order as usually specified by the particular compression format.</p>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ObtainingGraphicsImportComponents" title="Obtaining Graphics Import Components"></a>
<h2>Obtaining Graphics Import Components</h2>
<p>You can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetGraphicsImporterForFile" target="_top">GetGraphicsImporterForFile</a></code> function to open a suitable graphics import component for a file. If you have a data reference instead of a file, you can use <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetGraphicsImporterForDataRef" target="_top">GetGraphicsImporterForDataRef</a></code> instead.</p>
<p>When the Image Compression Manager’s <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetGraphicsImporterForFile" target="_top">GetGraphicsImporterForFile</a></code> function searches for a graphics import component, it tries, in order:</p>
<ul class="ul">
<li class="li"><p>matching the Mac OS file type</p></li>
<li class="li"><p>matching the file name suffix</p></li>
<li class="li"><p>matching the MIME type and MIME suggested file name suffix</p></li>
<li class="li"><p>asking individual graphics importer components if the file’s contents match their format. It only does this for those graphics importers which support the <code>GraphicsImporterValidate</code> call.</p></li>
</ul>
<p>The last <code>stage</code> can be time-consuming, since it involves opening many components in turn. If you want to skip it, call <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetGraphicsImporterForFileWithFlags" target="_top">GetGraphicsImporterForFileWithFlags</a></code> (or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetGraphicsImporterForDataRefWithFlags" target="_top">GetGraphicsImporterForDataRefWithFlags</a></code> ) and pass the <code>kDontUseValidateToFindGraphicsImporter</code> flag.</p>
<p>If you include <code>kQTFileTypeQuickTimeImage</code> (<code>'qtif'</code>) in the list of types passed to <code><!--a target="_top" -->StandardGetFilePreview<!--/a--></code>, all files that can be opened with graphics importers are included in the file list. The slow validate approach is not used in this case.</p>
<p>When you are done with the graphics importer instance, you call <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CloseComponent" target="_top">CloseComponent</a></code>.</p>
<p>If you expect to draw the same image more than once, you can improve performance by keeping the graphics importer component open, rather than creating and disposing of it each time.</p>
<p>Once you have a graphics import component for your file or data reference, you can query it to determine the properties of the file, configure drawing parameters, and draw or export the file. The next two sections explain how to do this.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DeterminingthePropertiesoftheImageFile" title="Determining the Properties of the Image File"></a>
<h3>Determining the Properties of the Image File</h3>
<p>If you want to know the dimensions of the image, call the importer’s <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetNaturalBounds" target="_top">GraphicsImportGetNaturalBounds</a></code> function. If you want to know other information that is represented in the image description, such as its depth or color table, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageDescription" target="_top">GraphicsImportGetImageDescription</a></code>. If you want to extract meta-data from the image file (such as textual comments, like copyright information), call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMetaData" target="_top">GraphicsImportGetMetaData</a></code>. If you want to know information about the file format, such as the MIME types and MIME suggested file name suffixes, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMIMETypeList" target="_top">GraphicsImportGetMIMETypeList</a></code>.</p>
<p>Some image file formats can contain transparent regions, and hence may leave some pixels in their rectangular range unmodified even when drawing with a copying transfer mode and an identity matrix. If you would like to know whether a graphics importer’s format supports such transparent regions, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDoesDrawAllPixels" target="_top">GraphicsImportDoesDrawAllPixels</a></code>. If a graphics importer doesn’t support the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDoesDrawAllPixels" target="_top">GraphicsImportDoesDrawAllPixels</a></code> call, you can assume it will draw all pixels.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DrawingandConvertingImageFiles" title="Drawing and Converting Image Files"></a>
<h3>Drawing and Converting Image Files</h3>
<p>Before drawing, you may wish to set various parameters. Among those you can configure are the</p>
<ul class="spaceabove">
<li class="li"><p>source rectangle</p></li>
<li class="li"><p>transformation matrix</p></li>
<li class="li"><p>clipping region</p></li>
<li class="li"><p>graphics transfer mode</p></li>
<li class="li"><p>drawing quality</p></li>
<li class="li"><p>destination graphics port and device</p></li>
</ul>
<p>These parameters are explained in detail in Table 2-2.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_11" title="Table 2-2Drawing parameters you may configure"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 2-2&nbsp;&nbsp;</strong>Drawing parameters you may configure</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Parameters</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p>source rectangle</p></td>
<td ><p>Used to select a rectangular portion of the compressed image.</p></td>
</tr>
<tr>
<td  scope="row"><p>transformation matrix</p></td>
<td ><p>Used to shift, scale, rotate, and apply perspective to the source portion of the image. (Set this with <code>SetMatrix</code>, <code>SetBoundsRect</code>, or <code>SetDestRect</code>.)</p></td>
</tr>
<tr>
<td  scope="row"><p>clipping region</p></td>
<td ><p>Used to restrict the area to be drawn in the destination space.</p></td>
</tr>
<tr>
<td  scope="row"><p>graphics transfer mode</p></td>
<td ><p>Used to define how source pixels modify destination pixels.</p></td>
</tr>
<tr>
<td  scope="row"><p>drawing quality</p></td>
<td ><p>Used to specify quality vs. time tradeoffs; For example, if you're drawing a JPEG image to an 8-bit color screen, the drawing quality determines whether a slower or faster dither will be used.</p></td>
</tr>
<tr>
<td  scope="row"><p>destination graphics port and device</p></td>
<td ><p>Defines the graphics environment for drawing.</p></td>
</tr>

</table></div>
<p>Once you have set the drawing parameters, you can call <code>Draw</code> to draw the image.</p>
<p>You can also call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetAsPicture" target="_top">GraphicsImportGetAsPicture</a></code> to get the image in the form of a QuickDraw picture handle, <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSaveAsPicture" target="_top">GraphicsImportSaveAsPicture</a></code> to save it in a PICT file, or <code>GraphicsImportSaveAsQuickTimeImage</code> to save it in a QuickTime Image file. To export it to other image file formats, you can use <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportExportImageFile" target="_top">GraphicsImportExportImageFile</a></code>, or <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDoExportImageFileDialog" target="_top">GraphicsImportDoExportImageFileDialog</a></code> to present a standard Export As.. dialog box.</p>
<p>When you are done with a graphics import component, you call <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CloseComponent" target="_top">CloseComponent</a></code>.</p>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-WritingGraphicsImportComponents" title="Writing Graphics Import Components"></a>
<h2>Writing Graphics Import Components</h2>
<p>This section describes how graphics import components work and briefly discusses how to write a component. If you’re interesting in writing a component, you should read this section.</p>
<p>Format-specific graphics import components, such as the importers for  JPEG, PNG,  TIFF etc., are simple components. When a format-specific graphics importer is opened, it opens and targets an instance of the base importer. Subsequently, it delegates most of its calls to the base importer instance, as shown in Figure 2-3.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_12" title="Figure 2-3Delegating calls to the base importer"></a><p><strong>Figure 2-3&nbsp;&nbsp;</strong>Delegating calls to the base importer</p><img src = "../Art/refImporter-4.jpg" alt = "Delegating calls to the base importer" ></div><br/>
<p>The base importer communicates with data handler components to access image file data, and with the Image Compression Manager to arrange for image rendering. The only service a format-specific importer must provide is the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageDescription" target="_top">GraphicsImportGetImageDescription</a></code> call, which examines an image file and constructs an image description for it. The base importer uses this image description to respond to other calls such as <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetNaturalBounds" target="_top">GraphicsImportGetNaturalBounds</a></code> and <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDraw" target="_top">GraphicsImportDraw</a></code>. (In the case of <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDraw" target="_top">GraphicsImportDraw</a></code>, the image description is passed to the Image Compression Manager, so the <code>cType</code> field must identify a codec that will be able to draw the image. If a graphics importer needs to pass extra information that the codec will need at <code>PreDecompress</code> time, it can pass it in an image description extension.)</p>
<p>Sometimes, the data to be passed to the image decompressor is only a portion of the file. In these cases, the format-specific importer should implement the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataOffsetAndSize" target="_top">GraphicsImportGetDataOffsetAndSize</a></code> function to indicate the byte range to send to the image decompressor. It is often useful for this call to first call the generic importer’s implementation to find out the size of the input data stream.</p>
<p>In QuickTime, there is a 64-bit analog of this function, called <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataOffsetAndSize64" target="_top">GraphicsImportGetDataOffsetAndSize64</a></code>. In order to provide compatibility with old graphics importers, the generic importer’s implementation of this function calls the 32-bit version. Format-specific importers may implement both the 32-bit and 64-bit versions if it makes sense for their file formats.</p>
<p>Graphics import components may override other calls, such as <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMetaData" target="_top">GraphicsImportGetMetaData</a></code>, which extracts supplemental information from an image file, and <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMIMETypeList" target="_top">GraphicsImportGetMIMETypeList</a></code>, which provides information about the format.</p>
<p>Another optional call is <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportValidate" target="_top">GraphicsImportValidate</a></code>, which attempts to ascertain quickly whether a file matches the importer’s format. This is especially useful for formats which start with identifying codes or “magic numbers” (such as PNG and TIFF) in situations where image files do not have correct file types or suffixes. In situations like this, the Image Compression Manager may ask many graphics importers in turn to validate until it finds one that accepts the file, so it is important that <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportValidate" target="_top">GraphicsImportValidate</a></code> calls not be too slow. Format-specific importers that implement the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportValidate" target="_top">GraphicsImportValidate</a></code> call should have the <code>canMovieImportValidateFile</code> bit set in their component flags.</p>
<p>Graphics importers supporting image formats which can have transparent regions should implement the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDoesDrawAllPixels" target="_top">GraphicsImportDoesDrawAllPixels</a></code> call so as to warn applications that they may need to erase the destination area before drawing.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-RegisteringGraphicsImportComponents" title="Registering Graphics Import Components"></a>
<h3>Registering Graphics Import Components</h3>
<p>Graphics import components have component type <code>'grip'</code>. The interpretation of the subtype depends on the <code>movieImportSubTypeIsFileExtension</code> component flag. If this flag is clear, the subtype is a Macintosh file type. If this flag is set, the subtype is a file name suffix; it should be in uppercase and followed by space characters to pad it out to four characters. For instance, the file name suffix .png would be represented by the subtype <code>'PNG</code> <code>'</code>.</p>
<p>It is often useful to register graphics import components multiple times, so that both the file type and file name suffix may be matched. An efficient way to do this is to register the second and subsequent components as component aliases to the first.</p>
<p>Graphics import components that use the base importer’s <code>Draw</code> method should set the <code>graphicsImporterUsesImageDecompressor</code> flag in their component flags.</p>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GettingImageCharacteristics" title="Getting Image Characteristics"></a>
<h2>Getting Image Characteristics</h2>
<p>These functions are called by applications to obtain information about images:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetNaturalBounds" target="_top">GraphicsImportGetNaturalBounds</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageDescription" target="_top">GraphicsImportGetImageDescription</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataOffsetAndSize" target="_top">GraphicsImportGetDataOffsetAndSize</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportValidate" target="_top">GraphicsImportValidate</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMetaData" target="_top">GraphicsImportGetMetaData</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDoesDrawAllPixels" target="_top">GraphicsImportDoesDrawAllPixels</a></code></p></li>
</ul>
<p>Format-specific graphics importers always implement <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetImageDescription" target="_top">GraphicsImportGetImageDescription</a></code> and may optionally implement the remaining functions listed above.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SettingDrawingParameters" title="Setting Drawing Parameters"></a>
<h2>Setting Drawing Parameters</h2>
<p>The functions listed below allow you to specify various parameters for drawing operations, such as clipping, scaling, graphics mode, and decompression quality. All of these functions are based on corresponding routines in the Image Compression Manager for working with image decompression sequences:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetBoundsRect" target="_top">GraphicsImportSetBoundsRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetBoundsRect" target="_top">GraphicsImportGetBoundsRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetMatrix" target="_top">GraphicsImportSetMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMatrix" target="_top">GraphicsImportGetMatrix</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetClip" target="_top">GraphicsImportSetClip</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetClip" target="_top">GraphicsImportGetClip</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetGraphicsMode" target="_top">GraphicsImportSetGraphicsMode</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetGraphicsMode" target="_top">GraphicsImportGetGraphicsMode</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetQuality" target="_top">GraphicsImportSetQuality</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetQuality" target="_top">GraphicsImportGetQuality</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetSourceRect" target="_top">GraphicsImportSetSourceRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetSourceRect" target="_top">GraphicsImportGetSourceRect</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetProgressProc" target="_top">GraphicsImportSetProgressProc</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetProgressProc" target="_top">GraphicsImportGetProgressProc</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DrawingImages" title="Drawing Images"></a>
<h2>Drawing Images</h2>
<p>These functions are used to draw images:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetGWorld" target="_top">GraphicsImportSetGWorld</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetGWorld" target="_top">GraphicsImportGetGWorld</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDraw" target="_top">GraphicsImportDraw</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SavingImageFiles" title="Saving Image Files"></a>
<h2>Saving Image Files</h2>
<p>Graphics import components can save data in several formats, including QuickDraw pictures and QuickTime Image files. This capability is only needed by applications that perform file format translation. Applications that only wish to draw the image can use the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDraw" target="_top">GraphicsImportDraw</a></code> function.</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSaveAsPicture" target="_top">GraphicsImportSaveAsPicture</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSaveAsQuickTimeImageFile" target="_top">GraphicsImportSaveAsQuickTimeImageFile</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetAsPicture" target="_top">GraphicsImportGetAsPicture</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportExportImageFile" target="_top">GraphicsImportExportImageFile</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetExportImageTypeList" target="_top">GraphicsImportGetExportImageTypeList</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportDoExportImageFileDialog" target="_top">GraphicsImportDoExportImageFileDialog</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetExportSettingsAsAtomContainer" target="_top">GraphicsImportGetExportSettingsAsAtomContainer</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetExportSettingsFromAtomContainer" target="_top">GraphicsImportSetExportSettingsFromAtomContainer</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GettingMIMETypes" title="Getting MIME Types"></a>
<h2>Getting MIME Types</h2>
<p>Your graphics import component can support  MIME types that correspond to graphics formats it supports. To make a list of these MIME types available to applications or other software, it must implement this function:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMIMETypeList" target="_top">GraphicsImportGetMIMETypeList</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SpecifyingtheDataSource" title="Specifying the Data Source"></a>
<h2>Specifying the Data Source</h2>
<p>Graphics importer components use QuickTime data handler components to obtain their data. Applications, however, will use the graphics importer component functions described in this section, rather than directly calling a data handler. These functions allow the data source to be a file, a handle, or a QuickTime data reference.</p>
<p>You do not need to call the functions in this section if you use one of the <code>GetGraphicsImporter</code> functions. The <code>GetGraphicsImporter</code> functions automatically set the graphics importer component’s data source. You only need to use these functions if you open the graphics importer component directly.</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetDataFile" target="_top">GraphicsImportSetDataFile</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataFile" target="_top">GraphicsImportGetDataFile</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetDataHandle" target="_top">GraphicsImportSetDataHandle</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataHandle" target="_top">GraphicsImportGetDataHandle</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetDataReference" target="_top">GraphicsImportSetDataReference</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataReference" target="_top">GraphicsImportGetDataReference</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportSetDataReferenceOffsetAndLimit" target="_top">GraphicsImportSetDataReferenceOffsetAndLimit</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetDataReferenceOffsetAndLimit" target="_top">GraphicsImportGetDataReferenceOffsetAndLimit</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-RetrievingImageData" title="Retrieving Image Data"></a>
<h2>Retrieving Image Data</h2>
<p>This function is used by format-specific graphics import components to read data from the data source; it is implemented by the base graphics importer:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportReadData" target="_top">GraphicsImportReadData</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GraphicsImporterFlagsforGammaCorrection" title="Graphics Importer Flags for Gamma Correction"></a>
<h2>Graphics Importer Flags for Gamma Correction</h2>
<p>You can set the <code>kGraphicsImporterDontDoGammaCorrection</code> flag when you want to tell the Graphics Importer not to perform gamma correction</p>

<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kGraphicsImporterDontDoGammaCorrection = 1L<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Term</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Definition</p></th>
</tr>


<tr>
<td  scope="row"><p><code>kGraphicsImporterDontDoGammaCorrection</code></p></td>
<td ><p>Specifies not to perform a  gamma correction.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ImageDescriptionAtomsinQuickTimeImageFiles" title="Image Description Atoms in QuickTime Image Files"></a>
<h2>Image Description Atoms in QuickTime Image Files</h2>
<p>These atoms may appear in QuickTime image files:</p>

<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    quickTimeImageFileImageDescriptionAtom = FOUR_CHAR_CODE('idsc'),<span></span></pre></td></tr><tr><td scope="row"><pre>    quickTimeImageFileImageDataAtom = FOUR_CHAR_CODE('idat'),<span></span></pre></td></tr><tr><td scope="row"><pre>    quickTimeImageFileMetaDataAtom = FOUR_CHAR_CODE('meta'),<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-ColorSyncAtomsinQuickTimeImageFiles" title="ColorSync Atoms in QuickTime Image Files"></a>
<h2>ColorSync Atoms in QuickTime Image Files</h2>
<p>QuickTime includes a  ColorSync atom type, which can be used to store ColorSync profile information:</p>

<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    quickTimeImageFileColorSyncProfileAtom = FOUR_CHAR_CODE('iicc')<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-GraphicsImporterComponentType" title="Graphics Importer Component Type"></a>
<h2>Graphics Importer Component Type</h2>
<p>Graphics importer components have this component type:</p>

<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsImporterComponentType = 'grip'<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-MIMETypeList" title="MIME Type List"></a>
<h2>MIME Type List</h2>
<p>The <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsImportGetMIMETypeList" target="_top">GraphicsImportGetMIMETypeList</a></code> function returns a list of the MIME types supported by a graphics importer component. This list is contained in the QT atom container described in this section.</p>
<p>At the top level of the atom container are three atoms for each supported MIME type. The atoms whose IDs are 1 describe the first supported MIME type, the atoms whose IDs are 2 describe the second supported MIME type, and so on. Note that the IDs have to be consecutive.</p>
<ul class="ul">
<li class="li"><p>An atom of type <code>kMimeInfoMimeTypeTag</code> contains a string that identifies the MIME type, such as <code>image/jpeg</code> or <code>image/x-jpeg</code>.</p></li>
<li class="li"><p>The atom of type <code>kMimeInfoFileExtensionTag</code> contains a string that specifies likely file extensions for files of this MIME type, such as <code>jpg</code>, <code>jpe</code>, and <code>jpeg</code>. If there is more than one extension, the extensions are separated by commas.</p></li>
<li class="li"><p>The atom of type <code>kMimeInfoDescriptionTag</code> contains a string describing the MIME type for end users, such as <code>JPEG</code> <code>Image</code>. These are neither Pascal nor C strings; they are just ASCII characters.</p></li>
</ul>
<p>Figure 2-4 illustrates a MIME type list.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-DontLinkElementID_13" title="Figure 2-4A MIME type list"></a><p><strong>Figure 2-4&nbsp;&nbsp;</strong>A MIME type list</p><img src = "../Art/refImporter-5.jpg" alt = "A MIME type list" ></div><br/>




        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../B-Chapter/2AboutGraphicsImport.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../D-Chapter/4GraphicsExporterCom.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-01-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/ImportExport/DataExchange/C-Chapter/3GraphicsImporterCom.html%3Fid%3DTP40000903-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/ImportExport/DataExchange/C-Chapter/3GraphicsImporterCom.html%3Fid%3DTP40000903-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/ImportExport/DataExchange/C-Chapter/3GraphicsImporterCom.html%3Fid%3DTP40000903-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
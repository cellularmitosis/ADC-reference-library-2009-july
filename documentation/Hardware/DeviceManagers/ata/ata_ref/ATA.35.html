<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> ATA_DrvrDeregister </TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b>	<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> <a href="../../devicemgrs.html">Device Managers and Drivers</a>	<b>&gt;</b> <a href="../ata.html" target="_top">ATA Devices</a>	<b>&gt;</b> ATA Device Software Guide		</font></td>	</tr>	</table><br><!-- end of path --><DIV><!-- top navigation --><P><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.34.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.36.html"><img src="images/next.gif" border="0"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=1259"> </A>ATA_DrvrDeregister </H3><P CLASS="T0.Text0"><A NAME="pgfId=1260"> </A>The <TT CLASS="cv">ATA_DrvrDeRegister</TT> function deregisters the driver reference number passed in for the selected drive. After successful completion of this function, the driver reference number for the drive is set to 0, which indicates that there is no driver in control of  this device. <A NAME="marker=1261"> </A><A NAME="marker=1262"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1263"> </A>The manager function code for the <TT CLASS="cv">ATA_DrvrDeRegister</TT> function is $87. </P><P CLASS="T1.Text1"><A NAME="pgfId=1264"> </A>For notify-all driver deregistration, the <TT CLASS="cv">ataEHandlerPtr</TT> field is used to match the entry (the <TT CLASS="cv">deviceID</TT> field is invalid for the notify-all driver registration/deregistration). If a driver is registered as both a &quot;notify-all&quot; and for a specific device, the driver must deregister for each separately. </P><P CLASS="T1.Text1"><A NAME="pgfId=1265"> </A>All &quot;notify-all&quot; device drivers must deregister using the ata parameter block version 2. The version 1 and version 2 or greater parameter blocks for this function are as follows:</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=14903"> </A> <table><tr><td valign="top" colspan=2 scope="row"><tt>typedef</tt></td><td valign="top"><tt>struct</tt></td><td valign="top"><tt>/* Driver registration */<BR>/* structure for ataPBVers 1 */<BR></tt></td><tr><tr><td colspan=4>{</td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>ataPBHdr</tt></td><td width="100" valign="top"></td><td width="200" valign="top"><tt>/* ataPBHdr parameter block */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt16</tt></td><td width="100" valign="top"><tt>drvrRefNum;</tt></td><td width="200" valign="top"><tt>/* Not used*/</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>FlagReserved;</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>deviceNextID;</tt></td><td width="200" valign="top"><tt>/* Not used */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt16</tt></td><td width="100" valign="top"><tt>Reserved[21];</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td colspan=4 scope="row">} ataDrvrRegister;</tt></td></tr></CODE></table><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=14907"> </A>  <P>&nbsp;</p><table><tr><td valign="top" colspan=2 scope="row"><tt>typedef</tt></td><td valign="top"><tt>struct<tt></td><td valign="top"><tt>/* Driver registration */<BR>/* structure for ataPBVers 2 */<BR>/* or greater */<BR></tt></td></tr><tr><td colspan=4 scope="row">{</td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>ataPBHdr</tt></td><td width="100" valign="top"></td><td width="200" valign="top"><tt>/* ataPBHdr parameter block */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt16</tt></td><td width="100" valign="top"><tt>drvrRefNum;</tt></td><td width="200" valign="top"><tt>/* --&gt; Driver reference number */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>drvrFlags;</tt></td><td width="200" valign="top"><tt>/* --&gt; Driver flags, set to 0 */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>deviceNextID;</tt></td><td width="200" valign="top"><tt>/* Not used */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt16</tt></td><td width="100" valign="top"><tt>Reserved;</tt></td><td width="200" valign="top"><tt>/* Reserved (should be 0) */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>ProcPtr</tt></td><td width="100" valign="top"><tt>ataEHandlerPtr;</tt></td><td width="200" valign="top"><tt>/* --&gt; Event handler */<BR>/* routine pointer */<br></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt32</tt></td><td width="100" valign="top"><tt>drvrContext;</tt></td><td width="200" valign="top"><tt>/* --&gt; Value to pass in with */<BR>/* event handler */ <BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt32</tt></td><td width="100" valign="top"><tt>ataEventMask;</tt></td><td width="200" valign="top"><tt>/* --&gt; Masks of various events */<BR>/* for event handlers */<BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt16</tt></td><td width="100" valign="top"><tt>Reserved[14];</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td colspan=4 scope="row"><tt>} ataDrvrRegister;</tt></td></tr></CODE></table><h4>Field descriptions</h4><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14909"> </A><TT CLASS="cv">ataPBHdr</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1289"> </A>See the definition of the <TT CLASS="cv"><A HREF="ATA.26.html" CLASS="XRef">ataPBHr</TT> parameter block</A>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14918"> </A><TT CLASS="cv">drvrRefNum</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1290"> </A>Not used for this function.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14927"> </A><TT CLASS="cv">drvrFlags</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1291"> </A>No bits have been defined for this field. This field shall be set to 0 in order to insure compatibility in the future.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14936"> </A><TT CLASS="cv">deviceNextID</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1292"> </A>Not used for this function.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14945"> </A><TT CLASS="cv">Reserved</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1293"> </A>Reserved</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14954"> </A><TT CLASS="cv">ataEHandlerPtr</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1294"> </A>A pointer to the driver event handler routine. This field is only used for "notify-all" driver deregistration. This field is not used for other driver deregistration. Since this field is used to identify the correct &quot;notify-all&quot; driver entry, this field must be valid for &quot;notify-all&quot; driver deregistration.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14963"> </A><TT CLASS="cv">drvrContext</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1295"> </A>Not used for this function.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14972"> </A><TT CLASS="cv">ataEventMask</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1296"> </A>Not used for this function.</DD></DL COMPACT><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=1297"> </A>RESULT CODES</H5><P CLASS="T0.Text0"><A NAME="pgfId=1301"> </A>See <A HREF="ATA.3a.html#37212" CLASS="XRef">Table&nbsp;A-1</A> for possible result codes returned by the ATA Manager.</P></DIV><HR>&#169 1999 Apple Computer, Inc. &#151; (Last Updated 9 Mar 99) <P><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.34.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.36.html"><img src="images/next.gif" border="0"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script></a><!-- end Show/Hide frames --></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
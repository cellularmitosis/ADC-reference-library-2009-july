<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>64-Bit Transition Guide for Cocoa: 64-Bit Changes To the Cocoa API</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="64-Bit Changes To the Cocoa API"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004247-CH4" title="64-Bit Changes To the Cocoa API"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40004247-CH1-SW1">64-Bit Transition Guide for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../MovingTo64Bit/MovingTo64Bit.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ConvertingExistingApp/ConvertingExistingApp.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40004247-CH4-SW9" title="64-Bit Changes To the Cocoa API"></a><h1>64-Bit Changes To the Cocoa API</h1><p>The 64-bit changes to the Cocoa API are largely targeted at those parameter and return types required for 64-bit addressing. However, consistency, ease of porting, and "impedance match" are also goals and thus most 32-bit quantities in the API are growing to 64 bits. The Cocoa 64-bit changes fall into three major categories: integers, floating-point values, and enumeration constants.</p><p>If you are a creating a new Cocoa application and you want to make it 64-bit capable from the outset, you need to incorporate the API changes into your code. You also might want to maintain a source base that ensures binary compatibility and source compatibility for both 32-bit and 64-bit architectures. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004247-CH4-SW10" title="Note"></a><p><strong>Note:</strong>&nbsp;For the procedure for porting <em>existing</em> projects to 64-bit, see <span class="content_text"><a href="../ConvertingExistingApp/ConvertingExistingApp.html#//apple_ref/doc/uid/TP40004247-CH5-SW1">“Converting an Existing Application to 64-Bit.”</a></span></p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="64BitChangesCocoa.html#//apple_ref/doc/uid/TP40004247-CH4-SW11">Integers</a>
				
			<br/>
			
        
			
			
				<a href="64BitChangesCocoa.html#//apple_ref/doc/uid/TP40004247-CH4-SW2">Building 32-Bit Like 64-Bit</a>
				
			<br/>
			
        
			
			
				<a href="64BitChangesCocoa.html#//apple_ref/doc/uid/TP40004247-CH4-SW13">Floating-Point Values</a>
				
			<br/>
			
        
			
			
				<a href="64BitChangesCocoa.html#//apple_ref/doc/uid/TP40004247-CH4-SW8">Enumeration Constants</a>
				
			<br/>
			
        
			
			
				<a href="64BitChangesCocoa.html#//apple_ref/doc/uid/TP40004247-CH4-SW14">Other Related Changes (and Non-Changes)</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40004247-CH4-SW11" title="Integers"></a><h2>Integers</h2><p>The biggest 64-bit change in the Cocoa API is the introduction of the <code>NSInteger</code> and <code>NSUInteger</code> data types. These two types now replace most occurrences of <code>int</code> and <code>unsigned int</code> in the framework headers. The parameter and return types that remain as  <code>int</code> and <code>unsigned int</code> in Cocoa header files are unchanged for one of two reasons: </p><ul class="ul"><li class="li"><p>They need to be a fixed size, </p></li><li class="li"><p>They need to correspond with those defined by another API, such as file descriptors, Mach ports, and four-character codes.</p></li></ul><p>On 64-bit architectures, <code>NSInteger</code> and <code>NSUInteger</code> are defined as <code>long</code> and <code>unsigned long</code>, respectively. To maintain binary compatibility with 32-bit applications, they are declared in the Foundation header file <code>NSObjCRuntime.h</code> using the <code>__LP64__</code> macro to distinguish between 32-bit and 64-bit builds, as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>#if __LP64__<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef long NSInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef unsigned long NSUInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>#else<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef int NSInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef unsigned int NSUInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>#endif<span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40004247-CH4-SW12" title="Note"></a><p><strong>Note:</strong>&nbsp;Although these conditional declarations help to preserve binary compatibility when project code is built for a 32-bit or a 64-bit architecture, it does not prevent some compatibility problems in source code. For example, different <code><!--a-->printf<!--/a--></code>-style type specifiers have to be used depending on whether the underlying type is <code>int</code> or <code>long</code>. For one approach toward resolving this incompatibility, see <span class="content_text"><a href="64BitChangesCocoa.html#//apple_ref/doc/uid/TP40004247-CH4-SW2">“Building 32-Bit Like 64-Bit.”</a></span></p></div><p>Additionally for the 64-bit initiative, many new methods have been added to the Cocoa frameworks with "integer" in their names. These methods are counterparts to other methods in the same class with "int" in their names; these methods need to continue dealing with values that are specifically <code>int</code>. The "integer" methods have parameter or return types of <code>NSInteger</code> or <code>NSUInteger</code> while the "int" methods accept or return values of the native types <code>int</code> or <code>unsigned int</code>. <span class="content_text">Table 2-1</span> lists the new methods.</p><a name="//apple_ref/doc/uid/TP40004247-CH4-SW1" title="Table 2-1&quot;Integer&quot; methods added to the Cocoa frameworks"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>"Integer" methods added to the Cocoa frameworks</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Methods</p></th></tr><tr><td  scope="row"><p><code>NSCoder</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html#//apple_ref/occ/instm/NSCoder/encodeInteger:forKey:" target="_top">encodeInteger:forKey:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html#//apple_ref/occ/instm/NSCoder/decodeIntegerForKey:" target="_top">decodeIntegerForKey:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSUserDefaults</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/setInteger:forKey:" target="_top">setInteger:forKey:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/integerForKey:" target="_top">integerForKey:</a></code></p><p>(Note: available since Mac OS X v10.0)</p></td></tr><tr><td  scope="row"><p><code>NSString</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/integerValue" target="_top">integerValue</a></code></p></td></tr><tr><td  scope="row"><p><code>NSCell</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/integerValue" target="_top">integerValue</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/setIntegerValue:" target="_top">setIntegerValue:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSControl</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/integerValue" target="_top">integerValue</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/setIntegerValue:" target="_top">setIntegerValue:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSScanner</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanInteger:" target="_top">scanInteger:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSNumber</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/integerValue" target="_top">integerValue</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/unsignedIntegerValue" target="_top">unsignedIntegerValue</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/initWithInteger:" target="_top">initWithInteger:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/initWithUnsignedInteger:" target="_top">initWithUnsignedInteger:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSNumber/numberWithInteger:" target="_top">numberWithInteger:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSNumber/numberWithUnsignedInteger:" target="_top">numberWithUnsignedInteger:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSActionCell</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSActionCell_Class/Reference/Reference.html#//apple_ref/occ/instm/NSActionCell/integerValue" target="_top">integerValue</a></code></p></td></tr></table></div><p>To set limits for the new <code>NSInteger</code> and <code>NSUInteger</code> types, <code>NSObjCRuntime.h</code> also defines the following constants: </p><div class="codesample"><table><tr><td scope="row"><pre>#define NSIntegerMax LONG_MAX<span></span></pre></td></tr><tr><td scope="row"><pre>#define NSIntegerMin LONG_MIN<span></span></pre></td></tr><tr><td scope="row"><pre>#define NSUIntegerMax LONG_MAX<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW2" title="Building 32-Bit Like 64-Bit"></a><h2>Building 32-Bit Like 64-Bit</h2><p>As shown in the previous section, Cocoa defines <code>NSInteger</code> and <code>NSUInteger</code> conditionally (using the <code>__LP64__</code> macro) so that, as long as the project consistently uses the new data types, the underlying primitive type varies according to whether the target architecture is 32-bit or 64-bit. </p><p>The <code>NS_BUILD_32_LIKE_64</code> preprocessor macro works in a different manner. It declares <code>NSInteger</code> to be <code>long</code> (instead of <code>int</code>) and <code>NSUInteger</code> to be <code>long unsigned int</code> even on 32-bit portions of the source base.  </p><div class="codesample"><table><tr><td scope="row"><pre>#if __LP64__ || NS_BUILD_32_LIKE_64<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef long NSInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef unsigned long NSUInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>#else<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef int NSInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>    typedef unsigned int NSUInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>#endif<span></span></pre></td></tr></table></div><p>This makes it possible to do something like the following without getting warnings. </p><div class="codesample"><table><tr><td scope="row"><pre>NSInteger i;<span></span></pre></td></tr><tr><td scope="row"><pre>printf("%ld", i);<span></span></pre></td></tr></table></div><p>The <code>NS_BUILD_32_LIKE_64</code> macro is useful when binary compatibility is not a concern, such as when building an application.</p><a name="//apple_ref/doc/uid/TP40004247-CH4-SW13" title="Floating-Point Values"></a><h2>Floating-Point Values</h2><p>Floating point quantities in the Core Graphics framework (Quartz), which are <code>float</code> on 32-bit architectures, are being expanded to <code>double</code> to provide a wider range and accuracy for graphical quantities. Core Graphics declares a new type for floating-point quantities, <code>CGFloat</code>, and declares it conditionally for both 32-bit and 64-bit. This change affects Cocoa because of its close dependency on Core Graphics. Where a parameter or return value in the Cocoa frameworks is a graphical quantity, <code>CGFloat</code> now replaces <code>float</code>.</p><p>The <code>CGFloat</code> changes made in the Foundation and, especially, the Application Kit are so numerous that its easier to point out the methods with floating-point parameters and return types that <em>don't</em> change to <code>CGFloat</code>; that is, they remain as <code>float</code>. These methods fall into certain categories, described in the captions to <span class="content_text">Table 2-2</span>, <span class="content_text">Table 2-3</span>, <span class="content_text">Table 2-4</span>, <span class="content_text">Table 2-5</span>, and <span class="content_text">Table 2-6</span>.  </p><a name="//apple_ref/doc/uid/TP40004247-CH4-SW3" title="Table 2-2Type-specific parameters and return values"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-2&nbsp;&nbsp;</strong>Type-specific parameters and return values</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Methods</p></th></tr><tr><td  scope="row"><p><code>NSActionCell</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSActionCell_Class/Reference/Reference.html#//apple_ref/occ/instm/NSActionCell/floatValue" target="_top">floatValue</a></code></p></td></tr><tr><td  scope="row"><p><code>NSCell</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/floatValue" target="_top">floatValue</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/setFloatValue:" target="_top">setFloatValue:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSControl</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/floatValue" target="_top">floatValue</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/setFloatValue:" target="_top">setFloatValue:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSString</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/floatValue" target="_top">floatValue</a></code></p></td></tr><tr><td  scope="row"><p><code>NSNumber</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/floatValue" target="_top">floatValue</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/initWithFloat:" target="_top">initWithFloat:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSNumber/numberWithFloat:" target="_top">numberWithFloat:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSScroller</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSScroller_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSScroller/setFloatValue:knobProportion:" target="_top">setFloatValue:knobProportion:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSPrinter</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSPrinter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSPrinter/floatForKey:inTable:" target="_top">floatForKey:inTable:</a></code>:</p></td></tr><tr><td  scope="row"><p><code>NSUserDefaults</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/floatForKey:" target="_top">floatForKey:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/setFloat:forKey:" target="_top">setFloat:forKey:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSScanner</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanFloat:" target="_top">scanFloat:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSKeyedArchiver</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html#//apple_ref/occ/instm/NSKeyedArchiver/encodeFloat:forKey:" target="_top">encodeFloat:forKey:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSKeyedUnarchiver</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html#//apple_ref/occ/instm/NSKeyedUnarchiver/decodeFloatForKey:" target="_top">decodeFloatForKey:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSCoder</code></p></td><td ><p><code><a href="../../../Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html#//apple_ref/occ/instm/NSCoder/encodeFloat:forKey:" target="_top">encodeFloat:forKey:</a></code></p><p><code><a href="../../../Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html#//apple_ref/occ/instm/NSCoder/decodeFloatForKey:" target="_top">decodeFloatForKey:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSByteOrder.h</code></p></td><td ><p>About a dozen "swap" functions.</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW4" title="Table 2-3Typesetting factors"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-3&nbsp;&nbsp;</strong>Typesetting factors</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Methods</p></th></tr><tr><td  scope="row"><p><code>NSATSTypesetter</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSATSTypesetter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSATSTypesetter/hyphenationFactor" target="_top">hyphenationFactor</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSATSTypesetter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSATSTypesetter/hyphenationFactorForGlyphAtIndex:" target="_top">hyphenationFactorForGlyphAtIndex:</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSATSTypesetter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSATSTypesetter/setHyphenationFactor:" target="_top">setHyphenationFactor:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSLayoutManager</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSLayoutManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSLayoutManager/hyphenationFactor" target="_top">hyphenationFactor</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSLayoutManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSLayoutManager/setHyphenationFactor:" target="_top">setHyphenationFactor:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSTypesetter</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSTypesetter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTypesetter/hyphenationFactor" target="_top">hyphenationFactor</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSTypesetter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTypesetter/setHyphenationFactor:" target="_top">setHyphenationFactor:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSParagraphStyle</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSParagraphStyle/hyphenationFactor" target="_top">hyphenationFactor</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSParagraphStyle/tighteningFactorForTruncation" target="_top">tighteningFactorForTruncation</a></code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW5" title="Table 2-4Media: frame rate, volume, animation percentage"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-4&nbsp;&nbsp;</strong>Media: frame rate, volume, animation percentage</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Methods</p></th></tr><tr><td  scope="row"><p><code>NSAnimation</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSAnimation_Class/Reference/Reference.html#//apple_ref/occ/instm/NSAnimation/frameRate" target="_top">frameRate</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSAnimation_Class/Reference/Reference.html#//apple_ref/occ/instm/NSAnimation/setFrameRate:" target="_top">setFrameRate:</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSAnimation_Class/Reference/Reference.html#//apple_ref/occ/instm/NSAnimation/currentValue" target="_top">currentValue</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSAnimation_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/animation:valueForProgress:" target="_top">animation:valueForProgress:</a></code></p></td></tr><tr><td  scope="row"><p><code>NSMovieView</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSMovieView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMovieView/setRate:" target="_top">setRate:</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSMovieView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMovieView/rate" target="_top">rate</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSMovieView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMovieView/setVolume:" target="_top">setVolume:</a></code></p><p><code><a href="../../../Reference/ApplicationKit/Classes/NSMovieView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMovieView/volume" target="_top">volume</a></code></p></td></tr><tr><td  scope="row"><p><code>NSSound</code></p></td><td ><p><code><a href="../../../Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSound/setVolume:" target="_top">setVolume:</a></code></p><p><code>volume</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW6" title="Table 2-5Compression factor"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-5&nbsp;&nbsp;</strong>Compression factor</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Methods</p></th></tr><tr><td  scope="row"><p><code>NSBitmapImageRep</code></p></td><td ><p><code>getCompression:factor:</code></p><p><code>setCompression:factor:</code></p><p><code>TIFFRepresentationUsingCompression:factor:</code></p><p><code>TIFFRepresentationOfImageRepsInArray:usingCompression:factor:</code></p></td></tr><tr><td  scope="row"><p><code>NSImage</code></p></td><td ><p><code>TIFFRepresentationUsingCompression:factor:</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW7" title="Table 2-6 Tablet-event pressure and rotation"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-6&nbsp;&nbsp;</strong> Tablet-event pressure and rotation</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Methods</p></th></tr><tr><td  scope="row"><p><code>NSEvent</code></p></td><td ><p><code>pressure</code></p><p><code>rotation</code></p><p><code>tangentialPressure</code></p><p><code>mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW8" title="Enumeration Constants"></a><h2>Enumeration Constants</h2><p>A problem with enumeration (<code>enum</code>) constants is that their data types are frequently indeterminate. In other words, <code>enum</code> constants are not predictably <code>unsigned int</code>. With conventionally constructed enumerations, the compiler actually sets the underlying type based on what it finds. The underlying type can be (signed) <code>int</code> or even <code>long</code>. Take the following example:  </p><div class="codesample"><table><tr><td scope="row"><pre>type enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    MyFlagError = -1,<span></span></pre></td></tr><tr><td scope="row"><pre>    MyFlagLow = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    MyFlagMiddle = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    MyFlagHigh = 2<span></span></pre></td></tr><tr><td scope="row"><pre>} MyFlagType;<span></span></pre></td></tr></table></div><p>The compiler looks at this declaration and, finding a negative value assigned to one of the member constants, declares the underlying type of the enumeration <code>int</code>. If the range of values for the members does not fit into an <code>int</code> or <code>unsigned int,</code> then the base type silently becomes 64-bit (<code>long</code>). The base type of quantities defined as enumerations can thus change silently size to accord with the values in the enumeration. This can happen whether you're compiling 32-bit or 64-bit. Needless to say, this situation presents obstacles for binary compatibility. </p><p>As a remedy for this problem, Apple has decided to be more explicit about the enumeration type in the Cocoa API. Instead of declaring arguments in terms of the enumeration, the header files now separately declare a type for the enumeration whose size can be specified. The members of the enumeration and their values are declared and assigned as before. For example, instead of this:</p><div class="codesample"><table><tr><td scope="row"><pre>typedef enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNullCellType = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    NSTextCellType = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    NSImageCellType = 2<span></span></pre></td></tr><tr><td scope="row"><pre>} NSCellType;<span></span></pre></td></tr></table></div><p>there is now this:</p><div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNullCellType = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    NSTextCellType = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    NSImageCellType = 2<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef NSUInteger NSCellType;<span></span></pre></td></tr></table></div><p>The enumeration type is defined in terms of <code>NSInteger</code> or <code>NSUInteger</code> to make the base enumeration type 64-bit capable on 64-bit architectures. For Mac OS X v10.5 all enumerations declared in the Cocoa frameworks now take this form. In some cases, an enumeration type is now declared where one had not existed before. </p><p>Unfortunately, this change affects type checking of enumeration constants; you can pass any integer value in a method parameter typed as, say, <code>NSCellType</code>, not just one of the values in the enumeration. However, the change does allow more specific typing of bit masks, which were previously declared as <code>unsigned int</code>. You can now use the <code>typedef</code>s for parameters which are bit masks. For instance, </p><div class="codesample"><table><tr><td scope="row"><pre>- (NSComparisonResult)compare:(NSString *)string options:(unsigned)mask;<span></span></pre></td></tr></table></div><p>can now be</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSComparisonResult)compare:(NSString *)string options:(NSStringCompareOptions)mask;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40004247-CH4-SW14" title="Other Related Changes (and Non-Changes)"></a><h2>Other Related Changes (and Non-Changes)</h2><p>The use of some of the other primitive C types in the Cocoa API are changing in the 64-bit initiative, while others are unaffected. The following summarizes the changes and non-changes:</p><ul class="ul"><li class="li"><p><code>char</code> and <code>short</code> — No changes in the Cocoa API.</p></li><li class="li"><p><code>long</code> — In versions of Mac OS X prior to version 10.5, the scripting and Apple event part of the Cocoa API used <code>long</code> for four-byte codes; these return types and parameter types are now changing to <code>FourCharCode</code>. </p></li><li class="li"><p><code>long long</code> — Prior to Mac OS X v10.5, the <code><a href="../../../Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFileHandle" target="_top">NSFileHandle</a></code> class used <code>long long</code> for file offsets, which gives a 64-bit value on both 32-bit and 64-bit architectures. This is unchanged.</p></li></ul><p>The Cocoa OpenGL API (including the classes <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLContext_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLContext" target="_top">NSOpenGLContext</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLPixelBuffer_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLPixelBuffer" target="_top">NSOpenGLPixelBuffer</a></code>, <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLPixelFormat" target="_top">NSOpenGLPixelFormat</a></code>, and <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLView" target="_top">NSOpenGLView</a></code>) follow the data-type changes made for the C OpenGL framework for Leopard by adopting the standard OpenGL types such as <code>GLint</code>, <code>GLsizei</code>, and <code>GLenum</code> for parameters and return values. These types were chosen in part to  maintain binary compatibility under 32-bit (where <code>long</code> and <code>int</code> are the same size).  </p><p>The Objective-C runtime API <code>(/usr/include/objc</code>) has undergone significant modification for Mac OS X v10.5. Most Cocoa developers don't directly call these functions, so these changes should not affect them. However, if you do use the Objective-C runtime API, you should be aware that there are implications for 64-bit binaries. If you are building your project 64-bit, you cannot use the old Objective-C runtime API. </p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../MovingTo64Bit/MovingTo64Bit.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ConvertingExistingApp/ConvertingExistingApp.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-03-03<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/Cocoa64BitGuide/64BitChangesCocoa/64BitChangesCocoa.html%3Fid%3DTP40004247-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/Cocoa64BitGuide/64BitChangesCocoa/64BitChangesCocoa.html%3Fid%3DTP40004247-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/Cocoa64BitGuide/64BitChangesCocoa/64BitChangesCocoa.html%3Fid%3DTP40004247-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
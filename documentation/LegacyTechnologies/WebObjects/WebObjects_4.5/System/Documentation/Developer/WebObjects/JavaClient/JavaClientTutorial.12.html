<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Creating a Model</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Creating a Java Client Application: A Tutorial</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="JavaClientTutorial.11.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="JavaClientTutorial.11.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="JavaClientTutorial.13.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><HR></DIV><H1><A NAME="pgfId=1006198"> </A>Creating a Model</H1><A NAME="pgfId=1006199"> </A>If you decide to create a model for your application, the wizard steps you through a succession of windows. The model file, when created, is given the name of your project, in this case <B>StudioManager.eomodeld</B>.</P><OL><LI><A NAME="pgfId=1006200"> </A>Choose an adaptor for your database server.<P><A NAME="pgfId=1006201"> </A>Select an adaptor for the database you want to use.<P><A NAME="pgfId=1006202"> </A>Click Next.</P><A NAME="pgfId=1006206"> </A></P><DIV><IMG SRC="images/Wizard3.gif"><P></DIV><A NAME="pgfId=1006207"> </A>An <I>adaptor</I> is a mechanism that connects your application to a particular database server. For each type of server you use, you need a separate adaptor. WebObjects provides adaptors for several relational database servers, such as OpenBase Lite, Informix, Oracle, and Sybase servers as well as the source code for a flat-file database adaptor. If you're working on a Windows platform, WebObjects also provides an ODBC adaptor for use with ODBC-compliant database sources. It also provides the source code from which you can build an adaptor for a flat-file database.</P><A NAME="pgfId=1006208"> </A>All adaptors expect you to specify the database to use. In addition, before you can gain access to the database, you must log in. Different databases require different login information, so each database's login panel looks different. This tutorial uses the single-user OpenBase Lite adaptor for of the Movies database that is pre-installed with Enterprise Objects Framework.</P><LI><A NAME="pgfId=1006209"> </A>Log into your chosen database server.<P><A NAME="pgfId=1006210"> </A>Select the Movies database.<P><A NAME="pgfId=1006211"> </A>Log into the database, filling in any required information.</P><A NAME="pgfId=1006215"> </A></P><DIV><IMG SRC="images/OpenBaseSetup.gif"><P></DIV><B>Note:</B>&nbsp;&nbsp;<A NAME="pgfId=1006216"> </A>If you are using the pre-installed OpenBase Lite database, click Browse, browse to the <B>/Local/Library/Databases/Movies.db</B> file (<B>\Apple\Local\Library\Databases\Movies.db</B> on Windows NT) and click Open. The filename now appears in the Database field.</P><B>Related Concepts:</B>&nbsp;&nbsp;<A NAME="pgfId=1006220"> </A><A HREF="JavaClientTutorial.3f.html#pgfId=1006080">Note to Oracle Users</A></P><A NAME="pgfId=1006221"> </A>After you log in, the wizard uses the selected adaptor to read the data dictionary (that is, schema information) from the database. From this dictionary it creates a default model, but before it does it lets you configure that model in four different ways.</P><LI><A NAME="pgfId=1006222"> </A>Choose options for the creation of your model.<P><A NAME="pgfId=1006223"> </A>Make sure every option is checked except &quot;Use Custom Enterprise objects&quot;.</P><A NAME="pgfId=1006227"> </A></P><DIV><IMG SRC="images/Wizard4.gif"><P></DIV><A NAME="pgfId=1006228"> </A>The basic model the wizard creates contains entities, attributes, and relationships. How complete this model is depends on how completely the schema information is inside your database server. For example, the wizard includes relationships in your model only if the server's schema information specifies foreign key definitions.</P><A NAME="pgfId=1006229"> </A>Using the options in this page, you can supplement the basic model with additional information. (Note that the wizard doesn't modify the underlying database.) The following sections describe each option:</P><H4><A NAME="pgfId=1006230"> </A>Assign primary keys to all entities</H4><A NAME="pgfId=1006231"> </A>Enterprise Objects Framework uses primary keys as unique identifiers of enterprise objects with which it maps these objects to the appropriate database row. Therefore, you must assign a primary key to each entity you use in your application. The wizard automatically assigns primary keys to the model if it finds primary-key information in the database's schema information. Checking this box causes the wizard later on to prompt you to choose primary keys if they aren't defined in the database's schema information. </P><H4><A NAME="pgfId=1006232"> </A>Ask about relationships</H4><A NAME="pgfId=1006233"> </A>If there are foreign-key definitions in the database's schema information, the wizard includes the corresponding relationships in the basic model. However, a definition in the schema information might not provide enough information for the wizard to set all of a relationship's options. Checking this box causes the wizard to prompt you later to provide the additional information it needs to complete the relationship configurations.</P><H4><A NAME="pgfId=1006234"> </A>Ask about stored procedures</H4><A NAME="pgfId=1006235"> </A>Checking this box causes the wizard to read stored procedures from the database's schema information, display them, and allow you to choose which to include in your model.</P><H4><A NAME="pgfId=1006236"> </A>Use custom enterprise objects</H4><A NAME="pgfId=1006237"> </A>An entity maps a table to enterprise objects by storing the name of a database table (MOVIE, for example) and the name of the corresponding enterprise object class (a Java class such as Movie). When deciding what class to associate with an entity, you have two choices: EOGenericRecord or a custom class. EOGenericRecord is a class whose instances store as key-value pairs an entity's properties and the data associated with each property. They do nothing else.</P><A NAME="pgfId=1006238"> </A>If you don't check the &quot;Use custom enterprise objects&quot; box, the wizard maps all your database tables to EOGenericRecord. If you do check this box, the wizard maps all your database tables to custom classes. The wizard assumes that each entity is to be represented by a custom class with the same name. For example, a table named MOVIE has an entity named Movie, whose corresponding custom class is also named Movie.</P><A NAME="pgfId=1006239"> </A>Use a custom enterprise object class only when you need to add business logic; otherwise use EOGenericRecord. Note that this option, if selected, only assigns a class name; it does not create a class. The class of an entity remains EOGenericRecord, even if EOModeler shows a different class name, until you create the &quot;skeletal&quot; class file and add this file to the project. You'll perform this step later using EOModeler. </P><LI><A NAME="pgfId=1006240"> </A>Select the database tables to include your model.<P><A NAME="pgfId=1006241"> </A>Select the following tables: DIRECTOR, MOVIE, MOVIE_ROLE, PLOT_SUMMARY, REVIEW, STUDIO, TALENT, TALENT_PHOTO, and VOTING.</P><A NAME="pgfId=1006245"> </A></P><DIV><IMG SRC="images/Wizard5.gif"><P></DIV><A NAME="pgfId=1006246"> </A>After you select the database tables for your model, the next panel displayed depends upon your database. Unless you are using a database that stores primary key information in its database server's schema information, the wizard now asks you to specify a primary key for each entity.</P><LI><A NAME="pgfId=1006247"> </A>Specify the primary keys for your entities.<P><A NAME="pgfId=1006248"> </A>See the table below.</P><A NAME="pgfId=1006252"> </A></P><DIV><IMG SRC="images/Wizard9.gif"><P></DIV><A NAME="pgfId=1006294"> </A>The entities in your model should have the following primary keys assigned:</P><TABLE BORDER="1" CELLPADDING="3"><TR><TH ROWSPAN="1" COLSPAN="1"><B><A NAME="pgfId=1006255"></A>The entity...</B></TH><TH ROWSPAN="1" COLSPAN="1"><A NAME="pgfId=1006257"> </A>Should have the primary key attributes...</TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006259"> </A>Director</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006261"> </A>movieId and talentId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006263"> </A>Movie</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006265"> </A>movieId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006267"> </A>MovieRole</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006269"> </A>movieId and talentId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006271"> </A>PlotSummary</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006273"> </A>movieId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006275"> </A>Review</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006277"> </A>reviewId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006279"> </A>Studio</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006281"> </A>studioId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006283"> </A>Talent</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006285"> </A>talentId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006287"> </A>TalentPhoto</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006289"> </A>talentId</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006291"> </A>Voting</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TableBody"><A NAME="pgfId=1006293"> </A>movieId</P></TD></TR></TABLE><P><LI><A NAME="pgfId=1006295"> </A>Specify referential integrity rules for the relationships in the model.<P><A NAME="pgfId=1006296"> </A>Select the Nullify button in each &quot;referential integrity&quot; window that appears.</P><A NAME="pgfId=1006300"> </A></P><DIV><IMG SRC="images/Wizard6.gif"><P></DIV><A NAME="pgfId=1006301"> </A>If you're using a database that stores foreign key definitions in its database server's schema information, the wizard reads them and creates corresponding relationships in your model. (The naming convention for relationships varies according to the adaptor you're using.) The wizard now asks you to specify referential integrity rules for the relationships so it can further configure them. </P><H4><A NAME="pgfId=1006302"> </A><I>&lt;Source object&gt;</I> owns its <I>&lt;destination&gt;</I> objects</H4><A NAME="pgfId=1006303"> </A>This option specifies that a destination object in a relationship can't exist without its source object; the source object is said to &quot;own&quot; the destination object or objects in the relationship. For example, consider the case of Movie's to-many relationship to MovieRoles, which it owns. When a MovieRole is removed from its Movie's array of MovieRoles, the MovieRole is deleted--deleted in memory and deleted in the database.</P><H4><A NAME="pgfId=1006304"> </A>When <I>&lt;source object&gt; </I>is deleted</H4><A NAME="pgfId=1006305"> </A>This set of options specifies what to do when the source object in a relationship is deleted. </P><UL><LI><A NAME="pgfId=1006306"> </A><B>Nullify</B>. Specifies that when the source object is deleted, any reciprocal relationship that the destination object has with the source object is set to <B>null</B>.<P><LI><A NAME="pgfId=1006307"> </A><B>Cascade</B>. Specifies that when a source object is deleted, the source's destination objects should also be deleted--again, deleted in memory and correspondingly in the database. <P><LI><A NAME="pgfId=1006308"> </A><B>Deny</B>. Specifies that if the relationship's source (for instance, a Talent) has any destination objects (MovieRoles), then the source object can't be deleted. <P><LI CLASS="TaskNumber"><A NAME="pgfId=1006309"> </A>Select the stored procedures you want to include in your model.<P></UL><P CLASS="TaskSubStep"><A NAME="pgfId=1006310"> </A>This panel lists the stored procedures defined in your database, with all procedures selected by default.<P><A NAME="pgfId=1006311"> </A>Click Next.</P><A NAME="pgfId=1006315"> </A></P><DIV><IMG SRC="images/Wizard7.gif"></DIV><P></OL><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 13 Sep 99)<P><A HREF="JavaClientTutorial.11.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="JavaClientTutorial.11.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="JavaClientTutorial.13.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr></BODY></HTML>
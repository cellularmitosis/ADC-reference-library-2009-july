<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Target Management (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING43></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-42.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-44.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-21.html"><B>Part 1 - MacApp Theory and Architecture</B></A><BR><DD><A HREF="MacAppProgGuide-40.html"><B>Chapter 5 - Events and Commands</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING43-0></A>
<H1><A NAME=MARKER-9-127></A><A NAME=MARKER-2-128></A>Target Management</H1>
 <A NAME=MARKER-2-129></A><A HREF=MacAppProgGuide-42.html#MARKER-9-80>"Target Chain Dispatching," beginning on page 107</A>, describes how MacApp dispatches menu commands and key events to event-handler objects in the target chain. The command or event is passed to each object in the target chain, starting with the current target object, until one of the objects handles it.<P>
 The current target object can change frequently during execution of your application. Managing this process is known as <A NAME=MARKER-2-130></A><B>target management</B>. The most common target objects are views, documents, and the application object. As part of MacApp's target management, these objects are given the opportunity to<P>
<UL>
<LI>get ready to receive events
<LI>validate input
<LI>perform cleanup before relinquishing target status<P>
</UL>
 The next sections describe MacApp's target management.<P>
<A NAME=HEADING43-7></A>
<H2>Automatic Target Changes</H2>
 <A NAME=MARKER-2-131></A>MacApp performs many target changes automatically:<P>
<UL>
<LI> When the user clicks in a view, MacApp checks the <CODE>fWantsToBeTarget</CODE> field to see if the view wants to become the target. If <CODE>fWantsToBeTarget</CODE> has the value <CODE>TRUE</CODE>, or if the <CODE>WantsToBeTarget</CODE> method has been overridden to always return the value <CODE>TRUE</CODE>, MacApp makes the view the current target object.<P>
Note that a view that has targetable subviews should not want to be a target itself. It will receive events anyway, whenever one of its subviews is targeted.
<LI> When a window is deactivated, MacApp makes the application itself the target object until another window is activated.
<LI> When the current target is a text entry view and the user presses the Tab key, MacApp switches the target to the next view in the current window that has been properly defined. For more information on tabbing, see <A HREF=MacAppProgGuide-69.html#MARKER-9-301>"Tabbing Between Views," beginning on page 243</A>.<A NAME=MARKER-2-132></A>
<LI>When the active window changes, MacApp sets the current target object to the target view of the new active window. The target view of the window is specified in its <CODE>'View'</CODE> resource but can also be specified in your code. <P>
</UL>
 <A HREF=#MARKER-9-133>Figure 5-6</A> shows a target change due to window activation. The document window "untitled 2" is in front. Its text view is the current target object and receives events such as data entry keystrokes. If an event isn't handled by the text view, it is passed on to its superview, a scroller. If the event isn't handled by the scroller, it is passed on to the other objects in the target chain, a window, a document, and finally the application object.<P>
<B>Figure 5-6  <A NAME=MARKER-9-133></A>MacApp target chain as affected by window activation</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/MacApp_PG-L-032.gif"><P>
 When the user clicks the back window, "untitled", that window is activated and its target view becomes the current target object. In this case, the target is again a text view, with a hierarchy (and a target chain) similar to the previous view. Both chains end at the application object. (This behavior can vary if the user clicks draggable data in the back window, as described in <A HREF=MacAppProgGuide-42.html#MARKER-9-68>"Mouse-Down Events," beginning on page 105</A>.)<P>
<A NAME=HEADING43-18></A>
<H2><A NAME=MARKER-2-134></A>Manual Target Changes</H2>
 You can modify MacApp's default behavior by specifically setting the current target object. The <CODE>TEventHandler</CODE> class provides the <CODE>BecomeTarget</CODE> method for this purpose. To be sure an event-handler object is willing and eligible to become the target, you can call its <CODE><A NAME=MARKER-2-135></A>WantsToBeTarget</CODE> method before calling its <CODE><A NAME=MARKER-2-136></A>BecomeTarget</CODE> method. The <CODE>BecomeTarget</CODE> method performs target validation and returns <CODE>TRUE</CODE> if the target change succeeded. Target validation is described in the next section.<A NAME=MARKER-2-137></A><P>
<A NAME=HEADING43-20></A>
<H2>Target Validation</H2>
 When MacApp attempts to change the current target object, or when you attempt to change the target in your code, the current target object may not be ready to give up being the target. For example, the target might be a text entry view in a dialog box that contains invalid information.<P>
 <B>Target validation</B> is the process of allowing the current target object to validate its data before a target change and refuse to change if the data is invalid. The <CODE>BecomeTarget</CODE> method performs target validation by calling the <CODE><A NAME=MARKER-2-138></A>ResignTarget</CODE> method of the current target object.<P>
 The <CODE>ResignTarget</CODE> method calls the <CODE><A NAME=MARKER-2-139></A>WillingToResignTarget</CODE> method of the current target object. The default version of this method returns 0, indicating that it <I>is</I> willing to resign. If an object is <I>not</I> willing to resign, <CODE>ResignTarget</CODE> calls the <CODE><A NAME=MARKER-2-302></A>TargetValidationFailed</CODE> method of the target object. You can override <CODE>TargetValidationFailed</CODE> to display an alert box--for example, to tell the user why the data in a text entry field is invalid.<P>
<A NAME=HEADING43-24></A>
<H2>Target Change Notification</H2>
 Whenever the target changes, MacApp notifies the old and new target objects. It calls the <CODE>ResignedTarget</CODE> method of the old target object and calls the <CODE>BecameTarget</CODE> method of the new target object. The default versions of these methods do nothing, but you can override them to let your objects prepare to receive events or perform cleanup before relinquishing target status.<A NAME=MARKER-2-141></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-42.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-44.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

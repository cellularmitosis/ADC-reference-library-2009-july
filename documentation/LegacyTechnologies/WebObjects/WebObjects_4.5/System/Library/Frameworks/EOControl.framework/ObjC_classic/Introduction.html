<HTML>		<HEAD>		<TITLE>					</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOControl Reference</font><br><br><!--end of path --><a href="EOControlTOC.html"><img src="../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <br><h1><FONT COLOR="#000066">TheEOControl Framework</FONT></h1><br><blockquote><b>Framework: </b>System/Library/Frameworks/EOControl.framework</blockquote><blockquote><b>Header File Directories: </b>System/Library/Frameworks/EOControl.framework/Headers</blockquote><br><h2>Introduction</h2><p>The EOControl framework defines one of the layers of the EnterpriseObjects Framework architecture-the control layer. It providesan infrastructure for enterprise objects that is independent ofyour application's user interface and its storage mechanism. Thecontrol layer dynamically manages the interaction between enterpriseobjects, the access layer, and the interface layer by:</p><ul><li>Tracking changes to enterprise objects</li><li>Prompting the user interface to change when object valueschange</li><li>Prompting the database to change when changes to objects arecommitted</li><li>Managing undo in the object graph</li><li>Managing uniquing (the mechanism by which Enterprise ObjectsFramework uniquely identifies enterprise objects and maintains theirmapping to stored data in the database)</li></ul><p>The control layer's major areas of responsibility and thekey classes involved are described in the following table:</p><br><table border = "1"><tr><td scope="row"><b>Responsibility</b></td><td><b>Classes</b></td></tr><tr><td scope="row"> <a frame= "conv" href="#BIADGEAG">"Tracking Enterprise Objects Changes"</a></td><td> <a frame= "conv" href="Classes/EOObserverCenter.html#EOObserverCenter">EOObserverCenter</a> <a frame= "conv" href="Classes/EODelayedObserverQueue.html#EODelayedObserverQueue">EODelayedObserverQueue</a> <a frame= "conv" href="Classes/EODelayedObserver.html#EODelayedObserver">EODelayedObserver</a> <a frame= "conv" href="Classes/EOObserverProxy.html#EOObserverProxy">EOObserverProxy</a> <a frame= "conv" href="Protocols/EOObserving.html#BAFBAHEE">EOObserving</a> (protocol)</td></tr><tr><td scope="row"> <a frame= "conv" href="#BIACAIJE">"Object Storage Abstraction"</a></td><td> <a frame= "conv" href="Classes/EOObjectStore.html#EOObjectStore">EOObjectStore</a> <a frame= "conv" href="Classes/EOCooperatingObjStr.html#EOCooperatingObjectStore">EOCooperatingObjectStore</a> <a frame= "conv" href="Classes/EOObjectStoreCoordinator.html#EOObjectStoreCoordinator">EOObjectStoreCoordinator</a> <a frame= "conv" href="Classes/EOGlobalID.html#EOGlobalID">EOGlobalID</a> <a frame= "conv" href="Classes/EOKeyGlobalID.html#EOKeyGlobalID">EOKeyGlobalID</a> <a frame= "conv" href="Classes/EOTemporaryGlobalID.html#EOTemporaryGlobalID">EOTemporaryGlobalID</a></td></tr><tr><td scope="row">Queryspecification</td><td> <a frame= "conv" href="Classes/EOFetchSpecification.html#BGGBIIBH">EOFetchSpecification</a> <a frame= "conv" href="Classes/EOQualifier.html#BBIDFIHI">EOQualifier</a> <a frame= "conv" href="Classes/EOSortOrdering.html#sortOrderingWithKey_selector_">EOSortOrdering</a></td></tr><tr><td scope="row">Interactionwith enterprise objects</td><td> <a frame= "conv" href="Protocols/EOEnterpriseObject.html#BABBCHJH">EOEnterpriseObject</a> (basicenterprise object behavior) <a frame= "conv" href="Classes/EOClassDescription.html#EOClassDescription">EOClassDescription</a> (validationsupport) <a frame= "conv" href="Classes/EOGenericRecord.html#EOGenericRecord">EOGenericRecord</a></td></tr><tr><td scope="row">Simplesource of objects (for display groups)</td><td> <a frame= "conv" href="Classes/EODataSource.html#EODataSource">EODataSource</a> <a frame= "conv" href="Classes/EODetailDataSource.html#CHJDCJCI">EODetailDataSource</a></td></tr></table><br><p>The following sections describe each responsibility in greaterdetail.</p><br><a name = "BIADGEAG"><h2>Tracking Enterprise ObjectsChanges</h2></a><p>EOControl provides four classes and a protocol that form anefficient, specialized mechanism for tracking changes to enterpriseobjects and for managing the notification of those changes to interested observers.EOObserverCenter is the central manager of change notification.It records observers and the objects they observe, and it distributesnotifications when the observable objects change. Observers implementthe EOObserving protocol, which defines one method,  <a frame= "conv" href="Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a>.Observable objects (generally enterprise objects) invoke their  <a frame= "conv" href="Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/willChange">willChange</a> method before alteringtheir state, which causes all observers to receive an  <a frame= "conv" href="Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a> message.</p><p>The other three classes add to the basic observation mechanism.EODelayedObserverQueue alters the basic, synchronous change notificationmechanism by offering different priority levels, which allows observersto specify the order in which they're notified of changes. EODelayedObserveris an abstract superclass for objects that observe other objects(such as the EOInterface layer's EOAssociation classes). Finally,EOObserverProxy is a subclass of EODelayedObserver that forwardschange messages to a target object, allowing objects that don'tinherit from EODelayedObserver to take advantage of this mechanism. </p><p>The major observer in Enterprise Objects Framework is EOEditingContext,which implements its  <a frame= "conv" href="Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a> methodto record a snapshot for the object about to change, register undooperations in an NSUndoManager, and record the changes needed toupdate objects in its EOObjectStore. Because some of these actions-suchas examining the object's new state-can only be performed afterthe object has changed, an EOEditingContext sets up a delayed messageto itself, which it gets at the end of the run loop. Observers thatonly need to examine an object after it has changed can use thedelayed observer mechanism, described in the EODelayedObserver andEODelayedObserverQueue class specifications.</p><br><a name = "BIACAIJE"><h2>Object Storage Abstraction</h2></a><p>The control layer provides an infrastructure that's independentof your application's storage mechanism (typically a database)by defining an API for an "intelligent" repository of objects,whether it's based on external data or whether it manages objectsentirely in memory. EOObjectStore is an abstract class that definesthat basic API, setting up the framework for constructing and registering enterpriseobjects, servicing object faults, and committing changes made inan EOEditingContext. Subclasses of EOObjectStore implement the APIin terms of their specific storage mechanism.</p><br><h2>Subclasses of EOObjectStore</h2><p>EOEditingContext is the principal subclass of EOObjectStoreand is used for managing objects in memory. For stores based onexternal data, there are several subclasses. EOCooperatingObjectStore definesstores that work together to manage data from several distinct sources(such as different databases). The access layer's EODatabaseContextis actually a subclass of this class. A group of cooperating storesis managed by another subclass of EOObjectStore, EOObjectStoreCoordinator.If you're defining a subclass of EOObjectStore, it's probablyone based on an external data repository, and it should thereforeinherit from EOCooperatingObjectStore so as to work well with an EOObjectStoreCoordinator-thoughthis isn't required.</p><p>EODatabaseContext provides objects from relational databasesand is therefore provided by Enterprise Objects Framework's accesslayer. It is the class that defines the interaction between thecontrol and access layers. Database contexts and other object storesbased on external data are often shared by several editing contextsto conserve database connections.</p><p>Object store subclasses cooperate with one another as illustratedin the following:</p><center><img src = "Classes/Art/DBasic2.GIF" alt = "[image: Classes/Art/DBasic2.GIF]"></center><br><h2>Registering Enterprise Objects</h2><p>An object store identifies its objects in two ways:</p><ul><li>By reference for identification within a specificediting context</li><li>By global ID for universal identification of the same recordamong multiple stores.</li></ul><p>A global ID is defined by three classes: EOGlobalID, EOKeyGlobalID,and EOTemporaryGlobalID. EOGlobalID is an abstract class that formsthe basis for uniquing in Enterprise Objects Framework. EOKeyGlobalIDis a concrete subclass of EOGlobalID whose instances represent persistentIDs based on the access layer's EOModel information: an entityand the primary key values for the object being identified. An EOTemporaryGlobalIDobject is used to identify a newly created enterprise object before it'ssaved to an external store. For more information, see the  <a frame= "conv" href="Classes/EOGlobalID.html#EOGlobalID">EOGlobalID</a> class specification.</p><br><h2>Servicing Faults</h2><p>For external repositories, an object store might delay fetchingan object's data, instead creating an EOFault as a placeholder.When a fault is accessed (sent a message), it triggers its objectstore to fetch its data and transform it into an instance of theappropriate object class. This preserves both the object's <b>id </b>andits EOGlobalID, while saving the cost of fetching data that mightnot be used. Faults are typically created for the destinations ofrelationships for objects that are explicitly fetched. See the  <a frame= "conv" href="Classes/EOFault.html#EOFault">EOFault</a> and  <a frame= "conv" href="Classes/EOFaultHandler.html#EOFaultHandler">EOFaultHandler</a> class specifications formore information.</p><br><a href="EOControlTOC.html"><img src="../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
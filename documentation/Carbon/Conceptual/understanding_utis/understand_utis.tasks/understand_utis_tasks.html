<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Uniform Type Identifiers Overview: Adopting Uniform Type Identifiers</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Adopting Uniform Type Identifiers"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001319-CH203" title="Adopting Uniform Type Identifiers"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000445" target="_top">Data Management</a> &gt; <a href="../understand_utis_intro/understand_utis_intro.html#//apple_ref/doc/uid/TP40001319-CH201-SW1">Uniform Type Identifiers Overview</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../understand_utis_conc/understand_utis_conc.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../utilist/UTIlist.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001319-CH203-BABHCIAC" title="Adopting Uniform Type Identifiers"></a><h1>Adopting Uniform Type Identifiers</h1><p>This chapter gives some guidelines for adopting uniform type identifiers in your application, and gives an overview of the utility functions used to manipulate UTIs.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="understand_utis_tasks.html#//apple_ref/doc/uid/TP40001319-CH203-SW1">Guidelines for UTI Usage</a>
				
			<br/>
			
        
			
			
				<a href="understand_utis_tasks.html#//apple_ref/doc/uid/TP40001319-CH203-SW4">An Overview of UTI Functions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001319-CH203-SW1" title="Guidelines for UTI Usage"></a><h2>Guidelines for UTI Usage</h2><p>Adopting UTIs in your application is a two-part process. You should use UTIs whenever you need to identify or exchange data, and you should declare specific UTIs for any proprietary types your application uses. </p><a name="//apple_ref/doc/uid/TP40001319-CH203-SW2" title="Adding UTI Support to Applications"></a><h3>Adding UTI Support to Applications</h3><p>Apple is building in UTI support for most data-interchange needs. For example:</p><ul class="spaceabove"><li class="li"><p>The Pasteboard Manager and Translation Manager support UTIs in Mac OS X v10.3 and later. </p></li><li class="li"><p>Navigation Services allows you to specify UTIs for file filtering in Mac OS X v10.4 and later. </p></li><li class="li"><p>Launch Services supports UTI-based document claims in Mac OS X v10.4 and later. </p></li></ul><p>If you have specific needs that are not addressed by the above, you can match types to UTIs in your own code. Typically this requires you to find a type with an alternate identifier (such as an <code>OSType</code>), create a UTI from that identifier, then check for conformance with UTIs defining the types your application can handle. For an example of how to do this, see <span class="content_text"><a href="../../NavServicesConcepts/ns_using/ns_using.html#//apple_ref/doc/uid/TP40000930-CH202" target="_top">Navigation Services Tasks</a></span> in <em><a href="../../ProvidingNavigationDialogs/index.html#//apple_ref/doc/uid/TP30001147" target="_top">Navigation Services Programming Guide</a></em>.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40001319-CH203-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;When using system-defined UTIs in your code, you should use the constants defined in <code>UTCoreTypes.h</code> (in the Launch Services framework) when available, rather than the actual UTI strings. For example, pass <code>kUTTypeApplication</code> rather than “<code>com.apple.application</code>”. <span class="content_text"><a href="../utilist/UTIlist.html#//apple_ref/doc/uid/TP40001319-CH205-CHDIJFGJ">“System-Declared Uniform Type Identifiers ”</a></span> lists these constants in addition to the UTI strings. </p><p></p></div><a name="//apple_ref/doc/uid/TP40001319-CH203-SW3" title="Declaring Your Own UTIs"></a><h3>Declaring Your Own UTIs</h3><p>If your application uses proprietary data formats, you should declare them in the <code>Info.plist</code> file of your application bundle. Some guidelines:</p><ul class="spaceabove"><li class="li"><p>Your UTI string must be unique. Following the reverse-DNS format beginning with <code>com.</code><em>companyName</em> is a simple way to ensure uniqueness. While the system can support different UTI strings with the same specification , the reverse is not true. </p></li><li class="li"><p>If your code relies on third-party UTI types that may not be present on the system, you should declare those UTIs as imported types in your bundle. </p></li><li class="li"><p>Be sure to add conformance information if your proprietary type is a subtype of one or more existing types. In most cases you should not specify conformance to a nonpublic type, unless you are also declaring that type in your bundle. For a list of public and Apple-defined UTIs, see <span class="content_text"><a href="../utilist/UTIlist.html#//apple_ref/doc/uid/TP40001319-CH205-CHDIJFGJ">“System-Declared Uniform Type Identifiers .”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP40001319-CH203-SW4" title="An Overview of UTI Functions"></a><h2>An Overview of UTI Functions</h2><p>You can find the functions used to manipulate UTIs in <code>UTType.h</code> in the Launch Services framework. </p><a name="//apple_ref/doc/uid/TP40001319-CH203-SW5" title="Testing for Equality and Conformance"></a><h3>Testing for Equality and Conformance</h3><p>When testing to see if two UTIs are identical, you should always use the <code>UTTypeEqual</code> function rather than direct string comparison:</p><div class="codesample"><table><tr><td scope="row"><pre>Boolean UTTypeEqual (<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inUTI1,<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inUTI2<span></span></pre></td></tr><tr><td scope="row"><pre>    );<span></span></pre></td></tr></table></div><p>The two UTIs are equal if </p><ul class="spaceabove"><li class="li"><p>the UTI strings are identical</p></li><li class="li"><p>a dynamic identifier’s tag specification is a subset of the other UTI’s tag specification. </p></li></ul><p>However, in many cases you want to determine whether one UTI is compatible with another, in which case you should check for conformance rather than equality:</p><div class="codesample"><table><tr><td scope="row"><pre>Boolean UTTypeConformsTo (<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inUTI1,<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inUTI2<span></span></pre></td></tr><tr><td scope="row"><pre>    );<span></span></pre></td></tr></table></div><p>The <code>UTTypeConformsTo</code> function returns <code>true</code> if <code>inUTI1</code> conforms to <code>inUTI2</code>. Conformance relationships are transitive: if A conforms to B, and B conforms to C, then A conforms to C. </p><a name="//apple_ref/doc/uid/TP40001319-CH203-SW6" title="Manipulating Tags"></a><h3>Manipulating Tags</h3><p>Often to use UTIs effectively, you must be able to convert various other type identifiers (OSType, MIME, and so on) to UTIs and vice versa.</p><p>To convert an identifier to a UTI, you can use the <code>UTTypeCreatePreferredIdentifierForTag</code> function:</p><div class="codesample"><table><tr><td scope="row"><pre>CFStringRef UTTypeCreatePreferredIdentifierForTag(<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inTagClass,<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inTag,<span></span></pre></td></tr><tr><td scope="row"><pre>        CFStringRef inConformingToUTI<span></span></pre></td></tr><tr><td scope="row"><pre>    );<span></span></pre></td></tr></table></div><p>For the tag class, you pass one of the following tag class constants that define the alternate identifiers:</p><div class="codesample"><table><tr><td scope="row"><pre>const CFStringRef kUTTagClassFilenameExtension;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kUTTagClassMIMEType;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kUTTagClassNSPboardType;<span></span></pre></td></tr><tr><td scope="row"><pre>const CFStringRef kUTTagClassOSType;<span></span></pre></td></tr></table></div><p>You can pass a UTI in the <code>inConformingToUTI</code> parameter as a hint, in case the given tag appears in more than one UTI declaration. For example, if you know that the filename extension tag is associated with a file, not a directory, you can pass <code>public.data</code> here, which causes the function to ignore any types with the same extension that conform to <code>public.directory</code>. Pass <code>NULL</code> for this parameter if you have no hints.</p><p>In the rare case that two or more types exist that have the same identifier, this function prefers public UTIs over others. If no declared UTI exists for the identifier, <code>UTTypeCreatePreferredIdentifierForTag</code> creates and returns a dynamic identifier. </p><p>If you want to obtain all the UTIs that correspond to a given identifier, you can call <code>UTTypeCreateAllIdentifiersForTag</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>CFArrayRef UTTypeCreateAllIdentifiersForTag(<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inTagClass,<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inTag,<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inConformingToUTI );<span></span></pre></td></tr></table></div><p>This function returns an array of UTIs that you can examine to determine which one to use. </p><p>If you want to create an alternate identifier from a UTI, you call the <code>UTTypeCopyPreferredTagWithClass</code> function:</p><div class="codesample"><table><tr><td scope="row"><pre>CFStringRef UTTypeCopyPreferredTagWithClass(<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inUTI,<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inTagClass );<span></span></pre></td></tr></table></div><p>The preferred tag is the first one listed in the tag specification array for a given tag class. </p><a name="//apple_ref/doc/uid/TP40001319-CH203-SW7" title="Converting OSType Identifiers"></a><h3>Converting OSType Identifiers</h3><p>The UTI utility functions assume that all alternate identifier tags can be represented as Core Foundation strings. However, because type <code>OSType</code> is integer-based rather than string-based, it may not be immediately obvious how to correctly translate between type <code>CFStringRef</code> and type <code>OSType</code>. To ensure error-free encoding and decoding of OSType identifiers, use the following conversion functions:</p><div class="codesample"><table><tr><td scope="row"><pre>CFStringRef UTCreateStringForOSType( OSType inOSType );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>OSType UTGetOSTypeFromString( CFStringRef inTag );<span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40001319-CH203-SW8" title="Note"></a><p><strong>Note:</strong>&nbsp;For OSType values containing only printable 7-bit ASCII characters, you can still use the <code>CFSTR</code> macro with a four-character string literal (for example, <code>CFSTR("TEXT")</code> to create a valid OSType tag.</p></div><a name="//apple_ref/doc/uid/TP40001319-CH203-SW9" title="Accessing UTI Information"></a><h3>Accessing UTI Information</h3><p>To obtain a copy of a UTI’s declaration, use the <code>UTTCopyDeclaration</code> function:</p><div class="codesample"><table><tr><td scope="row"><pre>CFDictionaryRef UTTypeCopyDeclaration(<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inUTI );<span></span></pre></td></tr></table></div><p>To obtain a URL to the bundle that contains the declaration for a given UTI, use the <code>UTTypeCopyDeclaringBundleURL</code> function:</p><div class="codesample"><table><tr><td scope="row"><pre>CFURLRef UTTypeCopyDeclaringBundleURL(<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inUTI );<span></span></pre></td></tr></table></div><p>To obtain the localized description of a given UTI, call the <code>UTTypeCopyDescription</code> function:</p><div class="codesample"><table><tr><td scope="row"><pre>CFStringRef UTTypeCopyDescription(<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef inUTI );<span></span></pre></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../understand_utis_conc/understand_utis_conc.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../utilist/UTIlist.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-04-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/understanding_utis/understand_utis.tasks/understand_utis_tasks.html%3Fid%3DTP40001319-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/understanding_utis/understand_utis.tasks/understand_utis_tasks.html%3Fid%3DTP40001319-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/understanding_utis/understand_utis.tasks/understand_utis_tasks.html%3Fid%3DTP40001319-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
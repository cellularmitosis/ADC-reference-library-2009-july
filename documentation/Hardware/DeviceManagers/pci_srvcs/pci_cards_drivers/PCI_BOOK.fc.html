<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> How the Registry Is Built</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.f9.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.fb.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.fd.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3319"> </A>How the Registry Is Built</H1><P CLASS="T1.Text1"><A NAME="pgfId=3320"> </A>During system startup, the Open Firmware support code in the Macintosh ROM  creates a device tree, as described in <A HREF="PCI_BOOK.3a.html#27578" CLASS="XRef">Startup and System Configuration</A> When Mac&nbsp;OS is launched, it extracts device information from the device tree in the following steps:</P><OL><LI CLASS="N/.NList=1"><A NAME="pgfId=3324"> </A>Search for devices.</LI><LI CLASS="N.NList"><A NAME="pgfId=3325"> </A>Add a name entry and a set of properties to the Registry for each device.</LI><LI CLASS="N.NList"><A NAME="pgfId=3326"> </A>Find a driver for each device.</LI><LI CLASS="N.NList"><A NAME="pgfId=3327"> </A>Initialize the driver.</LI></OL><P CLASS="T1.Text1"><A NAME="pgfId=3328"> </A>Connections between name entries are formed when the entries are added to the Registry. The connections have direction and point from an existing entry to the new one.</P><P CLASS="T1.Text1"><A NAME="pgfId=3329"> </A>The Expansion Bus Manager places most of the name entries in the Registry during system startup. However, some hardware provides standard ways to probe for devices and return information describing them. In this case, the <A NAME="marker=3330"> </A>low-level expert responsible for that variety of hardware finds the devices and adds their names to the Registry. The low-level expert attaches descriptive information for each device to the name entry as properties. Low-level experts are described in <A HREF="PCI_BOOK.6e.html#33674" CLASS="XRef">Terminology</A>. In a few cases, drivers may enter names and properties in the Registry directly.</P><P CLASS="T1.Text1"><A NAME="pgfId=3334"> </A>The software entity that creates a name entry owns it, whether it is the Expansion Bus Manager, a low-level expert, or a device driver. Only the owner should remove a name entry. Since most device drivers do not create entries in the Registry, most drivers never remove them.</P><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.f9.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.fb.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.fd.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
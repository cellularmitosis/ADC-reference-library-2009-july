<html><head><title>Mac OS X
 Manual Page For spfquery(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/spfquery" title="Mac OS X
 Manual Page for spfquery(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/spfquery"; name=spfquery(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
SPFQUERY(1)                          User Contributed Perl Documentation                         SPFQUERY(1)



<b>NAME</b>
       spfquery - checks if an IP address is an SPF-authorized SMTP sender for a domain

<b>VERSION</b>
       2.3

<b>SYNOPSIS</b>
       <b>spfquery</b> <b>--mail-from</b>|<b>-m</b>|<b>--sender</b>|<b>-s</b> <u>email-address</u>|<u>domain</u> <b>--helo</b>|<b>-h</b> <u>hostname</u> <b>--ip</b>|<b>-i</b> <u>ip-address</u>
       [<u>OPTIONS</u>]

       <b>spfquery</b> <b>--helo</b>|<b>-h</b> <u>hostname</u> <b>--ip</b>|<b>-i</b> <u>ip-address</u> [<u>OPTIONS</u>]

       <b>spfquery</b> <b>--file</b>|<b>-f</b> <u>filename</u>|<b>-</b> [<u>OPTIONS</u>]

       <b>spfquery</b> <b>--version</b>|<b>-V</b>

       <b>spfquery</b> <b>--help</b>

<b>DESCRIPTION</b>
       <b>spfquery</b> performs Sender Policy Framework (SPF) authorization checks based on the command-line
       arguments or data given in a file or on standard input.  For information on SPF see
       &lt;<a href="http://www.openspf.org">http://www.openspf.org</a>.

       The <b>--mail-from</b> form checks if the given <u>ip-address</u> is an authorized SMTP sender for the given
       envelope sender <u>domain</u> or <u>email-address</u> and "HELO" <u>hostname</u> (so-called "MAIL FROM" check).  If a
       <u>domain</u> is given, "postmaster" will be substituted for the localpart.

       The <b>--helo</b> form checks if the given <u>ip-address</u> is an authorized SMTP sender for the given "HELO"
       <u>hostname</u> (so-called "HELO" check).

       The <b>--file</b> form reads "<u>ip-address</u> <u>sender-address</u> <u>helo-hostname</u>" tuples from the file with the
       specified <u>filename</u>, or from standard input if <u>filename</u> is <b>-</b>.

       The <b>--version</b> form prints version information of spfquery.  The <b>--help</b> form prints usage information
       for spfquery.

<b>OPTIONS</b>
       The <b>--mail-from</b>, <b>--helo</b>, and <b>--file</b> forms optionally take any of the following additional <u>OPTIONS</u>:

       <b>--debug</b>
           Print out debug information.

       <b>--default-explanation</b> <u>string</u>
           Use the specified <u>string</u> as the default explanation if the SPF record does not specify an
           explanation string itself.

       <b>--guess</b> <u>spf-terms</u>
           Use <u>spf-terms</u> as a default record if no SPF record is found.  <b>This</b> <b>is</b> <b>a</b> <b>non-standard</b> <b>feature.</b>

       <b>--keep-comments</b>
       <b>--no-keep-comments</b>
           Do (not) print any comments found when reading from a file or from standard input.

       <b>--local</b> <u>spf-terms</u>
           Process <u>spf-terms</u> as local policy before resorting to a default result (the implicit or explicit
           "all" mechanism at the end of the domain's SPF record).  For example, this could be used for
           white-listing one's secondary MXes: "mx:mydomain.example.org".

       <b>--max-lookup-count</b> <u>n</u>
           Perform a maximum of <u>n</u> SPF record lookups.  Defaults to <b>10</b>.

       <b>--name</b> <u>hostname</u>
           Use <u>hostname</u> as the hostname of the local system instead of auto-detecting it.

       <b>--override</b> <u>domain</u><b>=</b><u>spf-record</u>
       <b>--fallback</b> <u>domain</u><b>=</b><u>spf-record</u>
           Set overrides and fallbacks.  Each option can be specified multiple times.  For example:
           "--override example.org='v=spf1 -all' --override '*.example.net'='v=spf1 a mx -all' --fallback
           example.com='v=spf1 -all'".  <b>This</b> <b>is</b> <b>a</b> <b>non-standard</b> <b>feature.</b>

       <b>--rcpt-to</b> <u>email-addresses</u>
           Automatically allow the secondary MXes of the comma-separated list of <u>email-addresses</u>.

       <b>--sanitize</b>
       <b>--no-sanitize</b>
           Do (not) sanitize the output by condensing consecutive white-space into a single space and
           replacing non-printable characters with question marks.  Enabled by default.

       <b>--trusted</b>
       <b>--no-trusted</b>
           Do (not) perform "trusted-forwarder.org" accreditation checking.  Disabled by default.  <b>This</b> <b>is</b> <b>a</b>
           <b>non-standard</b> <b>feature.</b>

<b>RESULT</b> <b>CODES</b>
       <b>pass</b>      The specified IP address is an authorized mailer for the sender domain/address.

       <b>fail</b>      The specified IP address is not an authorized mailer for the sender domain/address.

       <b>softfail</b>  The specified IP address is not an authorized mailer for the sender domain/address, however
                 the domain is still in the process of transitioning to SPF.

       <b>neutral</b>   The sender domain makes no assertion about the status of the IP address.

       <b>unknown</b>   The sender domain has a syntax error in its SPF record.

       <b>error</b>     A temporary DNS error occurred while resolving the sender policy.  Try again later.

       <b>none</b>      There is no SPF record for the sender domain.

<b>EXIT</b> <b>CODES</b>
       <b>0</b>   pass

       <b>1</b>   fail

       <b>2</b>   softfail

       <b>3</b>   neutral

       <b>4</b>   unknown

       <b>5</b>   error

       <b>6</b>   none

<b>EXAMPLES</b>
           spfquery -i 11.22.33.44 -m user@example.com -h spammer.example.net
           spfquery -f test_data
           echo "127.0.0.1 user@example.com helohost.example.com" | spfquery -f -<font color="#ffffff" class="whiteout">SEE&nbsp;-fSEE</font>

<b>SEE</b> <b>ALSO</b>
       Mail::SPF::Query, spfd

<b>AUTHORS</b>
       This version of <b>spfquery</b> was written by Wayne Schlitt &lt;wayne@midwestcs.com&gt;.

       This man-page was written by Julian Mehnle &lt;julian@mehnle.net&gt;, based on a man-page written by S.
       Zachariah Sprackett for an older version of <b>spfquery</b>.



perl v5.8.8                                      2006-01-22                                      SPFQUERY(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/spfquery.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/spfquery.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/spfquery.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Network Services Location Manager (Legacy) (Not Recommended): Tasks</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Tasks"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000216-DontLinkElementID_7"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../Carbon/index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../../Carbon/Networking-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000453" target="_top">Networking</a> &gt; <a href="../NSL1/NSL1.html#//apple_ref/doc/uid/TP30000214-TPXREF101">Network Services Location Manager (Legacy) (Not Recommended)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../NSL1/NSL1.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../NSL3/NSL3.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000215" title="Tasks"></a><a name="//apple_ref/doc/uid/TP30000215-TPXREF101" title="Tasks"></a><h1>Tasks</h1>
<p>The Network Services Location Manager provides high-level and low-level functions for searching for network services:</p>
<ul class="ul"><li class="li"><p>The high-level functions are <code>NSLStandardRegisterURL</code> and <code>NSLStandardDeregisterURL</code> for registering and deregistering services and <code>NSLStandardGetURL</code>, which searches for services, displays a dialog box that lists the search results, and allows the user to choose a URL. If the user selects a URL from the search results, the <code>NSLStandardGetURL</code> function returns that URL to the calling application. Calling the high-level functions can be done without opening a session with the Network Services Location Manager or calling any other Network Services Location Manager function. For example, the NSLStandardGetURL function opens a session with the Network Services Location Manager and takes care of all of the details required to create request parameter blocks and search requests.</p></li>
<li class="li"><p>Your application can call Network Services Location Manager low-level functions that open a session with the Network Services Location Manager, create request parameter blocks and search requests, and start searches.</p></li></ul>
<p>This chapter describes the high-level Network Services Location Manager functions as well as the low-level Network Services Location Manager functions.</p>

<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="NSL2.html#//apple_ref/doc/uid/TP30000215-CIGCFEAD">Registering and Deregistering Services</a>
				
			<br/>
			
        
			
			
				<a href="NSL2.html#//apple_ref/doc/uid/TP30000215-CIGBIECJ">Using the NSLStandardGetURL Dialog Box</a>
				
			<br/>
			
        
			
			
				<a href="NSL2.html#//apple_ref/doc/uid/TP30000215-CIGHDBHJ">Using a Network Services Location Manager Session</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000215-43096" title="Registering and Deregistering Services"></a><a name="//apple_ref/doc/uid/TP30000215-CIGCFEAD" title="Registering and Deregistering Services"></a><h2>Registering and Deregistering Services</h2>
<p>If your application only needs to register a network service, it can call the following Network Services Location Manager functions <code>NSLHexEncodeText </code>and without <code>NSLStandardRegisterURL </code>without having to call any other Network Services Location Manager functions.</p>
<p>The <code>NSLHexEncodeText </code>utility function encodes any characters that are not allowed in URLs that may occur in a URL that will be passed as a parameter to <code>NSLStandardRegisterURL</code>. For example, the space character in <code>http://myserver.com/</code>User Path is not allowed in URLs, and it needs to be encoded as <code>%20</code>. The parameters for calling <code>NSLHexEncodeText</code> are</p>
<div class="codesample"><table><tr><td scope="row"><pre>OSStatus NSLHexEncodeText (<span></span></pre></td></tr><tr><td scope="row"><pre>    char* rawText,<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16 rawTextLen,<span></span></pre></td></tr><tr><td scope="row"><pre>    char* newTextBuffer,<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16* newTextBufferLen,<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean* textChanged);<span></span></pre></td></tr></table></div>
<p>The <code>rawText</code> parameter points to the string containing the portion of a URL that is to be encoded. For example, when passed a string consisting of <code>User Path</code>, <code>NSLHexEncodeText </code> will return a string consisting of <code>User%20Path</code>. The <code>rawTextLen</code> parameter contains the length of the string pointed to by <code>rawText</code>.</p>
<p>When <code>NSLHexEncode</code> returns, the <code>newTextBuffer </code>parameter points to the encoded string, and the <code>newTextBufferLen</code> parameter contains the length of that string. The <code>textChanged</code> parameter indicates whether any encoding was done and is <code>TRUE</code> if the string pointed to by <code>newTextBuffer contains encoded characters.</code></p>
<p>The <code>NSLStandardRegisterURL</code> function registers network services. The parameters for calling <code>NSLStandardRegisterURL are</code></p>
<div class="codesample"><table><tr><td scope="row"><pre>OSStatus NSLStandardRegisterURL (<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLPath urlToRegister;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLNeighborhood neighborhoodToRegisterIn);<span></span></pre></td></tr></table></div>
<p>The <code>urlToRegister</code> parameter is a null-terminated character string containing the URL to register.</p>
<p>The <code>neighborhoodToRegisterIn</code> parameter specifies the neighborhood in which the service is to be registered. If the <code>neighborhoodToRegisterIn</code> parameter is <code>NULL</code>, the Network Services Location Manager determines the neighborhoods in which to register the service. For this version of the Network Services Location Manager, applications almost always pass <code>NULL</code> as the value of this parameter, thereby allowing the Network Services Location Manager to determine the appropriate local neighborhood in which to register the service.</p>
<p>The <code>NSLStandardDeregisterURL</code> function deregisters services that have been registered and is typically called when the system is shutting down. The parameters for calling <code>NSLStandardDeregisterURL </code>are</p>
<div class="codesample"><table><tr><td scope="row"><pre>OSStatus NSLStandardDeregisterURL (<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLPath urlToDeregister;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLNeighborhood neighborhoodToDeregisterIn);<span></span></pre></td></tr></table></div>
<p>The <code>urlToDeregister</code> parameter is a null-terminated string containing the URL to deregister.</p>
<a name="//apple_ref/doc/uid/TP30000215-44280" title="Using the NSLStandardGetURL Dialog Box"></a><a name="//apple_ref/doc/uid/TP30000215-CIGBIECJ" title="Using the NSLStandardGetURL Dialog Box"></a><h2>Using the NSLStandardGetURL Dialog Box</h2>
<p>The <code>NSLStandardGetURL</code> function searches for neighborhoods and services, and displays a movable modal dialog box that lists the services and URLs that were found. The user can select a URL, and that URL is returned to the calling application.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000215-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;You do not need to call any other Network Services Location Manager function before calling <code>NSLStandardGetURL</code>. The <code>NSLStandardGetURL </code>function opens a session with the Network Services Location Manager, creates a service request, and closes the session with the Network Services Location Manager when it is no longer needed.</p></div>
<p><span class="content_text"><a href="NSL2.html#//apple_ref/doc/uid/TP30000215-44394">Figure 2-1</a></span> shows the dialog box that <code>NSLStandardGetURL</code> displays.</p>
<br/><div><a name="//apple_ref/doc/uid/TP30000215-44394" title="Figure 2-1Expanded dialog box displayed by NSLStandardGetURL"></a><a name="//apple_ref/doc/uid/TP30000215-BBIDHABA" title="Figure 2-1Expanded dialog box displayed by NSLStandardGetURL"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>Expanded dialog box displayed by <code>NSLStandardGetURL</code></p>
<img src = "../art/nslm_04.gif" alt = "" width="482" height="328"></div><br/>
<p>Clicking the up and down arrows of the At pop-up menu displays a list of favorite servers, recent servers, and neighborhoods from which users can make a selection. </p>
<p>The left column lists the available neighborhoods and the right column lists the servers in the selected neighborhood. The selected item in each column reflects the current selection in the At pop-up menu.</p>
<p>The current selection of the Show pop-up menu determines the type of service that is displayed in the At pop-up menu and the two columns. Users can use the Show pop-up menu to choose other service types (HTTP, AFP, WebDav, or FTP servers). If only one service is specified, the Show pop-up menu does not appear.</p>
<p>Clicking the “Add to Favorites” button adds the URL for the server that is selected in the right column to the user’s Favorites folder in the Finder and causes the server to appear in the At pop-up menu. To remove a Favorite, the user selects the “Remove from Favorites” item in the At pop-up menu, which causes a dialog box to appear. The dialog box lists all of the favorites and allows the user to select a favorite and remove it by clicking the Remove button.</p>
<p>The user can also type a URL in the Address text field. If the Address field is not empty when the user clicks the Connect button, the content of the Address field overrides the selection in the At pop-up menu.</p>
<p>To connect to the selected server or to connect to the URL specified in the Address text field, the user clicks the Connect button, which causes the dialog box to be dismissed and the selected URL to be returned to the calling application.</p>
<p>If the user clicks the Cancel button, the dialog box is dismissed and no URL is returned to the calling application.</p>
<p>Applications that call <code>NSLStandardGetURL</code> can control the following features of the dialog box that <code>NSLStandardGetURL</code> displays:</p>
<ul class="ul"><li class="li"><p>the instructional text that appears in Small System font at the top of the dialog box</p></li>
<li class="li"><p>the title of the dialog box; the default title is “Connect to Server”</p></li>
<li class="li"><p>the button labels whose default values are “Cancel” and “Connect”</p></li>
<li class="li"><p>the list of service types that appear in the Show pop-up menu</p></li>
<li class="li"><p>the service type that appears at the top of the Show pop-up menu when the dialog box is first displayed</p></li>
<li class="li"><p>whether the Address field is displayed</p></li></ul>
<p>The parameters for calling <code>NSLStandardGetURL</code> are</p>
<div class="codesample"><table><tr><td scope="row"><pre>OSStatus NSLStandardGetURL (<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLDialogOptions* dialogOptions,<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLEventUPP eventProc,<span></span></pre></td></tr><tr><td scope="row"><pre>    void* eventProcContextPtr,<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLURLFilterUPP filterProc,<span></span></pre></td></tr><tr><td scope="row"><pre>    char* serviceTypeList,<span></span></pre></td></tr><tr><td scope="row"><pre>    char** userSelectedURL);<span></span></pre></td></tr></table></div>
<p>The <code>dialogOptions</code> parameter is pointer to an <code>NSLDialogOptions</code> structure whose fields specify the appearance of the dialog box, including the title of the dialog box, button names, whether instructional text is displayed, and whether the Address field is displayed. Call the <code>NSLGetDefaultDialogOptions</code> utility function to set your <code>NSLDialogOptions </code>structure to the default values; then modify your <code>NSLDialogOptions </code>structure as desired.</p>
<p>The <code>eventProc</code> parameter points to an application-defined system event callback function that the Network Services Location Manager calls so that your application can handle events that may occur while the <code>NSLStandardGetURL</code> dialog box is displayed. If <code>eventProc</code><code></code> is <code>NULL</code>, your application will not receive update events.</p>
<p>The <code>eventProcContextPtr</code> parameter points to a value that the Network Services Location Manager passes to your system event callback function so that your application can associate any particular call of <code>NSLStandardGetURL</code> with any particular call of its system event callback function.</p>
<p>The <code>filterProc</code> parameter is a value of type <code>NSLURLFilterUPP</code> that points to an application-defined callback function that your application can use to filter the results that the <code>NSLStandardGetURL</code> dialog box displays.</p>
<p>The <code>serviceTypeList</code> is a null-terminated string of tuples that specifies the services that are to be searched for. You can use the <code>serviceTypeList</code> parameter to specify custom icons that are displayed for each service that is found. If you do not specify custom icons, default icons are displayed.</p>
<p>The <code>userSelectedURL</code> parameter points to a address in memory. When <code>NSLStandardGetURL </code>returns, <code>userSelectedURL</code> points to the URL of the service that was selected when the user clicked the button that by default is labeled “Connect” or points to the URL specified in the Address field. If the user clicks the button that by default is labeled “Cancel,” the value of the <code>userSelectedURL</code> parameter is a null pointer when <code>NSLStandardGetURL</code> returns. Be sure to deallocate the memory allocated for the URL by calling NSLFreeURL when you no longer need the URL.</p>
<p>If a error occurs, the Network Services Location Manager calls <code>NSLErrorToString</code> to get a description of the error and a solution string and then displays a dialog box containing the error description and solution string.</p>
<a name="//apple_ref/doc/uid/TP30000215-45564" title="Using a Network Services Location Manager Session"></a><a name="//apple_ref/doc/uid/TP30000215-CIGHDBHJ" title="Using a Network Services Location Manager Session"></a><h2>Using a Network Services Location Manager Session</h2>
<p>Call <code>NSLOpenNavigationAPI</code> to open a session with the Network Services Location Manager. The <code>NSLOpenNavigationAPI</code> function returns a client reference that you use to prepare a search request.</p>
<a name="//apple_ref/doc/uid/TP30000215-50416" title="Preparing for a Search"></a><a name="//apple_ref/doc/uid/TP30000215-TPXREF113" title="Preparing for a Search"></a><h3>Preparing for a Search</h3>
<p>Call <code>NSLMakeNewServicesList</code> to prepare a comma-delimited list of services that you want to search for, such as <code>http,ftp</code>. If you prepare a services list and later want to add another service to it, call <code>NSLAddServiceToServicesList</code>.</p>
<p>Call <code>NSLPrepareRequest</code> to create a search request. The following must be provided as parameters to <code>NSLPrepareRequest</code>:</p>
<ul class="spaceabove"><li class="li"><p>the client reference you received when you opened the Network Services Location Manager session</p></li>
<li class="li"><p>a pointer to your application’s notification routine, which will be called when search results have been collected</p></li>
<li class="li"><p>a pointer to an <code>NSLClientAsyncInfo </code>structure, which has fields you can use to change the conduct of searches that use the resulting search request</p></li></ul>
<p>On output, <code>NSLPrepareRequest</code> provides a pointer to an <code>NSLClientAsyncInfo </code>structure. You can use the following fields in the <code>NSLClientAsyncInfo</code> structure to control the way in which searches are conducted:</p>
<ul class="spaceabove"><li class="li"><p><code>maxSearchTime</code>, the maximum time in ticks that is to be spent on the search; zero means that the search time is not limited</p></li>
<li class="li"><p><code>alertInterval</code>, the time in ticks at which your application’s notification routine is to be called even if the search is still in progress; zero means that there is no interval</p></li>
<li class="li"><p><code>alertThreshold</code>, the number of items placed in the result buffer at which your application’s notification routine is to be called even if the search is still in progress; most applications set <code>alertThreshold</code> to 1</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000215-50187" title="Starting a Search"></a><a name="//apple_ref/doc/uid/TP30000215-TPXREF114" title="Starting a Search"></a><h3>Starting a Search</h3>
<p>To search for neighborhoods, call <code>NSLStartNeighborhoodLookup</code>. The parameters for calling <code>NSLStartNeighborhoodLookup</code> are:</p>
<ul class="spaceabove"><li class="li"><p>the request reference created by calling <code>NSLPrepareRequest</code></p></li>
<li class="li"><p><code>NULL</code> to get default neighborhoods or a neighborhood value created by calling <code>NSLMakeNewNeighborhood</code> to get the names of neighborhoods related to the name specified in the neighborhood value</p></li>
<li class="li"><p>a pointer to the <code>NSLClientAsyncInfo</code> structure that was provided as a parameter to <code>NSLPrepareRequest</code></p></li></ul>
<p>To search for services, call <code>NSLStartServicesLookup</code>. The parameters for calling <code>NSLStartServicesLookup</code> are:</p>
<ul class="spaceabove"><li class="li"><p>the request reference created by calling <code>NSLPrepareRequest</code></p></li>
<li class="li"><p><code>NULL</code> to search for top-level services or a neighborhood value created by calling <code>NSLMakeNewNeighborhood</code> to search for services in the neighborhood specified by the neighborhood value</p></li>
<li class="li"><p>a request parameter block created by calling <code>NSLMakeServicesRequestPB</code>; before calling <code>NSLMakeNewServicesPB</code>, you must call <code>NSLMakeNewServicesList</code> to make a services list, which specifies the services, such as <code>http</code> or <code>ftp</code>, that you want to search for</p></li>
<li class="li"><p>a pointer to the <code>NSLClientAsyncInfo</code> structure that was provided as a parameter to <code>NSLPrepareRequest</code></p></li></ul>
<a name="//apple_ref/doc/uid/TP30000215-49958" title="Processing Search Results"></a><a name="//apple_ref/doc/uid/TP30000215-TPXREF115" title="Processing Search Results"></a><h3>Processing Search Results</h3>
<p>If you set the <code>maxSearchTime</code>, <code>alertInterval</code>, and <code>alertThreshold</code> fields of your <code>NSLClientAsyncInfo</code> structure to 0, 0, and 1, respectively, your application’s notification routine is called whenever a search result is placed in the <code>resultBuffer</code> field of the <code>NSLClientAsyncInfo</code> structure.</p>
<p>Certain fields in the <code>NSLClientAsyncInfo </code>structure are used when a search is in progress. The fields are:</p>
<ul class="spaceabove"><li class="li"><p><code>resultBuffer</code>, which points to the buffer in which the Network Services Location Manager places search results</p></li>
<li class="li"><p><code>bufferLen</code>, which reflects the number of bytes of valid data currently stored in <code>resultBuffer</code></p></li>
<li class="li"><p><code>maxBufferSize</code>, which contains the maximum length in bytes of <code>resultBuffer</code></p></li>
<li class="li"><p><code>totalItems</code>, which contains the number of individual search results currently stored in <code>resultBuffer</code></p></li>
<li class="li"><p><code>searchState</code>, which describes the state of the search. The state can be that the result buffer is full, the search is ongoing, the search is complete, or the search is stalled</p></li>
<li class="li"><p><code>searchResult</code>, which consists of an <code>NSLError</code> structure whose <code>theErr</code> field may contain a result code that, depending on the state of the search, can help you decide whether to continue the search</p></li>
<li class="li"><p><code>searchDataType</code>, whose value is <code>kNSLNeighborhoodLookupDataEvent</code> if your notification routine was called as a result of a neighborhood search or <code>kNSLServicesLookupDataEvent</code> if your notification routine was called as a result of a neighborhood search</p></li></ul>
<p>Your notification routine can use the <code>searchDataType</code> field to determine whether it should call <code>NSLGetNextNeighbor</code> or <code>NSLGetNextUrl</code> to process the result buffer.</p>
<p>If there are more search results to get, the search is continued when your notification routine returns. Depending on the contents of the result buffer, the value of the <code>searchState</code> and <code>searchResult</code> fields, you may decide to cancel the search by calling <code>NSLCancelRequest</code>. Note that you should not cancel the request from your notification routine.</p>
<p>When you no longer need a request reference, free the memory associated with it by calling <code>NSLDeleteRequest</code>, which also deallocates the <code>NSLClientAsyncInfo</code> structure associated with the deleted request reference. You’ll also want to deallocate memory for any neighborhood values, services lists, and parameter blocks. The utility functions for deallocating memory are described in the next section, <code><a href="NSL2.html#//apple_ref/doc/uid/TP30000215-49820">“Using the Network Services Location Manager Utility Functions.”</a></code></p>
<a name="//apple_ref/doc/uid/TP30000215-49820" title="Using the Network Services Location Manager Utility Functions"></a><a name="//apple_ref/doc/uid/TP30000215-BBIDDABC" title="Using the Network Services Location Manager Utility Functions"></a><h3>Using the Network Services Location Manager Utility Functions</h3>
<p>In addition to <code>NSLMakeNewNeighborhood</code>, there are several Network Services Location Manager utility functions for working with neighborhood values. The utility functions that work with neighborhood values are</p>
<ul class="spaceabove"><li class="li"><p><code>NSLCopyNeighborhood</code>, which makes a copy of a neighborhood value</p></li>
<li class="li"><p><code>NSLGetNextNeighborhood</code>, which obtains a pointer to the next neighborhood in a result buffer and the length of that neighborhood</p></li>
<li class="li"><p><code>NSLGetNameFromNeighborhood</code> gets the name from a neighborhood value</p></li>
<li class="li"><p><code>NSLGetNeighborhoodLength</code> gets the length of a neighborhood value</p></li></ul>
<p>In addition to <code>NSLMakeServicesRequestPB</code> and <code>NSLMakeNewServicesList</code>, there are several utility functions for working with request parameter blocks and services lists. The utility functions that work with request parameter blocks are</p>
<ul class="spaceabove"><li class="li"><p><code>NSLServiceIsInServiceList</code>, which determines whether a service is in a service list</p></li>
<li class="li"><p><code>NSLAddServiceToServicesList</code>, which adds a service to a services list</p></li></ul>
<p>There are several Network Services Location Manager utility functions for working with URLs. The utility functions that work with URLs are</p>
<ul class="spaceabove"><li class="li"><p><code>NSLGetServiceFromURL</code>, which gets the service portion of a URL</p></li>
<li class="li"><p><code>NSLGetNextUrl</code>, which obtains a pointer to the next neighborhood in a result buffer and the length of that neighborhood</p></li></ul>
<a name="//apple_ref/doc/uid/TP30000215-49741" title="Closing a Network Services Location Manager Session"></a><a name="//apple_ref/doc/uid/TP30000215-TPXREF116" title="Closing a Network Services Location Manager Session"></a><h3>Closing a Network Services Location Manager Session</h3>
<p>Before closing a Network Services Location Manager session, you should free memory allocated for neighborhood values, services lists, request parameter blocks, and request references. The functions and utility functions for deallocating memory are</p>
<ul class="spaceabove"><li class="li"><p><code>NSLFreeNeighborhood</code>, which disposes a neighborhood value</p></li>
<li class="li"><p><code>NSLDisposeServicesList</code>, which deallocates the memory associated with a services list</p></li>
<li class="li"><p><code>NSLFreeTypedDataPtr</code>, which deallocates the memory associated with a request parameter block</p></li>
<li class="li"><p><code>NSLDeleteRequest</code>, which deallocates the memory associated with a request reference, as well as the <code>NSLClientAsyncInfo</code> structure associated with the request reference</p></li></ul>
<p>To close a Network Services Location Manager session, call <code>NSLCloseNavigationAPI</code>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../NSL1/NSL1.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../NSL3/NSL3.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-05-23<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Networking/Conceptual/NSL/NSL2/NSL2.html%3Fid%3DTP40000914-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Networking/Conceptual/NSL/NSL2/NSL2.html%3Fid%3DTP40000914-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Networking/Conceptual/NSL/NSL2/NSL2.html%3Fid%3DTP40000914-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
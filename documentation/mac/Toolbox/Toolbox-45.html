<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Event Record(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING45></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-44.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-46.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A> / <A HREF="Toolbox-43.html"><B>Event Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-44.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING45-0></A>
<H3><A NAME=MARKER-9-331></A>The Event Record</H3>
 <A NAME=MARKER-2-304></A>When your application uses an Event Manager routine to retrieve an event, the Event Manager returns information about the retrieved event in an event record. The <CODE>EventRecord</CODE> data type defines the event record. <P>
<PRE>
TYPE  EventRecord = 
      RECORD
         what:       Integer;       {event code}
         message:    LongInt;       {event message}
         when:       LongInt;       {ticks since startup}
         where:      Point;         {mouse location}
         modifiers:  Integer;       {modifier flags}
      END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-124></A>what</CODE>
<DD> The <CODE>what</CODE> field indicates the type of event received. The type of event can be identified by these constants: <A NAME=MARKER-2-334></A>
</DL>
<PRE>
               CONST
               nullEvent         = 0; {no other pending events}
               mouseDown         = 1; {mouse button pressed}
               mouseUp           = 2; {mouse button released}
               keyDown           = 3; {key pressed}
               keyUp             = 4; {key released}
               autoKey           = 5; {key repeatedly held down}
               updateEvt         = 6; {window needs updating}
               diskEvt           = 7; {disk inserted}
               activateEvt       = 8; {activate/deactivate window}
               osEvt             = 15;{operating-system event-- }
                                      { resume, suspend, or }
                                      { mouse-moved}
               kHighLevelEvent   = 23;{high-level event}
</PRE>
<DL>
<DT>
<DD> Note that in System 7, event types with the values 9 through 14 are undefined and reserved for future use by Apple. All other values for the <CODE>what</CODE> field are also reserved for use by Apple.
<DT><CODE><A NAME=MARKER-2-56></A>message</CODE>
<DD> Additional information associated with the event. The interpretation of this information depends on the event type. The contents of the <CODE>message</CODE> field for each event type are summarized here:<A NAME=MARKER-2-499></A><CODE>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Event type<TH>Event message<TR>
<TD>&nbsp;<TD>null, mouse-up, mouse-down<TD>Undefined.<TR>
<TD>&nbsp;<TD>key-up, key-down, auto-key<TD>Character code and virtual key code in low-order word. For Apple Desktop Bus (ADB) keyboards, the low byte of the high-order word contains the ADB address of the keyboard where the keyboard event occurred. The high byte of the high-order word is reserved.<TR>
<TD>&nbsp;<TD>update, activate<TD>Pointer to the window to update, activate, or deactivate.<TR>
<TD>&nbsp;<TD>disk-inserted<TD>Drive number in low-order word, File Manager result code in high-order word.<TR>
<TD>&nbsp;<TD>resume<TD>The <CODE>suspendResumeMessage</CODE> constant in bits 24-31 and a 1 in bit 0 to indicate the event is a resume event. Bit 1 contains either a 1 or a 0 to indicate if Clipboard conversion is required, and bits 2-23 are reserved.<TR>
<TD>&nbsp;<TD>suspend<TD>The <CODE>suspendResumeMessage</CODE> constant in bits 24-31 and a 0 in bit 0 to indicate the event is a suspend event. Bit 1 is undefined, and bits 2-23 are reserved.<TR>
<TD>&nbsp;<TD>mouse-moved<TD>The <CODE>mouseMovedMessage</CODE> constant in bits 24-31. Bits 2-23 are reserved, and bit 0 and bit 1 are undefined.<TR>
<TD>&nbsp;<TD>high-level<TD>Class of events to which the high-level event belongs. The <CODE>message</CODE> and <CODE>where</CODE> fields of <BR>a high-level event define the specific type of high-level event received.</TABLE>
</CODE>
<DT><CODE><A NAME=MARKER-2-55></A>when</CODE>
<DD> The <CODE>when</CODE> field indicates the time when the event was posted (in ticks since system startup).
<DT><CODE><A NAME=MARKER-2-54></A>where</CODE>
<DD> For low-level events and operating-system events, the <CODE>where</CODE> field contains the location of the cursor at the time the event was posted (in global coordinates).
<DT>
<DD> For high-level events, the <CODE>where</CODE> field contains a second event specifier, the event ID. The event ID defines the particular type of event within the class of events defined by the <CODE>message</CODE> field of the high-level event. For high-level events, you should interpret the <CODE>where</CODE> field as having the data type <CODE>OSType</CODE>, not <CODE>Point</CODE>.
<DT><CODE><A NAME=MARKER-2-339></A>modifiers</CODE>
<DD> The <CODE>modifiers</CODE> field contains information about the state of the modifier keys and the mouse button at the time the event was posted. For activate events, this field also indicates whether the window should be activated or deactivated. In System 7 it also indicates whether the mouse-down event caused your application to switch to the foreground. <A NAME=MARKER-9-552></A>
<DT>
<DD>  Each of the modifier keys is represented by a specific bit in the <CODE>modifiers</CODE> field of the event record. <A HREF=Toolbox-37.html#MARKER-9-85>Figure 2-5</A>, on <A HREF=Toolbox-37.html#MARKER-9-85>page 2-20</A>, shows how to interpret the <CODE>modifiers</CODE> field. The modifier keys include the Option, Command, Caps Lock, Control, and Shift keys. If your application attaches special meaning to any of these keys in combination with other keys or when the mouse button is down, you can test the state of the <CODE>modifiers</CODE> field to determine the action your application should take. For example, you can use this information to determine whether the user pressed the Command key and another key to make a menu choice. <A NAME=MARKER-2-341></A><A NAME=MARKER-2-342></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-44.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-46.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

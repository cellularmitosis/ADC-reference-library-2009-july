<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=HTML">
<title>IOFireWireSBP2LibLUNInterface</title>
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/HardwareDrivers/index.html#//apple_ref/doc/uid/TP30001281-TP40003576" target="_top">Hardware & Drivers</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/iokit_fw" target="_top">I/O Kit Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOFireWireSBP2LibLUNInterface">IOFireWireSBP2LibLUNInterface</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOFireWireSBP2Lib.h</a></div></div></td>
</tr></table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>Initial interface disovered for all drivers. 
<!-- end abstract --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The IOFireWireSBP2LibLUNInterface is the initial interface discovered by most drivers. It supplies the methods that control the operation of the LUN as a whole.  Methods that control the behavior and execution of an SBP2 login session are supplied in a separate IOFireWireSBP2LibLoginInterface object. The LUN can be used to create one of these login objects.
The LUN can also create IOFireWireSBP2LibManagementORBInterface objects for configuring and appending non-login related management functions.  Login related management functions (ie. Login, Logout, Reconnect) are supplied by the IOFireWireSBP2LibLoginInterface.
Finally the LUN can supply a reference to the IOFireWireUnit.  This can be useful if a driver wishes to access the standard FireWire APIs.  
<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/addCallbackDispatcherToRunLoop" target="_top">addCallbackDispatcherToRunLoop</a></tt></dt>
<dd><p>Adds a dispatcher for kernel callbacks to the specified run loop.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/close" target="_top">close</a></tt></dt>
<dd><p>Opens a connection to a device that is not already open.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/createLogin" target="_top">createLogin</a></tt></dt>
<dd><p>Creates a new IOFireWireSBP2LibLoginInterface object.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/createMgmtORB" target="_top">createMgmtORB</a></tt></dt>
<dd><p>Creates a new IOFireWireSBP2LibMgmntORBInterface object.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/getRefCon" target="_top">getRefCon</a></tt></dt>
<dd><p>Returns the refCon set with setRefCon.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/getSessionRef" target="_top">getSessionRef</a></tt></dt>
<dd><p>Returns the session reference to an already open device.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/open" target="_top">open</a></tt></dt>
<dd><p>Exclusively opens a connection to the in-kernel device.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/openWithSessionRef" target="_top">openWithSessionRef</a></tt></dt>
<dd><p>Opens a connection to a device that is already open.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/removeCallbackDispatcherFromRunLoop" target="_top">removeCallbackDispatcherFromRunLoop</a></tt></dt>
<dd><p>Removes a dispatcher for kernel callbacks from the specified run loop.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/setMessageCallback" target="_top">setMessageCallback</a></tt></dt>
<dd><p>Set callback for user space message routine.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/setRefCon" target="_top">setRefCon</a></tt></dt>
<dd><p>Sets the ORB refCon.
</p></dd>
</dl>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/addCallbackDispatcherToRunLoop;  indexgroup=SBP-2 ;   name=addCallbackDispatcherToRunLoop --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/addCallbackDispatcherToRunLoop"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="addCallbackDispatcherToRunLoop">addCallbackDispatcherToRunLoop</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Adds a dispatcher for kernel callbacks to the specified run loop.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">addCallbackDispatcherToRunLoop</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../CoreFoundation/Reference/CFRunLoopRef/Reference/reference.html#//apple_ref/c/tdef/CFRunLoopRef" target="_top" class="type"><span class="type">CFRunLoopRef</span></a> <span class="param">cfRunLoopRef</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
<dt><code>cfRunLoopRef</code></dt>
<dd><p>Reference to a run loop</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess on success.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The user space portions of the SBP2 api communicate with the in-kernel services by 
messaging the kernel.  Similarly, the kernel messages the user space services in response.  
These responses need to be picked up by a piece of code.  This call adds that code to the specified
run loop.  Most drivers will call this method on the run loop that was created when your task was 
created.  To avoid deadlock you must avoid sleeping (or spin waiting) the run loop to wait for 
SBP2 response.  If you do this the dispatcher will never get to run and you will wait forever.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/close;  indexgroup=SBP-2 ;   name=close --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/close"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="close">close</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Opens a connection to a device that is not already open.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">close</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Closes an exclusive access to the device.  When a device is closed it may be 
unloaded by the kernel.  If it is unloaded and then later reappears it will be represented 
by a different object.  You won't be able to use this user client on the new object.  The 
new object will have to be looked up in the IORegistry and a new user client will have to 
be opened on it. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/createLogin;  indexgroup=SBP-2 ;   name=createLogin --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/createLogin"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="createLogin">createLogin</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Creates a new IOFireWireSBP2LibLoginInterface object.
<!-- end abstract --></p>
<p></p>
<pre><!-- a --><span class="type">IUnknownVTbl</span><!-- /a --><span class="type">*</span><span class="type">*</span> ( <span class="type">*</span><!-- a --><span class="function">createLogin</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">REFIID</span><!-- /a --> <span class="param">iid</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
<dt><code>iid</code></dt>
<dd><p>UUID for desired type of IOFireWireSBP2LibLoginInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a pointer to a new IOFireWireSBP2LibLoginInterface.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Creates a new IOFireWireSBP2LibLoginInterface object for the LUN.  Login 
objects supply most of the SBP2 APIs related to login maintenance and Normal 
Command ORB execution.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/createMgmtORB;  indexgroup=SBP-2 ;   name=createMgmtORB --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/createMgmtORB"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="createMgmtORB">createMgmtORB</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Creates a new IOFireWireSBP2LibMgmntORBInterface object.
<!-- end abstract --></p>
<p></p>
<pre><!-- a --><span class="type">IUnknownVTbl</span><!-- /a --><span class="type">*</span><span class="type">*</span> ( <span class="type">*</span><!-- a --><span class="function">createMgmtORB</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">REFIID</span><!-- /a --> <span class="param">iid</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
<dt><code>iid</code></dt>
<dd><p>UUID for desired type of IOFireWireSBP2LibMgmtORBInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a pointer to a new IOFireWireSBP2Login.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Creates a new IOFireWireSBP2LibMgmtORBInterface object.  Management objects let you 
execute commands like QueryLogins, LogicalUnitReset, and AbortTask.  These commands are 
configured after they are created here.  When they are done executing (after a call to submit) 
the supplied completion routine will be called with the supplied refcon.  Usually this refCon
is the "this" pointer of completion method's object.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/getRefCon;  indexgroup=SBP-2 ;   name=getRefCon --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/getRefCon"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getRefCon">getRefCon</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns the refCon set with setRefCon.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span> ( <span class="type">*</span><!-- a --><span class="function">getRefCon</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the previously stored user defined value.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Returns the user defined value previously stored in the ORB with setRefCon.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/getSessionRef;  indexgroup=SBP-2 ;   name=getSessionRef --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/getSessionRef"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getSessionRef">getSessionRef</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns the session reference to an already open device.
<!-- end abstract --></p>
<p></p>
<pre><!-- a --><span class="type">IOFireWireSessionRef</span><!-- /a --> ( <span class="type">*</span><!-- a --><span class="function">getSessionRef</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a sessionRef on success.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Sometimes it is desirable to open multiple user clients on a device.  In the case 
of FireWire sometimes we wish to have both the FireWire User Client and the SBP2 User Client 
open at the same time.  
</p>
<p>The technique to arbitrate this is as follows:</p> 
<p>First open normally the device furthest from the root in the IORegistry.</p>  
<p>Second, get its sessionRef with a call to this method.</p>
<p>Third open the device further up the chain by calling openWithSessionRef and passing the sessionRef returned from this call.</p>
<!-- end discussion -->
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/open;  indexgroup=SBP-2 ;   name=open --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/open"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="open">open</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Exclusively opens a connection to the in-kernel device.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">open</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess on success.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Exclusively opens a connection to the in-kernel device.  As long as the in-kernel 
device object is open, no other drivers will be able to open a connection to the device. When 
open the device on the bus may disappear, but the in-kernel object representing it will stay
instantiated and can begin communicating with the device again if it ever reappears. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/openWithSessionRef;  indexgroup=SBP-2 ;   name=openWithSessionRef --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/openWithSessionRef"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="openWithSessionRef">openWithSessionRef</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Opens a connection to a device that is already open.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">openWithSessionRef</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <!-- a --><span class="type">IOFireWireSessionRef</span><!-- /a --> <span class="param">sessionRef</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>sessionRef</code></dt>
<dd><p>SessionRef returned from getSessionRef call.</p></dd>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess on success.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Sometimes it is desirable to open multiple user clients on a device.  In the case 
of FireWire sometimes we wish to have both the FireWire User Client and the SBP2 User Client 
open at the same time. 
</p>
<p>The technique to arbitrate this is as follows :</p>
<p>First open normally the device furthest from the root in the IORegistry.</p>
<p>Second, get its sessionRef with the getSessionRef call.</p>
<p>Third open the device further up the chain by calling this method and passing the sessionRef returned from the call in step 2.</p>
<!-- end discussion -->
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/removeCallbackDispatcherFromRunLoop;  indexgroup=SBP-2 ;   name=removeCallbackDispatcherFromRunLoop --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/removeCallbackDispatcherFromRunLoop"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="removeCallbackDispatcherFromRunLoop">removeCallbackDispatcherFromRunLoop</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Removes a dispatcher for kernel callbacks from the specified run loop.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">removeCallbackDispatcherFromRunLoop</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Undoes the work of addCallbackDispatcherToRunLoop.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/setMessageCallback;  indexgroup=SBP-2 ;   name=setMessageCallback --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/setMessageCallback"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setMessageCallback">setMessageCallback</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Set callback for user space message routine.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setMessageCallback</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">refCon</span>,
    <!-- a --><span class="type">IOFWSBP2MessageCallback</span><!-- /a --> <span class="param">callback</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
<dt><code>refCon</code></dt>
<dd><p>RefCon to be returned as first argument of completion routine</p></dd>
<dt><code>callback</code></dt>
<dd><p>Address of completion routine.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>In FireWire &amp; SBP2 bus status messages are delivered via IOKit's message routine.  
This routine is emulated in user space for SBP2 &amp; FireWire messages via this callback.  You should
register here for bus reset, and reconnect messages.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=com;  uid=//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/setRefCon;  indexgroup=SBP-2 ;   name=setRefCon --><a name="//apple_ref/doc/com/intfm/IOFireWireSBP2LibLUNInterface/setRefCon"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="setRefCon">setRefCon</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sets the ORB refCon.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">setRefCon</span><!-- /a -->)(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">self</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">refCon</span> );  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>self</code></dt>
<dd><p>Pointer to IOFireWireSBP2LibLUNInterface.</p></dd>
<dt><code>refCon</code></dt>
<dd><p>a user defined value.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Sets a user defined value on the ORB that can be retrieved later with the 
method getRefCon.
<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/IOKit/IOFireWireSBP2Lib_h/Classes/IOFireWireSBP2LibLUNInterface/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/IOKit/IOFireWireSBP2Lib_h/Classes/IOFireWireSBP2LibLUNInterface/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/IOKit/IOFireWireSBP2Lib_h/Classes/IOFireWireSBP2LibLUNInterface/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&nbsp;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2009-02-23
</div>
<!-- headerDoc=cl; uid=//apple_ref/c/cl/IOFireWireSBP2LibLUNInterface; indexgroup=SBP-2 ; name=IOFireWireSBP2LibLUNInterface--><a name="//apple_ref/c/cl/IOFireWireSBP2LibLUNInterface"></a>
</body>
</html>

<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Overview (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING104></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-103.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-105.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-78.html"><B>Part 2 - Working With MacApp</B></A><BR><DD><A HREF="MacAppProgGuide-103.html"><B>Chapter 18 - Working With Windows</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING104-0></A>
<H1>Overview</H1>
 In MacApp, each window that your program displays on the screen is represented by an object based on the <CODE>TWindow</CODE> class. The <CODE>TWindow</CODE> class is a subclass of <CODE>TView</CODE> that draws the frame and the blank white background of a window. <CODE>TWindow</CODE> handles most window operations, including opening, moving, resizing, updating, activating, and deactivating the window; drawing the window frame and grow box; and responding to mouse clicks in the window frame. Because window behavior is fairly standard, you can often create <CODE>TWindow</CODE> objects without defining a custom subclass.<P>
 A window object in MacApp is usually the root view of a view hierarchy. A window must have at least one subview if you wish to allow drawing in the content area. Your view draws the content area of the window and responds to mouse clicks in that area.<P>
<A NAME=HEADING104-3></A>
<H2><A NAME=MARKER-10-3></A><A NAME=MARKER-9-21></A>Floating Windows</H2>
 A <B>floating window</B> is a window that "floats" above all other application windows (except possibly for other floating windows) and is typically hidden when the application is in the background. Floating windows are used for tool palettes and other items that should always be visible (except when they are put away). They are sometimes referred to as <I>windoids</I> or <I>miniwindows</I>.<P>
 MacApp provides a number of facilities to help support floating windows:<P>
<UL>
<LI>MacApp defines the resource type <A NAME=MARKER-2-22></A>'<CODE>fwnd'</CODE>, which allows you to specify a floating window in your <CODE>'View'</CODE> resources. As a result, you can define a floating window with a view-editing application and create the window using the <CODE>gViewServer-&gt;NewTemplateWindow</CODE> method.
<LI>The <CODE>TWindow</CODE> class includes fields for operating on floating windows:<P>
<UL>
<LI>The <A NAME=MARKER-2-23></A>fDoFirstClick field stores a Boolean value. If <CODE>FALSE</CODE>, the window becomes active when it receives a mouse-down event. If <CODE>TRUE</CODE>, the window both becomes active and responds to the event. A floating window is always visible but is not always the active window. By setting the fDoFirstClick field to TRUE, a floating window can function as though it is always active.
<LI>The <A NAME=MARKER-2-24></A><CODE>fFloats</CODE> field is a Boolean field that indicates whether a window is a floating window. When iterating through your application's windows, you can examine <CODE>fFloats</CODE> to identify floating windows for special handling.
<LI>The <A NAME=MARKER-10-1></A><CODE>fGeneratesActivates</CODE> field is used to ensure proper activation of a floating window when the application is switched back in.
<LI>The <A NAME=MARKER-2-26></A><CODE>fHideOnSuspend</CODE> field is a Boolean field that indicates whether a window should be hidden, as floating windows normally are, when the application is suspended.
<LI>The <A NAME=MARKER-2-27></A><CODE>fWasHiddenOnSuspend</CODE> field is a Boolean field that indicates whether a window was hidden when the application was suspended, as floating windows normally are, and hence should be shown when the application is switched in.<P>
</UL>
<LI>The window class <CODE>TFloatWindow</CODE> helps implement a floating window.<P>
<UL>
<LI>Its constructor method, <CODE>TFloatWindow</CODE>, contains the following code to set the value of window fields used in floating:<P>
<pre> fHideOnSuspend = TRUE;<BR> fDoFirstClick = TRUE;<BR> fFloats = TRUE;<BR> fGenerateActivates = FALSE;</pre>
<LI>Its initialization method, <CODE>IFloatWindow</CODE>, marks its Window Manager window record as a floating window. (See the following section.)
<LI>Its <CODE>Close</CODE> method sets the application's target to another window, if possible.<A NAME=MARKER-2-28></A><P>
</UL>
</UL>
<A NAME=HEADING104-18></A>
<H2><A NAME=MARKER-2-29></A>Using Window Manager Routines</H2>
 Every <CODE>TWindow</CODE> object contains a field, <CODE>fWMgrWindow</CODE>, that references a Toolbox Window Manager window record. You normally work with windows in MacApp as objects in the object-oriented world, and MacApp maps your operations into Window Manager calls. But if you are familiar with the Window Manager, you can use the <CODE>fWMgrWindow</CODE> field to manipulate the window directly with Toolbox routines. The volume <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> describes Window Manager operations in detail.<P>
<A NAME=HEADING104-20></A>
<H2>Defining a Window With a 'View' Resource</H2>
 MacApp defines view resource templates for all its view classes in the file <CODE>ViewTypes.r</CODE>. Using these view templates, you can create resource definitions that describe complex window and view hierarchies. Although you can use a text editor to create a text version of a view resource definition, it is far easier to define most views with a graphical resource editor. The Ad Lib view editor, available from Apple Computer, provides a graphical environment that lets you quickly define your application's user interface. Creating view resources and working with graphical resource editors are described in <A HREF=MacAppProgGuide-101.html#MARKER-9-58>"Working With View Resource Templates," beginning on page 425</A>. <P>
<A NAME=HEADING104-22></A>
<H2>Creating Windows</H2>
 MacApp provides the <CODE>TViewServer</CODE> class to manage the creation of views and windows. MacApp automatically creates a <CODE>TViewServer</CODE> object for your application and keeps a reference to it in the global variable <CODE>gViewServer</CODE>. <P>
 The <CODE>TViewServer</CODE> class has two methods that create a window by passing a <CODE>'WIND'</CODE> resource identifier to one of the Macintosh Toolbox routines <CODE>GetNewCWindow</CODE> or <CODE>GetNewWindow</CODE>:<P>
<UL>
<LI>The <A NAME=MARKER-2-30></A><CODE>NewPaletteWindow</CODE> method creates a MacDraw-like window with either a nonscrolling palette along the left edge or a nonscrolling status area at the top of the window. The window has a main view that may or may not scroll.
<LI>The <A NAME=MARKER-10-7></A><CODE>NewSimpleWindow</CODE> method creates a simple window that contains one view and may or may not scroll.<P>
</UL>
 The <CODE>TViewServer</CODE> class also has one method that creates a window from a <CODE>'View'</CODE> resource definition:<P>
<UL>
<LI>The <A NAME=MARKER-2-32></A><CODE>NewTemplateWindow</CODE> method creates a window and view hierarchy of arbitrary complexity from a <CODE>'View'</CODE> resource you have defined.<P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-103.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-105.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

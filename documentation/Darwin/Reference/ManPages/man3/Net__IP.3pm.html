<html><head><title>Mac OS X
 Manual Page For Net::IP(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/Net::IP" title="Mac OS X
 Manual Page for Net::IP(3pm)"><a name="//apple_ref/doc/man/3/Net::IP" title="Mac OS X
 Manual Page for Net::IP(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/Net::IP"; name=Net::IP(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
IP(3)                                User Contributed Perl Documentation                               <!-- a -->IP(3)<!-- /a -->



<b>NAME</b>
       Net::IP - Perl extension for manipulating IPv4/IPv6 addresses

<b>SYNOPSIS</b>
         use Net::IP;

         my $ip = new Net::IP ('193.0.1/24') or die (Net::IP::Error());
         print ("IP  : ".$ip-&gt;ip()."\n");
         print ("Sho : ".$ip-&gt;short()."\n");
         print ("Bin : ".$ip-&gt;binip()."\n");
         print ("Int : ".$ip-&gt;intip()."\n");
         print ("Mask: ".$ip-&gt;mask()."\n");
         print ("Last: ".$ip-&gt;last_ip()."\n");
         print ("Len : ".$ip-&gt;prefixlen()."\n");
         print ("Size: ".$ip-&gt;size()."\n");
         print ("Type: ".$ip-&gt;iptype()."\n");
         print ("Rev:  ".$ip-&gt;reverse_ip()."\n");

<b>DESCRIPTION</b>
       This module provides functions to deal with <b>IPv4/IPv6</b> addresses. The module can be used as a class,
       allowing the user to instantiate IP objects, which can be single IP addresses, prefixes, or ranges of
       addresses. There is also a procedural way of accessing most of the functions. Most subroutines can
       take either <b>IPv4</b> or <b>IPv6</b> addresses transparently.

<b>OBJECT-ORIENTED</b> <b>INTERFACE</b>
       <b>Object</b> <b>Creation</b>

       A Net::IP object can be created from a single IP address:

         $ip = new Net::IP ('193.0.1.46') || die ...

       Or from a Classless Prefix (a /24 prefix is equivalent to a C class):

         $ip = new Net::IP ('195.114.80/24') || die ...

       Or from a range of addresses:

         $ip = new Net::IP ('20.34.101.207 - 201.3.9.99') || die ...

       Or from a address plus a number:

         $ip = new Net::IP ('20.34.10.0 + 255') || die ...

       The <u>new()</u> function accepts IPv4 and IPv6 addresses:

         $ip = new Net::IP ('dead:beef::/32') || die ...

       Optionnaly, the function can be passed the version of the IP. Otherwise, it tries to guess what the
       version is (see <b>_</b><u></u><b><u>i</u></b><b>_</b><u></u><b><u>i</u></b><u></u><b><u>v</u></b><u></u><b><u>(</u></b> and <b>_</b><u></u><b><u>i</u></b><b>_</b><u></u><b><u>i</u></b><u></u><b><u>v</u></b><u></u><b><u>(</u></b>).

         $ip = new Net::IP ('195/8',4); # Class A

<b>OBJECT</b> <b>METHODS</b>
       Most of these methods are front-ends for the real functions, which use a procedural interface. Most
       functions return undef on failure, and a true value on success. A detailed description of the
       procedural interface is provided below.

       <b>set</b>

       Set an IP address in an existing IP object. This method has the same functionality as the <u>new()</u>
       method, except that it reuses an existing object to store the new IP.

       "$ip-&gt;set('130.23.1/24',4);"

       Like <u>new()</u>, <u>set()</u> takes two arguments - a string used to build an IP address, prefix, or range, and
       optionally, the IP version of the considered address.

       It returns an IP object on success, and undef on failure.

       <b>error</b>

       Return the current object error string. The error string is set whenever one of the methods produces
       an error. Also, a global, class-wide <u></u><b><u>E</u></b><u></u><b><u>r</u></b><u></u><b><u>r</u></b><u></u><b><u>)</u></b> function is avaliable.

       "warn ($ip-&gt;error());"

       <b>errno</b>

       Return the current object error number. The error number is set whenever one of the methods produces
       an error. Also, a global <b>$ERRNO</b> variable is set when an error is produced.

       "warn ($ip-&gt;errno());"

       <b>ip</b>

       Return the IP address (or first IP of the prefix or range) in quad format, as a string.

       "print ($ip-&gt;ip());"

       <b>binip</b>

       Return the IP address as a binary string of 0s and 1s.

       "print ($ip-&gt;binip());"

       <b>prefixlen</b>

       Return the length in bits of the current prefix.

       "print ($ip-&gt;prefixlen());"

       <b>version</b>

       Return the version of the current IP object (4 or 6).

       "print ($ip-&gt;version());"

       <b>size</b>

       Return the number of IP addresses in the current prefix or range.  Use of this function requires
       Math::BigInt.

       "print ($ip-&gt;size());"

       <b>binmask</b>

       Return the binary mask of the current prefix, if applicable.

       "print ($ip-&gt;binmask());"

       <b>mask</b>

       Return the mask in quad format of the current prefix.

       "print ($ip-&gt;mask());"

       <b>prefix</b>

       Return the full prefix (ip+prefix length) in quad (standard) format.

       "print ($ip-&gt;prefix());"

       <b>print</b>

       Print the IP object (IP/Prefix or First - Last)

       "print ($ip-&gt;print());"

       <b>intip</b>

       Convert the IP in integer format and return it as a Math::BigInt object.

       "print ($ip-&gt;intip());"

       <b>hexip</b>

       Return the IP in hex format

       "print ($ip-&gt;hexip());"

       <b>hexmask</b>

       Return the mask in hex format

       "print ($ip-&gt;hexmask());"

       <b>short</b>

       Return the IP in short format:      IPv4 addresses: 194.5/16      IPv6 addresses: ab32:f000::

       "print ($ip-&gt;short());"

       <b>iptype</b>

       Return the IP Type - this describes the type of an IP (Public, Private, Reserved, etc.)

       "print ($ip-&gt;iptype());"

       <b>reverse_ip</b>

       Return the reverse IP for a given IP address (in.addr. format).

       "print ($ip-&gt;reserve_ip());"

       <b>last_ip</b>

       Return the last IP of a prefix/range in quad format.

       "print ($ip-&gt;last_ip());"

       <b>last_bin</b>

       Return the last IP of a prefix/range in binary format.

       "print ($ip-&gt;last_bin());"

       <b>last_int</b>

       Return the last IP of a prefix/range in integer format.

       "print ($ip-&gt;last_int());"

       <b>find_prefixes</b>

       This function finds all the prefixes that can be found between the two addresses of a range. The
       function returns a list of prefixes.

       "@list = $ip-&gt;find_prefixes($other_ip));"

       <b>bincomp</b>

       Binary comparaison of two IP objects. The function takes an operation and an IP object as arguments.
       It returns a boolean value.

       The operation can be one of: lt: less than (smaller than) le: smaller or equal to gt: greater than
       ge: greater or equal to

       "if ($ip-&gt;bincomp('lt',$ip2) {...}"

       <b>binadd</b>

       Binary addition of two IP objects. The value returned is an IP object.

       "my $sum = $ip-&gt;binadd($ip2);"

       <b>aggregate</b>

       Aggregate 2 IPs - Append one range/prefix of IPs to another. The last address of the first range must
       be the one immediately preceding the first address of the second range. A new IP object is returned.

       "my $total = $ip-&gt;aggregate($ip2);"

       <b>overlaps</b>

       Check if two IP ranges/prefixes overlap each other. The value returned by the function should be one
       of:      $IP_PARTIAL_OVERLAP (ranges overlap)      $IP_NO_OVERLAP      (no overlap)
            $IP_A_IN_B_OVERLAP  (range2 contains range1)      $IP_B_IN_A_OVERLAP  (range1 contains range2)
            $IP_IDENTICAL       (ranges are identical)      undef               (problem)

       "if ($ip-&gt;overlaps($ip2)==$IP_A_IN_B_OVERLAP) {...};"

       <b>looping</b>

       The "+" operator is overloaded in order to allow looping though a whole range of IP addresses:

         my $ip = new Net::IP ('195.45.6.7 - 195.45.6.19') || die;
         # Loop
         do {
             print $ip-&gt;ip(), "\n";
         } while (++$ip);

       The ++ operator returns undef when the last address of the range is reached.

       <b>auth</b>

       Return IP authority information from the IP::Authority module

       "$auth = ip-"auth ();&gt;

       Note: IPv4 only

<b>PROCEDURAL</b> <b>INTERFACE</b>
       These functions do the real work in the module. Like the OO methods, most of these return undef on
       failure. In order to access error codes and strings, instead of using $ip-&gt;<u>error()</u> and $ip-&gt;<u>errno()</u>,
       use the global functions "Error()" and "Errno()".

       The functions of the procedural interface are not exported by default. In order to import these
       functions, you need to modify the use statement for the module:

       "use Net::IP qw(:PROC);"

       <b>Error</b>

       Returns the error string corresponding to the last error generated in the module. This is also useful
       for the OO interface, as if the <u>new()</u> function fails, we cannot call $ip-&gt;<u>error()</u> and so we have to
       use <u>Error()</u>.

       warn <u>Error()</u>;

       <b>Errno</b>

       Returns a numeric error code corresponding to the error string returned by Error.

       <b>ip_iptobin</b>

       Transform an IP address into a bit string.

           Params  : IP address, IP version
           Returns : binary IP string on success, undef otherwise

       "$binip = ip_iptobin ($ip,6);"

       <b>ip_bintoip</b>

       Transform a bit string into an IP address

           Params  : binary IP, IP version
           Returns : IP address on success, undef otherwise

       "$ip = ip_bintoip ($binip,6);"

       <b>ip_bintoint</b>

       Transform a bit string into a BigInt.

           Params  : binary IP
           Returns : BigInt

       "$bigint = new Math::BigInt (ip_bintoint($binip));"

       <b>ip_inttobin</b>

       Transform a BigInt into a bit string.  <u>Warning</u>: sets warnings ("-w") off. This is necessary because
       Math::BigInt is not compliant.

           Params  : BigInt, IP version
           Returns : binary IP

       "$binip = ip_inttobin ($bigint);"

       <b>ip_get_version</b>

       Try to guess the IP version of an IP address.

           Params  : IP address
           Returns : 4, 6, undef(unable to determine)

       "$version = ip_get_version ($ip)"

       <b>ip_is_ipv4</b>

       Check if an IP address is of type 4.

           Params  : IP address
           Returns : 1 (yes) or 0 (no)

       "ip_is_ipv4($ip) and print "$ip is IPv4";"

       <b>ip_is_ipv6</b>

       Check if an IP address is of type 6.

           Params            : IP address
           Returns           : 1 (yes) or 0 (no)

       "ip_is_ipv6($ip) and print "$ip is IPv6";"

       <b>ip_expand_address</b>

       Expand an IP address from compact notation.

           Params  : IP address, IP version
           Returns : expanded IP address or undef on failure

       "$ip = ip_expand_address ($ip,4);"

       <b>ip_get_mask</b>

       Get IP mask from prefix length.

           Params  : Prefix length, IP version
           Returns : Binary Mask

       "$mask = ip_get_mask ($len,6);"

       <b>ip_last_address_bin</b>

       Return the last binary address of a prefix.

           Params  : First binary IP, prefix length, IP version
           Returns : Binary IP

       "$lastbin = ip_last_address_bin ($ip,$len,6);"

       <b>ip_splitprefix</b>

       Split a prefix into IP and prefix length.  If it was passed a simple IP, it just returns it.

           Params  : Prefix
           Returns : IP, optionnaly length of prefix

       "($ip,$len) = ip_splitprefix ($prefix)"

       <b>ip_prefix_to_range</b>

       Get a range of IPs from a prefix.

           Params  : Prefix, IP version
           Returns : First IP, last IP

       "($ip1,$ip2) = ip_prefix_to_range ($prefix,6);"

       <b>ip_bincomp</b>

       Compare binary Ips with &lt;, &gt;, &lt;=, &gt;=.
        Operators are lt(&lt;), le(&lt;=), gt(&gt;), and ge(&gt;=)

           Params  : First binary IP, operator, Last binary IP
           Returns : 1 (yes), 0 (no), or undef (problem)

       "ip_bincomp ($ip1,'lt',$ip2) == 1 or do {}"

       <b>ip_binadd</b>

       Add two binary IPs.

           Params  : First binary IP, Last binary IP
           Returns : Binary sum or undef (problem)

       "$binip = ip_binadd ($bin1,$bin2);"

       <b>ip_get_prefix_length</b>

       Get the prefix length for a given range of 2 IPs.

           Params  : First binary IP, Last binary IP
           Returns : Length of prefix or undef (problem)

       "$len = ip_get_prefix_length ($ip1,$ip2);"

       <b>ip_range_to_prefix</b>

       Return all prefixes between two IPs.

           Params  : First IP, Last IP, IP version
           Returns : List of Prefixes or undef (problem)

       The prefixes returned have the form q.q.q.q/nn.

       "@prefix = ip_range_to_prefix ($ip1,$ip2,6);"

       <b>ip_compress_v4_prefix</b>

       Compress an IPv4 Prefix.

           Params  : IP, Prefix length
           Returns : Compressed Prefix

       "$ip = ip_compress_v4_prefix ($ip, $len);"

       <b>ip_compress_address</b>

       Compress an IPv6 address. Just returns the IP if it is an IPv4.

           Params  : IP, IP version
           Returns : Compressed IP or undef (problem)

       "$ip = ip_compress_adress ($ip, $version);"

       <b>ip_is_overlap</b>

       Check if two ranges of IPs overlap.

           Params  : Four binary IPs (begin of range 1,end1,begin2,end2), IP version
               $IP_PARTIAL_OVERLAP (ranges overlap)
               $IP_NO_OVERLAP      (no overlap)
               $IP_A_IN_B_OVERLAP  (range2 contains range1)
               $IP_B_IN_A_OVERLAP  (range1 contains range2)
               $IP_IDENTICAL       (ranges are identical)
               undef               (problem)

       "(ip_is_overlap($rb1,$re1,$rb2,$re2,4) eq $IP_A_IN_B_OVERLAP) and do {};"

       <b>ip_get_embedded_ipv4</b>

       Get an IPv4 embedded in an IPv6 address

           Params  : IPv6
           Returns : IPv4 string or undef (not found)

       "$ip4 = ip_get_embedded($ip6);"

       <b>ip_check_mask</b>

       Check the validity of a binary IP mask

           Params  : Mask
           Returns : 1 or undef (invalid)

       "ip_check_mask($binmask) or do {};"

       Checks if mask has only 1s followed by 0s.

       <b>ip_aggregate</b>

       Aggregate 2 ranges of binary IPs

           Params  : 1st range (1st IP, Last IP), last range (1st IP, last IP), IP version
           Returns : prefix or undef (invalid)

       "$prefix = ip_aggregate ($bip1,$eip1,$bip2,$eip2) || die ..."

       <b>ip_iptype</b>

       Return the type of an IP (Public, Private, Reserved)

           Params  : IP to test, IP version
           Returns : type or undef (invalid)

       "$type = ip_iptype ($ip);"

       <b>ip_check_prefix</b>

       Check the validity of a prefix

           Params  : binary IP, length of prefix, IP version
           Returns : 1 or undef (invalid)

       Checks if the variant part of a prefix only has 0s, and the length is correct.

       "ip_check_prefix ($ip,$len,$ipv) or do {};"

       <b>ip_reverse</b>

       Get a reverse name from a prefix

           Params  : IP, length of prefix, IP version
           Returns : Reverse name or undef (error)

       "$reverse = ip_reverse ($ip);"

       <b>ip_normalize</b>

       Normalize data to a range/prefix of IP addresses

           Params  : Data String (Single IP, Range, Prefix)
           Returns : ip1, ip2 (if range/prefix) or undef (error)

       "($ip1,$ip2) = ip_normalize ($data);"

       <b>ip_auth</b>

       Return IP authority information from the IP::Authority module

           Params  : IP, version
           Returns : Auth info (RI for RIPE, AR for ARIN, etc)

       "$auth = ip_auth ($ip,4);"

       Note: IPv4 only

<b>BUGS</b>
       The Math::BigInt library is needed for functions that use integers. These are ip_inttobin,
       ip_bintoint, and the size method. In a next version, Math::BigInt will become optionnal.

<b>AUTHORS</b>
       Manuel Valente &lt;manuel.valente@gmail.com&gt;.

       Original IPv4 code by Monica Cortes Sack &lt;mcortes@ripe.net&gt;.

       Original IPv6 code by Lee Wilmot &lt;lee@ripe.net&gt;.

<b>BASED</b> <b>ON</b>
       ipv4pack.pm, iplib.pm, iplibncc.pm.

<b>SEE</b> <b>ALSO</b>
       <a href="../man1/perl.1.html#//apple_ref/doc/man/1/perl"><u>perl</u>(1)</a>, IP::Authority



perl v5.8.8                                      2006-05-22                                            <!-- a -->IP(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Net__IP.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Net__IP.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Net__IP.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

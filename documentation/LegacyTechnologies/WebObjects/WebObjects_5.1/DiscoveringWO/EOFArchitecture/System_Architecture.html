<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>System Architecture</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>&gt;</b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Introductio_ise_Objects.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="The_Model.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF102"></a><h2><font face="Lucida Grande,Helvetica,Arial">System Architecture</font></h2><!-- apple_doc: pageHeadingEnd --><p>Enterprise Objects is a suite of tools and code that allowyou to create database-based applications. It is divided into severallayers concerned with connecting to the database, converting resultsets to enterprise objects, and ensuring that the state of the enterprise objectsand the database are always synchronized. WebObjects adds anotherlayer on top of Enterprise Objects; it is used to manipulate enterpriseobjects and display their data.</p><p>The following components, listed from the WebObjects layerdown to the database, make up the Enterprise Objects architecture.</p><ul><li>WebObjects <b>components</b> displayand manipulate enterprise objects.</font></li><li><b>Enterprise objects</b> are the instances ofJava classes you've created to represent your database rows.</font></li><li>An <b>editing context</b> manages a graph of objectsand keeps track of changes that need to be transmitted to the database.</font></li><li>The <b>model</b> (maintained with EOModeler) providesa high-level view of your data model. It defines the mapping betweenthe data entities your application requires and the tables in yourdatabase. It also defines relationships between entities, whichare reflected in the database tables with primary and foreign keydefinitions.</font></li><li>The <b>database level</b> translates from thedictionaries used by the adaptor level to enterprise objects, andvice versa.</font></li><li>The <b>adaptor level</b> understands the preferredprotocol of the database, and uses it to translate between simpleobjects called dictionaries and the raw data on the database.</font></li><li>The <b>database</b> is external to EnterpriseObjects and provided by a third party. </font></li></ul><p> <a href="#CJBDBDFJ">Figure 9-1</a> illustrates the approach that Enterprise Objectstakes when interacting with a database.</p><br><a name = "CJBDBDFJ"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure9-1 The Enterprise Objects approach</font></b></p> <img src = "../Art/eofapproach.gif" alt = "[image: ../Art/eofapproach.gif]"><p>You're familiar with manipulating Java objects using WebObjectscomponents. Now, we'll start at the top with those objects andfollow the interactions in the Enterprise Objects layer down tothe database.</p><br><a name = "TPXREF103"></a><h3><font face="Lucida Grande,Helvetica,Arial">WebObjects Interaction</font></h3><p>WebObjects provides the user interface for your enterpriseobjects. The WebObjects dynamic elements use an interface calledEOKeyValueCoding to communicate with Java objects. All enterpriseobjects implement this interface.</p><br><a name = "TPXREF104"></a><h3><font face="Lucida Grande,Helvetica,Arial">Enterprise Objects</font></h3><p>An enterprise object is first and foremost a Java object likeany other. It has instance variables and methods that act on them.However, it has the additional characteristic of being linked toa database structure by Enterprise Objects. Enterprise objects differfrom other objects in that they are a representation of data thatis stored in a database.</p><p>Each enterprise object typically represents one row from adatabase. When the properties (instance variables) of an enterpriseobject are changed and you instruct Enterprise Objects to save thosechanges, they are propagated through the layers down to the database.</p><p>An enterprise object can be an instance of the default EOGenericRecordclass or of a custom Java class. EOGenericRecord provides all thedefault behavior of propagating changes to the database but doesnot allow the addition of custom logic. You use an EOGenericRecord whenyou don't need special behavior beyond that of basic representationof database values. You define a custom class when you wish to havemore control over the properties and behavior of your data. Customclasses are defined as subclasses of EOGenericRecord so they inheritthe default enterprise object behavior.</p><p>Enterprise objects, whether represented by EOGenericRecordor a custom class, are defined in a model created with the EOModelerapplication. The <b>model</b>, which is explained ingreater detail in  <a href="The_Model.html#CJBECBED" target = "_right">"The Model"</a>, specifies which columns in your database are associatedwith a particular property for each entity of your data model.</p><p>EOGenericRecords use the <b>key-value coding</b> mechanismdefined in the EOKeyValueCoding interface to store their data. Eachkey is named for the database column it represents. When an enterpriseobject is instantiated from a row in the database, the value ofits keys are obtained from their corresponding columns in the row.</p><br><a name = "TPXREF105"></a><h3><font face="Lucida Grande,Helvetica,Arial">EOControl</font></h3><p>The control layer is the principal domain of enterprise objects.It provides an insulated layer dedicated to maintaining the stateof enterprise objects. Data flows out and upward to WebObjects components,and can be propagated downward toward the database. The EOControllayer is responsible for</p><ul><li>trackingchanges to enterprise objects</font></li><li>updating the database when changes are saved</font></li><li>managing undo operations in the object graph</font></li><li>managing uniquing in the object graph<p><b>Uniquing</b> isused by Enterprise Objects to ensure that an enterprise object isnot duplicated in the control layer. This mechanism uses an entity'sprimary key to determine the identity and uniqueness of each enterpriseobject in the object graph. It is important that enterprise objectsnot be duplicated in the object graph to maintain data integrityand use memory efficiently. For example, if two books have the same author,the control layer ensures that they both refer to the same Authorobject in memory. Uniquing is one of the responsibilities of theobject graph.</p></font></li></ul><br><a name = "TPXREF106"></a><h4><font face="Lucida Grande,Helvetica,Arial">The Object Graph</font></h4><p>An object graph is a collection of all the currently activeenterprise objects for a particular external store. You can thinkof it as a snapshot of the current state of the database reflected inJava objects.</p><p>An object graph can also represent a potential state of thedatabase. If your components make changes to some enterprise objects,those changes are stored in an object graph until they are committedto the database. Keeping track of these changes is the responsibilityof the EOEditingContext class.</p><br><a name = "TPXREF107"></a><h4><font face="Lucida Grande,Helvetica,Arial">The Editing Context</font></h4><p>Each editing context object manages one object graph, keepingtrack of any changed properties of each of its enterprise objects.It also preserves their original values so changes can be undone.</p><p>Typically, a set of changes reflecting user input and selectionis accumulated in the object graph of an editing context. At somepoint, the changes are either committed to the database for permanentstorage, or they are undone, reverting the object graph to its originalstate. If the changes are committed, the editing context notifiesthe EOAccess layer of the changes made to enterprise objects, sothat it can make the necessary changes to the database.</p><p>You can create editing contexts in your application. However,by default, each session has an editing context associated withit. This default editing context, accessible by all components,is usually sufficient.</p><br><a name = "TPXREF108"></a><h3><font face="Lucida Grande,Helvetica,Arial">EOAccess</font></h3><p>The access layer provides access to the database through astandardized protocol. Every piece of data crossing between theaccess layer is in the form of an enterprise object. This levelof abstraction makes the job of the control layer much simpler,since it can rely on the format of the data.</p><p>The access layer is divided into two parts: the adaptor leveland the database level. </p><br><a name = "TPXREF109"></a><h4><font face="Lucida Grande,Helvetica,Arial">The Adaptor Level</font></h4><p>The adaptor level is where Enterprise Objects translates datafrom a database and packages it as key-value dictionaries. Currently,the JDBC (Java Database Connectivity) standard is used for databaseaccess, but the adaptor level makes it possible to allow accessto other database systems, such as legacy databases, simply by addingan adaptor. This allows a developer to remain unconcerned with thespecific database to be used while writing code.</p><br><a name = "TPXREF110"></a><h4><font face="Lucida Grande,Helvetica,Arial">The Database Level</font></h4><p>The database level is the level beyond which no details areknown about the specific database underneath. Enterprise objectsare created from raw data from the database, and when data is neededby the control layer, the database layer performs the needed fetches fromthe database. Similarly, the database layer handles the actual updatesto the database when an editing context is saved.</p><br>    <br><a href="Introductio_ise_Objects.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="The_Model.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<hr alt=""><p><font face="Palatino" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
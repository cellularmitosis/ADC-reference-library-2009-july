<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Defining a New Component</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Custom_Objects.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Modifying_t_n_component.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "BBCHFJGC"></a><h2><font face="Lucida Grande,Helvetica,Arial">Defining a New Component</font></h2><!-- apple_doc: pageHeadingEnd --><p>In this section, you'll create a new project and add a componentfor displaying and editing a user's information.</p><p>Remember that each component has its own Java class. It isconvenient to think of components, as well as the objects representingthem, as self-contained units with specific tasks. The task of thenew component is to allow the user to edit a User object. By encapsulatingbehavior this way, you ensure that if you add, remove, or alterthe properties of a user, you need to modify only this componentto allow editing the new attributes.</p><p>You begin by creating a new project since you no longer needthe code for tracking the request-response cycle. Then you add thecustom User class and create a component for editing a User object.Then you will alter the Main component to maintain a list of users ratherthan a single user, and add methods to use the new component toedit any one of them.</p><ol><li>Create anew WebObjects application project and name it ComponentCommunication.<br> <img src = "../Art/componentcommcreate.gif" alt = "[image: ../Art/componentcommcreate.gif]"></font></li><li>Add a <code>User.java</code> class.<p>Followthe steps in  <a href="Custom_Objects.html#BBCBDCEG" target = "_right">"Adding the Custom Class"</a> to add the file to the project. Thenedit the file so that it looks like  <a href="#BCIBGBFI">Listing 6-3</a>.</p><a name = "BCIBGBFI"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing6-3 User.java</font></b></p><pre>import com.webobjects.foundation.*;import com.webobjects.appserver.*;import com.webobjects.eocontrol.*;public class User extends Object {    protected String personName;    protected String favoriteFood;    public String personName() {        return personName;    }    public void setPersonName(String newPersonName) {        personName = newPersonName;    }    public String favoriteFood() {        return favoriteFood;    }    public void setFavoriteFood(String newFavoriteFood) {        favoriteFood = newFavoriteFood;    }    public boolean entryIncomplete() {        if (personName == null || favoriteFood == null || personName.equals("")  || favoriteFood.equals(""))  {            return true;        }        else {            return false;        }    }}</pre></font></li><li>Add a component to the project.<ol><li>Select Web Componentsfrom the Groups & Files list.</font></li><li>Choose File &gt; New File.</font></li><li>Under WebObjects, select Component in the New File pane ofthe assistant and click Next.</font></li><li>Enter <code>UserEdit</code> inthe File Name text field.<br> <img src = "../Art/pbaddcomponent.gif" alt = "[image: ../Art/pbaddcomponent.gif]"></font></li><li>Make sure Application Server is selected in the Targets listand click Finish.</font></li></ol></font></li></ol><p>You'll notice that the new component is added to the project'sWeb Components group. </p><br> <img src = "../Art/compcommcompadded.gif" alt = "[image: ../Art/compcommcompadded.gif]"><p>You're now ready to customize the component used for editinga User object, UserEdit. The user edits one User object at a time,so <code>UserEdit.java</code> needsto have one instance variable of type User. The UserEdit componentwill have fields similar to those defined in the Main componentof the UserEntry project (see  <a sector="mod" href="../UserInput/iUser_Interface.html" target="_top">"User Interface"</a>)and buttons to submit and cancel the changes.</p><ol><li>Open <code>UserEdit.wo</code> inWebObjects Builder.</font></li><li>Add a User instance variable named <code>user</code> tothe component.<p>Select the options that create an instance variableand provide accessor methods. This variable holds the particularUser object being edited.</p><br> <img src = "../Art/wobcompcommaddvar.gif" alt = "[image: ../Art/wobcompcommaddvar.gif]"></font></li><li>Add a WOForm element to the UserEdit component.</font></li><li>Add and bind the WOTextFields as shown in  <a href="#TPXREF111">Figure 6-1</a>.</font></li><li>Add an action method called <code>submitChanges</code> tothe component. Choose Main as the page returned by the method. Thismeans that when the user is done editing, she's returned to theMain component rather than the UserEdit component.<br> <img src = "../Art/compcommaddsubmit.gif" alt = "[image: ../Art/compcommaddsubmit.gif]"></font></li><li>Use the Forms menu to add a WOResetButton and a WOSubmitButton,and bind the <code>submitChanges</code> methodto the WOSubmitButton's <code>action</code> attribute.<p>TheWOResetButton resets the form fields.</p></font></li><li>Save <code>UserEdit.wo</code>.</font></li><li>Edit the <code>submitChanges</code> methodin <code>UserEdit.java</code> so thatit looks like  <a href="#BCIBICEG">Listing 6-4</a>.<a name = "BCIBICEG"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing6-4 EditUser.java's submitChanges method</font></b></p><pre>public Main submitChanges() {    Main nextPage = (Main)pageWithName("Main");    // Initialize your component here    nextPage.setUser(user); // send user object to the Main page    return nextPage;}</pre></font></li><li>Save <code>UserEdit.java</code>.</font></li></ol><br><a name = "TPXREF111"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure6-1 UserEdit.wo</font></b></p> <img src = "../Art/compcommcomplt.gif" alt = "[image: ../Art/compcommcomplt.gif]"><br>    <br><a href="Custom_Objects.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Modifying_t_n_component.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<hr alt=""><p><font face="Palatino" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
<html><head><title>Mac OS X Server
 Manual Page For ftpaccess(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/ftpaccess" title="Mac OS X Server
 Manual Page for ftpaccess(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/ftpaccess"; name=ftpaccess(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with Mac&nbsp;OS&nbsp;X&nbsp;Server.  It is
not available on standard Mac OS X (client) installations.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
ftpaccess(5)                                                                                    ftpaccess(5)



<b>Name</b>
       ftpaccess - xftpd configuration file

<b>Description</b>
       The ftpaccess file is used to configure the operation of <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><b>xftpd(8)</b></a><b></b>.

<b>Access</b> <b>Capabilities</b>
       <b>class</b> <b>&lt;class&gt;</b> <b>&lt;typelist&gt;</b> <b>&lt;addrglob&gt;</b> <b>[&lt;addrglob&gt;</b> <b>...]</b>
            Define  &lt;class&gt;  of  users,  with source addresses of the form  &lt;addrglob&gt;.  Multiple members of
            &lt;class&gt; may be defined.  There  may  be  multiple  "class"  commands listing additional  members
            of the class.  If multiple "class" commands can apply to  the  current  session, the  first  one
            listed  in  the access file is used.  Failing to define a valid class  for  a  host  will  cause
            access  to  be denied.  &lt;typelist&gt; is a comma-separated list of any of the keywords "anonymous",
            "guest"  and "real".  If the "real" keyword is included, the class can match users using FTP  to
            access   real   accounts,  and  if the "anonymous" keyword is included the class can match users
            using  anonymous  FTP.   The  "guest" keyword   matches   guest   access  accounts  (see  "guest
            group" for more information)

       &lt;addrglob&gt; may be a globbed domain name or a  globbed numeric  address.  It may also be the name of a
       file, starting with a slash  ('/'),  which  contains  additional address  globs,  as   well   as   in
       the   form  address:netmask  or  address/cidr.  Placing  an  exclamation  (!)  before  an  &lt;addrglob&gt;
       negates the test.


       <b>deny</b> <b>&lt;addrglob&gt;</b> <b>&lt;message_file&gt;</b>
            Always deny access to <!-- a -->host(s)<!-- /a --> matching &lt;addrglob&gt;.  &lt;message_file&gt; is displayed.  &lt;addrglob&gt; may
            be  "!nameserved" to deny access to sites without a working nameserver.  It may also be the name
            of a file, starting with a slash ('/'), which contains additional address globs, as well  as  in
            the form address:netmask or address/cidr.

       <b>defumask</b> <b>&lt;umask&gt;</b> <b>[&lt;class&gt;]</b>
            Set  the  umask  applied  to  files created by daemon if the remote use is a member of the named
            class.  If &lt;class&gt; is not specified, then use the umask as the default for classes which do  not
            have one specified.  <b>limit-time</b> <b>{*|anonymous}</b> <b>&lt;minutes&gt;</b> Limit the total time a session can take.
            By default, there is no limit.  Real users are never limited.

       <b>limit</b> <b>&lt;class&gt;</b> <b>&lt;n&gt;</b> <b>&lt;times&gt;</b> <b>&lt;message_file&gt;</b>
            Limit &lt;class&gt; to &lt;n&gt; users at times &lt;times&gt;, displaying &lt;message_file&gt; if user is denied access.
            Limit check is performed at login time only.  If multiple "limit" commands can apply to the cur-<font color="#ffffff" class="whiteout">rent&nbsp;current</font>
            rent session, the first applicable one is used.  Failing to define a valid limit, or a limit  of
            -1, is equivalent to unlimited. &lt;times&gt; is in same format as the times in the UUCP L.sys file.

       <b>noretrieve</b> <b>[absolute|relative]</b> <b>[class=&lt;classname&gt;]</b> <b>...</b> <b>[-]</b> <b>&lt;filename&gt;</b> <b>&lt;filename&gt;</b> <b>...</b>
            Always  deny  retrieve-ability  of  these files. If the files are an absolute path specification
            (i.e. begins with '/' character) then only those files are  marked  un-gettable,  otherwise  all
            files with matching the filename are refused transfer. Example:
                 noretrieve /etc/passwd core
            specifies no one will be able to get the file /etc/passwd whereas they will be allowed to trans-<font color="#ffffff" class="whiteout">fer&nbsp;transfer</font>
            fer a file `passwd' if it is not in /etc. On the other hand no one will be  able  to  get  files
            named `core' wherever it is.

       Absolute  path  specifications  ending  with  a  slash ('/') are taken to mean all files in the named
       directory are to marked un-gettable.

       The &lt;filename&gt; may be specified as a file glob, or regular expression.

       The optional first parameter selects whether names are intepreted as absolute or relative to the cur-<font color="#ffffff" class="whiteout">rent&nbsp;current</font>
       rent chroot'd environment.  The default is to intepret names beginning with a slash as absolute.

       The noretrieve restrictions may be placed upon members of particular classes.  If any class= is spec-<font color="#ffffff" class="whiteout">ified&nbsp;specified</font>
       ified the named files are only non-retrievable if the current user is a member of any  of  the  given
       classes.

       <b>allow-retrieve</b> <b>[absolute|relative]</b> <b>[class=&lt;classname&gt;]...</b> <b>[-]</b> <b>&lt;filename&gt;</b> <b>...</b>
            Allows retrieval of files which would otherwise be denied by noretrieve.

       <b>krb5_principal</b> <b>&lt;principal</b> <b>name&gt;</b>
            Sets the Kerberos V5 service principal name used for the server. Should be set to ftp/fqdn@REALM

       <b>loginfails</b> <b>&lt;number&gt;</b>
            After &lt;number&gt; login failures, log a "repeated login failures" message  and  terminate  the  FTP
            connection.  Default value is 5.


       <b>Informational</b> <b>Capabilities</b>

       <b>greeting</b> <b>full|brief|terse</b>
            Allows you to control how much information is given out before the remote user logs in.  'greet-<font color="#ffffff" class="whiteout">ing&nbsp;'greeting</font>
            ing full' is the default and shows the hostname and  daemon  version.   'greeting  brief'  whose
            shows  the  hostname.   'greeting  terse'  simply says "FTP server ready."  Although full is the
            default, brief is recommended.

       <b>banner</b> <b>&lt;path&gt;</b>
            Works similarly to the message command, except that the banner  is  displayed  before  the  user
            enters  the  username/password.  The &lt;path&gt; is relative to the real system root, not the base of
            the anonymous FTP directory.

       <b>WARNING:</b> use of this command can completely prevent non-compliant FTP clients from making use of  the
       FTP  server.  Not all clients can handle multi-line responses (which is how the banner is displayed).

       <b>email</b> <b>&lt;name&gt;</b>
            Defines the email address of the ftp archive maintainer.  This string will be printed every time
            the %E magic cookie is used.

       <b>message</b> <b>&lt;path&gt;</b> <b>{&lt;when&gt;</b> <b>{&lt;class&gt;</b> <b>...}}</b>
            Define  a  file  with  &lt;path&gt;  such that xftpd will display the contents of the file to the user
            login time or upon using the change working directory command.   The  &lt;when&gt;  parameter  may  be
            "LOGIN"  or  "CWD=&lt;dir&gt;".   If  &lt;when&gt; is "CWD=&lt;dir&gt;", &lt;dir&gt; specifies the new default directory
            which will trigger the notification.

       The optional &lt;class&gt; specification allows the message to be displayed only to members of a particular
       class.  More than one class may be specified.

       There can be "magic cookies" in the readme file which cause the ftp server to replace the cookie with
       a specified text string:
             %T      local time (form Thu Nov 15 17:12:42 1990)
             %F      free space in partition of CWD (kbytes)
                     [not supported on all systems]
             %C      current working directory
             %E      the maintainer's email address as defined in ftpaccess
             %R      remote host name
             %L      local host name
             %u      username as determined via RFC931 authentication
             %U      username given at login time
             %M      maximum allowed number of users in this class
             %N      current number of users in this class
             %B      absolute limit on disk blocks allocated
             %b      preferred limit on disk blocks
             %Q      current block count
             %I      maximum number of allocated inodes (+1)
             %i      preferred inode limit
             %q      current number of allocated inodes
             %H      time limit for excessive disk use
             %h      time limit for excessive files

       The message will only be displayed once to avoid annoying the user.  Remember that when MESSAGEs  are
       triggered  by  an  anonymous  FTP  user, the &lt;path&gt; must be relative to the base of the anonymous FTP
       directory tree.

       <b>readme</b> <b>&lt;path&gt;</b> <b>{&lt;when&gt;</b> <b>{&lt;class&gt;}}</b>
            Define a file with &lt;path&gt; such that xftpd will notify user at  login  time  or  upon  using  the
            change  working  directory  command that the file exists and was modified on such-and-such date.
            The &lt;when&gt; parameter may be "LOGIN" or "CWD=&lt;dir&gt;".  If &lt;when&gt; is "CWD=&lt;dir&gt;",  &lt;dir&gt;  specifies
            the  new  default  directory which will trigger the notification.  The message will only be dis-<font color="#ffffff" class="whiteout">played&nbsp;displayed</font>
            played once, to avoid bothering users.  Remember that when README messages are triggered  by  an
            anonymous FTP user, the &lt;path&gt; must be relative to the base of the anonymous FTP directory tree.

       The optional &lt;class&gt; specification allows the message to be displayed only to members of a particular
       class.  More than one class may be specified.

<b>Logging</b> <b>Capabilities</b>
       <b>log</b> <b>commands</b> <b>&lt;typelist&gt;</b>
            Enables logging of individual commands by users.  &lt;typelist&gt; is a comma-separated list of any of
            the keywords "anonymous" and "real".  If the "real" keyword is included, logging  will  be  done
            for  users using FTP to access real accounts, and if the "anonymous" keyword is included logging
            will done for users using anonymous FTP.

       <b>log</b> <b>transfers</b> <b>&lt;typelist&gt;</b> <b>&lt;directions&gt;</b>
            Enables logging of file transfers for either real or anonymous FTP users.  Logging of  transfers
            TO  the  server  (incoming) can be enabled separately from transfers FROM the server (outbound).
            &lt;typelist&gt; is a comma-separated list of any of the keywords  "anonymous"  and  "real".   If  the
            "real"  keyword  is  included, logging will be done for users using FTP to access real accounts,
            and if the "anonymous" keyword is included logging will done  for  users  using  anonymous  FTP.
            &lt;directions&gt;  is a comma-separated list of any of the two keywords "inbound" and "outbound", and
            will respectively cause transfers to be logged for files sent to the server and  sent  from  the
            server.

       <b>log</b> <b>security</b> <b>&lt;typelist&gt;</b>
            Enables  logging  of  violations  of  security  rules (noretrieve, .notar, ...)  for real and/or
            anonymous users.  &lt;typelist&gt; is a comma-separated list of any of the  keywords  "anonymous"  and
            "real".   If  the "real" keyword is included, logging will be done for users using FTP to access
            real accounts, and if the "anonymous" keyword is included logging  will  done  for  users  using
            anonymous FTP.

       <b>log</b> <b>syslog</b>
            Redirects  the  logging  messages  for  incoming and outgoing transfers to syslog.  Without this
            option the messages are written to xferlog.

<b>Miscellaneous</b> <b>Capabilities</b>
       <b>do_rfc931</b> <b>no</b>
            When specified, the <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><u>xftpd</u>(8)</a> server will suppress the use of RFC931 (AUTH/ident) to  attempt  to
            determine  the  username  on  the client.  This behavior may also be suppressed by providing the
            command line argument '-I' to <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><u>xftpd</u>(8)</a>.


       <b>sjis</b> <b>&lt;yes|no&gt;</b>
            Sets the Shift-JIS mode. When <u>sjis</u> is set to <u>yes</u> the <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><u>xftpd</u>(8)</a> server expects  all  user  command
            and filename input to be encoded in Shift-JIS.  All file output and banners will be sent encoded
            in Shift-JIS.


       <b>keepalive</b> <b>yes</b> <b>|</b> <b>no</b>
            Directs the server to set the "KeepAlive" TCP/IP mode for all connections.

       <b>alias</b> <b>&lt;string&gt;</b> <b>&lt;dir&gt;</b>
            Defines an alias, &lt;string&gt;, for a directory.  Can be used to add the concept of logical directo-<font color="#ffffff" class="whiteout">ries.&nbsp;directories.</font>
            ries.

       For example:
         alias   rfc:    /pub/doc/rfc
       would  allow  the  user  to access /pub/doc/rfc from any directory by the command "cd rfc:".  Aliases
       only apply to the cd command.

       <b>cdpath</b> <b>&lt;dir&gt;</b>
            Defines an entry in the cdpath. This defines a search path that is used when  changing  directo-<font color="#ffffff" class="whiteout">ries.&nbsp;directories.</font>
            ries.

       For example:
         cdpath /pub/packages
         cdpath /.aliases
       would  allow the user to cd into any directory directly under /pub/packages or /.aliases directories.
       The search path is defined by the order the lines appear in the ftpaccess file.

       If the user were to give the command:
         cd foo
       The directory will be searched for in the following order:
         ./foo
         an alias called "foo"
         /pub/packages/foo
         /.aliases/foo

       The cd path is only available with the cd command. If you have a large number of  aliases  you  might
       want  to  set  up  an  aliases directory with links to all of the areas you wish to make available to
       users.

       <b>compress</b> <b>&lt;yes|no&gt;</b> <b>&lt;classglob&gt;</b> <b>[&lt;classglob&gt;</b> <b>...]</b>

       <b>tar</b> <b>&lt;yes|no&gt;</b> <b>&lt;classglob&gt;</b> <b>[&lt;classglob&gt;</b> <b>...]</b>
            Enables compress or tar capabilities for any class matching any of &lt;classglob&gt;.  The actual con-<font color="#ffffff" class="whiteout">versions&nbsp;conversions</font>
            versions are defined in the external file FTPLIB/ftpconversions.

       <b>shutdown</b> <b>&lt;path&gt;</b>
            If  the file pointed to by &lt;path&gt; exists, the server will check the file regularly to see if the
            server is going to be shut down.  If a shutdown is planned, the user is  notified,  new  connec-<font color="#ffffff" class="whiteout">tions&nbsp;connections</font>
            tions are denied after a specified time before shutdown and current connections are dropped at a
            specified time before shutdown.  &lt;path&gt; points to a file structured as follows:
             &lt;year&gt; &lt;month&gt; &lt;day&gt; &lt;hour&gt; &lt;minute&gt; &lt;deny_offset&gt; &lt;disc_offset&gt;
             &lt;text&gt;

             &lt;year&gt; any year &gt; 1970
             &lt;month&gt; 0-11 &lt;---- LOOK!
             &lt;hour&gt; 0-23
             &lt;minute&gt; 0-59
            &lt;deny_offset&gt; and &lt;disc_offset&gt; are the offsets in HHMM format before the shutdown time that new
            connections will be denied and existing connections will be disconnected.

       &lt;text&gt;  follows the normal rules for any message (see "message"), with the following additional magic
       cookies available:
            %s      time system is going to shut down
            %r      time new connections will be denied
            %d      time current connections will be dropped
       all times are in the form: ddd MMM DD hh:mm:ss YYYY.  There can be only one "shutdown" command in the
       configuration file.

       The external program <a href="../man8/ftpshut.8.html#//apple_ref/doc/man/8/ftpshut">ftpshut(8)</a> can be used to automate the process of generating this file.

       <b>passive</b> <b>address</b> <b>&lt;externalip&gt;</b> <b>&lt;cidr&gt;</b>
            Allows  control of the address reported in response to a PASV command.  When any control connec-<font color="#ffffff" class="whiteout">tion&nbsp;connection</font>
            tion matching the <b>&lt;cidr&gt;</b> requests a passive data connection (PASV), the <b>&lt;externalip&gt;</b> address  is
            reported.   NOTE:  this  does  not  change the address the daemone actually listens on, only the
            address reported to the client.  This feature allows the daemon to operate correctly behind  IP-<font color="#ffffff" class="whiteout">renumbering&nbsp;IPrenumbering</font>
            renumbering firewalls.

       For example:
               passive address 10.0.1.15   10.0.0.0/8
               passive address 192.168.1.5 0.0.0.0/0
       Clients  connecting  from  the class-A network 10 will be told the passive connection is listening on
       IP-address 10.0.1.15 while all others will be told the connection is listening on 192.168.1.5

       Multiple passive addresses may be specified to handle complex, or multi-gatewayed, networks.

       <b>passive</b> <b>ports</b> <b>&lt;cidr&gt;</b> <b>&lt;min&gt;</b> <b>&lt;max&gt;</b>
            Allows control of the TCP port numbers which may be used for a passive data connection.  If  the
            control  connection  matches  the  <b>&lt;cidr&gt;</b>  a  port  in the range <b>&lt;min&gt;</b> to <b>&lt;max&gt;</b> will be randomly
            selected for the daemon to listen on.  This feature allows firewalls to limit  the  ports  which
            remote clients may use to connect into the protected network.

       <b>&lt;cidr&gt;</b>  is  shorthand for an IP address in dotted-quad notation followed by a slash and the number of
       left-most bits which represent the network address (as opposed to the machine address).  For example,
       if  you're  using the reserved class-A network 10, instead of a netmask of 255.0.0.0 use a CIDR of /8
       as in 10.0.0.0/8 to represent your network.


       <b>Permission</b> <b>Capabilities</b>

       <b>auth_level</b> <b>standard</b> <b>|</b> <b>gssapi</b> <b>|</b> <b>both</b>
            Sets the level of authentication <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><u>xftpd(8)</u></a><u></u> will accept for login.  <u>standard</u> will accept a cleart-<font color="#ffffff" class="whiteout">ext&nbsp;cleartext</font>
            ext  password  using  the  <b>PASS</b>  command.  <u>gssapi</u> will accept a <b>Kerberos</b> <b>v5</b> <b>(GSS)</b> service ticket
            using the <b>ADAT</b> command.  <u>both</u> directs <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><u>xftpd(8)</u></a><u></u> to accept either authentication method.

       <b>chroot_type</b> <b>standard</b> <b>|</b> <b>homedir</b> <b>|</b> <b>restricted</b>
            Sets the type of restricted environment the user is under when  he  logs  on.   <u>standard</u>  Allows
            users  to  access  the ftp root, their homedir, and sharepoints.  <u>homedir</u> Allows users to access
            the their homedir and sharepoints.  <u>restricted</u> restricts users to their own home directory.

       <b>chmod</b> <b>&lt;yes|no&gt;</b> <b>&lt;typelist&gt;</b>

       <b>delete</b> <b>&lt;yes|no&gt;</b> <b>&lt;typelist&gt;</b>

       <b>overwrite</b> <b>&lt;yes|no&gt;</b> <b>&lt;typelist&gt;</b>

       <b>rename</b> <b>&lt;yes|no&gt;</b> <b>&lt;typelist&gt;</b>

       <b>umask</b> <b>&lt;yes|no&gt;</b> <b>&lt;typelist&gt;</b>
            Allows or disallows the ability to perform the specified function.  By default,  all  users  are
            allowed.

       &lt;typelist&gt;  is  a comma-separated list of any of the keywords "anonymous", "real" and "class=".  When
       "class=" appears, it must be followed by a classname.  If any class= appears, the &lt;typelist&gt; restric-<font color="#ffffff" class="whiteout">tion&nbsp;restriction</font>
       tion applies only to users in that class.

       <b>anonFTP</b> <b>yes</b> <b>|</b> <b>no</b>
            Enables/Disables anonymous ftp.

       <b>passwd-check</b> <b>&lt;none|trivial|rfc822&gt;</b> <b>(&lt;enforce|warn&gt;)</b>
            Define the level and enforcement of password checking done by the server for anonymous ftp.
              none      no password checking performed.
              trivial   password must contain an '@'.
              rfc822    password must be an rfc822 compliant address.

              warn      warn the user, but allow them to log in.
              enforce   warn the user, and then log them out.

       <b>deny-email</b> <b>&lt;case-insensitive-email-address&gt;</b>
            Consider  the e-mail address given as an argument as invalid. If passwd-check is set to enforce,
            anonymous users giving this address as password cannot log in.  That way,  you  can  stop  users
            from  having  stupid WWW browsers use fake addresses like IE?0User@ or mozilla@. (by using this,
            you are not shutting out users using a WWW browser for ftp - you just make them configure  their
            browser correctly.)  Only one address per line, but you can have as many deny-email addresses as
            you like.

       <b>defrootdir</b> <b>path</b>
            Sets <u>path</u> as the root directory for the FTP server.

       <b>path-filter</b> <b>&lt;typelist&gt;</b> <b>&lt;mesg&gt;</b> <b>&lt;allowed_charset&gt;</b> <b>{&lt;disallowed</b> <b>regexp&gt;</b> <b>...}</b>
            For users in &lt;typelist&gt;, path-filter defines regular expressions that control  what  a  filename
            can  or  can not be.  There may be multiple disallowed regexps.  If a filename is invalid due to
            failure to match the regexp criteria, &lt;mesg&gt; will be displayed to the user.  For example:
              path-filter anonymous /etc/pathmsg ^[-A-Za-z0-9._]*$ ^\. ^-<font color="#ffffff" class="whiteout">specifies&nbsp;^specifies</font>
            specifies that all upload filenames for anonymous users must be made of only the characters A-Z,
            a-z,  0-9,  and  "._-"  and  may  not  begin  with  a "." or a "-".  If the filename is invalid,
            /etc/pathmsg will be displayed to the user.

       <b>upload</b> <b>[absolute|relative]</b> <b>[class=&lt;classname&gt;]...</b> <b>[-]</b> <b>&lt;root-dir&gt;</b> <b>&lt;dirglob&gt;</b> <b>&lt;yes|no&gt;</b>  <b>&lt;owner&gt;</b>  <b>&lt;group&gt;</b>
       <b>&lt;mode&gt;</b> <b>["dirs"|"nodirs"]</b> <b>[&lt;d_mode&gt;]</b>
            Define a directory with &lt;dirglob&gt; that permits or denies uploads.

       If it does permit uploads, all files will be owned by &lt;owner&gt; and &lt;group&gt; and will have  the  permis-<font color="#ffffff" class="whiteout">sions&nbsp;permissions</font>
       sions set according to &lt;mode&gt;.

       Directories are matched on a best-match basis.

       For example:
         upload  /var/ftp  *               no
         upload  /var/ftp  /incoming       yes  ftp  daemon  0666
         upload  /var/ftp  /incoming/gifs  yes  jlc  guest   0600  nodirs
       This would only allow uploads into /incoming and /incoming/gifs.  Files that were uploaded to /incom-<font color="#ffffff" class="whiteout">ing&nbsp;/incoming</font>
       ing would be owned by ftp/daemon and would have permissions of 0666.  File uploaded to /incoming/gifs
       would  be  owned  by jlc/guest and have permissions of 0600. Note that the &lt;root-dir&gt; here must match
       the home directory specified in the password database for the "ftp" user.

       The optional "dirs" and "nodirs" keywords can be specified to allow or disallow the creation  of  new
       subdirectories using the mkdir command.

       Note  that if the upload command is used, directory creation is allowed by default. To turn it off by
       default, you must specify a user, group and mode followed by the "nodirs" keyword as the  first  line
       where the upload command is used in this file.

       If  directories  are  permitted, the optional &lt;d_mode&gt; determines the permissions for a newly created
       directory.  If &lt;d_mode&gt; is omitted, the permissions are inferred from &lt;mode&gt; or are 0777 if &lt;mode&gt; is
       also omitted.

       The upload keyword only applies to users who have a home directory (the argument to the chroot() ) of
       &lt;root-dir&gt;.  &lt;root-dir&gt; may be specified as "*" to match any home directory.

       The &lt;owner&gt; and/or &lt;group&gt; may each be specified as "*", in which case any uploaded files or directo-<font color="#ffffff" class="whiteout">ries&nbsp;directories</font>
       ries will be created with the ownership of the directory in which they are created.

       The  optional first parameter selects whether &lt;root-dir&gt; names are intepreted as absolute or relative
       to the current chroot'd environment.  The default is to intepret &lt;root-dir&gt; names as absolute.

       You can specify any number of 'class=&lt;classname&gt;' restrictions.  If any are  specified,  this  upload
       clause only takes effect if the current user is a member of one of the classes.


       <b>throughput</b>  <b>&lt;root-dir&gt;</b>  <b>&lt;subdir-glob&gt;</b> <b>&lt;file-glob-list&gt;</b> <b>&lt;bytes-per-second&gt;</b> <b>&lt;bytes-per-second-multiply&gt;</b>
       <b>&lt;remote-glob-list&gt;</b>

            Define  files  via  comma-seperated  &lt;file-glob-list&gt;  in  subdir matched by &lt;subdir-glob&gt; under
            &lt;root-dir&gt; that have restricted transfer throughput of &lt;bytes-per-second&gt; on download  when  the
            remote hostname or remote IP address matches the comma-seperated &lt;remote-glob-list&gt;.

            Entries are matched on a best-match basis.

            For example:
             throughput /e/ftp *    *      oo   -   *
             throughput /e/ftp /sw* *      1024 0.5 *
             throughput /e/ftp /sw* README oo   -   *
             throughput /e/ftp /sw* *      oo   -   *.foo.com

            This  would  set  maximum  throughput per default, but restrict download to 1024 bytes/s for any
            files under /e/ftp/sw/ which are not named README. The only exceptions  are  remote  hosts  from
            within  the  domain  foo.com which always get maximum throughput. Every time a remote client has
            retrieved a file under /e/ftp/sw/ the bytes per seconds of the matched entry line are internally
            multiplied  by  a  factor,  here  0.5. So when the remote client retrieves its second file it is
            served with 512 bytes/s, the third time with only 254 bytes/s, the fourth  time  with  only  128
            bytes/s and so on.

            The  string "oo" for the bytes per second field means no throughput restriction. A multiply fac-<font color="#ffffff" class="whiteout">tor&nbsp;factor</font>
            tor of 1.0 or "-" means no change of the throughput after every successful transfer.

            Note that the &lt;root-dir&gt; here must match the home directory specified in the  password  database
            for the "ftp" user.  The throughput keyword only applies to users who have a home directory (the
            argument to the chroot() ) of &lt;root-dir&gt;.


       <b>deny-uid</b> <b>&lt;uid-range&gt;</b> <b>[...]</b>

       <b>deny-gid</b> <b>&lt;gid-range&gt;</b> <b>[...]</b>

       <b>allow-uid</b> <b>&lt;uid-range&gt;</b> <b>[...]</b>

       <b>allow-gid</b> <b>&lt;gid-range&gt;</b> <b>[...]</b>

            These clauses allow specification of UID and GID values which will be denied access to  the  ftp
            server.  The allow-uid and allow-gid clauses may be used to allow access for uid/gid which would
            otherwise be denied.  These checks occur before all others.  Deny is checked before allow.   The
            default  is  to  allow  access.   Note  that  in  most  cases,  this  can remove the need for an
            /etc/ftpusers files.  For example:

              deny-gid %-99 %65535
              deny-uid %-99 %65535
              allow-gid ftp
              allow-uid ftp

            denies ftp access to all privileged or special users and groups box except the  anonymous  'ftp'
            user/group.  In many cases, this can eliminate the need for the /etc/ftpusers file.  support for
            that file still exists so it may be used when changing /etc/ftpaccess is not desired.

            Throughout the ftpaccess file, any place a single UID or GID is allowed, either names or numbers
            may  be used.  To use numbers, put a '%' before it.  In places where a range is allowed, put the
            '%' before the range.


<b>Files</b>
       FTPLIB/ftpaccess

<b>See</b> <b>Also</b>
       <a href="../man8/xftpd.8.html#//apple_ref/doc/man/8/xftpd"><b>xftpd(8)</b></a><b>,</b> <a href="../man2/umask.2.html#//apple_ref/doc/man/2/umask"><b>umask(2)</b></a><b></b>, <a href="xferlog.5.html#//apple_ref/doc/man/5/xferlog"><b>xferlog(5)</b></a><b></b>, <a href="ftpconversions.5.html#//apple_ref/doc/man/5/ftpconversions"><b>ftpconversions(5)</b></a><b></b>, <a href="../man8/ftpshut.8.html#//apple_ref/doc/man/8/ftpshut"><b>ftpshut(8)</b></a><b></b>




                                                                                                ftpaccess(5)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/ftpaccess.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/ftpaccess.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/ftpaccess.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

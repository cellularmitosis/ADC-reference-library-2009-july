<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Accessing Adaptor Sublayer Objects</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2f.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.31.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=609604"> </A><A NAME="27044"> </A>Accessing Adaptor Sublayer Objects</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606144"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606145"> </A>Describes how to get the adaptor, adaptor context, and adaptor channel objects used by an editing context or a display group.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606146"> </A>Description</H2><P CLASS="Body"><A NAME="pgfId=621372"> </A>To access an EOEditingContext's adaptor sublayer objects, you get the editing context's EOObjectStoreCoordinator from the editing context, you get an EODatabaseContext from the object store coordinator, and you get the adaptor sublayer objects from there. The following code demonstrates the process.</P><PRE CLASS="Code"><A NAME="pgfId=621052"> </A><TT CLASS="Code">EOEditingContext editingContext;    // Assume this exists.</TT><A NAME="pgfId=622417"> </A><TT CLASS="Code">String entityName;                  // Assume this exists.</TT><A NAME="pgfId=622421"> </A><TT CLASS="Code"></TT><A NAME="pgfId=622486"> </A><TT CLASS="Code">EOAdaptor adaptor;</TT><A NAME="pgfId=622422"> </A><TT CLASS="Code">EOAdaptorContext adContext;</TT><A NAME="pgfId=622458"> </A>EOAdaptorChannel adChannel;<A NAME="pgfId=622423"> </A><TT CLASS="Code"></TT><A NAME="pgfId=622424"> </A><TT CLASS="Code">EOFetchSpecification fspec =</TT><A NAME="pgfId=622490"> </A><TT CLASS="Code">    new EOFetchSpecification(entityName, null, null);</TT><A NAME="pgfId=622425"> </A><TT CLASS="Code">EOObjectStoreCoordinator rootStore =</TT><A NAME="pgfId=622478"> </A><TT CLASS="Code">    (EOObjectStoreCoordinator)editingContext.rootObjectStore();</TT><A NAME="pgfId=622426"> </A><TT CLASS="Code">EODatabaseContext dbContext = (EODatabaseContext)rootStore.</TT><A NAME="pgfId=622427"> </A><TT CLASS="Code">    objectStoreForFetchSpecification(fspec);</TT><A NAME="pgfId=622428"> </A><TT CLASS="Code">EODatabaseChannel dbChannel = dbContext.availableChannel();</TT><A NAME="pgfId=622492"> </A><A NAME="pgfId=622491"> </A><TT CLASS="Code">adaptor = dbContext.database().adaptor();</TT><A NAME="pgfId=622429"> </A><TT CLASS="Code">adContext = dbContext.adaptorContext();</TT><A NAME="pgfId=622457"> </A>adChannel = dbChannel.adaptorChannel();<A NAME="pgfId=622493"> </A><A NAME="pgfId=622498"> </A>adChannel.openChannel();  // before you use the database<A NAME="pgfId=622596"> </A>                          // channel or the adaptor channel</PRE><P CLASS="Body"><A NAME="pgfId=621075"> </A>This example first creates a fetch specification, providing just the entity name as an argument. Of course, you can use a fetch specification that has non-<EM CLASS="Bold">null</EM> values for all of its arguments, but only the entity name is used by the EOObjectStore <TT CLASS="Code">objectStoreForFetchSpecification</TT> method. Next, the example gets the editing context's EOObjectStoreCoordinator using the EOEditingContext method <TT CLASS="Code">rootObjectStore</TT>. This method returns an EOObjectStore and not an EOObjectStoreCoordinator, because it's possible to substitute a custom object store in place of an object store coordinator. Similarly, the EOObjectStoreCoordinator method <TT CLASS="Code">objectStoreForFetchSpecification</TT> returns an EOCooperatingObjectStore instead of an EODatabaseContext because it's possible to substitute a custom cooperating object store in place of a database context. If your code performs any such substitutions, you should alter the above code example to match your custom object store's API. See the class specifications for EOObjectStore, EOObjectStoreCoordinator, and EOCooperatingObjectStore for more information.</P><P CLASS="Body"><A NAME="pgfId=622575"> </A>The EODatabaseContext maintains a link to its EOAdaptorContext from which the code gets the EOAdaptor. To get the EOAdaptorChannel, the code invokes <TT CLASS="Code">availableChannel</TT> on the EODatabaseContext, which creates an EODatabaseChannel and an EOAdaptorChannel if they don't already exist.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=621213"> </A>Accessing Multiple Adaptor Sublayer Objects</H3><P CLASS="Body"><A NAME="pgfId=621401"> </A>An EOEditingContext's EOObjectStoreCoordinator can have more than one set of database and adaptor sublayer objects. Consequently, to get a database context from the object store coordinator, you have to provide information that the coordinator can use to choose the correct database context. The code example above provides an EOFetchSpecification using the method <TT CLASS="Code">objectStoreForFetchSpecification</TT>, but you could specify different criteria by using one of the following EOObjectStoreCoordinator methods instead:</P><TABLE BORDER="1" CELLPADDING="3"><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="CellHeading"><A NAME="pgfId=621267"> </A>Method</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="CellHeading"><A NAME="pgfId=621269"> </A>Description</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=621271"> </A><TT CLASS="Code">cooperatingObjectStores</TT></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=621273"> </A>Returns an array of the EOObjectStoreCoordinator's cooperating object stores.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=621275"> </A><TT CLASS="Code">objectStoreForGlobalID</TT></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=621277"> </A>Returns the cooperating object store for the enterprise object identified by the provided EOGlobalID</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=621279"> </A><TT CLASS="Code">objectStoreForObject</TT></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=621281"> </A>Returns the cooperating object store for the provided enterprise object.</P></TD></TR></TABLE><P CLASS="Body"><A NAME="pgfId=621231"> </A>After you have the database context, you can get the corresponding EOAdaptor and EOAdaptorContext as shown in the example above.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=621395"> </A>Accessing Adaptor Layer Objects From a Display Group</H3><P CLASS="Body"><A NAME="pgfId=621417"> </A>If you are using a display group and a corresponding EODatabaseDataSource, the code to access the adaptor layer objects is a little simpler.</P><PRE CLASS="Code"><A NAME="pgfId=621418"> </A>WODisplayGroup myDisplayGroup;   // Assume exists<A NAME="pgfId=622447"> </A>EOAdaptorContext myAdaptorContext;<A NAME="pgfId=622448"> </A>EOAdaptor myAdaptor;<A NAME="pgfId=622527"> </A><A NAME="pgfId=622528"> </A>EODatabaseDataSource ds = (EODatabaseDataSource)myDisplayGroup.dataSource();<A NAME="pgfId=622529"> </A>EODatabaseContext dbContext = ds.databaseContext();<A NAME="pgfId=622505"> </A>EODatabaseChannel dbChannel = dbContext.availableChannel();<A NAME="pgfId=622518"> </A><A NAME="pgfId=621422"> </A>myAdaptorContext = dbContext().adaptorContext();<A NAME="pgfId=622451"> </A>myAdaptor = myAdaptorContext.adaptor();<A NAME="pgfId=622473"> </A>myAdaptorChannel = dbChannel.adaptorChannel();</PRE><P CLASS="Body"><A NAME="pgfId=622553"> </A>The code first gets the display group's EODatabaseDataSource. From there it finds the display group's EODatabaseContext.</P></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=616408"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=616420"> </A><A HREF="ProgrammingTopics.31.html#17565" CLASS="XRef">Creating Adaptor Sublayer Objects and Connecting Them to the Server</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=622393"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=616440"> </A>How do I access adaptor sublayer objects?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606168"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=620953"> </A>EOAdaptor</LI><LI CLASS="Bulleted"><A NAME="pgfId=621357"> </A>EOEditingContext</LI><LI CLASS="Bulleted"><A NAME="pgfId=622607"> </A>Adaptor Sublayer</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606171"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=616160"> </A>10 March 1999. Clif Liu. First Draft.</P><P CLASS="Body"><A NAME="pgfId=620972"> </A></P></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2f.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.31.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
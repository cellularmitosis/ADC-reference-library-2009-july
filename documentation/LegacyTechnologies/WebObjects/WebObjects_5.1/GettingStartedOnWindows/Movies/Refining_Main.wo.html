<HTML>		<HEAD>        <title>RefiningMain.wo</title>		</HEAD>	<BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Examining_Your_Project.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Adding_the__etails_Page.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF125"></a><h2><font face="Helvetica,Arial,Lucida Grande">RefiningMain.wo</font></h2><!-- apple_doc: pageHeadingEnd --><p><font face="Times">You may have noticed that your application doesn't listfetched movies in any particular order. Also, when you insert anew movie, it appears in the list of movies as a blank line.</font></p><P><img src = "../Art/blankmov.gif" alt = "[image: ../Art/blankmov.gif]"><p><font face="Times"></font></p><p><font face="Times">In this section you'll tidy up the user interface to fixthese things and a few others. Specifically, you'll</font></p><ul><p><li>Configure <code>movieDisplayGroup</code> tosort the movies it displays.</li></p><p><li>Assign default values to new Movie objects.</li></p><p><li>Change the way that dates and numbers are displayed.</li></p></ul><p><font face="Times">You can also put the query part of the page in a table andcapitalize <code>Main.wo</code>'stext field labels-for example, use "Title" instead of "title"and "Date Released" instead of "dateReleased."</font></p><a name = "BCIJJBDJ"></a><h3><font face="Helvetica,Arial,Lucida Grande">Specifyinga Sort Order</font></h3><p><font face="Times">You can change your application to sort movies alphabeticallywithout writing any code. Display groups manage sorting behavior,and WebObjects Builder provides a Display Group Options panel forconfiguring this and other characteristics of display groups.</font></p><ol><p><li>Double-clickthe <code>movieDisplayGroup</code> variablein the object browser.<p>The Display Group Options panel opensfor configuring <code>movieDisplayGroup</code>.</p><P><img src = "../Art/dgoption.gif" alt = "[image: ../Art/dgoption.gif]"></li></p><p><li>Select the <code>title</code> attributein the Sorting pop-up list.</li></p><p><li>Select Ascending.</li></p><p><li>Click OK.</li></p></ol><p><font face="Times">WebObjects Builder stores your settings in an archive thatspecifies how to create and configure <code>movieDisplayGroup</code> atruntime. The archive is stored inside your Main component in a filenamed <code>Main.woo</code>. You can'tsee the file from Project Builder because you're not meant toedit it directly, but WebObjects Builder's object browser showsyou which of your component's variables are initialized from thearchive (or <code>woo</code> file)so you don't have to view its contents directly.</font></p><P><img src = "../Art/mdgvar.gif" alt = "[image: ../Art/mdgvar.gif]"><a name = "BCICIHII"></a><h3><font face="Helvetica,Arial,Lucida Grande">SpecifyingDefault Values for New Enterprise Objects</font></h3><p><font face="Times">When new enterprise objects are created in your application,it's common to assign default values to some of their properties.For example, in your Movies application it makes sense to assigna default value for the <code>title</code> attributeso a new movie won't be displayed in the list of movies as a blankline.</font></p><p><font face="Times">You could write an action method for the Insert/New buttoninstead of binding it directly to the display group <code>insert</code> actionmethod. In the custom action, you would create a new Movie object,assign default values to it, and then insert the new object intothe display group. However, there are two additional ways to specifydefault values for new enterprise objects, without making explicitassignments:</font></p><ul><p><li>Assign defaultvalues in the enterprise object class.</li></p><p><li>Specify default values using a display group.</li></p></ul><p><font face="Times">For a particular situation, one of the approaches is usuallybetter than the other. If the default values are intrinsic to theenterprise object, assign them in the enterprise object class. Forexample, consider a Member class with a <code>memberSince</code> property.It's likely that you would automatically assign the current dateto <code>memberSince</code> insteadof forcing a user to supply a value. You'll see how to use thistechnique in  <a href="Adding_Beha_ise_Objects.html#BCIGCIBA" target = "_right">"Adding Behavior to Your Enterprise Objects"</a>.</font></p><p><font face="Times">On the other hand, if the default values are specific to anapplication or to a particular user interface, explicitly initializethe object in code or specify the default values using a display group.In the Movies application, the need for default values is motivatedby Main's user interface: you need to provide a default valueso users can tell when a newly inserted record is selected. In anothersituation, you might not want a new movie to have a default title;you might instead want a new movie's title to be blank.</font></p><p><font face="Times">The Movies application specifies default values for newlycreated Movie objects using the display group, <code>movieDisplayGroup</code>.</font></p><ol><p><li>Open <code>Main.java</code> inProject Builder.</li></p><p><li>Change the Main class' constructor so that it looks likethe following:<pre>    public Main(WOContext context) {        super(context);        NSMutableDictionary defaultValues = new NSMutableDictionary();        defaultValues.setObjectForKey("New Movie Title", "title");        movieDisplayGroup.setInsertedObjectDefaultValues(defaultValues);    }</pre><p>Thismethod assigns the value "New Movie Title" as the default valuefor a new movie's <code>title</code> attribute.When <code>movieDisplayGroup</code> insertsa new movie (as it does when a user clicks the Insert/New button),it creates a new movie and assigns this default value to that movie.</p></li></p></ol><a name = "TPXREF126"></a><h3><font face="Helvetica,Arial,Lucida Grande">Settinga Date Format</font></h3><p><font face="Times">To change the way that dates are displayed, you assign a dateformat to the element that displays the dates.</font></p><ol><p><li>Using WebObjectsBuilder, inspect the <code>dateReleased</code> textfield, which is near the bottom of the Main component window.<p>Noticethat the text field has a <code>dateformat</code> attributethat is bound to the string "%m/%d/%Y". This binding tells thetext field that it's displaying dates and describes how to formatthem. The %m conversion specifier stands for month as a decimalnumber, %d stands for day of the month, and %Y stands for year withcentury.</p></li></p><p><li>Click the combo box on the right side of the binding column.Choose "%d %B %Y".<p>This date format displays dates as 14Jan 2005. The %b conversion specifier stands for abbreviated monthname, and %Y stands for year with century. You can create your owndate formats with any of the conversion specifiers defined for dates.For more information, see the NSTimestamp class specification inthe <em>Foundation Framework Reference</em>.</p><P><img src = "../Art/datefld.gif" alt = "[image: ../Art/datefld.gif]"></li></p></ol><a name = "TPXREF127"></a><h3><font face="Helvetica,Arial,Lucida Grande">Settinga Number Format</font></h3><p><font face="Times">In addition to a <code>dateformat</code> attribute,text field elements also have a <code>numberformat</code> attribute.</font></p><ol><p><li>Inspect the <code>revenue</code> textfield.<p>The <code>revenue</code> textfield's <code>numberformat</code> attributehas no binding.</p></li></p><p><li>Enter "$###,##0" as the value of the <code>numberFormat</code> attribute(including the quotes).<p>Using this number format, the Moviesapplication formats the number 1750000 as $1,750,000. For more informationon creating number formats, see the NSNumberFormatter class specificationin the <em>Foundation Framework Reference</em>.</p></li></p></ol><a name = "TPXREF128"></a><h3><font face="Helvetica,Arial,Lucida Grande">OptionalExercise</font></h3><p><font face="Times">You can tidy up the user interface even further by puttingthe query part of the page in a table to match the editing partof the page. Also, you should consider capitalizing <code>Main.wo</code>'s textfield labels.</font></p><p><font face="Times">To put the query part of the page in a table, follow thesesteps:</font></p><ol><p><li>Put the cursorinside the form element before the "title" text field (in theQuery By Example segment).</li></p><p><li>Click the <img src = "../Art/table.gif" alt = "[image: ../Art/table.gif]"> buttonin the toolbar to add a table.<p>The table panel appears.</p><P><img src = "../Art/tablepanel.gif" alt = "[image: ../Art/tablepanel.gif]"></li></p><p><li>Enter 2 in the Rows field and 2 in the Columns field.</li></p><p><li>Enter 0 for in the Border field to remove the appearance ofa border.</li></p><p><li>Uncheck "First row cells are header cells." The firstrow text will not appear in bold.</li></p><p><li>Click OK. The table appears in your page. </li></p><p><li>Type the labels Title: and Category: in the cells in the firstcolumn.<p>The table doesn't resize to accommodate new cellcontent until you're done typing; that is, until you move thecursor out of the edited cell.</p></li></p><p><li>Cut and paste the query text fields into their correspondingtable cells.<p>Just click a text field to select it. When a textfield is selected, it appears shaded with a box around it. ChooseCut from the Edit menu, double-click the cell to select its text, andchoose Paste from the Edit menu.</p></li></p><p><li>Delete the old query field labels.</li></p></ol><p><font face="Times">When you're done, the query part should look like this: </font></p><P><img src = "../Art/fintable.gif" alt = "[image: ../Art/fintable.gif]"><p><font face="Times">Now edit the text labels in the editing part of the page andput any other finishing touches on the page that you want. The finishedcomponent might look something like this:</font></p><P><img src = "../Art/finpage.gif" alt = "[image: ../Art/finpage.gif]">    <br><a href="Examining_Your_Project.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Adding_the__etails_Page.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<p><font face="Geneva,Helvetica,Arial" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
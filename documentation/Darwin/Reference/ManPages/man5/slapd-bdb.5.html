<html><head><title>Mac OS X
 Manual Page For slapd-bdb(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/slapd-bdb" title="Mac OS X
 Manual Page for slapd-bdb(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/slapd-bdb"; name=slapd-bdb(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
SLAPD-BDB(5)                                                                                    SLAPD-BDB(5)



<b>NAME</b>
       <b>slapd-bdb</b>, <b>slapd-hdb</b> - Berkeley DB backends to <b>slapd</b>

<b>SYNOPSIS</b>
       <b>/etc/openldap/slapd.conf</b>

<b>DESCRIPTION</b>
       The  <b>bdb</b> backend to <a href="../man8/slapd.8.html#//apple_ref/doc/man/8/slapd"><b>slapd</b>(8)</a> is the recommended primary backend for a normal <b>slapd</b> database.  It uses
       the Sleepycat Berkeley DB (BDB) package to store data.   It  makes  extensive  use  of  indexing  and
       caching to speed data access.

       <b>hdb</b>  is  a variant of the <b>bdb</b> backend that uses a hierarchical database layout which supports subtree
       renames. It is otherwise identical to the <b>bdb</b> behavior, and all the same configuration options apply.

       It  is  noted  that these options are intended to complement Berkeley DB configuration options set in
       the environment's <b>DB_CONFIG</b> file.  See Berkeley DB documentation for details on <b>DB_CONFIG</b>  configura-<font color="#ffffff" class="whiteout">tion&nbsp;configuration</font>
       tion options.  Where there is overlap, settings in <b>DB_CONFIG</b> take precedence.

<b>CONFIGURATION</b>
       These  <b>slapd.conf</b>  options  apply  to  the <b>bdb</b> and <b>hdb</b> backend database.  That is, they must follow a
       "database bdb" or "database hdb" line and come before any subsequent "backend" or  "database"  lines.
       Other database options are described in the <a href="slapd.conf.5.html#//apple_ref/doc/man/5/slapd.conf"><b>slapd.conf</b>(5)</a> manual page.

       <b>cachesize</b> <u>&lt;integer&gt;</u>
              Specify  the size in entries of the in-memory entry cache maintained by the <b>bdb</b> or <b>hdb</b> backend
              database instance.  The default is 1000 entries.

       <b>cachefree</b> <u>&lt;integer&gt;</u>
              Specify the number of entries to free from the entry cache when the cache reaches  the  <b>cache</b>-<font color="#ffffff" class="whiteout">size&nbsp;cachesize</font>
              <b>size</b> limit.  The default is 1 entry.

       <b>checkpoint</b> <u>&lt;kbyte&gt;</u> <u>&lt;min&gt;</u>
              Specify  the frequency for checkpointing the database transaction log.  A checkpoint operation
              flushes the database buffers to disk and writes a checkpoint record in the  log.   The  check-<font color="#ffffff" class="whiteout">point&nbsp;checkpoint</font>
              point  will  occur  if either <u>&lt;kbyte&gt;</u> data has been written or <u>&lt;min&gt;</u> minutes have passed since
              the last checkpoint.  Both arguments default to zero, in which case they are ignored. When the
              <u>&lt;min&gt;</u>  argument  is  non-zero,  an  internal  task will run every <u>&lt;min&gt;</u> minutes to perform the
              checkpoint.  See the Berkeley DB reference guide for more details.

       <b>dbconfig</b> <u>&lt;Berkeley-DB-setting&gt;</u>
              Specify a configuration directive to be placed in the <b>DB_CONFIG</b> file of  the  database  direc-<font color="#ffffff" class="whiteout">tory.&nbsp;directory.</font>
              tory.  The <b>dbconfig</b> directive is just a convenience to allow all necessary configuration to be
              set in the <b>slapd.conf</b> file.  The options set using this directive will only be written to  the
              <b>DB_CONFIG</b>  file if no such file existed at server startup time. This allows one to set initial
              values without overwriting/destroying a <b>DB_CONFIG</b> file that  was  already  customized  through
              other means.  This directive may be specified multiple times, as needed.  For example:
                   dbconfig set_cachesize 0 1048576 0
                   dbconfig set_lg_bsize 2097152

       <b>dbnosync</b>
              Specify  that  on-disk database contents should not be immediately synchronized with in memory
              changes.  Enabling this option may improve performance at the expense of data  security.   See
              the Berkeley DB reference guide for more details.

       <b>directory</b> <u>&lt;directory&gt;</u>
              Specify  the  directory  where  the  BDB files containing this database and associated indexes
              live.   A  separate  directory  must  be  specified  for  each  database.   The   default   is
              <b>/var/db/openldap/openldap-data</b>.

       <b>dirtyread</b>
              Allow reads of modified but not yet committed data.  Usually transactions are isolated to pre-<font color="#ffffff" class="whiteout">vent&nbsp;prevent</font>
              vent other operations from accessing uncommitted data.  This option may  improve  performance,
              but  may  also  return inconsistent results if the data comes from a transaction that is later
              aborted.  In this case, the modified data is discarded and a subsequent search will  return  a
              different result.

       <b>idlcachesize</b> <u>&lt;integer&gt;</u>
              Specify  the  size of the in-memory index cache, in index slots. The default is zero. A larger
              value will speed up frequent searches of indexed entries. An <b>hdb</b> database needs a  large  <b>idl</b>-<font color="#ffffff" class="whiteout">cachesize&nbsp;idlcachesize</font>
              <b>cachesize</b>  for good search performance, typically three times the <b>cachesize</b> (entry cache size)
              or larger.

       <b>index</b> {<u>&lt;attrlist&gt;</u>|<b>default</b>} [<b>pres</b>,<b>eq</b>,<b>approx</b>,<b>sub</b>,<u>&lt;special&gt;</u>]
              Specify the indexes to maintain for  the  given  attribute  (or  list  of  attributes).   Some
              attributes  only  support a subset of indexes.  If only an <u>&lt;attr&gt;</u> is given, the indices speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
              fied for <b>default</b> are maintained.  Note  that  setting  a  default  does  not  imply  that  all
              attributes  will  be indexed. Also, for best performance, an <b>eq</b> index should always be config-<font color="#ffffff" class="whiteout">ured&nbsp;configured</font>
              ured for the <b>objectClass</b> attribute.

              A number of special index parameters may be specified.  The index type <b>sub</b> can  be  decomposed
              into  <b>subinitial</b>,  <b>subany</b>, and  <b>subfinal</b> indices.  The special type <b>nolang</b> may be specified to
              disallow use of this index by language subtypes.  The special type <b>nosubtypes</b> may be specified
              to  disallow  use  of  this  index  by  named  subtypes.   Note:  changing  <b>index</b>  settings in
              <a href="slapd.conf.5.html#//apple_ref/doc/man/5/slapd.conf"><b>slapd.conf</b>(5)</a> requires rebuilding indices, see <a href="../man8/slapindex.8.html#//apple_ref/doc/man/8/slapindex"><b>slapindex</b>(8)</a>; changing <b>index</b>  settings  dynami-<font color="#ffffff" class="whiteout">cally&nbsp;dynamically</font>
              cally  by LDAPModifying "cn=config" automatically causes rebuilding of the indices online in a
              background task.

       <b>linearindex</b>
              Tell <b>slapindex</b> to index one attribute at a time. By default,  all  indexed  attributes  in  an
              entry  are  processed  at the same time. With this option, each indexed attribute is processed
              individually, using multiple passes through the entire database. This option improves  <b>slapin</b>-<font color="#ffffff" class="whiteout">dex&nbsp;slapindex</font>
              <b>dex</b>  performance  when  the  database size exceeds the <b>dbcache</b> size. When the <b>dbcache</b> is large
              enough, this option is not needed and will decrease performance.   Also  by  default,  <b>slapadd</b>
              performs  full  indexing and so a separate <b>slapindex</b> run is not needed. With this option, <b>sla</b>-<font color="#ffffff" class="whiteout">padd&nbsp;slapadd</font>
              <b>padd</b> does no indexing and <b>slapindex</b> must be used.

       <b>lockdetect</b> {<b>oldest</b>|<b>youngest</b>|<b>fewest</b>|<b>random</b>|<b>default</b>}
              Specify which transaction to abort when a deadlock is detected.  The default is <b>random</b>.

       <b>mode</b> <u>&lt;integer&gt;</u>
              Specify the file protection mode that newly created database index  files  should  have.   The
              default is 0600.

       <b>searchstack</b> <u>&lt;depth&gt;</u>
              Specify  the  depth of the stack used for search filter evaluation.  Search filters are evalu-<font color="#ffffff" class="whiteout">ated&nbsp;evaluated</font>
              ated on a stack to accommodate nested AND / OR clauses. An individual  stack  is  assigned  to
              each  server  thread.  The depth of the stack determines how complex a filter can be evaluated
              without requiring any additional memory allocation. Filters that are nested  deeper  than  the
              search  stack  depth  will  cause  a separate stack to be allocated for that particular search
              operation. These allocations can have a major negative impact on server performance, but spec-<font color="#ffffff" class="whiteout">ifying&nbsp;specifying</font>
              ifying  too  much stack will also consume a great deal of memory.  Each search stack uses 512K
              bytes per level. The default stack depth is 16, thus 8MB per thread is used.

       <b>shm_key</b> <u>&lt;integer&gt;</u>
              Specify a key for a shared memory BDB environment. By default the BDB environment uses  memory
              mapped  files.  If  a  non-zero  value  is specified, it will be used as the key to identify a
              shared memory region that will house the environment.

<b>ACCESS</b> <b>CONTROL</b>
       The <b>bdb</b> and <b>hdb</b> backends honor access control semantics as indicated in <a href="slapd.access.5.html#//apple_ref/doc/man/5/slapd.access"><b>slapd.access</b>(5)</a>.

<b>FILES</b>
       <b>/etc/openldap/slapd.conf</b>
              default <b>slapd</b> configuration file

       <b>DB_CONFIG</b>
              Berkeley DB configuration file

<b>SEE</b> <b>ALSO</b>
       <a href="slapd.conf.5.html#//apple_ref/doc/man/5/slapd.conf"><b>slapd.conf</b>(5)</a>, <a href="../man8/slapd.8.html#//apple_ref/doc/man/8/slapd"><b>slapd</b>(8)</a>, <a href="../man8/slapadd.8.html#//apple_ref/doc/man/8/slapadd"><b>slapadd</b>(8)</a>, <a href="../man8/slapcat.8.html#//apple_ref/doc/man/8/slapcat"><b>slapcat</b>(8)</a>, <a href="../man8/slapindex.8.html#//apple_ref/doc/man/8/slapindex"><b>slapindex</b>(8)</a>, Berkeley DB documentation.



OpenLDAP 2.3.27                                  2006/08/19                                     SLAPD-BDB(5)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/slapd-bdb.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/slapd-bdb.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/slapd-bdb.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

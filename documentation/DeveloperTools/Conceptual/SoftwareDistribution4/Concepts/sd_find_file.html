<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Finding Previously Installed Software</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Finding Previously Installed Software"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001941" title="Finding Previously Installed Software"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_pkg_flags.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_pkg_version_info.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001941-CIAHIEAF" title="Finding Previously Installed Software"></a><hr /><H1>Finding Previously Installed Software</H1><p>This section describes the Find File feature, which allows you to provide Installer with information to help it find software from a previous installation. This feature was introduced in Mac OS X version 10.2. Enhancements introduced in Mac OS X version 10.3 are noted throughout this section.</p><p>Installer looks for a receipt in <code>/Library/Receipts</code> that matches the current package to determine whether you are installing software for the first time or upgrading it. However, the receipt doesn’t necessarily specify where the software currently resides. If Installer can’t find previously installed software, it can’t upgrade it, and instead must do a full installation.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001941-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;If a receipt exists, Installer reports that it is doing an upgrade, even if it doesn’t find the previously installed software and must do a full installation. For more information, see <span class="content_text"><a href="sd_install_upgrade.html#//apple_ref/doc/uid/20001762-TPXREF2">“Installs and Upgrades.”</a></span></p></div><p>You can use the Find File feature to provide rules to help Installer find software from a previous installation. This feature is most useful for software that can easily be moved by the user after installation, such as self-contained application bundles. It isn’t needed for any software that must reside in a certain location, such as a KEXT (kernel extension). Application bundles are described in <span class="content_text"><a href="sd_guidelines.html#//apple_ref/doc/uid/20001758-1036551">“Drag-and-Drop Installation.”</a></span></p><p>In conjunction with using the Find File feature to help Installer find previously installed software, you can use the feature described in <span class="content_text"><a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-TPXREF4">“Specifying Version Information for Packaged Software”</a></span> to help Installer determine which software needs to be upgraded.</p><p>PackageMaker does not currently provide a user interface for accessing the Find File feature. As a result, to use it, you supply information by directly editing the information in property list files in a package. The information you need to supply is described below; for information on how to edit property list files, see <span class="content_text"><a href="sd_pkg_flags.html#//apple_ref/doc/uid/20001940-TPXREF3">“Examining and Modifying Property Lists.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1030070-TPXREF1">Tokens Definitions and Path Mappings</a>
				
			<br/>
			
        
			
			
				<a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1047745-TPXREF4">Application Selection By the User</a>
				
			<br/>
			
        
			
			
				<a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1028446-CIHFHHJH">Search Methods</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001941-1030070" title="Tokens Definitions and Path Mappings"></a><a name="//apple_ref/doc/uid/20001941-1030070-TPXREF1" title="Tokens Definitions and Path Mappings"></a><h2>Tokens Definitions and Path Mappings</h2><p>To help Installer find your previously installed software, you provide information about the software items to search for and the search methods to use. To do this, you create token definitions and path mappings in your package.</p><a name="//apple_ref/doc/uid/20001941-1063447" title="Token Definitions"></a><a name="//apple_ref/doc/uid/20001941-1063447-CIAJFIID" title="Token Definitions"></a><h3>Token Definitions</h3><p>A token acts as an identifier for an abstract place in the file system. A token may resolve to different locations depending on how the user has arranged his or her files. For example, you could define a token “iChat” whose value is the path to the <code>iChat.app</code> application bundle, wherever the user has placed it.</p><p>To define tokens within your package, you create a property list file named <code>TokenDefinitions.plist</code> in your package’s <code>Resources</code> directory. The top-level container in this file should be a dictionary, and each key should be the name of a token that you wish to define in your package. The value for each token should be an array of one or more invocations to search methods, specifying the search logic to use when resolving the token. For more detailed information on creating token definitions, including documentation of the specific search methods, see <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1028446">“Search Methods.”</a></span></p><p><span class="content_text">Listing 1</span> shows a sample <code>TokenDefinitions.plist</code> file in XML format. This property list defines a token “ClockToken” corresponding to <code>Clock.app</code>, which is typically located in <code>/Applications</code>. This example uses the search method <code>CommonAppSearch</code>, which is specified as the value for the <code>searchPlugin</code> key. For information on this search method, see <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1044661">“CommonAppSearch.”</a></span></p><a name="//apple_ref/doc/uid/20001941-1041296-CIAIFCHJ" title="Listing 1A TokenDefinitions.plist file"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1041296" title="Listing 1A TokenDefinitions.plist file"></a><strong>Listing 1&nbsp;&nbsp;</strong>A TokenDefinitions.plist file</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist SYSTEM "file://localhost/System/Library/DTDs/PropertyList.dtd"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="0.9"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ClockToken&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>CommonAppSearch&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;key>path&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>/Applications/Clock.app&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>com.apple.clock&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1039165" title="Path Mappings"></a><a name="//apple_ref/doc/uid/20001941-1039165-CIAFEAFD" title="Path Mappings"></a><h3>Path Mappings</h3><p>A path mapping entry tells Installer which files within your package should be installed at the location defined by the token, rather than at the default location where the package would otherwise install them. That is, the token is resolved according to the search method or methods it specifies, and the result is used to specify the installation location. </p><p>A path mapping specifies the beginning part of a path, and every file within the package whose path begins with the specified path beginning will be installed at the new location.</p><p>If you don’t specify a token and a path mapping, or if you specify them but the software to be updated is not found at the location they specify, files in your package are installed at a location that is constructed from the installation volume chosen by the user, the default location specified in your package, and the relative path to the file in the package (which is based on how you set up the files relative to your root directory when you created the package).</p><div class="notebox"><a name="//apple_ref/doc/uid/20001941-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;During testing, you can see where your files are actually installed by looking in the Installer Log window, which is described in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1021220">“Viewing the Installer Log and Script Output.”</a></span></p></div><p>If you do specify a token (with one or more search methods) and a path mapping, and the software to be updated is found, the token is resolved to the path to the location where the software was found. This path includes volume information—a token may resolve to a location on a different volume than the installation volume chosen by the user. Files that match the path mapping are then installed at a location constructed from the resolved path (including volume), plus the part of the path in the package that wasn’t matched by the path mapping.</p><p>To add path mappings, you create a new key <code>IFPkgPathMappings</code> in your package’s <code>Info.plist</code> file. The value of this property is a dictionary where each key is a partial path inside the package. These paths should correspond to the relative paths output by the <code>lsbom</code> tool. The value for each entry is a string that specifies the new path that a file should be mapped to. The path can begin with a symbolic reference to a token, surrounded by curly braces—for example, <code>{ClockToken}</code>.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001941-DontLinkElementID_16" title="Note"></a><p><strong>Note:</strong>&nbsp;For related information, see the documentation for IFPkgFlagDefaultLocation in <span class="content_text"><a href="sd_pkg_flags.html#//apple_ref/doc/uid/20001940-1014280">“Keys That Can Appear Only in Single Packages.”</a></span></p></div><p><span class="content_text">Listing 2</span> shows an entry for the <code>IFPkgPathMappings</code> key from a package’s <code>Info.plist</code> file. This mapping causes the <code>Clock.app</code> bundle and all of its contained files to be installed in the location resolved by the token defined in <span class="content_text">Listing 1</span>.</p><a name="//apple_ref/doc/uid/20001941-1041884-CIAEBHEG" title="Listing 2An entry for the IFPkgPathMappings key in an information property list"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1041884" title="Listing 2An entry for the IFPkgPathMappings key in an information property list"></a><strong>Listing 2&nbsp;&nbsp;</strong>An entry for the IFPkgPathMappings key in an information property list</p><div class="codesample"><table><tr><td scope="row"><pre>    &lt;key>IFPkgPathMappings&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>./Applications/Clock.app&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>{ClockToken}&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1047745" title="Application Selection By the User"></a><a name="//apple_ref/doc/uid/20001941-1047745-TPXREF4" title="Application Selection By the User"></a><h2>Application Selection By the User</h2><p>Starting in Mac OS X version 10.3, a package can specify that the user should be consulted regarding which version to update if multiple copies are found. This is accomplished by defining a special token named <code>UserLocation</code>. The <code>UserLocation</code> token is resolved like any other token, but if multiple copies of the specified software are found, the user is asked to choose which copy to upgrade. The value that the user chooses becomes the new value of the token when it is used in path mappings (described in <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1039165">“Path Mappings.”</a></span></p><p><span class="content_text">Listing 3</span> shows a <code>UserLocation</code> token definition in a <code>TokenDefinitions.plist</code> file (described in <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1063447">“Token Definitions”</a></span>).</p><a name="//apple_ref/doc/uid/20001941-1047801-CIAICFEF" title="Listing 3A UserLocation token in a TokenDefinitions.plist"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1047801" title="Listing 3A UserLocation token in a TokenDefinitions.plist"></a><strong>Listing 3&nbsp;&nbsp;</strong>A UserLocation token in a TokenDefinitions.plist</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist SYSTEM "file://localhost/System/Library/DTDs/PropertyList.dtd"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="0.9"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>UserLocation&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>CommonAppSearch&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;key>path&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>/Applications/Clock.app&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>com.apple.clock&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1028446" title="Search Methods"></a><a name="//apple_ref/doc/uid/20001941-1028446-CIHFHHJH" title="Search Methods"></a><h2>Search Methods</h2><p>You can use token definitions to create highly customized behaviors for locating and identifying your software. You do this by stringing together search method invocations. The search methods are invoked in the order specified in the token definition, until one of them returns a success code. At that time, the array of search results is returned to Installer. The array contains the path to the location to which the token resolves.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001941-DontLinkElementID_17" title="Important:"></a><p><strong>Important:</strong>&nbsp;A user may have versions of the specified software in more than one of the locations you tell Installer to search. Because Installer always updates the first version it finds, you should attempt to set up your searches so that the version you would most like to update is found first. The <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1044661">“CommonAppSearch”</a></span> method attempts to find the version that is most likely to be the one the user wants to update.</p><p></p></div><p>To define a token that specifies how to locate your software, you add a key for the token, with an appropriate token name, to the <code>TokenDefinitions.plist</code> file. You then add an array of dictionaries as the value for that key. Each dictionary specifies a search method that is invoked during installation. <span class="content_text">Listing 1</span> shows a token definition that specifies a single search method.</p><p>The following sections describe the search methods Installer currently supports and the required and optional keys for those search methods.</p><a name="//apple_ref/doc/uid/20001941-1063523" title="CheckPath"></a><a name="//apple_ref/doc/uid/20001941-1063523-TPXREF2" title="CheckPath"></a><h3>CheckPath</h3><p>You use the <code>CheckPath</code> search method to specify the path where installed software might be found. This is the simplest search method—it succeeds if a file or directory exists at the specified path, and fails otherwise.</p><p>The <code>CheckPath</code> search method has one key:</p><dl class="termdef">	<dl class="content_text"><b><code>path</code></b><dd><p><em>required</em></p><p>A string specifying the path to search (such as <code>/Applications</code>).</p></dd></dl></dl><p><span class="content_text">Listing 4</span> shows a token definition that uses <code>CheckPath</code> to sequentially check several locations where the application may reside.</p><a name="//apple_ref/doc/uid/20001941-1042087-CIAFEBBB" title="Listing 4A token definition that uses the CheckPath search method"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1042087" title="Listing 4A token definition that uses the CheckPath search method"></a><strong>Listing 4&nbsp;&nbsp;</strong>A token definition that uses the CheckPath search method</p><div class="codesample"><table><tr><td scope="row"><pre>    &lt;key>ClockToken&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>CheckPath&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>path&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>/Applications/Clock.app&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>CheckPath&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>path&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>/Applications/Utilities/Clock.app&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>CheckPath&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>path&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>~/Applications/Clock.app&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/array><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1040536" title="LaunchServicesLookup"></a><a name="//apple_ref/doc/uid/20001941-1040536-TPXREF3" title="LaunchServicesLookup"></a><h3>LaunchServicesLookup</h3><p>You use the <code>LaunchServicesLookup</code> search method to consult the database maintained by Launch Services in looking for the software.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001941-DontLinkElementID_18" title="Note"></a><p><strong>Note:</strong>&nbsp;Launch Services is a framework that provides an API for launching applications in Mac OS X. A framework is a type of bundle (or directory in the file system) that packages software with the resources that software requires.</p></div><p>The <code>LaunchServicesLookup</code> search method has the following keys:</p><dl class="termdef">	<dl class="content_text"><b><code>identifier</code></b><dd><p><em>optional</em></p><p>The <code>CFBundleIdentifier</code> for the bundle the search is intended to locate A <code>CFBundleIdentifier</code> is the unique identifier string for a bundle and should be in the form of a java package name (for example, <code>com.apple.clock</code>).</p><p>Prior to Mac OS X version 10.3 (v10.3), this key was required. Starting in Mac OS X v10.3, you must specify either this key or the <code>creator</code> key.</p></dd></dl><dl class="content_text"><b><code>creator</code></b><dd><p><em>optional</em></p><p>A string that specifies a four-character creator (for example, <code>ttxt</code> for the TextEdit application).</p><p>Prior to Mac OS X v10.3, this key was required. Starting in Mac OS X v10.3, you must specify either this key or the <code>identifier</code> key.</p></dd></dl><dl class="content_text"><b><code>type</code></b><dd><p><em>optional</em></p><p>A string that specifies a four-character document type the application can open (for example, <code>TEXT</code>).</p><p>Starting in Mac OS X v10.3, this key is ignored, and you must specify either the <code>creator</code> key or the <code>identifier</code> key.</p></dd></dl><dl class="content_text"><b><code>extension</code></b><dd><p><em>optional</em></p><p>The extension for a file type the application can open (for example, <code>.txt</code>).</p><p>Starting in Mac OS X v10.3, this key is ignored, and you must specify either the <code>creator</code> key or the <code>identifier</code> key.</p></dd></dl></dl><p><span class="content_text">Listing 5</span> shows a token definition that uses <code>LaunchServicesLookup</code>.</p><a name="//apple_ref/doc/uid/20001941-1042611-CIADCHHF" title="Listing 5A token definition that uses the LaunchServicesLookup search method"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1042611" title="Listing 5A token definition that uses the LaunchServicesLookup search method"></a><strong>Listing 5&nbsp;&nbsp;</strong>A token definition that uses the LaunchServicesLookup search method</p><div class="codesample"><table><tr><td scope="row"><pre>    &lt;key>ClockToken&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>LaunchServicesLookup&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>com.apple.clock&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/array><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1040900" title="BundleIdentifierSearch"></a><a name="//apple_ref/doc/uid/20001941-1040900-TPXREF3" title="BundleIdentifierSearch"></a><h3>BundleIdentifierSearch</h3><p>The <code>BundleIdentifierSearch</code> search method performs an exhaustive search of the entire file system, looking for bundles with the specified <code>CFBundleIdentifier</code>.</p><p>The <code>BundleIdentifierSearch</code> search method has the following required and optional keys:</p><dl class="termdef">	<dl class="content_text"><b><code>startingPoint</code></b><dd><p><em>optional</em></p><p>A string specifying the path to from which to start searching. If this is not specified, <code>/</code> is assumed.</p></dd></dl><dl class="content_text"><b><code>identifier</code></b><dd><p><em>required</em></p><p>The <code>CFBundleIdentifier</code> for the bundle that the search is intended to locate (for example, <code>com.apple.clock</code>).</p></dd></dl><dl class="content_text"><b><code>successCase</code></b><dd><p><em>optional</em></p><p>Specifies the behavior to use when the <code>BundleIdentifierSearch</code> search method succeeds. It can take one of three values:</p><ul class="termdef"><li class="termdef"><p><code>findOne</code> Terminates the search as soon as a match is identified. This can be the most efficient choice. It is also the default choice.</p></li><li class="termdef"><p><code>findAll</code> Exhaustively iterates over the entire file system, looking for all matches. Succeeds if any matches are found.</p></li><li class="termdef"><p><code>neverSucceed</code> Iterates over the entire file system, and compiles results that can be used by the <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1040718">“BundleVersionFilter”</a></span> search method. See <span class="content_text">Listing 7</span> for an example.</p></li></ul></dd></dl><dl class="content_text"><b><code>maxDepth</code></b><dd><p><em>optional</em></p><p>The maximum directory depth to descend in the search. For example, specifying a depth of 3 would limit the search to no more than three directories deep. Provided for efficiency, so that searching needn’t proceed down deeply nested hierarchies that are unlikely to contain the software.</p></dd></dl><dl class="content_text"><b><code>excludedDirs</code></b><dd><p><em>optional</em></p><p>An array of one or more strings, each of which identifies a directory that should be excluded from the search. This key is also provided for efficiency: for example, you can avoid a great deal of searching by excluding the locations <code>/System</code> and <code>/Developer</code> if your software is unlikely to be located within either of those directories.</p></dd></dl></dl><p><span class="content_text">Listing 6</span> shows a token definition that uses <code>BundleIdentifierSearch</code>.</p><a name="//apple_ref/doc/uid/20001941-1043361-CIAJGCFC" title="Listing 6A token definition that uses the BundleIdentifierSearch search method"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1043361" title="Listing 6A token definition that uses the BundleIdentifierSearch search method"></a><strong>Listing 6&nbsp;&nbsp;</strong>A token definition that uses the BundleIdentifierSearch search method</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>ClockToken&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>BundleIdentifierSearch&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>com.apple.clock&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>excludedDirs&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>/System&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>/Developer&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>/AppleInternal&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>maxDepth&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;integer>6&lt;/integer><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>startingPoint&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>/&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>successCase&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>findOne&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/array><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1040718" title="BundleVersionFilter"></a><a name="//apple_ref/doc/uid/20001941-1040718-CIAFBBFC" title="BundleVersionFilter"></a><h3>BundleVersionFilter</h3><p>You use the <code>BundleVersionFilter</code> search method to filter the results returned by the previous invocation of a search method. It succeeds if one or more bundles fall within the specified version range, and fails otherwise. This search method was added in Mac OS X version 10.3.</p><p>The <code>BundleVersionFilter</code> search method has the following keys (you must specify at least one of the keys):</p><dl class="termdef">	<dl class="content_text"><b><code>maxVersion</code></b><dd><p><em>optional</em></p><p>The maximum version allowed. Specified as a 5-tuple version in a string. The first three numbers correspond to the <code>CFBundleShortVersionString</code>. For more information, see <span class="content_text"><a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-1016661">“How Installer Computes a Version.”</a></span></p></dd></dl><dl class="content_text"><b><code>minVersion</code></b><dd><p><em>optional</em></p><p>The minimum version allowed.</p></dd></dl></dl><p><span class="content_text">Listing 7</span> shows a token definition that uses <code>BundleVersionFilter</code>.</p><a name="//apple_ref/doc/uid/20001941-1043916-CIADACGJ" title="Listing 7A token definition that uses the BundleVersionFilter search method"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1043916" title="Listing 7A token definition that uses the BundleVersionFilter search method"></a><strong>Listing 7&nbsp;&nbsp;</strong>A token definition that uses the BundleVersionFilter search method</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>ClockToken&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>BundleIdentifierSearch&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>com.apple.clock&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>maxDepth&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;integer>6&lt;/integer><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>successCase&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>neverSucceed&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>BundleVersionFilter&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>maxVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1.0.0.99999999.9&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>minVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1.0.0.0.0&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/array><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001941-1044661" title="CommonAppSearch"></a><a name="//apple_ref/doc/uid/20001941-1044661-CIABDFFA" title="CommonAppSearch"></a><h3>CommonAppSearch</h3><p>If you do not require a highly customized search behavior, you can use the <code>CommonAppSearch</code> search method and save a lot of typing. This search method, which is first available in Mac OS X version 10.3, attempts to locate at least one copy of the specified application.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001941-DontLinkElementID_19" title="Note"></a><p><strong>Note:</strong>&nbsp;<code>CommonAppSearch</code> is simply a macro that expands to a more complicated token definition.</p></div><p>The <code>CommonAppSearch</code> search method has the following required keys:</p><dl class="termdef">	<dl class="content_text"><b><code>path</code></b><dd><p><em>required</em></p><p>The default path to the application to locate.</p></dd></dl><dl class="content_text"><b><code>identifier</code></b><dd><p><em>required</em></p><p>The <code>CFBundleIdentifier</code> of the bundled application to locate.</p></dd></dl></dl><p><span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-1041296-CIAIFCHJ">Listing 1</a></span> provides an example of how to use <code>CommonAppSearch</code>.</p><a name="//apple_ref/doc/uid/20001941-1048021" title="A Token Definition for a Complex Search"></a><a name="//apple_ref/doc/uid/20001941-1048021-TPXREF4" title="A Token Definition for a Complex Search"></a><h3>A Token Definition for a Complex Search</h3><p><span class="content_text">Listing 8</span> provides an example of a token definition that combines three search methods: <code>CheckPath</code>, <code>LaunchServicesLookup</code>, and <code>BundleIdentifierSearch</code>.</p><a name="//apple_ref/doc/uid/20001941-1048034-CIAJEEEG" title="Listing 8Expansion of the CommonAppSearch macro"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001941-1048034" title="Listing 8Expansion of the CommonAppSearch macro"></a><strong>Listing 8&nbsp;&nbsp;</strong>Expansion of the CommonAppSearch macro</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>ClockToken&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>CheckPath&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>path&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>{path Argument}&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>LaunchServicesLookup&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>{identifier Argument}&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>searchPlugin&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>BundleIdentifierSearch&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>identifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>{identifier Argument}&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>excludedDirs&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>/System&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>/Developer&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>/AppleInternal&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>maxDepth&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;integer>6&lt;/integer><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>startingPoint&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>/&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>successCase&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>findOne&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/array><span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_pkg_flags.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_pkg_version_info.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_find_file.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_find_file.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_find_file.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
